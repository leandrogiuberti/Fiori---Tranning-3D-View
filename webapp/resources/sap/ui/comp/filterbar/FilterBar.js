/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/base/i18n/Localization","sap/ui/core/Element","sap/ui/core/Lib","sap/ui/core/library","sap/ui/core/Control","sap/ui/core/ResizeHandler","sap/m/Button","sap/m/Label","sap/m/Title","sap/m/Text","sap/m/AssociativeOverflowToolbar","sap/m/ToolbarSpacer","sap/ui/Device","sap/ui/comp/state/UIState","./VariantConverterFrom","./VariantConverterTo","sap/ui/comp/smartvariants/PersonalizableInfo","sap/ui/comp/smartvariants/SmartVariantManagement","sap/m/library","sap/ui/model/json/JSONModel","./FilterGroupItem","./FilterBarRenderer","sap/base/Log","sap/base/util/merge","sap/ui/core/ShortcutHintsMixin","sap/base/util/Deferred","sap/m/delegate/ValueStateMessage","sap/m/ToolbarSeparator","sap/ui/layout/form/Form"],function(e,t,i,r,a,n,s,o,l,h,d,u,g,f,p,_,c,m,F,A,y,I,v,V,b,S,B,C,T){"use strict";var R=r.ValueState;var D=i.getResourceBundleFor("sap.ui.comp").getText("SEARCH_FIELD_VALIDATION_WARNING_MESSAGE");var M=r.TextAlign;var E=r.TitleLevel;var N=F.ButtonType;var T;var L=a.extend("sap.ui.comp.filterbar.FilterBar",{metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/filterbar/FilterBar.designtime",properties:{persistencyKey:{type:"string",group:"Misc",defaultValue:""},advancedMode:{type:"boolean",group:"Misc",defaultValue:false},expandAdvancedArea:{type:"boolean",group:"Misc",defaultValue:false,deprecated:true},searchEnabled:{type:"boolean",group:"Misc",defaultValue:true,deprecated:true},filterBarExpanded:{type:"boolean",group:"Misc",defaultValue:true},considerGroupTitle:{type:"boolean",group:"Misc",defaultValue:false},showAllFilters:{type:"boolean",group:"Misc",defaultValue:false},showClearButton:{type:"boolean",group:"Misc",defaultValue:false,deprecated:true},showRestoreButton:{type:"boolean",group:"Misc",defaultValue:true},showGoOnFB:{type:"boolean",group:"Misc",defaultValue:true},showRestoreOnFB:{type:"boolean",group:"Misc",defaultValue:false},showClearOnFB:{type:"boolean",group:"Misc",defaultValue:false},showGoButton:{type:"boolean",group:"Misc",defaultValue:null,deprecated:true},deltaVariantMode:{type:"boolean",group:"Misc",defaultValue:true},filterContainerWidth:{type:"string",group:"Misc",defaultValue:"12rem"},useToolbar:{type:"boolean",group:"Misc",defaultValue:true},header:{type:"string",group:"Misc",defaultValue:""},showFilterConfiguration:{type:"boolean",group:"Misc",defaultValue:true},useSnapshot:{type:"boolean",group:"Misc"},isRunningInValueHelpDialog:{type:"boolean",group:"Misc",defaultValue:false},disableSearchMatchesPatternWarning:{type:"boolean",group:"Misc",defaultValue:false},headerLevel:{type:"sap.ui.core.TitleLevel",group:"Appearance",defaultValue:E.Auto}},aggregations:{filterItems:{type:"sap.ui.comp.filterbar.FilterItem",multiple:true,singularName:"filterItem"},filterGroupItems:{type:"sap.ui.comp.filterbar.FilterGroupItem",multiple:true,singularName:"filterGroupItem"},content:{type:"sap.ui.core.Control",multiple:true},_parameters:{type:"sap.ui.comp.filterbar.FilterGroupItem",multiple:true,singularName:"_parameter",visibility:"hidden"},_toolbar:{type:"sap.m.AssociativeOverflowToolbar",multiple:false,visibility:"hidden"},_headerTitle:{type:"sap.m.Title",multiple:false,visibility:"hidden"},_variantManagement:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_basicSearch:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_searchButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_hideShowButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_clearButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_restoreButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_filtersButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_showAllFiltersButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_hintText:{type:"sap.m.Text",multiple:false,visibility:"hidden"}},defaultAggregation:"content",associations:{basicSearch:{type:"sap.m.SearchField",multiple:false}},events:{cancel:{},reset:{parameters:{selectionSet:{type:"sap.ui.core.Control[]"}}},search:{parameters:{selectionSet:{type:"sap.ui.core.Control[]"},firedFromFilterBar:{type:"boolean"}}},beforeVariantSave:{parameters:{context:{type:"string"}}},beforeVariantFetch:{},afterVariantLoad:{parameters:{context:{type:"string"},executeOnSelect:{type:"boolean"}}},filterChange:{parameters:{added:{type:"sap.ui.core.Control"},deleted:{type:"sap.ui.core.Control"},filterItem:{type:"sap.ui.comp.filterbar.FilterGroupItem"}}},clear:{parameters:{selectionSet:{type:"sap.ui.core.Control[]"}}},initialise:{},initialized:{},afterVariantSave:{},filtersDialogClosed:{parameters:{context:{type:"string"}}},filtersDialogBeforeOpen:{},filtersDialogSearch:{},filtersDialogCancel:{},filtersDialogSearchForFilters:{parameters:{newValue:{type:"string"}}},assignedFiltersChanged:{}}},renderer:I});L.INTERNAL_GROUP="__$INTERNAL$";L.prototype.init=function(){a.prototype.init.apply(this,arguments);this._filterGroupItemChange=this._filterGroupItemChange.bind(this);this._filterItemChange=this._filterItemChange.bind(this,null);this._onLocalizationChanged=this._onLocalizationChanged.bind(this);this._oVariantManagement=null;this._oCollectiveSearch=null;this._aBasicAreaSelection=null;this._mAdvancedAreaFilter=null;this._mAdvancedAreaFilterFlat=[];this._aOrderedFilterItems=[];this._aAdaptFilterItems=[];this._mAdvancedAreaHiddenFilters=[];this._mAdaptFiltersDialogInitialItemsOrder=[];this._fRegisteredFetchData=null;this._fRegisteredApplyData=null;this._fRegisterGetFiltersWithValues=null;this._bIsInitialized=false;this._bSearchFiredFromFilterBar=false;this._bMoveTriggered=false;this._bDelegateAdded=false;this._oInitializedDeferred=new S;this._aFields=null;this._oBasicSearchField=null;this._oVariant={};this._oSelectedVariantBase=null;this._filterChangeSemaphore=true;this._triggerFilterChangeState=true;this._fRegisteredFilterChangeHandlers=null;this._fInitialiseVariants=null;this._bHostedVariantManagement=false;this._bFiltersDialogForKeyUser=false;this._nMaxFiltersByDefault=7;this._bResetFiltersDialogTriggered=false;this._oRb=i.getResourceBundleFor("sap.ui.comp");this._createVariantLayout();this._createButtons();this._createHeaderTitle();this._createToolbar();this.oModel=new A({});this.setModel(this.oModel,"FilterBar");this._oHintText=new h({text:this._oRb.getText("FILTER_BAR_NO_FILTERS_ON_FB"),textAlign:M.Center}).addStyleClass("sapUiCompFilterBarHint");this.setAggregation("_hintText",this._oHintText);if(this._isTablet()||this._isPhone()){this.setFilterBarExpanded(false)}this.getMetadata().addPublicMethods("getInitializedPromise");this._oClearButtonOnFB=this._getClearButton();e.attachChange(this._onLocalizationChanged)};L.prototype.onBeforeRendering=function(){const e=!!this._mAdvancedAreaFilter;a.prototype.onBeforeRendering.apply(this,arguments);this._updateHideShowButtonText();this._updateHeaderTitle();this._updateToolbarText();this._getClearButton().setVisible(this.getShowClearOnFB());this._getRestoreButton().setVisible(this.getShowRestoreOnFB());this._calcVisibilityFiltersButton();this._calcVisibilityHideShowButton();this._calcVisibilityGoButton();this._calcVisibilityVariant();this._calcVisibilityBasicSearch();this._calcVisibilitySeparator();this._getClearButton().setEnabled(e);this._getRestoreButton().setEnabled(e);this._getFiltersButton().setEnabled(e);this._getHideShowButton().setEnabled(e);this._getSearchButton().setEnabled(this.getSearchEnabled());this._suspendSuggestionBindingOnhiddenItems();this._deregisterResizeHandlers()};L.prototype.onAfterRendering=function(e){a.prototype.onAfterRendering.apply(this,arguments);this._applyAttributes();this._registerResizeHandlers();this._onResize()};L.prototype._registerResizeHandlers=function(){const e=this.$("item-buttons").get(0);this._iResizeHandlerId=n.register(this,this._onResize.bind(this));if(e){this._iButtonsAreaResizeHandlerId=n.register(e,this._onResize.bind(this))}};L.prototype._deregisterResizeHandlers=function(){if(this._iResizeHandlerId){n.deregister(this._iResizeHandlerId);this._iResizeHandlerId=null}if(this._iButtonsAreaResizeHandlerId){n.deregister(this._iButtonsAreaResizeHandlerId);this._iButtonsAreaResizeHandlerId=null}};L.prototype._suspendSuggestionBindingOnhiddenItems=function(){this.getFilterGroupItems().forEach(e=>{const t=e.getControl();if(!t){return}const i=this._getControlBoundAggregationName(t);if(e.getVisible()){t.getBinding(i)?.resume()}else{t.getBinding(i)?.suspend()}})};L.prototype._getControlBoundAggregationName=function(e){if(e.isBound("items")){return"items"}if(e.isBound("suggestionItems")){return"suggestionItems"}if(e.isBound("suggestionRows")){return"suggestionRows"}};L.prototype._onResize=function(){if(!this.getAdvancedMode()||this.getIsRunningInValueHelpDialog()){this._onNonAdvancedModeResize()}else if(this.getAdvancedMode()){this._onAdvancedModeResize()}};L.prototype._onAdvancedModeResize=function(){const e=this.getDomRef();if(!e){return}e.classList.remove("sapUiCompFilterBarTablet");e.classList.remove("sapUiCompFilterBarDesktop");if(e.offsetWidth>605&&e.offsetWidth<=1024){e.classList.add("sapUiCompFilterBarTablet")}if(e.offsetWidth>1024){e.classList.add("sapUiCompFilterBarDesktop")}};L.prototype._onNonAdvancedModeResize=function(){const e=16,t=this.getDomRef(),i=t?.querySelector(".sapUiCompFilterBarButtons"),r=t?.querySelector(".sapUiCompFilterBarBasicSearch"),a=t?.querySelectorAll(".sapUiCompFilterBarItem"),n=a?.length>0?a[0]:r,s=a?.length>0?a[a.length-1]:r;if(!n||!s||!i||t?.offsetHeight===0){return}const o=i.getBoundingClientRect(),l=n.getBoundingClientRect(),h=s.getBoundingClientRect();let d="";if(o.x-e>=h.x+h.width){d=`margin-top: -${h.height}px`}if(h.width<l.width){d=""}i.style=d;if(l.y===h.y){t.classList.add("sapUiCompFilterBarOneLine")}else{t.classList.remove("sapUiCompFilterBarOneLine")}};L.prototype.getShowAllFiltersButton=function(){return this._getShowAllFiltersButton()};L.prototype._getMaxItemWidth=function(){var e,t,i=this.getFilterContainerWidth();["rem","%","px","em"].some(function(t){var r=i.indexOf(t);if(r>0){i=i.substring(0,r);e=t;return true}return false});if(e){t=parseInt(i);if(!isNaN(t)){t*=2;return t+e}}};L.prototype._hasAnyVisibleFiltersOnFB=function(){var e=this._retrieveVisibleAdvancedItems();for(var t=0;t<e.length;t++){if(e[t].filterItem.getVisibleInFilterBar()){return true}}return false};L.prototype._hasRelevantFilters=function(){var e,t=null,i;if(!this._mAdvancedAreaFilter||Object.keys(this._mAdvancedAreaFilter)<1){return false}if(this.getAdvancedMode()){for(t in this._mAdvancedAreaFilter){var r=this._mAdvancedAreaFilter[t];if(r&&r.items){for(e=0;e<r.items.length;e++){i=r.items[e];if(i){if(this._determineVisibility(i.filterItem)){return true}}}}}return false}return true};L.prototype.getVariantManagement=function(){return this._oVariantManagement};L.prototype._updateHideShowButtonText=function(){let e=this.getFilterBarExpanded()?"FILTER_BAR_HIDE":"FILTER_BAR_SHOW";if(this.getAdvancedMode()){e=this.getFilterBarExpanded()?"FILTER_BAR_VH_HIDE_FILTERS":"FILTER_BAR_VH_SHOW_FILTERS"}this._getHideShowButton().setText(this._oRb.getText(e))};L.prototype._calcVisibilityBasicSearch=function(){let e=true;if(!this._oBasicSearchField){return}if(!this._isNewFilterBarDesign()&&this._isPhone()&&!this.getAdvancedMode()){e=false}this._oBasicSearchField.setVisible(e)};L.prototype._calcVisibilitySeparator=function(){const e=this.getAggregation("_headerTitle"),t=this._oVariantManagement;let i=false;if(this._oBasicSearchField&&!this._isPhone()&&!this.getIsRunningInValueHelpDialog()&&(e?.getVisible()||t?.getVisible())){i=true}this._oSeparator.setVisible(i)};L.prototype._calcVisibilityVariant=function(){if(!this._oVariantManagement||this.getAssociation("smartVariant")){return false}let e=true;if(this._possibleToChangeVariantManagement()&&(this.getAdvancedMode()||!this.getPersistencyKey())){e=false}this._oVariantManagement.setVisible(e)};L.prototype._calcVisibilityFiltersButton=function(){this._getFiltersButton().setVisible(!this.getAdvancedMode()&&this.getShowFilterConfiguration())};L.prototype._calcVisibilityHideShowButton=function(){if(this.getAdvancedMode()&&!this._isPhone()){this._getHideShowButton().setVisible(this._hasRelevantFilters())}else if(this._isPhone()){this._getHideShowButton().setVisible(false)}};L.prototype._calcVisibilityGoButton=function(){var e=this.getShowGoOnFB();if(e&&!this._isPhone()&&this.isLiveMode&&this.isLiveMode()){e=false}this._getSearchButton().setVisible(e)};L.prototype.setShowGoButton=function(e){return this.setShowGoOnFB(e)};L.prototype.getShowGoButton=function(){return this.getShowGoOnFB()};L.prototype.hideGoButton=function(){this._getSearchButton().setVisible(false)};L.prototype.restoreGoButton=function(){this._getSearchButton().setVisible(this.getShowGoOnFB())};L.prototype.isCurrentVariantStandard=function(){var e;if(this._oVariantManagement){e=this._oVariantManagement.getCurrentVariantId();if(e===""){return true}return e===this._oVariantManagement.getStandardVariantKey()}return undefined};L.prototype.setCurrentVariantId=function(e,t){if(this._oVariantManagement){this._oVariantManagement.setCurrentVariantId(e,t)}};L.prototype.getCurrentVariantId=function(){var e="";if(this._oVariantManagement){e=this._oVariantManagement.getCurrentVariantId()}return e};L.prototype.getDataSuiteFormat=function(e){return this._getDataSuiteFormat(e,null)};L.prototype._getDataSuiteFormat=function(e,t){var i=null,r,a,n,s,o;if(this._oVariantManagement){r=this.getCurrentVariantId();if(this.getFilterDataAsString){n=this._determineVariantFiltersInfo(e,true);if(this.getFilterContextUrl){o=this.getFilterContextUrl()}if(this.getParameterContextUrl){s=this.getParameterContextUrl()}a=this.getFilterDataAsString(e);if(a){var l=new _;i=l.convert(r,n,a,this,t,s,o)}}}return i};L.prototype.getBasicSearchName=function(){var e=null;if(this._oBasicSearchField&&this.getEntitySet){e="$"+this.getEntitySet()+".basicSearch"}return e};L.prototype.getBasicSearchValue=function(){return this._getBasicSearchValue()};L.prototype.setUiStateAsVariant=function(e,t){var i={replace:true,strictMode:true};this.setUiState(e,i);this.fireAfterVariantLoad(t,false);this._applyVisibility(e.getSelectionVariant())};L.prototype._applyVisibility=function(e){var t=function(e){if(e&&e.getVisible()&&!e.getHiddenFilter()){if(!e.getVisibleInFilterBar()){e.setVisibleInFilterBar(true)}if(!e.getPartOfCurrentVariant()){e.setPartOfCurrentVariant(true)}}};if(this._bIsInitialized){for(var i in this._mAdvancedAreaFilter){if(i){this._mAdvancedAreaFilter[i].items.forEach(function(e){if(e&&e.filterItem&&e.filterItem.getMandatory()){t(e.filterItem)}else if(e&&e.filterItem){if(e.filterItem.getVisibleInFilterBar()){e.filterItem.setVisibleInFilterBar(false)}(function(){if(e.filterItem.getPartOfCurrentVariant()){if(i===L.INTERNAL_GROUP){e.filterItem.setPartOfCurrentVariant(true)}else{e.filterItem.setPartOfCurrentVariant(false)}}})()}})}}if(e&&e.Parameters){e.Parameters.forEach(function(e){var i=this.determineFilterItemByName(e.PropertyName);t(i)}.bind(this))}if(e&&e.SelectOptions){e.SelectOptions.forEach(function(e){var i=this.determineFilterItemByName(e.PropertyName);t(i)}.bind(this))}}};L.prototype.getUiState=function(e){var t,i,r=false,a=null,n,s;if(e){r=e.allFilters===true}i=this._getDataSuiteFormat(r,"13.0");t=new f;t.selectionVariant=JSON.parse(i);t.setSelectionVariant(t.selectionVariant);var o=t.getSelectionVariant();if(o){if(this.getModelData&&this.getModelData()){a=this.getModelData()}s=f.calcSemanticDates(o,a);t.setSemanticDates(s);n=f.calculateValueTexts(o,a);t.setValueTexts(n);window.sessionStorage.setItem(this.getId(),JSON.stringify(n));window.sessionStorage.setItem("semanticDates",JSON.stringify(s))}return t};L.prototype.setUiState=function(e,t){var i,r,a=null,n=false,s=true,o;if(t&&typeof t.replace==="boolean"){n=t.replace}if(t&&typeof t.strictMode==="boolean"){s=t.strictMode}if(e){a=e.getSelectionVariant();if(a){r=JSON.stringify(a)}i=e.getValueTexts();o=e.getSemanticDates()}if(!i){i=JSON.parse(window.sessionStorage.getItem(this.getId()))}if(!o){o=JSON.parse(window.sessionStorage.getItem("semanticDates"))}this._setDataSuiteFormat(r,n,s,i,o);this._enhanceFilterItemsWithTextValue(i,a)};L.prototype.getDescriptionForKeys=function(e){};L.prototype._enhanceFilterItemsWithTextValue=function(e,t){var i=f.determineFiltersWithOnlyKeyValues(e,t,[this.getBasicSearchName()]);this.getDescriptionForKeys(i)};L.prototype.setDataSuiteFormat=function(e,t){this._setDataSuiteFormat(e,t,true)};L.prototype._setDataSuiteFormat=function(e,t,i,r,a){var n,s,o;if(e){n=new p;s=n.convert(e,this,i);if(s){this._clearErrorState();if(s.variantId&&this._oVariantManagement){if(this._bIsInitialized){if(this._oVariantManagement.isPageVariant()){this._oVariantManagement._selectVariant(s.variantId,"DATA_SUITE")}else{this._setFilterVisibility(s.variantId)}}this._oVariantManagement.setInitialSelectionKey(s.variantId)}if(s.payload&&(t||Object.keys(JSON.parse(s.payload)).length>0)&&this.setFilterDataAsString){o=s.payload;if(r){o=f.enrichWithValueTexts(o,r)}if(a){o=f.enrichWithSemanticDates(o,a)}this.setFilterDataAsString(o,t)}if(s.basicSearch&&this._oBasicSearchField&&this._oBasicSearchField.setValue){this._oBasicSearchField.setValue(s.basicSearch);this.fireAssignedFiltersChanged()}}}};L.prototype._setFilterVisibility=function(e){if(this._oVariantManagement.getSelectionKey()!==e){this._oVariantManagement.setInitialSelectionKey(e);var t=this._getStandardVariant();if(t){var i=this._oVariantManagement.getVariantContent(this,e);if(i&&i.filterbar){if(i.hasOwnProperty("version")){i=this.mergeVariant(t,i)}this._reapplyVisibility(i.filterbar)}}}};L.prototype.applySettings=function(e){a.prototype.applySettings.apply(this,arguments);if(this._possibleToChangeVariantManagement()){if(e&&e.customData){for(var t=0;t<e.customData.length;t++){var i=e.customData[t];if(i&&i.mProperties&&i.mProperties.key==="pageVariantPersistencyKey"){this._oVariantManagement.setPersistencyKey(i.mProperties.value);this._oVariantManagement.setVisible(true);this._bHostedVariantManagement=true}}}}if(e&&e.persistencyKey){this._bHostedVariantManagement=true}};L.prototype._possibleToChangeVariantManagement=function(){return this._oVariantManagement&&!this._oVariantManagement.isPageVariant()};L.prototype.clearVariantSelection=function(){if(this._oVariantManagement){this._oVariantManagement.clearVariantSelection()}};L.prototype.setSearchButtonEmphType=function(e){};L.prototype.setSimplifiedMode=function(e){};L.prototype.getSimplifiedMode=function(){return!this.getAdvancedMode()};L.prototype.setExpandAdvancedArea=function(e){return this.setFilterBarExpanded(e)};L.prototype.getExpandAdvancedArea=function(){return this.getFilterBarExpanded()};L.prototype._isNewFilterBarDesign=function(){if(this.getAdvancedMode()){return false}if(!this.getUseToolbar()){return true}return false};L.prototype._setCollectiveSearch=function(e){const t=this.getAggregation("_toolbar");if(!t||!this.getAdvancedMode()){return}if(this._oVariantManagement){t.removeContent(this._oVariantManagement);this._unregisterVariantManagement(this._oVariantManagement);this._oVariantManagement=null}if(this._oCollectiveSearch){t.removeContent(this._oCollectiveSearch)}this._oCollectiveSearch=e;if(this._oCollectiveSearch){t.insertContent(this._oCollectiveSearch,t.indexOfContent(this.getAggregation("_headerTitle"))+1)}};L.prototype.setBasicSearch=function(e){const i=this.getAggregation("_toolbar");this.setAssociation("basicSearch",e,true);if(typeof e==="string"){e=t.getElementById(e)}if(e&&!e.getParent()){i.insertContent(e,i.indexOfContent(this._oSeparator)+1)}this._oBasicSearchField=e;if(e&&e.getParent()){return}this.setAggregation("_basicSearch",e);if(e){const t=e.setParent;const r=this;e.setParent=function(){t.apply(this,arguments);if(e.getParent()!==r||e.getParent()===r&&e.sParentAggregationName==="content"){i.removeContent(e)}}}return this};L.prototype._getBasicSearchValue=function(){if(this._oBasicSearchField&&this._oBasicSearchField.getValue){return this._oBasicSearchField.getValue()}return null};L.prototype.addFilterItem=function(e){var i,r,a,n;if(!e){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterItem()"+" Expected argument 'oFilterItem' may not be null nor empty")}i=e.getName();if(!i){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterItem()"+" Expected argument 'oFilterItem.name' may not be null nor empty")}r=e._getControl();if(!r){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterItem()"+" Expected argument 'oFilterItem.control' may not be null nor empty")}this.addAggregation("filterItems",e,true);if(!this._aBasicAreaSelection){this._aBasicAreaSelection=[]}var s={control:e._getControl(),filterItem:e};this._aBasicAreaSelection.push(s);n=e.getId()+"__filterGroupItem";a=t.getElementById(n);if(!a){a=new y(e.getId()+"__filterGroupItem",{label:e.getLabel(),controlTooltip:e.getControlTooltip(),name:e.getName(),mandatory:e.getMandatory(),visible:e.getVisible(),visibleInFilterBar:e.getVisibleInFilterBar(),partOfCurrentVariant:true,control:e._getControl(),groupName:L.INTERNAL_GROUP,groupTitle:"",hiddenFilter:e.getHiddenFilter(),entitySetName:e.getEntitySetName(),entityTypeName:e.getEntityTypeName()})}if(e.data("isCustomField")){a.data("isCustomField",true)}e.attachChange(this._filterItemChange);this.addFilterGroupItem(a);return this};L.prototype.addFilterGroupItem=function(e){var t,i,r;if(!e){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterGroupItem()"+" Expected argument 'oFilterGroupItem' may not be null nor empty")}this.addAggregation("filterGroupItems",e);i=e.getGroupName();if(!i){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterGroupItems()"+" GroupName may not be null nor empty")}t=e.getName();if(!t){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterGroupItems()"+" Name may not be null nor empty")}if(!this._mAdvancedAreaFilter){this._mAdvancedAreaFilter={}}if(!this._mAdvancedAreaFilter[i]){this._mAdvancedAreaFilter[i]={};this._mAdvancedAreaFilter[i].filterItem=null;this._mAdvancedAreaFilter[i].items=[]}if(!this._mAdvancedAreaFilter[i].items){this._mAdvancedAreaFilter[i].items=[]}if(!this._mAdvancedAreaFilter[i].filterItem){this._mAdvancedAreaFilter[i].filterItem=e}r={control:e._getControl(),filterItem:e};if(this.getAdvancedMode()||e.getVisibleInFilterBar()){e.setVisibleInFilterBar(true)}else{e.setVisibleInFilterBar(false)}this._mAdvancedAreaFilter[i].items.push(r);if(!e.getHiddenFilter()){this._prepareFilterItemAndLabel(e);if(e.getVisibleInFilterBar()){e.setPartOfCurrentVariant(e.getVisibleInFilterBar())}e.attachChange(this._filterGroupItemChange)}this._mAdvancedAreaFilterFlat=[];return this};L.prototype.removeFilterItem=function(e){var t,i,r,a,n=this.getFilterItems(),s=this.getFilterGroupItems();if(!n||!n.length){return null}i=this._getRemovedItemAsObject(e,n);if(!i){return null}i.detachChange(this._filterItemChange);for(t=0;t<this._aBasicAreaSelection.length;t++){if(this._aBasicAreaSelection[t].filterItem.getId()===i.getId()){this._aBasicAreaSelection.splice(t,1);if(this._aBasicAreaSelection.length===0){this._aBasicAreaSelection=null}break}}this.removeAggregation("filterItems",i,true);r=i.getId()+"__filterGroupItem";a=this._getRemovedItemAsObject(r,s);this._removeFilterGroupItem(a);return i};L.prototype.removeFilterGroupItem=function(e){var t,i=this.getFilterGroupItems();if(!i||!i.length){return null}t=this._getRemovedItemAsObject(e,i);if(!t){return null}return this._removeFilterGroupItem(t)};L.prototype._getRemovedItemAsObject=function(e,t){var i,r;if(typeof e==="string"){for(i=0;i<t.length;i++){if(t[i].getId()===e){r=t[i];break}}}if(typeof e==="number"){if(e<0||e>=t.length){v.warning("sap.ui.comp.filterbar.FilterBar.prototype.removeFilterGroupItems() is called with invalid index "+e)}else{r=t[e]}}if(typeof e==="object"){r=e}return r};L.prototype._removeFilterGroupItem=function(e){var t,i,r,a=e.getGroupName();e.detachChange(this._filterGroupItemChange);this.removeAggregation("filterGroupItems",e,true);if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[a]&&this._mAdvancedAreaFilter[a].items){i=this._mAdvancedAreaFilter[a];for(t=0;t<i.items.length;t++){r=i.items[t];if(r.filterItem.getId()===e.getId()){i.items.splice(t,1);if(i.filterItem.getId()===e.getId()){if(i.items.length){i.filterItem=i.items[0].filterItem}else{delete this._mAdvancedAreaFilter[a]}}break}}if(this.getFilterGroupItems().length===0){this._mAdvancedAreaFilter=null}}return e};L.prototype._addParameter=function(e){var t,i,r=false,a=L.INTERNAL_GROUP;e._setParameter(true);e.setVisibleInFilterBar(true);e.setPartOfCurrentVariant&&e.setPartOfCurrentVariant(true);this.addAggregation("_parameters",e,true);i={control:e._getControl(),filterItem:e};if(!this._mAdvancedAreaFilter){this._mAdvancedAreaFilter={}}if(!this._mAdvancedAreaFilter[a]){this._mAdvancedAreaFilter[a]={};this._mAdvancedAreaFilter[a].filterItem=null}if(!this._mAdvancedAreaFilter[a].items){this._mAdvancedAreaFilter[a].items=[]}for(t=0;t<this._mAdvancedAreaFilter[a].items.length;t++){var n=this._mAdvancedAreaFilter[a].items[t];if(n.filterItem._isParameter()){continue}this._mAdvancedAreaFilter[a].items.splice(t,0,i);r=true;break}if(!r){this._mAdvancedAreaFilter[a].items.push(i)}this._prepareFilterItemAndLabel(e);e.attachChange(this._filterGroupItemChange.bind(this));return this};L.prototype._filterItemChange=function(e,t){var i,r,a,n;if(t&&t.oSource&&t.oSource.isA("sap.ui.comp.filterbar.FilterItem")){a=t.getParameter("propertyName");if(a==="visibleInFilterBar"||a==="visible"||a==="label"||a==="labelTooltip"||a==="controlTooltip"||a==="mandatory"){i=this._determineItemByName(t.oSource.getName(),L.INTERNAL_GROUP);if(i&&i.filterItem){if(a==="visible"){r=t.oSource.getVisible();i.filterItem.setVisible(r)}else if(a==="visibleInFilterBar"){r=t.oSource.getVisibleInFilterBar();var s=this._checkChangePossibleVisibleInFilterBar(i.filterItem,r);if(s){i.filterItem.setVisibleInFilterBar(r)}else{t.oSource.setVisibleInFilterBar(true)}}else if(a==="label"){i.filterItem.setLabel(t.oSource.getLabel())}else if(a==="labelTooltip"){i.filterItem.setLabelTooltip(t.oSource.getLabelTooltip())}else if(a==="controlTooltip"){n=this.determineControlByFilterItem(i.filterItem,true);if(n&&n.setTooltip){n.setTooltip(i.filterItem.getControlTooltip())}}else if(a==="mandatory"){r=t.oSource.getMandatory();i.filterItem.setMandatory(r)}}}}};L.prototype._filterGroupItemChange=function(e){var t;var i;if(e&&e.oSource){i=e.getParameter("propertyName");if(i==="visibleInFilterBar"||i==="visible"){t=this._determineItemByName(e.oSource.getName(),e.oSource.getGroupName());if(t){if(i==="visibleInFilterBar"){var r=e.oSource.getVisibleInFilterBar();var a=r;var n=this._checkChangePossibleVisibleInFilterBar(e.oSource,r);if(!n){e.oSource.setVisibleInFilterBar(true);a=true}if(a){e.oSource.setPartOfCurrentVariant(true)}if(!r&&!this._isFilterItemInBasicGroup(t.filterItem)){e.oSource.setPartOfCurrentVariant(false)}}else if(i==="visible"){if(!this._oAdaptFiltersDialog){if(!this.getAdvancedMode()){this.fireAssignedFiltersChanged()}}}}}else if(i==="groupTitle"){if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[e.oSource.getGroupName()]){this._adaptGroupTitle(e.oSource.getGroupName())}}else if(i==="label"){if(!this._oAdaptFiltersDialog){this._adaptGroupTitleForFilter(e.oSource)}}else if(i==="mandatory"){this._mandatoryFilterItemChange(e.oSource)}else if(i==="partOfCurrentVariant"&&this.ensureLoadedValueHelpList){var s=this.determineFilterItemByName(e.oSource.getName());if(s&&s.getPartOfCurrentVariant&&s.getPartOfCurrentVariant()){this.ensureLoadedValueHelpList(e.oSource.getName())}}}};L.prototype._checkChangePossibleVisibleInFilterBar=function(e,t){if(e&&e.getMandatory()&&!t){var i=this._hasFilterValue(e);if(!i){e.setVisibleInFilterBar(true);return false}}return true};L.prototype._hasFilterValue=function(e){var t;if(!this._getTriggerFilterChangeState()&&this.getAllFiltersWithValues){t=this.getAllFiltersWithValues()}else{t=this._getFiltersWithValues()}return this._checkFilterForValue(t,e)};L.prototype._adaptGroupTitleForFilter=function(e){var t;var i;if(e&&!e.getHiddenFilter()){t=e.getLabel();i=e.getLabelControl(this.getId());if(this.getConsiderGroupTitle()){if(i&&e.getGroupTitle()){i.setText(t+" ("+e.getGroupTitle()+")")}}else{i.setText(t)}}};L.prototype._adaptGroupTitle=function(e){var t;var i;if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[e]&&this._mAdvancedAreaFilter[e].items){for(t=0;t<this._mAdvancedAreaFilter[e].items.length;t++){i=this._mAdvancedAreaFilter[e].items[t];if(i&&i){this._adaptGroupTitleForFilter(i.filterItem)}}}};L.prototype.registerGetFiltersWithValues=function(e){this._fRegisterGetFiltersWithValues=e;return this};L.prototype.registerFetchData=function(e){this._fRegisteredFetchData=e;return this};L.prototype.registerApplyData=function(e){this._fRegisteredApplyData=e;return this};L.prototype._isTINAFScenario=function(){if(this._oVariantManagement){return true}else{if(this._oCollectiveSearch&&this.getAdvancedMode()){return true}return false}};L.prototype.fireInitialise=function(){if(this._isTINAFScenario()){this._createVisibleFilters();if(this.getAdvancedMode()){this._ensureFilterLoaded(null)}this._fireInitialiseEvent()}else{this._initializeVariantManagement()}};L.prototype.variantsInitialized=function(){this.fireInitialized();this._oInitializedDeferred.resolve()};L.prototype.fireInitialized=function(){this.fireEvent("initialized");this._mAdvancedAreaFilterFlat=this._getAllFilterItemsFlat();this._oInitializedDeferred.resolve()};L.prototype.getInitializedPromise=function(){return this._oInitializedDeferred.promise};L.prototype._initializeVariantManagement=function(){this._createVisibleFilters();if(this._oVariantManagement&&this.getPersistencyKey()){if(this._isTINAFScenario()){this._oVariantManagement.initialise(this._initialiseVariants,this)}}else{this._fireInitialiseEvent()}};L.prototype._fireInitialiseEvent=function(){try{this.fireEvent("initialise")}catch(e){v.error("error during initialise event handling - "+e.message)}this._bIsInitialized=true;this.fireAssignedFiltersChanged()};L.prototype._initialiseVariants=function(){this._fireInitialiseEvent();if(this._oVariantManagement){this._oVariantManagement.currentVariantSetModified(false)}};L.prototype.fireAfterVariantLoad=function(e,t){this._aAdaptFilterItems=[];this._oSelectedVariantBase=null;var i={context:e,executeOnSelect:t};try{this.fireEvent("afterVariantLoad",i)}catch(e){v.error("error during 'afterVariantLoad' event handling - "+e.message)}};L.prototype.fireBeforeVariantSave=function(e){var t={context:e};var i=this._getConsiderFilterChanges();if(e){this._setConsiderFilterChanges(false)}this.fireEvent("beforeVariantSave",t);if(e){this._setConsiderFilterChanges(i)}};L.prototype.destroyFilterGroupItems=function(){var e=this.getFilterGroupItems();this._destroyItems(e);return this};L.prototype.destroyFilterItems=function(){var e=this.getFilterItems();this._destroyItems(e);return this};L.prototype.removeAllFilterItems=function(){var e,t=this.getFilterItems();if(t&&t.length){for(e=0;e<t.length;e++){this.removeFilterItem(t[e])}}return t};L.prototype.removeAllFilterGroupItems=function(){var e,t=[],i=this.getFilterGroupItems();if(i&&i.length){for(e=0;e<i.length;e++){t.push(i[e]);this.removeFilterGroupItem(i[e])}}return t};L.prototype.removeAllFilters=function(){this.removeAllFilterItems&&this.removeAllFilterItems();this.removeAllFilterGroupItems();this.removeBasicSearch()};L.prototype.removeBasicSearch=function(){this.setBasicSearch(null)};L.prototype.getAllFilterItems=function(e){var t,i=null;var r=[];var a,n;if(!e){this._ensureFilterLoaded(null)}if(this._mAdvancedAreaFilter){for(i in this._mAdvancedAreaFilter){if(i){a=this._mAdvancedAreaFilter[i];if(a.items){for(t=0;t<a.items.length;t++){n=a.items[t];if(n&&n.filterItem&&n.filterItem.getVisible()){if(e){if(n.filterItem.getVisibleInFilterBar()||this._checkIfFilterHasValue(n.filterItem.getName())||n.filterItem.data("isCustomField")&&this._checkIfCustomControlFilterHasValue(n)){r.push(n.filterItem)}}else{r.push(n.filterItem)}}}}}}}return r};L.prototype._checkIfFilterHasValue=function(e){return false};L.prototype._checkIfCustomControlFilterHasValue=function(e){return false};L.prototype._clearErrorState=function(){this._resetFiltersInErrorValueState()};L.prototype.getAggregation=function(e){if(e=="filterGroupItems"&&!this.__bDeleteMode){this._ensureFilterLoaded(null)}return a.prototype.getAggregation.apply(this,arguments)};L.prototype._getFilterInformation=function(){return[]};L.prototype._isFilterBarContext=function(){return true};L.prototype._createVisibleFilters=function(){this._getFilters()};L.prototype._getFilters=function(){var e=[],t=this._oFilterProvider&&this._oFilterProvider.getModel()&&this._oFilterProvider.getModel().getData();if(t){e=Object.keys(t).filter(function(e){return this._checkIfFilterHasValue(e)}.bind(this))}this._aFields=this._getFilterInformation();var i,r;if(this._aFields&&this._aFields.length>0){if(!this._mAdvancedAreaFilter){this._mAdvancedAreaFilter={};if(!this.getAdvancedMode()){this._mAdvancedAreaFilter[L.INTERNAL_GROUP]={};this._mAdvancedAreaFilter[L.INTERNAL_GROUP].filterItem=null;this._mAdvancedAreaFilter[L.INTERNAL_GROUP].items=null}}for(i=0;i<this._aFields.length;i++){r=this._aFields[i];if(r.groupName!==L.INTERNAL_GROUP){if(!this._mAdvancedAreaFilter[r.groupName]){this._mAdvancedAreaFilter[r.groupName]={};this._mAdvancedAreaFilter[r.groupName].groupTitle=r.groupTitle;this._mAdvancedAreaFilter[r.groupName].filterItem=null;this._mAdvancedAreaFilter[r.groupName].items=[]}}if(r.visibleInAdvancedArea||r.groupName===L.INTERNAL_GROUP||e.includes(r.name)){this._instanciateFilterItem(r)}}}};L.prototype.isVisibleInFilterBarByName=function(e){var t,i=this._getFilterMetadata(e);if(i&&i.factory){if(i.hasOwnProperty("visibleInAdvancedArea")&&i.visibleInAdvancedArea||i.groupName===L.INTERNAL_GROUP){return true}}else{t=this.determineFilterItemByName(e);if(t){return t.getVisibleInFilterBar()}}return false};L.prototype._getFilterMetadata=function(e){if(this._aFields){for(var t=0;t<this._aFields.length;t++){if(this._aFields[t].fieldName===e){return this._aFields[t]}}}return null};L.prototype.getNonVisibleCustomFilterNames=function(){if(this._aFields.length>0){return this._getLazyNonVisibleCustomFilterNames()}else{return this._getNonVisibleCustomFilterNames()}};L.prototype._getLazyNonVisibleCustomFilterNames=function(){var e=this,t=[];this._aFields.forEach(function(i){if(i.factory){if(i.isCustomFilterField&&!i.visibleInAdvancedArea){t.push(i.fieldName)}}else if(e._isNonVisibleCustomFilterNamesByName(i.fieldName,i.groupName)){t.push(i.fieldName)}});return t};L.prototype._isNonVisibleCustomFilterNamesByName=function(e,t){var i,r;if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[t]&&this._mAdvancedAreaFilter[t].items){for(i=0;i<this._mAdvancedAreaFilter[t].items.length;i++){r=this._mAdvancedAreaFilter[t].items[i];if(r.filterName&&r.filterItem.getName()===e){return this._isNonVisibleCustomFilterNamesByFilter(r.filterItem)}}}return false};L.prototype._isNonVisibleCustomFilterNamesByFilter=function(e){if(e.data("isCustomField")&&!e.getVisibleInFilterBar()){return true}return false};L.prototype._getNonVisibleCustomFilterNames=function(){var e=this,t=[],i=this.getAllFilterItems();if(i){i.forEach(function(i){if(e._isNonVisibleCustomFilterNamesByFilter(i)){t.push(i.getName())}})}return t};L.prototype._ensureFilterLoaded=function(e){var t,i,r;if(this._aFields&&this._aFields.length>0){for(i=0;i<this._aFields.length;i++){r=this._aFields[i];if(!r.factory){continue}if(e){for(t=0;t<e.length;t++){if(r.fieldName===e[t].name){if(r.groupName===e[t].group){this._instanciateFilterItem(r);break}else if(r.groupEntityType===e[t].group){this._instanciateFilterItem(r)}}}}else{this._instanciateFilterItem(r)}}if(!e){this._aFields=[]}this._mAdvancedAreaFilterFlat=this._getAllFilterItemsFlat()}};L.prototype._instanciateFilterItem=function(e){var t=e.factory;if(t){delete e.factory;t.call(e)}};L.prototype._destroyItems=function(e){if(e&&e.length){for(var t=0;t<e.length;t++){e[t].destroy()}}};L.prototype._reapplyVisibility=function(e,t){var i,r=null;var a;var n=[];if(this._mAdvancedAreaFilter){for(r in this._mAdvancedAreaFilter){if(r){var s=this._mAdvancedAreaFilter[r];if(s&&s.items){for(i=0;i<s.items.length;i++){a=s.items[i];if(a&&a.filterItem){this._setPersVisibility(e,a.filterItem,n,t)}}}}}}return n};L.prototype._setPersVisibility=function(e,t,i,r){var a,n;if(t&&!t.getHiddenFilter()){a=t.getGroupName();n=this._checkForFilterInfo(e,t);if(this._isTINAFScenario()){if(n){t.setVisibleInFilterBar(n.visibleInFilterBar);if(n.hasOwnProperty("visible")){t.setVisible(n.visible)}}else{t.setVisibleInFilterBar(false)}}else{if(n&&n.visibleInFilterBar!==undefined){t.setVisibleInFilterBar(n.visibleInFilterBar)}else{if(a!==L.INTERNAL_GROUP&&n&&n.group===a){t.setVisibleInFilterBar(n!==null)}}}if(t){var s=this.determineControlByFilterItem(t,true);if(!r&&s&&s.getValueState&&s.getValueState()!==R.None){s.setValueState(R.None)}if(n&&n.hasOwnProperty("partOfCurrentVariant")&&!n.partOfCurrentVariant){i.push(t)}}}};L.prototype._checkForFilterInfo=function(e,t){var i,r,a=t.getName(),n=[t.getGroupName(),t.getEntitySetName(),t.getEntityTypeName()];var s=[];if(e&&e.length){for(i=0;i<e.length;i++){if(e[i].name===a){if(n.indexOf(e[i].group)>-1){s.push(e[i])}}}}if(s.length===1){return s[0]}else if(s.length>1){for(r=0;r<n.length;r++){for(i=0;i<s.length;i++){if(s[i].group===n[r]){return s[i]}}}}return null};L.prototype._createVariantManagement=function(){var e=new m(this.getId()+"-variant",{});var t=new c({type:"filterBar",keyName:"persistencyKey"});t.setControl(this);e.addPersonalizableControl(t);e.initialise(function(){},this);e.addStyleClass("sapUiCompFilterBarMarginLeft");return e};L.prototype.fireAssignedFiltersChanged=function(){this.fireEvent("assignedFiltersChanged")};L.prototype.retrieveFiltersWithValuesAsText=function(){var e,t,i=this.retrieveFiltersWithValues(),r,a=this.getBasicSearchValue();if(a&&i){i.splice(0,0,this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_SEARCH_TERM"))}if(!i||i.length===0){e=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_ZERO")}else if(i&&i.length===1){if(!this._isPhone()){e=this._oRb.getText("FILTER_BAR_ASSIGNED_ONE_FILTER",[i.length,i[0]])}else{e=this._oRb.getText("FILTER_BAR_ASSIGNED_ONE_FILTER_MOBILE",[i.length])}}else{if(!this._isPhone()){r=Math.min(5,i.length);t="";for(var n=0;n<r;n++){t+=i[n];if(n<r-1){t+=", "}}e=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS",[i.length,t]);if(r<i.length){e+=", ..."}}else{e=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_MOBILE",[i.length])}}return e};L.prototype.retrieveFiltersWithValuesAsTextExpanded=function(){var e,t="",i=this.retrieveFiltersWithValues(),r=this.getBasicSearchValue(),a=this.retrieveNonVisibleFiltersWithValues();if(a.length>0){t=" "+this._oRb.getText("FILTER_BAR_ASSIGNED_HIDDEN_FILTERS",[a.length])}if(r&&i){i.splice(0,0,this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_SEARCH_TERM"))}if(i.length===0){e=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_ZERO")}else if(i.length===1){if(!this._isPhone()){e=this._oRb.getText("FILTER_BAR_ASSIGNED_ONE_FILTER_EXPANDED",[i.length]);e+=t}else{e=this._oRb.getText("FILTER_BAR_ASSIGNED_ONE_FILTER_MOBILE",[i.length]);e+=t}}else{if(!this._isPhone()){e=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_EXPANDED",[i.length]);e+=t}else{e=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_MOBILE",[i.length]);e+=t}}return e};L.prototype.retrieveFiltersWithValues=function(){var e,t=[];var i=this._getFiltersWithValues();if(i){for(e=0;e<i.length;e++){if(i[e].getHiddenFilter()){continue}if(i[e].getVisible()&&i[e].getPartOfCurrentVariant()){t.push(i[e].getLabel())}}}return t};L.prototype.retrieveNonVisibleFiltersWithValues=function(){var e,t=[],i,r=this._getFiltersWithValues();if(r){for(e=0;e<r.length;e++){i=r[e];if(i.getHiddenFilter()){continue}if(i.getVisible()&&!i.getVisibleInFilterBar()&&i.getPartOfCurrentVariant&&i.getPartOfCurrentVariant()){t.push(i.getLabel())}}}return t};L.prototype._getFiltersWithValues=function(){if(this._fRegisterGetFiltersWithValues){try{return this._fRegisterGetFiltersWithValues()}catch(e){v.error("callback for obtaining the filter count throws an exception")}}return null};L.prototype._getFiltersWithValuesCount=function(){var e=0;var t=this.retrieveFiltersWithValues();e=t.length;if(this._oBasicSearchField&&this._oBasicSearchField.getValue&&this._oBasicSearchField.getValue()){e++}return e};L.prototype._checkFilterForValue=function(e,t){var i;if(e){for(i=0;i<e.length;i++){if(e[i]===t){return true}}}return false};L.prototype._hasMandatoryFields=function(){return this.getFilterGroupItems().some(function(e){return e.getMandatory()})};L.prototype._toggleHideShow=function(){if(this._hasAnyVisibleFiltersOnFB()){this.setFilterBarExpanded(!this.getFilterBarExpanded())}if(this.isPropertyInitial("showAllFilters")){this.setShowAllFilters(this._hasMandatoryFields())}};L.prototype._updateHeaderTitle=function(){const e=this.getHeader(),t=this.getAggregation("_headerTitle");if(!t){return}t.setVisible(!!e);t.setText(e);t.setLevel(this.getHeaderLevel())};L.prototype._updateToolbarText=function(){if(this.bPreventUpdateToolbarText){return}var e=this._isNewFilterBarDesign()?"FILTER_BAR_ADAPT_FILTERS":"FILTER_BAR_ACTIVE_FILTERS";var t=this._isNewFilterBarDesign()?"FILTER_BAR_ADAPT_FILTERS_ZERO":"FILTER_BAR_ACTIVE_FILTERS_ZERO";var i=this._getFiltersWithValuesCount();var r=i?this._oRb.getText(e,[i]):this._oRb.getText(t);this._getFiltersButton().setText(r)};L.prototype._selectionChangedInFilterDialogByValue=function(e,t){t.setVisibleInFilterBar(e);if(this._getConsiderFilterChanges()&&this._oVariantManagement&&!this._oVariantManagement.getInErrorState()){this._oVariantManagement.currentVariantSetModified(true)}this._bDirtyViaDialog=true;if(e){this._aAddedFilters.push(t)}else{this._bFilterRemoved=true}this._oFilterToFocus=this._calculateFilterToFocus(t)};L.prototype._onLocalizationChanged=function(){this._oRb=i.getResourceBundleFor("sap.ui.comp");this.destroyAggregation("_searchButton");this.destroyAggregation("_hideShowButton");this.destroyAggregation("_clearButton");this.destroyAggregation("_restoreButton");this.destroyAggregation("_filtersButton");this.destroyAggregation("_showAllFiltersButton");this._createButtons();this.invalidate()};L.prototype._calculateFilterToFocus=function(e){const t=this._oAdaptFiltersDialogModel.getProperty("/items");if(this._aAddedFilters.length===0){if(this._bFilterRemoved){this._bFilterRemoved=false;return this._retrieveVisibleAdvancedItems()[0]?.control}else{return null}}if(this._bFilterRemoved){this._bFilterRemoved=false;return this._oFilterToFocus}if(this._aAddedFilters.length===1){return this._aAddedFilters[0]}const i=t.findIndex(e=>e.name===this._oFilterToFocus.getName());const r=t.findIndex(t=>t.name===e.getName());return r<i?e:this._oFilterToFocus};L.prototype._onLiveChangeValidateSymbols=function(e){var t=new RegExp("[\\w][*][\\w]"),i=new RegExp("[+]"),r=e.getSource(),a=r.getValue(),n=t.test(a)||i.test(a);this._onSymbolsValidationSetValueState.call(this,n,r)};L.prototype._onSymbolsValidationSetValueState=function(e,t){var i=t._oValueStateMessage,r="sapMSFContentWrapperWarning";if(e&&!t.hasStyleClass(r)&&t.setValueState===undefined){t.addStyleClass(r);t.getValueState=function(){return R.Warning};i.open()}else if(!e&&t.hasStyleClass(r)&&t.setValueState===undefined){t.getValueState=function(){return R.None};i.close();t.removeStyleClass(r)}else if(e&&t.getValueState&&t.getValueState()===R.None){t.setValueState(R.Warning);t.setValueStateText(D)}else if(!e&&t.getValueState()===R.Warning){t.setValueState(R.None)}};L.prototype._mandatoryFilterChange=function(e){if(!e){return}var t=e.getParameters();if(!t||!t.oSource){return}var i=this._determineByControl(t.oSource);if(i){this._mandatoryFilterItemChange(i.filterItem)}};L.prototype._mandatoryFilterItemChange=function(e){if(e){if(!e.getMandatory()){return}var t=this._hasFilterValue(e);if(!e.getVisibleInFilterBar()&&!t){e.setVisibleInFilterBar(true)}}};L.prototype._isPhone=function(){return!!g.system.phone};L.prototype._isTablet=function(){return!!(g.system.tablet&&!g.system.desktop)};L.prototype.fireSearch=function(e){if(this._bOKFiltersDialogTriggered&&this._oAdaptFiltersDialog){this._oAdaptFiltersDialog.close()}else if(this._oAdaptFiltersDialog){this._bEnterPressedLeadsToSearch=true}this.fireEvent("search",e)};L.prototype._variantSave=function(e){this._oVariant={};this.fireBeforeVariantSave()};L.prototype._afterVariantSave=function(e){this._aOrderedFilterItems=this._aAdaptFilterItems;this._aAdaptFilterItems=[];this.fireAfterVariantSave()};L.prototype._filterSetInErrorState=function(e){if(this._oAdaptFiltersDialog&&this._oAdaptFiltersDialog.isOpen()){if(this._getConsiderFilterChanges()&&this._oVariantManagement&&!this._oVariantManagement.getInErrorState()){this._oVariantManagement.currentVariantSetModified(true)}this._bDirtyViaDialog=true}};L.prototype._cancelFilterDialog=function(e){if(e&&this._oVariantManagement){this._bDirtyViaDialog=this._oVariantManagement._bSaveCanceled}if(!this.getPersistencyKey()&&this.getUseSnapshot()===false){this.fireCancel();return}if(this._oInitialVariant&&this._oInitialVariant.content&&this._bDirtyViaDialog){var t=this._retrieveCurrentSelectionSet(false);this._deleteValidatingTokenFlag(t);this.applyVariant(this._oInitialVariant.content,"CANCEL");if(this._oVariantManagement){if(!this._oVariantManagement.isPageVariant()){this._oVariantManagement.setCurrentVariantKey(this._oInitialVariant.key)}this._oVariantManagement.currentVariantSetModified(this._oInitialVariant.modified)}this.fireCancel()}};L.prototype._resetFiltersInErrorValueState=function(){var e;e=this._retrieveCurrentSelectionSet(true,true);e.forEach(function(e){if(e.control&&e.control.setValueState&&e.control.getValueState){if(e.control.getValueState()===R.Error){if(e.control.isA("sap.m.DynamicDateRange")){e.control.setValue(null)}else if(e.control.setValue){e.control.setValue("")}e.control.setValueState(R.None)}}})};L.prototype.setContentWidth=function(e){if(this._oAdaptFiltersDialog){this._oAdaptFiltersDialog.setContentWidth(e+"px")}};L.prototype.setContentHeight=function(e){if(this._oAdaptFiltersDialog){this._oAdaptFiltersDialog.setContentHeight(e+"px")}};L.prototype.addAdaptFilterDialogCustomContent=function(e){this._mCustomViewInfo={item:e.item,search:e.search,selectionChange:e.selectionChange,filterSelect:e.filterSelect,content:e.content}};L.prototype._createStructureForAdaptFiltersDialog=function(){var e,t,i={filtersOnFilterBar:{},allFilters:[]};var r,a=this.getAllFiltersWithValues?this.getAllFiltersWithValues():this._getFiltersWithValues();if(this._mAdvancedAreaFilter){for(var n in this._mAdvancedAreaFilter){if(n){e=this._mAdvancedAreaFilter[n];if(e.items){for(var s=0;s<e.items.length;s++){t=e.items[s];r=this._checkFilterForValue(a,t.filterItem);if(t.filterItem.getVisibleInFilterBar()){i.filtersOnFilterBar[t.filterItem.getName()]=t.filterItem}var o=t.filterItem.getGroupName()?t.filterItem.getGroupName():L.INTERNAL_GROUP;var l=o===L.INTERNAL_GROUP?this._oRb.getText("FILTER_BAR_BASIC_GROUP"):t.filterItem.getGroupTitle();var h=t.filterItem.getControlTooltip()?t.filterItem.getControlTooltip():"";i.allFilters.push({name:t.filterItem.getName(),label:t.filterItem.getLabel(),group:o,groupLabel:l,tooltip:h,visibleInDialog:t.filterItem.getVisible(),filterItem:t.filterItem,active:r,required:t.filterItem.getMandatory()})}}}}if(i.allFilters.length>0){var d=[],u=this._aAdaptFilterItems.length>0?this._aAdaptFilterItems:this._aOrderedFilterItems;if(u.length>0){u.forEach(function(e,t){d[e.name]=t});i.allFilters.sort(function(e,t){return d[e.name]-d[t.name]})}}}return i};L.prototype._getAllFilterItemsFlat=function(){var e,t,i,r=[];if(this._mAdvancedAreaFilter){for(var a in this._mAdvancedAreaFilter){if(a){e=this._mAdvancedAreaFilter[a];if(e.items){for(var n=0;n<e.items.length;n++){t=e.items[n];i=t.filterItem;var s=i.getGroupName()?i.getGroupName():L.INTERNAL_GROUP;var o=s===L.INTERNAL_GROUP?this._oRb.getText("FILTER_BAR_BASIC_GROUP"):i.getGroupTitle();var l=i.getControlTooltip()?i.getControlTooltip():"";r.push({name:i.getName(),label:i.getLabel(),group:s,groupLabel:o,tooltip:l,visibleInDialog:i.getVisible(),filterItem:i,required:i.getMandatory()})}}}}if(r.length>0){var h=[],d=this._aOrderedFilterItems;d.forEach(function(e,t){h[e.name]=t});r.sort(function(e,t){return h[e.name]-h[t.name]})}}return r};L.prototype._restoreControls=function(e,t){var i,r;if(this._fRegisteredFilterChangeHandlers){this.detachFilterChange(this._fRegisteredFilterChangeHandlers);this._fRegisteredFilterChangeHandlers=null}if(this._mAdvancedAreaFilter){for(var a in this._mAdvancedAreaFilter){if(a){i=this._mAdvancedAreaFilter[a];if(i.items){for(var n=0;n<i.items.length;n++){r=i.items[n];if(r.filterItem&&!r.filterItem.getHiddenFilter()&&r.control){if(r.contentReplaced){r.contentReplaced=undefined;var s=r.filterItem._getControl();if(s&&s.getValueState){if(t&&s.getValueState()!=r.control.getValueState()){r.control.setValueState(s.getValueState())}}s.destroy();r.filterItem._oLabel.setLabelFor&&r.filterItem._oLabel.setLabelFor(r.control);r.filterItem.setControl(r.control);if(this._isPhone()||this._isTablet()){r.control.sName=r.filterItem.getName();r.control._onAfterInputRenderingDelegate={onAfterRendering:function(e){this._applyInputModeAttribute(e.srcControl,e.srcControl.sName)},sName:r.filterItem.getName()};r.control.addDelegate(r.control._onAfterInputRenderingDelegate,this)}}r.filterItem.detachChange(e)}}}}}}};L.prototype._expandGroup=function(e){if(this._oAdaptFiltersDialog&&this._oAdaptFiltersDialogModel&&this._oAdaptFiltersPanel&&e&&e.filterItem){var t=e.filterItem.getGroupName()?e.filterItem.getGroupName():L.INTERNAL_GROUP;var i=this._oAdaptFiltersDialogModel.getData().itemsGrouped;for(var r=0;r<i.length;r++){if(i[r].group===t){for(var a=0;a<i[r].items.length;a++){if(i[r].items[a].name===e.filterItem.getName()){this._oAdaptFiltersPanel.setGroupExpanded(i[r].items[a].group,true);return}}return}}}};var P,O;L.prototype._getEntitiesLazy=function(){if(P&&O){return Promise.resolve()}this.setBusy(true);return i.load("sap.ui.mdc",{async:true}).then(function(){return new Promise(function(e){sap.ui.require(["sap/ui/mdc/p13n/P13nBuilder","sap/ui/mdc/p13n/panels/AdaptFiltersPanel"],function(t,i){P=t;O=i;e();this.setBusy(false)}.bind(this))}.bind(this))}.bind(this))};L.prototype._filtersButtonPressed=function(){this._getFiltersButton().focus();this.showAdaptFilterDialog()};L.prototype._checkAssignedFilters=function(){if(this._oAdaptFiltersDialog){var e=this.getAllFiltersWithValues?this.getAllFiltersWithValues():this._getFiltersWithValues();var t=this._oAdaptFiltersDialogModel.getData().items;for(var i=0;i<t.length;i++){if(t[i].hasOwnProperty("filterItem")){var r=this._checkFilterForValue(e,t[i].filterItem);if(t[i].active!==r){t[i].active=r}}}}};L.prototype.showAdaptFilterDialogForKeyUser=function(e,t){this._bFiltersDialogForKeyUser=true;this._fGetDataForKeyUser=t;return this.showAdaptFilterDialog().then(function(){this._oAdaptFiltersDialog._oPopup&&this._oAdaptFiltersDialog._oPopup.addStyleClass(e);P.addRTACustomFieldButton(this._oAdaptFiltersDialog._oPopup)}.bind(this))};L.prototype._createKeyUserChange=function(){var e=[];if(this._bOKFiltersDialogTriggered&&this._oVariantManagement&&this._oVariantManagement.isA("sap.ui.comp.smartvariants.SmartVariantManagement")&&this._oVariantManagement.getVisible()&&this._oVariantManagement._getPersoController()){e=[{selectorControl:this._oVariantManagement._getPersoController(),changeSpecificData:{changeType:"variantContent",content:{key:this._oVariantManagement.getSelectionKey(),persistencyKey:this.getPersistencyKey(),content:this.fetchVariant()}}}]}return e};L.prototype.showAdaptFilterDialog=function(e){return new Promise(function(t){this._getEntitiesLazy().then(function(){var r;if(!this._oAdaptFiltersDialog){r=new A;r.setSizeLimit(0);var a=function(e,t){for(var i=0;i<e.length;i++){if(e[i].group===t){var r=e[i].items;for(var a=0;a<r.length;a++){if(r[a].filterItem&&r[a].filterItem.getVisible()){if(!e[i].groupVisible){e[i].groupVisible=true}return}}if(e[i].groupVisible){e[i].groupVisible=false}return}}};var n=function(e){if(e&&e.oSource&&e.oSource.isA("sap.ui.comp.filterbar.FilterItem")){var t=e.getParameter("propertyName");if(this._oAdaptFiltersDialogModel&&t){var i=this._oAdaptFiltersDialogModel.getData().items;for(var r=0;r<i.length;r++){if(i[r].hasOwnProperty("filterItem")&&i[r].filterItem===e.oSource){if(t==="visible"){var n=e.oSource.getVisible();if(i[r].visibleInDialog!=n){i[r].visibleInDialog=n;a(this._oAdaptFiltersDialogModel.getData().itemsGrouped,i[r].group);this._oAdaptFiltersDialogModel.checkUpdate();break}}else if(t==="visibleInFilterBar"){i[r].visible=e.oSource.getVisibleInFilterBar();this._oAdaptFiltersDialogModel.checkUpdate();break}}}}}}.bind(this);this._ensureFilterLoaded(null);var s=this._createStructureForAdaptFiltersDialog();var o=this;var l=P.prepareAdaptationData(s.allFilters,function(e,t){V(e,t);var i=true;if(!t.filterItem||t.filterItem.getHiddenFilter()){o._mAdvancedAreaHiddenFilters.push(e);i=false}e.visible=!!s.filtersOnFilterBar[t.name];return i},true);P.sortP13nData({visible:"visible",position:"position"},l.items);this._oAdaptFiltersDialogModel=new A;this._oAdaptFiltersDialogModel.setSizeLimit(1e3);this._oAdaptFiltersDialogModel.setData(l);this._mAdaptFiltersDialogInitialItemsOrder=[].concat(this._oAdaptFiltersDialogModel.getData().items,this._mAdvancedAreaHiddenFilters);var h=this._oAdaptFiltersDialogModel.getData().items;for(var d=0;d<h.length;d++){if(h[d].hasOwnProperty("filterItem")){h[d].filterItem.attachChange(n)}}this._fRegisteredFilterChangeHandlers=function(e){this._mandatoryFilterChange(e)}.bind(this);this.attachFilterChange(this._fRegisteredFilterChangeHandlers);var u=function(e,t){if(e&&e.filterItem&&e.filterItem.getVisibleInFilterBar()!==t){this._selectionChangedInFilterDialogByValue(t,e.filterItem)}}.bind(this);var g=function(e){var t,i,r,a,n=e.getParameter("item"),s=e.getParameter("reason"),o=s==="Add"||s==="SelectAll"||s==="RangeSelect";if(s==="SelectAll"||s==="DeselectAll"){if(this._oAdaptFiltersPanel.getCurrentViewKey()===this._oAdaptFiltersPanel.GROUP_KEY){i=e.getParameter("item").group;r=this._oAdaptFiltersDialogModel.getProperty("/itemsGrouped").filter(function(e){return e.group===i})[0].items}else{r=this._oAdaptFiltersDialogModel.getProperty("/items")}for(t=0;t<r.length;t++){n=r[t];if(!o&&this._shouldBeVisible(n)){a="/items/"+t;this._oAdaptFiltersDialogModel.setProperty(a+"/visible",true)}else{u(n,o)}}}else if(s==="RangeSelect"&&n){if(this._oAdaptFiltersPanel.getCurrentViewKey()===this._oAdaptFiltersPanel.LIST_KEY){for(t=0;t<n.length;t++){var l=n[t];if(!o&&this._shouldBeVisible(l)){a="/items/"+t;this._oAdaptFiltersDialogModel.setProperty(a+"/visible",true)}else{u(l,o)}}}}else if((s==="Add"||s==="Remove")&&n){if(!o&&this._shouldBeVisible(n)){n.visible=true}else{u(n,o)}}else if(s==="Move"){this._bDirtyViaDialog=true;this._bMoveTriggered=true}this._oAdaptFiltersPanel.setP13nData(this._oAdaptFiltersDialogModel.getData())}.bind(this);var f=new O({enableReorder:true});f.getView(f.GROUP_KEY).getContent().attachChange(g);f.getView(f.LIST_KEY).getContent().attachChange(g);this._oAdaptFiltersPanel=f;f.setItemFactory(function(e){var t,i,a,n;n=e.getObject();if(!n){return undefined}a=this._determineItemByName(n.name,n.group);if(!a||!a.filterItem||!a.control){return undefined}t=a.control;if(!a.contentReplaced&&a.filterItem._getControl()===t){a.contentReplaced=true;const e={cloneChildren:true,cloneBindings:false};if(t.isA("sap.ui.comp.smartfilterbar.SFBMultiComboBox")){e.cloneBindings=true}else if(t.isA("sap.m.MultiComboBox")){e.cloneChildren=false;e.cloneBindings=true}i=t.clone("",[],e);a.filterItem._oLabel.setLabelFor&&a.filterItem._oLabel.setLabelFor(i);i.setModel(r);a.filterItem.setControl(i)}return t}.bind(this));this.fireFiltersDialogBeforeOpen({newDialog:true});if(this._mCustomViewInfo&&this._mCustomViewInfo.item&&this._mCustomViewInfo.item.getKey()){f.addCustomView(this._mCustomViewInfo);f.switchView(e?e:f.getDefaultView())}sap.ui.require(["sap/m/p13n/Popup"],function(e){var r=new e(this.getId()+"-adapt-filters",{panels:[f],title:this._oRb.getText(this._isNewFilterBarDesign()?"FILTER_BAR_ADAPT_FILTERS_DIALOG":"FILTER_BAR_ADV_FILTERS_DIALOG"),reset:this.getShowRestoreButton()&&!this._fGetDataForKeyUser?this._dialogRestore.bind(this):null,warningText:i.getResourceBundleFor("sap.m").getText("p13n.RESET_WARNING_TEXT"),close:function(e){if(e.getParameter("reason")==="Ok"){this._bOKFiltersDialogTriggered=true}else{this._dialogCancel(this._oAdaptFiltersDialog)}if(this._bOKFiltersDialogTriggered&&typeof this._clearErroneusControlValues==="function"){this._clearErroneusControlValues()}this._restoreControls(n,!this._bOKFiltersDialogTriggered);if(!this._bOKFiltersDialogTriggered){this._cancelFilterDialog(false)}if(this._bOKFiltersDialogTriggered){this._aAdaptFilterItems=this._oAdaptFiltersDialogModel.getProperty("/items");this._mAdvancedAreaFilterFlat=this._aAdaptFilterItems;this._aAdaptFilterItems=[].concat(this._aAdaptFilterItems,this._mAdvancedAreaHiddenFilters);this._mAdvancedAreaFilter=this._mapReorderedFilterItemsInGroups(this._aAdaptFilterItems);this._bMoveTriggered=false;this._mAdvancedAreaHiddenFilters=[]}else{this._aAdaptFilterItems=[]}if(this._fGetDataForKeyUser){this._fGetDataForKeyUser(this._createKeyUserChange())}this._applyAttributes();this._oAdaptFiltersDialogModel=null;this._oAdaptFiltersPanel=null;this._oVariant={};this._oInitialVariant=null;this._oAdaptFiltersDialog.destroy();this._oAdaptFiltersDialog=null;this._fGetDataForKeyUser=null;if((this._bOKFiltersDialogTriggered&&this._bDirtyViaDialog||this._bResetFiltersDialogTriggered)&&!this._bEnterPressedLeadsToSearch){if(!this.isLiveMode||!this.isLiveMode()){this.fireFilterChange()}}this._bEnterPressedLeadsToSearch=false;this._bResetFiltersDialogTriggered=false;this.fireFiltersDialogClosed({context:this._bOKFiltersDialogTriggered?"SEARCH":"CANCEL"});setTimeout(function(){if(!this._oFilterToFocus||this._bFiltersDialogForKeyUser){this._bFiltersDialogForKeyUser=false;return}this._oFilterToFocus.getControl?this._oFilterToFocus.getControl()?.focus():this._oFilterToFocus.focus()}.bind(this),301)}.bind(this)});r._getIdPrefix=function(){return"-dialog"};this._oAdaptFiltersDialog=r;this._oAdaptFiltersDialog.setParent(this);this._oVariant.content=this.fetchVariant();if(this._oVariantManagement){this._oVariant.key=this._oVariantManagement.getSelectionKey();this._oVariant.modified=this._oVariantManagement.currentVariantGetModified()}this._oInitialVariant={};V(this._oInitialVariant,this._oVariant);this._bOKFiltersDialogTriggered=false;this._bDirtyViaDialog=false;this._bEnterPressedLeadsToSearch=false;if(this.$().closest(".sapUiSizeCompact").length>0){this._oAdaptFiltersDialog.addStyleClass("sapUiSizeCompact")}this._oAdaptFiltersDialog.isPopupAdaptationAllowed=function(){return false};const a={enableReset:this._hasChanges(),confirm:{text:this._oRb.getText("FILTER_BAR_OK")}};this._oAdaptFiltersDialog.open(undefined,a);this._aAddedFilters=[];this._oFilterToFocus=undefined;t()}.bind(this));f.setP13nModel(this._oAdaptFiltersDialogModel);return}t()}.bind(this))}.bind(this))};L.prototype._hasChanges=function(){return!!this._oVariantManagement?.currentVariantGetModified()};L.prototype._mapReorderedFilterItemsInGroups=function(e){var t=[];e.forEach(function(e){if(!t[e.group]){t[e.group]={};t[e.group].filterItem=null;t[e.group].items=[]}if(!t[e.group].items){t[e.group].items=[]}t[e.group].items.push(this._mAdvancedAreaFilter[e.group].items.find(function(t){return t.filterItem===e.filterItem}));if(!t[e.group].filterItem){t[e.group].filterItem=e.filterItem}}.bind(this));return t};L.prototype._reorderItemsInAdvancedAreaFilter=function(){var e,t;e=this._createStructureForAdaptFiltersDialog();t=e.allFilters;this._mAdvancedAreaFilterFlat=t;this._mAdvancedAreaFilter=this._mapReorderedFilterItemsInGroups(t)};L.prototype.isDialogOpen=function(){return this._oAdaptFiltersDialog};L.prototype._dialogCancel=function(e){if(e){this._bOKFiltersDialogTriggered=false;this.fireFiltersDialogCancel()}};L.prototype._dialogRestore=function(){this.reset();if(this._oVariantManagement&&this._oVariantManagement.getVisible()&&!this._oVariantManagement.getInErrorState()){this._oVariantManagement.currentVariantSetModified(false)}if(this._oAdaptFiltersPanel){var e=[],t=this._oAdaptFiltersDialogModel.getData();if(this._bMoveTriggered&&this._mAdaptFiltersDialogInitialItemsOrder.length>0){this._mAdaptFiltersDialogInitialItemsOrder.forEach(function(t,i){e[t.name]=i});t.items.sort(function(t,i){return e[t.name]-e[i.name]})}else{this._aOrderedFilterItems.forEach(function(t,i){e[t.name]=i});t.items.sort(function(t,i){return e[t.name]-e[i.name]});P.sortP13nData({visible:"visible",position:"position"},t.items)}this._oAdaptFiltersPanel.setP13nData(t)}this._bDirtyViaDialog=false;this._bResetFiltersDialogTriggered=true};L.prototype._getSearchButton=function(){return this.getAggregation("_searchButton")};L.prototype._getHideShowButton=function(){return this.getAggregation("_hideShowButton")};L.prototype._getClearButton=function(){return this.getAggregation("_clearButton")};L.prototype._getRestoreButton=function(){return this.getAggregation("_restoreButton")};L.prototype._getFiltersButton=function(){return this.getAggregation("_filtersButton")};L.prototype._getShowAllFiltersButton=function(){return this.getAggregation("_showAllFiltersButton")};L.prototype._createButtons=function(){const e=new s(this.getId()+"-btnGo",{visible:this.getShowGoOnFB(),text:this._oRb.getText("FILTER_BAR_GO"),type:N.Emphasized}).addStyleClass("sapUiCompFilterBarPaddingRightBtn");e.addEventDelegate({ontouchstart:()=>{this.bPreventUpdateToolbarText=true},ontouchend:()=>{this.bPreventUpdateToolbarText=false;this._updateToolbarText();this.fireAssignedFiltersChanged()}});b.addConfig(e,{event:"search",message:this._oRb.getText("FILTER_BAR_GO_BTN_SHORTCUT_HINT"),addAccessibilityLabel:true},this);e.attachPress(()=>{e.focus();this._searchFromFilterBar()});this.setAggregation("_searchButton",e);const t=new s(this.getId()+"-btnShowHide",{text:this._oRb.getText("FILTER_BAR_HIDE"),type:N.Transparent,enabled:false}).addStyleClass("sapUiCompFilterBarPaddingRightBtn");t.attachPress(()=>{this._toggleHideShow()});this.setAggregation("_hideShowButton",t);const i=new s(this.getId()+"-btnClear",{visible:this.getShowClearOnFB(),text:this._oRb.getText("FILTER_BAR_CLEAR"),type:N.Transparent,enabled:false}).addStyleClass("sapUiCompFilterBarPaddingRightBtn");i.attachPress(()=>{this.clear();if(this.isLiveMode&&this.isLiveMode()){this._searchFromFilterBar()}});this.setAggregation("_clearButton",i);const r=new s(this.getId()+"-btnRestore",{visible:this.getShowRestoreOnFB(),text:this._oRb.getText("FILTER_BAR_RESTORE"),type:N.Transparent,enabled:false}).addStyleClass("sapUiCompFilterBarPaddingRightBtn");r.attachPress(()=>{this.reset();if(this._oVariantManagement){this._oVariantManagement.currentVariantSetModified(false)}});this.setAggregation("_restoreButton",r);const a=new s(this.getId()+"-btnFilters",{visible:this.getShowFilterConfiguration(),text:this._oRb.getText("FILTER_BAR_ACTIVE_FILTERS_ZERO"),type:N.Transparent,enabled:false});a.attachPress(()=>{this._filtersButtonPressed()});this.setAggregation("_filtersButton",a);const n=new s(this.getId()+"-btnShowAll",{text:this._oRb.getText("FILTER_BAR_VH_SHOW_ALL"),type:N.Transparent,press:this._toggleAllFilters.bind(this)});this.setAggregation("_showAllFiltersButton",n)};L.prototype._shouldSkipRenderButtons=function(){return this.getUseToolbar()};L.prototype._getButtons=function(){return[this.getAggregation("_searchButton"),this.getAggregation("_clearButton"),this.getAggregation("_restoreButton"),this.getAggregation("_filtersButton")]};L.prototype._createHeaderTitle=function(){const e=new l(`${this.getId()}-HeadText`,{level:this.getHeaderLevel()});e.addStyleClass("sapMH4Style");e.addStyleClass("sapUiCompSmartChartHeader");this.setAggregation("_headerTitle",e)};L.prototype._toggleAllFilters=function(){var e,t;this.setShowAllFilters(!this.getShowAllFilters());this._getShowAllFiltersButton().setVisible(!this.getShowAllFilters());if(!this._bDelegateAdded&&this.getFilterGroupItems()){e=this.getFilterGroupItems()[this._nMaxFiltersByDefault]._getControl();t={onAfterRendering:function(){e.focus()}};e.addDelegate(t,this);this._bDelegateAdded=true}};L.prototype._shouldSkipRenderFilters=function(e){return this.getIsRunningInValueHelpDialog()&&this._nMaxFiltersByDefault===e&&!this.getShowAllFilters()};L.prototype._shouldRenderAdvancedLayout=function(){return this.getAdvancedMode()&&!this.getIsRunningInValueHelpDialog()};L.prototype._createVariantLayout=function(){this._oVariantManagement=this._createVariantManagement();this.setAggregation("_variantManagement",this._oVariantManagement);if(this._possibleToChangeVariantManagement()){this._oVariantManagement.setVisible(false)}this._registerVariantManagement();return this._oVariantManagement};L.prototype._createToolbar=function(){const e=new d(`${this.getId()}-toolbar`);this._oToolbarSpacer=new u;this._oSeparator=(new C).addStyleClass("sapUiTinyMarginEnd");e.addContent(this.getAggregation("_headerTitle"));e.addContent(this._oVariantManagement);e.addContent(this._oSeparator);e.addContent(this._oToolbarSpacer);e.addContent(this._getSearchButton());e.addContent(this._getHideShowButton());e.addContent(this._getClearButton());e.addContent(this._getRestoreButton());e.addContent(this._getFiltersButton());e.addStyleClass("sapUiCompFilterBarToolbar");this.setAggregation("_toolbar",e)};L.prototype._replaceVariantManagement=function(e){if(this._oVariantManagement){this._unregisterVariantManagement();const e=this.getAggregation("_toolbar");if(e&&e.getContent(this._oVariantManagement)){e.removeContent(this._oVariantManagement)}this._oVariantManagement.destroy()}this._oVariantManagement=e;this._registerVariantManagement()};L.prototype._prepareFilterItemAndLabel=function(e){var t=e._getControl();if(!t){v.error("no Control obtained");return null}var i=e.getLabelControl(this.getId());if(!i){v.error("no Label obtained");return null}this._adaptGroupTitleForFilter(e);this._connectLabelAndControl(e,t,i)};L.prototype._connectLabelAndControl=function(e,t,i){if(t.setWidth){t.setWidth("100%")}if(!i){return}if(!i.hasStyleClass("sapUiCompFilterLabel")){i.addStyleClass("sapUiCompFilterLabel")}if(e&&t){i.setLabelFor(t)}if(e.getControlTooltip()&&t.setTooltip){t.setTooltip(e.getControlTooltip())}};L.prototype._groupsWithVisibleFilters=function(){var e,t,i=this._mAdvancedAreaFilter;if(this._mAdvancedAreaFilter&&Object.keys(this._mAdvancedAreaFilter).length>1){i={};for(var r in this._mAdvancedAreaFilter){if(r&&this._mAdvancedAreaFilter[r]&&this._mAdvancedAreaFilter[r].items){e=this._mAdvancedAreaFilter[r].items.length;for(var a=0;a<this._mAdvancedAreaFilter[r].items.length;a++){t=this._mAdvancedAreaFilter[r].items[a].filterItem;if(t&&(t.getHiddenFilter()||!t.getVisible())){e--}}if(e){i[r]={}}}}}return i};L.prototype._setTriggerFilterChangeState=function(e){this._triggerFilterChangeState=e};L.prototype._getTriggerFilterChangeState=function(){return this._triggerFilterChangeState};L.prototype._setConsiderFilterChanges=function(e){this._filterChangeSemaphore=e};L.prototype._getConsiderFilterChanges=function(){return this._filterChangeSemaphore};L.prototype.fireFilterChange=function(e){if(!this.bPreventUpdateToolbarText){this._updateToolbarText();this.fireAssignedFiltersChanged()}if(!this._getTriggerFilterChangeState()){return}if(this._getConsiderFilterChanges()&&this._oVariantManagement&&!this._oVariantManagement.getInErrorState()){this._oVariantManagement.currentVariantSetModified(true)}if(this._oAdaptFiltersDialog&&!this._oAdaptFiltersDialog.isOpen()){return}if(this._oAdaptFiltersDialog){this._bDirtyViaDialog=true;this._checkAssignedFilters();this._oAdaptFiltersDialog.getResetButton?.()?.setEnabled(true)}this.fireEvent("filterChange",e)};L.prototype._notifyAboutChangedFilters=function(e,t){var i,r=this._determineByControl(t);if(e){i={added:t,filterItem:r}}else{i={deleted:t,filterItem:r}}this.fireFilterChange(i)};L.prototype._determineVariantFiltersInfo=function(e,t){var i;var r=null,a,n;var s=[];if(this._mAdvancedAreaFilter){for(r in this._mAdvancedAreaFilter){if(r){if(this._mAdvancedAreaFilter[r].items){for(i=0;i<this._mAdvancedAreaFilter[r].items.length;i++){a=this._mAdvancedAreaFilter[r].items[i];if(e||a.filterItem.getVisible()){n={group:a.filterItem.getGroupName(),name:a.filterItem.getName(),partOfCurrentVariant:a.filterItem.getPartOfCurrentVariant(),visibleInFilterBar:a.filterItem.getVisibleInFilterBar(),visible:a.filterItem.getVisible()};if(t||this._considerFilter(n)){s.push(n)}}}}}}}return s};L.prototype.mergeVariant=function(e,t){var i={};V(i,t);i.filterbar=[];i.filterBarVariant={};V(i.filterbar,e.filterbar);V(i.filterBarVariant,e.filterBarVariant);if(t&&t.hasOwnProperty("version")){i.filterbar=this._mergeVariantFields(i.filterbar,t.filterbar);i.filterBarVariant=t.filterBarVariant}return i};L.prototype._mergeVariantFields=function(e,t){var i;t.forEach(function(t){for(i=0;i<e.length;i++){if(e[i].group===t.group&&e[i].name===t.name){e.splice(i,1);break}}});return e.concat(t)};L.prototype._isDeltaHandling=function(){return this.getDeltaVariantMode()};L.prototype._getStandardVariant=function(){return this._oVariantManagement.getStandardVariant(this)};L.prototype._considerFilter=function(e){if(!this._isDeltaHandling()){return true}var t=null;var i=this._getStandardVariant();if(i&&i.filterbar){for(var r=0;r<i.filterbar.length;r++){if(i.filterbar[r].group===e.group&&i.filterbar[r].name===e.name){t=i.filterbar[r];break}}}if(!t){if(!e.partOfCurrentVariant){return false}return true}if(t.partOfCurrentVariant!==e.partOfCurrentVariant||t.visibleInFilterBar!==e.visibleInFilterBar||t.visible!==e.visible){return true}return false};L.prototype._determineVisibility=function(e){var t=false;if(e){t=e.getVisible()&&(e.getVisibleInFilterBar()||this._checkIfFilterHasValue(e.getName()));t=t&&!e.getHiddenFilter()}return t};L.prototype._retrieveVisibleAdvancedItems=function(){var e,t=null,i;var r=[];if(this._mAdvancedAreaFilter){for(t in this._mAdvancedAreaFilter){if(t){if(this._mAdvancedAreaFilter[t]&&this._mAdvancedAreaFilter[t].items){for(e=0;e<this._mAdvancedAreaFilter[t].items.length;e++){i=this._mAdvancedAreaFilter[t].items[e];if(i){if(this._determineVisibility(i.filterItem)){r.push(i)}}}}}}}return r};L.prototype._retrieveCurrentSelectionSet=function(e,t){var i,r,a,n=[];var s=this._retrieveVisibleAdvancedItems();for(i=0;i<s.length;i++){r=s[i];if(r.control&&r.filterItem&&(t||!r.filterItem._isParameter())){if(e){a={name:s[i].filterItem.getName(),control:s[i].control}}else{a=s[i].control}n.push(a)}}return n};L.prototype.search=function(){this.fireSearch({selectionSet:this._retrieveCurrentSelectionSet(false),firedFromFilterBar:this._bSearchFiredFromFilterBar});this._bSearchFiredFromFilterBar=false;return true};L.prototype._searchFromFilterBar=function(){this._bSearchFiredFromFilterBar=true;this.search.apply(this,arguments)};L.prototype.clear=function(){var e={};e.selectionSet=this._retrieveCurrentSelectionSet(false);this._deleteValidatingTokenFlag(e.selectionSet);this._clearErrorState();this.fireClear(e);this.fireAssignedFiltersChanged()};L.prototype._deleteValidatingTokenFlag=function(e){e.forEach(function(e){if(e.hasOwnProperty("__bValidatingToken")){delete e.__bValidatingToken}})};L.prototype.reset=function(){var e={};e.selectionSet=this._retrieveCurrentSelectionSet(false);this.fireReset(e);this._resetVariant()};L.prototype._resetVariant=function(){var e=null,t=null;this._resetFiltersInErrorValueState();var i=this._retrieveCurrentSelectionSet(false);this._deleteValidatingTokenFlag(i);if(this._oVariantManagement){var r=this._oVariantManagement.getSelectionKey()||this._oVariantManagement.getStandardVariantKey();if(r){e=this._oVariantManagement.getVariantContent(this,r);if(this._oVariant){this._oVariant.content=e;this._oVariant.modified=false;if(this.getPersistencyKey()&&this._oInitialVariant){this._oInitialVariant.content=e;this._oInitialVariant.modified=false;this._oInitialVariant.key=r}}if(!this.getPersistencyKey()&&this.getUseSnapshot()===undefined&&this._oInitialVariant&&this._oInitialVariant.content){t=this._oInitialVariant.content}if(e||t){this.applyVariant(e||t,"RESET")}if(this._oSelectedVariantBase&&this._isFilterBarContext()){this.applyVariant(this._oSelectedVariantBase,"RESET")}}}};L.prototype._removeValuesForNonPartOfCurrentVariants=function(e){};L.prototype._removeEmptyFilters=function(e){return e};L.prototype._applyVariant=function(e,t,i,r){var a,n=null,s,o=false,l=[];if(e){if(i){s=this._getTriggerFilterChangeState();this._setTriggerFilterChangeState(false)}this._setConsiderFilterChanges(false);a=e.filterBarVariant;n=e.filterbar;if(this._oFilterProvider){this._oFilterProvider._setSingleInputsTextArrangementData(JSON.parse(e.singleInputsTextArrangementData||"{}"));this._oFilterProvider._setInputsWithCompositeKeysData(JSON.parse(e.inputsWithCompositeKeysData||"{}"))}l=e.orderedFilterItems?JSON.parse(e.orderedFilterItems):[];if(!l.length){l=this._mAdvancedAreaFilterFlat}if(Array.isArray(n)&&n.length){this._ensureFilterLoaded(n.filter(function(e){return e.visibleInFilterBar}))}this._applyVariantFields(a,r);var h=this._reapplyVisibility(n,t==="CANCEL");this._removeValuesForNonPartOfCurrentVariants(h);if(this._oBasicSearchField&&this._oBasicSearchField.setValue){this._oBasicSearchField.setValue(e.basicSearch||"")}if(e.executeOnSelection){o=e.executeOnSelection}this._aOrderedFilterItems=l;this._reorderItemsInAdvancedAreaFilter();this.fireAfterVariantLoad(t,o);this._setConsiderFilterChanges(true);this.fireAssignedFiltersChanged();if(o||this.getLiveMode&&this.getLiveMode()){this._searchFromFilterBar()}else if(t!=="CANCEL"){this._clearErrorState()}if(i){this._setTriggerFilterChangeState(s)}if((!t||t==="RESET")&&this._isFilterBarContext()){this._oSelectedVariantBase=e}}};L.prototype._fetchVariantFiltersData=function(e){if(this._fRegisteredFetchData){try{return this._fRegisteredFetchData(e)}catch(e){v.error("callback for fetching data throws an exception")}}else{v.warning("no callback for fetch data supplied")}return null};L.prototype._applyVariantFields=function(e,t){if(this._fRegisteredApplyData){try{return this._fRegisteredApplyData(e,t)}catch(e){v.error("callback for applying data throws an exception")}}else{v.warning("no callback for apply data supplied")}};L.prototype._isStandardVariant=function(){var e=this.getCurrentVariantId();if(!e){return true}if(this._oVariantManagement){if(e===this._oVariantManagement.getStandardVariantKey()){return true}if(this._oVariantManagement._oStandardVariant===null){return true}}return false};L.prototype.isCurrentVariantExecuteOnSelectEnabled=function(){if(this._oVariantManagement&&!this._oVariantManagement.getInErrorState()){var e=this.getCurrentVariantId();if(!e){return this._oVariantManagement.getExecuteOnSelectForStandardVariant()}var t=this._oVariantManagement.getItemByKey(e);if(t){return t.getExecuteOnSelect()}}return false};L.prototype.fetchVariant=function(){var e,t={},i,r,a=[];if(this._isDeltaHandling()){if(!this._isStandardVariant()){t.version="V3"}}this.fireBeforeVariantFetch();e=this._determineVariantFiltersInfo(true,!t.version);t.filterbar=!e?[]:e;var n=function(e){e.forEach(function(e){a.push({name:e.name,group:e.group})})};if(this._aAdaptFilterItems&&this._aAdaptFilterItems.length>0){n(this._aAdaptFilterItems);t.orderedFilterItems=JSON.stringify(a)}else{if(this._aOrderedFilterItems.length>0){n(this._aOrderedFilterItems)}else{this._mAdvancedAreaFilterFlat=this._getAllFilterItemsFlat();n(this._mAdvancedAreaFilterFlat)}t.orderedFilterItems=JSON.stringify(a)}r=this._fetchVariantFiltersData(t.version);t.filterBarVariant=this._removeEmptyFilters(r);t.singleInputsTextArrangementData=JSON.stringify(this._oFilterProvider?this._oFilterProvider._getSingleInputsTextArrangementData():{});t.inputsWithCompositeKeysData=JSON.stringify(this._oFilterProvider?this._oFilterProvider._getInputsWithCompositeKeysData():{});i=this._getBasicSearchValue();if(i){t.basicSearch=i}if(this._oVariant&&this._oVariant.content){this._oVariant.content=t}if(!this._oSelectedVariantBase||this._oSelectedVariantBase===null){this._oSelectedVariantBase=t}return t};L.prototype.applyVariant=function(e,t,i){if(e.hasOwnProperty("version")){e=this.mergeVariant(this._getStandardVariant(),e,t)}this._applyVariant(e,t,i,e.version);this.invalidate()};L.prototype.determineMandatoryFilterItems=function(){var e;var t=[];var i=this._retrieveVisibleAdvancedItems();for(e=0;e<i.length;e++){if(i[e].filterItem.getMandatory()===true){if(i[e].control){t.push(i[e].filterItem)}}}return t};L.prototype.determineAsyncFilters=function(e){var t,i,r,a=[],n=this.getAllFilterItems(true);for(t=0;t<n.length;t++){r=n[t];i=this.determineControlByFilterItem(r,true);if(i&&i.isA("sap.m.ComboBox")&&i.getDomRef()!==null&&!r.data("isCustomField")){if(e.bAll){a.push(r)}else if(e.bNonMandatory&&!r.getMandatory()){a.push(r)}else if(e.bMandatory&&r.getMandatory()){a.push(r)}}}return a};L.prototype.determineControlByFilterItem=function(e,t){var i,r=null;var a,n;if(!e||!t&&e._isParameter()){return null}if(this._aBasicAreaSelection){for(i=0;i<this._aBasicAreaSelection.length;i++){a=this._aBasicAreaSelection[i];if(e===a.filterItem){return a.control}}}if(this._mAdvancedAreaFilter){for(r in this._mAdvancedAreaFilter){if(r){n=this._mAdvancedAreaFilter[r];if(n&&n.items){for(i=0;i<n.items.length;i++){a=n.items[i];if((t||!a.filterItem._isParameter())&&e===a.filterItem){return a.control}}}}}}return null};L.prototype.determineControlByName=function(e,t){var i=this._determineEnsuredItemByName(e,t);if(i&&i.filterItem&&!i.filterItem._isParameter()){return i.control}return null};L.prototype.determineLabelByName=function(e,t){var i=this._determineEnsuredItemByName(e,t);if(i&&i.filterItem){return i.filterItem._oLabel}return null};L.prototype._determineEnsuredItemByName=function(e,t){if(!t){t=this._determineGroupNameByName(e)}this._ensureFilterLoaded([{name:e,group:t}]);return this._determineItemByName(e,t)};L.prototype._determineGroupNameByName=function(e){if(this._aFields){for(var t=0;t<this._aFields.length;t++){if(this._aFields[t].fieldName===e){return this._aFields[t].groupName}}}var i=this._determineFilterItemByName(e);if(i){var r=i.getGroupName();if(r!==L.INTERNAL_GROUP){return r}}return null};L.prototype._determineItemByName=function(e,t){var i;var r,a;var n=t;if(!e){return null}if(!n){n=L.INTERNAL_GROUP}if(this._mAdvancedAreaFilter){a=this._mAdvancedAreaFilter[n];if(a&&a.items){for(i=0;i<a.items.length;i++){r=a.items[i];if(r&&r.filterItem&&r.filterItem.getName()===e){return r}}}}return null};L.prototype.determineFilterItemByName=function(e,t){var i;if(t){i=this._determineEnsuredItemByName(e,t)}else{i=this._determineEnsuredItemByName(e)}if(i&&i.filterItem){return i.filterItem}return null};L.prototype._determineFilterItemByName=function(e){var t,i;if(this._mAdvancedAreaFilter){for(t in this._mAdvancedAreaFilter){i=this._determineItemByName(e,t);if(i){return i.filterItem}}}return null};L.prototype._determineByControl=function(e){var t=null,i;if(this._mAdvancedAreaFilter){for(t in this._mAdvancedAreaFilter){if(t){var r=this._mAdvancedAreaFilter[t];if(r&&r.items){for(i=0;i<r.items.length;i++){if(r.items[i]&&r.items[i].control===e){return r.items[i]}}}}}}return null};L.prototype._applyAttributes=function(){if(this._isPhone()||this._isTablet()){var e=this.getAllFilterItems(true);if(e.length>0){for(var t=0;t<e.length;t++){var i=e[t],r=i._getControl(),a=i.getName();this._applyInputModeAttribute(r,a)}}}};L.prototype._applyInputModeAttribute=function(e,t){if(this._oFilterProvider&&this._oFilterProvider._aFilterBarNumericFieldMetadata&&this._oFilterProvider._aFilterBarNumericFieldMetadata.indexOf(t)!==-1){var i=e.getDomRef("inner");if(i){i.setAttribute("inputmode","decimal");i.setAttribute("pattern","[0-9]+([.,][0-9]+)?")}}};L.prototype._destroyLazyFilterControl=function(){var e,t;if(this._aFields&&this._aFields.length>0){if(this._aFields&&this._aFields.length>0){for(e=0;e<this._aFields.length;e++){t=this._aFields[e];if(t.factory){if(t.control){t.control.destroy()}}}}}};L.prototype._removeInputRenderingDelegate=function(){var e,t,i;if(this._mAdvancedAreaFilter){for(t in this._mAdvancedAreaFilter){if(t&&this._mAdvancedAreaFilter[t]&&this._mAdvancedAreaFilter[t].items){for(e=0;e<this._mAdvancedAreaFilter[t].items.length;e++){i=this._mAdvancedAreaFilter[t].items[e];if(i&&i.control&&i.control._onAfterInputRenderingDelegate){i.control.removeDelegate(i.control._onAfterInputRenderingDelegate)}}}}}};L.prototype._destroyFilterControls=function(){if(!this.getAdvancedMode()){this._destroyLazyFilterControl()}this._removeInputRenderingDelegate()};L.prototype._registerVariantManagement=function(){if(this._oVariantManagement){this._oVariantManagement.attachSave(this._variantSave,this);this._oVariantManagement.attachAfterSave(this._afterVariantSave,this)}};L.prototype._unregisterVariantManagement=function(){if(this._oVariantManagement){if(this._fInitialiseVariants){this._oVariantManagement.detachInitialise(this._fInitialiseVariants);this._fInitialiseVariants=null}this._oVariantManagement.detachSave(this._variantSave,this);this._oVariantManagement.detachAfterSave(this._afterVariantSave,this);if((!this.getUseToolbar()||this.getAdvancedMode())&&!this._oVariantManagement.getDomRef()){this._oVariantManagement.destroy()}}};L.prototype.showFilterDialog=function(){if(!this._oAdaptFiltersDialog){this.showAdaptFilterDialog()}};L.prototype.addFilterDialogContent=function(e){if(this._oAdaptFiltersDialog){return e}return null};L.prototype.getFilterDialogContent=function(){if(this._oAdaptFiltersDialog){return new T}return null};L.prototype.setShowOldFilterDialog=function(){};L.prototype._getFilterControlById=function(e){for(var t in this._mAdvancedAreaFilter){var i=this._mAdvancedAreaFilter[t];for(var r=0;r<i.items.length;r++){var a=i.items[r];if(a.control&&a.control.getId()===e){return a.control}}}return null};L.prototype._getFilterControlByIndex=function(e){var t=0;for(var i in this._mAdvancedAreaFilter){var r=this._mAdvancedAreaFilter[i];for(var a=0;a<r.items.length;a++){var n=r.items[a];if(n.filterItem.getVisibleInFilterBar()){if(t===e){return n.control}t++}}}};function w(e,t){var i=e.filter(function(e){return e.getText()===t});return i.length>0}L.prototype._getFilterControlByLabel=function(e){for(var t in this._mAdvancedAreaFilter){var i=this._mAdvancedAreaFilter[t];for(var r=0;r<i.items.length;r++){var a=i.items[r];if(a.control){if(w(a.control.getLabels(),e)){return a.control}}}}};L.prototype._isFilterItemInBasicGroup=function(e){return e&&!e.getGroupName()||e.getGroupName()===L.INTERNAL_GROUP};L.prototype._shouldBeVisible=function(e){return e.filterItem.getMandatory()&&!this._hasFilterValue(e.filterItem)||e.name==="_BASIC_SEARCH_FIELD"};L.prototype.exit=function(){a.prototype.exit.apply(this,arguments);this._unregisterVariantManagement();this._destroyFilterControls();window.sessionStorage.removeItem(this.getId());window.sessionStorage.removeItem("semanticDates");if(this._oAdaptFiltersDialog){this._oAdaptFiltersDialog.destroy();this._oAdaptFiltersDialog=null}if(this._oAdaptFiltersDialogModel){this._oAdaptFiltersDialogModel=null}if(this._oAdaptFiltersPanel){this._oAdaptFiltersPanel=null}if(this.oModel){this.oModel.destroy();this.oModel=null}if(this._oToolbarSpacer){this._oToolbarSpacer.destroy();this._oToolbarSpacer=null}if(this._oSeparator){this._oSeparator.destroy();this._oSeparator=null}this._aFields=null;this._aBasicAreaSelection=null;this._mAdvancedAreaFilter=null;this._oVariantManagement=null;this._oCollectiveSearch=null;this._oVariant=null;this._fRegisteredFetchData=null;this._fRegisteredApplyData=null;this._fRegisterGetFiltersWithValues=null;this._fRegisteredFilterChangeHandlers=null;this._oBasicSearchField=null;this._bSearchFiredFromFilterBar=false;this._bFiltersDialogForKeyUser=false;this._oInitializedDeferred=null;this._bDelegateAdded=false;e.detachChange(this._onLocalizationChanged)};return L});
//# sourceMappingURL=FilterBar.js.map