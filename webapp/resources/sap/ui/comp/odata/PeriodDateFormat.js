/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/base/i18n/Formatting","sap/ui/base/Object","sap/ui/core/Locale","sap/ui/core/LocaleData"],function(t,e,o,s){"use strict";var r=e.extend("sap.ui.comp.odata.PeriodDateFormat",{metadata:{library:"sap.ui.comp"},constructor:function(r,a){e.call(this,r,a);var i,n,l,p,u=new o(t.getLanguageTag()),f=s.getInstance(u),m=t.getCustomLocaleData(),h=/(m|y)(?:.*)(\W)(m|y)/i,g=m["dateFormats-short"];this.oFormatOptions=a;if(this.oFormatOptions.format.length>4){i="yM"}else if(this.oFormatOptions.format==="PPP"){i="M"}else{i=this.oFormatOptions.format}if(g&&i==="yM"){p=g.match(h).splice(1).join("");if(p){n=p}}else{n=f.getCustomDateTimePattern(i,this.oFormatOptions.calendarType)}n=n.replace(/([\u4e00-\u9faf\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uffef])+/gi,"");if(this.oFormatOptions.format.length>4){n=n.replace(/y+/i,this.oFormatOptions.format.slice(0,this.oFormatOptions.format.lastIndexOf("Y")+1));n=n.replace(/m+/i,this.oFormatOptions.format.slice(this.oFormatOptions.format.lastIndexOf("Y")+1))}else if(this.oFormatOptions.format==="PPP"){n="PPP"}l=this.parseCldrDatePattern(n);this.oFormatOptions.pattern=l.length>1?n:"";this._setFormatRegex(l);this._setParseRegex(l);this._setValidationRegex(l)}});r.getDateInstance=function(t){return new r(null,t)};r.prototype.getPattern=function(){return this.oFormatOptions.pattern};r.prototype.getRegExPattern=function(){return this.sFormatRegExPattern};r.prototype.getTemplate=function(){return this.sFormatRegExGroups};r.prototype._setFormatRegex=function(t){var e=[],o=[],s,r,a,i,n;for(n=0;n<t.length;n++){s=t[n];r=s.symbol||"";a=this.oSymbols[r].format;if(r===""){o[n]=s.value}else if(r==="y"||r==="Y"){e.unshift("("+a.source+")");o[n]="$"+1}else{e.push("("+a.source+")");i=t.some(function(t){return t.symbol==="y"||t.symbol==="Y"});o[n]=i?"$"+2:"$"+1}}this.sFormatRegExPattern=new RegExp(e.join(""));this.sFormatRegExGroups=o.join("")};r.prototype._setParseRegex=function(t){var e,o,s,r,i,n=[],l={},p=0;for(r=0;r<t.length;r++){e=t[r];o=e.symbol||"";s=this.oSymbols[o].parse;if(o===""){n.push("\\D+?")}else{n.push("("+s.source+")");i=++p;l[i]=e}}this.sParseRegExPattern=new RegExp("^"+n.join("")+"$");this.fnParseRegExReplacer=function(){var t,e,o=[];for(var s in l){t=l[s];e=arguments[s];if(e.length<t.digits){if(t.symbol==="y"||t.symbol==="Y"){e=a(e)}else{e=e.padStart(t.digits,"0")}}if(t.symbol==="y"||t.symbol==="Y"){o.unshift(e)}else{o.push(e)}}return o.join("")}};r.prototype._setValidationRegex=function(t){var e,o,s,r,a=[];for(e=0;e<t.length;e++){o=t[e];s=o.symbol||"";r=this.oSymbols[s].format;if(s===""){continue}else if(s==="y"||s==="Y"){a.unshift(r.source)}else{a.push(r.source)}}this.sValidationRegExPattern=new RegExp("^("+a.join(")(")+")$")};r.prototype.parseCldrDatePattern=function(t){var e,o,s,r,a=[];for(e=0;e<t.length;e++){o=t[e];if(s!==o){r={}}else{r.digits+=1;continue}if(typeof this.oSymbols[o]==="undefined"){r.value=o;r.type="text"}else{r.symbol=o;r.digits=1}s=o;a.push(r)}return a};r.prototype.format=function(t){if(t==null||typeof t!=="string"){return""}return t.replace(this.sFormatRegExPattern,this.sFormatRegExGroups)};r.prototype.parse=function(t){if(t){return t.replace(this.sParseRegExPattern,this.fnParseRegExReplacer)}return null};r.prototype.validate=function(t){return this.sValidationRegExPattern.test(t)};r.oRegexFormatPatterns={};r.oRegexParsePatterns={};r.prototype.oSymbols={};r.prototype.destroy=function(){e.prototype.destroy.apply(this,arguments);this._oAnnotationValidationRegexPattern=null};function a(t){var e,o=Number.parseInt(t),s=(new Date).getUTCFullYear(),r=Math.floor(s/100);e=r*100+o-s;if(t.length===3){o+=Math.floor((r-1)/10)*1e3}else if(e<-70){o+=(r+1)*100}else if(e<30){o+=r*100}else{o+=(r-1)*100}return o}return r});
//# sourceMappingURL=PeriodDateFormat.js.map