/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.define(["./ODataType","sap/ui/comp/odata/FiscalMetadata","sap/ui/model/odata/AnnotationHelper","sap/m/library","sap/base/Log","sap/ui/comp/odata/CalendarMetadata"],function(t,e,i,n,a,o){"use strict";var r={"com.sap.vocabularies.Common.v1.FilterExpressionType/SingleInterval":"interval","com.sap.vocabularies.Common.v1.FilterExpressionType/MultiValue":"multi-value","com.sap.vocabularies.Common.v1.FilterExpressionType/SingleValue":"single-value"};var s={"com.sap.vocabularies.UI.v1.SelectionRangeOptionType/EQ":"EQ","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/BT":"BT","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/CP":"CP","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/LE":"LE","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/GE":"GE","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/NE":"NE","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/NB":"NB","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/NP":"NP","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/GT":"GT","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/LT":"LT"};var l={"com.sap.vocabularies.UI.v1.SelectionRangeSignType/I":"I","com.sap.vocabularies.UI.v1.SelectionRangeSignType/E":"E"};var u=n.P13nConditionOperation;var p=function(t){if(typeof t==="object"){this.oModel=t}else{this._sResourceRootUri=t}this._oMetadata=null;if(!this.oModel&&this._sResourceRootUri){a.error("Analyzing metadata cannot be done without an ODataModel!");return}if(this.oModel){this._oMetaModel=this.oModel.getMetaModel()}if(this._oMetaModel){this._oMetadata=this._oMetaModel.getProperty("/")}if(this._oMetadata&&this._oMetadata.dataServices){this._oSchemaDefinition=this._oMetadata.dataServices.schema[0]}};p.hierarchyType={nodeFor:1,nodeExternalKeyFor:2,parentNodeFor:3,levelFor:4,drillStateFor:5,nodeDescendantCountFor:6};p.prototype.getNamespace=function(){if(this._oSchemaDefinition){return this._oSchemaDefinition.namespace}};p.prototype.getSchemaDefinition=function(){return this._oSchemaDefinition};p.prototype.getEntityContainerAttribute=function(t){var e=null,i;if(this._oMetaModel&&t){if(t.indexOf("sap:")<0){t="sap:"+t}i=this._oMetaModel.getODataEntityContainer();e=i[t]||null}return e};p.prototype.getEntityLabelByEntityTypeName=function(t){var e=this._getEntityDefinition(t),i,n="";if(e){i=e["com.sap.vocabularies.Common.v1.Label"];if(i&&i.String){n=i.String}}return n};p.prototype._getEntityDefinition=function(t){var e=null;if(t){e=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(t))}return e};p.prototype._getComplexTypeDefinition=function(t){var e=null;if(t){e=this._oMetaModel.getODataComplexType(this._getFullyQualifiedNameForEntity(t))}return e};p.prototype._getNameOfPropertyUsingComplexType=function(t,e){var i;if(this._oSchemaDefinition){i=this._oSchemaDefinition.namespace}if(t&&e&&i){var n=i+"."+e;var a=this._getEntityDefinition(t);if(a){var o=a.property;if(o&&o.length){var r=0;for(r=0;r<o.length;r++){var s=o[r];if(s&&s.type===n){return s.name}}}}}return null};p.prototype.removeNamespace=function(t){var e,i=t;if(t){e=t.lastIndexOf(".")+1}if(e>0){i=t.substring(e)}return i};p.prototype.getEntityTypeNameFromEntitySetName=function(t){var e=null,i=null;if(this._oMetaModel){e=this._oMetaModel.getODataEntitySet(t);if(e){i=e.entityType}}return i};p.prototype.getEntitySetNameFromEntityTypeName=function(t){var e,i,n,a,o,r;if(this._oMetaModel&&t){e=this._getFullyQualifiedNameForEntity(t);i=this._oMetaModel.getODataEntityContainer();if(i&&e){n=i.entitySet;o=n.length;for(a=0;a<o;a++){r=n[a];if(r.entityType===e){break}r=null}if(r){return r.name}}}return null};p.prototype.getKeysByEntitySetName=function(t){var e=null,i=null;if(!this._oMetaModel){return undefined}i=this.getEntityTypeNameFromEntitySetName(t);if(i){e=this.getKeysByEntityTypeName(i)}return e};p.prototype.getKeysByEntityTypeName=function(t){var e=null,i=null,n,a=0,o=null;if(!this._oMetaModel){return undefined}o=this._getEntityDefinition(t);if(o){if(o.key){i=o.key.propertyRef;if(i){a=i.length;e=[];for(n=0;n<a;n++){e.push(i[n].name)}}}}return e};p.prototype.getFieldsByEntitySetName=function(t){var e=null,i,n=null;if(!this._oMetaModel){return undefined}i=this._oMetaModel.getODataEntitySet(t);if(i){n=i.entityType}if(n){e=this.getFieldsByEntityTypeName(n);this._enrichEntitySetMetadata(e,i)}return e};p.prototype._enrichEntitySetMetadata=function(t,e){var i,n,a,o,r,s;a=this._getNonSortableFields(e);o=this._getNonFilterableFields(e);r=this._getRequiredFilterFields(e);s=this._getFilterExpressionRestriction(e);i=t.length;while(i--){n=t[i];n.sortable=!(a.indexOf(n.name)>-1);n.filterable=!(o.indexOf(n.name)>-1);n.requiredFilterField=r.indexOf(n.name)>-1;n.filterRestriction=s[n.name]}};p.prototype._extractPropertyPathsFromAnnotation=function(t,e){var i=[],n,a,o;if(t&&e){n=t[e]}if(n){a=n.length;while(a--){o=n[a].PropertyPath;if(o){i.push(o)}}}return i};p.prototype._getNonSortableFields=function(t){var e;if(t){e=t["Org.OData.Capabilities.V1.SortRestrictions"]}return this._extractPropertyPathsFromAnnotation(e,"NonSortableProperties")};p.prototype._getNonFilterableFields=function(t){var e;if(t){e=t["Org.OData.Capabilities.V1.FilterRestrictions"]}return this._extractPropertyPathsFromAnnotation(e,"NonFilterableProperties")};p.prototype._getRequiredFilterFields=function(t){var e;if(t){e=t["Org.OData.Capabilities.V1.FilterRestrictions"]}return this._extractPropertyPathsFromAnnotation(e,"RequiredProperties")};p.prototype._getFilterExpressionRestriction=function(t){var e={},i,n,a,o,s;if(t){var l=t["Org.OData.Capabilities.V1.FilterRestrictions"];if(l){i=l["FilterExpressionRestrictions"];if(i){for(var u=0;u<i.length;u++){o=i[u].Property;s=i[u].AllowedExpressions;if(s&&s.String){switch(s.String){case"SingleValue":e[o.PropertyPath]="single-value";break;case"MultiValue":e[o.PropertyPath]="multi-value";break;case"SingleRange":e[o.PropertyPath]="interval";break;case"SearchExpression":e[o.PropertyPath]="search-expression";break;default:}}}}}if(i==undefined){i=t["com.sap.vocabularies.Common.v1.FilterExpressionRestrictions"];if(i){n=i.length;while(n--){a=i[n];if(a){o=a.Property;s=a.AllowedExpressions;if(o&&s&&o.PropertyPath&&s.EnumMember){e[o.PropertyPath]=r[s.EnumMember]}}}}}}return e};p.prototype._isFilterable=function(t,e){var i,n=true;if(e){i=this._getNonFilterableFields(e);n=!(i.indexOf(t.name)>-1)}if(n){n=!(t["sap:filterable"]==="false")}return n};p.isHiddenFilter=function(t){return!!t["com.sap.vocabularies.UI.v1.HiddenFilter"]&&p.isTermDefaultTrue(t["com.sap.vocabularies.UI.v1.HiddenFilter"])};p.isHidden=function(t){return!!t["com.sap.vocabularies.UI.v1.Hidden"]&&p.isTermDefaultTrue(t["com.sap.vocabularies.UI.v1.Hidden"])};p.prototype.getFieldsByEntityTypeName=function(t){var e;if(!this._oMetaModel){return undefined}e=this._getEntityDefinition(t);return this._getFieldsByEntityDefinition(e)};p.prototype.getFieldsByComplexTypeName=function(t,e){var i;if(!this._oMetaModel){return undefined}i=this._getComplexTypeDefinition(t);return this._getFieldsByEntityDefinition(i,e)};p.prototype.getAllEntityTypeNames=function(){if(!this._oMetaModel){return undefined}var t=this._oSchemaDefinition;if(t.entityType&&t.entityType.length>0){var e=0;var i=[];for(e=0;e<t.entityType.length;e++){i.push(t.entityType[e].name)}return i}return null};p.prototype.getFieldSemanticObjectMap=function(t){var e=this.getFieldsByEntitySetName(t);if(!e){return null}var i={},n,a=e.length;for(n=0;n<a;n++){var o=e[n];var r=this.getSemanticObjectAnnotation(o.fullName);if(r&&r.semanticObject){i[o.name]=r.semanticObject}}return i};p.prototype._getFieldsByEntityDefinition=function(t,e){var i=null,n=null,a=0,o=0,r,s;if(t){n=t.property}if(n){i=[];o=n.length;for(a=0;a<o;a++){r=n[a];if(r){s=this._parseV4PropertyAnnotations(r,t,e);this._determineHierarchyInformation(s,r);this._determineFilterAndSortInformation(s,r,null);i.push(s)}}}return i};p.prototype.getPropertyContextByPath=function(t){var e,i,n,a,o;if(t&&this._oMetaModel){e=t.split("/");i=this._oMetaModel.getODataEntityType(e[0])||this._oMetaModel.getODataComplexType(e[0]);n=e[1];a=this._oMetaModel.getODataProperty(i,n,true);if(a){o=this._oMetaModel.createBindingContext(a)}}return o};p.getDisplayFormat=function(t){var e=t["sap:display-format"];if(e){return e}};p.isCalendarDate=function(t){return p.isPropertyStringType(t)&&p.isTermDefaultTrue(t["com.sap.vocabularies.Common.v1.IsCalendarDate"])};p.isFiscalDate=function(t){return e.isFiscalValue(t)};p.isCalendarType=function(t){return o.isCalendarValue(t)};p.getTimezonePropertyPath=function(t){if(t["type"]!=="Edm.DateTimeOffset"){return undefined}var e=t["com.sap.vocabularies.Common.v1.Timezone"];return e?e.Path:undefined};p.getIsTimezoneProperty=function(t){if(t["type"]!=="Edm.String"){return undefined}return t["com.sap.vocabularies.Common.v1.IsTimezone"]&&t["com.sap.vocabularies.Common.v1.IsTimezone"].Bool!=="false"};p.hasValueListRelevantQualifiers=function(t){var e=false;if(t&&t["com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers"]){e=true}return e};p.getAggregationRole=function(t){if(t["com.sap.vocabularies.Analytics.v1.Dimension"]){return"dimension"}if(t["com.sap.vocabularies.Analytics.v1.Measure"]){return"measure"}return undefined};p.getLinkDisplayFormat=function(t){if(p.isEmailAddress(t)){return"EmailAddress"}if(p.isPhoneNumber(t)){return"PhoneNumber"}if(p.isURL(t)){return"URL"}return""};p.getValueListMode=function(t){if(p.isValueListWithFixedValues(t)){return"fixed-values"}var e=t["sap:value-list"];if(e){return e}return""};p.isTermTrue=function(t){return!!t&&t.Bool==="true"};p.isPropertyStringType=function(t){return!!t&&t.type==="Edm.String"};p.isTermDefaultTrue=function(t){if(t){return t.Bool?t.Bool!=="false":true}return false};p.isNullable=function(t){return!(t&&t.nullable==="false")};p.isSkippingMeasuredQuantityCheck=function(t){var e="com.sap.vocabularies.UI.v1.DoNotCheckScaleOfMeasuredQuantity";return p.isTermTrue(t[e])};p.isDigitSequence=function(t){return p.isPropertyStringType(t)&&p.isTermDefaultTrue(t["com.sap.vocabularies.Common.v1.IsDigitSequence"])};p.isUpperCase=function(t){return p.isPropertyStringType(t)&&p.isTermDefaultTrue(t["com.sap.vocabularies.Common.v1.IsUpperCase"])};p.isEmailAddress=function(t){return p.isPropertyStringType(t)&&p.isTermDefaultTrue(t["com.sap.vocabularies.Communication.v1.IsEmailAddress"])};p.isPhoneNumber=function(t){return p.isPropertyStringType(t)&&p.isTermDefaultTrue(t["com.sap.vocabularies.Communication.v1.IsPhoneNumber"])};p.isURL=function(t){return p.isPropertyStringType(t)&&(p.isTermDefaultTrue(t["Org.OData.Core.V1.IsURL"])||p.isTermDefaultTrue(t["Org.OData.Core.V1.IsUrl"]))};p.isValueList=function(t){var e="com.sap.vocabularies.Common.v1.ValueList";return!!(t&&(t["sap:value-list"]||t[e]))};p.isRecommendationList=function(t){return!!(t&&t["com.sap.vocabularies.UI.v1.RecommendationList"])};p.isCurrencyCode=function(t){return!!(t&&t["sap:semantics"]==="currency-code")};p.isUnitOfMeasure=function(t){return!!(t&&t["sap:semantics"]==="unit-of-measure")};p.isValueListWithFixedValues=function(t){var e="com.sap.vocabularies.Common.v1.ValueListWithFixedValues";return p.isTermTrue(t[e])};p.hasImportance=function(t){return!!(t&&t["com.sap.vocabularies.UI.v1.Importance"])};p.prototype._parseProperty=function(t,e,i){var n=this._parseV4PropertyAnnotations(t,e,i);this._determineHierarchyInformation(n,t);this._determineFilterAndSortInformation(n,t,null);return n};p.prototype._parseV4PropertyAnnotations=function(t,e,i){var n=Object.assign({},t);var a=t["com.sap.vocabularies.Common.v1.Label"];if(a){n.fieldLabel=a.String}a=t["com.sap.vocabularies.Common.v1.QuickInfo"];if(a){n.quickInfo=a.String}n.displayFormat=p.getDisplayFormat(t);n.isDigitSequence=p.isDigitSequence(t);n.isURL=p.isURL(t);n.isEmailAddress=p.isEmailAddress(t);n.isPhoneNumber=p.isPhoneNumber(t);n.isUpperCase=p.isUpperCase(t);n.isCalendarDate=p.isCalendarDate(t);n.isCalendarType=p.isCalendarType(t);n.calendarType=o.getCalendarAnnotationType(t);n.isFiscalDate=p.isFiscalDate(t);n.timezone=p.getTimezonePropertyPath(t);n.isTimezone=p.getIsTimezoneProperty(t);n.aggregationRole=p.getAggregationRole(t);a=t["Org.OData.Measures.V1.ISOCurrency"];if(a){n.isCurrencyField=true;n.isMeasureField=true;n.unit=a.Path}a=t["Org.OData.Measures.V1.Unit"];if(a){n.isMeasureField=true;n.unit=a.Path}a=t["com.sap.vocabularies.Common.v1.Text"];if(a){n.description=a.Path;n.displayBehaviour=this.getTextArrangementValue(a)}else if(t["com.sap.vocabularies.UI.v1.TextArrangement"]){n.displayBehaviour=this.getTextArrangementValue(t)}a=t["com.sap.vocabularies.UI.v1.IsImageURL"]||t["com.sap.vocabularies.UI.v1.IsImageUrl"];n.isImageURL=p.isTermDefaultTrue(a);n.entityName=e.name;n.parentPropertyName=i;n.fullName=this._getFullyQualifiedNameForField(t.name,e);a=t["com.sap.vocabularies.Common.v1.FieldControl"];n.visible=!(a&&(a.EnumMember==="com.sap.vocabularies.Common.v1.FieldControlType/Hidden"||a.EnumMember==="com.sap.vocabularies.Common.v1.FieldControlType/Inapplicable"));n.visible=n.visible&&!p.isHidden(t);n.hiddenFilter=p.isHiddenFilter(t);if(t["defaultValue"]!==undefined){n.defaultPropertyValue=t["defaultValue"]}a=t["com.sap.vocabularies.Common.v1.FilterDefaultValue"];if(a){n.defaultFilterValue=this._getDefaultValues(t.type,a,t)}return n};p.prototype._determineHierarchyInformation=function(t,e){var i={field:null,type:null};if(e["sap:hierarchy-node-for"]!=null){i.field=e["sap:hierarchy-node-for"];i.type=p.hierarchyType.nodeFor}if(e["sap:hierarchy-node-external-key-for"]!=null){i.field=e["sap:hierarchy-node-external-key-for"];i.type=p.hierarchyType.nodeExternalKeyFor}if(e["sap:hierarchy-parent-node-for"]!=null){i.field=e["sap:hierarchy-parent-node-for"];i.type=p.hierarchyType.parentNodeFor}if(e["sap:hierarchy-level-for"]!=null){i.field=e["sap:hierarchy-level-for"];i.type=p.hierarchyType.levelFor}if(e["sap:hierarchy-drill-state-for"]!=null){i.field=e["sap:hierarchy-drill-state-for"];i.type=p.hierarchyType.drillStateFor}if(e["sap:hierarchy-node-descendant-count-for"]!=null){i.field=e["sap:hierarchy-node-descendant-count-for"];i.type=p.hierarchyType.nodeDescendantCountFor}if(i.type!=null){t.hierarchy=i}};p.prototype._determineFilterAndSortInformation=function(t,e,i){if(i){this._enrichEntitySetMetadata([t],i)}if(t.filterable==undefined||t.filterable){t.filterable=e["sap:filterable"]!=="false"}if(!t.filterRestriction&&e["sap:filter-restriction"]){t.filterRestriction=e["sap:filter-restriction"]}if(!t.requiredFilterField){t.requiredFilterField=e["sap:required-in-filter"]==="true"}if(t.sortable==undefined||t.sortable){t.sortable=e["sap:sortable"]!=="false"}};p.prototype._getDefaultValues=function(e,i,n){var o=null,r=t.getDefaultValueTypeName(e);if(i[r]){o=i[r]}else{a.error("default value for "+n.name+" expected through the property "+r)}return o};p.prototype.extractNavigationPropertyField=function(t,e){var i,n,a,o,r,s,l,u=null;if(e&&t){i="/"+e+"/";o=t.split("/");r=o.pop();s=o.join("/");if(s&&r){n=this._oMetaModel.getMetaContext(i+s);if(n){l=this._oMetaModel.getProperty(n.getPath())}}if(l){a=this._oMetaModel.getODataProperty(l,r)}if(a){u=this._parseV4PropertyAnnotations(a,l,s);u.name=t;var p=this._oMetaModel.getODataEntitySet(e);this._determineFilterAndSortInformation(u,a,p);u.name=a.name}}return u};p.prototype.getAllFilterableFieldNamesByEntityTypeName=function(t){var e,i,n,a,o,r,s;r=[];e=this.getAllFilterableFieldsByEntityTypeName(t);if(e&&e.length){n=e.length;for(i=0;i<n;i++){s=e[i];if(s.fields&&s.fields.length){o=s.fields.length;for(a=0;a<o;a++){r.push(s.fields[a].name)}}}}return r};p.prototype._mapSeparateNavigationProperties=function(t){var e={};t.forEach(function(t){var i=t.split("/"),n=i.shift(),a=i.shift();if(!Array.isArray(e[n])){e[n]=[]}if(a){e[n].push(a)}});return e};p.prototype._getAllFilterableFieldsByEntity=function(t,e,i,n){var a=[],o,r,s,l,u,p,f,c,m={},d,y=n&&n.some(t=>t.includes("/"));if(y){m=this._mapSeparateNavigationProperties(n)}if(!this._oMetaModel||!t){return undefined}if(e){r=this._oMetaModel.getODataEntitySet(t);if(r){o=this._getEntityDefinition(r.entityType)}}else{o=this._getEntityDefinition(t)}if(o){a.push(this._getFilterableFieldsFromEntityDefinition(o,undefined,r));s=this._getFilterableAssociations(o,r);for(l in s){if(!n||n.indexOf(l)>-1||y&&Object.keys(m).includes(l)){c=s[l];if(e){u=this._oMetaModel.getODataAssociationSetEnd(o,l);if(u.entitySet){f=this._oMetaModel.getODataEntitySet(u.entitySet)}}p=this._getEntityDefinition(c);if(p){if(i&&p["sap:semantics"]==="parameters"){continue}if(y){d=this._getFilterableFieldsFromEntityDefinition(p,l,f);const t=l;if(m[t]&&m[t].length>0){d.fields=d.fields.filter(function(e){return m[t].includes(e.name)})}a.push(d)}else{a.push(this._getFilterableFieldsFromEntityDefinition(p,l,f))}}}}}return a};p.prototype._getAllFilterableFieldsByEntityForAllEndpoints=function(t,e,i,n){var a=[],o,r,s,l,u,p,f,c;if(!this._oMetaModel||!t){return undefined}if(e){r=this._oMetaModel.getODataEntitySet(t);if(r){o=this._getEntityDefinition(r.entityType)}}else{o=this._getEntityDefinition(t)}if(o){a.push(this._getFilterableFieldsFromEntityDefinition(o,undefined,r));s=this._getAssociations(o,r,true,true);for(l in s){if(!n||n.indexOf(l)>-1){c=s[l];if(e){u=this._oMetaModel.getODataAssociationSetEnd(o,l);if(u.entitySet){f=this._oMetaModel.getODataEntitySet(u.entitySet)}}p=this._getEntityDefinition(c);if(p){if(i&&p["sap:semantics"]==="parameters"){continue}a.push(this._getFilterableFieldsFromEntityDefinition(p,l,f))}}}}return a};p.prototype.getAllFilterableFieldsByEntitySetName=function(t,e,i){if(!this._oMetaModel){return undefined}return this._getAllFilterableFieldsByEntity(t,true,e,i)};p.prototype.getAllFilterableFieldsByEntityTypeName=function(t){if(!this._oMetaModel){return undefined}return this._getAllFilterableFieldsByEntity(t)};p.prototype._getFilterableFieldsFromEntityDefinition=function(t,e,i){var n={},o=[],r=[],s=null,l,u,p,f=null;if(!this._oMetaModel||!t){return undefined}if(!i){a.error("mandatory parameter 'oEntitySet' not set or null.")}else{l=t["com.sap.vocabularies.Common.v1.Label"];if(l){n.groupLabel=l.String}n.groupEntitySetName=i.name;n.groupEntityTypeName=t.name;n.groupName=e;s=this._getFieldsByEntityDefinition(t,e);if(i){this._enrichEntitySetMetadata(s,i)}p=s.length;for(u=0;u<p;u++){f=s[u];if(f.filterable){if(f.visible){f.groupEntitySet=n.groupEntitySetName;f.groupEntityType=n.groupEntityTypeName;o.push(f)}else{r.push(f)}}}}n.fields=o;n.hiddenFields=r;return n};p.prototype._getFullyQualifiedNameForField=function(t,e){var i,n,a=t;if(e){i=e.namespace;n=e.name}if(i&&n){a=i+"."+n+"/"+t}return a};p.prototype.getFieldNameByFullyQualifiedFieldName=function(t){var e,i;e=this.removeNamespace(t);i=e.indexOf("/");e=e.substring(i+1);return e};p.prototype._getFilterableAssociations=function(t,e){return this._getAssociations(t,e,true,false)};p.prototype._getAssociations=function(t,e,i,n){var a={},o=null,r=null,s,l=0,u=null;if(!this._oMetaModel||!t){return undefined}o=t.navigationProperty;if(o&&o.length){l=o.length;for(s=0;s<l;s++){r=o[s];if(i){if(!this._isFilterable(r,e)||p.isHiddenFilter(r)){continue}}u=this._oMetaModel.getODataAssociationEnd(t,r.name);if(!u||u.type===t.namespace+"."+t.name){continue}if(n||u.multiplicity==="1"||u.multiplicity==="0..1"){if(a[r.name]===undefined){a[r.name]=u.type}}}}return a};p.prototype.getParametersByEntitySetName=function(t){var e,i,n,a,o,r,s,l,u,p,f;f=this._oMetaModel.getODataEntitySet(t);if(f){u=this._getEntityDefinition(f.entityType)}i=this._getAssociations(u,null,false,false);for(a in i){r=i[a];l=this._oMetaModel.getODataAssociationSetEnd(u,a);if(l.entitySet){p=this._getEntityDefinition(r);if(p){if(p["sap:semantics"]==="parameters"&&p.key){e={entitySetName:l.entitySet,parameters:[],navPropertyName:""};for(var c=0;c<p.key.propertyRef.length;c++){e.parameters.push(p.key.propertyRef[c].name)}n=this._getAssociations(p,null,false,true);for(o in n){s=n[o];if(s===f.entityType){e.navPropertyName=o;break}}return e}}}}return null};p.prototype.getValueListAnnotationLazy=function(t,e,i){var n,a,o,r,s={additionalAnnotations:[],additionalAnnotationsWithPVQualifier:[]},l,u,f,c,m;r=new Promise(function(r,d){if(t&&this._oMetaModel){c=this.getPropertyContextByPath(t);f=t.split("/");u=f[1];if(c){n=c.getObject&&c.getObject();if(i&&i["sap:value-list"]){n["sap:value-list"]=i["sap:value-list"]}if(e&&p.hasValueListRelevantQualifiers(n)){o=this.oModel.getContext(e);a=this.getODataRelevantValueLists(c,o)}else{a=this._oMetaModel.getODataValueLists(c)}a.then(function(t){for(m in t){l={annotation:t[m]};if(l.annotation){this._enrichValueHelpAnnotation(l,u);if(!l.annotation["PresentationVariantQualifier"]){if(!m){s.primaryValueListAnnotation=l}else{s.additionalAnnotations.push(l)}l.qualifier=m}else{if(!m){s.primaryValueListAnnotationWithPVQualifier=l}else{l.qualifier=m;s.additionalAnnotationsWithPVQualifier.push(l)}}}}if(!s.primaryValueListAnnotation){s.primaryValueListAnnotation=s.additionalAnnotations.shift()}r(s)}.bind(this),d);return}}d()}.bind(this));return r};p.prototype._getFunctionImportValueListAnnotationLazy=function(t,e,i,n){var a=e["com.sap.vocabularies.Common.v1.ValueList"];if(a){return this.getValueListAnnotationFromFunctionImport({"":a},e.name)}return this._loadValueListAnnotationForFunctionImport(t.name,e.name,i,n,e)};p.prototype.getValueListAnnotationFromFunctionImport=function(t,e){var i,n,a,o;i=new Promise(function(i,r){if(t){o=this.getValueListAnnotationForFunctionImport(t,e);if(!o?.primaryValueListAnnotation){r()}n=o.primaryValueListAnnotation;a=this.formatValueListFunctionImport(n,e);return i(a)}r()}.bind(this));return i};p.prototype._loadValueListAnnotationForFunctionImport=function(t,e,i,n,o){var r={additionalAnnotations:[]},s,l=this._oMetaModel?.getFunctionImportParameterContext(t,e);if(l){s=l.getPath()}var u=new Promise(function(t,u){if(s&&this._oMetaModel){var p=this._oMetaModel.getODataValueLists(l);p.then(function(i){r=this.formatValueListFunctionImport(i,e);t(r)}.bind(this)).catch(function(e){a.warning("_loadValueListAnnotationForFunctionImport oValueListsFunctionImportPromise",e);var r=this.getValueListAnnotationLazy(i,n,o);r.then(function(e){t(e)})}.bind(this),u);return}u()}.bind(this));return u};p.prototype.formatValueListFunctionImport=function(t,e){var i={additionalAnnotations:[],additionalAnnotationsWithPVQualifier:[]},n,a;for(a in t){n={annotation:t[a]};if(n.annotation){this._enrichValueHelpAnnotation(n,e);if(!n.annotation["PresentationVariantQualifier"]){if(!a){i.primaryValueListAnnotation=n}else{i.additionalAnnotations.push(n)}n.qualifier=a}else{if(!a){i.primaryValueListAnnotationWithPVQualifier=n}else{n.qualifier=a;i.additionalAnnotationsWithPVQualifier.push(n)}}}}if(!i.primaryValueListAnnotation){i.primaryValueListAnnotation=i.additionalAnnotations.shift()}return i};p.prototype.getODataRelevantValueLists=function(t,e){return this._oMetaModel.getODataValueLists(t).then(function(i){var n,a={},o=this._getODataValueListRelevantQualifiers(t,e),r=Array.isArray(o)&&o.length>0;for(n in i){if(r&&o.indexOf(n)!==-1){a[n]=i[n]}}return a}.bind(this))};p.prototype._getODataValueListRelevantQualifiers=function(t,e){var i,n=e.getModel(),a=t.getObject(),o=a["com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers"];if(Array.isArray(o)&&n!==undefined){i=o.filter(function t(i){var a,o,r,s,l=false,u=i["If"],p=i["String"];if(p||p===""){l=true}else if(this._isBooleanStatement(u)){o=u[0]["Path"];s=n.getObject(o,e);if(s===true){l=true}}else if(u){a=u[0]["Eq"];o=a[0]["Path"];r=a[1]["String"];s=n.getObject(o,e);if(r===s){l=true}}return l}.bind(this)).map(function t(e){var i,n=e["If"],a=e["String"];if(a||a===""){i=a}else if(n){i=n[1]&&n[1]["String"]}return i})}return i};p.prototype._isBooleanStatement=function(t){var e=false;if(t&&t[0]&&t[0]["Eq"]===undefined&&t[0]["Path"]!==undefined){e=true}return e};p.prototype.getValueListAnnotationForFunctionImport=function(t,e){var i={additionalAnnotations:[]},n,a;for(a in t){n={annotation:t[a]};if(n.annotation){this._enrichValueHelpAnnotation(n,e);if(!a){i.primaryValueListAnnotation=n}else{n.qualifier=a;i.additionalAnnotations.push(n)}}}return i};p.prototype.getValueListAnnotation=function(t){var e={additionalAnnotations:[]},i,n,a,o,r,s;if(t&&this._oMetaModel){a=t.split("/");o=this._oMetaModel.getODataEntityType(a[0])||this._oMetaModel.getODataComplexType(a[0]);r=this._oMetaModel.getODataProperty(o,a[1]);if(r){n=r.name;for(var l in r){if(l==="com.sap.vocabularies.Common.v1.ValueList"||l.indexOf("com.sap.vocabularies.Common.v1.ValueList#")>-1){s=null;i={annotation:r[l]};a=l.split("#");if(a.length===2){s=a[1]}if(i.annotation){this._enrichValueHelpAnnotation(i,n);if(!s){e.primaryValueListAnnotation=i}else{i.qualifier=s;e.additionalAnnotations.push(i)}}}}}}return e};p.prototype._getRecommendationListAnnotation=function(t){var e=t.split("/"),i=this._oMetaModel.getODataEntityType(e[0])||this._oMetaModel.getODataComplexType(e[0]),n=e[1],a=this._oMetaModel.getODataProperty(i,n,true),o=this._oMetaModel.createBindingContext(a),r=o.getObject();return r["com.sap.vocabularies.UI.v1.RecommendationList"]};p.prototype._enrichValueHelpAnnotation=function(t,e){var i,n,a,o,r=[],s,l={},u={},f={},c,m,d,y=[],h=[],g,v,b,M,_,F,S=0,T=0,P=0,D=0,E,A=[],O=[];if(t&&t.annotation){i=t.annotation;if(i){n=i["SearchSupported"];t.isSearchSupported=n?n.Bool==="true":false;n=i["CollectionPath"];if(n){t.valueListEntitySetName=n.String;a=this.getVLEntitySets(t.valueListEntitySetName);o=a[0];if(o){t.valueListEntityName=o.entityType;t.valueListEntitySetName=o.name;t.semantics=o["sap:semantics"];r=this.getKeysByEntitySetName(o.name);y=this.getFieldsByEntitySetName(o.name)}}n=i["Label"];if(n){t.valueListTitle=n.String}g=i["Parameters"];if(y&&g){S=g.length}for(T=0;T<S;T++){F=g[T];b=undefined;M=undefined;_=undefined;v=F["ValueListProperty"];b=this.getVLProperty(v,a);v=F["LocalDataProperty"];if(v){M=v.PropertyPath}v=F["Constant"];if(v){_=v[Object.keys(v)[0]]}c=false;if(F.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterInOut"||F.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterIn"){c=true}m=false;if(F.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterInOut"||F.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterOut"){m=true}d=false;if(F.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterConstant"){d=true}if(F.InitialValueIsSignificant&&F.InitialValueIsSignificant.Bool==="true"&&(F.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterIn"||F.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterConstant")){O.push(b)}if(c){l[M]=b}if(m){u[M]=b}if(d){f[b]=_}if(m||F.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly"){D=y.length;while(D--){if(y[D].name===b){h.push(y[D]);break}}}if(!s&&m&&M===e){s=b}if(p.hasImportance(F)&&this._getImportanceAnnotation(F)==="High"){for(P=0;P<y.length;P++){E=y[P];if(E.name===b){A.push(E);break}}}}}t.inParams=l;t.outParams=u;t.constParams=f;t.fields=y;t.valueListFields=h;t.aHighImportanceFields=A;t.keys=r;t.keyField=s;t.descriptionField=this.getDescriptionFieldName(t.keyField,t.valueListEntitySetName);t.deprecationCodeField=this.getDeprecationCodeFieldName(y);t.aInitialValueIsSignificantFields=O}};p.prototype.getVLEntitySets=function(t){var e;if(this._oMetaModel){e=this._oMetaModel.getODataEntitySet(t)}return[e]};p.prototype.getVLProperty=function(t){var e;if(t){e=t.String}return e};p.prototype._enrichRecommendationListAnnotation=function(t){var e={},i=[],n,a;e.annotation=t;a=t["CollectionPath"];if(a){e.path=a.String}a=t["RankProperty"];if(a){e.rankProperty=a.String}a=t["Binding"];if(a){i=a}if(this._oMetaModel&&e.path){n=this._oMetaModel.getODataEntitySet(e.path)}if(n){e.entityName=n.name;e.keys=this.getKeysByEntitySetName(n.name);e.fields=this.getFieldsByEntitySetName(n.name);e.rankField=e.fields.filter(function(t){return t.name===e.rankProperty})}i=i.map(function(t){var i=0;while(i<e.fields.length){if(e.fields[i].name===t.RecommendationListProperty.String){return e.fields[i]}i++}return false});e.fieldsToDisplay=i.concat(e.rankField);return e};p.prototype.getDescriptionFieldName=function(t,e){var i,n=0,a,o,r;if(typeof t==="object"){o=t}else{i=this.getFieldsByEntitySetName(e);if(i){a=i.length;for(n=0;n<a;n++){o=i[n];if(o.name===t){break}o=null}}}if(o&&o["com.sap.vocabularies.Common.v1.Text"]){r=o["com.sap.vocabularies.Common.v1.Text"].Path}return r};p.prototype.getDeprecationCodeFieldName=function(t){var e=0,i,n,a;for(e=0,i=t.length;e<i;e++){n=t[e];if(p.isTermDefaultTrue(n["com.sap.vocabularies.CodeList.v1.IsConfigurationDeprecationCode"])){a=n.name;break}}return a};p.prototype.getIsSearchSupported=function(t){var e=false,i;if(t){i=t.SearchSupported;if(i&&i.Bool==="true"){e=true}}return e};p.prototype.getValueListSemantics=function(t){var e,i,n;if(t){e=t["CollectionPath"]?t["CollectionPath"].String:undefined}if(e){i=this._oMetaModel.getODataEntitySet(e);if(i){n=i["sap:semantics"]}}return n};p.prototype.getLineItemAnnotation=function(t,e){var i,n,a,o;if(t&&this._oMetaModel){i=this._oMetaModel.getODataEntityType(t);if(i){n="com.sap.vocabularies.UI.v1.LineItem";if(e){n+="#"+e}a=i[n];if(a){o={annotation:a};this._enrichAnnotationWithUIDataField(o,a)}}}return o};p.prototype.isSemanticAggregation=function(t){var e;if(t&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(t);if(e){return e["sap:semantics"]==="aggregate"}}return false};p.prototype.getPresentationVariantAnnotation=function(t,e){var i,n,a,o,r,s,l,u,p;if(t&&this._oMetaModel){i=this._oMetaModel.getODataEntityType(t);if(i){n="com.sap.vocabularies.UI.v1.PresentationVariant";if(e){n+="#"+e}a=i[n];if(a){s={annotation:a,requestAtLeastFields:[],sortOrderFields:[],groupByFields:[],maxItems:undefined};if(a.Visualizations){o=a.Visualizations.length;for(r=0;r<o;r++){p=a.Visualizations[r].AnnotationPath;if(!l&&(p==="@com.sap.vocabularies.UI.v1.LineItem"||p.indexOf("@com.sap.vocabularies.UI.v1.LineItem#")>-1)){l=i[p.substring(1)];s.lineItemAnnotation={annotation:l};this._enrichAnnotationWithUIDataField(s.lineItemAnnotation,l)}else if(!u&&(p==="@com.sap.vocabularies.UI.v1.Chart"||p.indexOf("@com.sap.vocabularies.UI.v1.Chart#")>-1)){u=i[p.substring(1)];s.chartAnnotation={annotation:u,semantics:i["sap:semantics"]};this._enrichChartAnnotation(s.chartAnnotation,u)}if(l&&u){break}}}if(a.RequestAtLeast){o=a.RequestAtLeast.length;for(r=0;r<o;r++){s.requestAtLeastFields.push(a.RequestAtLeast[r].PropertyPath)}}if(a.SortOrder){o=a.SortOrder.length;for(r=0;r<o;r++){s.sortOrderFields.push({name:a.SortOrder[r].Property.PropertyPath,descending:a.SortOrder[r].Descending?a.SortOrder[r].Descending.Bool==="true":false})}}if(a.GroupBy){o=a.GroupBy.length;for(r=0;r<o;r++){s.groupByFields.push(a.GroupBy[r].PropertyPath)}}if(a.MaxItems){s.maxItems=a.MaxItems.Int}}}}return s};p.prototype._getPresentationVariantQualifierForVHD=function(t){var e,i,n,a,o;if(t&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(t);i="com.sap.vocabularies.UI.v1.PresentationVariant";for(o in e){if(o.indexOf(i+"#")>-1){a=o.split("#");if(a.length===2){n=a[1]}}}}return n||""};p.prototype._enrichChartAnnotation=function(t,e){var i,n,a;if(t&&e){t.measureFields=[];t.dimensionFields=[];t.measureAttributes={};t.dimensionAttributes={};if(e.ChartType&&e.ChartType.EnumMember){t.chartType=e.ChartType.EnumMember}if(e.Measures){n=e.Measures.length;for(i=0;i<n;i++){t.measureFields.push(e.Measures[i].PropertyPath)}}if(e.MeasureAttributes){n=e.MeasureAttributes.length;for(i=0;i<n;i++){a=e.MeasureAttributes[i];if(a.Measure){t.measureAttributes[a.Measure.PropertyPath]={role:a.Role?a.Role.EnumMember:null,dataPoint:a.DataPoint?a.DataPoint.AnnotationPath:null}}}}if(e.Dimensions){n=e.Dimensions.length;for(i=0;i<n;i++){t.dimensionFields.push(e.Dimensions[i].PropertyPath)}}if(e.DimensionAttributes){n=e.DimensionAttributes.length;for(i=0;i<n;i++){a=e.DimensionAttributes[i];if(a.Dimension){t.dimensionAttributes[a.Dimension.PropertyPath]={role:a.Role?a.Role.EnumMember:null,hierarchyLevel:a.HierarchyLevel?a.HierarchyLevel.Int:0}}}}}};p.prototype.getChartAnnotation=function(t,e){var i,n,a,o;if(t&&this._oMetaModel){i=this._oMetaModel.getODataEntityType(t);if(i){o="com.sap.vocabularies.UI.v1.Chart";if(e){o+="#"+e}n=i[o];if(n){a={annotation:n,semantics:i["sap:semantics"]};this._enrichChartAnnotation(a,n)}}}return a};p.prototype.getDataPointAnnotation=function(t){var e,i,n,a,o,r={};if(t&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(t);if(e){for(i in e){if(i==="com.sap.vocabularies.UI.v1.DataPoint"||i.indexOf("com.sap.vocabularies.UI.v1.DataPoint#")>-1){n=null;o=e[i];a=i.split("#");if(a.length===2){n=a[1]}if(o){if(n){if(!r.additionalAnnotations){r.additionalAnnotations={}}r.additionalAnnotations[n]=o}else{r.primaryAnnotation=o}}}}}}return r};p.prototype.getFieldGroupAnnotation=function(t){var e,i,n,a,o,r,s=[];if(t&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(t));if(e){for(var l in e){if(l==="com.sap.vocabularies.UI.v1.FieldGroup"||l.indexOf("com.sap.vocabularies.UI.v1.FieldGroup#")>-1){i=null;o=e[l];n=l.split("#");if(n.length===2){i=n[1]}if(o){r={annotation:o};if(i){r.groupName=i}a=o["Label"];if(a){r.groupLabel=a.String}a=o["Data"];if(a){this._enrichAnnotationWithUIDataField(r,a)}s.push(r)}}}}}return s};p.prototype.getConnectedFieldsAnnotation=function(t){var e,i,n,a,o,r,s=[];if(t&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(t));if(e){for(var l in e){if(l==="com.sap.vocabularies.UI.v1.ConnectedFields"||l.indexOf("com.sap.vocabularies.UI.v1.ConnectedFields#")>-1){i=null;o=e[l];n=l.split("#");if(n.length===2){i=n[1]}if(o){r={annotation:o};if(i){r.groupName=i}a=o["Label"];if(a){r.groupLabel=a.String}r.fields=[];r.criticality={};a=o["Data"];if(a){for(var u in a){const t=a[u];if(t.RecordType!=="com.sap.vocabularies.UI.v1.DataField"){continue}r.fields.push(u);if(t.Criticality){r.criticality[u]=this._extractCriticalityInfo(t.Criticality,t)}}}s.push(r)}}}}}return s};p.prototype.getFieldGroupsByFilterFacetsAnnotation=function(t){var e,i,n,a,o,r=this.getFieldGroupAnnotation(t);o=r;if(t&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(t));if(e){for(var s in e){if(s==="com.sap.vocabularies.UI.v1.FilterFacets"||s.indexOf("com.sap.vocabularies.UI.v1.FilterFacets#")>-1){o=[];a=e[s];if(a){for(var l=0;l<a.length;l++){i=a[l].Target.AnnotationPath.split("#");if(i.length===2){n=i[1]}if(n){r.some(function(t){if(t.groupName===n){if(a[l].Label){t.groupLabel=a[l].Label.String}o.push(t);return true}return false})}}}}}}}return o};p.prototype._enrichAnnotationWithUIDataField=function(t,e){var i=[],n={},a={},o={},r={},s={},l={},u,p,f,c=0,m=0;if(t&&e){c=e.length;i=[];a={};for(m=0;m<c;m++){f=e[m];if(f&&(f.RecordType==="com.sap.vocabularies.UI.v1.DataField"||f.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl")){p=null;u=f["Value"];if(u){p=u.Path}if(p){i.push(p);u=f["Url"];if(u){n[p]=this._extractURLInfo(u)}u=f["Label"];if(u&&u.String){a[p]=u.String}if(this._getHiddenAnnotation(f)){r[p]=true}o[p]=this._getImportanceAnnotation(f);u=f["Criticality"];if(u){s[p]=this._extractCriticalityInfo(u,f)}const t=this._getWidthAnnotation(f);if(t){l[p]=t}}}}t.fields=i;t.urlInfo=n;t.labels=a;t.hidden=r;t.importance=o;t.criticality=s;t.width=l}};p.prototype._extractCriticalityInfo=function(t,e){var i,n;if(t.Path||t.EnumMember){i={};i["path"]=t.Path;i["criticalityType"]=t.EnumMember;n=e["CriticalityRepresentation"];if(n){if(n.Path){i["criticalityRepresentationPath"]=n.Path}else if(n.EnumMember){i["criticalityRepresentationType"]=n.EnumMember}}}return i};p.prototype._extractURLInfo=function(t){var e,n,a,o;if(t){if(t.Apply&&t.Apply.Name==="odata.fillUriTemplate"){e={urlTarget:undefined,parameters:[]};if(!this._oDummyAnnotationHelperContext){this._oDummyAnnotationHelperContext=this._oMetaModel.createBindingContext("/")}if(this._oDummyAnnotationHelperContext){e.urlTarget=i.format(this._oDummyAnnotationHelperContext,t)}n=t.Apply.Parameters;a=n&&n.length?n.length:0;while(a--){o=n[a];if(o&&o.Type==="LabeledElement"&&o.Value&&o.Value.Path){e.parameters.push(o.Value.Path)}}}else if(t.Path){e={urlPath:t.Path}}}return e};p.prototype.updateDataFieldDefault=function(t){var e=t&&t["com.sap.vocabularies.UI.v1.DataFieldDefault"],i;if(e&&(e.RecordType==="com.sap.vocabularies.UI.v1.DataField"||e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl")){i=e["Label"];if(i&&i.String){t.label=i.String}i=e["Criticality"];if(i){t.criticalityInfo=this._extractCriticalityInfo(i,e)}i=e["Url"];if(i){t.urlInfo=this._extractURLInfo(i)}t.width=this._getWidthAnnotation(e);t.importance=this._getImportanceAnnotation(e)}};p.prototype.getSelectionVariantAnnotationList=function(t){var e,i,n,a=[],o;if(t&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(t));if(e){for(var r in e){if(r==="com.sap.vocabularies.UI.v1.SelectionVariant"||r.indexOf("com.sap.vocabularies.UI.v1.SelectionVariant#")>-1){n="";i=e[r];o=r.split("#");if(o.length===2){n=o[1]}if(i){a.push({qualifier:n,annotation:i})}}}}}return a};p.prototype.getSelectionPresentationVariantAnnotationList=function(t){var e,i,n,a,o,r,s,l=null,u=null,p=null,f=[],c;if(t&&this._oMetaModel){i=this._oMetaModel.getODataEntitySet(t);if(i){n=this._oMetaModel.getODataEntityType(i.entityType)}e=[i,n];var m=function(t,e){return e.filter(function(e){return e.qualifier===t})[0]};var d=this.getEntityTypeNameFromEntitySetName(t);var y=this;e.forEach(function(t){if(t){for(var e in t){if(e==="com.sap.vocabularies.UI.v1.SelectionPresentationVariant"||e.indexOf("com.sap.vocabularies.UI.v1.SelectionPresentationVariant#")>-1){o="";a=t[e];c=e.split("#");if(c.length===2){o=c[1]}if(a){l=null;if(a.Text&&a.Text.String){l=a.Text.String}if(a.SelectionVariant&&a.SelectionVariant.Path){s=a.SelectionVariant.Path;r="";c=s.split("#");if(c.length===2){r=c[1]}if(n[s.substring(1)]){var i=m(r,y.getSelectionVariantAnnotationList(d));u={qualifier:r,annotation:i?i.annotation:undefined}}}if(a.PresentationVariant&&a.PresentationVariant.Path){s=a.PresentationVariant.Path;r="";c=s.split("#");if(c.length===2){r=c[1]}if(n[s.substring(1)]){p={qualifier:r,annotation:y.getPresentationVariantAnnotation(d,r)}}}f.push({qualifier:o,text:l,annotation:a,selectionVariant:u,presentationVariant:p})}}}}})}return f};p.prototype.getSelectionFieldsAnnotation=function(t){var e,i,n,a,o;if(t&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(t));if(e){i=e["com.sap.vocabularies.UI.v1.SelectionFields"];if(i){o={annotation:i,selectionFields:[]};n=i.length;for(a=0;a<n;a++){o.selectionFields.push(i[a].PropertyPath)}}}}return o};p.prototype.getSemanticKeyAnnotation=function(t){var e,i,n,a,o;if(t&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(t);if(e){i=e["com.sap.vocabularies.Common.v1.SemanticKey"];if(i){o={annotation:i,semanticKeyFields:[]};n=i.length;for(a=0;a<n;a++){o.semanticKeyFields.push(i[a].PropertyPath)}}}}return o};p.resolveEditableFieldFor=function(t){var e=t&&t["com.sap.vocabularies.Common.v1.EditableFieldFor"];return e&&e.PropertyPath};p.isPotentiallySensitive=function(t){return this.isTermTrue(t["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"])};p.prototype._getHiddenAnnotation=function(t){var e=t["com.sap.vocabularies.UI.v1.Hidden"];return e&&e.Bool!=="false"&&!e.Path};p.prototype._getImportanceAnnotation=function(t){var e=null,i;i=t["com.sap.vocabularies.UI.v1.Importance"];if(i){e=i.EnumMember}switch(e){case"com.sap.vocabularies.UI.v1.ImportanceType/Medium":return"Medium";case"com.sap.vocabularies.UI.v1.ImportanceType/Low":return"Low";default:return"High"}};p.prototype._getWidthAnnotation=function(t){var e=null,i,n,a=/\d*\.?\d+(px|em|rem)/gi;i=t["com.sap.vocabularies.HTML5.v1.CssDefaults"];if(i){n=i.width;if(n&&n.String&&a.test(n.String)){e=n.String}}return e};p.prototype.getTextArrangementValue=function(t){var e,i,n,a,o;if(t&&this._oMetaModel){if(typeof t==="string"){t=this._getFullyQualifiedNameForEntity(t);e=t.split("/");if(e.length>1){i=this._oMetaModel.getODataEntityType(e[0])||this._oMetaModel.getODataComplexType(e[0]);n=this._oMetaModel.getODataProperty(i,e[1])}else{n=this._oMetaModel.getODataEntityType(t)||this._oMetaModel.getODataComplexType(t)}}else{n=t}if(n){a=n["com.sap.vocabularies.UI.v1.TextArrangement"]||n["com.sap.vocabularies.Common.v1.Text"]&&n["com.sap.vocabularies.Common.v1.Text"]["com.sap.vocabularies.UI.v1.TextArrangement"]}if(a){switch(a.EnumMember){case"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst":o="descriptionAndId";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast":o="idAndDescription";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate":o="idOnly";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly":o="descriptionOnly";break;default:o=undefined;break}}}return o};p.prototype.getSemanticObjectAnnotation=function(t){var e,i,n,a;if(t&&this._oMetaModel){e=t.split("/");i=this._oMetaModel.getODataEntityType(e[0])||this._oMetaModel.getODataComplexType(e[0]);n=this._oMetaModel.getODataProperty(i,e[1]);if(n){a=n["com.sap.vocabularies.Common.v1.SemanticObject"]}return this._prepareSemanticObjectAnnotationFromProperty(a)}return null};p.prototype.getSemanticObjectsFromAnnotation=function(t){if(!t||!this._oMetaModel){return null}var e=t.split("/");var i=this._oMetaModel.getODataEntityType(e[0])||this._oMetaModel.getODataComplexType(e[0]);return p.getSemanticObjectsFromProperty(this._oMetaModel.getODataProperty(i,e[1]))};p.getSemanticObjectsFromProperty=function(t){var e={defaultSemanticObject:undefined,additionalSemanticObjects:[]};for(var i in t){if(i==="com.sap.vocabularies.Common.v1.SemanticObject"){e.defaultSemanticObject=t[i]["Path"]?p._getSemanticObjectBindingPath(t[i]["Path"]):t[i]["String"]}else if(i.startsWith("com.sap.vocabularies.Common.v1.SemanticObject#")){e.additionalSemanticObjects.push(t[i]["String"])}}return e.defaultSemanticObject||e.additionalSemanticObjects.length>0?e:undefined};p._getSemanticObjectBindingPath=function(t){return"{"+t+"}"};p.prototype.getSemanticObjectAnnotationFromProperty=function(t){var e;if(t){e=t["com.sap.vocabularies.Common.v1.SemanticObject"];return this._prepareSemanticObjectAnnotationFromProperty(e)}return null};p.prototype._prepareSemanticObjectAnnotationFromProperty=function(t){var e,i;if(t){e=t["Path"]?p._getSemanticObjectBindingPath(t["Path"]):t["String"];if(e){i={annotation:t};i.semanticObject=e}}return i};p.prototype.getContactAnnotation=function(t){var e=this._oMetaModel.getMetaContext(t);var i=e.getProperty(e.getPath());return i["com.sap.vocabularies.Communication.v1.Contact"]};p.prototype._getFullyQualifiedNameForEntity=function(t){var e,i;if(!t){return undefined}if(t.indexOf(".")>-1){return t}if(this._oSchemaDefinition){e=this._oSchemaDefinition.namespace}if(e&&!(t.indexOf(e)>-1)){i=e+"."+t}else{i=t}return i};p.prototype.getMultiUnitBehaviorEnabled=function(){var t=this._oMetaModel&&this._oMetaModel.getODataEntityContainer();return p.isTermDefaultTrue(t&&t["com.sap.vocabularies.Common.v1.ApplyMultiUnitBehaviorForSortingAndFiltering"])};p.prototype.getPDFSupportedAnnotation=function(){var t=this._oMetaModel&&this._oMetaModel.getODataEntityContainer(true);var e=this._oMetaModel.getObject(t+"/com.sap.vocabularies.PDF.v1.Features");var i={};for(var n in e){var a=e[n];if(a.Bool){i[n]=a.Bool==="true"}else if(a.String){i[n]=a.String}else if(a.Int){i[n]=parseInt(a.Int)}}return e?i:undefined};p.getSelectionRangeOptionType=function(t){return s[t]};p.getSelectionRangeSignType=function(t){return l[t]};p.hasTextArrangementAnnotation=function(t){if(t["com.sap.vocabularies.UI.v1.TextArrangement"]||t["com.sap.vocabularies.Common.v1.Text"]&&t["com.sap.vocabularies.Common.v1.Text"]["com.sap.vocabularies.UI.v1.TextArrangement"]){return true}return false};p.isNumber=function(t){return!!t&&(t.type==="Edm.Decimal"||t.type==="Edm.Double"||t.type==="Edm.Int16"||t.type==="Edm.Int32"||t.type==="Edm.Int64"||t.type==="Edm.Byte"||t.type==="Edm.Single"||t.type==="Edm.String"&&this.isDigitSequence(t))};p._getSearchExpressionTypeOperations=function(){var t={},e=p._getSearchExpressionType();t[e]=p._getSearchExpressionRangeOperationsKeys();return t};p._getSearchExpressionRangeOperationsKeys=function(){return[u.Contains,u.StartsWith,u.EndsWith]};p._getSearchExpressionType=function(){return"string"};p.prototype.destroy=function(){this.oModel=null;this._oMetaModel=null;this._oMetadata=null;this._oSchemaDefinition=null;this._sResourceRootUri=null;this.bIsDestroyed=true;this._oDummyAnnotationHelperContext=null};return p},true);
//# sourceMappingURL=MetadataAnalyser.js.map