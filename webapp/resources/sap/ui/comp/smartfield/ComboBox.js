/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/comp/odata/ComboBox","sap/ui/comp/util/FormatUtil","./ComboBoxRenderer"],function(e,t,r){"use strict";var i="00000000-0000-0000-0000-000000000000";function s(e){return e===i}const a=new RegExp("^[0]*$");var n=e.extend("sap.ui.comp.smartfield.ComboBox",{metadata:{library:"sap.ui.comp",properties:{selectedKey:{type:"string",group:"Data",defaultValue:null},enteredValue:{type:"string",group:"Data",defaultValue:null},realValue:{type:"string",group:"Data",defaultValue:null},valueTextArrangement:{type:"string",group:"Misc",defaultValue:""}}},renderer:r});n.prototype.init=function(){e.prototype.init.apply(this,arguments);this.attachChange(function(){var e=this._getValue();if(this.getItemByKey(e)){this.setSelectedKey(e)}this.setProperty("realValue",e)}.bind(this))};n.prototype.onBeforeRendering=function(){e.prototype.onBeforeRendering.apply(this,arguments);this._processValueTextArrangement();this._synchronize()};n.prototype._processValueTextArrangement=function(){var e,r,i,s,a,n,l,o,u=this.getValueTextArrangement();i=this.getSelectedKey();s=this.getItemByKey(""+i);e=s&&s.getBinding("text");if(u&&s&&i!==""&&e&&Array.isArray(e.aBindings)){l=e.aBindings[0];n=e.aBindings[1];r=l&&l.getValue();a=n&&n.getValue();if(i!==r){return}o=t.getFormattedExpressionFromDisplayBehaviour(u,r,a);this.setValue(o)}};n.prototype.updateDomValue=function(t){const r=this.getItemByKey(t);if(!r&&t&&a.test(t)){t=""}e.prototype.updateDomValue.apply(this,[t])};n.prototype._synchronize=function(){var e=this.getSelectedKey(),t=this.getKeys(),r=this.getItemByKey(""+e);if(r&&(e!==""||t.indexOf(e)!==-1)&&e===this.getValue()&&e!==r.getText()){this.setAssociation("selectedItem",r,true);this._setPropertyProtected("selectedItemId",r.getId(),true);this.setProperty("enteredValue",e);this.setProperty("realValue",e);this.setValue(r.getText());this._sValue=this.getValue()}};n.prototype.validateProperty=function(t,r){if(r===null&&(t==="enteredValue"||t==="selectedItemId"||t==="selectedKey"||t==="realValue"||t==="value")){return r}return e.prototype.validateProperty.apply(this,arguments)};n.prototype.setRealValue=function(e){if(e===null||s(e)){this.setValue("")}else{this.setValue(e)}this.setSelectedKey(e);return this.setProperty("realValue",e)};n.prototype.setEnteredValue=function(e){var t,r=this.getSelectedItem();if(typeof e!=="undefined"){this.setSelectedKey(e)}if(e&&!r&&!s(e)){this.setValue(e)}t=this._getValue();this.setProperty("enteredValue",t);return this};n.prototype._getValue=function(){var e,t=this.getSelectedKey(),r=this.getSelectedItem();if(r&&t!==null){e=t}else if(t===null&&this.getValue()===""){e=t}else{e=this.getValue()}return e};n.prototype.shouldResetSelection=function(e){var t=this.getKeys(),r=t.length===0||t.indexOf(e)!==-1;return e===this.getMetadata().getProperty("selectedKey").defaultValue||!r};return n});
//# sourceMappingURL=ComboBox.js.map