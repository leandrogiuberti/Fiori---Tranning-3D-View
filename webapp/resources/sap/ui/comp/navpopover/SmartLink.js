/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.define(["./SmartLinkFieldInfo","./SemanticObjectController","sap/base/Log","sap/ui/comp/navpopover/SmartLinkDelegate","./SmartLinkRenderer","sap/ui/model/json/JSONModel","sap/ui/comp/navpopover/Util","sap/m/Link","sap/m/library"],function(t,e,n,i,o,r,a,s,p){"use strict";var l=p.EmptyIndicatorMode;var g=s.extend("sap.ui.comp.navpopover.SmartLink",{metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/navpopover/SmartLink.designtime",properties:{semanticObject:{type:"string",defaultValue:null},additionalSemanticObjects:{type:"string[]",defaultValue:[]},semanticObjectController:{type:"any",defaultValue:null},fieldName:{type:"string",defaultValue:null},semanticObjectLabel:{type:"string",defaultValue:null},createControlCallback:{type:"function",defaultValue:null},mapFieldToSemanticObject:{type:"boolean",defaultValue:true},contactAnnotationPath:{type:"string",defaultValue:undefined},ignoreLinkRendering:{type:"boolean",defaultValue:false},enableAvailableActionsPersonalization:{type:"boolean",defaultValue:true},forceLinkRendering:{type:"boolean",defaultValue:false},uom:{type:"string",defaultValue:undefined},beforeNavigationCallback:{type:"function"},enabled:{type:"boolean",group:"Behavior",defaultValue:true},wrapping:{type:"boolean",group:"Appearance",defaultValue:false},navigationTargetsObtainedCallback:{type:"function"}},aggregations:{innerControl:{type:"sap.ui.core.Control",multiple:false}},events:{beforePopoverOpens:{parameters:{semanticObject:{type:"string"},semanticAttributes:{type:"object"},semanticAttributesOfSemanticObjects:{type:"object"},setSemanticAttributes:{type:"function"},setAppStateKey:{type:"function"},originalId:{type:"string"},open:{type:"function"}}},navigationTargetsObtained:{parameters:{mainNavigation:{type:"sap.ui.comp.navpopover.LinkData"},actions:{type:"sap.ui.comp.navpopover.LinkData[]"},ownNavigation:{type:"sap.ui.comp.navpopover.LinkData"},popoverForms:{type:"sap.ui.layout.form.SimpleForm[]"},semanticObject:{type:"string"},semanticAttributes:{type:"object"},originalId:{type:"string"},show:{type:"function"}}},innerNavigate:{parameters:{text:{type:"string"},href:{type:"string"},semanticObject:{type:"string"},semanticAttributes:{type:"object"},originalId:{type:"string"}}}}},renderer:o});g.prototype.init=function(){e.prefetchDistinctSemanticObjects();this._bIsTriggerable=false;const t=new r({mainNavigationLink:{title:undefined,subtitle:undefined,href:undefined,internalHref:undefined,target:undefined},semanticAttributes:null,appStateKey:null,extraContent:undefined});this.setModel(t,"$sapuicompSmartLink");this.attachPress(this._onLinkPressed,this);this.addStyleClass("sapUiCompSmartLink");this.setText(this.getText());s.prototype.init.apply(this,arguments)};g.prototype.applySettings=function(t){s.prototype.applySettings.apply(this,arguments);this.addDependent(this.getFieldInfo())};g.prototype.exit=function(){if(this.getSemanticObjectController()){this.getSemanticObjectController().unregisterControl(this)}};g.prototype.clone=function(){let t=this._getFieldInfo();if(t){t.detachEvent("dataUpdate",this._handleInfoDataUpdate.bind(this))}const e=s.prototype.clone.apply(this,arguments);t=this._getFieldInfo(e);if(t){e._applyFieldInfoHandling(t)}if(this._bIsTriggerable){e._bIsTriggerable=this._bIsTriggerable}return e};g.prototype.setText=function(t){if(this._isRenderingInnerControl()){this.setProperty("text",t,true)}else{s.prototype.setText.call(this,t)}return this};g.prototype.onBeforeRendering=function(){s.prototype.onBeforeRendering.apply(this,arguments);if(!this.getSemanticObjectController()){var t=this._getSemanticObjectControllerOfParent();if(t){this.setSemanticObjectController(t)}}};g.prototype.onAfterRendering=function(){s.prototype.onAfterRendering.apply(this,arguments);const t=this.getDomRef();if(!this.getText()&&this.getEmptyIndicatorMode()===l.Off){t.setAttribute("aria-hidden",true)}else if(t.getAttribute("aria-hidden")){t.removeAttribute("aria-hidden")}};g.prototype.getAccessibilityInfo=function(){const t=this.getEnabled()?s.prototype.getAccessibilityInfo.apply(this,arguments):{description:this.getText()||this.getHref()||""};if(t.description===undefined){t.description=""}if(this.getUom()&&t.description&&t.description!==""&&!t.description.includes(this.getUom())){t.description+=this.getUom()}return t};g.prototype.setSemanticObjectController=function(t){if(t&&!t.isA("sap.ui.comp.navpopover.SemanticObjectController")){n.warning("Warning: setSemanticObjectController() has to be an object of sap.ui.comp.navpopover.SemanticObjectController instances",this);return this}var e=this.getProperty("semanticObjectController");if(e===t){return this}if(e){e.unregisterControl(this)}this.setProperty("semanticObjectController",t,true);if(t){if(t.getReplaceSmartLinkNavigationTargetsObtained()){if(this.hasListeners("navigationTargetsObtained")&&t.hasListeners("navigationTargetsObtained")){this.mEventRegistry.navigationTargetsObtained.forEach(function(t){this.detachNavigationTargetsObtained(t.fFunction)}.bind(this))}if(t.getNavigationTargetsObtainedCallback()){this.setNavigationTargetsObtainedCallback(t.getNavigationTargetsObtainedCallback())}}t.registerControl(this);if(!this.getBeforeNavigationCallback()){this.setBeforeNavigationCallback(t.getBeforeNavigationCallback())}}this._determineEnabled();return this};g.prototype.setSemanticObject=function(t){this.setProperty("semanticObject",t);this._determineEnabled();return this};g.prototype.setAdditionalSemanticObjects=function(t){this.setProperty("additionalSemanticObjects",t);this._determineEnabled();return this};g.prototype.setContactAnnotationPath=function(t){this.setProperty("contactAnnotationPath",t);this._determineEnabled();return this};g.prototype.setIgnoreLinkRendering=function(t){this.setProperty("ignoreLinkRendering",t);this._determineEnabled();return this};g.prototype.setFieldName=function(t){this.setProperty("fieldName",t);this._determineEnabled();return this};g.prototype.getInnerControlValue=function(){if(this._isRenderingInnerControl()){var t=this._getInnerControl();if(t){if(t.getText){return t.getText()}if(t.getValue){return t.getValue()}}}return this.getText()};g.prototype.getNavigationPopoverHandler=function(){throw new Error("Function is depracted due to missing NavigationPopoverHandler "+this)};g.prototype.getFieldInfo=function(){let e=this._getFieldInfo();if(!e){const n=this.getId();e=new t(n+"-nsl",{sourceControl:n});this._applyFieldInfoHandling(e)}return e};g.prototype.getExtraContent=function(){const t=this._getInternalModel();return t.getProperty("/extraContent")};g.prototype.getMainNavigation=function(){const t=this._getInternalModel();return t.getProperty("/mainNavigationLink")};g.prototype.getMainNavigationId=function(){const t=this._getInternalModel();return t.getProperty("/mainNavigationId")};g.prototype._getFieldInfo=function(t){if(!t){t=this}return t.getDependents().find(t=>t.isA("sap.ui.comp.navpopover.SmartLinkFieldInfo"))};g.prototype._applyFieldInfoHandling=function(t){this.attachEvent("modelContextChange",this._handleModelContextChange);t.attachEvent("dataUpdate",this._handleInfoDataUpdate.bind(this))};g.prototype._handlePress=function(t){if(this.getUom()&&t.target.localName==="span"){var e=this.getDomRef()?this.getDomRef():t.target.parentElement;t.target=e}s.prototype._handlePress.apply(this,arguments)};g.prototype.onsapenter=g.prototype._handlePress;g.prototype.onclick=g.prototype._handlePress;g.prototype._handleModelContextChange=function(){this.getFieldInfo().fireDataUpdate()};g.prototype._handleInfoDataUpdate=async function(){await this._updateEnabled()};g.prototype._getTextOfDom=function(){if(!this.getDomRef()){return""}if(this.$().find("span").length===2){return this.$().find("span")[0].textContent+this.$().find("span")[1].textContent}else{return this.$()[0].textContent}};g.prototype._getEnabled=function(){return this.getEnabled()&&this._bIsTriggerable};g.prototype._onLinkPressed=function(t){this.getFieldInfo().open(this,t)};g.prototype._onNavigationTargetsObtained=function(t){if(!this.hasListeners("navigationTargetsObtained")){t.show();return}this.fireNavigationTargetsObtained(t)};g.prototype._onBeforePopoverOpens=function(t){if(!this.hasListeners("beforePopoverOpens")){t.open();return}this.fireBeforePopoverOpens(t)};g.prototype._isRenderingInnerControl=function(){return this.getIgnoreLinkRendering()&&this._getInnerControl()!==null};g.prototype._getInnerControl=function(){var t=this.getAggregation("innerControl");if(t){return t}var e=this.getCreateControlCallback();if(e){t=e();this.setAggregation("innerControl",t,true);return t}return null};g.prototype._getSemanticObjectControllerOfParent=function(){var t;var e=this.getParent();while(e){if(e.getSemanticObjectController){t=e.getSemanticObjectController();if(t){this.setSemanticObjectController(t);break}}e=e.getParent()}return t};g.prototype._getInternalModel=function(){const t=this.getModel("$sapuicompSmartLink");return t};g.prototype._setMainNavigation=function(t){if(t===undefined){return}const e=this._getInternalModel();if(t===null){e.setProperty("/mainNavigationLink/href",null);e.setProperty("/mainNavigationLink/internalHref",null);e.setProperty("/mainNavigationLink/target",null);e.setProperty("/mainNavigationLink/subtitle",null);return}if(!e.getProperty("/mainNavigationLink/title")&&e.getProperty("/mainNavigationLink/title")!==""){e.setProperty("/mainNavigationLink/title",t.getText())}e.setProperty("/mainNavigationLink/href",t.getHref());e.setProperty("/mainNavigationLink/internalHref",t.getInternalHref());e.setProperty("/mainNavigationLink/target",t.getTarget());e.setProperty("/mainNavigationLink/subtitle",t.getDescription())};g.prototype._setMainNavigationId=function(t){if(t===undefined){return}const e=this._getInternalModel();if(t===null){e.setProperty("/mainNavigationId",null);e.setProperty("/mainNavigationLink/title",null);return}e.setProperty("/mainNavigationId",t);e.setProperty("/mainNavigationLink/title",t)};g.prototype._setExtraContent=function(t){const e=this._getInternalModel();e.setProperty("/extraContent",t)};g.prototype._setAppStateKey=function(t){if(t===undefined){return}const e=this._getInternalModel();e.setProperty("/appStateKey",t)};g.prototype._getAppStateKey=function(){const t=this._getInternalModel();return t.getProperty("/appStateKey")};g.prototype._setSemanticAttributes=function(t){const e=this._getInternalModel();e.setProperty("/semanticAttributes",t)};g.prototype._getSemanticAttributes=function(){const t=this._getInternalModel();return t.getProperty("/semanticAttributes")};g.prototype._updateEnabled=async function(){const t=this.getFieldInfo();const e=await t.isTriggerable();this.setEnabled(e);this._bIsTriggerable=e};g.prototype._determineEnabled=function(){const t=this._getFieldInfo();if(t){this.getFieldInfo().fireDataUpdate()}};return g});
//# sourceMappingURL=SmartLink.js.map