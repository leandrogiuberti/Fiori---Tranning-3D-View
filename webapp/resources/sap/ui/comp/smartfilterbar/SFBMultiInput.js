/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/m/MultiInput","sap/m/MultiInputRenderer","sap/base/strings/whitespaceReplacer","sap/ui/comp/smartfilterbar/SFBTokenizer","sap/m/library"],function(e,t,i,r,n){"use strict";var o=n.TokenizerRenderMode;var s=e.extend("sap.ui.comp.smartfilterbar.SFBMultiInput",{metadata:{library:"sap.ui.comp",aggregations:{tokenizer:{type:"sap.ui.comp.smartfilterbar.SFBTokenizer",multiple:false,visibility:"hidden"}}},renderer:t});s.prototype._initTokenizer=function(){return new r({renderMode:o.Narrow,tokenDelete:e.prototype._tokenDelete.bind(this)})};s.prototype.setTokens=function(t){t.map(function(e){e.getTextForCopy=this._getTextForCopy.bind(this,e);return e.setText(i(e.getText()))}.bind(this));e.prototype.setTokens.apply(this,arguments);this._pendingAutoTokenGeneration=true;this._getFilterProvider()._tokenUpdate({control:this,fieldViewMetadata:this._getFieldViewMetadata()});this._pendingAutoTokenGeneration=false;this._isOninputTriggered=false};s.prototype._setFilterProvider=function(e){this.oFilterProvider=e};s.prototype._getFilterProvider=function(){return this.oFilterProvider};s.prototype._setFieldViewMetadata=function(e){this.oFieldViewMetadata=e};s.prototype._getFieldViewMetadata=function(){return this.oFieldViewMetadata};s.prototype.oninput=function(){e.prototype.oninput.apply(this,arguments);this._isOninputTriggered=true};s.prototype.addToken=function(){e.prototype.addToken.apply(this,arguments);this._isOninputTriggered=false;return this};s.prototype.insertToken=function(){e.prototype.insertToken.apply(this,arguments);this._isOninputTriggered=false;return this};s.prototype.onBeforeRendering=function(){e.prototype.onBeforeRendering.apply(this,arguments);if(!this._isOninputTriggered&&this.getValue()){this._pendingAutoTokenGeneration=true;this._validateCurrentText(true);this._pendingAutoTokenGeneration=false}};s.prototype._getTextForCopy=function(e){var t=function(e,t){var i=t[0];for(var r=1;r<t.length;r++){e=e.split(t[r]).join(i)}e=e.split(i);return e},i="\t",r=e.getText(),n,o,s="",a=[],p="",d,l;for(d in this._getFilterProvider()._aValueListProvider){if(this._getFilterProvider()._aValueListProvider[d].sFieldName===this.oFieldViewMetadata.name){n=this._getFilterProvider()._aValueListProvider[d];s=n.sTokenDisplayBehaviour}}o=s?s:"";l=this._getCondition(r);p=r;if(o&&!l){a=t(r,["(",")"]);if(o==="descriptionAndId"){p=[a[1],a[0]].join(i)}else if(o==="idAndDescription"){p=[a[0],a[1]].join(i)}else if(o==="descriptionOnly"){p=[e.getKey(),e.getText()].join(i)}else{p=r}}return p};s.prototype._getCondition=function(e){return this._getFilterProvider()._mTokenHandler&&this._getFilterProvider()._mTokenHandler[this.getId()]?.parser?._onValidate(e)?.data()};return s});
//# sourceMappingURL=SFBMultiInput.js.map