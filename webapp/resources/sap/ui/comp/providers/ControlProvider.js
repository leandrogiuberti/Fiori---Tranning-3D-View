/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/m/CheckBox","sap/m/DatePicker","sap/m/TimePicker","sap/m/HBox","sap/m/Input","sap/m/Text","sap/m/ObjectIdentifier","sap/m/ObjectStatus","sap/m/Image","sap/m/Link","sap/m/VBox","sap/m/FlexItemData","sap/m/library","sap/ui/comp/navpopover/SmartLink","sap/ui/comp/odata/MetadataAnalyser","sap/ui/comp/smartfield/ODataHelper","sap/ui/comp/smartfield/SmartField","sap/ui/comp/odata/ODataType","sap/ui/comp/odata/FiscalMetadata","sap/ui/comp/odata/CalendarMetadata","sap/ui/comp/odata/CriticalityMetadata","sap/ui/comp/util/FormatUtil","sap/ui/comp/util/MultiUnitUtil","sap/ui/core/Control","sap/ui/comp/navpopover/SemanticObjectController","./ValueHelpProvider","./ValueListProvider","sap/ui/comp/library","sap/base/Log","sap/ui/core/Lib","sap/ui/core/Element"],function(e,t,i,a,n,r,o,s,l,c,d,p,u,m,h,y,f,g,_,b,S,T,C,v,D,F,O,A,M,I,L){"use strict";var x;var P=function(e){if(e){this._oParentODataModel=e.model;this._oMetadataAnalyser=e.metadataAnalyser;this._aODataFieldMetadata=e.fieldsMetadata;this._oLineItemAnnotation=e.lineItemAnnotation;this._oSemanticKeyAnnotation=e.semanticKeyAnnotation;this._smartTableId=e.smartTableId;this._bProcessDataFieldDefault=e.processDataFieldDefault;this._isAnalyticalTable=e.isAnalyticalTable;this._isMobileTable=e.isMobileTable;this._oDateFormatSettings=e.dateFormatSettings;this._useUTCDateTime=e.useUTCDateTime;this._bEnableDescriptions=e.enableDescriptions;this._oCurrencyFormatSettings=e.currencyFormatSettings;this._oDefaultDropDownDisplayBehaviour=e.defaultDropDownDisplayBehaviour||"descriptionAndId";this.useSmartField=e.useSmartField==="true";this.useSmartToggle=e.useSmartToggle==="true";this.defaultFilterBarExpanded=e.defaultFilterBarExpanded;this.defaultShowAllFilters=e.defaultShowAllFilters;this._sEntitySet=e.entitySet;this._oSemanticKeyAdditionalControl=e._semanticKeyAdditionalControl;this._oSemanticObjectController=e.semanticObjectController;this._bPreserveDecimals=e.preserveDecimals;this._oCustomizeConfigTextInEditModeSource=e.textInEditModeSource;this._oCustomizeConfigIgnoreInsertRestrictions=e.ignoreInsertRestrictions;this._oCustomizeConfigClientSideMandatoryCheck=e.clientSideMandatoryCheck}if(!this._oMetadataAnalyser&&this._oParentODataModel){this._oMetadataAnalyser=new h(this._oParentODataModel);this._intialiseMetadata()}this._mSmartField={};this._oHelper=new y(this._oMetadataAnalyser.oModel,null,null,true);this._aValueListProvider=[];this._aValueHelpProvider=[];this._aSmartLinks=[]};P.prototype._intialiseMetadata=function(){if(!this._aODataFieldMetadata){this._aODataFieldMetadata=this._oMetadataAnalyser.getFieldsByEntitySetName(this.sEntity)}};P.prototype.getFieldViewMetadata=function(e,t){var i=this._createFieldMetadata(e);this._createFieldTemplate(i,t);return i};P.prototype._getTextInEditModeSource=function(e){if(!this._oCustomizeConfigTextInEditModeSource){return A.smartfield.TextInEditModeSource.None}return this._oCustomizeConfigTextInEditModeSource[e.name]||this._oCustomizeConfigTextInEditModeSource["*"]||A.smartfield.TextInEditModeSource.None};P.prototype._getIgnoreInsertRestrictions=function(e){if(!this._oCustomizeConfigIgnoreInsertRestrictions){return false}if(this._oCustomizeConfigIgnoreInsertRestrictions.hasOwnProperty(e.name)){return this._oCustomizeConfigIgnoreInsertRestrictions[e.name]}return this._oCustomizeConfigIgnoreInsertRestrictions["*"]||false};P.prototype._getClientSideMandatoryCheck=function(e){if(!this._oCustomizeConfigClientSideMandatoryCheck){return true}if(this._oCustomizeConfigClientSideMandatoryCheck.hasOwnProperty(e.name)){return this._oCustomizeConfigClientSideMandatoryCheck[e.name]}return this._oCustomizeConfigClientSideMandatoryCheck["*"]||false};P.prototype._createFieldTemplate=function(e,t){if(this.useSmartField){e.template=new f({textInEditModeSource:this._getTextInEditModeSource(e),value:{path:e.name},entitySet:this._sEntitySet,contextEditable:{path:"sm4rtM0d3l>/editable",mode:"OneWay"},controlContext:this._isMobileTable?"responsiveTable":"table",wrapping:this._isMobileTable,clientSideMandatoryCheck:this._getClientSideMandatoryCheck(e)});if(g.isNumeric(e.type)||g.isDateOrTime(e.type)||b.isCalendarValue(e)||_.isFiscalValue(e)){e.template.setTextAlign("Right");e.template.setWidth("100%")}this._completeSmartField(e);e.template._setPendingEditState(t)}if(this.useSmartToggle){e.template=new x({editable:{path:"sm4rtM0d3l>/editable",mode:"OneWay"},edit:this.useSmartField?e.template:this._createEditableTemplate(e),display:this._createDisplayOnlyTemplate(e)})}else if(!this.useSmartField){e.template=t?this._createEditableTemplate(e):this._createDisplayOnlyTemplate(e)}};P.prototype._addCustomDataToConfigData=function(e,t,i,a){if(e==="true"||e==="false"){i[a]=e}else if(typeof e==="object"&&e!==null&&e[t.name]){i[a]=e[t.name]}};P.prototype._completeSmartField=function(e){var t,i,a={annotations:{},path:e.name,ignoreInsertRestrictions:this._getIgnoreInsertRestrictions(e)};if(!this._mSmartField.entitySetObject){this._mSmartField.entitySetObject=this._oHelper.oMeta.getODataEntitySet(this._sEntitySet);this._mSmartField.entityType=this._oHelper.oMeta.getODataEntityType(this._mSmartField.entitySetObject.entityType)}a.modelObject=this._oParentODataModel;a.entitySetObject=this._mSmartField.entitySetObject;a.entitySet=this._mSmartField.entitySetObject;a.entityType=this._mSmartField.entityType;this._oHelper.getProperty(a);e.fieldControlProperty=this._oHelper.oAnnotation.getFieldControlPath(a.property.property);if(e.fieldControlProperty&&e.parentPropertyName){e.fieldControlProperty=e.parentPropertyName+"/"+e.fieldControlProperty}a.annotations.uom=this._oHelper.getUnitOfMeasure2(a);a.annotations.text=this._oHelper.getTextProperty2(a);a.annotations.lineitem=this._oLineItemAnnotation;a.annotations.semantic=h.getSemanticObjectsFromProperty(a.property.property);this._oHelper.getUOMTextAnnotation(a);if(a.property.property["sap:value-list"]||a.property.property["com.sap.vocabularies.Common.v1.ValueList"]){a.annotations.valuelist=this._oHelper.getValueListAnnotationPath(a);if(a.property.property["sap:value-list"]){a.annotations.valuelistType=a.property.property["sap:value-list"]}else{a.annotations.valuelistType=this._oMetadataAnalyser.getValueListSemantics(a.property.property["com.sap.vocabularies.Common.v1.ValueList"])}}if(a.property.property["com.sap.vocabularies.Common.v1.ValueListWithFixedValues"]){a.annotations.valuelistType=h.getValueListMode(a.property.property)}this._oHelper.getUOMValueListAnnotationPath(a);delete a.entitySet;if(this.defaultFilterBarExpanded){this._addCustomDataToConfigData(this.defaultFilterBarExpanded,e,a,"defaultFilterBarExpanded")}if(this.defaultShowAllFilters){this._addCustomDataToConfigData(this.defaultShowAllFilters,e,a,"defaultShowAllFilters")}if(a.annotations.valuelist!==undefined){if(e.template.getTextInEditModeSource()!=="None"){i=function(){if(t===undefined){t=this._oHelper.getAnalyzer().getValueListAnnotationLazy(a.annotations.valuelist)}return t}.bind(this)}}else{e.template.setTextInEditModeSource("None")}e.template.data("configdata",{configdata:a,configdataVL:i});e.template.data("dateFormatSettings",this._oDateFormatSettings);e.template.data("currencyFormatSettings",this._oCurrencyFormatSettings);e.template.data("defaultDropDownDisplayBehaviour",this._oDefaultDropDownDisplayBehaviour);e.template.data("defaultInputFieldDisplayBehaviour",e.displayBehaviour);if(a.annotations.uom||g.isNumeric(e.type)||g.isDateOrTime(e.type)||b.isCalendarValue(e)||_.isFiscalValue(e)){var n=e.template.getTextAlign();if(n==="Initial"){n="Right"}if(g.isNumeric(e.type)&&!e.unit&&e.description&&e.displayBehaviour!=="idOnly"){n=undefined}e.align=n}P._createModelTypeInstance(e,this._oDateFormatSettings,this._useUTCDateTime,this._bPreserveDecimals)};P.prototype._createEditableTemplate=function(a,r){var o=null,s=P._createModelTypeInstance(a,this._oDateFormatSettings,this._useUTCDateTime,this._bPreserveDecimals);var l=a.type==="Edm.DateTime"&&a.displayFormat==="Date";if(l||a.isCalendarDate){o=new t({value:{path:a.name,type:s}})}else if(a.type==="Edm.Boolean"){o=new e({selected:{path:a.name}})}if(a.semanticObjects&&!r){o=this._createSmartLinkFieldTemplate(a,s,function(){return this._createEditableTemplate(a,true)}.bind(this))}if(!o){if(a.type==="Edm.Time"){o=new i({value:{path:a.name,type:s}})}else if(a.type==="Edm.String"&&a.isTimezone){o=new n({value:this._getDefaultBindingInfo(a,s)})}else{o=new n({value:{path:a.name,type:s}});if(a.unit){o.bindProperty("description",{path:a.unit});o.setTextAlign("Right");o.setTextDirection("LTR");o.setFieldWidth("80%")}else if(this._bEnableDescriptions&&a.description){o.bindProperty("description",{path:a.description})}else if(g.isNumeric(a.type)||g.isDateOrTime(a.type)||b.isCalendarValue(a)||_.isFiscalValue(a)){a.align="Right";o.setTextAlign("Right");o.setTextDirection("LTR");if(a.timezone){o.bindProperty("description",{path:a.timezone})}}if(a.hasValueListAnnotation){this._associateValueHelpAndSuggest(o,a)}}}return o};P.prototype._associateValueHelpAndSuggest=function(e,t){e.setShowValueHelp(true);this._aValueHelpProvider.push(new F({fieldName:t.fieldName,control:e,model:this._oParentODataModel,dateFormatSettings:this._oDateFormatSettings,displayFormat:t.displayFormat,displayBehaviour:t.displayBehaviour,loadAnnotation:true,fullyQualifiedFieldName:t.fullName,metadataAnalyser:this._oMetadataAnalyser,title:t.label,preventInitialDataFetchInValueHelpDialog:true,takeOverInputValue:false,type:t.type,maxLength:t.maxLength}));e.setShowSuggestion(true);e.setFilterSuggests(false);this._aValueListProvider.push(new O({fieldName:t.fieldName,control:e,model:this._oParentODataModel,displayFormat:t.displayFormat,dateFormatSettings:this._oDateFormatSettings,displayBehaviour:t.displayBehaviour,loadAnnotation:true,fullyQualifiedFieldName:t.fullName,metadataAnalyser:this._oMetadataAnalyser,aggregation:"suggestionRows",typeAheadEnabled:true}))};P.prototype._createDisplayOnlyTemplate=function(e,t){var i=null,a=null,n,o,s;a=P._createModelTypeInstance(e,this._oDateFormatSettings,this._useUTCDateTime,this._bPreserveDecimals);if(g.isNumeric(e.type)||g.isDateOrTime(e.type)||b.isCalendarValue(e)||_.isFiscalValue(e)){n="Right";if(g.isNumeric(e.type)&&!e.unit&&e.description&&e.displayBehaviour!=="idOnly"){n=undefined}}if(e.urlInfo){i=this._createLink(e,a,e.urlInfo)}else if(e.criticalityInfo){i=this._createObjectStatusTemplate(e,a,e.criticalityInfo)}if(this._isMobileTable&&!i){if(e.isImageURL){i=new l({src:{path:e.name},width:"3em",height:"3em"})}else{s=P._getSemanticKeyIndex(e,this._oSemanticKeyAnnotation);if(s>-1){i=this._createObjectIdentifierTemplate(e,a,s===0)}}}if(!i){if(e.semanticObjects&&!t){i=this._createSmartLinkFieldTemplate(e,a,function(){return this._createDisplayOnlyTemplate(e,true)}.bind(this))}else if(e.unit){i=this._createMeasureFieldTemplate(e,a)}else if(e.isEmailAddress||e.isPhoneNumber){i=this._createEmailOrPhoneLink(e,a)}else{o=this._getDefaultBindingInfo(e,a,true);i=new r({wrapping:this._isMobileTable,textAlign:n,text:o})}}e.align=n;return i};P._getSemanticKeyIndex=function(e,t){var i=-1,a;if(t&&t.semanticKeyFields){i=t.semanticKeyFields.indexOf(e.name);if(i<0){a=h.resolveEditableFieldFor(e);i=a?t.semanticKeyFields.indexOf(a):-1}}return i};P._createModelTypeInstance=function(e,t,i,a){var n,r,o={};var s=e.type==="Edm.DateTime"&&e.displayFormat==="Date";if(s||e.isCalendarDate){n=t;r={displayFormat:"Date"}}else if(e.type==="Edm.DateTime"&&i){n={UTC:true}}else if(e.type==="Edm.Decimal"){r={precision:e.precision,scale:e.scale};n={preserveDecimals:a}}else if(e.type==="Edm.String"){r={isDigitSequence:e.isDigitSequence}}if(e.isCalendarDate){o.isCalendarDate=true}if(e.isCalendarType&&!e.isCalendarDate){o.isCalendarType=true;o.calendarType=b.getCalendarAnnotationType(e)}if(e.isFiscalDate){o.isFiscalDate=true;o.fiscalType=_.getFiscalAnnotationType(e)}if(e.isTimezone){o.isTimezone=true;n={showDate:false,showTime:false}}r=Object.assign({},r,{maxLength:e.maxLength});if(e.type=="Edm.DateTime"&&(e.isFiscalDate||e.isCalendarType)){M.error("Unexpected configuration for Edm.DateTime")}if(e.type=="Edm.DateTime"&&!e.isFiscalDate&&!e.isCalendarType){e.modelType=g.getType(e.type,n,r,o);e.modelType.formatValue(new Date,"string");return g.getType(e.type,n,r,o)}e.modelType=g.getType(e.type,n,r,o);return e.modelType};P.prototype.createModelTypeInstance=function(e){return P._createModelTypeInstance(e,this._oDateFormatSettings,this._useUTCDateTime,this._bPreserveDecimals)};P.prototype._createEmailOrPhoneLink=function(e,t){var i=new c({text:this._getDefaultBindingInfo(e,t,true),wrapping:this._isMobileTable,reactiveAreaMode:u.ReactiveAreaMode.Overlay,press:function(t){var i=t.getSource().getText();if(e.isEmailAddress){u.URLHelper.triggerEmail(i)}else if(e.isPhoneNumber){u.URLHelper.triggerTel(i)}}});return i};P.prototype._getDefaultBindingInfo=function(e,t,i){var a={path:e.name,type:t,formatter:T.getWhitespaceReplacer(i)};if(e.type==="Edm.DateTimeOffset"&&e.timezone){a={parts:[{path:e.name,type:t},{path:e.timezone}],formatter:T.getDateTimeWithTimezoneFormatter(),useRawValues:true}}else if(e.type==="Edm.String"&&e.isTimezone){a={parts:[{value:null},{path:e.name}],type:t}}else if(this._bEnableDescriptions&&e.description){a={parts:[{path:e.name,type:t},{path:e.description}],formatter:T.getFormatterFunctionFromDisplayBehaviour(e.displayBehaviour,i)};if(t&&t.getName()==="sap.ui.comp.odata.type.NumericText"&&this._bEnableDescriptions&&e.description){var n=a.formatter;a.formatter=function(e,t,i){if(e===null&&t){e=""}return n(e,t,i)}}}return a};P.prototype._createLink=function(e,t,i){var a=null;e.linkProperties=i.parameters||i.urlPath;if(i.urlPath){a={path:i.urlPath}}else if(i.urlTarget){a=i.urlTarget}return new c({text:this._getDefaultBindingInfo(e,t,true),wrapping:this._isMobileTable,reactiveAreaMode:u.ReactiveAreaMode.Overlay,href:a})};P.prototype._fnNavigationTargetsObtainedListener=function(e){if(e.getSource){const t=e.getSource().getFieldInfo()._getSourceControl();const i=e.getParameters().mainNavigation;e.getParameters().show(t.getTitle(),i,undefined,undefined);return}const t=L.getElementById(e.originalId);const i=e.mainNavigation;if(i){i.setDescription(t.getText())}return Promise.resolve({...e,mainNavigation:i,mainNavigationId:t.getTitle()})};P.prototype._createObjectIdentifierTemplate=function(e,t,i){let a,n,r,s,l;const c=this;const p=function(e){return e.startsWith("{")&&e.endsWith("}")};const h=function(e){return e.replace("{","").replace("}","")};const y=function(t,i){const a=e.semanticObjects.additionalSemanticObjects;if(c._oSemanticObjectController&&c._oSemanticObjectController.getForceLinkRendering()&&c._oSemanticObjectController.getForceLinkRendering()[e.name]){return true}i=i?i:e.semanticObjects.defaultSemanticObject;return D.hasDistinctSemanticObject(a.concat(i),t)};const f=function(e){return!(e.getReplaceSmartLinkNavigationTargetsObtained()||e.getNavigationTargetsObtainedCallback()||e.hasListeners("navigationTargetsObtained"))};const g=function(){const t=new m({semanticObject:e.semanticObjects?e.semanticObjects.defaultSemanticObject:"",additionalSemanticObjects:e.semanticObjects?e.semanticObjects.additionalSemanticObjects:[],semanticObjectLabel:e.label,fieldName:e.name,text:_.getTitle(),reactiveAreaMode:u.ReactiveAreaMode.Overlay,semanticObjectController:c._oSemanticObjectController});if(!c._oSemanticObjectController||f(c._oSemanticObjectController)){t.attachNavigationTargetsObtained(c._fnNavigationTargetsObtainedListener)}if(!c._oSemanticObjectController||f(c._oSemanticObjectController)){t.setNavigationTargetsObtainedCallback(c._fnNavigationTargetsObtainedListener)}c._aSmartLinks.push(t);return t};if(e.semanticObjects){D.getDistinctSemanticObjects().then(function(t){if(p(e.semanticObjects.defaultSemanticObject)||y(t)){l=g()}})}if(e.description){switch(e.displayBehaviour){case"descriptionAndId":e.vertical=true;a=e.description;n=e.name;r=t;break;case"idAndDescription":e.vertical=true;a=e.name;n=e.description;s=t;break;case"idOnly":a=e.name;r=t;break;default:a=e.description;break}}else{a=e.name;s=t}const _=new o({title:a?{path:a,type:s,formatter:T.getWhitespaceReplacer(true)}:undefined,text:n?{path:n,type:r,formatter:T.getWhitespaceReplacer(true)}:undefined,titleActive:e.semanticObjects?{parts:p(e.semanticObjects.defaultSemanticObject)?[{path:"$sapuicompcontrolprovider_distinctSO>/distinctSemanticObjects"},{path:h(e.semanticObjects.defaultSemanticObject)}]:[{path:"$sapuicompcontrolprovider_distinctSO>/distinctSemanticObjects"}],formatter:function(e,t){return y(e,t)}}:false,reactiveAreaMode:u.ReactiveAreaMode.Overlay,titlePress:function(t){if(!e.semanticObjects){return}if(!l||l.bIsDestroyed){l=g()}const i=l?.getFieldInfo();if(!i){return}t.getSource().addDependent(l);i.setSourceControl(t.getSource());i.open(t.getSource(),t)}});_.attachEvent("ObjectIdentifier.designtime",function(e){if(l){const t=l.getFieldInfo();const i=e.getSource();i.addDependent(l);t.setSourceControl(i);e.getParameters().registerSmartLink(l)}});_.setModel(D.getJSONModel(),"$sapuicompcontrolprovider_distinctSO");if(this._oSemanticKeyAdditionalControl&&i){this._bSemanticKeyAdditionalControlUsed=true;return new d({renderType:"Bare",items:[_,this._oSemanticKeyAdditionalControl]}).addStyleClass("sapUiTinyMarginTopBottom")}return _};P.prototype._createObjectStatusTemplate=function(e,t,i){var a,n,r,o;r=S.getShowCriticalityIcon(i.criticalityRepresentationType);if(i.path){e.criticality=i.path;a={path:i.path,formatter:S.getCriticalityState};if(i.criticalityRepresentationPath){e.criticalityRepresentation=i.criticalityRepresentationPath;n={parts:[{path:i.path},{path:i.criticalityRepresentationPath}],formatter:function(e,t){return S.getShowCriticalityIcon(t)?S.getCriticalityIcon(e):undefined}}}else if(r){n={path:i.path,formatter:S.getCriticalityIcon}}}else{a=S.getCriticalityState(i.criticalityType);if(i.criticalityRepresentationPath){e.criticalityRepresentation=i.criticalityRepresentationPath;n={path:i.criticalityRepresentationPath,formatter:function(e){return S.getShowCriticalityIcon(e)?S.getCriticalityIcon(i.criticalityType):undefined}}}else if(r){n=S.getCriticalityIcon(i.criticalityType)}}if(e.unit){o={parts:[{path:e.name,type:t},{path:e.unit},{mode:"OneTime",path:e.isCurrencyField?"/##@@requestCurrencyCodes":"/##@@requestUnitsOfMeasure",targetType:"any"}],formatter:e.isCurrencyField?T.getInlineAmountFormatter(this._bPreserveDecimals):T.getInlineMeasureUnitFormatter(this._bPreserveDecimals),useRawValues:true}}else{o=this._getDefaultBindingInfo(e,t,true)}return new s({text:o,state:a,icon:n})};P.prototype._createSmartLinkFieldTemplate=function(e,t,i){var a=e.unit?{parts:[{path:e.name,type:t},{path:e.unit},{mode:"OneTime",path:e.isCurrencyField?"/##@@requestCurrencyCodes":"/##@@requestUnitsOfMeasure",targetType:"any"}],formatter:e.isCurrencyField?T.getAmountCurrencyFormatter(this._bPreserveDecimals):T.getMeasureUnitFormatter(this._bPreserveDecimals,e.scale),useRawValues:true}:this._getDefaultBindingInfo(e,t,true);var n=new m({semanticObject:e.semanticObjects.defaultSemanticObject,additionalSemanticObjects:e.semanticObjects.additionalSemanticObjects,fieldName:e.name,text:a,reactiveAreaMode:u.ReactiveAreaMode.Overlay,uom:e.unit?{path:e.unit}:undefined,wrapping:this._isMobileTable,beforeNavigationCallback:this._oSemanticObjectController?this._oSemanticObjectController.getBeforeNavigationCallback():undefined});if(n){n.attachNavigationTargetsObtained(t=>{const i=t.getSource();const a=i.getBinding("text");if(!a||!Array.isArray(a.getValue())||e.unit){t.getParameters().show();return}const n=a.getValue();const r=T.getTextsFromDisplayBehaviour(e.displayBehaviour,n[0],n[1]);const o=t.getParameters().mainNavigation;t.getParameters().show(r.firstText,o,undefined,undefined)})}if(!n.hasListeners("navigationTargetsObtained")){n.setNavigationTargetsObtainedCallback(t=>{const i=L.getElementById(t.originalId);const a=i?.getBinding("text");if(!a||!Array.isArray(a.getValue())||e.unit){return Promise.resolve(t)}const n=a.getValue();const r=T.getTextsFromDisplayBehaviour(e.displayBehaviour,n[0],n[1]);const o=t.mainNavigation;if(o){o.setDescription(r.secondText)}return Promise.resolve({...t,mainNavigation:o})})}n.setSemanticObjectController(this._oSemanticObjectController);n.setCreateControlCallback(i);return n};P.prototype._createMeasureFieldTemplate=function(e,t){var i,n,o,s,l,m=false;m=!!(e.isCurrencyField&&this._oCurrencyFormatSettings&&this._oCurrencyFormatSettings.showCurrencySymbol);s=new r({layoutData:this._isMobileTable?undefined:new p({growFactor:1,baseSize:"0%"}),textDirection:"LTR",wrapping:false,textAlign:"End",text:{parts:[{path:e.name,type:t},{path:e.unit},{mode:"OneTime",path:e.isCurrencyField?"/##@@requestCurrencyCodes":"/##@@requestUnitsOfMeasure",targetType:"any"}],formatter:e.isCurrencyField?T.getAmountCurrencyFormatter(this._bPreserveDecimals):T.getMeasureUnitFormatter(this._bPreserveDecimals,e.scale),useRawValues:true}}).addStyleClass("sapUiCompCurrency").addStyleClass("sapUiCompCurrencyTabNums");l=new r({layoutData:new p({shrinkFactor:0}),textDirection:"LTR",wrapping:false,textAlign:"End",width:"3.3em",text:{path:e.unit,formatter:m?T.getCurrencySymbolFormatter():undefined}}).addStyleClass("sapUiCompUoMPart").addStyleClass("sapUiCompCurrencyMonoFont");i=new a({renderType:"Bare",justifyContent:"End",wrap:this._isMobileTable?"Wrap":undefined,items:[s,l]});i.addStyleClass("sapUiCompDirectionLTR");if(this._isAnalyticalTable){o=i;o.bindProperty("visible",{path:e.unit,formatter:C.isNotMultiUnit});n=new c({text:I.getResourceBundleFor("sap.ui.comp").getText("SMARTTABLE_MULTI_LINK_TEXT")||"Show Details",reactiveAreaMode:u.ReactiveAreaMode.Overlay,visible:{path:e.unit,formatter:C.isMultiUnit},press:[{value:e.name,unit:e.unit,additionalParent:this.useSmartToggle,smartTableId:this._smartTableId,template:o},C.openMultiUnitPopover]});i=new d({renderType:"Bare",items:[n,o]})}return i};P.prototype._createFieldMetadata=function(e){var t=Object.assign({},e);t.label=e.fieldLabel||e.name;t.quickInfo=e.quickInfo;t.displayBehaviour=t.displayBehaviour||this._oDefaultDropDownDisplayBehaviour;t.filterType=this._getFilterType(e);this._updateValueListMetadata(t);this._setAnnotationMetadata(t);if(this._oLineItemAnnotation&&this._oLineItemAnnotation.fields&&this._oLineItemAnnotation.fields.indexOf(e.name)>-1){t.urlInfo=this._oLineItemAnnotation.urlInfo&&this._oLineItemAnnotation.urlInfo[e.name];t.criticalityInfo=this._oLineItemAnnotation.criticality&&this._oLineItemAnnotation.criticality[e.name]}else if(this._bProcessDataFieldDefault){this._oMetadataAnalyser.updateDataFieldDefault(t)}return t};P.prototype._updateValueListMetadata=function(e){e.hasValueListAnnotation=e["sap:value-list"]!==undefined;if(e.hasValueListAnnotation){e.hasFixedValues=h.isValueListWithFixedValues(e)||e["sap:value-list"]==="fixed-values"}else if(e["com.sap.vocabularies.Common.v1.ValueList"]){e.hasValueListAnnotation=true;e.hasFixedValues=this._oMetadataAnalyser.getValueListSemantics(e["com.sap.vocabularies.Common.v1.ValueList"])==="fixed-values";if(!e.hasFixedValues){e.hasFixedValues=h.isValueListWithFixedValues(e)}}};P.prototype._setAnnotationMetadata=function(e){if(e&&e.fullName){e.semanticObjects=this._oMetadataAnalyser.getSemanticObjectsFromAnnotation(e.fullName)}};P.prototype._getFilterType=function(e){return T._getFilterType(e)};P.prototype.destroy=function(){var e=function(e){var t;if(e){t=e.length;while(t--){e[t].destroy()}}};if(this._oMetadataAnalyser&&this._oMetadataAnalyser.destroy){this._oMetadataAnalyser.destroy()}this._oMetadataAnalyser=null;if(!this._bSemanticKeyAdditionalControlUsed&&this._oSemanticKeyAdditionalControl&&this._oSemanticKeyAdditionalControl.destroy){this._oSemanticKeyAdditionalControl.destroy()}e(this._aValueHelpProvider);this._aValueHelpProvider=null;e(this._aValueListProvider);this._aValueListProvider=null;e(this._aSmartLinks);this._aSmartLinks=null;if(this._oHelper){this._oHelper.destroy()}this._oHelper=null;this._mSmartField=null;this._aODataFieldMetadata=null;this._oDateFormatSettings=null;this._oCurrencyFormatSettings=null;this._oDefaultDropDownDisplayBehaviour=null;this._oLineItemAnnotation=null;this._oSemanticKeyAnnotation=null;this._oParentODataModel=null;this.bIsDestroyed=true};x=v.extend("sap.ui.comp.SmartToggle",{metadata:{library:"sap.ui.comp",properties:{editable:{type:"boolean",defaultValue:false}},aggregations:{edit:{type:"sap.ui.core.Control",multiple:false},display:{type:"sap.ui.core.Control",multiple:false}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("span",t).class("sapUiCompSmartToggle").openEnd();e.renderControl(t.getEditable()?t.getEdit():t.getDisplay());e.close("span")}}});x.prototype.getFocusDomRef=function(){var e=this.getEditable()?this.getEdit():this.getDisplay();if(e){return e.getFocusDomRef()}return v.prototype.getFocusDomRef.call(this)};x.prototype.getAccessibilityInfo=function(){var e=this.getEditable()?this.getEdit():this.getDisplay();if(e&&e.getVisible()&&e.getAccessibilityInfo){return e.getAccessibilityInfo()}return null};x.prototype.addAssociation=function(e,t,i){if(e==="ariaLabelledBy"){var a=this.getEdit(),n=this.getDisplay();a&&a.addAssociation(e,t,i);n&&n.addAssociation(e,t,i)}return v.prototype.addAssociation.apply(this,arguments)};x.prototype.removeAssociation=function(e,t,i){if(e==="ariaLabelledBy"){var a=this.getEdit(),n=this.getDisplay();a&&a.removeAssociation(e,t,i);n&&n.removeAssociation(e,t,i)}return v.prototype.removeAssociation.apply(this,arguments)};x.prototype.removeAllAssociation=function(e,t){if(e==="ariaLabelledBy"){var i=this.getEdit(),a=this.getDisplay();i&&i.removeAllAssociation(e,t);a&&a.removeAllAssociation(e,t)}return v.prototype.removeAllAssociation.apply(this,arguments)};return P},true);
//# sourceMappingURL=ControlProvider.js.map