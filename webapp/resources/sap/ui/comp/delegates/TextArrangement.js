/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/comp/library","sap/ui/base/Object","sap/ui/comp/odata/MetadataAnalyser"],function(e,t,a){"use strict";const n=t.extend("sap.ui.comp.delegates.TextArrangement",{constructor:function(){t.apply(this,arguments)}});const i=e.smartfield.DisplayBehaviour.descriptionOnly,s=e.smartfield.DisplayBehaviour.descriptionAndId;const r=(e,t)=>{if(!t){return false}const a=t.annotation?.Parameters.find(t=>t.LocalDataProperty?.PropertyPath===e&&t.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterInOut");const n=a?.ValueListProperty?.String;if(!n){return false}const i=t?.valueListFields.find(e=>e.name===n);return!!i["com.sap.vocabularies.Common.v1.Text"]};const o=e=>{const t=e["com.sap.vocabularies.Common.v1.Text"];let a=e["com.sap.vocabularies.UI.v1.TextArrangement"]?.EnumMember.split("/").pop();if(!a&&t){a=t["com.sap.vocabularies.UI.v1.TextArrangement"]?.EnumMember.split("/").pop()}return a};const m=function(e){const t=new a(e.getModel()),n={idOnly:"TextSeparate",descriptionAndId:"TextFirst",idAndDescription:"TextLast",descriptionOnly:"TextOnly"},m=["Edm.String"],l=[],c=e.getFlexConfig(),p=t.getFieldsByEntitySetName(c.entitySetName);p?.forEach(function(e){if(m.includes(e.type)){l.push({item:e,valueList:t.getValueListAnnotationLazy(e.fullName)})}});return new Promise(function(e,p){Promise.all(l.map(async e=>({...e,valueList:await e.valueList}))).then(l=>{const p=[];l?.forEach(function(e){const l=e.item,u={},y=e?.valueList?.primaryValueListAnnotation,v=a.isCurrencyCode(l)||a.isUnitOfMeasure(l);let T;const d=l["com.sap.vocabularies.Common.v1.Text"];if(m.includes(l.type)&&!v&&l.visible&&(d||y)){const e=a.hasTextArrangementAnnotation(l);let m,v;if(y&&y.valueListFields.length>0){v=a.hasTextArrangementAnnotation(y.valueListFields[0]);m=r(l.name,y)}const f=t.getTextArrangementValue(t.getEntityTypeNameFromEntitySetName(c.entitySetName));if(e||v||d||m){if(e){T=o(l)}else if(v){T=o(y)}else if(f){T=n[f]}else if(d||m){if(l["com.sap.vocabularies.Common.v1.ValueListWithFixedValues"]||l["sap:value-list"]==="fixed-values"){T=n[i]}else{T=n[s]}}u.propertyName=l["sap:label"]||l["com.sap.vocabularies.Common.v1.Label"]?.String;if(d){u.annotationPath=`/dataServices/schema/0/entityType/[\${name}==='${l.entityName}']/property/[\${name}==='${l.name}']/com.sap.vocabularies.Common.v1.Text/com.sap.vocabularies.UI.v1.TextArrangement`}else{u.annotationPath=`/dataServices/schema/0/entityType/[\${name}==='${l.entityName}']/property/[\${name}==='${l.name}']/com.sap.vocabularies.UI.v1.TextArrangement`}u.currentValue={EnumMember:"com.sap.vocabularies.UI.v1.TextArrangementType/"+T};p.push(u)}}});e(p)})})};n.getAnnotationsChangeInfo=async function(t){const a={[e.TextArrangementType.TextOnly]:"Text Only",[e.TextArrangementType.TextFirst]:"Text First",[e.TextArrangementType.TextLast]:"Text Last",[e.TextArrangementType.TextSeparate]:"ID Only"},n=await m(t);return{serviceUrl:t.getModel().getServiceUrl(),properties:n,possibleValues:Object.keys(a).map(e=>({key:{EnumMember:e},text:a[e]})),preSelectedProperty:""}};return n});
//# sourceMappingURL=TextArrangement.js.map