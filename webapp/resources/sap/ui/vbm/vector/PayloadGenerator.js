sap.ui.define(["sap/ui/base/Object","./VectorUtils"],function(e,t){"use strict";var n={};const a=e.extend("sap.ui.vbm.vector.PayloadGenerator",{constructor:function(t){e.call(this);n=t}});this.keysObjects={};this.mergeArray=[];a.keyExists=function(e,t,n){const a=n.find(t=>t.name===e);if(a){return a.E.some(e=>e.K===t)}return false};a.fcodeSelect=function(e,t,a,r){const i={version:"2.0","xmlns:VB":"VB",Action:{name:e,object:a,id:t,instance:r}};n.fireSubmit({data:JSON.stringify(i)})};a.insertUniqueKey=function(e,t,n,a){if(t==="CLICK"){a.forEach(t=>{if(t.name===e){t.E.forEach(e=>{e["VB:s"]="false"})}})}let r=a.find(t=>t.name===e);if(!r){r={name:e,E:[]};a.push(r)}const i=r.E.find(e=>e.K===n);if(!i){r.E.push({K:n,"VB:s":"true"})}else{i["VB:s"]="true"}};a.objectClick=(e,r,i,s)=>{const o=t.formatCoordinates(s);const c={};const m=this.mergeArray;c["K"]=i.properties.Key;a.insertUniqueKey(e,"CLICK",c["K"],m);const f={version:"2.0","xmlns:VB":"VB",Action:{name:r,object:e,id:i.id.toString(),instance:e+"."+i.properties.Key,Params:{Param:[{name:"x","#":i.properties.x},{name:"y","#":i.properties.y}]},AddActionProperties:{AddActionProperty:[{name:"pos","#":o}]}},Data:{Merge:{N:m}}};n.fireSubmit({data:JSON.stringify(f)})};a.triggerPayloaddnd=(e,t,a,r,i)=>{var s={version:"2.0","xmlns:VB":"VB",Action:{name:"DROP",object:t,id:"5",instance:t+"."+r.properties.Key,Params:{Param:[{name:"strSource","#":"MainScene"+"|"+i+"-"+t+"|"+i+"-"+e+"."+a.properties.Key},{name:"scene","#":"MainScene"}]}}};n.fireSubmit({data:JSON.stringify(s)})};a.KeyboardHandler=(e,t)=>{const n={code:e.keyCode,shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey,meta:e.metaKey};var a={version:"2.0","xmlns:VB":"VB",Action:{name:t,Params:{Param:Object.entries(n).map(([e,t])=>({name:e,"#":t}))}}};this._adapter.fireSubmit({data:JSON.stringify(a)})};a.selectObjects=e=>{const t={};const r=this.mergeArray;r.forEach(e=>{e.E.forEach(e=>{e["VB:s"]="false"})});this.mergeArray=r;e.forEach(e=>{switch(e.layer.type){case"circle":t["K"]=e.properties.Key;a.insertUniqueKey("Spot","SELECT",t["K"],r);break;case"line":t["K"]=e.properties.Key;a.insertUniqueKey("Link","SELECT",t["K"],r);break;default:break}});const i={version:"2.0","xmlns:VB":"VB",Action:{name:"SELECT",object:"General",id:"GenSelect"},Data:{Merge:{N:r}}};n.fireSubmit({data:JSON.stringify(i)})};a.onMapContextMenu=(e,t,a,r,i)=>{const s={version:"2.0","xmlns:VB":"VB",Action:{name:"CONTEXT_MENU_REQUEST",object:"Map",id:"7",Params:{Param:[{name:"x","#":r},{name:"y","#":i},{name:"scene","#":"MainScene"}]},AddActionProperties:{AddActionProperty:[{name:"pos","#":e},{name:"zoom","#":t},{name:"centerpoint","#":a},{name:"pitch","#":"0.0"},{name:"yaw","#":"0.0"}]}}};if(this.mergeArray.length>0){s.Data=s.Data||{};s.Data.Merge=s.Data.Merge||{};s.Data.Merge.N=this.mergeArray}n.fireSubmit({data:JSON.stringify(s)})};return a});
//# sourceMappingURL=PayloadGenerator.js.map