sap.ui.define(["sap/ui/base/Object","sap/ui/core/Lib"],function(e,t){"use strict";const i=e.extend("sap.ui.vbm.vector.VectorUtils",{});i.createMap=(e,t)=>new maplibregl.Map({container:t,renderWorldCopies:false,attributionControl:false,dragRotate:false,touchZoomRotate:false,style:e[0].provider,center:e[0].center,zoom:e[0].zoom,transformRequest:(t,i)=>{if(Object.keys(e[0].header).length!=0){return{url:t,headers:e[0].header}}else{return{url:t}}}});i.createSpotElement=(e,t)=>{const i=document.createElement("div");const n="data:image/png;base64,"+(e.properties.base64||"");i.id="__mapmarker"+t++;i.style.backgroundImage=`url(${n})`;i.style.backgroundSize="cover";i.style.pointerEvents="none";i.style.display="inline-block";i.style.transform="translate(-50%, -100%)";const s=new Image;s.src=n;s.onload=()=>{const t=(e.properties.Scale||"1;1;1").split(";").map(Number);const[n,o]=t.some(isNaN)?[1,1]:[t[0],t[1]];i.style.width=`${s.naturalWidth*n}px`;i.style.height=`${s.naturalHeight*o}px`};return{spotEl:i,spotId:t}};i.isAccepted=(e,t)=>{var i=e.some(e=>t.includes(e));return i};i.createIconElement=(e,t)=>{const i=document.createElement("div");i.className="marker";i.style.position="absolute";i.style.top="30%";i.style.left="50%";i.style.transform="translate(-50%, -50%)";i.style.fontFamily="SAP-icons";i.style.fontSize="20px";i.style.color=t;var n=sap.ui.core.IconPool.getIconInfo(e);i.innerHTML=n.content;return i};i._setcanvasid=()=>{var e="__mapcanvas";return e};i.createDropdownMenu=e=>{const t=document.createElement("div");t.classList.add("dropdown");const i=document.createElement("div");i.classList.add("dropdown-content");function n(e){const t=document.createElement("ul");if(Array.isArray(e)){e.forEach(e=>{const i=document.createElement("li");i.textContent=e.text;if(e.MenuItem){const t=n(e.MenuItem);t.style.display="none";t.style.position="absolute";t.style.left="100%";t.style.top="0";t.style.backgroundColor="white";t.style.display="none";i.appendChild(t);i.addEventListener("mouseenter",()=>{t.style.display="block"});i.addEventListener("click",e=>{e.stopPropagation();t.style.display=t.style.display==="block"?"none":"block";document.querySelectorAll(".dropdown-content ul").forEach(e=>{if(e!==t){e.style.display="none"}})})}t.appendChild(i)})}return t}const s=n(e.MenuItem);i.appendChild(s);t.appendChild(i);document.addEventListener("click",()=>{i.style.display="none";i.querySelectorAll("ul").forEach(e=>{e.style.display="none"})});t.addEventListener("mouseenter",()=>{t.style.display="block"});document.body.appendChild(t);return t};i.formatCoordinates=e=>`${e.lng};${e.lat};0.0`;i.createDetailWindowContainer=e=>{const i=document.createElement("div");i.setAttribute("role",sap.ui.core.AccessibleRole.Secondary);i.style.left="0px";i.style.top="0px";var n=VBI.m_bIsPhone;if(!n){var s=16;var o=16;var l=16;s=VBI.Utilities.RemToPixel(1);o=VBI.Utilities.RemToPixel(1);l=VBI.Utilities.RemToPixel(1);if(e.width){i.style.width=parseInt(e.width)+2*s+"px"}if(e.height){i.style.minHeight=parseInt(e.height)+l+4+o+2*s+"px"}}else{var r=12;var a=6;var c=14;r=VBI.Utilities.RemToPixel(.75);a=VBI.Utilities.RemToPixel(.375);c=VBI.Utilities.RemToPixel(.875);if(e.height){i.style.minHeight=e.height+c+4+a+2*r+"px"}}i.className="vbi-detail vbi-detail-border";const p=document.createElement("div");p.setAttribute("role",sap.ui.core.AccessibleRole.Heading);p.className="vbi-detail-header";i.appendChild(p);const d=document.createElement("div");d.setAttribute("role",sap.ui.core.AccessibleRole.Heading);d.className="vbi-detail-title";d.innerText=e.caption;p.appendChild(d);if(e.caption&&e.caption!==""){this._upperElementExists=true}var m=document.createElement("div");m.setAttribute("role",sap.ui.core.AccessibleRole.Button);var u=t.getResourceBundleFor("sap.ui.vbm");m.title=u.getText("WINDOW_CLOSE");m.setAttribute("aria-label",u.getText("WINDOW_CLOSE"));m.className="vbi-detail-closebutton vbi-detail-closebutton-"+(VBI.m_bIsMobile?"tablet":"desktop");m.addEventListener("click",function(){VBI.MapRenderer.closePopup()});p.appendChild(m);const g=document.createElement("b");g.setAttribute("role",sap.ui.core.AccessibleRole.Presentation);g.className="vbi-detail-arrow vbi-detail-left vbi-detail-border-arrow";if(!n){i.appendChild(g)}const b=document.createElement("b");b.setAttribute("role",sap.ui.core.AccessibleRole.Presentation);b.className="vbi-detail-arrow vbi-detail-left";if(!n){i.appendChild(b)}return i};i.createMarkerLabel=(e,t)=>{var n,s,o,l;const r=document.createElement("div");r.className="marker-label";r.textContent=e;r.style.color=t;r.style.position="absolute";r.style.top="100%";if(!t){[n,s,o,l]=[211,211,211,1]}else{[n,s,o,l]=i.parseRGBAString(t)}r.style.backgroundColor=`rgba(${n}, ${s}, ${o}, ${l})`;r.style.border=`2px solid rgba(${n}, ${s}, ${o}, ${l})`;const a=i.getContrastTextColor(n,s,o);r.style.color=a;r.style.fontFamily="Arial, sans-serif";r.style.fontSize="14px";r.style.padding="2px 6px";r.style.borderRadius="4px";r.style.whiteSpace="pre-wrap";r.style.boxSizing="border-box";r.style.textAlign="center";return r};i.createRouteLabel=(e,t)=>{let n,s,o,l;const r=document.createElement("div");r.className="route-label";r.textContent=e;if(!t){[n,s,o,l]=[211,211,211,1]}else{[n,s,o,l]=i.parseRGBAString(t)}const a=i.getContrastTextColor(n,s,o);r.style.backgroundColor=`rgba(${n}, ${s}, ${o}, ${l})`;r.style.border=`2px solid rgba(${n}, ${s}, ${o}, ${l})`;r.style.color=a;r.style.fontFamily="Arial, sans-serif";r.style.fontSize="14px";r.style.padding="2px 6px";r.style.borderRadius="4px";r.style.whiteSpace="pre-wrap";r.style.boxSizing="border-box";r.style.textAlign="center";return r};i.rgbaToHexAndOpacity=e=>{const t=/rgba?\s*\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d*\.?\d+)\s*\)/i;const i=e.match(t);if(!i){throw new Error("Invalid RGBA format")}const n=parseInt(i[1],10);const s=parseInt(i[2],10);const o=parseInt(i[3],10);const l=parseFloat(i[4]);const r=e=>e.toString(16).padStart(2,"0");const a=`#${r(n)}${r(s)}${r(o)}`;return{hexColor:a,opacity:l}};i.parseRGBAString=e=>{const t=e.match(/rgba?\s*\(\s*(\d+),\s*(\d+),\s*(\d+),\s*(\d+)\s*\)/i);if(!t)return null;const i=parseInt(t[1]);const n=parseInt(t[2]);const s=parseInt(t[3]);const o=parseInt(t[4])/255;return[i,n,s,parseFloat(o.toFixed(3))]};i.getContrastTextColor=(e,t,i)=>{if(e===0&&t===0&&i===0){return"#000000"}const n=.299*e+.587*t+.114*i;return n<128?"#FFFFFF":"#000000"};i.createSubCaption=e=>{const t=document.createElement("div");t.setAttribute("role",sap.ui.core.AccessibleRole.Secondary);t.className="vbi-2d-caption vbi-2d-common";t.innerText=e.text;t.style.left=e.left+"px";if(this._upperElementExists){t.style.marginTop=e.top+"px"}else{t.style.top=e.top+"px"}t.style.marginLeft="15px";t.style.width=(e.right-e.left).toString()+"px";t.style.height=(e.bottom-e.top).toString()+"px";t.style.textAlign=VBI.Utilities.Align[e.align];if(e.level==="3"){t.classList.add("sapUiVbmDetailWindowCaption3")}this._upperElementExists=true;return t};i.createLabel=(e,t)=>{const i=document.createElement("div");i.setAttribute("role",sap.ui.core.AccessibleRole.Description);i.style.left=e.left+"px";if(this._upperElementExists){i.style.marginTop=e.top+"px"}else{i.style.top=e.top+"px"}i.style.marginLeft="15px";i.style.width=(e.right-e.left).toString()+"px";i.style.height=(e.bottom-e.top).toString()+"px";i.style.textAlign=VBI.Utilities.Align[e.align];i.style.title=e.tooltip;i.className="vbi-2d-label vbi-2d-common";i.innerText=o(e["text.bind"],t);this._upperElementExists=true;return i};i.createLink=e=>{const t=document.createElement("a");t.setAttribute("role",sap.ui.core.AccessibleRole.Link);t.style.left=e.left+"px";if(this._upperElementExists){t.style.marginTop=e.top+"px"}else{t.style.top=e.top+"px"}t.style.marginLeft="15px";t.style.width=(e.right-e.left).toString()+"px";t.style.height=(e.bottom-e.top).toString()+"px";t.style.textAlign=VBI.Utilities.Align[e.align];t.innerText=e.text;t.className="vbi-2d-link vbi-2d-common";t.href=e.href?e.href:"javascrip"+"t:void(0)";t.title=e.tooltip;this._upperElementExists=true;return t};i.createImage=(e,t,i)=>{const n=document.createElement("img");if(e.image&&e.image!==""){n.setAttribute("role",sap.ui.core.AccessibleRole.Img);n.style.left=e.left+"px";if(this._upperElementExists){n.style.marginTop=e.top+"px"}else{n.style.top=e.top+"px"}n.style.marginLeft="15px";n.style.width=(e.right-e.left).toString()+"px";n.style.height=(e.bottom-e.top).toString()+"px";n.style.textAlign=VBI.Utilities.Align[e.align];n.className="vbi-2d-image vbi-2d-common";n.title=e.tooltip;if(e.image==="@01@"){n.src=l(t)}else{n.src=l(i.get(e.image))}}this._upperElementExists=true;return n};i.createButton=(e,t)=>{const i=document.createElement("button");i.style.left=e.left+"px";if(this._upperElementExists){i.style.marginTop=e.top+"px"}else{i.style.top=e.top+"px"}i.style.marginLeft="15px";i.style.width=(e.right-e.left).toString()+"px";i.style.height=(e.bottom-e.top).toString()+"px";i.style.textAlign=VBI.Utilities.Align[e.align];i.className="vbi-2d-button vbi-2d-common";i.title=e.tooltip;i.innerText=e.text;i.onclick=()=>r(e.id,t);this._upperElementExists=true;return i};i.argbToRgba=e=>{let t=e.replace("ARGB(","").replace(")","").split(",");let i=parseInt(t[0].trim(),10);let n=parseInt(t[1].trim(),10);let s=parseInt(t[2].trim(),10);let o=parseInt(t[3].trim(),10);let l=i/255;return`rgba(${n}, ${s}, ${o}, ${l.toFixed(2)})`};i.getArrowHead=e=>{const t=`\n        <svg fill="currentColor" width="60px" height="60px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <g data-name="Layer 2">\n                <g data-name="arrow-right">\n                    <rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/>\n                    <path d="M10.46 18a2.23 2.23 0 0 1-.91-.2 1.76 1.76 0 0 1-1.05-1.59V7.79A1.76 1.76 0 0 1 9.55 6.2a2.1 2.1 0 0 1 2.21.26l5.1 4.21a1.7 1.7 0 0 1 0 2.66l-5.1 4.21a2.06 2.06 0 0 1-1.3.46z"/>\n                </g>\n            </g>\n        </svg>`;const i=`data:image/svg+xml;base64,${btoa(t)}`;const n=new Image;n.src=i;n.onload=()=>e(n)};i.normalizeAngle=e=>(e+360)%360;i.calculateBearing=(e,t)=>{const o=n(e[1]);const l=n(t[1]);const r=n(t[0]-e[0]);const a=Math.cos(l)*Math.sin(r);const c=Math.cos(o)*Math.sin(l)-Math.sin(o)*Math.cos(l)*Math.cos(r);const p=Math.atan2(a,c);return i.normalizeAngle(s(p))};function n(e){return e*Math.PI/180}function s(e){return e*180/Math.PI}function o(e,t){const i=e.split(".").slice(1);let n=t[i[2]].T;return n?n:""}function l(e){return"data:text/plain;base64,"+e}function r(e,t){const i=t.find(t=>t.id===e);if(i){console.log("Performing action:",i.Action.name)}}function a(e,t){if(!e){return[0,0]}var i=c(t);if(VBI.m_bIsRtl){return[i.right-e.clientX,e.clientY-i.top]}else{return[e.clientX-i.left,e.clientY-i.top]}}i.GetEventVPCoordsObj=(e,t)=>{var i=a(e,t);return{x:i[0].toString(),y:i[1].toString()}};i.GetEventDropObjWithScene=e=>({});function c(e){const t=document.getElementById(e);const i=t.getBoundingClientRect();return i}return i});
//# sourceMappingURL=VectorUtils.js.map