/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["jquery.sap.global","sap/ui/core/Element","sap/ui/vk/NodeProxy","./ArrayUtilities","./MatrixUtilities"],function(jQuery,t,e,i,r){"use strict";var o=t.extend("sap.ui.vtm.SceneNode",{metadata:{properties:{sceneNodeId:{type:"string"},scene:{type:"object"}}},_destroy:function(){if(this._vkNodeProxy){this.getScene()._getNodeHierarchy().destroyNodeProxy(this.getSceneNodeId());this._vkNodeProxy=null}},exit:function(){this._destroy()},_checkValidity:function(){if(!this._vkNodeProxy){throw"Node has been destroyed"}},setSceneNodeId:function(t){this._destroy();this.setProperty("sceneNodeId",t);var e=this.getScene();if(e){this._vkNodeProxy=e._getNodeHierarchy().createNodeProxy(t)}return this},setScene:function(t){this._destroy();this.setProperty("scene",t);var e=this.getSceneNodeId();if(e){this._vkNodeProxy=t._getNodeHierarchy().createNodeProxy(e)}return this},getName:function(){this._checkValidity();return this._vkNodeProxy.getName()},getClosed:function(){this._checkValidity();return this._vkNodeProxy.getClosed()},getRelativeMatrix:function(){this._checkValidity();var t=this._vkNodeProxy.getLocalMatrix();return t?sap.ui.vtm.MatrixUtilities.fromVkMatrix(t):null},setRelativeMatrix:function(t){this._checkValidity();var e=sap.ui.vtm.MatrixUtilities.toVkMatrix(t);this._vkNodeProxy.setLocalMatrix(e);return this},getAbsoluteMatrix:function(){this._checkValidity();var t=this._vkNodeProxy.getWorldMatrix();return t?sap.ui.vtm.MatrixUtilities.fromVkMatrix(t):null},setAbsoluteMatrix:function(t){this._checkValidity();var e=sap.ui.vtm.MatrixUtilities.toVkMatrix(t);this._vkNodeProxy.setWorldMatrix(e);return this},_fromVkMetadata:function(t){var e={};var i=Object.getOwnPropertyNames(t);i.forEach(function(i){var r=t[i];var o=Object.getOwnPropertyNames(r);o.forEach(function(t){var o=r[t];var s={category:i,field:t};e[JSON.stringify(s)]=o})});return e},getNodeMetadata:function(){this._checkValidity();var t=this._vkNodeProxy.getNodeMetadata();return t?this._fromVkMetadata(t):{}},_fromVkVeIds:function(t){var e={};t.forEach(function(t){var i=JSON.stringify({source:t.source,type:t.type});var r=JSON.stringify(t.fields);var o=e[i];if(o){var s=sap.ui.vtm.ArrayUtilities.wrap(o);s.push(r);e[i]=s}else{e[i]=r}});return e},getIdentifiers:function(){this._checkValidity();var t=this._vkNodeProxy.getVeIds();return t?this._fromVkVeIds(t):{}}});return o},true);
//# sourceMappingURL=SceneNode.js.map