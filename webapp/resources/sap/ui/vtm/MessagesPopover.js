/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["jquery.sap.global","./library","sap/m/Popover","sap/m/PopoverRenderer","sap/m/List"],function(jQuery,e,t,o,s){"use strict";var i=sap.m.Popover.extend("sap.ui.vtm.MessagesPopover",{metadata:{properties:{messages:{type:"object[]"},maxHeight:{type:"sap.ui.core.CSSSize",defaultValue:null}}},init:function(){t.prototype.init.apply(this);this._rb=sap.ui.vtm.getResourceBundle();this.setShowHeader(false);this.attachAfterOpen(this._onAfterOpen,this)},renderer:function(e,t){o.render.call(this,e,t)},onAfterRendering:function(){var e=this.getDomRef();var t=parseInt(this.getMaxHeight(),10);if(t>0&&e.clientHeight>t){this.setContentHeight(this.getMaxHeight())}},setMessages:function(e){var t=[];e.forEach(function(e){var o={text:e.getText()};var s=e.getLevel();var i=e.getIcon();switch(s){case sap.ui.core.MessageType.Error:o.iconUrl=i||"sap-icon://error";o.iconColor=sap.ui.core.IconColor.Negative;o.iconTooltip=this._rb.getText("MESSAGESTATUS_ERROR");break;case sap.ui.core.MessageType.Warning:o.iconUrl=i||"sap-icon://alert";o.iconColor=sap.ui.core.IconColor.Critical;o.iconTooltip=this._rb.getText("MESSAGESTATUS_WARNING");break;case sap.ui.core.MessageType.Success:o.iconUrl=i||"sap-icon://sys-enter-2";o.iconColor=sap.ui.core.IconColor.Positive;o.iconTooltip=this._rb.getText("MESSAGESTATUS_SUCCESS");break;case sap.ui.core.MessageType.Information:o.iconUrl=i||"sap-icon://message-information";o.iconColor=sap.ui.core.IconColor.Neutral;o.iconUrl=i||"sap-icon://message-information";o.iconTooltip=this._rb.getText("MESSAGESTATUS_INFORMATION");break;default:e.color=sap.ui.core.IconColor.Default}t.push(o)}.bind(this));var o=new sap.ui.model.json.JSONModel;var s={messages:t};o.setData(s);var i=new sap.m.List;i.setModel(o,"model");i.bindItems("model>/messages",new sap.m.CustomListItem({content:[new sap.ui.layout.HorizontalLayout({content:[new sap.ui.core.Icon({src:"{model>iconUrl}",color:"{model>iconColor}",tooltip:"{model>iconTooltip}"}).addStyleClass("sapUiVtmTreeStatusItem"),new sap.m.Text({text:"{model>text}",tooltip:"{model>text}",wrapping:true}).addStyleClass("sapUiVtmTreeStatusItem")]})]}));this.addContent(i);return this},_onModelContextChanged:function(){this.close()},_onAfterOpen:function(e){var t=e.getParameter("openBy");if(t){t.attachModelContextChange(this._onModelContextChanged,this);this.attachAfterClose(this._onAfterClose,this)}this.detachAfterOpen(this._onAfterOpen,this)},_onAfterClose:function(e){var t=e.getParameter("openBy");if(t){t.detachModelContextChange(this._onModelContextChanged,this);this.detachAfterClose(this._onAfterClose,this)}setTimeout(function(){this.destroy()}.bind(this),0)}});return i});
//# sourceMappingURL=MessagesPopover.js.map