/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/Layer"],function(r){"use strict";function e(r,e,t,o,n,i){e.forEach(function(e){const p=new Set(Object.keys(r[e]));if(t){t.forEach(function(r){if(!p.has(r)){const e=t.length>1?"properties are":"property is";throw new Error(`Mandatory property '${r}' is missing. Mandatory ${e} ${t.join("|")}.`)}})}if(o){const r=[];p.forEach(function(e){if(!o.includes(e)){r.push(e)}});if(r.length>0){const e=r.length>1?`Properties ${r.join("|")} are not supported. `:`Property ${r.join("|")} is not supported. `;const t=o.length>1?`Supported properties are ${o.join("|")}.`:`Supported property is $${o.join("|")}.`;throw new Error(e+t)}}if(i){p.forEach(function(t){if(i[t]){if(String(typeof r[e][t])!==i[t]){throw new Error(`The property '${t}' is type of '${typeof r[e][t]}'. Supported type for property '${t}' is '${i[t]}'`)}}})}if(n){p.forEach(function(t){if(n[t]){const o=new RegExp(n[t]);if(!o.test(r[e][t])){throw new Error(`The property has disallowed values. Supported values for '${t}' should adhere to regular expression ${o}.`)}}})}})}function t(r,t,o,n,i,p,a){const s=Object.keys(r);if(s.length>1){throw new Error("It is not allowed to add more than one object under change object 'content'.")}if(s.length<1){throw new Error(`The change object 'content' cannot be empty. Please provide the necessary property, as outlined in the change schema for '${o}'.`)}if(s[0]!==t){throw new Error(`The provided property '${s[0]}' is not supported. Supported property for change '${o}' is '${t}'.`)}const h=Object.keys(r[t]);if(h.length>1){if(t==="dataSource"){if(h.length!==2){throw new Error("It is not allowed to add more than two data sources to manifest.")}}else{throw new Error(`It is not allowed to add more than one ${t}: ${h.join(", ")}.`)}}if(h.length<1){throw new Error(`There is no ${t} provided. Please provide an ${t}.`)}if(h.includes("")){throw new Error(`The ID of your ${t} is empty.`)}e(r[t],h,n,i,p,a);return t!=="dataSource"?h[h.length-1]:h}function o(r,e,t,o,n,i){const a=Array.isArray(r)?r:[r];a.forEach(function(r){p(r,e,t,n,i);d(r,o)})}function n(r){var e=[];var t=r.filter(function(r){return r.endsWith("/*")});t.forEach(function(r){var t=r.replaceAll("/*","");if(t){e.push(t)}});return e}function i(r,e){const t=n(r);let o=false;t.forEach(function(r){if(e.startsWith(r)){const t=e.replace(r,"");if(t.startsWith("/")||t===""){o=true}}});return o}function p(r,e,t,o,n){if(!r.propertyPath){throw new Error("Invalid change format: The mandatory 'propertyPath' is not defined. Please define the mandatory property 'propertyPath'")}if(!r.operation){throw new Error("Invalid change format: The mandatory 'operation' is not defined. Please define the mandatory property 'operation'")}const p=r.operation.toUpperCase();if(p==="DELETE"){if(o){if(o.includes(r.propertyPath)){throw new Error(`The property '${r.propertyPath}' was attempted to be deleted. The mandatory properties ${o.join("|")} cannot be deleted.`)}}if(r.hasOwnProperty("propertyValue")){throw new Error("The property 'propertyValue' must not be provided in a 'DELETE' operation. Please remove 'propertyValue'.")}}if(p!=="DELETE"){if(!r.hasOwnProperty("propertyValue")){throw new Error("Invalid change format: The mandatory 'propertyValue' is not defined. Please define the mandatory property 'propertyValue'")}if(!e.includes(r.propertyPath)&&!i(e,r.propertyPath)){throw new Error(`Changing ${r.propertyPath} is not supported. The supported 'propertyPath' is: ${e.join("|")}`)}if(n){const e=r.propertyPath.split("/");const t=e[e.length-1];if(n[t]){if(String(typeof r.propertyValue)!==n[t]){throw new Error(`The property '${t}' is type of '${typeof r.propertyValue}'. Supported type for property '${t}' is '${n[t]}'.`)}}}}if(!t.includes(p)){throw new Error(`Operation ${p} is not supported. The supported 'operation' is ${t.join("|")}`)}}function a(r,e,t,n,i,p){var a=Object.keys(r).filter(function(r){return r.endsWith("Id")}).shift();if(!r[a]){throw new Error(`Mandatory "${a}" parameter is not provided.`)}if(!r.entityPropertyChange){throw new Error(`Changes for "${r[a]}" are not provided.`)}o(r.entityPropertyChange,e,t,n,i,p)}var s={};s[r.CUSTOMER]="customer.";s[r.CUSTOMER_BASE]="customer.";s[r.PARTNER]="partner.";s[r.VENDOR]=null;function h(r,e){var t=e.getLayer();if(!t){throw new Error("Mandatory layer parameter is not provided.")}var o=f(t);if(o===null){Object.keys(s).forEach(function(e){if(s[e]&&r.startsWith(s[e])){throw new Error(`Id ${r} must not start with reserved ${s[e]}`)}})}else if(!r.startsWith(o)){throw new Error(`Id ${r} must start with ${o}`)}}function f(r){var e=s[r];if(e===undefined){throw new Error(`Layer ${r} not supported.`)}return e}function d(r,e){if(e){if(!Object.keys(e).includes(r.propertyPath)){return}if(!r.propertyValue.match(e[r.propertyPath])){throw new Error(`Not supported format for propertyPath ${r.propertyPath}. `+`The supported pattern is ${e[r.propertyPath]}`)}}}return{checkEntityPropertyChange:a,checkIdNamespaceCompliance:h,getNamespacePrefixForLayer:f,getClearedGenericPath:n,isGenericPropertyPathSupported:i,getAndCheckContentObject:t}});
//# sourceMappingURL=DescriptorChangeCheck.js.map