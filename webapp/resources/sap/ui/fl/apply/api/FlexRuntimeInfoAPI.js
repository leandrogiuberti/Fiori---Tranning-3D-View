/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/apply/_internal/flexState/FlexObjectState","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/initial/_internal/FlexConfiguration","sap/ui/fl/initial/_internal/FlexInfoSession","sap/ui/fl/initial/_internal/ManifestUtils","sap/ui/fl/initial/_internal/Settings","sap/ui/fl/initial/api/InitialFlexAPI","sap/ui/fl/Layer","sap/ui/fl/Utils","sap/ui/VersionInfo","sap/ui/fl/apply/_internal/init"],function(e,t,n,r,o,i,s,a,l,c,p,u,f){"use strict";var g={isPersonalized(n){function r(t){e.error(t);return Promise.reject(t)}function i(e){return e.getLayer()===p.USER}function s(e){return e.getFileType()==="change"}function l(e,n,r){var o=n.map(function(e){return e.id||e.getId()});var i=r.getSelector();var s=t.getControlIdBySelector(i,e);return o.includes(s)}function c(e,t){return Array.isArray(e)&&e.length>0?e.includes(t.getChangeType()):true}if(!n.selectors||n.selectors.length===0){return r("At least one control ID has to be provided as a parameter")}var f=n.selectors[0].appComponent||u.getAppComponentForControl(n.selectors[0]);if(!f){return r("App Component could not be determined")}const g=a.getFlexReferenceForControl(f);const d=o.getFlexObjectsDataSelector().get({reference:g}).filter(s).filter(i).filter(l.bind(this,f,n.selectors)).filter(c.bind(this,n.changeTypes));return Promise.resolve(d.length>0)},waitForChanges(e){let t;if(e.element){t=[{selector:e.element}]}else if(e.selectors){t=e.selectors.map(function(e){return{selector:e}})}else if(e.complexSelectors){t=e.complexSelectors}return r.waitForFlexObjectsToBeApplied(t)},isFlexSupported(e){return!!u.getAppComponentForControl(e.element)},hasVariantManagement(e){return n.belongsToVariantManagement(e.element)},getFlexReference(e){return a.getFlexReferenceForControl(e.element)},getConfiguredFlexServices(){return i.getFlexibilityServices()},getFlexVersion(e){return c.getFlexVersion(e)},getContextBasedAdaptationId(e){return s.getByReference(e.reference)?.adaptationId},getContextBasedAdaptationTitle(e){return s.getByReference(e.reference)?.adaptationTitle},async getFeedbackInformation(e){const t=this.getConfiguredFlexServices()[0].connector;const n=u.getAppDescriptor(e.rootControl);const r=await f.load();const o=a.getAppIdFromManifest(n);const i=a.getAppVersionFromManifest(n);return{appId:o,appVersion:i,connector:t,version:r.version}},_getHostname(){return document.location.hostname},isCustomerSystem(){const e=l.getInstanceOrUndef();const t=e?.getSystemType();const n={CUSTOMER:true,SAP:false}[t];const r=this._getHostname();return n!==undefined?n:!(r==="localhost"||r==="127.0.0.1")},isAtoEnabled(){return l.getInstanceOrUndef()?.getIsAtoEnabled()},getSystem(){return l.getInstanceOrUndef()?.getSystem()},getUserId(){return l.getInstanceOrUndef()?.getUserId()}};return g});
//# sourceMappingURL=FlexRuntimeInfoAPI.js.map