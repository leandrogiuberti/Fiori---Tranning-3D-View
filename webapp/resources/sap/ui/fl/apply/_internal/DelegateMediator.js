/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/base/util/restricted/_pick","sap/ui/fl/requireAsync"],function(e,t,r){"use strict";const n={};let a={};let o={};let i={};function l(e){const t=e.getModel?.();if(!t){return undefined}return t.getMetadata().getName()}function d(e,t){t||=l(e);const r=a[t];return r}async function c(e,t){const r=await t.getControlMetadata(e);const n=o[r.getName()];return n}function s(t,n,a){return r(a.name).catch(r=>{e.error(`Failed to load the delegate for the control ${n.getId(t)}\n\t\t\t${r.message}`);return undefined})}function u(e,t,r){const n=[];r.forEach(function(r){if(r){n.push(async function(){const n=await s(e,t,r);if(n){r.instance=n||{};return r}return undefined}())}else{n.push(Promise.resolve())}});return Promise.all(n)}n.registerReadDelegate=function(e){if(!(e.modelType&&e.delegate)){throw new Error("'modelType' and 'delegate' properties are required for registration!")}if(a[e.modelType]){throw new Error(`modelType ${e.modelType} is already defined!`)}a[e.modelType]={name:e.delegate,modelType:e.modelType}};n.registerWriteDelegate=function(e){if(!(e.controlType&&e.delegate)){throw new Error("'controlType' and 'delegate' properties are required for registration!")}o[e.controlType]={name:e.delegate,requiredLibraries:e.requiredLibraries,delegateType:e.delegateType,controlType:e.controlType,payload:e.payload}};function g(e){return e?{...e,modelType:e.modelType||e.payload?.modelType,instance:t(e.instance,["getPropertyInfo","getRepresentedProperties"])}:undefined}n.getReadDelegateForControl=async function(e,t,r){let n=d(e,r);let a=t.getFlexDelegate(e);[a,n]=await u(e,t,[a,n]);return a?.instance.getPropertyInfo?g(a):g(n)};function p(e,r){return e?{...e,controlType:e.controlType||r.getMetadata?.().getName(),instance:t(e.instance,["createLabel","createControlForProperty","createLayout"])}:undefined}n.getWriteDelegateForControl=async function(e,t){let r=await c(e,t);let n=t.getFlexDelegate(e);[n,r]=await u(e,t,[n,r]);return n?.instance.createLabel||n?.instance.createLayout?p(n,e):p(r,e)};n.clear=function(){a={};o={};i={}};n.registerAddXMLAdjustFragmentHandler=function(e){i[e.key]=e.handler};n.getAddXMLAdjustFragmentHandlers=function(){return i};return n});
//# sourceMappingURL=DelegateMediator.js.map