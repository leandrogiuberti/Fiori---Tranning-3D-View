/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/restricted/_pick","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexObjects/Variant","sap/ui/fl/initial/_internal/Settings","sap/ui/fl/LayerUtils","sap/ui/fl/Layer","sap/ui/fl/Utils"],function(t,e,n,r,i,a,s){"use strict";var o=n.extend("sap.ui.fl.apply._internal.flexObjects.CompVariant",{metadata:{properties:{persisted:{type:"boolean",defaultValue:true},persistencyKey:{type:"string"}},aggregations:{revertData:{type:"sap.ui.base.ManagedObject",multiple:true,singularName:"revertData",defaultValue:[]}}},constructor:function(...t){const[e]=t;n.apply(this,t);this.setFileType("variant");if(!e.executeOnSelection){this.setExecuteOnSelection(!!(e.content?.executeOnSelect||e.content?.executeOnSelection))}const r=this.getVariantId()===o.STANDARD_VARIANT_ID||!!this.getContent()?.standardvariant;if(r){this.setFavorite(true);this.setStandardVariant(true)}else if(e.favorite!==undefined){this.setFavorite(!!e.favorite)}else if(e.layer===a.VENDOR||e.layer===a.CUSTOMER_BASE){this.setFavorite(true)}}});o.STANDARD_VARIANT_ID="*standard*";o.getMappingInfo=function(){return{...n.getMappingInfo(),persistencyKey:"selector.persistencyKey",standardVariant:"standardVariant",variantId:"variantId"}};o.prototype.getMappingInfo=function(){return o.getMappingInfo()};function p(t){var e=r.getInstanceOrUndef();var n=e?.getUserId();return!n||!t||n.toUpperCase()===t.toUpperCase()}function u(t,e,n){if(e){return t===e}else if(t===a.USER){return true}var s=r.getInstanceOrUndef();if(i.isSapUiLayerParameterProvided()){e=i.getCurrentLayer()}else{e||=s.getIsPublicLayerAvailable()?a.PUBLIC:a.CUSTOMER}var o=t===e;var u=s.getIsKeyUser()||p(n);return o&&u}function l(t){return!t||s.getCurrentLanguage()===t}function c(t,e){var n=r.getInstanceOrUndef();if(!n){return true}if(!t||!e){return true}var i=n.getSystem();var a=n.getClient();return i===t&&e===a}o.prototype.getPackage=function(){return this.getFlexObjectMetadata().packageName};o.prototype.isVariant=function(){return true};o.prototype.isRenameEnabled=function(t){return!this.getStandardVariant()&&this.isEditEnabled(t)&&(!this.isTranslationEnabled()||l(this.getSupportInformation().originalLanguage))};o.prototype.isEditEnabled=function(t){var e=t&&i.isDeveloperLayer(t);var n=c(this.getSupportInformation().sourceSystem,this.getSupportInformation().sourceClient);var r=u(this.getLayer(),t,this.getOwnerId());return e||n&&r};o.prototype.isDeleteEnabled=function(t){var e=c(this.getSupportInformation().sourceSystem,this.getSupportInformation().sourceClient);return e&&u(this.getLayer(),t,this.getOwnerId())&&!this.getStandardVariant()};o.prototype.isTranslationEnabled=function(){return!i.isOverLayer(this.getLayer(),a.CUSTOMER)};o.prototype.storeFavorite=function(t){if(t!==this.getFavorite()){this.setState(e.LifecycleState.UPDATED);this.setFavorite(t)}};o.prototype.storeVisible=function(t){if(t!==this.getVisible()){this.setState(e.LifecycleState.UPDATED);this.setVisible(t)}};o.prototype.getOwnerId=function(){return this.getSupportInformation().user||""};o.prototype.storeContent=function(t){this.setContent(t)};o.prototype.storeExecuteOnSelection=function(t){if(t!==this.getExecuteOnSelection()){this.setState(e.LifecycleState.UPDATED);this.setExecuteOnSelection(t)}};o.prototype.storeName=function(t){this.setName(t)};o.prototype.storeContexts=function(t){this.setContexts(t);this.setState(e.LifecycleState.UPDATED)};o.prototype.cloneFileContentWithNewId=function(...t){var e=n.prototype.cloneFileContentWithNewId.apply(this,t);e.variantId=e.fileName;return e};return o});
//# sourceMappingURL=CompVariant.js.map