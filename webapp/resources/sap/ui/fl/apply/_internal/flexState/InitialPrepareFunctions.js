/*
 * ! OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Lib","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexState/changes/DependencyHandler","sap/ui/fl/Layer"],function(e,n,a,t,r,i){"use strict";const c={};c.variants=function(r){const c=(r.storageResponse.changes.variants||[]).map(function(e){return e.fileName}).concat(r.externalData.filter(function(e){return e.getFileType()==="ctrl_variant"}).map(function(e){return e.getId()}));var s={runtimeOnlyData:{flexObjects:[]}};var l=r.storageResponse.changes.variants;var f=r.storageResponse.changes.variantDependentControlChanges.filter(function(e){var n=e.isChangeOnStandardVariant;if(n!==undefined&&n!==null){return n}return!/id_\d{13}_\d*_flVariant/.test(e.variantReference)});var p=l.concat(f);p.forEach(function(r){var l=r.fileType==="ctrl_variant"?r.variantManagementReference:r.variantReference;if(l&&!c.includes(l)){var f=e.getResourceBundleFor("sap.ui.fl");var p=a.createFlVariant({id:l,variantManagementReference:l,variantName:f.getText("STANDARD_VARIANT_TITLE"),layer:i.BASE,user:n.DEFAULT_AUTHOR,reference:r.reference});p.setState(t.LifecycleState.PERSISTED);s.runtimeOnlyData.flexObjects.push(p);c.push(l)}});return s};c.uiChanges=function(e){const n=r.createEmptyDependencyMap();e.flexObjects.forEach(a=>{if(a.isA("sap.ui.fl.apply._internal.flexObjects.UIChange")&&!a.getVariantReference()){r.addChangeAndUpdateDependencies(a,e.componentId,n)}});return{runtimeOnlyData:{liveDependencyMap:n}}};return c});
//# sourceMappingURL=InitialPrepareFunctions.js.map