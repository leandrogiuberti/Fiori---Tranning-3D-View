/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/ui/base/ManagedObject","sap/ui/fl/initial/_internal/Storage","sap/ui/fl/Utils"],function(e,a,t,n){"use strict";let l;let s;async function i(){const a=n.getUshellContainer();if(a){try{const e=await n.getUShellService("UserInfo");return e.getUser()?.getId()}catch(a){e.error(`Error getting service from Unified Shell: ${a.message}`)}}return Promise.resolve("")}const o=a.extend("sap.ui.fl.initial._internal.Settings",{metadata:{library:"sap.ui.fl",properties:{client:{type:"string"},hasPersoConnector:{type:"boolean",defaultValue:false},isAnnotationChangeEnabled:{type:"boolean",defaultValue:false},isAppVariantSaveAsEnabled:{type:"boolean",defaultValue:false},isAtoEnabled:{type:"boolean",defaultValue:false},isCondensingEnabled:{type:"boolean",defaultValue:false},isContextBasedAdaptationEnabled:{type:"boolean",defaultValue:false},isContextSharingEnabled:{type:"boolean",defaultValue:true},isKeyUser:{type:"boolean",defaultValue:false},isKeyUserTranslationEnabled:{type:"boolean",defaultValue:false},isLocalResetEnabled:{type:"boolean",defaultValue:false},isProductiveSystem:{type:"boolean",defaultValue:true},isPublicFlVariantEnabled:{type:"boolean",defaultValue:false},isPublicLayerAvailable:{type:"boolean",defaultValue:false},isPublishAvailable:{type:"boolean",defaultValue:false},isSeenFeaturesAvailable:{type:"boolean",defaultValue:false},isVariantAdaptationEnabled:{type:"boolean",defaultValue:false},isVariantAuthorNameAvailable:{type:"boolean",defaultValue:false},isVariantPersonalizationEnabled:{type:"boolean",defaultValue:true},isVariantSharingEnabled:{type:"boolean",defaultValue:false},system:{type:"string"},systemType:{type:"string"},userId:{type:"string"},versioning:{type:"object",defaultValue:{}}}},constructor:function(...e){a.apply(this,e);const t=new URLSearchParams(window.location.search);if(t.has("sap-ui-xx-rta-adaptations")){this.setProperty("isContextBasedAdaptationEnabled",t.get("sap-ui-xx-rta-adaptations")==="true")}}});function r(){s=t.loadFeatures().then(async function(a){const t=Object.assign({},a);if(t.logonUser){t.userId=t.logonUser;delete t.logonUser}else{t.userId=await i()}delete t.isZeroDowntimeUpgradeRunning;delete t.isAtoAvailable;const n=Object.keys(t).map(e=>{if(!o.getMetadata().getAllProperties()[e]){delete t[e];return e}return null}).filter(Boolean);e.warning(`Unknown settings received from the backend: ${n.join(", ")}`);l=new o(t);return l});return s}o.getInstance=async function(){if(!l){if(s){await s}else{await r()}}return l};o.getInstanceOrUndef=function(){return l};o.clearInstance=function(){l=undefined;s=undefined};return o});
//# sourceMappingURL=Settings.js.map