/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/restricted/_union","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexState/changes/UIChangesState","sap/ui/fl/initial/_internal/ManifestUtils","sap/ui/fl/write/_internal/flexState/changes/UIChangeManager","sap/ui/fl/write/api/ChangesWriteAPI","sap/ui/fl/write/api/PersistenceWriteAPI","sap/ui/fl/Utils","sap/ui/fl/write/_internal/init"],function(e,t,n,r,a,i,l,s,o){"use strict";var u={};function c(e,t,i){return r.getAllUIChanges(a.getFlexReferenceForControl(e)).filter(function(e){return e.getFileType()==="change"&&e.getLayer()===t&&e.getState()!==n.LifecycleState.DELETED&&e.getVariantReference()===(i||undefined)})}function f(n){var r=o.getAppComponentForControl(n);var a=[];var i=[];function l(t,r){var s=(r||[]).concat(t);if(t===n||a.includes(t)){a=e(a,s);return true}var o=t.getParent();if(i.includes(t)||!o){i=e(i,s);return false}return l(o,s)}function s(e){return e.getDependentSelectorList().map(function(e){return t.bySelector(e,r)}).filter(Boolean).some(function(e){return l(e)})}return s}u.resetChanges=async function(e,n,r){const a=[];const i=e.slice().reverse();if(!r){a.push(...i.map(function(e){const r=t.bySelector(e.getSelector(),n);return function(){e.setQueuedForRevert();return l.revert({change:e,element:r})}}))}await s.remove({flexObjects:i,selector:n});await o.execPromiseQueueSequentially(a)};u.restoreChanges=async function(e,n,r){const s=a.getFlexReferenceForControl(n);i.restoreDeletedChanges(s,e,n);if(!r){const r=e.map(e=>()=>{const r=t.bySelector(e.getSelector(),n);return l.apply({change:e,element:r,modifier:t})});await o.execPromiseQueueSequentially(r)}};u.getNestedUIChangesForControl=function(e,t){var n=c(e,t.layer,t.currentVariant);var r=f(e);return n.filter(r)};u.isResetEnabled=function(e,t){var n=c(e,t.layer,t.currentVariant);var r=f(e);return n.some(r)};return u});
//# sourceMappingURL=LocalResetAPI.js.map