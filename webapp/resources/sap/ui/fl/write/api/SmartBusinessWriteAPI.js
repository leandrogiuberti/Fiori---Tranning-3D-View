/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/initial/_internal/ManifestUtils","sap/ui/fl/initial/_internal/Settings","sap/ui/fl/write/_internal/appVariant/AppVariantFactory","sap/ui/fl/write/_internal/connectors/LrepConnector","sap/ui/fl/write/_internal/SaveAs","sap/ui/fl/write/api/ChangesWriteAPI","sap/ui/fl/write/api/PersistenceWriteAPI","sap/base/util/restricted/_pick","sap/ui/fl/write/_internal/init"],function(e,r,t,i,n,a,p,s){"use strict";function c(e,t){return r.getInstance().then(function(r){if(r.getIsAtoEnabled()){t.skipIam=true;t.transport="ATO_NOTIFICATION"}return n[e](t)})}function o(r){if(!r.appId){return Promise.reject("App Variant ID must be provided")}r.selector={appId:r.appId};r.id=e.getFlexReferenceForSelector(r.selector);r.isForSmartBusiness=true;return Promise.resolve(r)}var u={create(r){if(!r.layer){return Promise.reject("Layer must be provided")}if(!r.selector||!r.selector.appId){return Promise.reject("selector.appId must be provided")}if(!r.id){return Promise.reject("App variant ID must be provided")}r.reference=e.getFlexReferenceForSelector(r.selector);r.isForSmartBusiness=true;return c("saveAs",r)},update(e){return o(e).then(c.bind(this,"updateAppVariant"))},remove(e){return o(e).then(c.bind(this,"deleteAppVariant"))},getDesignTimeVariant(e){if(!e.id){return Promise.reject("App Variant ID must be provided")}return t.load(e)},getRunTimeVariant(e){if(!e.appId){return Promise.reject("Reference App ID must be provided")}if(!e.id){return Promise.reject("App Variant ID must be provided")}var r=`/sap/bc/lrep/content/apps/${e.appId}/appVariants/${e.id}/manifest.appdescr_variant`;return i.appVariant.getManifest({appVarUrl:r})},createDescriptorInlineChanges(e){if(!e.appId){return Promise.reject("appId must be provided")}if(!e.changeSpecificData){return Promise.reject("changeSpecificData must be provided")}e.selector={appId:e.appId};return a.create(e)},add(e){if(!e.appId){return Promise.reject("appId must be provided")}if(!e.change){return Promise.reject("Change instance must be provided")}e.selector={appId:e.appId};return p.add(e)},createDescriptorChangeString(e){return this.createDescriptorInlineChanges(e).then(function(e){var r=s(e.getJson(),["changeType","content","texts"]);return Promise.resolve(JSON.stringify(r))})}};return u});
//# sourceMappingURL=SmartBusinessWriteAPI.js.map