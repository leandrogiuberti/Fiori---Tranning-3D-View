/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/core/Element","sap/ui/fl/apply/_internal/flexState/FlexObjectState","sap/ui/fl/initial/_internal/ManifestUtils"],function(e,n,a,t){"use strict";function s(n,t){const s=a.getCompleteDependencyMap(n.sComponentName).mDependencies;for(const a in s){const i=s[a].changeObject;n.mChangesEntries[a]={mDefinition:i.convertToFileContent(),aControlsDependencies:[],aDependencies:[]};if(i._aDependentSelectorList&&t){i._aDependentSelectorList.forEach(function(a){const s={bPresent:!!e.bySelector(a,t),aAppliedChanges:[],aFailedChangesJs:[],aFailedChangesXml:[],aNotApplicableChanges:[]};n.mControlData[a.id]=s})}}i(n.sComponentName,n)}function i(e,n){const t=a.getCompleteDependencyMap(e).mDependencies;for(const e in t){const a=t[e];n.mChangesEntries[e].aControlsDependencies=a.controlsDependencies;n.mChangesEntries[e].aDependencies=a.dependencies}}function o(e,n,a,t,s){if(s){a[t]=s;a[t].map(function(a){if(!(a in e[n])){e[n].push(a)}})}}function l(e,n){const a=e.getCustomData();const t=[];a.forEach(function(e){const a=e.getKey();if(a.startsWith(n)){t.push(a.replace(n,""))}});return t}function p(e){for(const t in a.getLiveDependencyMap(e.sComponentName).mChanges){const a={bPresent:false,aAppliedChanges:[],aFailedChangesJs:[],aFailedChangesXml:[],aNotApplicableChanges:[]};const s=n.getElementById(t);if(s){a.bPresent=true;o(e,"aAppliedChanges",a,"aAppliedChanges",l(s,"sap.ui.fl.appliedChanges."));o(e,"aFailedChanges",a,"aFailedChangesJs",l(s,"sap.ui.fl.failedChanges.js."));o(e,"aFailedChanges",a,"aFailedChangesXml",l(s,"sap.ui.fl.failedChanges.xml."));o(e,"aNotApplicableChanges",a,"aNotApplicableChanges",l(s,"sap.ui.fl.notApplicableChanges."))}e.mControlData[t]=a}}function c(e){if(!e){return undefined}const n=t.getFlexReferenceForControl(e);const a={sVersion:"1",bIsInvestigationExport:true,mControlData:{},aAppliedChanges:[],aFailedChanges:[],aNotApplicableChanges:[],mChangesEntries:{},mVariantsChanges:{},sComponentName:n};s(a,e);p(a);return a}return{extract:c}});
//# sourceMappingURL=extractChangeDependencies.js.map