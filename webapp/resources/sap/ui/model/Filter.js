/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./FilterOperator","sap/base/Log","sap/base/i18n/Localization","sap/ui/base/Object"],function(t,e,r,i){"use strict";var a=i.extend("sap.ui.model.Filter",{constructor:function(r,o,s,l){i.call(this);if(typeof r==="object"&&!Array.isArray(r)){this.sPath=r.path;this.sOperator=r.operator;this.oValue1=r.value1;this.oValue2=r.value2;this.sVariable=r.variable;this.oCondition=r.condition;this.aFilters=r.filters||r.aFilters;this.bAnd=r.and||r.bAnd;this.fnTest=r.test;this.fnCompare=r.comparator;this.bCaseSensitive=r.caseSensitive}else{if(Array.isArray(r)){this.aFilters=r}else{this.sPath=r}if(typeof o==="boolean"){this.bAnd=o}else if(typeof o==="function"){this.fnTest=o}else{this.sOperator=o}this.oValue1=s;this.oValue2=l;if(this.sOperator===t.Any||this.sOperator===t.All||this.sOperator===t.NotAny||this.sOperator===t.NotAll){throw new Error("The filter operators 'Any', 'All', 'NotAny', and 'NotAll' are only supported with "+"the parameter object notation.")}}if(this.aFilters?.includes(a.NONE)){throw new Error("Filter.NONE not allowed in multiple filter")}else if(this.oCondition&&this.oCondition===a.NONE){throw new Error("Filter.NONE not allowed as condition")}if(this.sOperator===t.Any||this.sOperator===t.NotAny){if(this.sVariable&&this.oCondition){this._checkLambdaArgumentTypes()}else if(!this.sVariable&&!this.oCondition){}else{throw new Error("When using the filter operator 'Any' or 'NotAny', you need to provide "+"both a lambda variable and a condition, or neither.")}}else if(this.sOperator===t.All||this.sOperator===t.NotAll){this._checkLambdaArgumentTypes()}else if(Array.isArray(this.aFilters)&&!this.sPath&&!this.sOperator&&!this.oValue1&&!this.oValue2){this._bMultiFilter=true;if(!this.aFilters.every(n)){e.error("Filter in aggregation of multi filter has to be instance of"+" sap.ui.model.Filter")}}else if(!this.aFilters&&this.sPath!==undefined&&(this.sOperator&&this.oValue1!==undefined||this.fnTest)){this._bMultiFilter=false}else{e.error("Wrong parameters defined for filter.")}this.sFractionalSeconds1=undefined;this.sFractionalSeconds2=undefined}});a.NONE=new a({path:"/",test:()=>false});a.checkFilterNone=function(t){if(Array.isArray(t)&&t.length>1&&t.includes(a.NONE)){throw new Error("Filter.NONE cannot be used together with other filters")}};a.prototype._checkLambdaArgumentTypes=function(){if(!this.sVariable||typeof this.sVariable!=="string"){throw new Error("When using the filter operators 'Any', 'All', 'NotAny', or 'NotAll', a string has to be "+"given as the 'variable' argument.")}if(!n(this.oCondition)){throw new Error("When using the filter operator 'Any', 'All', 'NotAny', or 'NotAll', a valid instance of "+"sap.ui.model.Filter has to be given as the 'condition' argument.")}};function n(t){return t instanceof a}a.prototype.appendFractionalSeconds1=function(t){this.sFractionalSeconds1=t};a.prototype.appendFractionalSeconds2=function(t){this.sFractionalSeconds2=t};var o={Logical:"Logical",Binary:"Binary",Unary:"Unary",Lambda:"Lambda",Reference:"Reference",Literal:"Literal",Variable:"Variable",Call:"Call",Custom:"Custom"};var s={Equal:"==",NotEqual:"!=",LessThan:"<",GreaterThan:">",LessThanOrEqual:"<=",GreaterThanOrEqual:">=",And:"&&",Or:"||",Not:"!"};var l={Contains:"contains",StartsWith:"startswith",EndsWith:"endswith"};a.prototype.getAST=function(e){var r,i,a,n,h,u,p;function c(t,e,r){return{type:o.Logical,op:t,left:e,right:r}}function f(t,e,r){return{type:o.Binary,op:t,left:e,right:r}}function d(t,e){return{type:o.Unary,op:t,arg:e}}function y(t,e,r,i){return{type:o.Lambda,op:t,ref:e,variable:r,condition:i}}function b(t){return{type:o.Reference,path:t}}function A(t){return{type:o.Literal,value:t}}function g(t){return{type:o.Variable,name:t}}function N(t,e){return{type:o.Call,name:t,args:e}}if(this.aFilters){i=this.bAnd?s.And:s.Or;a=this.bAnd?"AND":"OR";r=this.aFilters[this.aFilters.length-1].getAST(e);for(var O=this.aFilters.length-2;O>=0;O--){r=c(i,this.aFilters[O].getAST(e),r)}}else{i=this.sOperator;a=this.sOperator;n=b(this.sPath);h=A(this.oValue1);switch(i){case t.EQ:r=f(s.Equal,n,h);break;case t.NE:r=f(s.NotEqual,n,h);break;case t.LT:r=f(s.LessThan,n,h);break;case t.GT:r=f(s.GreaterThan,n,h);break;case t.LE:r=f(s.LessThanOrEqual,n,h);break;case t.GE:r=f(s.GreaterThanOrEqual,n,h);break;case t.Contains:r=N(l.Contains,[n,h]);break;case t.StartsWith:r=N(l.StartsWith,[n,h]);break;case t.EndsWith:r=N(l.EndsWith,[n,h]);break;case t.NotContains:r=d(s.Not,N(l.Contains,[n,h]));break;case t.NotStartsWith:r=d(s.Not,N(l.StartsWith,[n,h]));break;case t.NotEndsWith:r=d(s.Not,N(l.EndsWith,[n,h]));break;case t.BT:u=h;p=A(this.oValue2);r=c(s.And,f(s.GreaterThanOrEqual,n,u),f(s.LessThanOrEqual,n,p));break;case t.NB:u=h;p=A(this.oValue2);r=c(s.Or,f(s.LessThan,n,u),f(s.GreaterThan,n,p));break;case t.Any:case t.All:case t.NotAny:case t.NotAll:{let a=i;if(i===t.NotAny){a=t.Any}else if(i===t.NotAll){a=t.All}const o=y(a,n,g(this.sVariable),this.oCondition.getAST(e));r=i===t.NotAny||i===t.NotAll?d(s.Not,o):o;break}default:throw new Error("Unknown operator: "+i)}}if(e&&!r.origin){r.origin=a}return r};a.prototype.getComparator=function(){return this.fnCompare};a.prototype.getCondition=function(){return this.oCondition};a.prototype.getOperator=function(){return this.sOperator};a.prototype.getPath=function(){return this.sPath};a.prototype.getFilters=function(){return this.aFilters&&this.aFilters.slice()};a.prototype.getTest=function(){return this.fnTest};a.prototype.getValue1=function(){return this.oValue1};a.prototype.getValue2=function(){return this.oValue2};a.prototype.getVariable=function(){return this.sVariable};a.prototype.isAnd=function(){return!!this.bAnd};a.prototype.isCaseSensitive=function(){return this.bCaseSensitive};a.defaultComparator=function(t,e){if(t==e){return 0}if(t==null||e==null){return NaN}if(typeof t=="string"&&typeof e=="string"){return t.localeCompare(e,r.getLanguageTag().toString())}if(t<e){return-1}if(t>e){return 1}return NaN};return a});
//# sourceMappingURL=Filter.js.map