/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/UIArea","sap/ui/dt/ElementUtil","sap/ui/dt/OverlayRegistry"],function(e,n,r){"use strict";var t={};t.isInTargetZoneAggregation=function(e){var n=e.getParent();return!!n&&n.isTargetZone()};t.getParentInformation=function(e){var r=e.getParentElementOverlay();if(r){var t=r.getElement();var i=e.getParentAggregationOverlay().getAggregationName();var a=n.getAggregation(t,i);var g=e.getElement();var l=a.indexOf(g);return{parent:t,aggregation:i,index:l}}return{parent:null,aggregation:"",index:-1}};t.getClosestOverlayFor=function(e){if(!e){return null}var n=e;var t=r.getOverlay(n);while(n&&!t){n=n.getParent();t=r.getOverlay(n)}return t};t.getGeometry=function(e){var n;var r;var t;var i;e.forEach(function(e){if(e&&e.visible){if(!n||e.position.left<n){n=e.position.left}if(!t||e.position.top<t){t=e.position.top}var a=e.position.left+e.size.width;if(!r||a>r){r=a}var g=e.position.top+e.size.height;if(!i||g>i){i=g}}});if(typeof n==="number"){return{size:{width:r-n,height:i-t},position:{left:n,top:t},visible:true}}};t.getFirstDescendantByCondition=function(e,n){if(!n){throw new Error("expected condition is 'undefined' or not a function")}var r=t.getAllChildOverlays(e);for(var i=0,a=r.length;i<a;i++){var g=r[i];if(n(g)){return g}var l=t.getFirstDescendantByCondition(g,n);if(l){return l}}return undefined};t.getLastDescendantByCondition=function(e,n){if(!n){throw new Error("expected condition is 'undefined' or not a function")}var r=t.getAllChildOverlays(e);for(var i=r.length-1,a=-1;i>a;i--){var g=r[i];if(n(g)){return g}var l=t.getLastDescendantByCondition(g,n);if(l){return l}}return undefined};t.getAllChildOverlays=function(e){var n=[];var r=[];if(!e){return n}var t=e.getChildren();for(var i=0;i<t.length;i++){r=t[i].getChildren();if(r&&r.length>0){n=n.concat(r)}}return n};t.getNextSiblingOverlay=function(e){if(!e){return undefined}var n=e.getParentAggregationOverlay();if(n){var r=n.getChildren();var t=r.indexOf(e);if(t!==r.length-1){return r[t+1]}else if(t===r.length-1){var i=e.getParentElementOverlay();r=i.getChildren();for(t=r.indexOf(n)+1;t<r.length;t++){var a=r[t].getChildren();if(a.length){return a[0]}}}}};t.getPreviousSiblingOverlay=function(e){if(!e){return undefined}var n=e.getParentAggregationOverlay();if(n){var r=n.getChildren();var t=r.indexOf(e);if(t>0){return r[t-1]}else if(t===0){var i=e.getParentElementOverlay();r=i.getChildren();for(t=r.indexOf(n)-1;t>=0;t--){var a=r[t].getChildren();if(a.length){return a[a.length-1]}}}}};t.iterateOverlayElementTree=function(e,n){n(e);e.getChildren().forEach(function(e){e.getChildren().forEach(function(e){t.iterateOverlayElementTree(e,n)})})};t.getClosestOverlayForNode=function(e){var r=n.getClosestElementForNode(e);return t.getClosestOverlayFor(r)};t.setFirstParentMovable=function(e,n){if(!n){const n=t.getFirstMovableParentOverlay(e);if(n){e._firstMovableParentOverlay=n;n.setMovable(false)}}else if(e._firstMovableParentOverlay){e._firstMovableParentOverlay.setMovable(true);delete e._firstMovableParentOverlay}};t.findAllSiblingOverlaysInContainer=function(e,n){var r=e.getParentElementOverlay();var i=[];if(r){if(r!==n){var a=t.findAllSiblingOverlaysInContainer(r,n);i=a.map(function(n){var r=n.getAggregationOverlay(e.getParentAggregationOverlay().getAggregationName());return r?r.getChildren():[]}).reduce(function(e,n){return e.concat(n)},[])}else{var g=e.getParentAggregationOverlay().getAggregationName();var l=r.getAggregationOverlay(g);i=l&&l.getChildren()||[]}}i=i.filter(function(e){return e.getDesignTimeMetadata()});return i};t.findAllOverlaysInContainer=function(e,n){var i=e.getRelevantContainer()||e.getElement();var a=r.getOverlay(i);var g=[];if(!a){return g}var l=t._findAllSiblingsAndParents(e,a,0,n);for(var o in l){g=g.concat(l[o])}if(g.length){var f=[];var v=n?g:l[0];v.forEach(function(e){f=f.concat(t._findAllChildrenInContainer(e,i))});g=g.concat(f)}else{g=t._findAllChildrenInContainer(e,i)}g.push(a);g=g.filter(function(e){return e.getDesignTimeMetadata()});return g};t._findAllSiblingsAndParents=function(e,n,r,i){var a=e.getParentElementOverlay();var g={};if(!a){g[r]=[];return g}function l(e){var n=e.getAggregationNames();var r=[];n.forEach(function(n){var t=e.getAggregationOverlay(n);var i=t?t.getChildren():[];r=i.concat(r)});return r}if(a!==n){var o;var f;o=t._findAllSiblingsAndParents(a,n,r+1,i);if(i){var v=[];o[r+1].forEach(function(e){v.concat(l(e))});o[r]=v;return o}f=o[r+1].map(function(n){var r=e.getParentAggregationOverlay().getAggregationName();var t=n.getAggregationOverlay(r);return t?t.getChildren():[]}).reduce(function(e,n){return e.concat(n)},[]);o[r]=f;return o}var u=[];if(i){u=l(a)}else{var d=e.getParentAggregationOverlay().getAggregationName();u=e.getParentElementOverlay().getAggregationOverlay(d).getChildren()}g[r]=u;return g};t._findAllChildrenInContainer=function(e,n,r){r||=[];if(e.getChildren().length>0){e.getChildren().forEach(function(e){e.getChildren().forEach(function(e){if(e.getRelevantContainer()===n){r.push(e);t._findAllChildrenInContainer(e,n,r)}})})}return r};t.findAllUniqueAggregationOverlaysInContainer=function(e,n){var r=t.findAllSiblingOverlaysInContainer(e,n);return r.map(function(e){return e.getParentAggregationOverlay()}).filter(function(e,n,r){return r.indexOf(e)===n})};t.getIndexInAggregation=function(e,t,i){var a=n.getAggregation(t,i).filter(function(n){return!!r.getOverlay(n)||n===e});return a.indexOf(e)};function i(n,r){var t;var a;var g=n.getParent();var l=false;if(n.isA("sap.ui.dt.ElementOverlay")){var o=n.getParentElementOverlay();if(g){t=g.getAggregationName();a=g.getChildren().indexOf(n);l=o&&o.getAggregationOverlay(t,"AggregationBindingTemplateOverlays")}else{a=-1}r.push({overlayId:n.getId(),aggregation:t,index:a});if(l){return{overlayId:o.getId(),aggregation:t,stack:r}}}if(!g||g instanceof e){return{overlayId:undefined,aggregation:undefined,stack:r}}return i(g,r)}t.getClosestBoundControl=function(e){return i(e,[])};t.getFirstMovableParentOverlay=function(e){function n(e){if(e.isMovable()){return e}if(!e.getParentElementOverlay()){return undefined}return n(e.getParentElementOverlay())}const r=e.getParentElementOverlay();if(r){return n(r)}return undefined};return t});
//# sourceMappingURL=OverlayUtil.js.map