//@ui5-bundle sap/ui/generic/app/library-preload.js
/*
 * ! SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/AppComponent", ["sap/suite/ui/generic/template/lib/AppComponent"],function(e){"use strict";return e},true);
/*
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/ApplicationController", ["./transaction/BaseController","./transaction/TransactionController","sap/ui/generic/app/util/ModelUtil","sap/base/Log"],function(e,t,r,i){"use strict";var o=e.extend("sap.ui.generic.app.ApplicationController",{constructor:function(t,r){e.apply(this,[t]);this._oGroupChanges={};this.sName="sap.ui.generic.app.ApplicationController";this.oPropertyChangedResolve;this.oPropertyChangedReject;this._initModel(t);this.registerView(r)}});o.prototype.propertyChanged=function(e,t,i){var o=this,a={batchGroupId:"Changes",changeSetId:"Changes",onlyIfPending:true,noShowResponse:true,noBlockUI:true,draftSave:true},n,s={};if(t&&t instanceof sap.ui.model.Context){var u=r.getEntitySetFromContext(t);var f=t.getModel().getMetaModel();var l=f.getODataEntitySet(u).entityType;s=f.getODataEntityType(l)}for(var c in s){if(c.startsWith("com.sap.vocabularies.Common.v1.SideEffects")){n=s[c];if(n.SourceProperties&&n.SourceProperties.length){for(var h=0;h<n.SourceProperties.length;h++){if(n.SourceProperties[h].PropertyPath===e){o.registerGroupChange(o._getSideEffectsQualifier(c))}}}}}if(!o._oDraftMergeTimer.nTimeoutID){o.oResultPromise=new Promise(function(e,t){o.oPropertyChangedResolve=e;o.oPropertyChangedReject=t;o._oDraftMergeTimer.nTimeoutID=setTimeout(function(){o._oDraftMergeTimer.nTimeoutID=null;if(o._oModel.hasPendingChanges()){o.triggerSubmitChanges(a).then(function(t){e()},function(e){t(e)})}else{e()}},(i||0)*1e3)})}return o.oResultPromise};o.prototype.registerGroupChange=function(e){this._oGroupChanges[e]=true};o.prototype.registerView=function(e){var t=this;if(e){this._fnAttachValidateFieldGroup=function(r){var i,o,a,n,s=[];var u=this.getBindingContext();if(!u){return false}if(!t.getTransactionController().getDraftController().getDraftContext().hasDraft(u)){this.detachValidateFieldGroup(t._fnAttachValidateFieldGroup);return false}if(r.mParameters.fieldGroupIds){a=r.mParameters.fieldGroupIds.length}for(n=0;n<a;n++){i=r.mParameters.fieldGroupIds[n];o=e.data(i);if(o){s.push({uuid:i,objid:o})}}t._onValidateFieldGroup(s,e)};e.attachValidateFieldGroup(this._fnAttachValidateFieldGroup)}};o.prototype._initModel=function(e){if(e.getDefaultBindingMode()!==sap.ui.model.BindingMode.TwoWay){i.error("ApplicationController: The model's DefaultBindingMode wasn't but is now set to 'TwoWay'.");e.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay)}if(e.getRefreshAfterChange()!==false){i.error("ApplicationController: The model's setting 'RefreshAfterChange' wasn't but is now set to 'false'.");e.setRefreshAfterChange(false)}e.setDeferredGroups(["Changes"]);e.setChangeGroups({"*":{groupId:"Changes",changeSetId:"Changes",single:false}})};o.prototype._onValidateFieldGroup=function(e,t){var r,i=e.length,o,a={bGlobal:false,aRequests:[],bHasTargets:true},n=[],s=this;for(r=0;r<i;r++){n.push(this._executeFieldGroup(e[r],a,t).then(function(){return true},function(){return false}))}var u=function(e){if(e.find(function(e){return e})){i=a.aRequests.length;for(r=0;r<i;r++){o=a.aRequests[r];o(a.bGlobal)}if(a.bGlobal){s._oModel.refresh(true,false,"Changes")}var t=s.triggerSubmitChanges({batchGroupId:"Changes",noShowSuccessToast:true,forceSubmit:true,noBlockUI:true,urlParameters:{},draftSave:s._oModel.hasPendingChanges(true)});s.fireEvent("beforeSideEffectExecution",{promise:t});return t}};return Promise.all(n).then(u)};o.prototype._executeFieldGroup=function(e,t,r){var i,o,a,n={batchGroupId:"Changes",changeSetId:"SideEffects",noShowSuccessToast:true,forceSubmit:true,noBlockUI:true,urlParameters:{}},s=this;i=this._getSideEffectsQualifier(e.objid.name);n.urlParameters.SideEffectsQualifier=i;o=e.objid.contextObject;a=this._getSideEffect(e.objid);return this._hasClientErrors(e.uuid,r).then(function(){if(!s._oGroupChanges[i]){return Promise.reject()}s._oGroupChanges[i]=false;if(o&&o.isTransient&&o.isTransient()){return s.synchronizeDraftAsync().then(function(){s._executeSideEffects(a,o,n,t)})}else{s._executeSideEffects(a,o,n,t)}})};o.prototype._getSideEffectsQualifier=function(e){var t=e.replace("com.sap.vocabularies.Common.v1.SideEffects","");if(t.indexOf("#")===0){t=t.replace("#","")}return t};o.prototype._executeSideEffectsForActions=function(e,t,r){var i;var o="_it/";var a={bGlobal:false,aRequests:[],bHasTargets:true};var n={batchGroupId:"Changes",changeSetId:"SideEffects",noShowSuccessToast:true,forceSubmit:true,noBlockUI:true,urlParameters:{}};var s=0;if(r===false){n.batchGroupId="NonDraftChanges"}if(e.TargetEntities&&e.TargetEntities.length){for(s=0;s<e.TargetEntities.length;s++){if(e.TargetEntities[s].NavigationPropertyPath.indexOf(o)===0){e.TargetEntities[s].NavigationPropertyPath=e.TargetEntities[s].NavigationPropertyPath.substr(4)}}}var u=function(e,t){var r=e[t];if(r&&r.startsWith(o)){e[t]=r.substr(4)}};(e.TargetProperties||[]).forEach(function(e){["PropertyPath","String"].forEach(u.bind(null,e))});for(s=0;s<t.length;s++){this._executeSideEffects(e,t[s],n,a);if(a.aRequests[0]){i=a.aRequests[0];i(a.bGlobal);a.aRequests=[]}}if(a.bGlobal){this._oModel.refresh(true,false,n.batchGroupId)}};o.prototype._executeSideEffects=function(e,t,r,i){var o=this,a,n,s;var u=o.getTransactionController().getDraftController();var f=u.getDraftContext().hasDraft(t);if(e.TriggerAction&&e.TriggerAction.String&&f){n=e.TriggerAction.String}this._setSelect(e,r,i,t);s=i.bHasTargets;a=function(e,i){var a=!(i&&i.callPreparationOnly);var l=o._oModel.getETag(t.getPath());if(l){r.headers={"If-Match":"*"}}if(n&&a){o._callAction(n,t,r)}else if(i&&i.callPreparationOnDraftRoot&&f){delete r.urlParameters.SideEffectsQualifier;u.prepareDraft(i.draftRootContext,r)}if(!e&&s&&a){var c=Object.assign({},r);c.context=t;o._read("",c,true)}};i.aRequests.push(a)};o.prototype._hasClientErrors=function(e,t){var r,i=[];r=t.getControlsByFieldGroupId(e);r.forEach(function(e){var t=e.getParent();var r={handleSuccess:false};i.push(t&&t.checkValuesValidity&&t.checkValuesValidity(r))});return Promise.all(i)};o.prototype._findChildEntityTypeByNavigationProperty=function(e,t){var r=this._oModel.getMetaModel();var i=t.split("/");var o=e;for(var a of i){var n=r.getODataAssociationEnd(o,a);if(!n){return null}o=r.getODataEntityType(n.type)}return o};o.prototype._setSelect=function(e,t,o,a){var n=this;var s=new Set;var u=new Set;var f=r.getEntitySetFromContext(a);var l=this._oModel.getMetaModel();var c=l.getODataEntitySet(f).entityType;var h=l.getODataEntityType(c);if(!o.bGlobal){if((!e.TargetEntities||e.TargetEntities.length===0)&&(!e.TargetProperties||e.TargetProperties.length===0)){o.bHasTargets=false;return}if(e.TargetEntities?.length>0){e.TargetEntities.forEach(function(e){const t=e.NavigationPropertyPath;if(t===""){s.add("*")}else{const e=n._findChildEntityTypeByNavigationProperty(h,t);if(e){s.add(t);u.add(t)}else{i.error("ApplicationController: Invalid TargetEntities entry '"+t+"' on the side effect")}}})}if(e.TargetProperties?.length>0){e.TargetProperties.forEach(function(e){var t=e.PropertyPath||e.String;if(t.includes("/")){var r=t.lastIndexOf("/");var o=t.substring(0,r);var a=t.substring(r+1);var f=n._findChildEntityTypeByNavigationProperty(h,o);if(f&&l.getODataProperty(f,a)){u.add(o);s.add(t)}else{i.error("ApplicationController: Invalid TargetProperties entry '"+t+"' on the side effect")}}else{var c=!!l.getODataProperty(h,t);if(c){s.add(t)}else{i.error("ApplicationController: Invalid TargetProperties entry '"+t+"' on the side effect")}}})}}if(s.size>0){t.readParameters={$select:Array.from(s).join(",")};if(u.size>0){t.readParameters["$expand"]=Array.from(u).join(",")}}};o.prototype._getSideEffect=function(e){var t,r,i,o;t=this._oModel.getMetaModel();i="getOData"+e.originType.substring(0,1).toUpperCase()+e.originType.substring(1);if(e.originNamespace){o=e.originNamespace+"."+e.originName}else{o=e.originName}if(t[i]){r=t[i](o);if(r){return r[e.name]}}throw"Unknown SideEffect originType: "+e.originType};o.prototype.getTransactionController=function(){if(!this._oTransaction){this._oTransaction=new t(this._oModel,this._oQueue,{noBatchGroups:true},this._oDraftMergeTimer)}return this._oTransaction};o.prototype.invokeActions=function(e,t,r){var i,o,a=t.length,n,s=[],u,f=false;var l=this._oModel.hasPendingChanges();r=r||{};if(this._oDraftMergeTimer.nTimeoutID){f=true;if(a&&this._oModel.getETag(t[0].getPath())){r.headers={"If-Match":"*"}}}n=this._getChangeSetFunc(t,r.operationGrouping);if(a===0){s.push(this._invokeAction(e,null,null,r))}else{for(o=0;o<a;o++){s.push(this._invokeAction(e,t[o],(f?"Action":"")+n(o),r))}}var c=this._oModel.getMetaModel().getODataFunctionImport(e.split("/")[1]);for(var h in c){if(h.startsWith("com.sap.vocabularies.Common.v1.SideEffects")){u=c[h];break}}if(u){this._executeSideEffectsForActions(u,t,r.triggerChanges)}if(r.triggerChanges!==false){s.push(this.triggerSubmitChanges({batchGroupId:"Changes",successMsg:"Call of action succeeded",failedMsg:"Call of action failed",forceSubmit:true,context:i,draftSave:l}))}var g=this;return this._newPromiseAll(s).then(function(e){var i=false;if(e&&r.triggerChanges!==false&&e.length>t.length){var o=e.pop();if(f&&l){var a=o.response[0];if(a.response.statusCode>=400&&a.response.statusCode<599){g.oPropertyChangedReject(a)}else{g.oPropertyChangedResolve(a)}}}i=g._checkAtLeastOneSuccess(t,e);if(i){return e}else{return Promise.reject(e)}})};o.prototype.executeSideEffects=function(e,t,i,o,a){var n,s,u,f,l,c;var h=false;var g=!t&&!i;var p={bGlobal:false,aRequests:[],bHasTargets:true};var d={batchGroupId:"Changes",changeSetId:"SideEffects",noShowSuccessToast:true,forceSubmit:true,noBlockUI:true,urlParameters:{}};var v=r.getEntitySetFromContext(e);var C=e.getModel().getMetaModel();var S=C.getODataEntitySet(v).entityType;var y=C.getODataEntityType(S);var m=0;o=!(o===false);i=i||[];t=t||[];var b=function(t){if(c){d.urlParameters.SideEffectsQualifier=c}else{delete d.urlParameters.SideEffectsQualifier}this._executeSideEffects(t,e,d,p);if(p.aRequests[0]){l=p.aRequests[0];l(p.bGlobal,a);p.aRequests=[]}}.bind(this);for(var P in y){if(P.startsWith("com.sap.vocabularies.Common.v1.SideEffects")){n=y[P];f=false;c=this._getSideEffectsQualifier(P);if(g){if(!n.SourceProperties&&!n.SourceEntities){b(n);f=true;h=true;break}}else{if(n.SourceEntities&&n.SourceEntities.length){for(m=0;m<n.SourceEntities.length;m++){s=n.SourceEntities[m].NavigationPropertyPath;if(i.indexOf(s)!==-1){f=true}}}if(!f&&n.SourceProperties&&n.SourceProperties.length){for(m=0;m<n.SourceProperties.length;m++){u=n.SourceProperties[m].PropertyPath;if(t.indexOf(u)!==-1){f=true}}}if(f){b(n);h=true}}}}if(g&&!f){b({});h=true}if(o&&!p.bHasTargets){this._oModel.refresh(true,false,"Changes");h=true}var _=null;if(h){_=this.triggerSubmitChanges({batchGroupId:"Changes",noShowSuccessToast:true,forceSubmit:true,noBlockUI:true,urlParameters:{},draftSave:this._oModel.hasPendingChanges(true)})}else{_=Promise.resolve()}this.fireEvent("beforeSideEffectExecution",{promise:_});return _};o.prototype._checkAtLeastOneSuccess=function(e,t){var r,i=false;if(e.length<=t.length){for(r=0;r<e.length;r++){t[r].actionContext=e[r];if(!t[r].error){i=true}}if(e.length===0){for(r=0;r<t.length;r++){if(!t[r].error){i=true}}}}return i};o.prototype._newPromiseAll=function(e){var t=[];var r=Promise.resolve(null);e.forEach(function(e){r=r.then(function(){return e}).then(function(e){t.push({response:e})},function(e){t.push({error:e})})});return r.then(function(){return Promise.resolve(t)})};o.prototype._getChangeSetFunc=function(e,t){var r=e.length;var i=function(){return"Changes"};if(r===1){return i}if(t==="com.sap.vocabularies.UI.v1.OperationGroupingType/ChangeSet"){return i}return function(e){return"Changes"+e}};o.prototype.getNewActionContext=function(e,t,r){var i=this;e=e.startsWith("/")?e.split("/")[1]:e;r=Object.assign({batchGroupId:"Changes",changeSetId:"SingleAction",successMsg:"Call of action succeeded",failedMsg:"Call of action failed",forceSubmit:true,context:t,functionImport:this._oMeta.getODataFunctionImport(e)},r);var o=this._createFunctionContext(t,r);o.result=o.result.then(function(e){return i._normalizeResponse(e,true)},function(e){if(!e.aborted){var t=i._normalizeError(e);throw t}});return o};o.prototype.submitActionContext=function(e,t,r){var i;var o=this._oModel.getMetaModel().getODataFunctionImport(r);for(var a in o){if(a.startsWith("com.sap.vocabularies.Common.v1.SideEffects")){i=o[a];break}}if(i){this._executeSideEffectsForActions(i,[e])}this.triggerSubmitChanges({batchGroupId:"Changes",successMsg:"Call of action succeeded",failedMsg:"Call of action failed",forceSubmit:true,context:t})};o.prototype._invokeAction=function(e,t,r,i){var o=this;var a=Object.assign({},i.headers);var n=Object.assign({},i.urlParameters);var s={batchGroupId:"Changes",changeSetId:r,successMsg:"Call of action succeeded",failedMsg:"Call of action failed",urlParameters:n,forceSubmit:true,context:t,headers:a,expand:i.expand};if(i.triggerChanges===false){s.batchGroupId="NonDraftChanges"}return this._callAction(e,t,s).then(function(e){return o._normalizeResponse(e,true)},function(e){var t=o._normalizeError(e);throw t})};o.prototype.synchronizeDraftAsync=function(){if(!this._oModel.hasPendingChanges()){return Promise.resolve({})}var e={batchGroupId:"Changes",changeSetId:"Changes",onlyIfPending:true,noShowResponse:true,noBlockUI:true,draftSave:true};return this.triggerSubmitChanges(e)};o.prototype.destroy=function(){e.prototype.destroy.apply(this,[]);if(this._oTransaction){this._oTransaction.destroy()}this._oModel=null;this._oTransaction=null;this._oGroupChanges=null};return o},true);
/*!
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/library", ["sap/ui/base/DataType","sap/ui/core/Lib","sap/ui/core/library","sap/m/library","sap/fe/navigation/library"],function(i,a){"use strict";const e=a.init({name:"sap.ui.generic.app",apiVersion:2,version:"1.141.0",dependencies:["sap.ui.core","sap.m","sap.fe.navigation"],types:["sap.ui.generic.app.navigation.service.NavType","sap.ui.generic.app.navigation.service.ParamHandlingMode","sap.ui.generic.app.navigation.service.SuppressionBehavior"],noLibraryCSS:true});e.navigation=e.navigation||{};e.navigation.service=e.navigation.service||{};e.navigation.service.ParamHandlingMode={SelVarWins:"SelVarWins",URLParamWins:"URLParamWins",InsertInSelOpt:"InsertInSelOpt"};i.registerEnum("sap.ui.generic.app.navigation.service.ParamHandlingMode",e.navigation.service.ParamHandlingMode);e.navigation.service.NavType={initial:"initial",URLParams:"URLParams",xAppState:"xAppState",iAppState:"iAppState",hybrid:"hybrid"};i.registerEnum("sap.ui.generic.app.navigation.service.NavType",e.navigation.service.NavType);e.navigation.service.SuppressionBehavior={standard:0,ignoreEmptyString:1,raiseErrorOnNull:2,raiseErrorOnUndefined:4};i.registerEnum("sap.ui.generic.app.navigation.service.SuppressionBehavior",e.navigation.service.SuppressionBehavior);sap.ui.require("sap.ui.generic.app.AppComponent");return e});
/*!
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/navigation/service/NavError", ["sap/fe/navigation/NavError"],function(r){"use strict";var e=r.extend("sap.ui.generic.app.navigation.service.NavError",{metadata:{publicMethods:["getErrorCode"],properties:{},library:"sap.ui.generic.app"},constructor:function(e){r.apply(this);this._sErrorCode=e}});e.prototype.getErrorCode=function(){return this._sErrorCode};return e});
/*
 * ! SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/navigation/service/NavigationHandler", ["sap/fe/navigation/NavigationHandler","sap/fe/navigation/library","./NavError","./SelectionVariant","sap/ui/generic/app/library"],function(t,e,r,n){"use strict";var a=t.extend("sap.ui.generic.app.navigation.service.NavigationHandler",{metadata:{publicMethods:["navigate","parseNavigation","storeInnerAppState","openSmartLinkPopover","mixAttributesAndSelectionVariant","setModel"]},constructor:function(n,a){try{t.apply(this,[n,e.Mode.ODataV2,a])}catch(t){if(t){throw new r(t.getErrorCode())}}},navigate:function(e,n,a,o,i,p,c){try{var s=function(t,e){if(e){var n=new r(e.getErrorCode());if(t){t(n)}}};t.prototype.navigate.apply(this,[e,n,a,o,s.bind(this,i),p,c])}catch(t){if(t){throw new r(t.getErrorCode())}}},parseNavigation:function(){try{var e=jQuery.Deferred();var a=t.prototype.parseNavigation.apply(this);a.done(function(t,r,a){if(Object.keys(t).length){var o=t.oSelectionVariant;var i=t.oDefaultedSelectionVariant;t.oSelectionVariant=o&&new n(o.toJSONObject());t.oDefaultedSelectionVariant=i&&new n(i.toJSONObject());var p=t.oDefaultedSelectionVariant;if(p&&p.getText()==="Selection Variant with ID "+p.getID()){delete t.oDefaultedSelectionVariant.text}}e.resolve(t,r,a)});a.fail(function(t,n,a){var o=new r(t.getErrorCode());e.reject(o,n,a)});return e.promise()}catch(t){if(t){throw new r(t.getErrorCode())}}},setTechnicalParameters:function(e){try{t.prototype.setTechnicalParameters.apply(this,[e])}catch(t){if(t){throw new r(t.getErrorCode())}}},getTechnicalParameters:function(){return t.prototype.getTechnicalParameters.apply(this)},replaceHash:function(e){t.prototype.replaceHash.apply(this,[e])},storeInnerAppState:function(e,r){return t.prototype.storeInnerAppState.apply(this,[e,r])},storeInnerAppStateWithImmediateReturn:function(e,r){return t.prototype.storeInnerAppStateWithImmediateReturn.apply(this,[e,r])},processBeforeSmartLinkPopoverOpens:function(e,r,n,a){return t.prototype.processBeforeSmartLinkPopoverOpens.apply(this,[e,r,n,a])},mixAttributesAndSelectionVariant:function(e,n,a){try{var o=t.prototype.mixAttributesAndSelectionVariant.apply(this,[e,n,a]);return new sap.ui.generic.app.navigation.service.SelectionVariant(o.toJSONObject())}catch(t){if(t){throw new r(t.getErrorCode())}}},setModel:function(e){t.prototype.setModel.apply(this,[e])},constructContextUrl:function(e,n){try{return t.prototype.constructContextUrl.apply(this,[e,n])}catch(t){if(t){throw new r(t.getErrorCode())}}}});return a});
/*!
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/navigation/service/PresentationVariant", ["sap/fe/navigation/PresentationVariant","./NavError"],function(t,e){"use strict";var o=t.extend("sap.ui.generic.app.navigation.service.PresentationVariant",{constructor:function(o){try{t.apply(this,[o])}catch(t){if(t){throw new e(t.getErrorCode())}}},getID:function(){return t.prototype.getID.apply(this)},setID:function(e){t.prototype.setID.apply(this,[e])},setText:function(o){try{t.prototype.setText.apply(this,[o])}catch(t){if(t){throw new e(t.getErrorCode())}}},getText:function(){return t.prototype.getText.apply(this)},setContextUrl:function(o){try{t.prototype.setContextUrl.apply(this,[o])}catch(t){if(t){throw new e(t.getErrorCode())}}},getContextUrl:function(){return t.prototype.getContextUrl.apply(this)},isEmpty:function(){return t.prototype.isEmpty.apply(this)},setProperties:function(e){t.prototype.setProperties.apply(this,[e])},getProperties:function(){return t.prototype.getProperties.apply(this)},setTableVisualization:function(e){t.prototype.setTableVisualization.apply(this,[e])},getTableVisualization:function(){return t.prototype.getTableVisualization.apply(this)},setChartVisualization:function(e){t.prototype.setChartVisualization.apply(this,[e])},getChartVisualization:function(){return t.prototype.getChartVisualization.apply(this)},toJSONObject:function(){return t.prototype.toJSONObject.apply(this)},toJSONString:function(){return t.prototype.toJSONString.apply(this)}});return o});
/*!
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/navigation/service/SelectionVariant", ["sap/fe/navigation/SelectionVariant","./NavError"],function(t,e){"use strict";var r=t.extend("sap.ui.generic.app.navigation.service.SelectionVariant",{constructor:function(r){try{t.apply(this,[r])}catch(t){if(t){throw new e(t.getErrorCode())}}},getID:function(){return t.prototype.getID.apply(this)},setID:function(e){t.prototype.setID.apply(this,[e])},setText:function(r){try{t.prototype.setText.apply(this,[r])}catch(t){if(t){throw new e(t.getErrorCode())}}},getText:function(){return t.prototype.getText.apply(this)},setParameterContextUrl:function(r){try{t.prototype.setParameterContextUrl.apply(this,[r])}catch(t){if(t){throw new e(t.getErrorCode())}}},getParameterContextUrl:function(){return t.prototype.getParameterContextUrl.apply(this)},getFilterContextUrl:function(){return t.prototype.getFilterContextUrl.apply(this)},setFilterContextUrl:function(r){try{t.prototype.setFilterContextUrl.apply(this,[r])}catch(t){if(t){throw new e(t.getErrorCode())}}},addParameter:function(r,o){try{t.prototype.addParameter.apply(this,[r,o]);return this}catch(t){if(t){throw new e(t.getErrorCode())}}},removeParameter:function(r){try{t.prototype.removeParameter.apply(this,[r]);return this}catch(t){if(t){throw new e(t.getErrorCode())}}},renameParameter:function(r,o){try{t.prototype.renameParameter.apply(this,[r,o]);return this}catch(t){if(t){throw new e(t.getErrorCode())}}},getParameter:function(r){try{return t.prototype.getParameter.apply(this,[r])}catch(t){if(t){throw new e(t.getErrorCode())}}},getParameterNames:function(){return t.prototype.getParameterNames.apply(this)},addSelectOption:function(r,o,n,p,i){try{t.prototype.addSelectOption.apply(this,[r,o,n,p,i]);return this}catch(t){if(t){throw new e(t.getErrorCode())}}},removeSelectOption:function(r){try{t.prototype.removeSelectOption.apply(this,[r]);return this}catch(t){if(t){throw new e(t.getErrorCode())}}},renameSelectOption:function(r,o){try{t.prototype.renameSelectOption.apply(this,[r,o]);return this}catch(t){if(t){throw new e(t.getErrorCode())}}},getSelectOption:function(r){try{return t.prototype.getSelectOption.apply(this,[r])}catch(t){if(t){throw new e(t.getErrorCode())}}},getSelectOptionsPropertyNames:function(){return t.prototype.getSelectOptionsPropertyNames.apply(this)},getPropertyNames:function(){return t.prototype.getPropertyNames.apply(this)},massAddSelectOption:function(r,o){try{t.prototype.massAddSelectOption.apply(this,[r,o]);return this}catch(t){if(t){throw new e(t.getErrorCode())}}},getValue:function(r){try{return t.prototype.getValue.apply(this,[r])}catch(t){if(t){throw new e(t.getErrorCode())}}},isEmpty:function(){return t.prototype.isEmpty.apply(this)},toJSONObject:function(){return t.prototype.toJSONObject.apply(this)},toJSONString:function(){return t.prototype.toJSONString.apply(this)}});return r},true);
/*
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/transaction/BaseController", ["sap/ui/base/EventProvider","sap/ui/generic/app/util/ModelUtil","sap/ui/generic/app/util/DraftUtil","sap/ui/generic/app/util/Queue","sap/base/Log"],function(e,t,r,o,s){"use strict";var n=e.extend("sap.ui.generic.app.transaction.BaseController",{metadata:{publicMethods:["hasClientMessages","triggerSubmitChanges","attachFatalError","detachFatalError","destroy"]},constructor:function(a,u,i){if(!a){throw new Error("No model")}if(a.bUseBatch==false){s.error("sap.ui.generic.app.transaction.BaseController: Only ODataModel with batch mode enabled are supported!");n.prototype.NonBatchEventHandlers={};a.attachRequestCompleted(function(e){var t=e.getParameters().ID;var r=n.prototype.NonBatchEventHandlers[t];if(r&&e.getParameters().success){r.success();delete n.prototype.NonBatchEventHandlers[t]}else if(r&&!e.getParameters().success){r.error();delete n.prototype.NonBatchEventHandlers[t]}})}e.apply(this,arguments);this.sName="sap.ui.generic.app.transaction.BaseController";this._oModel=a;this._oMeta=a.getMetaModel();this._oDraftUtil=new r;this._oModelUtil=new t(a);if(u){this._oQueue=u}else{this._oQueue=new o;this._bOwnsQueue=true}if(i){this._oDraftMergeTimer=i}else{this._oDraftMergeTimer={nTimeoutID:null}}this._initCounts()}});n.prototype.attachFatalError=function(e,t){this.attachEvent("fatalError",e,t)};n.prototype.detachFatalError=function(e,t){this.detachEvent("fatalError",e,t)};n.prototype._prepareCallAction=function(e,r,o){var s,n,a,u,i;if(!e){throw new Error("Invalid Function Import")}o.urlParameters=o.urlParameters||{};o.functionImport=this._oMeta.getODataFunctionImport(e.split("/")[1]);if(!o.functionImport){throw new Error("Unknown Function Import "+e)}if(r){u=t.getEntitySetFromContext(r);s=this._oMeta.getODataEntitySet(u,false);n=this._oMeta.getODataEntityType(s.entityType,false);i=n.key.propertyRef;a=r.getObject()}if(a){this._getActionParameters(a,o,i);this._getAdditionalActionParameters(a,o,i);this._getActionRequestHeaders(r,a,o)}return o};n.prototype._callAction=function(e,t,r){var o=this;if(!r.urlParameters||!r.functionImport){r=this._prepareCallAction(e,t,r)}return new Promise(function(e,t){var s,n;s="/"+r.functionImport.name;n=o._getRequestCallbacks(e,t);o._oModel.callFunction(s,{method:r.functionImport.httpMethod,urlParameters:r.urlParameters,success:n.success,error:n.error,batchGroupId:r.batchGroupId,changeSetId:r.changeSetId,headers:r.headers,expand:r.functionImport.httpMethod==="POST"?r.expand:undefined})})};n.prototype._createFunctionContext=function(e,t){var r={};var o;var s;var n=this;r.result=new Promise(function(e,t){o=n._getRequestCallbacks(e,t)});this._getActionRequestHeaders(e,e.getObject(),t);s=this._oModel.callFunction("/"+t.functionImport.name,{method:t.functionImport.httpMethod,urlParameters:t.urlParameters,success:o.success,error:o.error,batchGroupId:t.batchGroupId,changeSetId:t.changeSetId,headers:t.headers,eTag:n._oModel.getETag(e.getPath()),expand:t.expand});r.context=s.contextCreated();r.abort=s.abort;return r};n.prototype._getActionRequestHeaders=function(e,t,r){var o;if(!r.headers){r.headers={}}if(!r.headers["If-Match"]&&r.functionImport["sap:action-for"]){o=this._oModel.getETag(null,e,t);if(o){r.headers["If-Match"]=o}}};n.prototype._getActionParameters=function(e,t,r){var o,n,a=r.length,u={},i;i=t.functionImport["sap:action-for"];n=function(e){if(t.functionImport.parameter){var r,o=t.functionImport.parameter.length;for(r=0;r<o;r++){if(t.functionImport.parameter[r].name===e){return true}}}return false};if(!t.functionImport.parameter&&i){s.error("Action doesn't have any parameters");throw new Error("Action doesn't have any parameters")}for(o=0;o<a;o++){if(n(r[o].name)){t.urlParameters[r[o].name]=e[r[o].name]}else if(i&&(r[o].name!="IsActiveEntity"||r[o].name!="DraftUUID")){s.error("Action does not contain a equally-named parameter for key property: "+r[o].name);throw new Error("Action does not contain a equally-named parameter for key property: "+r[o].name)}}return u};n.prototype._getAdditionalActionParameters=function(e,t,r){var o,n=0,a;var u=function(e){var t=0,o=r.length;for(t=0;t<o;t++){if(r[t].name===e){return true}}return false};if(t.functionImport.parameter){n=t.functionImport.parameter.length}if(n>r.length){for(o=0;o<n;o++){a=t.functionImport.parameter[o];if(!u(a.name)){var i=a.nullable==="true"?true:false;if(!t.urlParameters.hasOwnProperty(a.name)&&!i){s.error("Unknown parameter "+a.name);throw new Error("Unknown parameter "+a.name)}}}}};n.prototype._read=function(e,t,r){var o=this;var s,n;if(t.readParameters){n=t.readParameters}else if(t.urlParameters){n=t.urlParameters}if(r){var a=o._oModel.requestSideEffects(t.context,{groupId:t.batchGroupId,urlParameters:n});Promise.resolve(a).then(function(e){var t={reason:"SIDE_EFFECT_TARGET"};e.forEach(function(e){e.fireDataReceived(t)})});return a}return new Promise(function(r,a){s=o._getRequestCallbacks(r,a);o._oModel.read(e,{context:t.context,success:s.success,error:s.error,batchGroupId:t.batchGroupId,changeSetId:t.changeSetId,urlParameters:n})})};n.prototype._remove=function(e,t){var r=this;return new Promise(function(o,s){var n=r._getRequestCallbacks(o,s);r._oModel.remove(e,{success:n.success,error:n.error,eTag:"*",batchGroupId:t.batchGroupId,changeSetId:t.changeSetId,headers:t.headers})})};n.prototype._submitChanges=function(e){var t=this;if(!this._checkSubmit(e)){return Promise.resolve({context:e&&e.context})}if(this._oModel.bUseBatch==true){return new Promise(function(r,o){var s=t._getRequestCallbacks(r,o);t._oModel.submitChangesWithChangeHeaders({batchGroupId:e.batchGroupId,success:s.success,error:s.error,eTag:e.eTag,changeHeaders:e.changeHeaders})})}else{return new Promise(function(r,o){var s=t._getRequestCallbacks(r,o);if(e.batchGroupId&&this._oModel.mDeferredRequests&&this._oModel.mDeferredRequests[e.batchGroupId]&&this._oModel.mDeferredRequests[e.batchGroupId].changes){var a=this._oModel.mDeferredRequests[e.batchGroupId].changes[e.changeSetId]||[];for(var u=0;u<a.length;u++){if(a[u].request._aborted==undefined||a[u].request._aborted==false){n.prototype.NonBatchEventHandlers[a[u].request.requestID]={success:s.success,error:s.error}}}}if(e.batchGroupId&&this._oModel.mDeferredRequests&&this._oModel.mDeferredRequests[e.batchGroupId]&&this._oModel.mDeferredRequests[e.batchGroupId].requests){var i=this._oModel.mDeferredRequests[e.batchGroupId].requests;for(var u=0;u<i.length;u++){if(i[u].request._aborted==undefined||i[u].request._aborted==false){n.prototype.NonBatchEventHandlers[i[u].request.requestID]={success:s.success,error:s.error}}}}t._oModel.submitChanges({batchGroupId:e.batchGroupId,eTag:e.eTag})}.bind(this))}};n.prototype._checkSubmit=function(e){if(this._oModel.hasPendingChanges()){e.pendingChanges=true;return true}if(e.forceSubmit&&e.forceSubmit==true){if(e.batchGroupId&&this._oModel.mDeferredRequests&&this._oModel.mDeferredRequests[e.batchGroupId]&&this._oModel.mDeferredRequests[e.batchGroupId].changes){var t=this._oModel.mDeferredRequests[e.batchGroupId].changes;var r=[];var o=[];var s;for(var n in t){if(t.hasOwnProperty(n)){r.push(n)}}for(var a=0;a<r.length;a++){s=this._oModel.mDeferredRequests[e.batchGroupId].changes[r[a]]||[];o=o.concat(s)}for(var a=0;a<o.length;a++){if(o[a].request._aborted==undefined||o[a].request._aborted==false){return true}}}if(e.batchGroupId&&this._oModel.mDeferredRequests&&this._oModel.mDeferredRequests[e.batchGroupId]&&this._oModel.mDeferredRequests[e.batchGroupId].requests){var u=this._oModel.mDeferredRequests[e.batchGroupId].requests||[];for(var a=0;a<u.length;a++){if(u[a].request._aborted==undefined||u[a].request._aborted==false){return true}}}}return false};n.prototype.triggerSubmitChanges=function(e){var t=this,r,o;e=e||{};e.successMsg=e.successMsg||"Action succeeded";e.failedMsg=e.failedMsg||"Action failed";if(e.hasOwnProperty("bStrict")){e.changeHeaders={prefer:e.bStrict?"handling=strict":"handling=lenient"};delete e.bStrict}o=function(e){t.fireEvent("fatalError",{response:e});throw e};if(this._oDraftMergeTimer.nTimeoutID&&!e.keepDraftMergeTimer){clearTimeout(this._oDraftMergeTimer.nTimeoutID);this._oDraftMergeTimer.nTimeoutID=null}r=function(){return t._submitChanges(e).then(function(r){var s=function(e,r){try{t._checkImplicitError({httpResponse:e,responseData:e.data},r);return t._normalizeResponse({httpResponse:e,responseData:e.data},true)}catch(e){o(e)}};var n;var a;var u=[];if(r&&r.responseData&&r.responseData.__batchResponses){if(r.responseData.__batchResponses.length==1&&r.responseData.__batchResponses[0].__changeResponses&&r.responseData.__batchResponses[0].__changeResponses.length==1){return s(r.responseData.__batchResponses[0].__changeResponses[0],e)}for(var i=0;i<r.responseData.__batchResponses.length;i++){n=r.responseData.__batchResponses[i];if(n.__changeResponses){for(var c=0;c<n.__changeResponses.length;c++){a=n.__changeResponses[c];u.push(s(a,e))}}else{u.push(s(n,e))}}}else{try{t._checkImplicitError(r,e);return t._normalizeResponse(r,true)}catch(e){o(e)}}return u},function(e){var r=t._normalizeError(e);o(r)})};return this._oQueue.enqueue(r,{draftSave:e.draftSave})};n.prototype._updateEntity=function(e,t,r){var o=this;return new Promise(function(s,n){var a=o._getRequestCallbacks(s,n);var u={success:a.success,error:a.error,batchGroupId:"changes",changeSetId:"changes"+r};o._oModel.update(e,t,u)})};n.prototype.addOperationToQueue=function(e,t){this._oQueue.enqueue(e,t)};n.prototype.attachBeforeQueueItemProcess=function(e){this._oQueue._attachEvent("beforeQueueItemProcess",e)};n.prototype.detachBeforeQueueItemProcess=function(e){this._oQueue._detachEvent("beforeQueueItemProcess",e)};n.prototype.attachOnQueueCompleted=function(e){this._oQueue._attachEvent("onQueueCompleted",e)};n.prototype.detachOnQueueCompleted=function(e){this._oQueue._detachEvent("onQueueCompleted",e)};n.prototype.attachOnQueueFailed=function(e){this._oQueue._attachEvent("onQueueFailed",e)};n.prototype.detachOnQueueFailed=function(e){this._oQueue._detachEvent("onQueueFailed",e)};n.prototype.hasClientMessages=function(){if(this._oModelUtil.hasClientMessages()){return Promise.reject(new Error("Client messages detected"))}return null};n.prototype._normalizeResponse=function(e,t){if(e&&(e.httpResponse||e.responseData)){return{data:e.responseData,response:e.httpResponse||null,context:t?this._oModelUtil.getContextFromResponse(e.responseData):null}}return e};n.prototype._normalizeError=function(e){if(e&&e.message){return{response:e}}return e};n.prototype._returnPromiseAll=function(e){return Promise.all(e).then(function(e){if(e.length){return e[0]}return e})};n.prototype._atLeastOnePromiseResolved=function(e,t){var r=[];var o=Promise.resolve(null);var s=false;var n=e.length;var a=function(e){if(!t){r.push(e);s=true}else if(n-1>r.length&&t){r.push(e);s=true}};e.forEach(function(e,t){o=o.then(function(){return e}).then(a,function(e){r.push(e)},this)});return o.then(function(){if(s){return Promise.resolve(r)}else{return Promise.reject(r)}})};n.prototype._checkImplicitError=function(e,t){var r,o,s,n=false;if(this._mCounts.requestSent===1&&this._mCounts.requestCompleted===1){n=true}this._initCounts();if(t.pendingChanges&&n){if(e&&e.httpResponse){r=e.httpResponse}if(r&&r.response&&r.response.statusCode){s=parseInt(r.response.statusCode);if(s<200||s>299){o=this._parseError(r);throw this._normalizeError(o)}}}};n.prototype._parseError=function(e){var t={};if(e.message){t.message=e.message}if(e.response){t.statusCode=e.response.statusCode;t.statusText=e.response.statusText;t.headers=e.response.headers;t.responseText=e.response.body}return t};n.prototype._initCounts=function(){this._mCounts={requestSent:0,requestCompleted:0}};n.prototype._getRequestCallbacks=function(e,t){var r=this;this._mCounts.requestSent++;return{success:function(t,o){r._mCounts.requestCompleted++;e({responseData:t,httpResponse:o})},error:function(e){r._mCounts.requestCompleted++;t(e)}}};n.prototype.destroy=function(){if(this._oModelUtil){this._oModelUtil.destroy()}if(this._oQueue&&this._bOwnsQueue){this._oQueue.destroy()}this._oModel=null;this._oMeta=null;this._oDraftUtil=null;this._oModelUtil=null;this._oDraftMergeTimer=null};return n},true);
/*
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/transaction/DraftContext", ["sap/ui/base/Object","sap/ui/generic/app/util/ModelUtil","sap/base/Log"],function(t,e,a){"use strict";var r=t.extend("sap.ui.generic.app.transaction.DraftContext",{metadata:{publicMethods:["isDraftEnabled","isDraftRoot","hasDraft","hasDraftRoot","hasDraftValidationFunction","hasDraftPreparationAction","isTechnicalKey","isSemanticKey","getSemanticKey","checkUpdateOnChange","getODataDraftFunctionImportName","hasDraftAdministrativeData","hasSiblingEntity","destroy","hasPreserveChanges"]},constructor:function(t){if(!t){throw new Error("No model")}this._oModel=t;this._oMeta=t.getMetaModel();this._oModelUtil=new e(t);return this.getInterface()}});r.prototype.isDraftEnabled=function(t){var e=this._getODataDraftEntitySet(t);return!!(e&&e.isDraft)};r.prototype.isDraftRoot=function(t){var e=this._getODataDraftEntitySet(t);return!!(e&&e.isRoot)};r.prototype.hasDraft=function(t){var a=e.getEntitySetFromContext(t);if(a==null){return false}return this.isDraftEnabled(a)};r.prototype.hasDraftRoot=function(t){var a=e.getEntitySetFromContext(t);return this.isDraftRoot(a)};r.prototype.hasDraftValidationFunction=function(t){return!!this.getODataDraftFunctionImportName(t,"ValidationFunction")};r.prototype.hasDraftPreparationAction=function(t){return!!this.getODataDraftFunctionImportName(t,"PreparationAction")};r.prototype.isTechnicalKey=function(t,e){var a,r,o,i,n;if(!t){throw new Error("No entity set")}a=this._oMeta.getODataEntitySet(t);r=this._oMeta.getODataEntityType(a.entityType);o=r.key.propertyRef.length;if(Object.keys(e).length!==o){return false}for(i=0;i<o;i++){n=r.key.propertyRef[i].name;if(!e[n]){return false}}return true};r.prototype.isSemanticKey=function(t,e){var a,r,o;if(this.isDraftEnabled(t)){a=this.getSemanticKey(t);o=a.length;for(r=0;r<o;r++){if(!e[a[r].name]){return false}}return true}return false};r.prototype.getSemanticKey=function(t){var e,a,r,o=[],i,n;if(!t){throw new Error("No entity set")}e=this._oMeta.getODataEntitySet(t);a=this._oMeta.getODataEntityType(e.entityType);r=a["com.sap.vocabularies.Common.v1.SemanticKey"];if(r){n=r.length;for(i=0;i<n;i++){o.push({name:r[i].PropertyPath})}}return o};r.prototype.getODataDraftFunctionImportName=function(t,a){var r,o;r=e.getEntitySetFromContext(t);o=this._getODataDraftEntitySet(r);if(o.oDraft[a]&&o.oDraft[a].String){return o.oDraft[a].String}return null};r.prototype._getODataDraftEntitySet=function(t){var e={},r;if(!t){throw new Error("No entity set")}r=this._oMeta.getODataEntitySet(t);e.ODataEntitySet=r;if(r){if(r["com.sap.vocabularies.Common.v1.DraftRoot"]){e.isDraft=true;e.isRoot=true;e.oDraft=r["com.sap.vocabularies.Common.v1.DraftRoot"]}else if(r["com.sap.vocabularies.Common.v1.DraftNode"]){e.isDraft=true;e.isRoot=false;e.oDraft=r["com.sap.vocabularies.Common.v1.DraftNode"]}}else{a.warning("EntitySet "+t+" is not available in the main model")}return e};r.prototype.hasDraftAdministrativeData=function(t){return this._hasNavigationProperty(t,"DraftAdministrativeData")};r.prototype.hasSiblingEntity=function(t){return this._hasNavigationProperty(t,"SiblingEntity")};r.prototype._hasNavigationProperty=function(t,e){var a,r,o,i;a=this._oMeta.getODataEntitySet(t);r=this._oMeta.getODataEntityType(a.entityType);if(r.navigationProperty){i=r.navigationProperty.length;for(o=0;o<i;o++){if(r.navigationProperty[o].name===e){return true}}}return false};r.prototype.hasPreserveChanges=function(t){var e=this._oMeta.getODataFunctionImport(this.getODataDraftFunctionImportName(t,"EditAction"));if(e&&e.parameter){for(var a=0;a<e.parameter.length;a++){var r=e.parameter[a];if(r.mode==="In"&&r.name==="PreserveChanges"){return true}}}return false};r.prototype.destroy=function(){if(this._oModelUtil){this._oModelUtil.destroy()}this._oModelUtil=null;this._oModel=null;this._oMeta=null};return r},true);
/*
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/transaction/DraftController", ["sap/base/util/merge","./BaseController","./DraftContext","sap/base/Log","sap/ui/model/Context","sap/ui/generic/app/util/ActionUtil"],function(t,e,r,n,i,o){"use strict";var a=e.extend("sap.ui.generic.app.transaction.DraftController",{metadata:{publicMethods:["getDraftContext","getDraftForActiveEntity","createNewDraftEntity","createEditDraftEntity","validateDraftEntity","validateDraft","prepareDraft","prepareDraftEntity","saveAndPrepareDraftEntity","activateDraftEntity","isActiveEntity","hasActiveEntity","destroy","discardDraft"]},constructor:function(t,r,n){e.apply(this,[t,r,n]);this.sName="sap.ui.generic.app.transaction.DraftController";this._oContext=null}});a.prototype.getDraftContext=function(){if(!this._oContext){this._oContext=new r(this._oModel)}return this._oContext};a.prototype.createDraft=function(t,e,r){var n=this;if(!t){throw new Error("No entity set")}r=r||{};return new Promise(function(t,i){var o=function(e,r){t({responseData:e,httpResponse:r})};var a;var c=function(t){var e=a.getPath()?[a.getPath()]:[];n._oModel.resetChanges(e,undefined,true);i(t)};a=n._oModel.createEntry(e,{properties:r.predefinedValues,success:o,error:c,batchGroupId:r.batchGroupId,changeSetId:r.changeSetId,canonicalRequest:!!r.canonicalRequest,expand:r.expand})})};a.prototype.validateDraft=function(t,e){if(!t.getModel().getObject(t.getPath()).IsActiveEntity){var r=this.getDraftContext().getODataDraftFunctionImportName(t,"ValidationFunction");return this._callAction(r,t,e)}else{return Promise.resolve()}};a.prototype.prepareDraft=function(t,e){if(!t.getModel().getObject(t.getPath()).IsActiveEntity){var r;e=e||{};e.urlParameters=e.urlParameters||{};r=this.getDraftContext().getODataDraftFunctionImportName(t,"PreparationAction");return this._callAction(r,t,e)}else{return Promise.resolve()}};a.prototype.activateDraft=function(t,e,r){var n=this.prepareDraft(t,e);var i=this.getDraftContext().getODataDraftFunctionImportName(t,"ActivationAction");var o=this._callAction(i,t,r);return Promise.all([n,o])};a.prototype.editDraft=function(t,e){var r=this.getDraftContext().getODataDraftFunctionImportName(t,"EditAction");if(r){return this._callAction(r,t,e)}throw new Error(t?"No Edit action defined for the given context":"No context provided for the Edit action")};a.prototype.discardDraft=function(e,r){if(!e){throw new Error("No context")}var n={};t(n,r);var i=this.getDraftContext().getODataDraftFunctionImportName(e,"DiscardAction");if(i){return this._callAction(i,e,n)}return this._remove(e.getPath(),n)};a.prototype.getDraftForActive=function(t,e){var r=this;if(!t){throw new Error("No context")}e=e||{};e.urlParameters={$expand:"SiblingEntity"};return this._read(t.getPath(),e).then(function(t){if(t.responseData&&t.responseData.hasOwnProperty("SiblingEntity")){t.context=r._oModel.getContext("/"+r._oModel.getKey(t.responseData.SiblingEntity));return t}throw new Error("No draft entity could be found")})};a.prototype.getDraftForActiveEntity=function(t){var e,r,n=this,i={batchGroupId:"Changes",changeSetId:"Changes",noShowSuccessToast:true,forceSubmit:true};e=this.getDraftForActive(t,i).then(function(t){return t},function(t){throw n._normalizeError(t)});r=this.triggerSubmitChanges(i);return this._returnPromiseAll([e,r])};a.prototype.createNewDraftEntity=function(t,e,r,a,c){var s=this;c=c||{};c.fnSetBusy=c.fnSetBusy||Function.prototype;var u="Changes";var f={predefinedValues:r,batchGroupId:u,changeSetId:u,canonicalRequest:a,expand:c.sRootExpand};var h=c.bUseNewActionForCreate&&new i(s._oModel,e);var d=h&&s.getDraftContext().getODataDraftFunctionImportName(h,"NewAction");var l=d&&s._oMeta.getODataFunctionImport(d);var p;if(l){var v=sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app");var g=l["com.sap.vocabularies.Common.v1.Label"]&&l["com.sap.vocabularies.Common.v1.Label"].String||(c.oFunctionImportDialogInfo?c.oFunctionImportDialogInfo.getTitleText():v.getText("DIALOG_TITLE_NEW_ACTION_FOR_CREATE"));var y=c.oFunctionImportDialogInfo?c.oFunctionImportDialogInfo.getActionButtonText():v.getText("DIALOG_ACTION_BUTTON_NEW_ACTION_FOR_CREATE");var m=s.getDraftContext().isDraftEnabled(t);var D=new o({controller:c.oController,applicationController:c.oApplicationController,contexts:[h],functionImport:l,functionImportPath:d,isDraftEnabled:m,isCreateAction:true,contextIndependentParameterData:r,expand:c.sRootExpand,operationGrouping:undefined,handleFocus:c.handleFocus});D.setActionLabel(g);D.setActionButtonText(y);p=D.call(true).then(function(t){c.fnSetBusy(t.executionPromise);return t.executionPromise})}else{p=this.createDraft(t,e,f);c.fnSetBusy(p)}var E=p.then(function(t){var e=Array.isArray(t)?t[0]:t;return s._normalizeResponse(e.response||e,true)},function(t){var e=Array.isArray(t)?t[0].error||t[0].response:t;var r=e?s._normalizeError(e):null;throw r});function A(t){var e,r,i,o=s._normalizeResponse(t,true);if(o.context){i=o.context.getObject()}if(!i){n.error("Activate function returned no entity");return Promise.reject(new Error("Activate function returned no entity"))}e=s._oDraftUtil.isActiveEntity(i);if(e){n.error("New draft entity is not marked as draft - isActiveEntity = "+e);return Promise.reject("New draft entity is not marked as draft - isActiveEntity = "+e)}r=s._oDraftUtil.hasDraftEntity(i);if(r){n.error("Wrong value for HasTwin of new draft entity - HasDraftEntity = "+r);return Promise.reject(new Error("Wrong value for HasTwin of new draft entity - HasDraftEntity = "+r))}return o}var _;if(c.bUseNewActionForCreate&&l){_=E.then(A)}else{var C={batchGroupId:u,changeSetId:u,noShowSuccessToast:true,forceSubmit:true,failedMsg:"New draft document could not be created"};_=this.triggerSubmitChanges(C).then(function(){return E.then(A)})}return this._returnPromiseAll([E,_])};a.prototype.createEditDraftEntity=function(t,e,r){var i,o,a=this,c={batchGroupId:"Changes",changeSetId:"Changes",successMsg:"Draft for document was created",failedMsg:"Could not create draft for document",forceSubmit:true,context:t,expand:r};if(e){c.urlParameters={PreserveChanges:true}}i=this.editDraft(t,c).then(function(t){var e,r,i;i=a._normalizeResponse(t,true);if(i.context){r=i.context.getObject()}if(!r){n.error("Activate function returned no entity");return Promise.reject(new Error("Activate function returned no entity"))}e=a._oDraftUtil.isActiveEntity(r);if(e){n.error("Edit function returned an entity which is not a draft instance - IsActiveEntity = "+e);return Promise.reject(new Error("Returned entity ist not a draft instance - IsActiveEntity = "+e))}return i},function(t){var e=a._normalizeError(t);throw e});o=this.triggerSubmitChanges(c);return this._returnPromiseAll([i,o])};a.prototype.validateDraftEntity=function(t){var e,r,n=this,i={batchGroupId:"Changes",changeSetId:"Changes",context:t,forceSubmit:true};e=this.validateDraft(t,i).then(function(t){return n._normalizeResponse(t,true)},function(t){var e=n._normalizeError(t);throw e});r=this.triggerSubmitChanges(i);return this._returnPromiseAll([e,r])};a.prototype.saveAndPrepareDraftEntity=function(t,e){var r,i,o=this;e=e||{};e.batchGroupId="Changes";e.changeSetId="Changes";e.successMsg="Saved";e.failedMsg="Save failed";e.context=t;e.forceSubmit=true;r=this.prepareDraft(t,e).then(function(t){var e,r,i;i=o._normalizeResponse(t,true);if(i.context){r=i.context.getObject()}if(!r){n.error("Activate function returned no entity");return Promise.reject(new Error("Activate function returned no entity"))}e=o._oDraftUtil.isActiveEntity(r);if(e){n.error("Prepare function returned an entity which is not a draft instance - IsActiveEntity = "+e);return Promise.reject(new Error("Returned entity ist not a draft instance - IsActiveEntity = "+e))}return i},function(t){var e=o._normalizeError(t);throw e});if(e.binding){e.binding.refresh(true,"Changes")}i=this.triggerSubmitChanges(e);return this._returnPromiseAll([r,i])};a.prototype.prepareDraftEntity=function(t){var e=this;return this.prepareDraft(t).then(function(t){var r,i;r=e._normalizeResponse(t,true);i=r.context.getObject();if(e._oDraftUtil.isActiveEntity(i)){n.error("Prepare function returned an entity which is not a draft instance - IsActiveEntity = "+true);return Promise.reject(new Error("Returned entity ist not a draft instance - IsActiveEntity = "+true))}return r},function(t){var r=e._normalizeError(t);throw r})};a.prototype.activateDraftEntity=function(t,e,r){var i,o;var a=this,c={batchGroupId:"Changes",successMsg:"Document activated",failedMsg:"Activation of document failed",forceSubmit:true,context:t};var s=Object.assign({},c);c.changeSetId="Preparation";s.changeSetId="Activation";s.expand=r;var u=e?"lenient":"strict";s.headers={Prefer:"handling="+u};var f=this._oModel.getETag(t.getPath());if(f){c.headers={"If-Match":"*"};s.headers["If-Match"]="*"}var h=new Promise(function(e,r){var u=function(){a.detachOnQueueCompleted(u);i=a.activateDraft(t,c,s).then(function(t){var e,r,i;var o=t[1];i=a._normalizeResponse(o,true);if(i.context){r=i.context.getObject()}if(!r){n.error("Activate function returned no entity");return Promise.reject(new Error("Activate function returned no entity"))}e=a._oDraftUtil.isActiveEntity(r);if(!e){n.error("Activate function returned an entity which is still a draft instance - IsActiveEntity = "+e);return Promise.reject(new Error("Returned entity is still a draft instance - IsActiveEntity = "+e))}return i},function(t){var e=a._normalizeError(t);throw e});o=a.triggerSubmitChanges(c);e(a._returnPromiseAll([i,o]))};if(a._oQueue._aQueue.length){a.attachOnQueueCompleted(u)}else{u(this)}});return h};a.prototype.isActiveEntity=function(t){if(this.getDraftContext().hasDraft(t)){return this._oDraftUtil.isActiveEntity(t.getObject())}return true};a.prototype.hasActiveEntity=function(t){return this._oDraftUtil.hasActiveEntity(t.getObject())};a.prototype.destroy=function(){if(this._oContext){this._oContext.destroy()}this._oContext=null;this._oModel=null;e.prototype.destroy.apply(this,[])};return a},true);
/*
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/transaction/TransactionController", ["./BaseController","./DraftController","sap/ui/generic/app/util/ModelUtil","sap/base/util/extend","sap/base/Log"],function(t,e,r,n,a){"use strict";var i=t.extend("sap.ui.generic.app.transaction.TransactionController",{metadata:{publicMethods:["destroy","setBatchStrategy","getDraftController","invokeAction","editEntity","deleteEntity","deleteEntities","propertyChanged","hasClientValidationErrors","resetChanges","getDefaultValues","getDefaultValuesFunction","updateMultipleEntities"]},constructor:function(e,r,n,a){t.apply(this,[e,r,a]);this.sName="sap.ui.generic.app.transaction.TransactionController";this._oDraft=null;n=n||{};if(!n.noBatchGroups){e.setDeferredGroups(["Changes"]);e.setChangeGroups({"*":{groupId:"Changes",changeSetId:"Changes",single:false}})}return this.getInterface()}});i.prototype.setBatchStrategy=function(t){var e,r=this._oModel.getChangeGroups();for(e in r){r[e].single=t}this._oModel.setChangeGroups(r)};i.prototype.getDraftController=function(){if(!this._oDraft){this._oDraft=new e(this._oModel,this._oQueue,this._oDraftMergeTimer)}return this._oDraft};i.prototype.editEntity=function(t,e,n){var a=this;return new Promise(function(i){var o,s;o=a.getDraftController().getDraftContext();s=r.getEntitySetFromContext(t);if(o.isDraftEnabled(s)&&a._oDraftUtil.isActiveEntity(t.getObject())){return i(a.getDraftController().createEditDraftEntity(t,e,n))}return i({context:t})})};i.prototype.deleteEntity=function(t,e,r){var n,a,i=this,o,s,l;if(typeof t=="string"){o=t}else if(typeof t=="object"&&t instanceof sap.ui.model.Context){s=t;o=s.getPath()}e=e||{};Object.assign(e,{batchGroupId:"Changes",changeSetId:"Changes",successMsg:"Changes were discarded",failedMsg:"Discarding of changes failed",forceSubmit:true,context:s});var u=r?"lenient":"strict";e.headers={Prefer:"handling="+u};if(i._oModel.getObject(o)&&i._oDraftUtil.isActiveEntity(i._oModel.getObject(o))!==undefined&&!i._oDraftUtil.isActiveEntity(i._oModel.getObject(o))){if(!s){s=new sap.ui.model.Context(this._oModel,o)}l=i.getDraftController();n=l.discardDraft(s,e)}else{n=this._remove(o,e)}n.then(function(t){return i._normalizeResponse(t,true)},function(t){var e=i._normalizeError(t);throw e});a=this.triggerSubmitChanges(e);return this._returnPromiseAll([n,a])};i.prototype.deleteEntities=function(t,e){var r,n=[],a=this,i,o,s;e=e||{};var l=e.bIsStrict?"strict":"lenient";e.headers=e.headers||{};e.headers.Prefer="handling="+l;Object.assign(e,{batchGroupId:"Changes",changeSetId:"Changes",successMsg:"Changes were discarded",failedMsg:"Discarding of changes failed",forceSubmit:true});var u=function(t){return a._normalizeResponse(t,true)};var h=function(t){var e=a._normalizeError(t);throw e};for(var c=0;c<t.length;c++){o=null;if(typeof t[c]=="string"){i=t[c]}else if(typeof t[c]=="object"&&t[c]instanceof sap.ui.model.Context){o=t[c];i=o.getPath()}if(a._oModel.getObject(i)&&a._oDraftUtil.isActiveEntity(a._oModel.getObject(i))!==undefined&&!a._oDraftUtil.isActiveEntity(a._oModel.getObject(i))){e.changeSetId="Changes";if(!o){o=new sap.ui.model.Context(this._oModel,i)}s=a.getDraftController();r=s.discardDraft(o,e).then(u,h)}else{e.changeSetId="ActiveChanges";r=this._remove(i,e).then(u,h)}n.push(r)}r=this.triggerSubmitChanges(e);n.push(r);return this._atLeastOnePromiseResolved(n,true)};i.prototype.invokeAction=function(t,e,r){var n=this,a,i;a=this.hasClientMessages();if(a){return a}r={batchGroupId:"Changes",changeSetId:"Changes",successMsg:"Call of action succeeded",failedMsg:"Call of action failed",urlParameters:r.urlParameters,forceSubmit:true,context:e};a=this._callAction(t,e,r).then(function(t){return n._normalizeResponse(t,true)},function(t){var e=n._normalizeError(t);throw e});this._oModel.refresh(true,false,"Changes");i=this.triggerSubmitChanges(r);return this._returnPromiseAll([a,i])};i.prototype.resetChanges=function(t){this._oModel.resetChanges(t)};i.prototype.getDefaultValues=function(t,e,i,o){var s,l,u=t[0],h=this;if(!(u instanceof sap.ui.model.Context)){throw new Error("No context")}var c=r.getEntitySetFromContext(u);if(!c){throw new Error("No EntitySet found in the current context")}var f=u.getModel();var g=f.getMetaModel();var d=g.getODataEntityType(g.getODataEntitySet(c).entityType);if(i){var p=i.split("/");if(p.length>1){try{var v=this.getImmediateParentContextDetails(d,u,i);d=v.entityType;u=v.context;i=v.relativeChildNavigationProperty}catch(t){a.error("Unable to fetch the default values: "+t.message);return e}}s=d.navigationProperty.find(function(t){return t.name===i});var y=g.getODataEntityType(g.getODataAssociationEnd(d,i).type);l=y.property}else if(o){s=g.getODataFunctionImport(o);l=s.parameter}else{s=g.getODataEntitySet(c);l=d.property}var m=this.getDefaultValuesFunction(s);if(m){var C=g.getODataFunctionImport(m);if(t.length>1&&C.parameter){a.error("Parameterized DefaultValuesFunction not to be called with multiple selections");return e}var D={successMsg:"Call of action succeeded",failedMsg:"Call of action failed",urlParameters:null,forceSubmit:true,context:u,headers:{},batchGroupId:"DefaultValues",keepDraftMergeTimer:true};var _=this._oModel.getETag(u.getPath());if(_){D.headers={"If-Match":"*"}}o=C.name;var E="/"+o;return this._callAction(E,u,D).then(function(t){if(t.httpResponse.statusCode==="200"){var r=t.responseData[o]||t.responseData;var a={};l.forEach(function(t){if(r.hasOwnProperty(t.name)){a[t.name]=r[t.name]}});return n({},e,a)}return e}).then(function(t){return h.triggerSubmitChanges(D).then(function(){return t})})}return e};i.prototype.getImmediateParentContextDetails=function(t,e,r){var n=r.split("/");var a=e.getModel();var i=a.getMetaModel();var o=e;var s=t;var l;var u;var h;if(n.length<2){throw new Error("This method supports only the nested navigation property!")}for(var c=0;c<n.length;c++){var f=n[c];if(c===n.length-1){h=f;continue}var g=i.getODataAssociationEnd(s,f);if(g&&g.multiplicity.endsWith("1")){l=a.createBindingContext(f,o)}else{throw new Error("The entity type '"+s.name+"' and the navigation property '"+f+"' don't have 1..1 relationship")}if(!l){var d=o.getPath()+"/"+f;throw new Error("The context with the path '"+d+"' is not available")}u=i.getODataEntityType(g.type);o=l;s=u}return{context:l,entityType:u,relativeChildNavigationProperty:h}};i.prototype.getDefaultValuesFunction=function(t){var e=t["com.sap.vocabularies.Common.v1.DefaultValuesFunction"];return e&&e.String};i.prototype.updateMultipleEntities=function(t){var e=[];var r=this;var n=function(t){return r._normalizeResponse(t,true)};var a={batchGroupId:"Changes",changeSetId:"Changes",successMsg:"Changes saved",failedMsg:"Saving of changes failed",forceSubmit:true};var i=function(t){var e=r._normalizeError(t);throw e};for(var o=0;o<t.length;o++){var s=this._updateEntity(t[o].sContextPath,t[o].oUpdateData,o).then(n,i);e.push(s)}return this._atLeastOnePromiseResolved(e).finally(function(){r.triggerSubmitChanges(a)})};i.prototype.destroy=function(){t.prototype.destroy.apply(this,[]);if(this._oDraft){this._oDraft.destroy()}this._oDraft=null};return i},true);
/*
 * ! SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/util/ActionUtil", ["sap/ui/base/ManagedObject","sap/m/MessageBox","sap/ui/comp/smartform/SmartForm","sap/ui/comp/smartform/Group","sap/ui/comp/smartform/GroupElement","sap/ui/comp/smartfield/SmartField","sap/ui/comp/smartfield/SmartLabel","sap/m/Dialog","sap/m/Button","sap/base/strings/formatMessage","sap/ui/core/Lib","sap/ui/generic/app/util/ModelUtil","sap/ui/core/CustomData","sap/base/util/extend"],function(e,t,a,n,i,o,r,s,l,u,c,p,d,f){"use strict";var m=e.extend("sap.ui.generic.app.util.ActionUtil",{metadata:{properties:{controller:{type:"object",group:"Misc",defaultValue:null},applicationController:{type:"object",group:"Misc",defaultValue:null},contexts:{type:"object",group:"Misc",defaultValue:null},functionImport:{type:"object",group:"Misc",defaultValue:null},functionImportPath:{type:"string",group:"Misc",defaultValue:null},entityType:{type:"object",group:"Misc",defaultValue:null},actionLabel:{type:"string",group:"Misc",defaultValue:null},actionButtonText:{type:"string",group:"Misc",defaultValue:null},isDraftEnabled:{type:"boolean",group:"Misc",defaultValue:false},isCreateAction:{type:"boolean",group:"Misc",defaultValue:false},contextIndependentParameterData:{type:"object",group:"Misc",defaultValue:null},expand:{type:"string",group:"Misc",defaultValue:undefined},successCallback:{type:"function",group:"Misc",defaultValue:null},operationGrouping:{type:"string",group:"Misc",defaultValue:null},isBoundAction:{type:"boolean",group:"Misc",defaultValue:false},handleFocus:{type:"function",group:"Misc",defaultValue:null},actionParameters:{type:"object",group:"Misc",defaultValue:{}},invokedByExtensionApi:{type:"boolean",group:"misc",defaultValue:false}}}});m.prototype.call=function(e){return new Promise(function(t,a){let n=this.getFunctionImport();this._callMethodPromise={resolve:t,reject:a};if(this.getInvokedByExtensionApi()){let t=e?{Prefer:"handling=strict"}:null;this._call(this.getActionParameters(),this.getIsDraftEnabled(),t)}else{if(!n){a("Call method invoked without setting the functionImport property of ActionUtil instance.")}let t=!!n["sap:action-for"];this.setIsBoundAction(t);if(t){let e=this.getContexts();if(!e||e.length===0){a("Bound action is executed without a context.")}let t=p.getEntityTypeFromContext(e[0]);this.setEntityType(t)}if(this._isActionCritical()&&e){this._displayCriticalActionDialog()}else{this._prepareParamsAndInvokeAction(e)}}}.bind(this))};m.prototype._displayCriticalActionDialog=function(){var e;var a="ACTION_CONFIRM|"+this.getFunctionImport().name;var n=this.getController();var i=n.getOwnerComponent();var o=i.getAppComponent();var r=o.getModel("i18n");var s=r&&r.getResourceBundle();if(s&&s.hasText(a)){e=s.getText(a)}else{e=c.getResourceBundleFor("sap.ui.generic.app").getText("ACTION_CONFIRM");e=u(e,this.getActionLabel())}t.confirm(e,{title:this.getActionLabel(),onClose:function(e){if(e==="OK"){this._prepareParamsAndInvokeAction(true)}else if(e==="CANCEL"){this._callMethodPromise.reject("Action execution cancelled by user.")}}.bind(this),sClass:this._getCompactModeStyleClass()})};m.prototype._prepareParamsAndInvokeAction=function(e){this._prepareParameters().then(function(t){this._initiateCall(t,e)}.bind(this))};m.prototype._prepareParameters=function(){return new Promise(function(e){var t=this.getFunctionImport();var a={inParameters:{},contextSpecificParameterData:[],hasParametersRequiringUserInput:false,defaultValues:null};var n=this.getContexts();var i=this.getContextIndependentParameterData()||{};var o=this.getApplicationController().getTransactionController();var r=t.name;var s=function(e){a.defaultValues=e};var l=function(){var o={};var r=this._getKeys();i=this.getContextIndependentParameterData()||{};if(t.parameter){for(var s=0;s<t.parameter.length;s++){var l=t.parameter[s];var u=l.name;this._checkAndUpdateLabelAnnotation(l,this.getEntityType(),this.getContexts()[0]);if(u==="ResultIsActiveEntity"){if(l.nullable!=="false"){continue}}var c=!!r[u];if(l.mode.toUpperCase()==="IN"){o[u]={metadata:l,isKey:c};var p=i[u]||a.defaultValues?.[u];if(this.getIsBoundAction()&&(n.length===1||c)||l.hasOwnProperty("com.sap.vocabularies.UI.v1.Hidden")||p){for(var d=0;d<n.length;d++){this.initializeContextSpecificParameterData(n[d],d,a,p,u)}}a.inParameters=o;a.hasParametersRequiringUserInput=a.hasParametersRequiringUserInput||this._checkParameterRelevant4UserInput(a,o[u])}}}e(a)}.bind(this);var u=o.getDefaultValues(n,null,undefined,r);if(u instanceof Promise){u.then(s,s).then(l)}else{Promise.resolve().then(function(){l()})}}.bind(this))};m.prototype.initializeContextSpecificParameterData=function(e,t,a,n,i){var o;var r=e.getObject();if(!a.contextSpecificParameterData[t]){a.contextSpecificParameterData[t]={}}if(n||n===""){o=n}else if(i==="ResultIsActiveEntity"){o=false}else if(r&&r.hasOwnProperty(i)){o=r[i]}a.contextSpecificParameterData[t][i]=o};m.prototype._getKeys=function(){const e={};const t=this.getEntityType();if(t){t.key.propertyRef.forEach(t=>{e[t.name]=true})}return e};m.prototype._getCompactModeStyleClass=function(){if(this.getController().getView().$().closest(".sapUiSizeCompact").length){return"sapUiSizeCompact"}return""};m.prototype._cleanUpContext=function(e){const t=e.map(e=>e.sPath);const a=e[0].getModel();a.resetChanges(t,true,true)};m.prototype._isActionCritical=function(){var e=this.getFunctionImport()["com.sap.vocabularies.Common.v1.IsActionCritical"];if(!e){return false}if(e.Bool===undefined){return true}return this._toBoolean(e.Bool)};m.prototype._toBoolean=function(e){if(typeof e==="string"){var t=e.toLowerCase();return!(t==="false"||t===""||t===" ")}return!!e};m.prototype._initiateCall=function(e,t){var a=t?"strict":"lenient";var n={Prefer:"handling="+a};var i=this.getContextIndependentParameterData()||{};var r=this.getIsDraftEnabled();if(!e.hasParametersRequiringUserInput||this._checkContextIndependentParameterDataForInParams(e)){var u=f(e.defaultValues,i);this._call(u,r,n,this.expand)}else if(Object.keys(e.inParameters).length>0){var p=this.getApplicationController();var d=r?p.synchronizeDraftAsync():Promise.resolve();d.then(function(){var a={urlParameters:{},headers:n,expand:this.expand};var i=this.getContexts();var r=p._getChangeSetFunc(i,this.getOperationGrouping());var u=i.map(function(e,t){a.changeSetId=r(t);return p.getNewActionContext(this.getFunctionImportPath(),e,a)}.bind(this));var d=u.map(function(e){return e.context});Promise.all(d).then(function(a){a.forEach(function(t,a){var n=e.contextSpecificParameterData[a];for(var i in n){t.getModel().setProperty(i,n[i],t,true)}});if(t){var n=this._buildParametersForm(e,a[0]);var r=false;var p=new s({title:this.getActionLabel(),content:[n.form],beginButton:new l({text:this.getActionButtonText()||this.getActionLabel(),type:"Emphasized",press:function(){var o=n.form?n.form.check():Promise.resolve();o.then(function(){if(n.hasNoClientErrors()){if(this.getHandleFocus()&&p&&p.oPopup&&p.oPopup._oPreviousFocus&&p.oPopup._oPreviousFocus.sFocusId){this.getHandleFocus()(p.oPopup._oPreviousFocus.sFocusId);p.oPopup._oPreviousFocus=null}p.close();r=this._triggerActionPromise(u,i,e,a,t)}}.bind(this))}.bind(this)}),endButton:new l({text:c.getResourceBundleFor("sap.ui.generic.app").getText("ACTION_CANCEL"),press:function(){u[0].abort();p.close();this._cleanUpContext(a);this._callMethodPromise.reject();r=true}.bind(this)}),afterClose:function(){p.destroy();if(!r){this._callMethodPromise.reject()}}.bind(this)}).addStyleClass("sapUiNoContentPadding");p.addStyleClass(this._getCompactModeStyleClass());p.setModel(a[0].getModel());if(this.getController().getView().getModel("@i18n")){p.setModel(this.getController().getView().getModel("@i18n"),"@i18n")}var d=p.getAggregation("content")[0].mAggregations["content"];var f=d.getFormContainers()[0].getFormElements();var m=f.some(function(e){var t=e.getFields()[0];return t instanceof o&&t.getVisible()===true});if(f.length===0||!m){this._triggerActionPromise(u,i,e,a,t);p.destroy()}else{p.open()}}else{this._triggerActionPromise(u,i,e,a)}}.bind(this))}.bind(this))}else{this._call(null,r,n,null)}};m.prototype._triggerActionPromise=function(e,t,a,n,i){const o={};this._callMethodPromise.resolve({executionPromise:this.getApplicationController()._newPromiseAll(e.map(function(e){return e.result})).then(function(e){this._bExecutedSuccessfully=this.getApplicationController()._checkAtLeastOneSuccess(t,e);if(i){e.forEach(function(e){e.userEnteredAdditionalParams=o})}if(this._bExecutedSuccessfully){return e}else{this._cleanUpContext(n);return Promise.reject(e)}}.bind(this),function(e){this._bExecutedSuccessfully=false;e.forEach(function(e){e.userEnteredAdditionalParams=o});throw e}.bind(this))});var r=n[0].getObject();var s=Object.values(a.inParameters);s.forEach(function(e){if(this._checkParameterRelevant4UserInput(a,e)){var t=e.metadata;var i=r[t.name]===null?undefined:r[t.name];if(i===undefined){if(t.type==="Edm.Boolean"){i=false}n[0].getModel().setProperty(t.name,i,n[0],true)}o[t.name]=i;for(var s=1;s<n.length;s++){var l=n[s];l.getModel().setProperty(t.name,i,l,true)}}}.bind(this));var l=this.getFunctionImport().name;t.forEach(function(e,t){this.getApplicationController().submitActionContext(e,n[t],l)}.bind(this));return i};m.prototype._call=function(e,t,a,n){let i=this.getContexts();const o=this.getApplicationController();let r={urlParameters:e,triggerChanges:t};if(this.getInvokedByExtensionApi()){if(a){r.headers=a}if(this.getOperationGrouping()){r.operationGrouping=this.getOperationGrouping()}}else{Object.assign(r,{headers:a,expand:n,operationGrouping:this.getOperationGrouping()})}this._callMethodPromise.resolve({executionPromise:o.invokeActions(this.getFunctionImportPath(),i,r).then(function(e){this._bExecutedSuccessfully=true;return e}.bind(this),function(e){this._bExecutedSuccessfully=false;throw e}.bind(this))})};m.prototype._buildParametersForm=function(e,t){var s=new a({editable:true,validationMode:"Async"});s.setBindingContext(t);var l;var u=[];var c;var p=new n;const f=Object.values(e.inParameters);for(var m=0;m<f.length;m++){var h=f[m].metadata;if(!this._checkParameterRelevant4UserInput(e,f[m])){continue}if(!h["com.sap.vocabularies.UI.v1.TextArrangement"]){h["com.sap.vocabularies.UI.v1.TextArrangement"]={EnumMember:"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly"}}l=new o("ActionUtil-"+this.getFunctionImportPath().replace("/","-")+"-"+h.name,{value:"{"+h.name+"}",textLabel:this._getParameterName(h),width:"100%"});l.addCustomData(new d({key:"defaultTextInEditModeSource",value:h&&h["com.sap.vocabularies.Common.v1.ValueListForValidation"]!==undefined?"ValueList":"ValueListNoValidation"}));l.addCustomData(new d({key:"defaultInputFieldDisplayBehaviour",value:"descriptionOnly"}));if(h["com.sap.vocabularies.Common.v1.ValueListWithFixedValues"]?.Bool){l.setFixedValueListValidationEnabled(true)}u.push(l);c=new r;c.setLabelFor(l);var g=new i;g.addElement(l);p.addGroupElement(g)}s.addGroup(p);var v=function(){var e=true;for(var t=0;t<u.length;t++){if(u[t].getValueState()!="None"){e=false;break}}return e};return{form:s,hasNoClientErrors:v}};m.prototype._checkParameterRelevant4UserInput=function(e,t){const a=t.metadata;var n=a["com.sap.vocabularies.UI.v1.Hidden"];return!(n&&!n.Path&&n.Bool!=="false"||t.isKey&&this.getIsBoundAction())};m.prototype._getParameterName=function(e){return e["com.sap.vocabularies.Common.v1.Label"]?e["com.sap.vocabularies.Common.v1.Label"].String:e.name};m.prototype._checkAndUpdateLabelAnnotation=function(e,t,a){if(t&&e&&!e["com.sap.vocabularies.Common.v1.Label"]){var n=a.getModel().getMetaModel().getODataProperty(t,e.name,false);if(n&&n["com.sap.vocabularies.Common.v1.Label"]){e["com.sap.vocabularies.Common.v1.Label"]=n["com.sap.vocabularies.Common.v1.Label"]}}};m.prototype._checkContextIndependentParameterDataForInParams=function(e){var t=this.getContextIndependentParameterData()||{};var a=Object.values(e.inParameters);for(var n=0;n<a.length;n++){var i=a[n].metadata.name;if(!t[i]){return false}}return true};m.prototype.getExecutedSuccessfully=function(){return this._bExecutedSuccessfully};return m});
/*
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/util/DraftUtil", [],function(){"use strict";var t=function(){};t.prototype.isActiveEntity=function(t){return t.IsActiveEntity};t.prototype.hasDraftEntity=function(t){return t.HasDraftEntity};t.prototype.hasActiveEntity=function(t){return t.HasActiveEntity};t.prototype.destroy=function(){};return t},true);
/*
 * ! SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/util/MessageUtil", ["sap/ui/core/library","sap/ui/core/message/Message","sap/ui/core/message/MessageType","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/ui/core/syncStyleClass","sap/ui/core/Fragment","sap/ui/core/Messaging"],function(e,t,r,s,a,n,o,i){"use strict";const u=e.ValueState;var c={badRequest:"400",unauthorized:"401",forbidden:"403",notFound:"404",methodNotAllowed:"405",preconditionFailed:"428",internalServerError:"500",notImplemented:"501",badGateway:"502",serviceUnavailable:"503",gatewayTimeout:"504",httpVersionNotSupported:"505"};var l={callAction:"callAction",addEntry:"addEntry",saveEntity:"saveEntity",deleteEntity:"deleteEntity",editEntity:"editEntity",modifyEntity:"modifyEntity",activateDraftEntity:"activateDraftEntity",saveAndPrepareDraftEntity:"saveAndPrepareDraftEntity",getCollection:"getCollection"};var g;function p(e){var t=[],r;var s=i.getMessageModel().getData();var a=[];for(var n=0;n<s.length;n++){r=s[n];var o=r.technicalDetails&&r.technicalDetails.statusCode==="404"&&r.type==="Error";if(r.persistent){if(o){a.push(r)}else{t.push(r)}}}return e?t.concat(a):t}function f(e,t){var r;r=function(r,s){var a;var i={onMessageDialogClose:function(){s.onMessageDialogClose();a.destroy()},onActionButtonPressed:function(){s.onActionButtonPressed();a.destroy()}};return o.load({name:r,controller:i}).then(function(r){if(t){n(t,e,r)}e.addDependent(e);return r})};return r}function v(e,t,n){var o=p();var i=sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app");if(o.length===0){return Promise.resolve()}d();var c=u.None;for(var l=0;l<o.length&&c!==u.Error;l++){var g=o[l];switch(g.type){case r.Error:c=u.Error;break;case r.Warning:c=u.Warning;break;case r.Success:if(c===u.None){c=u.Success}break;default:break}}if(o.length===1&&(c===u.Success||c===u.None)){a.show(o[0].message);return Promise.resolve()}var v=typeof e==="function"?e:f(e.owner,e.contentDensityClass);var y;var m,E;var b=function(){y.close();E.setProperty("/backButtonVisible",false);E.setProperty("/messages",[]);E.setProperty("/messageToGroupName",Object.create(null));m.navigateBack();E.getProperty("/resolve")()};var T={onMessageDialogClose:function(){b(E)},onActionButtonPressed:function(){E.getProperty("/actionButtonCallback")();b(E)},onBackButtonPress:function(){E.setProperty("/backButtonVisible",false);m.navigateBack()},onMessageSelect:function(){E.setProperty("/backButtonVisible",true)}};return v("sap.ui.generic.app.fragments.MessageDialog",T).then(function(e){y=e;m=y.getContent()[0];var r=y.getModel();var a=r&&r.getMetaModel();var u=false;var l=!!(n&&n.action);var g=Object.create(null);if(a){o.forEach(function(e){var t=e.getTargets()[0];if(!t){return}if(t.lastIndexOf("/")>0){t=t.substring(0,t.lastIndexOf("/"))}var s=t.substring(1,t.indexOf("("));var n=s&&a.getODataEntitySet(s);var o=n&&a.getODataEntityType(n.entityType);var i=o&&o["com.sap.vocabularies.UI.v1.HeaderInfo"];var c=i&&i.Title&&i.Title.Value&&i.Title.Value.Path;var l=r.getProperty(t);var p=l&&l[c];if(p){g[e.getId()]=p;u=true}})}E=y.getModel("settings");if(!E){E=new s({genericGroupName:i.getText("GENERAL_TITLE"),backButtonVisible:false,cancelButtonText:i.getText("DIALOG_CANCEL"),closeButtonText:i.getText("DIALOG_CLOSE")});y.setModel(E,"settings")}E.setProperty("/showActionButton",l);if(l){E.setProperty("/actionButtonText",n.actionLabel);E.setProperty("/actionButtonCallback",n.action)}E.setSizeLimit(9999);E.setProperty("/title",t||i.getText("DIALOG_TITLE"));E.setProperty("/messages",o);E.setProperty("/grouping",u);E.setProperty("/state",c);E.setProperty("/resolve",function(){return Promise.resolve()});E.setProperty("/messageToGroupName",g);y.open();return null})}function d(){var e=p(true);if(e.length>0){i.removeMessages(e)}}function y(e,s,a){var n=new t({message:e,description:s,type:r.Error,processor:a,target:"",persistent:true});i.addMessages(n)}function m(e){var t;g=e&&e.url;if(g){g="/"+g.substring(0,g.indexOf(")")+1)}var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app").getText("ERROR_UNKNOWN");var s;if(e instanceof Error){if(e.message){r=e.message}}else if(e.response){if(e.response.message){r=e.response.message}var a=e.response.statusCode;s=!Number.isInteger(a)?Number(a):a;if(e.response.headers){for(var n in e.response.headers){if(n.toLowerCase()==="content-type"){var o=e.response.headers[n];if(o.toLowerCase().indexOf("application/json")===0){if(e.response.responseText){var i=JSON.parse(e.response.responseText);if(i&&i.error&&i.error.message&&i.error.message.value){r=i.error.message.value}}}else if(e.message){r=e.message}break}}}}var u=p();t={httpStatusCode:s,messageText:r,description:null,containsTransientMessage:u.length===0?false:true};return t}return{operations:l,httpStatusCodes:c,handleTransientMessages:v,removeTransientMessages:d,addTransientErrorMessage:y,parseErrorResponse:m,getTransientMessages:p}},true);
/*
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/util/ModelUtil", ["sap/ui/core/Messaging"],function(t){"use strict";var e=function(t){this._oModel=t};e.prototype.getContextFromResponse=function(t){var e="/"+this._oModel.getKey(t);return this._oModel.getContext(e)};e.getEntitySetFromContext=function(t){var n=e.getEntitySetObjectFromContext(t);return n?n.name:null};e.getEntitySetObjectFromContext=function(t){var e,n;if(!t){throw new Error("No context")}if(t&&t.getPath){e=t.getPath().split("(")[0];n=e.substring(1)}if(n){return t.getModel().getMetaModel().getODataEntitySet(n)}return undefined};e.getEntityTypeFromContext=function(t){var n=e.getEntitySetObjectFromContext(t);return n?t.getModel().getMetaModel().getODataEntityType(n.entityType):undefined};e.prototype.hasClientMessages=function(){var e=0;var n=t.getMessageModel().getData();if(n){e=n.length}for(var o=0;o<e;o++){var r=n[o];if(r.processor.getMetadata()._sClassName==="sap.ui.core.message.ControlMessageProcessor"){return true}}return false};e.prototype.destroy=function(){this._oModel=null};return e},true);
/*
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/util/Queue", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";var e=function(e){this._iMaxLength=e;this._aQueue=[];this._aEventHandlerRegistry=[]};e.prototype._attachEvent=function(e,t){if(typeof t!=="function"){throw new Error("Event handler must be a function")}this._aEventHandlerRegistry.push({event:e,handler:t})};e.prototype._detachEvent=function(e,t){for(var n=this._aEventHandlerRegistry.length;n--;){if(this._aEventHandlerRegistry[n].handler===t&&this._aEventHandlerRegistry[n].event===e){this._aEventHandlerRegistry.splice(n,1)}}};e.prototype._fireEvent=function(e,t){for(var n=0;n<this._aEventHandlerRegistry.length;n++){if(this._aEventHandlerRegistry[n].event===e){this._aEventHandlerRegistry[n].handler(t)}}};e.prototype._execNext=function(){var e,t=this;setTimeout(function(){t._aQueue.shift();e=t._aQueue[0];if(e){t._exec(e)}else{t._fireEvent("onQueueCompleted")}})};e.prototype._exec=function(e){var t=this,n=function(){t._execNext()};this._fireEvent("beforeQueueItemProcess",e.eventParameters);e.jqdeferred.resolve();e.wait.then(function(){e.wait.then(n)},t._cancel.bind(t))};e.prototype.enqueue=function(e,t){var n={fn:e,eventParameters:t};n.jqdeferred=jQuery.Deferred();n.defer=new Promise(function(e,t){n.jqdeferred.then(e,t)});n.wait=n.defer.then(e);if(!(this._iMaxLength===undefined)&&this._aQueue.length>=this._iMaxLength){n.jqdeferred.reject(new Error("Queue overflow: "+this._aQueue.length))}else{this._aQueue.push(n);if(this._aQueue.length===1){this._exec(n)}}return n.wait.then()};e.prototype._cancel=function(e){var t,n,r=this._aQueue.length;for(n=0;n<r;n++){t=this._aQueue[n];t.jqdeferred.reject(e||new Error("Queue cancellation"))}this._fireEvent("onQueueFailed");this._aQueue=[]};e.prototype.destroy=function(){this._aQueue=[]};return e},true);
sap.ui.require.preload({
	"sap/ui/generic/app/fragments/MessageDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:layout="sap.ui.layout"><Dialog class="sapUiNoContentPadding" id="messageDialog" state="{settings>/state}" type="Message"\n\t\tshowHeader="true" horizontalScrolling="false" draggable="true" \n\t\tcontentHeight="440px" contentWidth="440px" verticalScrolling="false"><content><MessageView items="{settings>/messages}" showDetailsPageHeader="false" itemSelect="onMessageSelect" groupItems="{settings>/grouping}"><MessageItem type="{settings>type}" title="{settings>message}" description="{settings>description}" \n\t\t\t\t\t\t\tlongtextUrl="{settings>descriptionUrl}" groupName="{= ${settings>/messageToGroupName}[${settings>id}] || ${settings>/genericGroupName} }" /></MessageView></content><customHeader><Bar><contentMiddle><Text text="{settings>/title}" /></contentMiddle><contentLeft><Button icon="sap-icon://nav-back" visible="{settings>/backButtonVisible}" press="onBackButtonPress"/></contentLeft></Bar></customHeader><buttons><Button text="{settings>/actionButtonText}" visible="{settings>/showActionButton}" id="actionButton" press="onActionButtonPressed"  type="Emphasized"/><Button text="{=${settings>/showActionButton} ? ${settings>/cancelButtonText} : ${settings>/closeButtonText}}" id="Close" press="onMessageDialogClose"/></buttons></Dialog></core:FragmentDefinition>\n',
	"sap/ui/generic/app/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ui.generic.app","type":"library","embeds":[],"applicationVersion":{"version":"1.141.0"},"title":"The SAPUI5 library contains classes that are mainly used in smart template applications, but can also be used in any Fiori/UI5 application that uses the OData protocol to communicate with an application server.","description":"The SAPUI5 library contains classes that are mainly used in smart template applications, but can also be used in any Fiori/UI5 application\\n                   that uses the OData protocol to communicate with an application server.","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":[]},"sap.ui5":{"dependencies":{"minUI5Version":"1.141","libs":{"sap.ui.core":{"minVersion":"1.141.0"},"sap.ui.comp":{"minVersion":"1.141.0","lazy":true},"sap.m":{"minVersion":"1.141.0"},"sap.fe.navigation":{"minVersion":"1.141.0","lazy":true}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cnr","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","mk","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"css":false,"content":{"controls":[],"elements":[],"types":["sap.ui.generic.app.navigation.service.NavType","sap.ui.generic.app.navigation.service.ParamHandlingMode","sap.ui.generic.app.navigation.service.SuppressionBehavior"],"interfaces":[]}}}}'
});
//# sourceMappingURL=library-preload.js.map
