{"version":3,"file":"DraftController.js","names":["sap","ui","define","merge","BaseController","DraftContext","Log","Context","ActionUtil","DraftController","extend","metadata","publicMethods","constructor","oModel","oQueue","oDraftMergeTimer","apply","this","sName","_oContext","prototype","getDraftContext","_oModel","createDraft","sEntitySet","sPath","mParameters","that","Error","Promise","resolve","reject","fnSuccess","oData","oResponse","responseData","httpResponse","createdContext","fnError","oError","aPath","getPath","resetChanges","undefined","createEntry","properties","predefinedValues","success","error","batchGroupId","changeSetId","canonicalRequest","expand","validateDraft","oContext","getModel","getObject","IsActiveEntity","oImport","getODataDraftFunctionImportName","_callAction","prepareDraft","urlParameters","activateDraft","oPrepareParameters","oActivateParameters","pPrepare","pActivate","all","editDraft","sImportName","discardDraft","mParam","sFunctionImport","_remove","getDraftForActive","$expand","_read","then","hasOwnProperty","context","getContext","getKey","SiblingEntity","getDraftForActiveEntity","oPromise","oPromise2","noShowSuccessToast","forceSubmit","_normalizeError","triggerSubmitChanges","_returnPromiseAll","createNewDraftEntity","vPredefinedValues","bCanonicalRequest","oParameters","fnSetBusy","Function","sId4BatchGroupAndChangeSet","mParameters1","sRootExpand","oContextForNewAction","bUseNewActionForCreate","oFunctionImport","_oMeta","getODataFunctionImport","oPromise0","oLibraryResourceBundle","getCore","getLibraryResourceBundle","sFunctionImportDialogTitleText","String","oFunctionImportDialogInfo","getTitleText","getText","sFunctionImportDialogActionButtonText","getActionButtonText","bIsDraft","isDraftEnabled","oActionProcessor","controller","oController","applicationController","oApplicationController","contexts","functionImport","functionImportPath","isCreateAction","contextIndependentParameterData","operationGrouping","handleFocus","setActionLabel","setActionButtonText","call","executionPromise","oPromise1","aResponse","Array","isArray","_normalizeResponse","response","oResponseOut","fnPromise1Callback","bIsActiveEntity","bHasDraftEntity","oResponseEntity","_oDraftUtil","isActiveEntity","hasDraftEntity","mParameters2","failedMsg","createEditDraftEntity","bPreserveChanges","successMsg","PreserveChanges","validateDraftEntity","saveAndPrepareDraftEntity","binding","refresh","prepareDraftEntity","activateDraftEntity","bIsLenient","sExpand","oActivateDraftPromise","oTriggerSubmitPromise","Object","assign","sHandling","headers","Prefer","sETag","getETag","oActivationPromise","fnResolve","fnReject","fnCallerFunc","detachOnQueueCompleted","aResponses","_oQueue","_aQueue","length","attachOnQueueCompleted","hasDraft","hasActiveEntity","destroy"],"sources":["DraftController-dbg.js"],"mappings":";;;;;AAMAA,IAAIC,GAAGC,OAAO,CAAC,sBAAuB,mBAAoB,iBAAkB,eAAgB,uBAAwB,sCACjH,SAASC,EAAOC,EAAgBC,EAAcC,EAAKC,EAASC,GAC9D,aA6BA,IAAIC,EAAkBL,EAAeM,OAAO,iDAAyH,CACpKC,SAAU,CACTC,cAAe,CACd,kBAAmB,0BAA2B,uBAAwB,wBAAyB,sBAAuB,gBAAiB,eAAgB,qBAAsB,4BAA6B,sBAAuB,iBAAkB,kBAAmB,UAAW,iBAInRC,YAAa,SAASC,EAAQC,EAAQC,GACrCZ,EAAea,MAAMC,KAAM,CAC1BJ,EAAQC,EAAQC,IAEjBE,KAAKC,MAAQ,iDACbD,KAAKE,UAAY,IAClB,IASDX,EAAgBY,UAAUC,gBAAkB,WAC3C,IAAKJ,KAAKE,UAAW,CACpBF,KAAKE,UAAY,IAAIf,EAAaa,KAAKK,QACxC,CAEA,OAAOL,KAAKE,SACb,EAeAX,EAAgBY,UAAUG,YAAc,SAASC,EAAYC,EAAOC,GACnE,IAAIC,EAAOV,KAEX,IAAKO,EAAY,CAChB,MAAM,IAAII,MAAM,gBACjB,CAEAF,EAAcA,GAAe,CAAC,EAE9B,OAAO,IAAIG,QAAQ,SAASC,EAASC,GACpC,IAAIC,EAAY,SAASC,EAAOC,GAC/BJ,EAAQ,CACPK,aAAcF,EACdG,aAAcF,GAEhB,EAEA,IAAIG,EACJ,IAAIC,EAAU,SAASC,GACtB,IAAIC,EAAQH,EAAeI,UAAY,CAACJ,EAAeI,WAAa,GACpEd,EAAKL,QAAQoB,aAAaF,EAAOG,UAAW,MAC5CZ,EAAOQ,EACR,EACAF,EAAiBV,EAAKL,QAAQsB,YAAYnB,EAAO,CAChDoB,WAAYnB,EAAYoB,iBACxBC,QAASf,EACTgB,MAAOV,EACPW,aAAcvB,EAAYuB,aAC1BC,YAAaxB,EAAYwB,YACzBC,mBAAoBzB,EAAYyB,iBAChCC,OAAQ1B,EAAY0B,QAEtB,EACD,EAYA5C,EAAgBY,UAAUiC,cAAgB,SAASC,EAAU5B,GAC5D,IAAK4B,EAASC,WAAWC,UAAUF,EAASb,WAAWgB,eAAgB,CACtE,IAAIC,EAAUzC,KAAKI,kBAAkBsC,gCAAgCL,EAAU,sBAC/E,OAAOrC,KAAK2C,YAAYF,EAASJ,EAAU5B,EAC5C,KAAO,CACN,OAAOG,QAAQC,SAChB,CACD,EAYAtB,EAAgBY,UAAUyC,aAAe,SAASP,EAAU5B,GAC3D,IAAK4B,EAASC,WAAWC,UAAUF,EAASb,WAAWgB,eAAgB,CACtE,IAAIC,EAEJhC,EAAcA,GAAe,CAAC,EAC9BA,EAAYoC,cAAgBpC,EAAYoC,eAAiB,CAAC,EAE1DJ,EAAUzC,KAAKI,kBAAkBsC,gCAAgCL,EAAU,qBAC3E,OAAOrC,KAAK2C,YAAYF,EAASJ,EAAU5B,EAC5C,KAAO,CACN,OAAOG,QAAQC,SAChB,CAED,EAaAtB,EAAgBY,UAAU2C,cAAgB,SAAST,EAAUU,EAAoBC,GAChF,IAAIC,EAAWjD,KAAK4C,aAAaP,EAAUU,GAE3C,IAAIN,EAAUzC,KAAKI,kBAAkBsC,gCAAgCL,EAAU,oBAC/E,IAAIa,EAAYlD,KAAK2C,YAAYF,EAASJ,EAAUW,GAEpD,OAAOpC,QAAQuC,IAAI,CAACF,EAAUC,GAC/B,EAYA3D,EAAgBY,UAAUiD,UAAY,SAASf,EAAU5B,GACxD,IAAI4C,EAAcrD,KAAKI,kBAAkBsC,gCAAgCL,EAAU,cACnF,GAAIgB,EAAY,CACf,OAAOrD,KAAK2C,YAAYU,EAAahB,EAAU5B,EAChD,CACA,MAAM,IAAIE,MAAM0B,EAAW,+CAAiD,0CAC7E,EAWA9C,EAAgBY,UAAUmD,aAAe,SAASjB,EAAUkB,GAC3D,IAAKlB,EAAU,CACd,MAAM,IAAI1B,MAAM,aACjB,CACA,IAAIF,EAAc,CAAC,EACnBxB,EAAMwB,EAAa8C,GACnB,IAAIC,EAAmBxD,KAAKI,kBAAkBsC,gCAAgCL,EAAU,iBACxF,GAAImB,EAAiB,CACpB,OAAOxD,KAAK2C,YAAYa,EAAiBnB,EAAU5B,EACpD,CACA,OAAOT,KAAKyD,QAAQpB,EAASb,UAAWf,EACzC,EAYAlB,EAAgBY,UAAUuD,kBAAoB,SAASrB,EAAU5B,GAChE,IAAIC,EAAOV,KAEX,IAAKqC,EAAU,CACd,MAAM,IAAI1B,MAAM,aACjB,CAEAF,EAAcA,GAAe,CAAC,EAC9BA,EAAYoC,cAAgB,CAC3Bc,QAAW,iBAGZ,OAAO3D,KAAK4D,MAAMvB,EAASb,UAAWf,GAAaoD,KAAK,SAAS5C,GAChE,GAAIA,EAAUC,cAAgBD,EAAUC,aAAa4C,eAAe,iBAAkB,CACrF7C,EAAU8C,QAAUrD,EAAKL,QAAQ2D,WAAW,IAAMtD,EAAKL,QAAQ4D,OAAOhD,EAAUC,aAAagD,gBAC7F,OAAOjD,CACR,CAEA,MAAM,IAAIN,MAAM,iCACjB,EACD,EAWApB,EAAgBY,UAAUgE,wBAA0B,SAAS9B,GAC5D,IAAI+B,EAAUC,EAAW3D,EAAOV,KAAMS,EAAc,CACnDuB,aAAc,UACdC,YAAa,UACbqC,mBAAoB,KACpBC,YAAa,MAGdH,EAAWpE,KAAK0D,kBAAkBrB,EAAU5B,GAAaoD,KAAK,SAAS5C,GACtE,OAAOA,CACR,EAAG,SAASA,GACX,MAAMP,EAAK8D,gBAAgBvD,EAC5B,GACAoD,EAAYrE,KAAKyE,qBAAqBhE,GAGtC,OAAOT,KAAK0E,kBAAkB,CAC7BN,EAAUC,GAEZ,EAsBA9E,EAAgBY,UAAUwE,qBAAuB,SAASpE,EAAYC,EAAOoE,EAAmBC,EAAmBC,GAClH,IAAIpE,EAAOV,KACX8E,EAAcA,GAAe,CAAC,EAC9BA,EAAYC,UAAYD,EAAYC,WAAaC,SAAS7E,UAC1D,IAAI8E,EAA6B,UACjC,IAAIC,EAAe,CAClBrD,iBAAkB+C,EAClB5C,aAAciD,EACdhD,YAAagD,EACb/C,iBAAkB2C,EAClB1C,OAAQ2C,EAAYK,aAGrB,IAAIC,EAAuBN,EAAYO,wBAA0B,IAAIhG,EAAQqB,EAAKL,QAASG,GAC3F,IAAIgD,EAAkB4B,GAAwB1E,EAAKN,kBAAkBsC,gCAAgC0C,EAAsB,aAC3H,IAAIE,EAAkB9B,GAAmB9C,EAAK6E,OAAOC,uBAAuBhC,GAC5E,IAAIiC,EACJ,GAAIH,EAAiB,CACpB,IAAII,EAAyB5G,IAAIC,GAAG4G,UAAUC,yBAAyB,sBACvE,IAAIC,EAAkCP,EAAgB,yCAA2CA,EAAgB,wCAAwCQ,SAAYhB,EAAYiB,0BAA4BjB,EAAYiB,0BAA0BC,eAAiBN,EAAuBO,QAAQ,uCACnS,IAAIC,EAAwCpB,EAAYiB,0BAA4BjB,EAAYiB,0BAA0BI,sBAAwBT,EAAuBO,QAAQ,8CACjL,IAAIG,EAAW1F,EAAKN,kBAAkBiG,eAAe9F,GAErD,IAAI+F,EAAmB,IAAIhH,EAAW,CACrCiH,WAAYzB,EAAY0B,YACxBC,sBAAuB3B,EAAY4B,uBACnCC,SAAU,CAACvB,GACXwB,eAAgBtB,EAChBuB,mBAAoBrD,EACpB6C,eAAgBD,EAChBU,eAAgB,KAChBC,gCAAiCnC,EACjCzC,OAAQ2C,EAAYK,YACpB6B,kBAAmBtF,UACnBuF,YAAanC,EAAYmC,cAK1BX,EAAiBY,eAAerB,GAChCS,EAAiBa,oBAAoBjB,GAErCT,EAAYa,EAAiBc,KAAK,MAAMvD,KAAK,SAAS5C,GACrD6D,EAAYC,UAAU9D,EAAUoG,kBAChC,OAAOpG,EAAUoG,gBAClB,EACD,KAAO,CACN5B,EAAYzF,KAAKM,YAAYC,EAAYC,EAAO0E,GAChDJ,EAAYC,UAAUU,EACvB,CACA,IAAI6B,EAAY7B,EAAU5B,KAAK,SAAS0D,GAGvC,IAAItG,EAAYuG,MAAMC,QAAQF,GAAaA,EAAU,GAAKA,EAC1D,OAAO7G,EAAKgH,mBAAmBzG,EAAU0G,UAAY1G,EAAW,KAChE,EAAG,SAASsG,GAEX,IAAItG,EAAYuG,MAAMC,QAAQF,GAAcA,EAAU,GAAGxF,OAASwF,EAAU,GAAGI,SAAYJ,EAC3F,IAAIK,EAAe3G,EAAYP,EAAK8D,gBAAgBvD,GAAa,KACjE,MAAM2G,CACR,GACA,SAASC,EAAmB5G,GAC3B,IAAI6G,EAAiBC,EAAiBC,EAAiBJ,EAAelH,EAAKgH,mBAAmBzG,EAAW,MAGzG,GAAI2G,EAAa7D,QAAS,CACzBiE,EAAkBJ,EAAa7D,QAAQxB,WACxC,CAEA,IAAKyF,EAAiB,CACrB5I,EAAI2C,MAAM,wCACV,OAAOnB,QAAQE,OAAO,IAAIH,MAAM,wCACjC,CACAmH,EAAkBpH,EAAKuH,YAAYC,eAAeF,GAClD,GAAIF,EAAiB,CACpB1I,EAAI2C,MAAM,8DAAgE+F,GAC1E,OAAOlH,QAAQE,OAAO,8DAAgEgH,EACvF,CACAC,EAAkBrH,EAAKuH,YAAYE,eAAeH,GAClD,GAAID,EAAiB,CACpB3I,EAAI2C,MAAM,kEAAoEgG,GAC9E,OAAOnH,QAAQE,OAAO,IAAIH,MAAM,kEAAoEoH,GACrG,CACA,OAAOH,CACR,CACA,IAAIvD,EAEJ,GAAIS,EAAYO,wBAA0BC,EAAiB,CAC1DjB,EAAYiD,EAAUzD,KAAKgE,EAC5B,KAAO,CACN,IAAIO,EAAe,CAClBpG,aAAciD,EACdhD,YAAagD,EACbX,mBAAoB,KACpBC,YAAa,KACb8D,UAAW,2CAEZhE,EAAYrE,KAAKyE,qBAAqB2D,GAAcvE,KAAK,WACxD,OAAOyD,EAAUzD,KAAKgE,EACvB,EACD,CAEA,OAAO7H,KAAK0E,kBAAkB,CAC7B4C,EAAWjD,GAEb,EAWA9E,EAAgBY,UAAUmI,sBAAwB,SAASjG,EAAUkG,EAAkBpD,GACtF,IAAIf,EAAUC,EAAW3D,EAAOV,KAAMS,EAAc,CACnDuB,aAAc,UACdC,YAAa,UACbuG,WAAY,iCACZH,UAAW,sCACX9D,YAAa,KACbR,QAAS1B,EACTF,OAAQgD,GAET,GAAIoD,EAAkB,CACrB9H,EAAYoC,cAAgB,CAAE4F,gBAAiB,KAChD,CAEArE,EAAWpE,KAAKoD,UAAUf,EAAU5B,GAAaoD,KAAK,SAAS5C,GAC9D,IAAI6G,EAAiBE,EAAiBJ,EAEtCA,EAAelH,EAAKgH,mBAAmBzG,EAAW,MAGlD,GAAI2G,EAAa7D,QAAS,CACzBiE,EAAkBJ,EAAa7D,QAAQxB,WACxC,CAEA,IAAKyF,EAAiB,CACrB5I,EAAI2C,MAAM,wCACV,OAAOnB,QAAQE,OAAO,IAAIH,MAAM,wCACjC,CAEAmH,EAAkBpH,EAAKuH,YAAYC,eAAeF,GAClD,GAAIF,EAAiB,CACpB1I,EAAI2C,MAAM,qFAAuF+F,GACjG,OAAOlH,QAAQE,OAAO,IAAIH,MAAM,+DAAiEmH,GAClG,CAEA,OAAOF,CACR,EAAG,SAAS3G,GACX,IAAI2G,EAAelH,EAAK8D,gBAAgBvD,GACxC,MAAM2G,CACP,GACAvD,EAAYrE,KAAKyE,qBAAqBhE,GAGtC,OAAOT,KAAK0E,kBAAkB,CAC7BN,EAAUC,GAEZ,EASA9E,EAAgBY,UAAUuI,oBAAsB,SAASrG,GACxD,IAAI+B,EAAUC,EAAW3D,EAAOV,KAAMS,EAAc,CACnDuB,aAAc,UACdC,YAAa,UACb8B,QAAS1B,EACTkC,YAAa,MAGdH,EAAWpE,KAAKoC,cAAcC,EAAU5B,GAAaoD,KAAK,SAAS5C,GAClE,OAAOP,EAAKgH,mBAAmBzG,EAAW,KAC3C,EAAG,SAASA,GACX,IAAI2G,EAAelH,EAAK8D,gBAAgBvD,GACxC,MAAM2G,CACP,GACAvD,EAAYrE,KAAKyE,qBAAqBhE,GAGtC,OAAOT,KAAK0E,kBAAkB,CAC7BN,EAAUC,GAEZ,EAUA9E,EAAgBY,UAAUwI,0BAA4B,SAAStG,EAAU5B,GACxE,IAAI2D,EAAUC,EAAW3D,EAAOV,KAEhCS,EAAcA,GAAe,CAAC,EAC9BA,EAAYuB,aAAe,UAC3BvB,EAAYwB,YAAc,UAC1BxB,EAAY+H,WAAa,QACzB/H,EAAY4H,UAAY,cACxB5H,EAAYsD,QAAU1B,EACtB5B,EAAY8D,YAAc,KAE1BH,EAAWpE,KAAK4C,aAAaP,EAAU5B,GAAaoD,KAAK,SAAS5C,GACjE,IAAI6G,EAAiBE,EAAiBJ,EAGtCA,EAAelH,EAAKgH,mBAAmBzG,EAAW,MAElD,GAAI2G,EAAa7D,QAAS,CACzBiE,EAAkBJ,EAAa7D,QAAQxB,WACxC,CAEA,IAAKyF,EAAiB,CACrB5I,EAAI2C,MAAM,wCACV,OAAOnB,QAAQE,OAAO,IAAIH,MAAM,wCACjC,CAEAmH,EAAkBpH,EAAKuH,YAAYC,eAAeF,GAClD,GAAIF,EAAiB,CACpB1I,EAAI2C,MAAM,wFAA0F+F,GACpG,OAAOlH,QAAQE,OAAO,IAAIH,MAAM,+DAAiEmH,GAClG,CAEA,OAAOF,CACR,EAAG,SAAS3G,GACX,IAAI2G,EAAelH,EAAK8D,gBAAgBvD,GACxC,MAAM2G,CACP,GAGA,GAAInH,EAAYmI,QAAS,CACxBnI,EAAYmI,QAAQC,QAAQ,KAAM,UACnC,CAEAxE,EAAYrE,KAAKyE,qBAAqBhE,GAGtC,OAAOT,KAAK0E,kBAAkB,CAC7BN,EAAUC,GAEZ,EASA9E,EAAgBY,UAAU2I,mBAAqB,SAASzG,GACvD,IAAI3B,EAAOV,KAEX,OAAOA,KAAK4C,aAAaP,GAAUwB,KAAK,SAAS5C,GAChD,IAAI2G,EAAcI,EAElBJ,EAAelH,EAAKgH,mBAAmBzG,EAAW,MAClD+G,EAAkBJ,EAAa7D,QAAQxB,YAEvC,GAAI7B,EAAKuH,YAAYC,eAAeF,GAAkB,CACrD5I,EAAI2C,MAAM,wFAA0F,MACpG,OAAOnB,QAAQE,OAAO,IAAIH,MAAM,+DAAiE,MAClG,CAEA,OAAOiH,CACR,EAAG,SAAS3G,GACX,IAAI2G,EAAelH,EAAK8D,gBAAgBvD,GACxC,MAAM2G,CACP,EACD,EAWArI,EAAgBY,UAAU4I,oBAAsB,SAAS1G,EAAU2G,EAAYC,GAC9E,IAAIC,EAAuBC,EAC3B,IAAIzI,EAAOV,KAAM+C,EAAqB,CACrCf,aAAc,UACdwG,WAAY,qBACZH,UAAW,gCACX9D,YAAa,KACbR,QAAS1B,GAEV,IAAIW,EAAsBoG,OAAOC,OAAO,CAAC,EAAGtG,GAC5CA,EAAmBd,YAAc,cACjCe,EAAoBf,YAAc,aAClCe,EAAoBb,OAAS8G,EAC7B,IAAIK,EAAYN,EAAa,UAAY,SACzChG,EAAoBuG,QAAU,CAAEC,OAAQ,YAAcF,GACtD,IAAIG,EAAQzJ,KAAKK,QAAQqJ,QAAQrH,EAASb,WAE1C,GAAIiI,EAAO,CACV1G,EAAmBwG,QAAU,CAAE,WAAY,KAC3CvG,EAAoBuG,QAAQ,YAAc,GAC3C,CACA,IAAII,EAAqB,IAAI/I,QAAQ,SAAUgJ,EAAWC,GACzD,IAAIC,EAAe,WAGlBpJ,EAAKqJ,uBAAuBD,GAE5BZ,EAAwBxI,EAAKoC,cAAcT,EAAUU,EAAoBC,GAAqBa,KAAK,SAAUmG,GAC5G,IAAIlC,EAAiBE,EAAiBJ,EAGtC,IAAI3G,EAAY+I,EAAW,GAG3BpC,EAAelH,EAAKgH,mBAAmBzG,EAAW,MAElD,GAAI2G,EAAa7D,QAAS,CACzBiE,EAAkBJ,EAAa7D,QAAQxB,WACxC,CAEA,IAAKyF,EAAiB,CACrB5I,EAAI2C,MAAM,wCACV,OAAOnB,QAAQE,OAAO,IAAIH,MAAM,wCACjC,CAEAmH,EAAkBpH,EAAKuH,YAAYC,eAAeF,GAClD,IAAKF,EAAiB,CACrB1I,EAAI2C,MAAM,2FAA6F+F,GACvG,OAAOlH,QAAQE,OAAO,IAAIH,MAAM,gEAAkEmH,GACnG,CACA,OAAOF,CACR,EAAG,SAAU3G,GACZ,IAAI2G,EAAelH,EAAK8D,gBAAgBvD,GACxC,MAAM2G,CACP,GAGAuB,EAAwBzI,EAAK+D,qBAAqB1B,GAElD6G,EAAUlJ,EAAKgE,kBAAkB,CAACwE,EAAuBC,IAC1D,EAEA,GAAIzI,EAAKuJ,QAAQC,QAAQC,OAAQ,CAGhCzJ,EAAK0J,uBAAuBN,EAC7B,KAAO,CAENA,EAAa9J,KACd,CACD,GACA,OAAO2J,CACR,EAUApK,EAAgBY,UAAU+H,eAAiB,SAAS7F,GACnD,GAAIrC,KAAKI,kBAAkBiK,SAAShI,GAAW,CAC9C,OAAOrC,KAAKiI,YAAYC,eAAe7F,EAASE,YACjD,CAEA,OAAO,IACR,EAUAhD,EAAgBY,UAAUmK,gBAAkB,SAASjI,GACpD,OAAOrC,KAAKiI,YAAYqC,gBAAgBjI,EAASE,YAClD,EAOAhD,EAAgBY,UAAUoK,QAAU,WACnC,GAAIvK,KAAKE,UAAW,CACnBF,KAAKE,UAAUqK,SAChB,CAEAvK,KAAKE,UAAY,KACjBF,KAAKK,QAAU,KAEfnB,EAAeiB,UAAUoK,QAAQxK,MAAMC,KAAM,GAC9C,EAEA,OAAOT,CAER,EAAG","ignoreList":[]}