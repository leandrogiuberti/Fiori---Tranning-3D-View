{"version":3,"file":"TransactionController.js","names":["sap","ui","define","BaseController","DraftController","ModelUtil","extend","Log","TransactionController","metadata","publicMethods","constructor","oModel","oQueue","mParams","oDraftMergeTimer","apply","this","sName","_oDraft","noBatchGroups","setDeferredGroups","setChangeGroups","groupId","changeSetId","single","getInterface","prototype","setBatchStrategy","bSingle","n","mChangeBatchGroups","_oModel","getChangeGroups","getDraftController","_oQueue","_oDraftMergeTimer","editEntity","oContext","bPreserveChanges","sRootExpand","that","Promise","resolve","oDraftContext","sEntitySet","getDraftContext","getEntitySetFromContext","isDraftEnabled","_oDraftUtil","isActiveEntity","getObject","createEditDraftEntity","context","deleteEntity","vEntity","mParameters","bIsLenient","oPromise","oPromise2","sPath","oDraftController","model","Context","getPath","Object","assign","batchGroupId","successMsg","failedMsg","forceSubmit","sHandling","headers","Prefer","undefined","discardDraft","_remove","then","oResponse","_normalizeResponse","oResponseOut","_normalizeError","triggerSubmitChanges","_returnPromiseAll","deleteEntities","aEntities","aPromises","bIsStrict","fnResolve","fnReject","i","length","push","_atLeastOnePromiseResolved","invokeAction","sFunctionName","hasClientMessages","urlParameters","_callAction","oOut","refresh","resetChanges","aKeys","getDefaultValues","aContexts","mPredefinedValues","sNavigationProperty","sFunctionImportName","oEntitySet","aProperties","Error","getModel","oMetaModel","getMetaModel","oEntityType","getODataEntityType","getODataEntitySet","entityType","aNavigationProperties","split","oImmediateParentContextDetails","getImmediateParentContextDetails","relativeChildNavigationProperty","oError","error","message","navigationProperty","find","oNavProperty","name","oChildEntityType","getODataAssociationEnd","type","property","getODataFunctionImport","parameter","sDefaultValuesFunctionNameFromAnnotation","getDefaultValuesFunction","oDefaultValuesFunctionImport","keepDraftMergeTimer","sETag","getETag","sFunctionImportPath","httpResponse","statusCode","oResult","responseData","mDefaultValue","forEach","oProperty","hasOwnProperty","mFinalValues","oParentEntityType","oParentContext","oCurrentContext","oCurrentEntityType","oChildContext","sChildNavigationProperty","iIndex","sCurrentNavProp","oAssociationEnd","multiplicity","endsWith","createBindingContext","sChildContextPath","oDefaultValue","String","updateMultipleEntities","aContextToBeUpdated","aUpdatePromise","oUpdatePromise","_updateEntity","sContextPath","oUpdateData","finally","destroy"],"sources":["TransactionController-dbg.js"],"mappings":"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","ignoreList":[]}