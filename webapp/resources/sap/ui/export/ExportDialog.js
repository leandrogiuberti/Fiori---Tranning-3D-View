/*!
 * SAPUI5
 * (c) Copyright 2025 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/core/library","sap/ui/core/format/NumberFormat","sap/ui/export/ExportUtils","sap/m/library","sap/m/Dialog","sap/m/Button","sap/m/ProgressIndicator","sap/m/Text","sap/m/MessageBox","./library"],function(e,t,n,s,i,r,a,o,u,T){"use strict";var l=e.ValueState;var c=s.DialogType;var g=s.ButtonType;const f=T.Status;function p(){return new Promise(function(e,t){var s;n.getResourceBundle().then(function(t){var u=new r({text:t.getText("CANCEL_BUTTON"),press:function(){if(s&&s.oncancel){s.oncancel()}s.finish()}});var T=new a({displayAnimation:false,displayValue:"0 / 0",showValue:true,height:"0.75rem"});T.addStyleClass("sapUiMediumMarginTop");var g=new o({text:t.getText("PROGRESS_FETCHING_MSG")});s=new i({title:t.getText("PROGRESS_TITLE"),type:c.Message,contentWidth:"500px",content:[g,T],endButton:u,ariaLabelledBy:[g]});s.updateStatus=function(e,s,i){var r;if(typeof e==="string"&&e){i=e;g.setText(i)}if(!isNaN(e)&!isNaN(s)){r=e/s*100}n.announceExportStatus(f.UPDATE,{values:[e,s]});if(r>=100){T.setState(l.Success);u.setEnabled(false);g.setText(i||t.getText("PROGRESS_BUNDLE_MSG"))}T.setPercentValue(r);if(isNaN(s)||s<=0||s>=1048575){s="âˆž"}if(!isNaN(e)){T.setDisplayValue(""+e+" / "+s)}};s.finish=function(){s.close();s.destroy()};e(s)})})}function _(e){return new Promise(function(s,a){n.getResourceBundle().then(function(n){var u,T,f,p,_,N,R,x,E,S;u=[];T=false;_=t.getIntegerInstance({groupingEnabled:true});S=n.getText(e.fileType+"_FILETYPE");E=_.format(e.rowLimit);if(e.rows){N=_.format(e.rows);if(e.columns){R=_.format(e.rows*e.columns);u.push(n.getText("MSG_WARNING_CELL_COUNT",[N,e.columns,R]))}else{u.push(n.getText("MSG_WARNING_ROW_COUNT",[N]))}if(e.rows>e.rowLimit){u.push(n.getText("MSG_WARNING_ROW_LIMIT",[E,S]))}if(e.count&&e.rows<e.count){u.push(n.getText("MSG_WARNING_ROW_LIMIT",[e.rows,S]))}if(e.rows*e.columns>e.cellLimit){x=_.format(e.cellLimit);u.push(n.getText("MSG_WARNING_CELL_LIMIT",[x]))}}else{u.push(n.getText("MSG_WARNING_COUNT_UNKNOWN"));u.push(n.getText("MSG_WARNING_ROW_LIMIT",[E,S]));u.push(n.getText("MSG_WARNING_ADVICE"))}u.push(n.getText("MSG_WARNING_EXPORT_ANYWAY"));p=new o({text:u.join("\n\n")});f=new i({title:n.getText("WARNING_TITLE"),type:c.Message,state:l.Warning,content:p,contentWidth:"550px",ariaLabelledBy:p,endButton:new r({type:g.Transparent,text:n.getText("CANCEL_BUTTON"),press:function(){f.close()}}),beginButton:new r({type:g.Emphasized,text:n.getText("EXPORT_BUTTON"),press:function(){T=true;f.close()}}),afterClose:function(){f.destroy();T?s():a()}});f.open()})})}function N(e){if(!e){return}if(e instanceof Error){e=e.message}n.getResourceBundle().then(function(t){var n=e||t.getText("PROGRESS_ERROR_DEFAULT");if(e.toLowerCase().indexOf("invalid string length")>-1){n=t.getText("MSG_ERROR_OUT_OF_MEMORY")}u.error(n,{title:t.getText("PROGRESS_ERROR_TITLE")})})}return{getProgressDialog:p,showErrorMessage:N,showWarningDialog:_}},true);
//# sourceMappingURL=ExportDialog.js.map