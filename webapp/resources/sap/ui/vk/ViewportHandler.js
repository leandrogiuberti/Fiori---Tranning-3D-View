/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/base/EventProvider","sap/base/Log"],function(t,e){"use strict";var i=t.extend("sap.ui.vk.ViewportHandler",{metadata:{library:"sap.ui.vk",publicMethods:["beginGesture","move","endGesture","click","doubleClick","contextMenu","getViewport"]},constructor:function(t){this._viewport=t;this._rect=null;this._evt={x:0,y:0,z:0,d:0,tdx:0,tdy:0};this._gesture=false;this._viewport.attachEvent("resize",this,this._onresize);this._nomenu=false}});i.prototype.destroy=function(){this._viewport=null;this._rect=null;this._evt=null;this._gesture=false};i.prototype._getOffset=function(t){var e=t.getBoundingClientRect();var i={x:e.left+window.pageXOffset,y:e.top+window.pageYOffset};return i};i.prototype._inside=function(t){var e=this._viewport.getIdForLabel();var i=document.getElementById(e);if(i==null){return false}var s=this._getOffset(i);this._rect={x:s.x,y:s.y,w:i.offsetWidth,h:i.offsetHeight};return t.x>=this._rect.x&&t.x<=this._rect.x+this._rect.w&&t.y>=this._rect.y&&t.y<=this._rect.y+this._rect.h};i.prototype._onresize=function(t){this._gesture=false;this._rect=null};i.prototype.hover=function(t){if(this._viewport.hover&&this._inside(t)){this._viewport.queueCommand(function(){this._viewport.hover(t.x-this._rect.x,t.y-this._rect.y)}.bind(this));t.handled=true}};i.prototype.beginGesture=function(t){if(this._inside(t)&&!this._gesture){this._gesture=true;var i=t.x-this._rect.x,s=t.y-this._rect.y;this._evt.tdx=0;this._evt.tdy=0;this._evt.x=i;this._evt.y=s;this._evt.d=t.d;e.debug("Loco: beginGesture: "+i+", "+s);this._viewport.queueCommand(function(){this._viewport.beginGesture(i,s)}.bind(this));t.handled=true}this._nomenu=false};i.prototype.move=function(t){if(this._gesture){var i=t.x-this._rect.x,s=t.y-this._rect.y;const r=t.d;var o=i-this._evt.x;var n=s-this._evt.y;this._evt.tdx=this._evt.tdx+o;this._evt.tdy=this._evt.tdy+n;this._evt.x=i;this._evt.y=s;this._evt.d=r;this._evt.n=t.n;switch(t.n){case 1:e.debug("Loco: Rotate: "+o+", "+n);this._viewport.queueCommand(function(){this._viewport.rotate(o,n)}.bind(this));break;case 2:e.debug("Loco: Pan: "+o+", "+n);if(r!=0&&r!=1){e.debug("Loco: Zoom: "+r)}this._viewport.queueCommand(function(){if(this._evt.tdx!==0&&this._evt.tdy!==0){this._viewport.pan(o,n)}if(r!=0&&r!=1){this._viewport.zoom(r)}}.bind(this));break;default:break}this._nomenu=true;t.handled=true}};i.prototype.endGesture=function(t){if(this._gesture){var i=t.x-this._rect.x,s=t.y-this._rect.y;e.debug("Loco: endGesture: "+i+", "+s);this._viewport.queueCommand(function(){this._viewport.endGesture()}.bind(this));this._gesture=false;t.handled=true}};i.prototype.click=function(t){if(this._inside(t)&&t.buttons<=1){var i=t.x-this._rect.x,s=t.y-this._rect.y;e.debug("Loco: click: "+i+", "+s);this._viewport.queueCommand(function(){this._viewport.tap(i,s,false)}.bind(this));t.handled=true}};i.prototype.doubleClick=function(t){if(this._inside(t)&&t.buttons<=1){var i=t.x-this._rect.x,s=t.y-this._rect.y;e.debug("Loco: doubleClick: "+i+", "+s);this._viewport.queueCommand(function(){this._viewport.tap(i,s,true)}.bind(this));t.handled=true}};i.prototype.contextMenu=function(t){if(this._inside(t)||this._nomenu||t.buttons==5){this._nomenu=false;t.handled=true}};i.prototype.keyEventHandler=function(t){};i.prototype.getViewport=function(){return this._viewport};return i});
//# sourceMappingURL=ViewportHandler.js.map