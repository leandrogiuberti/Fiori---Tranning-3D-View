{"version":3,"file":"AnchorPointToolHandler.js","names":["sap","ui","define","EventProvider","Menu","MenuItem","getResourceBundle","THREE","AnchorPointToolHandler","extend","metadata","library","constructor","tool","this","_priority","_tool","_gizmo","getGizmo","_rect","_rayCaster","Raycaster","_handleIndex","_gizmoIndex","_handleAxis","Vector3","_gizmoOrigin","_gizmoScale","_matrixOrigin","Matrix4","_rotationOrigin","_mouse","Vector2","_mouseOrigin","prototype","_updateMouse","event","size","getViewport","getRenderer","getSize","x","width","y","height","setFromCamera","getCamera","getCameraRef","_updateHandles","hoverMode","prevHandleIndex","n","type","i","l","getGizmoCount","touchObj","getTouchObject","intersects","intersectObject","length","children","indexOf","object","setFromMatrixPosition","matrixWorld","copy","scale","extractRotation","setFromMatrixColumn","normalize","highlightHandle","setShouldRenderFrame","hover","_inside","_gesture","handled","click","selectHandle","delta","_getAxisOffset","ray","dir","clone","cross","direction","origin","sub","dot","_getPlaneOffset","dist","multiplyScalar","_getMouseAngle","_rotationPoint","_rotationAxis","mouseDirection","Math","atan2","_axis2","_axis1","beginGesture","_dragOrigin","crossVectors","abs","cos","PI","matCamera","levelDir","minDP","axis","setComponent","dp","_levelAngle","_startAngle","_prevDeltaAngle","_setOffset","offset","getEnableStepping","stepSize","pow","round","log10","matInv","invert","applyMatrix4","pos","add","pos1","getComponent","pos2","move","isFinite","z","angle1","deltaAngle","sign","angle2","step","MathUtils","degToRad","angle","_setRotationAxisAngle","endGesture","undefined","getSelection","viewStateManager","selection","enumerateSelection","node","push","contextMenu","getAllowContextMenu","viewport","menu","items","text","getText","itemSelected","item","getParameters","index","getSource","indexOfItem","moveTo","_viewStateManager","scene","getScene","getSceneRef","boundingBox","Box3","_expandBoundingBox","getCenter","setPosition","bind","openAsContextMenu","_viewport","_getOffset","obj","rectangle","getBoundingClientRect","p","left","window","pageXOffset","top","pageYOffset","id","getIdForLabel","domobj","document","getElementById","o","w","offsetWidth","h","offsetHeight"],"sources":["AnchorPointToolHandler-dbg.js"],"mappings":"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","ignoreList":[]}