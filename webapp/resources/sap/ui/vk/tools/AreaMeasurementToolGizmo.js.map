{"version":3,"file":"AreaMeasurementToolGizmo.js","names":["sap","ui","define","Area","Face","Utils","State","MeasurementToolGizmo","AreaMeasurementToolGizmo","extend","metadata","library","renderer","basePrototype","getMetadata","getParent","getClass","prototype","init","call","this","_pointsCountPerClick","beginMeasurementConstruction","measurement","_surface","_currentMeasurement","cancelMeasurementConstruction","endMeasurementConstruction","newMeasurement","updateContour","points","reverse","nowCount","length","lastCount","replaceLastPoint","replaceLastPoints","push","_finishArea","isVertexContour","hasSelfIntersections","vsm","_vsm","outlinedNodeRef","_hoverPoint","nodeRef","finalize","update","_viewport","getCamera","setOutliningStates","_state","SearchingFirstFeature","setFeatures","_vertexFeatures","i","count","removeFeature","_currentFeature","setCurrentFeatureIndex","_updateCurrentFeature","point","viewport","allowClosedContour","allowCurvedEdge","meshAnalyzer","_getMeshAnalyzer","r","_computeSphereRadius","shouldUpdate","p","getPoints","is2D","_is2D","isClosedContour","computePointToPointDistance","_replaceCurrentFeature","_currentFeatureIndex","setValue","slice","pointRadius","_getPointRadius","intersection","intersectSphere","contour","_faceFeatures","contourId","vertices","curvedEdge","edgePoints","lastOffset","firstEdgePoint","lastEdgePoint","reverseCurvedEdge","computePointToPointDistance2","curvedEdgeId","vertex","vertexId","edge","edgeId","e","projectPointToEdge","faceId","buildFace","setHoverPoint","data","oldHighlightedNodeRef","newHighlightedNodeRef","outlined","unoutlined","worldPoint","needToUpdateMeasurement","settings","_settings","shiftKey","featureEdge","featureFace","currentMeasurement","isFace","setFromFace","isVertex","getValue","fixPoint","state","currentPoints","duplicateLastPoint","SearchingSecondFeature","getArea","hasSelfIntersectionsLastEdge","currentFeature","oldContext","getContext","oldFeatureId","getFeatureId","oldValue","setContext","setFeatureId","addFeature","escapePressed","countLast","pop","countPred","deletePredLastPoints","Off","_tool","setActive","doubleClick"],"sources":["AreaMeasurementToolGizmo-dbg.js"],"mappings":"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","ignoreList":[]}