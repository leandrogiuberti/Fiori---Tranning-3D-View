{"version":3,"file":"MeasurementToolGizmo.js","names":["sap","ui","define","Log","Edge","Face","Vertex","MeshAnalyzer","MeshAnalyzer2D","Settings","State","Gizmo","THREE","Element","MeasurementToolGizmo","extend","metadata","library","renderer","basePrototype","getMetadata","getParent","getClass","prototype","hasDomElement","init","call","this","_viewport","_surface","_tool","_vsm","_settings","_state","Off","_hoverPoint","_currentFeature","_currentFeatureIndex","_firstFeature","_secondFeature","_vertexFeatures","_edgeFeatures","_faceFeatures","_currentMeasurement","_meshAnalyzerMap","Map","_is2D","setCurrentFeatureIndex","index","error","delta","push","pop","splice","_createMeshAnalyzer","nodeRef","meshAnalyzer","indexCount","lineCount","pointCount","v0","v1","v2","processNode","geometry","isBufferGeometry","pos","getAttribute","idx","getIndex","rg","userData","renderGroup","i","start","count","Vector3","fromArray","array","applyMatrix4","matrixWorld","addTriangle","x","y","z","_addVertex","children","forEach","pass","finishMeshBuilding","_createMeshAnalyzer2D","getCamera","_getViewBox","_getMeshAnalyzer","existing","get","set","show","viewport","tool","getMeasurementSurface","getElementById","getViewStateManager","getScene","getName","load","SearchingFirstFeature","hide","surface","fi","fc","length","removeFeature","ei","ec","vi","vc","removeMeasurement","vsm","outlinedNodeRef","setOutliningStates","_computeSphereRadius","point","r","sp","_camera","_worldToScreen","p0","_screenToWorld","Math","abs","viewportRect","getDomRef","getBoundingClientRect","halfWidth","width","halfHeight","height","cameraRef","getCameraRef","worldPoint","screenPoint","clone","project","rx","ry","ip","sign","unprojected","unproject","d","distanceTo","_getPointRadius","pointScale","getSceneRef","undefined","_replaceCurrentFeature","feature","featureId","needToUpdate","addFeature","getContext","getFeatureId","setContext","setFeatureId"],"sources":["MeasurementToolGizmo-dbg.js"],"mappings":";;;;;;AAOAA,IAAIC,GAAGC,OAAO,CACb,eACA,uBACA,uBACA,yBACA,+BACA,iCACA,2BACA,yBACA,UACA,sBACA,uBACE,SACFC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,aAEA,IAAIC,EAAuBH,EAAMI,OAAO,uCAA2F,CAClIC,SAAU,CACTC,QAAS,aAEVC,SAAU,OAGX,IAAIC,EAAgBL,EAAqBM,cAAcC,YAAYC,WAAWC,UAE9ET,EAAqBS,UAAUC,cAAgB,WAC9C,OAAO,KACR,EAEAV,EAAqBS,UAAUE,KAAO,WACrC,GAAIN,EAAcM,KAAM,CACvBN,EAAcM,KAAKC,KAAKC,KACzB,CAEAA,KAAKC,UAAY,KACjBD,KAAKE,SAAW,KAChBF,KAAKG,MAAQ,KACbH,KAAKI,KAAO,KACZJ,KAAKK,UAAY,KAEjBL,KAAKM,OAASvB,EAAMwB,IAIpBP,KAAKQ,YAAc,KAMnBR,KAAKS,gBAAkB,KAMvBT,KAAKU,qBAAuB,EAG5BV,KAAKW,cAAgB,KAGrBX,KAAKY,eAAiB,KAGtBZ,KAAKa,gBAAkB,CAAC,IAAIlC,GAC5BqB,KAAKc,cAAgB,CAAC,IAAIrC,GAC1BuB,KAAKe,cAAgB,CAAC,IAAIrC,GAE1BsB,KAAKgB,oBAAsB,KAE3BhB,KAAKiB,iBAAmB,IAAIC,IAC5BlB,KAAKmB,MAAQ,KACd,EAEAhC,EAAqBS,UAAUwB,uBAAyB,SAASC,GAChE,GAAIA,EAAQ,GAAKrB,KAAKW,cAAe,CACpCnC,EAAI8C,MAAM,6DAA+DD,EAC1E,CACA,GAAIA,EAAQ,GAAKrB,KAAKY,eAAgB,CACrCpC,EAAI8C,MAAM,8DAAgED,EAC3E,CAEA,IAAIE,EAAQF,EAAQrB,KAAKU,qBACzB,GAAIa,IAAU,EAAG,CAEhBvB,KAAKU,uBAELV,KAAKa,gBAAgBW,KAAK,IAAI7C,GAC9BqB,KAAKc,cAAcU,KAAK,IAAI/C,GAC5BuB,KAAKe,cAAcS,KAAK,IAAI9C,EAC7B,MAAO,GAAI6C,KAAW,EAAG,CAExBvB,KAAKU,uBAELV,KAAKa,gBAAgBY,MACrBzB,KAAKc,cAAcW,MACnBzB,KAAKe,cAAcU,KACpB,MAAO,GAAIJ,IAAU,EAAG,CAEvBrB,KAAKU,qBAAuB,EAC5BV,KAAKa,gBAAgBa,OAAO,GAC5B1B,KAAKc,cAAcY,OAAO,GAC1B1B,KAAKe,cAAcW,OAAO,EAC3B,MAAO,GAAIH,IAAU,EAAG,CAEvB/C,EAAI8C,MAAM,2BAA6BtB,KAAKU,qBAAuB,OAASW,EAC7E,CACD,EAEAlC,EAAqBS,UAAU+B,oBAAsB,SAASC,GAC7D,IAAIC,EAAe,KACnB,IAAIC,EAAa,EACjB,IAAIC,EAAY,EAChB,IAAIC,EAAa,EACjB,IAAIC,EAAIC,EAAIC,EAEZ,IAAIC,EAAc,SAASR,GAC1B,GAAIA,EAAQS,UAAYT,EAAQS,SAASC,iBAAkB,CAC1D,MAAMC,EAAMX,EAAQS,SAASG,aAAa,YAC1C,MAAMC,EAAMb,EAAQS,SAASK,WAC7B,MAAMC,EAAKf,EAAQgB,SAASC,YAC5B,GAAIN,GAAOE,EAAK,CACf,GAAIZ,EAAc,CACjB,IAAK,IAAIiB,EAAIH,EAAKA,EAAGI,MAAQ,EAAGC,EAAQL,EAAMA,EAAGI,MAAQJ,EAAGK,MAASP,EAAIO,MAAOF,EAAIE,EAAOF,GAAK,EAAG,CAClGb,GAAK,IAAIhD,EAAMgE,SAAUC,UAAUX,EAAIY,MAAOV,EAAIU,MAAML,GAAK,GAC7DZ,GAAK,IAAIjD,EAAMgE,SAAUC,UAAUX,EAAIY,MAAOV,EAAIU,MAAML,EAAI,GAAK,GACjEX,GAAK,IAAIlD,EAAMgE,SAAUC,UAAUX,EAAIY,MAAOV,EAAIU,MAAML,EAAI,GAAK,GACjEb,EAAGmB,aAAaxB,EAAQyB,aACxBnB,EAAGkB,aAAaxB,EAAQyB,aACxBlB,EAAGiB,aAAaxB,EAAQyB,aACxBxB,EAAayB,YAAY,CAACrB,EAAGsB,EAAGtB,EAAGuB,EAAGvB,EAAGwB,GAAI,CAACvB,EAAGqB,EAAGrB,EAAGsB,EAAGtB,EAAGuB,GAAI,CAACtB,EAAGoB,EAAGpB,EAAGqB,EAAGrB,EAAGsB,GAClF,CACD,KAAO,CACN3B,GAAca,EAAKA,EAAGK,MAAQP,EAAIO,KACnC,CACD,MAAO,GAAIT,EAAK,CAEf,GAAIV,EAAc,CACjB,IAAK,IAAIiB,EAAIH,EAAKA,EAAGI,MAAQ,EAAGC,EAAQL,EAAMA,EAAGI,MAAQJ,EAAGK,MAAST,EAAIS,MAAOF,EAAIE,IAASF,EAAG,CAC/Fb,GAAK,IAAIhD,EAAMgE,SAAUC,UAAUX,EAAIY,MAAOL,EAAI,GAClDb,EAAGmB,aAAaxB,EAAQyB,aACxBxB,EAAa6B,WAAW,CAACzB,EAAGsB,EAAGtB,EAAGuB,EAAGvB,EAAGwB,GACzC,CACD,KAAO,CACNzB,GAAcW,EAAKA,EAAGK,MAAQT,EAAIS,KACnC,CACD,CACD,CAEApB,EAAQ+B,SAASC,QAAQxB,EAC1B,EAEA,IAAK,IAAIyB,EAAO,EAAGA,EAAO,IAAKA,EAAM,CACpCzB,EAAYR,GACZ,GAAIiC,IAAS,EAAG,CACfhC,EAAe,IAAIjD,EAAakD,EAAa,EAAGC,EAAWC,EAC5D,CACD,CAEAH,EAAaiC,qBACb,OAAOjC,CACR,EAEA1C,EAAqBS,UAAUmE,sBAAwB,SAASnC,GAC/D,OAAO,IAAI/C,EAAe+C,EAAS5B,KAAKC,UAAU+D,YAAYC,cAC/D,EAEA9E,EAAqBS,UAAUsE,iBAAmB,SAAStC,GAC1D,IAAIuC,EAAWnE,KAAKiB,iBAAiBmD,IAAIxC,GACzC,GAAIuC,GAAY,KAAM,CACrB,OAAOA,CACR,CAEA,IAAItC,EAAe7B,KAAKmB,MAAQnB,KAAK+D,sBAAsBnC,GAAW5B,KAAK2B,oBAAoBC,GAC/F5B,KAAKiB,iBAAiBoD,IAAIzC,EAASC,GACnC,OAAOA,CACR,EAEA1C,EAAqBS,UAAU0E,KAAO,SAASC,EAAUC,GACxDxE,KAAKC,UAAYsE,EACjBvE,KAAKE,SAAWqE,EAASE,wBACzBzE,KAAKG,MAAQqE,EACbxE,KAAKI,KAAOlB,EAAQwF,eAAeH,EAASI,uBAC5C3E,KAAKmB,MAAQoD,EAASK,WAAWnF,cAAcoF,YAAc,sBAC7D7E,KAAKK,UAAYvB,EAASgG,OAE1B9E,KAAKM,OAASvB,EAAMgG,sBACpB/E,KAAKoB,uBAAuB,EAC7B,EAEAjC,EAAqBS,UAAUoF,KAAO,WAGrC,GAAIhF,KAAKE,UAAY,KAAM,CAC1B,IAAI+E,EAAUjF,KAAKE,SAEnB,IAAK,IAAIgF,EAAK,EAAGC,EAAKnF,KAAKe,cAAcqE,OAAQF,EAAKC,IAAMD,EAAI,CAC/DD,EAAQI,cAAcrF,KAAKe,cAAcmE,GAC1C,CAEA,IAAK,IAAII,EAAK,EAAGC,EAAKvF,KAAKc,cAAcsE,OAAQE,EAAKC,IAAMD,EAAI,CAC/DL,EAAQI,cAAcrF,KAAKc,cAAcwE,GAC1C,CAEA,IAAK,IAAIE,EAAK,EAAGC,EAAKzF,KAAKa,gBAAgBuE,OAAQI,EAAKC,IAAMD,EAAI,CACjEP,EAAQI,cAAcrF,KAAKa,gBAAgB2E,GAC5C,CAEA,GAAIxF,KAAKgB,qBAAuB,KAAM,CACrCiE,EAAQS,kBAAkB1F,KAAKgB,qBAC/BhB,KAAKgB,oBAAsB,IAC5B,CACD,CAEA,IAAI2E,EAAM3F,KAAKI,KACf,IAAIwF,EAAkB5F,KAAKQ,aAAeR,KAAKQ,YAAYoB,QAC3D,GAAIgE,GAAmB,MAAQD,GAAO,KAAM,CAC3CA,EAAIE,mBAAmB,GAAI,CAACD,GAAkB,MAAO,KACtD,CAEA5F,KAAKC,UAAY,KACjBD,KAAKE,SAAW,KAChBF,KAAKG,MAAQ,KACbH,KAAKI,KAAO,KACZJ,KAAKK,UAAY,KAEjBL,KAAKM,OAASvB,EAAMwB,IACpBP,KAAKS,gBAAkB,KACvBT,KAAKW,cAAgB,KACrBX,KAAKY,eAAiB,KACtBZ,KAAKoB,uBAAuB,GAC5BpB,KAAKQ,YAAc,IACpB,EAEArB,EAAqBS,UAAUkG,qBAAuB,SAASC,EAAOxB,GACrE,IAAIyB,EAAIhG,KAAKmB,MAAQ,EAAI,EAEzB,GAAInB,KAAKmB,MAAO,CACf,IAAI8E,EAAK1B,EAAS2B,QAAQC,eAAeJ,EAAM,GAAIA,EAAM,IACzD,IAAIK,EAAK7B,EAAS2B,QAAQG,eAAeJ,EAAG1C,EAAIyC,EAAGC,EAAGzC,GACtDwC,EAAIM,KAAKC,IAAIR,EAAM,GAAKK,EAAG7C,EAC5B,KAAO,CACN,IAAIiD,EAAejC,EAASkC,YAAYC,wBACxC,IAAIC,EAAYH,EAAaI,MAAQ,GACrC,IAAIC,EAAaL,EAAaM,OAAS,GACvC,IAAIC,EAAYxC,EAASP,YAAYgD,eACrC,IAAIC,GAAa,IAAIhI,EAAMgE,SAAUC,UAAU6C,GAC/C,IAAImB,EAAcD,EAAWE,QAC7BD,EAAYE,QAAQL,GACpB,IAAIM,EAAKrB,EAAIW,EACb,IAAIW,EAAKtB,EAAIa,EAIbb,EAAI,EACJ,IAAK,IAAIuB,EAAK,EAAGA,EAAK,IAAKA,EAAI,CAE9B,IAAIC,EAAQD,EAAK,GAAM,EAAI,EAC3B,IAAIE,EAAc,IAAIxI,EAAMgE,QAC3BiE,EAAY3D,EAAIiE,GAASD,EAAK,EAAKF,EAAK,GACxCH,EAAY1D,EAAIgE,GAASD,GAAM,EAAKD,EAAK,GACzCJ,EAAYzD,GAEbgE,EAAYC,UAAUX,GACtB,IAAIY,EAAIF,EAAYG,WAAWX,GAC/B,GAAIU,EAAI3B,EAAG,CACVA,EAAI2B,CACL,CACD,CACD,CAEA,OAAO3B,CACR,EAEA7G,EAAqBS,UAAUiI,gBAAkB,SAAStD,GACzD,MAAMuD,EAAavD,EAASK,WAAWmD,gBAAgBnF,UAAUkF,WAGjE,OAAOA,EAAaA,EAAa,KAAOE,SACzC,EAEA7I,EAAqBS,UAAUqI,uBAAyB,SAASC,EAASC,EAAWtG,GACpF,IAAIuG,EAAe,MACnB,GAAIF,IAAYlI,KAAKS,gBAAiB,CAErCT,KAAKE,SAASmF,cAAcrF,KAAKS,iBACjCT,KAAKE,SAASmI,WAAWH,GACzBlI,KAAKS,gBAAkByH,EACvBE,EAAe,IAChB,MAAO,GAAIvG,IAAiBqG,EAAQI,cAAgBH,IAAcD,EAAQK,eAAgB,CAGzFH,EAAe,IAChB,CAEA,GAAIA,EAAc,CACjBF,EAAQM,WAAW3G,GACnBqG,EAAQO,aAAaN,EACtB,CAEA,OAAOC,CACR,EAEA,OAAOjJ,CACR","ignoreList":[]}