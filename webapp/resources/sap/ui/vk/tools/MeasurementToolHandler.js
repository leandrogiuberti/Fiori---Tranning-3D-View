/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/base/EventProvider"],function(t){"use strict";var e=t.extend("sap.ui.vk.tools.MeasurementToolHandler",{metadata:{library:"sap.ui.vk"},constructor:function(e){t.call(this);this._priority=0;this._tool=e;this._rect=null}});e.prototype.destroy=function(){this._tool=null;this._rect=null};e.prototype._processMouseEvent=function(t,e){var o=null;if(t&&this._inside(e)&&this.getViewport().getScene()){var i=e.x-this._rect.x;var r=e.y-this._rect.y;var n=this._tool._viewport;if(t.is2D()){var s=n.hitTest(i,r,true,true,true);var u=n._camera._screenToWorld(i,r);o={screenPoint:[i,r],worldPoint:[u.x,u.y,0],nodeRef:s,shiftKey:e.event.shiftKey}}else{var l=n.hitTest(i,r);if(l!=null&&l.object!=null){o={screenPoint:[i,r],worldPoint:l.point.toArray(),nodeRef:l.object,shiftKey:e.event.shiftKey}}else{o={screenPoint:[i,r],worldPoint:null,nodeRef:null,shiftKey:e.event.shiftKey}}}}return o};e.prototype.hover=function(t){var e=this._tool.getGizmo();e.setHoverPoint(this._processMouseEvent(e,t))};e.prototype.beginGesture=function(t){};e.prototype.move=function(t){};e.prototype.endGesture=function(t){};e.prototype.click=function(t){var e=this.getViewport().getDomRef();if(e){e.focus()}t.handled=true;var o=this._tool.getGizmo();o.fixPoint(this._processMouseEvent(o,t))};e.prototype.doubleClick=function(t){var e=this._tool.getGizmo();if(e&&e.doubleClick&&e.doubleClick(this._processMouseEvent(e,t))){t.handled=true}};e.prototype.contextMenu=function(t){};e.prototype.keyEventHandler=function(t){if(t.code==="Escape"){var e=this._tool.getGizmo();if(e){e.escapePressed();t.handled=true}}};e.prototype.getViewport=function(){return this._tool._viewport};e.prototype._getOffset=function(t){var e=t.getBoundingClientRect();var o={x:e.left+window.pageXOffset,y:e.top+window.pageYOffset};return o};e.prototype._inside=function(t){var e=this._tool._viewport.getIdForLabel();var o=document.getElementById(e);if(o==null){return false}var i=this._getOffset(o);var r=this._rect={x:i.x,y:i.y,w:o.offsetWidth,h:o.offsetHeight};return t.x>=r.x&&t.x<=r.x+r.w&&t.y>=r.y&&t.y<=r.y+r.h};return e});
//# sourceMappingURL=MeasurementToolHandler.js.map