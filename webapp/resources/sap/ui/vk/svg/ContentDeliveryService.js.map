{"version":3,"file":"ContentDeliveryService.js","names":["sap","ui","define","Log","ManagedObject","TotaraLoader","SceneBuilder","getResourceBundle","uuidv4","ContentDeliveryService","extend","metadata","library","properties","authorizationHandler","maxActiveRequests","type","defaultValue","consumptionScenario","maxUrlLength","meshesBatchSize","materialsBatchSize","geomMeshesBatchSize","geomMeshesMaxBatchDataSize","annotationsBatchSize","tracksBatchSize","sequencesBatchSize","voxelThreshold","skipLowLODRendering","events","cameraChanged","parameters","sceneId","camera","enableEventBubbling","sceneUpdated","viewGroupUpdated","currentViewGroupId","sceneCompleted","loadingFinished","currentViewId","contentChangesProgress","percent","errorReported","error","initialViewCompleted","constructor","sId","mSettings","this","_loader","setSceneBuilder","apply","arguments","setSkipLowLODRendering","getSkipLowLODRendering","_transientSceneMap","Map","_currentNodeHierarchy","prototype","getMaxActiveRequests","setMaxActiveRequests","getConsumptionScenario","setConsumptionScenario","getMaxUrlLength","setMaxUrlLength","getMeshesBatchSize","setMeshesBatchSize","getMaterialsBatchSize","setMaterialsBatchSize","getGeomMeshesBatchSize","setGeomMeshesBatchSize","getGeomMeshesMaxBatchDataSize","setGeomMeshesMaxBatchDataSize","getAnnotationsBatchSize","setAnnotationsBatchSize","getVoxelThreshold","setVoxelThreshold","setProperty","initUrl","url","keepCachedData","sessionId","endsWith","that","notifyUpdate","fireSceneUpdated","notifyViewGroupUpdate","currentSceneInfo","context","getContext","id","fireViewGroupUpdated","running","getUrl","sceneBuilder","dispose","onErrorCallbacks","attach","_reportError","bind","onMaterialFinishedCallbacks","onImageFinishedCallbacks","onImageDetailsFinishedCallbacks","onViewGroupUpdatedCallbacks","setUrl","setSessionId","run","cleanup","Promise","resolve","fireErrorReported","_createLoadParam","reject","parentNode","contentResource","initialCamera","sceneLoaded","scene","getScene","contextParams","root","vkScene","activateView","getActivateView","enableLogger","getEnableLogger","includeAnimation","getIncludeAnimation","includeBackground","getIncludeBackground","includeHidden","getIncludeHidden","includeParametric","getIncludeParametric","includeMetadata","getIncludeMetadata","includeUsageId","getIncludeUsageId","metadataFilter","getMetadataFilter","pushPMI","getPushPMI","pushViewGroups","getPushViewGroups","useSecureConnection","getUseSecureConnection","onActiveCamera","newCam","isInitialCam","getVeid","phase","fireCameraChanged","onInitialSceneFinished","initialView","node","annotations","getSceneBuilder","_annotations","loader","onSceneCompleted","fireSceneCompleted","onLoadingFinished","fireLoadingFinished","onContentChangesProgress","event","fireContentChangesProgress","source","percentage","onInitialViewCompleted","fireInitialViewCompleted","errorCallback","info","warning","JSON","stringify","getParameters","reason","getParameter","errorCode","detachErrorReported","attachErrorReported","load","nodeProxy","getNodeProxy","getNodeHierarchy","getSource","getText","request","decrementResourceCountersForDeletedTreeNode","sid","update","sids","viewId","then","result","i","replacedNodeRefs","length","fireNodeReplaced","ReplacedNodeRef","ReplacementNodeRef","replacementNodeRefs","ReplacedNodeId","ReplacementNodeId","sceneVeId","sidArray","catch","exit","loadView","requestView","view","updatedNodes","fireNodeUpdated","nodeRef","updatePlaybacks","playbackIds","loadViewGroup","viewGroupId","forceRefresh","requestViewGroup","views","loadAnnotation","annotationId","requestAnnotation","annotation","assignMaterialToNodes","material","nodeRefs","assignToRestOfSceneTree","replaceMaterialOnNodes","originalMaterial","replacementMaterial","printLogTokens"],"sources":["ContentDeliveryService-dbg.js"],"mappings":"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","ignoreList":[]}