/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["./ViewportBase","./ViewStateManager","./ViewportRenderer","./VisibilityMode","./RenderMode","./Scene","./Camera","sap/base/Log"],function(t,e,i,o,n,s,a,r){"use strict";var l=t.extend("sap.ui.vk.Viewport",{metadata:{library:"sap.ui.vk",designtime:"sap/ui/vk/designtime/Viewport.designtime"}});var p=l.getMetadata().getParent().getClass().prototype;l.prototype.init=function(){if(p.init){p.init.call(this)}this._implementation=null};l.prototype.exit=function(){this._destroyImplementation();if(p.exit){p.exit.call(this)}};l.prototype.getImplementation=function(){return this._implementation};l.prototype._destroyImplementation=function(){if(this._implementation){var t=this.removeAllContent();var e=this;t.forEach(function(t){e.addAggregation("content",t)});this.setAggregation("safeArea",this._implementation.getSafeArea());this._implementation.destroy();this._implementation=null}return this};l.prototype.getShowDebugInfo=function(){if(this._implementation){return this._implementation.getShowDebugInfo()}return p.getShowDebugInfo.call(this)};l.prototype.setShowDebugInfo=function(t){p.setShowDebugInfo.call(this,t);if(this._implementation){this._implementation.setShowDebugInfo(t)}return this};l.prototype.getAutoStartRendering=function(){if(this._implementation){return this._implementation.getAutoStartRendering()}return p.getAutoStartRendering.call(this)};l.prototype.setAutoStartRendering=function(t){p.setAutoStartRendering.call(this,t);if(this._implementation){this._implementation.setAutoStartRendering(t)}return this};l.prototype.getBackgroundColorTop=function(){if(this._implementation){return this._implementation.getBackgroundColorTop()}return p.getBackgroundColorTop.call(this)};l.prototype.setBackgroundColorTop=function(t){p.setBackgroundColorTop.call(this,t);if(this._implementation){this._implementation.setBackgroundColorTop(t)}return this};l.prototype.getBackgroundColorBottom=function(){if(this._implementation){return this._implementation.getBackgroundColorBottom()}return p.getBackgroundColorBottom.call(this)};l.prototype.setBackgroundColorBottom=function(t){p.setBackgroundColorBottom.call(this,t);if(this._implementation){this._implementation.setBackgroundColorBottom(t)}return this};l.prototype.setWidth=function(t){p.setWidth.call(this,t);if(this._implementation){this._implementation.setWidth(t)}return this};l.prototype.setHeight=function(t){p.setHeight.call(this,t);if(this._implementation){this._implementation.setHeight(t)}return this};l.prototype.setSelectionMode=function(t){this.setProperty("selectionMode",t,true);if(this._implementation){this._implementation.setProperty("selectionMode",t,true)}return this};l.prototype.getSelectionMode=function(){if(this._implementation){return this._implementation.getSelectionMode()}return p.getSelectionMode.call(this)};l.prototype.setSelectionDisplayMode=function(t){p.setSelectionDisplayMode.call(this,t);if(this._implementation){this._implementation.setSelectionDisplayMode(t)}return this};l.prototype.getSelectionDisplayMode=function(){if(this._implementation){return this._implementation.getSelectionDisplayMode()}return p.getSelectionDisplayMode.call(this)};l.prototype.setShowSelectionBoundingBoxes=function(t){p.setShowSelectionBoundingBoxes.call(this,t);if(this._implementation){this._implementation.setShowSelectionBoundingBoxes(t)}return this};l.prototype.getShowSelectionBoundingBoxes=function(){if(this._implementation){return this._implementation.getShowSelectionBoundingBoxes()}return p.getShowSelectionBoundingBoxes.call(this)};l.prototype.setShowSafeArea=function(t){p.setShowSafeArea.call(this,t);if(this._implementation){this._implementation.setShowSafeArea(t)}return this};l.prototype.getShowSafeArea=function(){if(this._implementation){return this._implementation.getShowSafeArea()}return p.getShowSafeArea.call(this)};l.prototype.setShowAllHotspots=function(t){p.setShowAllHotspots.call(this,t);if(this._implementation){this._implementation.setShowAllHotspots(t)}return this};l.prototype.getShowAllHotspots=function(){if(this._implementation){return this._implementation.getShowAllHotspots()}return p.getShowAllHotspots.call(this)};l.prototype.setDisableHotspotHovering=function(t){p.setDisableHotspotHovering.call(this,t);if(this._implementation){this._implementation.setDisableHotspotHovering(t)}return this};l.prototype.getDisableHotspotHovering=function(){if(this._implementation){return this._implementation.getDisableHotspotHovering()}return p.getDisableHotspotHovering.call(this)};l.prototype.setHotspotColorABGR=function(t){p.setHotspotColorABGR.call(this,t);if(this._implementation){this._implementation.setHotspotColorABGR(t)}return this};l.prototype.getHotspotColorABGR=function(){if(this._implementation){return this._implementation.getHotspotColorABGR()}return p.getHotspotColorABGR.call(this)};l.prototype.setHotspotColor=function(t){p.setHotspotColor.call(this,t);if(this._implementation){this._implementation.setHotspotColor(t)}return this};l.prototype.getHotspotColor=function(){if(this._implementation){return this._implementation.getHotspotColor()}return p.getHotspotColor.call(this)};l.prototype.setHotspotCustomTextOutlineWidth=function(t){this._implementation?.setHotspotCustomTextOutlineWidth(t);return this};l.prototype.getHotspotCustomTextOutlineWidth=function(){return this._implementation?.getHotspotCustomTextOutlineWidth()??p.getHotspotCustomTextOutlineWidth.call(this)};l.prototype.setHotspotCustomTextOutlineColor=function(t){this._implementation?.setHotspotCustomTextOutlineColor(t);return this};l.prototype.getHotspotCustomTextOutlineColor=function(){return this._implementation?.getHotspotCustomTextOutlineColor()??p.getHotspotCustomTextOutlineColor.call(this)};l.prototype.setHotspotCustomTextHaloWidth=function(t){this._implementation?.setHotspotCustomTextHaloWidth(t);return this};l.prototype.getHotspotCustomTextHaloWidth=function(){return this._implementation?.getHotspotCustomTextHaloWidth()??p.getHotspotCustomTextHaloWidth.call(this)};l.prototype.setShowAllDynamicContents=function(t){p.setShowAllDynamicContents.call(this,t);if(this._implementation){this._implementation.setShowAllDynamicContents(t)}return this};l.prototype.getShowAllDynamicContents=function(){if(this._implementation){return this._implementation.getShowAllDynamicContents()}return p.getShowAllDynamicContents.call(this)};l.prototype.setKeepOutputSize=function(t){if(this._implementation&&this._implementation.setKeepOutputSize){this._implementation.setKeepOutputSize(t)}else{this.setProperty("keepOutputSize",t)}};l.prototype.getKeepOutputSize=function(){if(this._implementation&&this._implementation.getKeepOutputSize){return this._implementation.getKeepOutputSize()}return this.getProperty("keepOutputSize")};l.prototype.setShowAllHotspotsTintColor=function(t){if(this._implementation&&this._implementation.setShowAllHotspotsTintColor){this._implementation.setShowAllHotspotsTintColor(t)}else{this.setProperty("showAllHotspotsTintColor",t)}};l.prototype.getShowAllHotspotsTintColor=function(t){if(this._implementation&&this._implementation.getShowAllHotspotsTintColor){this._implementation.getShowAllHotspotsTintColor(t)}else{this.getProperty("showAllHotspotsTintColor",t)}};l.prototype.setCamera=function(t){p.setCamera.call(this,t);if(this._implementation){this._implementation.setCamera(t);return this}return this};l.prototype.getCamera=function(){if(this._implementation){return this._implementation.getCamera()}return p.getCamera.call(this)};l.prototype.setShouldRenderFrame=function(){if(this._implementation){this._implementation.setShouldRenderFrame()}return this};l.prototype.shouldRenderFrame=function(){if(this._implementation){this._implementation.shouldRenderFrame()}};l.prototype.setRenderMode=function(t){if(this._implementation&&this._implementation.setRenderMode){this._implementation.setRenderMode(t)}return this};l.prototype.getRenderMode=function(){if(this._implementation&&this._implementation.getRenderMode){return this._implementation.getRenderMode()}return n.Default};l.prototype.setFreezeCamera=function(t){p.setFreezeCamera.call(this,t);if(this._implementation){this._implementation.setFreezeCamera(t)}return this};l.prototype.showHotspots=function(t,e,i){if(this._implementation&&this._implementation.showHotspots){this._implementation.showHotspots(t,e,i)}return this};l.prototype.addTool=function(t){this.addAssociation("tools",t);if(this._implementation){this._implementation.addTool(t)}};l.prototype.removeTool=function(t){this.removeAssociation("tools",t);if(this._implementation){this._implementation.removeTool(t)}};l.prototype.getTools=function(){if(this._implementation){return this._implementation.getTools()}return this.getAssociation("tools",[])};l.prototype.removeAllTools=function(){this.removeAllAssociation("tools");if(this._implementation){this._implementation.removeAllTools()}};l.prototype.addContent=function(t){if(this._implementation){this._implementation.addContent(t)}else{this.addAggregation("content",t)}};l.prototype.removeContent=function(t){if(this._implementation){return this._implementation.removeContent(t)}return this.removeAggregation("content",t)};l.prototype.getContent=function(){if(this._implementation){return this._implementation.getContent()}return this.getAggregation("content")};l.prototype.removeAllContent=function(){if(this._implementation){return this._implementation.removeAllContent()}return this.removeAggregation("content")};l.prototype.setOutputSettings=function(t){if(this._implementation&&this._implementation.setOutputSettings){this._implementation.setOutputSettings(t)}else{this.setAggregation("outputSettings",t)}};l.prototype.getOutputSettings=function(){if(this._implementation&&this._implementation.getOutputSettings){return this._implementation.getOutputSettings()}return this.getAggregation("outputSettings")};l.prototype.removeOutputSettings=function(){if(this._implementation){return this._implementation.removeAggregation("outputSettings")}return this.removeAggregation("outputSettings")};l.prototype.setSafeArea=function(t){if(this._implementation){this._implementation.setSafeArea(t)}else{this.setAggregation("safeArea",t)}};l.prototype.getSafeArea=function(){if(this._implementation){return this._implementation.getSafeArea()}return this.getAggregation("safeArea")};l.prototype.removeSafeArea=function(){if(this._implementation){return this._implementation.removeAggregation("safeArea")}return this.removeAggregation("safeArea")};l.prototype.addAnnotation=function(t){if(this._implementation){this._implementation.addAnnotation(t)}else{this.addAggregation("annotations",t)}};l.prototype.destroyAnnotations=function(){if(this._implementation){return this._implementation.destroyAnnotations()}return this.destroyAggregation("annotations")};l.prototype.getAnnotations=function(){if(this._implementation){return this._implementation.getAnnotations()}return this.getAggregation("annotations")};l.prototype.getSymbolNodes=function(t){if(this._implementation&&this._implementation.getSymbolNodes){return this._implementation.getSymbolNodes(t)}return[]};l.prototype.indexOfAnnotation=function(t){if(this._implementation){return this._implementation.indexOfAnnotation(t)}return this.indexOfAggregation("annotations",t)};l.prototype.removeAllAnnotations=function(){if(this._implementation){return this._implementation.removeAllAnnotations()}return this.removeAggregation("annotations")};l.prototype.removeAnnotation=function(t){if(this._implementation){return this._implementation.removeAnnotation(t)}return this.removeAggregation("annotations",t)};l.prototype.insertAnnotation=function(t,e){if(this._implementation){return this._implementation.insertAnnotation(t,e)}return this.insertAggregation("annotations",t,e)};l.prototype.getCurrentView=function(){if(this._implementation&&this._implementation.getCurrentView){return this._implementation.getCurrentView()}return null};l.prototype.pan=function(t,e){if(this._implementation&&this._implementation.pan){this._implementation.pan(t,e)}};l.prototype.rotate=function(t,e){if(this._implementation&&this._implementation.rotate){this._implementation.rotate(t,e)}};l.prototype.zoom=function(t){if(this._implementation&&this._implementation.zoom){this._implementation.zoom(t)}};l.prototype._setContent=function(t){p._setContent.apply(this,arguments);if(t instanceof HTMLImageElement||t instanceof HTMLObjectElement){this._setImage(t);return this}if(t?.getMetadata().getName()==="sap.ui.vk.pdf.Document"){this._setPDFContent(t);return this}var e=null;var i=null;if(t){e=t;if(!(e instanceof s)){e=null}i=t.camera;if(!(i instanceof a)){i=null}}this._setScene(e);if(i){this.setCamera(i)}return this};l.prototype._setImage=function(t){var e="sap.ui.vk.NativeViewport";if(!this._implementation||this._implementation.getMetadata().getName()!==e){this._destroyImplementation();var i=sap.ui.require(e.replaceAll(".","/"));this._implementation=new i({tools:this.getAssociation("tools"),content:this.getContent(),contentConnector:this.getAssociation("contentConnector")});this._implementation.setParent(this);this.invalidate()}return this};l.prototype._setPDFContent=function(t){const e="sap.ui.vk.pdf.Viewport";if(this._implementation?.getMetadata().getName()!==e){this._destroyImplementation();const t=sap.ui.require(e.replaceAll(".","/"));this._implementation=new t({viewStateManager:this.getViewStateManager(),tools:this.getAssociation("tools"),content:this.getContent(),outputSettings:this.getOutputSettings(),safeArea:this.getSafeArea(),showSafeArea:this.getShowSafeArea(),showAllHotspots:this.getShowAllHotspots(),showAllHotspotsTintColor:this.getShowAllHotspotsTintColor(),disableHotspotHovering:this.getDisableHotspotHovering(),hotspotColorABGR:this.getHotspotColorABGR(),keepOutputSize:this.getKeepOutputSize(),showDebugInfo:this.getShowDebugInfo(),width:this.getWidth(),height:this.getHeight(),backgroundColorTop:this.getBackgroundColorTop(),backgroundColorBottom:this.getBackgroundColorBottom(),selectionMode:this.getSelectionMode(),selectionDisplayMode:this.getSelectionDisplayMode(),showSelectionBoundingBoxes:this.getShowSelectionBoundingBoxes(),freezeCamera:this.getFreezeCamera(),renderMode:this.getRenderMode(),autoStartRendering:this.getAutoStartRendering()});this._implementation.setParent(this);this._implementation.setContentConnector(this.getAssociation("contentConnector"));this.invalidate()}return this};l.prototype._setScene=function(t){if(t instanceof s){var e=t.getMetadata().getName(),i=this._implementation&&this._implementation.getMetadata().getName(),o=e==="sap.ui.vk.dvl.Scene"&&i==="sap.ui.vk.dvl.Viewport"||e==="sap.ui.vk.threejs.Scene"&&i==="sap.ui.vk.threejs.Viewport"||e==="sap.ui.vk.svg.Scene"&&i==="sap.ui.vk.svg.Viewport";if(!o){this._destroyImplementation();var n;var a=this.getCamera();if(e==="sap.ui.vk.dvl.Scene"){n="sap.ui.vk.dvl.Viewport"}else if(e==="sap.ui.vk.threejs.Scene"){n="sap.ui.vk.threejs.Viewport"}else if(e==="sap.ui.vk.svg.Scene"){n="sap.ui.vk.svg.Viewport"}if(n){var r=sap.ui.require(n.replaceAll(".","/"));this._implementation=new r({viewStateManager:this.getViewStateManager(),tools:this.getAssociation("tools"),content:this.getContent(),outputSettings:this.getOutputSettings(),safeArea:this.getSafeArea(),showSafeArea:this.getShowSafeArea(),showAllHotspots:this.getShowAllHotspots(),showAllHotspotsTintColor:this.getShowAllHotspotsTintColor(),disableHotspotHovering:this.getDisableHotspotHovering(),hotspotColorABGR:this.getHotspotColorABGR(),keepOutputSize:this.getKeepOutputSize(),showDebugInfo:this.getShowDebugInfo(),width:this.getWidth(),height:this.getHeight(),backgroundColorTop:this.getBackgroundColorTop(),backgroundColorBottom:this.getBackgroundColorBottom(),selectionMode:this.getSelectionMode(),selectionDisplayMode:this.getSelectionDisplayMode(),showSelectionBoundingBoxes:this.getShowSelectionBoundingBoxes(),freezeCamera:this.getFreezeCamera(),renderMode:this.getRenderMode(),autoStartRendering:this.getAutoStartRendering()});this._implementation.setContentConnector(this.getContentConnector());var l=this.getAggregation("annotations");if(l){l.forEach(function(t){this.removeAggregation("annotations",t);this._implementation.addAnnotation(t)},this)}if(a){this._camera=null;this._implementation.setCamera(a)}this._implementation.setParent(this)}this.invalidate()}}else{this._destroyImplementation();this.invalidate()}return this};l.prototype.onSetViewStateManager=function(t){if(this._implementation){this._implementation.setViewStateManager(t)}};l.prototype.onUnsetViewStateManager=function(t){if(this._implementation){this._implementation.setViewStateManager(null)}};l.prototype.activateView=function(t,e,i){if(this._implementation){this._implementation.activateView(t,e,i);return this}else{r.error("no implementation");return this}};l.prototype.resetCurrentView=function(){if(this._implementation&&this._implementation.resetCurrentView){this._implementation.resetCurrentView();return this}else{r.error("no implementation");return this}};l.prototype.zoomTo=function(t,e,i,o){if(this._implementation){this._implementation.zoomTo(t,e,i,o)}else{r.error("zoomTo: no implementation")}return this};l.prototype.tap=function(t,e,i){if(this._implementation){this._implementation.tap(t,e,i)}return this};l.prototype.tapObject=function(t){if(this._implementation&&this._implementation.tapObject){this._implementation.tapObject(t)}return this};var m=function(t){t.camera={}};var h=function(t){if(typeof t.camera==="object"&&t.camera!==null){t.camera.matrices=false}};var u=function(t){if(typeof t.camera==="object"&&t.camera!==null){t.camera.useTransitionCamera=false}};var g=function(t){t.animation=true};var c=function(t){t.visibility=false};var f=function(t){if(typeof t.visibility==="object"&&t.visibility!==null){t.visibility.mode=o.Complete}};var _=function(t){t.selection=false};l.prototype.getViewInfo=function(t){if(!this._implementation){r.error("no implementation");return null}var e={};if(typeof t!=="object"||t===null){m(e);h(e);u(e);g(e);c(e);f(e);_(e)}else{if(typeof t.camera==="object"&&t.camera!==null){e.camera={};if(typeof t.camera.matrices==="boolean"){e.camera.matrices=t.camera.matrices}else if("matrices"in t.camera){e.camera.matrices=false}else{h(e)}if(typeof t.camera.useTransitionCamera==="boolean"){e.camera.useTransitionCamera=t.camera.useTransitionCamera}else if("useTransitionCamera"in t.camera){e.camera.useTransitionCamera=false}else{u(e)}}else if(typeof t.camera==="boolean"){if(t.camera===true){e.camera={};h(e);u(e)}else{e.camera=false}}else if("camera"in t){e.camera=false}else{m(e);h(e);u(e)}if(typeof t.animation==="boolean"){e.animation=t.animation}else if("animation"in t){e.animation=false}else{g(e)}if(typeof t.visibility==="object"&&t.visibility!==null){e.visibility={};if(t.visibility.mode===o.Complete||t.visibility.mode===o.Differences){e.visibility.mode=t.visibility.mode}else{f(e)}}else if(typeof t.visibility==="boolean"){if(t.visibility===true){e.visibility={};f(e)}else{e.visibility=false}}else if("visibility"in t){e.visibility=false}else{c(e);f(e)}if(typeof t.selection==="boolean"){e.selection=t.selection}else if("selection"in t){e.selection=false}else{_(e)}}return this._implementation.getViewInfo(e)};l.prototype.setViewInfo=function(t,e){if(this._implementation){this._implementation.setViewInfo(t,e)}else{r.error("no implementation")}return this};l.prototype.getImage=function(t,e,i,o,n){if(this._implementation&&this._implementation.getImage){return this._implementation.getImage(t,e,i,o,n)}return null};l.prototype.projectToScreen=function(t,e,i,o){if(this._implementation&&this._implementation.projectToScreen){return this._implementation.projectToScreen(t,e,i,o)}return p.projectToScreen(t,e,i,o)};l.prototype.normalizeRectangle=function(t,e,i,o){if(this._implementation&&this._implementation.normalizeRectangle){return this._implementation.normalizeRectangle(t,e,i,o)}return p.normalizeRectangle(t,e,i,o)};l.prototype.deNormalizeRectangle=function(t,e,i,o){if(this._implementation&&this._implementation.deNormalizeRectangle){return this._implementation.deNormalizeRectangle(t,e,i,o)}return p.deNormalizeRectangle(t,e,i,o)};l.prototype.getMeasurementSurface=function(){var t=this._implementation;return t==null?null:t.getMeasurementSurface()};return l});
//# sourceMappingURL=Viewport.js.map