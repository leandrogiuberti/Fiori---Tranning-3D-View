/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/base/ManagedObject","./Messages","./getResourceBundle","sap/base/util/array/uniqueSort","sap/base/Log"],function(e,t,r,n,a){"use strict";var i=e.extend("sap.ui.vk.NodeHierarchy",{metadata:{library:"sap.ui.vk",abstract:true,events:{changed:{},nodeCreated:{parameters:{nodeRef:{type:"any"},nodeId:{type:"string"}}},nodeRemoving:{parameters:{nodeRef:{type:"any"},nodeId:{type:"string"}}},nodeReplaced:{parameters:{ReplacedNodeRef:{type:"any"},ReplacementNodeRef:{type:"any"},ReplacedNodeId:{type:"string"},ReplacementNodeId:{type:"string"}}},nodeUpdated:{parameters:{nodeRef:{type:"any"},nodeId:{type:"string"}}}}}});i.prototype.findNodesById=function(e){if(e.fields.some(function(e){return!e.caseSensitive})){e=jQuery.extend(true,{},e);e.fields.forEach(function(e){if(!e.caseSensitive){e.value=e.value.toLowerCase()}})}var n=function(e,n,i,s){var o;e=e||"equals";s=s||"";var d=n?i:i.toLowerCase();switch(e){case"equals":o=d===s;break;case"contains":o=d.indexOf(s)!==-1;break;case"startsWith":o=d.indexOf(s)===0;break;default:o=false;a.error(r().getText(t.VIT8.summary),t.VIT8.code,"sap.ui.vk.dvl.NodeHierarchy")}return o};var i=function(e,t){return!e.some(function(e){return t.name===e.name?n(t.predicate,t.caseSensitive,e.value,t.value):false})};var s=function(e,t){return e.source===t.source&&e.type===t.type&&!e.fields.some(i.bind(undefined,t.fields))};var o=this.findNodesByName();var d=o.filter(function(t){var r=this.createNodeProxy(t);var n=r.getVeIds();this.destroyNodeProxy(r);return n.some(s.bind(undefined,e))}.bind(this));return d};i.prototype.findNodesByMetadata=function(e){var i=function(e,t,r,n,a,i){if(e&&e.hasOwnProperty(t)){var s=e[t];if(s.hasOwnProperty(r)){var o=s[r];if(!i){o=o.toLowerCase()}return n.some(a.bind(undefined,o))}}return false};var s=function(e,t){return e&&e.hasOwnProperty(t)};var o=function(e,t,r,n,a,i,s){var o=this._baseNodeProxyPool.borrowObject();var d=e.filter(function(e){o.init(this,e);var d=o.getNodeMetadata();var u=t(d,r,n,a,i,s);o.reset();return u}.bind(this));this._baseNodeProxyPool.returnObject(o);return d};var d=this.findNodesByName(),u=[];if(e===undefined||e===null||jQuery.isEmptyObject(e)){u=d}else if(e.category!==null&&e.category!==undefined&&e.category!==""){var c,f,y,p,l=!!(e&&e.caseSensitive);if(e.key===undefined||e.key===null){c=s}else{f=e.value;y=e.predicate||"equals";if(f===undefined||f===null){f="";y="contains"}if(!Array.isArray(f)){f=[f]}if(!l){f=f.map(function(e){return e.toLowerCase()})}switch(y){case"equals":p=function(e,t){return e===t};break;case"contains":p=function(e,t){return e.indexOf(t)!==-1};break;case"startsWith":p=function(e,t){return e.indexOf(t)===0};break;default:a.error(r().getText(t.VIT9.summary),t.VIT9.code,"sap.ui.vk.dvl.NodeHierarchy")}c=i}u=o.bind(this)(d,c,e.category,e.key,f,p,l)}else{a.error(r().getText(t.VIT10.summary),t.VIT10.code,"sap.ui.vk.dvl.NodeHierarchy")}return n(u)};i.prototype._appendAncestors=function(e,t){t=t?new Set(t):null;var r=new Set(e);e.forEach(function(e){var n=this.getAncestors(e);n.forEach(function(e){if(t===null||!t.has(e)){r.add(e)}})},this);return Array.from(r)};i.prototype.getHotspotNodeIds=function(){return this.getHotspotNodeRefs()};return i});
//# sourceMappingURL=NodeHierarchy.js.map