{"version":3,"file":"ThreeExtensions.js","names":["sap","ui","define","abgrToColor","ObjectType","THREE","NodeContentType","ThreeUtils","Object3D","prototype","_vkCalculateObjectOrientedBoundingBox","computeObjectOrientedBoundingBox","this","userData","boundingBox","Box3","_vkTraverseNodeGeometry","callback","i","l","children","length","child","geometry","undefined","skipIt","_vkSetOpacityRecursive","opacity","traverseVisible","material","transparent","_vkGetTotalOpacity","joints","vsm","nodeJointMap","Map","forEach","joint","node","parent","set","obj3D","currentOpacity","get","_getOpacity","offsetOpacity","_vkTraverseMeshNodes","_vkUpdate","isDetailView","nodeContentType","PMI","_vkTraverseNodes","parentJointsMap","childJoints","j","box3ApplyMatrix4","matrix","min","max","m","elements","cx","x","cy","y","cz","z","ex","ey","ez","tcx","tcy","tcz","tex","Math","abs","tey","tez","_expandBoundingBox","visibleOnly","ignoreDynamicObjects","ignore2DObjects","nodeBoundingBox","expandBoundingBox","rg","renderGroup","setFromPackedArray","computeBoundingBox","copy","isEmpty","matrixWorld","isFinite","union","pcgBoundingBox","selectionBoundingBox","traverse","is2D","visible","_vkPersistentId","treeNode","sid","_vkSetNodeContentType","Reference","Background","renderStage","Symbol","symbolContent","updateMatrix","updateMatrixWorld","direction","Vector3","setFromMatrixColumn","normalize","_vkGetNodeContentType","Camera","_vkZoomTo","margin","size","getSize","lengthSq","boxVertices","matViewProj","Matrix4","projectVector","projectBox","Box2","calcBoxProjection","camera","vertex","project","expandByPoint","Vector2","view","enabled","offsetX","width","offsetY","height","zoomScale","insideFrustum","multiplyMatrices","projectionMatrix","matrixWorldInverse","applyMatrix4","target","getCenter","dir","getWorldDirection","multiplyScalar","position","sub","isPerspectiveCamera","step","vPos1","clone","vPos2","nj","add","isOrthographicCamera","zoom","updateProjectionMatrix","Mesh","_vkClone","clonedMesh","disposeMaterial"],"sources":["ThreeExtensions-dbg.js"],"mappings":"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","ignoreList":[]}