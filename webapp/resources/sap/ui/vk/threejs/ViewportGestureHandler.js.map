{"version":3,"file":"ViewportGestureHandler.js","names":["sap","ui","define","Log","EventProvider","PerspectiveCamera","OrthographicCamera","THREE","getResourceBundle","NodeContentType","ViewportGestureHandler","extend","metadata","library","constructor","viewport","this","_matProj","_viewport","_rect","_evt","x","y","z","d","_gesture","attachEvent","_onresize","_nomenu","ThreeJsCameraController","vp","gestureTarget","Vector3","zoomTarget","Vector2","ANGLE_EPSILON","MIN_PITCH","Math","PI","MAX_PITCH","isTurnTableMode","_timeIntervalForCameraAnimation","_startTimeForCameraAnimation","_newCamera","_oldCamera","_animationType","_zoomedNodeRef","_isZoomIn","beginGesture","scene","getScene","camera","getCamera","getCameraRef","size","getRenderer","getSize","width","height","_gesturePoint","hit","userData","isRedlineActivated","hitTest","getSceneRef","copy","point","boundingBox","_computeBoundingBox","isEmpty","getCenter","setScalar","endGesture","pan","dx","dy","getFreezeCamera","_redlineHandler","_isPanoramicActivated","rotate","view","enabled","offsetX","fullWidth","offsetY","fullHeight","updateProjectionMatrix","offset","clone","project","unproject","sub","position","add","updateMatrixWorld","fireCameraChanged","toArray","upDirs","_isPlanarActivated","undefined","scale","viewportSize","projectionMatrix","elements","deltaYaw","deltaPitch","origin","lookDir","upDir","setFromMatrixColumn","matrixWorld","normalize","rightDir","getWorldDirection","rotation","Quaternion","sceneUpDir","_upAxis","multiplyScalar","dot","correctUpDir","cross","theta","acos","min","max","maxTheta","abs","sign","axis","applyQuaternion","setFromAxisAngle","pitch","atan2","sqrt","MathUtils","clamp","multiply","up","lookAt","quaternion","zoom","zoomFactorScaler","delta","zoomOutLimit","boundingBoxSize","ignoreDynamicObjects","getBackgroundProjection","applyMatrix4","matrixWorldInverse","near","viewpostSize","sx","sy","redlineHandler","_zoomFactor","getDomRef","clientWidth","clientHeight","f","isPerspectiveCamera","fov","pow","set","moveDistance","length","setLength","isOrthographicCamera","error","getText","params","animateCameraUpdate","smootherStep","edge0","edge1","interpolateCoeff","Date","now","oldWidth","oldHeight","oldCX","oldCY","lerp","newCX","newCY","left","right","top","bottom","_transitionEffect","zoomInZoom","zoomInFOV","far","lerpVectors","oldDirection","newDirection","targetDirection","domRef","update","scheduleNextFrame","fireNodeZoomed","zoomed","isZoomIn","cameraUpdateCompleted","startCameraAnimation","timeInterval","transitionEffect","setShouldRenderFrame","lookAtObject","nodeRef","_vkGetNodeContentType","Background","prepareForCameraUpdateAnimation","getWorldPosition","zoomObject","isIn","Box3","_expandBoundingBox","Symbol","setFromObject","margin","zoomBox","_vkZoomTo","startAnimatingCameraUpdate","pauseWhenNoCameraChange","notEqualCamera","tolerance","aspect","w","_cameraController","prototype","_activateRedline","setViewOffset","_deactivateRedline","cameraRef","clearViewOffset","destroy","_getOffset","obj","rectangle","getBoundingClientRect","p","window","pageXOffset","pageYOffset","_inside","event","id","getIdForLabel","domobj","document","getElementById","o","offsetWidth","h","offsetHeight","debug","handled","activeElement","blur","e","focus","move","n","click","buttons","tap","doubleClick","contextMenu","keyEventHandler","getViewport","activateCamera","realTimeInterval","viewportCamera","vkCamera","setCamera","_width","_height","_dummyCamera","setView","_homeCamera","zoomTo"],"sources":["ViewportGestureHandler-dbg.js"],"mappings":"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","ignoreList":[]}