{"version":3,"file":"Scene.js","names":["sap","ui","define","Log","SceneBase","NodeHierarchy","RenderMode","THREE","PolylineGeometry","PolylineMaterial","PolylineMesh","ThreeUtils","TotaraUtils","uid","Scene","extend","metadata","library","PoiCoordinateSpaces","WorldSpace","ReferenceNodeSpace","constructor","scene","call","this","_id","_scene","_sceneBuilder","_defaultNodeHierarchy","_currentViewStateManager","_animationSequenceMap","Map","_initialView","_materialMap","_outlineGeometryToNodes","_annotationMap","prototype","init","_outlineColor","Vector4","_illustrationLineWidth","_outlineThickMaterial","color","lineColor","Color","x","y","z","linewidth","illustration","depthWrite","depthFunc","LessEqualDepth","polygonOffset","polygonOffsetFactor","blending","NormalBlending","clipping","_outlineMaterial","ShaderMaterial","uniforms","value","vertexShader","join","fragmentShader","_solidWhiteMaterial","MeshBasicMaterial","clearThreeScene","all3DNodes","allGroupNodes","getAllTHREENodes","sceneUD","userData","geometryClusters","concat","currentClusters","clear","instanceDataTexture","dispose","currentInstanceIndex","disposedBufferGeometries","disposedMaterials","forEach","n3d","Mesh","has","geometry","uuid","disposeGeometry","set","material","disposeMaterial","originalMaterial","parent","remove","gn","destroy","setDoubleSided","setProperty","traverse","node","undefined","originalMaterialSide","FrontSide","materialUserData","side","DoubleSide","setViewStateManager","getViewStateManager","getId","getDefaultNodeHierarchy","_computeBoundingBox","visibleOnly","ignoreDynamicObjects","ignore2DObjects","dontUseClusters","boundingBox","Box3","clusters","length","clusterBox","iCluster","lCluster","union","_expandBoundingBox","getSceneRef","setSceneBuilder","sceneBuilder","getSceneBuilder","nodeRefToPersistentId","nodeRefs","Array","isArray","map","nodeRef","_vkPersistentId","persistentIdToNodeRef","pIDs","pID","getNode","setNodePersistentId","sid","sceneId","_addAnnotation","annotationId","annotationInfo","_hasAnnotation","_getAnnotations","_removeAnnotationsForNode","delete","annotation","id","setAnnotationPersistentId","get","getPointCloudGroups","_pointCloudGroups","enumerateMaterials","topNode","createNodeProxy","distEpsilon","compare","a","b","dx","dy","quickSort","array","beginIndex","endIndex","partitionIndex","partition","pivotValue","i","swap","j","temp","OutlineGeometry","thresholdAngle","_this","BufferGeometry","Object","setPrototypeOf","type","positionAttribute","isBufferGeometry","getAttribute","index","computeBoundingBox","size","Vector3","getSize","Math","max","vertexCount","count","indices","indexCount","ei","fi","vertices","fromArray","itemSize","uniqueVertices","changes","push","newIndices","c","edges","key","v","dir1","dir2","faceNormals","copy","sub","crossVectors","normalize","edge1","edge2","min","index1","index2","face1","face2","thresholdDot","cos","MathUtils","DEG2RAD","positions","normals1","normals2","e","dot","cross","vertex","normal1","normal2","setAttribute","Float32BufferAttribute","create","nodeBoxIsNull","rgb","renderGroup","box","countMeshVerticesIndices","isChild","isMesh","skipIt","rg","lastVertex","firstVertex","addMeshVerticesIndices","resultVertices","resultIndices","resultCounts","geometryToNodesMap","tm","updateMatrix","matrix","pushElementIntoMapArray","geometryId","vertexStart","sourceVertexOffset","destinationVertexFirstIndex","destinationVertexOffset","pos","l","applyMatrix4","destinationIndexOffset","indexStart","start","indexAdjustment","_addOutlineGeometry","isPolylineMesh","outlineMaterial","childCount","children","childVertexCount","childIndexCount","Float32Array","Uint32Array","counts","BufferAttribute","setIndex","outlineGeometry","line","polylineGeometry","LineSegments","isOutline","renderOrder","matrixWorldNeedsUpdate","add","hasOutline","err","error","name","setMeshMaterial","newMaterial","defaultMaterial","restoreMeshMaterial","_createOutlineGeometry","renderMode","_vkTraverseMeshNodes","visible","isThickLines","isLineBasicMaterial","isLineMaterial","LineIllustration","ShadedIllustration","clone","emissive","multiplyScalar","addScalar","bind","_hideOutlineGeometry","onGeometryUpdated","nodes","ni","ch","outlineNode","getInitialView","setInitialView","view","getMaterial","materialId","setMaterial","clearUnusedMaterials","existingMaterials","Set","entries","getMaterialRef","_getNativeMaterial","_setNodeMaterial","child","_setSubmeshMaterial","initialMaterialId","initialMaterial","bindMarkerNodeTransformationToReferenceNode","referenceNodeId","markNodeId","unbindMarkerNodeTransformationFromReferenceNode","getReferenceNodeFromMarkerNodeId","updateMarkerCoordinateSpace","previousMarkerNodeId","newMarkerNodeId"],"sources":["Scene-dbg.js"],"mappings":"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","ignoreList":[]}