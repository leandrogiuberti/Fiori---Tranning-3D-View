/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["./Scene","./ViewStateManagerBase","sap/ui/core/Element"],function(t,e,i){"use strict";var n=e.extend("sap.ui.vk.ViewStateManager",{metadata:{library:"sap.ui.vk"}});var o=n.getMetadata().getParent().getClass().prototype;n.prototype.init=function(){if(o.init){o.init.call(this)}this._implementation=null};n.prototype.exit=function(){this._destroyImplementation();if(o.exit){o.exit.call(this)}};n.prototype._destroyImplementation=function(){if(this._implementation){this._implementation.destroy();this._implementation=null}return this};n.prototype.getImplementation=function(){return this._implementation};n.prototype._setContent=function(t){var e=null;if(t?.isA?.(["sap.ui.vk.Scene","sap.ui.vk.pdf.Document"])){e=t}this._setScene(e);return this};n.prototype._setScene=function(t){if(t?.isA(["sap.ui.vk.Scene","sap.ui.vk.pdf.Document"])){var e=t.getMetadata().getName();var n=this._implementation?.getMetadata().getName();var o=e==="sap.ui.vk.dvl.Scene"&&n==="sap.ui.vk.dvl.ViewStateManager"||e==="sap.ui.vk.threejs.Scene"&&n==="sap.ui.vk.threejs.ViewStateManager"||e==="sap.ui.vk.svg.Scene"&&n==="sap.ui.vk.svg.ViewStateManager"||e==="sap.ui.vk.pdf.Document"&&n==="sap.ui.vk.pdf.ViewStateManager";if(!o){this._destroyImplementation();var a;switch(e){case"sap.ui.vk.dvl.Scene":a="sap.ui.vk.dvl.ViewStateManager";break;case"sap.ui.vk.threejs.Scene":a="sap.ui.vk.threejs.ViewStateManager";break;case"sap.ui.vk.svg.Scene":a="sap.ui.vk.svg.ViewStateManager";break;case"sap.ui.vk.pdf.Document":a="sap.ui.vk.pdf.ViewStateManager";break;default:break}if(a){var r=this;var s=sap.ui.require(a.replaceAll(".","/"));this._implementation=new s({shouldTrackVisibilityChanges:this.getShouldTrackVisibilityChanges(),recursiveSelection:this.getRecursiveSelection(),contentConnector:this.getContentConnector(),viewManager:this.getViewManager(),visibilityChanged:function(t){r.fireVisibilityChanged({visible:t.getParameter("visible"),hidden:t.getParameter("hidden")})},selectionChanged:function(t){r.fireSelectionChanged({selected:t.getParameter("selected"),unselected:t.getParameter("unselected")})},outliningChanged:function(t){r.fireOutliningChanged({outlined:t.getParameter("outlined"),unoutlined:t.getParameter("unoutlined")})},opacityChanged:function(t){r.fireOpacityChanged({changed:t.getParameter("changed"),opacity:t.getParameter("opacity")})},tintColorChanged:function(t){r.fireTintColorChanged({changed:t.getParameter("changed"),tintColor:t.getParameter("tintColor"),tintColorABGR:t.getParameter("tintColorABGR")})},nodeHierarchyReplaced:function(t){r.fireNodeHierarchyReplaced({oldNodeHierarchy:t.getParameter("oldNodeHierarchy"),newNodeHierarchy:t.getParameter("newNodeHierarchy")})},viewStateApplying:function(t){r.fireViewStateApplying({view:t.getParameter("view")})},viewStateApplied:function(t){r.fireViewStateApplied({view:t.getParameter("view")})},transformationChanged:function(t){r.fireTransformationChanged(t.getParameters())},highlightColorChanged:function(t){r.fireHighlightColorChanged(t.getParameters())}});var m=i.getElementById(this.getViewManager());if(m){var p=i.getElementById(m.getAnimationPlayer());if(p){p.setViewStateManager(this._implementation)}}}}}else{this._destroyImplementation()}return this};n.prototype.getAnimationPlayer=function(){var t;var e=i.getElementById(this.getViewManager());if(e){t=i.getElementById(e.getAnimationPlayer())}return t};n.prototype.getNodeHierarchy=function(){return this._implementation&&this._implementation.getNodeHierarchy()};n.prototype.getVisibilityChanges=function(){return this._implementation&&this._implementation.getVisibilityChanges()};n.prototype.getVisibilityComplete=function(){return this._implementation&&this._implementation.getVisibilityComplete()};n.prototype.getVisibilityState=function(t){return this._implementation&&this._implementation.getVisibilityState(t)};n.prototype.setVisibilityState=function(t,e,i,n){if(this._implementation){this._implementation.setVisibilityState(t,e,i,n)}return this};n.prototype.resetVisibility=function(){if(this._implementation){this._implementation.resetVisibility()}return this};n.prototype.enumerateSelection=function(t){if(this._implementation){this._implementation.enumerateSelection(t)}return this};n.prototype.enumerateOutlinedNodes=function(t){if(this._implementation&&this._implementation.enumerateOutlinedNodes){this._implementation.enumerateOutlinedNodes(t)}return this};n.prototype.setShowSelectionBoundingBox=function(t){if(this._implementation){this._implementation.setShowSelectionBoundingBox(t)}};n.prototype.getShowSelectionBoundingBox=function(){if(this._implementation){return this._implementation.getShowSelectionBoundingBox()}return true};n.prototype.getSelectionState=function(t){return this._implementation&&this._implementation.getSelectionState(t)};n.prototype.setSelectionState=function(t,e,i,n){if(this._implementation){this._implementation.setSelectionState(t,e,i,n)}return this};n.prototype.setSelectionStates=function(t,e,i,n){if(this._implementation){this._implementation.setSelectionStates(t,e,i,n)}return this};n.prototype.getOutliningState=function(t){if(this._implementation&&this._implementation.getOutliningState){return this._implementation.getOutliningState(t)}else{return false}};n.prototype.setOutliningStates=function(t,e,i){if(this._implementation&&this._implementation.setOutliningStates){this._implementation.setOutliningStates(t,e,i)}return this};n.prototype.getJoints=function(){if(this._implementation&&this._implementation.getJoints){return this._implementation.getJoints()}return undefined};n.prototype.setJoints=function(t,e){if(this._implementation&&this._implementation.setJoints){this._implementation.setJoints(t,e)}return this};n.prototype.getOpacity=function(t){return this._implementation&&this._implementation.getOpacity(t)};n.prototype.setOpacity=function(t,e,i){if(this._implementation){this._implementation.setOpacity(t,e,i)}return this};n.prototype.getTotalOpacity=function(t){if(this._implementation&&this._implementation.getTotalOpacity){return this._implementation.getTotalOpacity(t)}return 1};n.prototype.setTotalOpacity=function(t,e){if(this._implementation&&this._implementation.setTotalOpacity){return this._implementation.setTotalOpacity(t,e)}return null};n.prototype.getRestOpacity=function(t){if(this._implementation&&this._implementation.getRestOpacity){return this._implementation.getRestOpacity(t)}return null};n.prototype.setRestOpacity=function(t,e){if(this._implementation&&this._implementation.setRestOpacity){this._implementation.setRestOpacity(t,e)}return this};n.prototype.restoreRestOpacity=function(t){if(this._implementation&&this._implementation.restoreRestOpacity){this._implementation.restoreRestOpacity(t)}return this};n.prototype.updateRestOpacity=function(t){if(this._implementation&&this._implementation.updateRestOpacity){this._implementation.updateRestOpacity(t)}return this};n.prototype.getTintColor=function(t,e){return this._implementation&&this._implementation.getTintColor(t,e)};n.prototype.setTintColor=function(t,e,i){if(this._implementation){this._implementation.setTintColor(t,e,i)}return this};n.prototype.setHighlightColor=function(t){if(this._implementation&&this._implementation.setHighlightColor){this._implementation.setHighlightColor(t)}return this};n.prototype.getHighlightColor=function(t){if(this._implementation&&this._implementation.getHighlightColor){return this._implementation.getHighlightColor(t)}if(t){return 4278190080}else{return"rgba(0, 0, 0, 1)"}};n.prototype.setOutlineColor=function(t){if(this._implementation&&this._implementation.setOutlineColor){this._implementation.setOutlineColor(t)}return this};n.prototype.getOutlineColor=function(t){if(this._implementation&&this._implementation.getOutlineColor){return this._implementation.getOutlineColor(t)}else{return null}};n.prototype.setOutlineWidth=function(t){if(this._implementation&&this._implementation.setOutlineWidth){this._implementation.setOutlineWidth(t)}return this};n.prototype.getOutlineWidth=function(){if(this._implementation&&this._implementation.getOutlineWidth){return this._implementation.getOutlineWidth()}else{return 0}};n.prototype.setRecursiveOutlining=function(t){this.setProperty("recursiveOutlining",t,true);if(this._implementation&&this._implementation.setRecursiveOutlining){this._implementation.setRecursiveOutlining(t)}return this};n.prototype.setRecursiveSelection=function(t){this.setProperty("recursiveSelection",t,true);if(this._implementation){this._implementation.setRecursiveSelection(t)}return this};n.prototype.setHighlightDisplayState=function(t){if(this._implementation&&this._implementation.setHighlightDisplayState){this._implementation.setHighlightDisplayState(t)}return this};n.prototype.setTransformation=function(t,e){if(this._implementation&&this._implementation.setTransformation){this._implementation.setTransformation(t,e)}return this};n.prototype.getTransformation=function(t){if(this._implementation&&this._implementation.getTransformation){return this._implementation.getTransformation(t)}return null};n.prototype.getTransformationWorld=function(t){if(this._implementation&&this._implementation.getTransformationWorld){return this._implementation.getTransformationWorld(t)}return null};n.prototype.getRestTransformationWorld=function(t){if(this._implementation&&this._implementation.getRestTransformationWorld){return this._implementation.getRestTransformationWorld(t)}return null};n.prototype.getRestTransformationUsingJoint=function(t){if(this._implementation&&this._implementation.getRestTransformationUsingJoint){return this._implementation.getRestTransformationUsingJoint(t)}return null};n.prototype.updateNodesRestTransformation=function(t){if(this._implementation&&this._implementation.updateNodesRestTransformation){this._implementation.updateNodesRestTransformation(t)}return this};n.prototype.updateRestTransformation=function(t,e){if(this._implementation&&this._implementation.updateRestTransformation){this._implementation.updateRestTransformation(t,e)}return this};n.prototype.restoreRestTransformation=function(t){if(this._implementation&&this._implementation.restoreRestTransformation){this._implementation.restoreRestTransformation(t)}return this};n.prototype.setRestTransformation=function(t,e,i,n){if(this._implementation&&this._implementation.setRestTransformation){this._implementation.setRestTransformation(t,e,i,n)}return this};n.prototype.getRelativeTransformation=function(t){if(this._implementation&&this._implementation.getRelativeTransformation){return this._implementation.getRelativeTransformation(t)}return null};n.prototype.getRestTransformation=function(t){if(this._implementation&&this._implementation.getRestTransformation){return this._implementation.getRestTransformation(t)}return null};n.prototype.setInterpolatedRelativeValues=function(t,e){if(this._implementation&&this._implementation.setInterpolatedRelativeValues){return this._implementation.setInterpolatedRelativeValues(t,e)}return null};n.prototype._getEndPropertyInLastPlayback=function(t,e){if(this._implementation&&this._implementation._getEndPropertyInLastPlayback){return this._implementation._getEndPropertyInLastPlayback(t,e)}return null};n.prototype._getEndPropertyInPreviousPlayback=function(t,e,i){if(this._implementation&&this._implementation._getEndPropertyInPreviousPlayback){return this._implementation._getEndPropertyInPreviousPlayback(t,e,i)}return null};n.prototype._convertTracksToRelative=function(t){if(this._implementation&&this._implementation._convertTracksToRelative){this._implementation._convertTracksToRelative(t)}return this};n.prototype._setJointNodeOffsets=function(t,e){if(this._implementation&&this._implementation._setJointNodeOffsets){this._implementation._setJointNodeOffsets(t,e)}return this};n.prototype._setJointNodeMatrix=function(){if(this._implementation&&this._implementation._setJointNodeMatrix){this._implementation._setJointNodeMatrix()}return this};n.prototype._propagateOpacityToJointChildren=function(t,e){if(this._implementation&&this._implementation._propagateOpacityToJointChildren){this._implementation._propagateOpacityToJointChildren(t,e)}return this};n.prototype.setTranslationKey=function(t,e,i,n){if(this._implementation&&this._implementation.setTranslationKey){this._implementation.setTranslationKey(t,e,i,n)}return this};n.prototype.setScaleKey=function(t,e,i,n){if(this._implementation&&this._implementation.setScaleKey){this._implementation.setScaleKey(t,e,i,n)}return this};n.prototype.setRotationKey=function(t,e,i,n,o){if(this._implementation&&this._implementation.setRotationKey){this._implementation.setRotationKey(t,e,i,n,o)}return this};n.prototype.setOpacityKey=function(t,e,i,n){if(this._implementation&&this._implementation.setOpacityKey){this._implementation.setOpacityKey(t,e,i,n)}return this};n.prototype.getSymbolNodes=function(t){if(this._implementation&&this._implementation.getSymbolNodes){return this._implementation.getSymbolNodes(t)}return[]};n.prototype.getBackgroundImageType=function(){if(this._implementation&&this._implementation.getBackgroundImageType){return this._implementation.getBackgroundImageType()}return null};n.prototype.setBackgroundImageType=function(t){if(this._implementation&&this._implementation.setBackgroundImageType){return this._implementation.setBackgroundImageType(t)}return undefined};n.prototype.getSelectable=function(t){var e=this._implementation;if(e){return e.getSelectable(t)}if(Array.isArray(t)){return new Array(t.length).fill(true)}else{return true}};n.prototype.setSelectable=function(t,e){var i=this._implementation;if(i){return i.setSelectable(t,e)}return this};return n});
//# sourceMappingURL=ViewStateManager.js.map