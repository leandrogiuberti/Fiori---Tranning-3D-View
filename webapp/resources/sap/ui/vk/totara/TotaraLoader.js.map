{"version":3,"file":"TotaraLoader.js","names":["sap","ui","define","Log","SceneContext","CallbackHandler","Command","TotaraUtils","WorkerScriptLoader","mark","TotaraLoader","this","_performanceTimingMsg","_isPostable","_suppressSendRequests","_loadingFinishedSent","currentSceneInfo","contextMap","Map","tokenContextMap","_skipLowLODRendering","_maxUrlLength","_maxActiveRequests","_consumptionScenario","_meshesBatchSize","_materialsBatchSize","_geomMeshesBatchSize","_geomMeshesMaxBatchDataSize","_annotationsBatchSize","_voxelThreshold","onErrorCallbacks","onImageFinishedCallbacks","onImageDetailsFinishedCallbacks","onMaterialFinishedCallbacks","onAnnotationFinishedCallbacks","onSetSequenceCallbacks","onSetTrackCallbacks","onViewGroupUpdatedCallbacks","onLoadingFinishedCallbacks","prototype","running","_worker","undefined","run","loadScript","that","onmessage","event","data","jsonContent","jsonString","JSON","parse","Object","assign","context","processCommand","name","binaryContent","isInitial","sendRequest","requestQueue","onerror","Promise","resolve","getUrl","_url","setUrl","url","endsWith","getSessionId","_sessionId","setSessionId","sessionId","getSkipLowLODRendering","setSkipLowLODRendering","skipLowLODRendering","getMaxUrlLength","setMaxUrlLength","maxUrlLength","getMaxActiveRequests","setMaxActiveRequests","maxActiveRequests","postMessage","method","getConsumptionScenario","setConsumptionScenario","consumptionScenario","getMeshesBatchSize","setMeshesBatchSize","meshesBatchSize","getMaterialsBatchSize","setMaterialsBatchSize","materialsBatchSize","getGeomMeshesBatchSize","setGeomMeshesBatchSize","geomMeshesBatchSize","getGeomMeshesMaxBatchDataSize","setGeomMeshesMaxBatchDataSize","geomMeshesMaxBatchDataSize","getAnnotationsBatchSize","setAnnotationsBatchSize","annotationsBatchSize","getVoxelThreshold","setVoxelThreshold","voxelThreshold","sceneBuilder","setSceneBuilder","removeContext","sceneId","delete","dispose","forEach","clear","cleanup","getSceneBuilder","getContext","get","createContext","params","set","token","onActiveCamera","onActiveCameraCallbacks","attach","onInitialSceneFinished","onInitialSceneFinishedCallbacks","onPartialRetrievalFinished","onPartialRetrievalFinishedCallbacks","onViewFinished","onViewFinishedCallbacks","onSceneCompleted","onSceneCompletedCallbacks","onProgressChanged","setOnProgressChanged","onLoadingFinished","detachAll","onContentChangesProgress","onContentChangesProgressCallbacks","onInitialViewCompleted","onInitialViewCompletedCallbacks","isLoadingFinished","contextIterator","values","contextItem","next","done","value","decrementResourceCountersForDeletedTreeNode","nodeId","logPerformance","progressLogger","request","sceneVeId","contextParams","authorizationHandler","root","id","retrievalType","RetrievalType","Initial","initialRequestTime","Date","now","enableLogger","createLogger","Device","browser","mobile","Math","min","batchSizeInfo","getBatchSizeInfo","meshes","setBatchSizeInfo","getMesh","materials","getMaterial","geomMeshes","getGeomMesh","annotations","getAnnotation","then","accessTokenResponse","getScene","message","processSetSceneCommand","defaultViewId","defaultViewGroupId","sceneThumbnailId","thumbnailId","dimension","defaultRootEntityId","currentViewGroupId","setSceneMetadata","metadata","viewId","activateView","initialViewId","currentViewId","initialViewDecided","getView","parameters","query","configureSceneViewQuery","pushViewGroups","update","sidArray","reject","nodeSidsForPartialTree","Set","Partial","callback","detach","rnks","rnvs","replacedNodes","key","push","replacementNodes","sids","replacedNodeRefs","replacementNodeRefs","breadcrumbs","isPartialTree","requestViewGroup","viewGroupId","includeAnimation","forceRefresh","promise","views","getViewGroup","length","onViewGroupFinishedCallbacks","viewgroup","requestView","viewType","playbackIds","methodName","getViewAnimations","$expand","onSetPlaybackCallbacks","setPlaybackCallback","resultView","setSequenceCallback","currentView","setTrackCallback","requestMaterial","requestedMaterial","materialId","getMaterialRef","veId","material","textureAddedToMaterialCallback","result","m","userData","imageIdsToAddAsTexture","detachImageAddedToMaterial","materialFinishedCallback","newMaterialId","attachImageAddedToMaterial","requestAnnotation","annotationId","annotationIdToBeRetrieved","annotation","annotationFinishedCallback","imageDetailFinishedCallback","fetchedAnnotation","_getMaterial","label","imageDetailsToLoad","size","imageIdsToLoad","imageFinishedCallback","checkMaterialExists","newAnnotationId","setSuppressSendRequests","suppressSendRequests","somethingRequested","isEmpty","newCommand","generateRequestCommand","timestamp","performanceTiming","checkError","error","reportError","errorText","execute","processContextCommand","stringify","call","err","setTree","events","setPerformance","setScene","setTreeNode","notifyFinishedTree","setView","setViewNode","setViewGroup","notifyFinishedView","setCamera","allocateMeshBuffer","setMesh","setMaterial","setGeometry","setImage","setSvgImage","setAnnotation","setLineStyle","setFillStyle","setTextStyle","setParametric","setPointCloudGroup","setDynamicContent","setPlayback","setHighlightStyle","setSequence","setTrack","unsuppressSendRequests","setMarker","notifyError","info","sid","postPerformanceTiming","msg","shift","printLogTokens","getTokens","getMaxBatchStringLength","command","urlBase","cachingUrlBase","baseQueryString","maxBatchStringLength","encodeURI","ids","getBatchSeparatorLength","streamingUrl","cachingUrl","indexOf","substring","batchedCommands","batchedCommand","separatorLength"],"sources":["TotaraLoader-dbg.js"],"mappings":"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","ignoreList":[]}