{"version":3,"file":"RequestQueue.js","names":["sap","ui","define","TotaraUtils","Command","ResourceQueue","getBatchSize","this","globalList","Set","waitingList","Map","requestedList","prototype","push","id","requestData","has","add","set","setBatchSizeInfo","batchSizeInfo","fetchBatch","batchSize","maxBatchStringLength","Number","MAX_SAFE_INTEGER","separatorLength","batch","batchStringLength","iterator","keys","entry","next","i","done","value","toString","length","delete","pop","isReady","clear","isEmpty","size","isWaiting","isInitialViewCompleted","map","values","isInitial","GeometryResourceQueue","getMaxBatchDataSize","call","priorityMap","sortedList","Object","create","constructor","setData","data","get","assign","Array","from","sort","a","b","priority","maxBatchDataSize","maxBatchSubmeshCount","batchDataSize","batchSubmeshCount","dataSize","submeshCount","RequestQueue","context","sceneId","token","generateToken","loader","meshes","getMeshesBatchSize","bind","materials","getMaterialsBatchSize","textures","geomMeshes","getGeomMeshesBatchSize","getGeomMeshesMaxBatchDataSize","annotations","getAnnotationsBatchSize","views","thumbnails","images","isWaitingForContent","clearContent","createGetContentCommand","commandName","ids","extraOptions","options","parseInt","createRequestCommand","removeFirstFromMap","generateRequestCommand","command","meshIds","getMesh","getGeomMesh","method","getAnnotation","parameters","annotationIds","getMaterial","materialIds","getImage","getView","viewId","query","configureSceneViewQuery"],"sources":["RequestQueue-dbg.js"],"mappings":"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","ignoreList":[]}