/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/base/Log","./library","sap/ui/core/Control","./Messages","./NotificationsRenderer","./getResourceBundle","sap/m/ToggleButton","sap/m/MessagePopover","sap/m/Button","sap/m/MessageItem","sap/m/library"],function(e,t,s,i,o,a,r,g,l,n,p){"use strict";const v=p.ButtonType;var d=s.extend("sap.ui.vk.Notifications",{metadata:{library:"sap.ui.vk",publicMethods:["clearAllMessages"],aggregations:{_messagePopover:{type:"sap.m.MessagePopover",multiple:false,visibility:"hidden"},_messagePopoverToggleButton:{type:"sap.m.ToggleButton",multiple:false,visibility:"hidden"}},events:{allMessagesCleared:{},messageAdded:{}}}});d.prototype.init=function(){if(s.prototype.init){s.prototype.init.call(this)}var t;var i=new r({icon:"sap-icon://message-popup",type:v.Emphasized,tooltip:a().getText("MESSAGEPOPOVERBUTTON"),text:"0",press:function(e){if(i.getPressed()){t.openBy(i)}else{t.close()}}});i.addStyleClass("messagePopoverButton");this.setAggregation("_messagePopoverToggleButton",i);t=new g(`${this.getId()}-messagePopover`,{headerButton:new l({text:a().getText("MESSAGEPOPOVER_CLEARBUTTON"),type:v.Emphasized,tooltip:a().getText("MESSAGEPOPOVER_CLEARBUTTON"),press:function(e){t.getParent().clearAllMessages()}}),afterClose:i.setPressed.bind(i,false)});t.addStyleClass("sapVizKitNotificationPopover");this.setAggregation("_messagePopover",t);e.addLogListener(this)};d.prototype.exit=function(){e.removeLogListener(this);if(s.prototype.exit){s.prototype.exit.call(this)}};d.prototype.onLogEntry=function(t){if(t.component.startsWith("sap.ui.vk")&&(t.level===e.Level.WARNING||t.level===e.Level.ERROR||t.level===e.Level.FATAL)){var s=t.details,o,r,g;if(i[t.details]){s=a().getText(i[t.details].summary);o=a().getText(i[t.details].cause);r=a().getText(i[t.details].resolution);g=a().getText("ERROR_DESCRIPTION_CODE")}var l=a().getText("ERROR_DESCRIPTION_COMPONENT");var p=a().getText("ERROR_DESCRIPTION_DATE");var v=a().getText("ERROR_DESCRIPTION_TIME");var d=a().getText("ERROR_DESCRIPTION_LEVEL");var R=a().getText("ERROR_DESCRIPTION_MESSAGE");var T=a().getText("ERROR_DESCRIPTION_CAUSE");var E=a().getText("ERROR_DESCRIPTION_RESOLUTION");var b="<div><b>"+l+":</b><br>"+t.component+"</div><br>"+"<div><b>"+p+":</b><br>"+t.date+"</div><br>"+(g?"<div><b>"+g+":</b><br>"+t.details+"</div><br>":"")+"<div><b>"+v+":</b><br>"+t.time.slice(0,t.time.indexOf("."))+"</div><br>"+"<div><b>"+d+":</b><br>"+t.level+"</div><br>"+"<div><b>"+R+":</b><br>"+s+"</div><br>"+(o?"<div><b>"+T+":</b><br>"+o+"</div><br>":"")+(r?"<div><b>"+E+":</b><br>"+r+"</div>":"");var m=new n({markupDescription:true,title:t.message,description:b});var u=this.getAggregation("_messagePopover");u.addItem(m);this.getAggregation("_messagePopoverToggleButton").setText(u.getItems().length);this.fireMessageAdded()}};d.prototype.clearAllMessages=function(){var e=this.getAggregation("_messagePopover");e.removeAllItems();e.close();this.getAggregation("_messagePopoverToggleButton").setText(e.getItems().length);this.fireAllMessagesCleared();return this};return d});
//# sourceMappingURL=Notifications.js.map