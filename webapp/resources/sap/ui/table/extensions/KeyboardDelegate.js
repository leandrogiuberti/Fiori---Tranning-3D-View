/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["../utils/TableUtils","../library","sap/base/i18n/Localization","sap/ui/base/Object","sap/ui/Device","sap/ui/events/KeyCodes","sap/ui/thirdparty/jquery"],function(e,t,o,n,i,s,jQuery){"use strict";const l=e.CELLTYPE;const f=t.SelectionMode;const r={CTRL:1,SHIFT:2,ALT:4};const c=5;const a="1rem";function u(e,t){e.setMarked("sapUiTableSkipItemNavigation",t!==false)}function g(t){if(e.getCellInfo(t.target).isOfType(l.ANY)){t.preventDefault();t.stopPropagation()}}const d=n.extend("sap.ui.table.extensions.KeyboardDelegate");function p(t,o){if(!m(t,o)){return}const n=e.getCellInfo(e.getCell(t,o.target));if(n.isOfType(l.ANYCOLUMNHEADER)){C(t,n,o)}else if(n.isOfType(l.ANYCONTENTCELL)){h(t,n,o)}}function C(t,o,n){const i=e.getHeaderRowCount(t);if(e.isNoDataVisible(t)){const o=e.getFocusedItemInfo(t);if(o.row-i<=1){u(n)}}else if(o.isOfType(l.COLUMNROWHEADER)&&i>1){u(n);t._getKeyboardExtension().focusItem(i*(e.getVisibleColumnCount(t)+1),n)}}function h(t,o,n){const i=t._getKeyboardExtension();const s=i.isInActionMode();const l=d._isKeyCombination(n,null,r.CTRL);const f=l||s;const c=e.getParentCell(t,n.target);if(!f&&c){c.trigger("focus");return}u(n);if(V(t,o.cell)){const e=R(t,n);if(e){n.preventDefault();return}}if(o.rowIndex===t.getRows().length-1||e.isVariableRowHeightEnabled(t)&&o.rowIndex===t.getRows().length-2&&e.getBindingContextOfRow(t.getRows()[o.rowIndex+1])===null){if(!s&&c){c.trigger("focus")}else{const e=t.getCreationRow();if(!e||!e._takeOverKeyboardHandling(n)){i.setActionMode(false)}}return}M(t,o.type,o.rowIndex+1,o.columnIndex,f);n.preventDefault()}function T(t,o){const n=e.getCellInfo(e.getCell(t,o.target));if(!n.isOfType(l.ANYCONTENTCELL)||!m(t,o)){return}const i=d._isKeyCombination(o,null,r.CTRL);const s=t._getKeyboardExtension();const f=s.isInActionMode();const c=i||f;const a=e.getParentCell(t,o.target);if(!c&&a){a.trigger("focus");return}u(o);if(v(t,n.cell)){const e=E(t,o);if(e){o.preventDefault();return}}if(n.rowIndex===0){u(o,c);if(!f&&a){a.trigger("focus")}else{s.setActionMode(false)}return}M(t,n.type,n.rowIndex-1,n.columnIndex,c);o.preventDefault()}function m(e,t){const o=d._isKeyCombination(t,null,r.CTRL);return!t.isMarked()&&(o||!(t.target instanceof window.HTMLInputElement)&&!(t.target instanceof window.HTMLTextAreaElement))}function y(e){return new Promise(function(t){e.attachEventOnce("_rowsUpdated",t)})}function I(e){if(e._isWaitingForData()){return y(e).then(function(){return I(e)})}return Promise.resolve()}function R(e,t,o,n){const i=e._getFirstRenderedRowIndex()===e._getMaxFirstRenderedRowIndex();if(i){return null}return A(e,t,true,o,n)}function E(e,t,o,n){const i=e._getFirstRenderedRowIndex()===0;if(i){return null}return A(e,t,false,o,n)}function A(t,o,n,i,s){const f=e.getCellInfo(e.getCell(t,o.target));const c=t._getKeyboardExtension().isInActionMode();const a=d._isKeyCombination(o,null,r.CTRL);const u=a||c;const g=c&&f.isOfType(l.DATACELL);if(g){t._getKeyboardExtension().setSilentFocus(t.getDomRef("focusDummy"));setTimeout(function(){t._getScrollExtension().scrollVertically(n===true,i)},0)}else{t._getScrollExtension().scrollVertically(n===true,i)}return y(t).then(function(){if(s){s()}else if(u){M(t,f.type,f.rowIndex,f.columnIndex,true)}})}function x(t,o){const n=e.getFocusedItemInfo(t);const i=t._getKeyboardExtension();const s=i.getLastFocusedCellInfo();i.focusItem(n.cellInRow+n.columnCount*s.row,o)}function O(t,o){const n=e.getFocusedItemInfo(t);t._getKeyboardExtension().focusItem(n.cellInRow,o)}function b(e,t){e._getKeyboardExtension().setSilentFocus(e.$().find("."+t))}d._isKeyCombination=function(e,t,o){if(o==null){o=0}const n=typeof t==="string"?String.fromCharCode(e.charCode):e.keyCode;let l=0;l|=(i.os.macintosh?e.metaKey:e.ctrlKey)&&t!==s.CONTROL?r.CTRL:0;l|=e.shiftKey&&t!==s.SHIFT?r.SHIFT:0;l|=e.altKey&&t!==s.ALT?r.ALT:0;const f=t==null||n===t;const c=o===l;return f&&c};function _(t,o){const n=e.getCell(t,o);const i=e.getCellInfo(n);return t.getRows()[i.rowIndex]}function w(t,o){const n=e.getCellInfo(o.target);if(n.isOfType(l.COLUMNROWHEADER)){t._getSelectionPlugin().onHeaderSelectorPress()}else if(d._allowsToggleExpandedState(t,o.target)){_(t,o.target).toggleExpandedState()}else if(n.isOfType(l.ROWHEADER)){i()}else if(n.isOfType(l.COLUMNHEADER)){e.Menu.openContextMenu(t,o)}else if(n.isOfType(l.DATACELL|l.ROWACTION)){let n=!t.hasListeners("cellClick");if(!t._findAndfireCellEvent(t.fireCellClick,o)){if(e.isRowSelectionAllowed(t)){i();n=false}}if(n){const n=e.getInteractiveElements(o.target);if(n){t._getKeyboardExtension().setActionMode(true)}}}function i(){let n=null;if(t._legacyMultiSelection){n=function(e){t._legacyMultiSelection(e.getIndex(),o)}}e.toggleRowSelection(t,o.target,null,n)}}function L(t,o){const n=t.getParent();const i=n._getVisibleColumns();const s=i.indexOf(t);let l;if(o&&s<i.length-1){l=n.indexOfColumn(i[s+1])+1}else if(!o&&s>0){l=n.indexOfColumn(i[s-1])}if(l!=null){e.Column.moveColumnTo(t,l)}}function S(e,t){const o=e.getColumns().filter(function(e){return e.getVisible()||(e.getGrouped?e.getGrouped():false)});for(let e=0;e<o.length;e++){const n=o[e];if(n===t){return e}}return-1}function N(t,o,n){if(!n){if(t._oRangeSelection.selected){e.toggleRowSelection(t,o,true)}else{e.toggleRowSelection(t,o,false)}}else{e.toggleRowSelection(t,o,false)}}d._focusElement=function(e,t,o){if(!e||!t){return}if(o==null){o=false}if(o){e._getKeyboardExtension().setSilentFocus(t)}else{t.focus()}if(t instanceof window.HTMLInputElement){t.select()}};function M(t,o,n,i,s,f){if(!t||o==null||n==null||n<0||n>=t.getRows().length){return}const r=t.getRows()[n];let c;if(o===l.ROWHEADER){t._getKeyboardExtension().setFocus(t.getDomRef("rowsel"+n));return}else if(o===l.ROWACTION){c=t.getDomRef("rowact"+n)}else if(o===l.DATACELL&&(i!=null&&i>=0)){const e=t.getColumns()[i];const o=S(t,e);if(o>=0){c=r.getDomRef("col"+o)}}if(!c){return}if(s){const o=e.getInteractiveElements(c);if(o){d._focusElement(t,o[0]);return}}if(f){t._getKeyboardExtension()._bStayInActionMode=true}c.focus()}function D(e){return e.classList.contains("sapUiTableTreeIconNodeOpen")||e.classList.contains("sapUiTableTreeIconNodeClosed")}d._allowsToggleExpandedState=function(t,o){return e.Grouping.isInGroupHeaderRow(o)||e.Grouping.isInTreeMode(t)&&o.classList.contains("sapUiTableCellFirst")&&(o.querySelector(".sapUiTableTreeIconNodeOpen")||o.querySelector(".sapUiTableTreeIconNodeClosed"))||D(o)};function K(e){const t={};const o=e._getRowCounts();const n=e.getRows();t.header=H(e);t.top=[];t.scrollable=[];t.bottom=[];for(let i=0;i<o.fixedTop;i++){t.top.push(...F(e,n[i]))}for(let i=o.fixedTop;i<n.length-o.fixedBottom;i++){t.scrollable.push(...F(e,n[i]))}for(let i=n.length-o.fixedBottom;i<n.length;i++){t.bottom.push(...F(e,n[i]))}t.all=t.header.concat(t.top,t.scrollable,t.bottom);return t}function H(t){const o=[];const n=t.$();function i(t){return`.sapUiTableHeaderRow:nth-of-type(${t+1}) .sapUiTableCell ${e.INTERACTIVE_ELEMENT_SELECTOR}`}if(e.hasSelectAll(t)){o.push(t.getDomRef("selall"))}for(let s=0;s<e.getHeaderRowCount(t);s++){o.push(...n.find(i(s)))}return o}function F(t,o){const n=[];const i=e.isRowSelectorSelectionAllowed(t);const s=!o.isEmpty()&&(i||o.isGroupHeader());const l=o.getDomRefs(true);if(s){n.push(l.rowHeaderPart[0].querySelector(".sapUiTableCell"))}let f=l.row.find(`.sapUiTableCell ${e.INTERACTIVE_ELEMENT_SELECTOR}`);if(t._getKeyboardExtension().isInActionMode()){f=f.add(l.row.find(".sapUiTableDataCell:focus"))}n.push(...f.toArray());return n}function U(t){const o=e.getRowIndexOfFocusedCell(t);const n=t.getRows()[o];const i=n.getIndex();t._oRangeSelection={startIndex:i,selected:n._isSelected()}}function v(e,t){if(isNaN(t)){const e=jQuery(t);t=parseInt(e.add(e.parent()).filter("[data-sap-ui-rowindex]").attr("data-sap-ui-rowindex"))}return t===e._getRowCounts().fixedTop}function V(e,t){if(isNaN(t)){const e=jQuery(t);t=parseInt(e.add(e.parent()).filter("[data-sap-ui-rowindex]").attr("data-sap-ui-rowindex"))}const o=e._getRowCounts();return t===o.count-o.fixedBottom-1}d.prototype.enterActionMode=function(){const t=this._getKeyboardExtension();const o=document.activeElement;const n=e.getInteractiveElements(o);const i=e.getParentCell(this,o);if(n){t.suspendItemNavigation();o.tabIndex=-1;d._focusElement(this,n[0],true);return true}else if(i){this._getKeyboardExtension().suspendItemNavigation();return true}return false};d.prototype.leaveActionMode=function(t){const o=this._getKeyboardExtension();const n=document.activeElement;const i=e.getParentCell(this,n);o.resumeItemNavigation();if(t){return}if(i){d._focusElement(this,i[0],true)}else{const e=this._getItemNavigation();if(e){const t=e.aItemDomRefs;const o=t.indexOf(n);if(o>-1){e.setFocusedIndex(o)}}o.setSilentFocus(n)}};d.prototype.onfocusin=function(t){if(t.isMarked("sapUiTableIgnoreFocusIn")){return}const o=this._getKeyboardExtension();const n=jQuery(t.target);if(n.hasClass("sapUiTableOuterBefore")||n.hasClass("sapUiTableOuterAfter")||t.target!==this.getDomRef("overlay")&&this.getShowOverlay()){this.$("overlay").trigger("focus")}else if(n.hasClass("sapUiTableCtrlBefore")){const n=e.isNoDataVisible(this);const i=this.getDomRef("busyIndicator");if(i){o.setSilentFocus(i)}else if(!this.getColumnHeaderVisible()){if(this.getRows().length&&!e.isNoDataVisible(this)){x(this,t)}else if(n){o.setSilentFocus(this.$("noDataCnt"))}}else if(e.getVisibleColumnCount(this)||e.hasRowHeader(this)){O(this,t)}else if(n){o.setSilentFocus(this.$("noDataCnt"))}}else if(n.hasClass("sapUiTableCtrlAfter")){const n=this.getDomRef("busyIndicator");if(n){o.setSilentFocus(n)}else if(this.getRows().length&&!e.isNoDataVisible(this)){x(this,t)}else if(this.getColumnHeaderVisible()&&(e.getVisibleColumnCount(this)||e.hasRowHeader(this))){O(this,t)}}const i=e.getCellInfo(t.target);const s=i.isOfType(l.ROWHEADER)&&e.Grouping.isInGroupHeaderRow(t.target);const f=i.isOfType(l.ROWHEADER)&&!s&&e.isRowSelectorSelectionAllowed(this);const r=i.isOfType(l.COLUMNROWHEADER)&&e.isRowSelectorSelectionAllowed(this);const c=s||f||r||o._bStayInActionMode;const a=e.getCellInfo(e.getParentCell(this,t.target)).isOfType(l.ANY);const u=jQuery(t.target).is(e.INTERACTIVE_ELEMENT_SELECTOR);const g=o.isInActionMode()&&c||u&&a;o._bStayInActionMode=false;o.setActionMode(g,true)};d.prototype.onkeydown=function(t){if(t.isMarked()){return}const o=this._getKeyboardExtension();let n=e.getCellInfo(t.target);const i=this.getSelectionMode();const c=this._getSelectionPlugin();if(d._isKeyCombination(t,s.F2)){const i=o.isInActionMode();const s=e.getCell(this,t.target);const l=e.getParentCell(this,t.target)!=null;n=e.getCellInfo(s);if(l&&!i){s.trigger("focus")}else{o.setActionMode(!i)}return}if(d._isKeyCombination(t,s.F4)&&d._allowsToggleExpandedState(this,t.target)){_(this,t.target).toggleExpandedState();return}if(d._isKeyCombination(t,s.SPACE)&&D(t.target)){t.preventDefault();return}if(this._getKeyboardExtension().isInActionMode()||!n.isOfType(l.ANY)){return}if(d._isKeyCombination(t,s.SPACE)){t.preventDefault()}if(d._isKeyCombination(t,s.SHIFT)&&i===f.MultiToggle&&(n.isOfType(l.ROWHEADER)&&e.isRowSelectorSelectionAllowed(this)||n.isOfType(l.DATACELL|l.ROWACTION))){U(this)}else if(d._isKeyCombination(t,s.A,r.CTRL)){t.preventDefault();if(n.isOfType(l.ANYCONTENTCELL|l.COLUMNROWHEADER)){c.onKeyboardShortcut("toggle",t)}}else if(d._isKeyCombination(t,s.A,r.CTRL+r.SHIFT)){if(n.isOfType(l.ANYCONTENTCELL|l.COLUMNROWHEADER)){t.preventDefault();c.onKeyboardShortcut("clear",t)}}else if(d._isKeyCombination(t,s.F4)){if(n.isOfType(l.DATACELL)){o.setActionMode(true)}}};d.prototype.onkeypress=function(t){if(t.isMarked()){return}const o=this._getKeyboardExtension();const n=e.getCellInfo(t.target);if(d._isKeyCombination(t,"+")){if(d._allowsToggleExpandedState(this,t.target)){_(this,t.target).expand()}else if(n.isOfType(l.DATACELL|l.ROWACTION)){o.setActionMode(true)}}else if(d._isKeyCombination(t,"-")){if(d._allowsToggleExpandedState(this,t.target)){_(this,t.target).collapse()}else if(n.isOfType(l.DATACELL|l.ROWACTION)){o.setActionMode(true)}}};d.prototype.oncontextmenu=function(t){if(t.isMarked("sapUiTableHandledByPointerExtension")){return}const o=e.getCellInfo(document.activeElement);if(o.isOfType(l.ANY)){e.Menu.openContextMenu(this,t)}};d.prototype.onkeyup=function(t){if(t.isMarked()){return}const o=e.getCellInfo(t.target);if(d._isKeyCombination(t,s.SHIFT)){delete this._oRangeSelection}if(d._isKeyCombination(t,s.SPACE)){w(this,t)}else if(d._isKeyCombination(t,s.SPACE,r.SHIFT)){e.toggleRowSelection(this,o.rowIndex);U(this)}else if(this._legacyMultiSelection&&!o.isOfType(l.COLUMNROWHEADER)&&(d._isKeyCombination(t,s.SPACE,r.CTRL)||d._isKeyCombination(t,s.ENTER,r.CTRL))){w(this,t)}};d.prototype.onsaptabnext=function(t){const o=this._getKeyboardExtension();const n=e.getCellInfo(t.target);if(o.isInActionMode()){W.call(this,t)}else if(n.isOfType(l.ANYCOLUMNHEADER)){if(this.getRows().length===0){b(this,"sapUiTableCtrlAfter")}else if(e.isNoDataVisible(this)){this.$("noDataCnt").trigger("focus");t.preventDefault()}else if(this.getRows().length>0){x(this,t);t.preventDefault()}}else if(n.isOfType(l.ANYCONTENTCELL)){b(this,"sapUiTableCtrlAfter")}else if(t.target===this.getDomRef("overlay")){o.setSilentFocus(this.$().find(".sapUiTableOuterAfter"))}else if(!n.isOfType(l.ANY)){const o=e.getParentCell(this,t.target);if(o){t.preventDefault();o.trigger("focus")}}};function W(e){const t=K(this);e.preventDefault();if(t.top.concat(t.scrollable).at(-1)===e.target){const t=!!R(this,e,false,()=>{const e=this._getRowCounts();const t=e.fixedTop+e.scrollable-1;const o=F(this,this.getRows()[t])[0];if(o){d._focusElement(this,o)}else{const e=this._getFirstRenderedRowIndex()===this._getMaxFirstRenderedRowIndex();M(this,l.DATACELL,t,0,false,!e)}});if(t){return}}const o=t.all[t.all.indexOf(e.target)+1];if(o){d._focusElement(this,o)}else{this._getKeyboardExtension().setActionMode(false)}}d.prototype.onsaptabprevious=function(t){const o=this._getKeyboardExtension();const n=e.getCellInfo(t.target);let i;if(o.isInActionMode()){P.call(this,t)}else if(n.isOfType(l.ANYCONTENTCELL)||t.target===this.getDomRef("noDataCnt")){if(this.getColumnHeaderVisible()&&(e.getVisibleColumnCount(this)||this.getSelectionMode()!==f.None)){O(this,t);t.preventDefault()}else{b(this,"sapUiTableCtrlBefore")}}else if(t.target===this.getDomRef("overlay")){this._getKeyboardExtension().setSilentFocus(this.$().find(".sapUiTableOuterBefore"))}else if(n.isOfType(l.ANYCOLUMNHEADER)){b(this,"sapUiTableCtrlBefore")}else if(!n.isOfType(l.ANY)){i=e.getParentCell(this,t.target);if(i){t.preventDefault();i.trigger("focus")}}};function P(e){const t=K(this);e.preventDefault();if(t.scrollable.concat(t.bottom)[0]===e.target){const t=!!E(this,e,false,()=>{const e=this._getRowCounts();const t=e.fixedTop;const o=F(this,this.getRows()[t]).at(-1);if(o){d._focusElement(this,o)}else{const e=this._getFirstRenderedRowIndex()===0;M(this,l.DATACELL,t,0,false,!e)}});if(t){return}}const o=t.all[t.all.indexOf(e.target)-1];if(o){d._focusElement(this,o)}else{this._getKeyboardExtension().setActionMode(false)}}d.prototype.onsapdown=function(e){g(e);p(this,e)};d.prototype.onsapdownmodifiers=function(t){if(t.isMarked()||d._isKeyCombination(t,null,r.CTRL+r.ALT)){u(t);return}g(t);if(d._isKeyCombination(t,null,r.CTRL)){p(this,t);return}const o=this._getKeyboardExtension();if(d._isKeyCombination(t,null,r.ALT)&&d._allowsToggleExpandedState(this,t.target)){u(t);_(this,t.target).expand();return}if(o.isInActionMode()){return}const n=e.getCellInfo(t.target);if(d._isKeyCombination(t,null,r.SHIFT)){if(n.isOfType(l.ANYCONTENTCELL)){if(!this._oRangeSelection){u(t);return}const o=e.getRowIndexOfFocusedCell(this);const n=this.getRows()[o].getIndex();const i=this._oRangeSelection.startIndex>n;let s;if(n===this._getTotalRowCount()-1){return}if(V(this,t.target)){if(this._oRangeSelection.pScroll){u(t);return}else{s=R(this,t);this._oRangeSelection.pScroll=s}}if(s){u(t);s.then(function(){return I(this)}.bind(this)).then(function(){N(this,o-(i?1:0),i);delete this._oRangeSelection.pScroll}.bind(this))}else{N(this,o+(i?0:1),i)}}else{u(t)}}if(d._isKeyCombination(t,null,r.ALT)){if(n.isOfType(l.DATACELL)){o.setActionMode(true)}u(t)}};d.prototype.onsapup=function(e){g(e);T(this,e)};d.prototype.onsapupmodifiers=function(t){if(t.isMarked()||d._isKeyCombination(t,null,r.CTRL+r.ALT)){u(t);return}g(t);if(d._isKeyCombination(t,null,r.CTRL)){T(this,t);return}if(d._isKeyCombination(t,null,r.ALT)&&d._allowsToggleExpandedState(this,t.target)){u(t);_(this,t.target).collapse();return}const o=this._getKeyboardExtension();if(o.isInActionMode()){return}const n=e.getCellInfo(t.target);if(d._isKeyCombination(t,null,r.SHIFT)){if(n.isOfType(l.ANYCONTENTCELL)){if(!this._oRangeSelection){u(t);return}const o=e.getRowIndexOfFocusedCell(this);const n=this.getRows()[o].getIndex();const i=this._oRangeSelection.startIndex<n;let s;if(n===0){u(t);return}if(v(this,t.target)){if(this._oRangeSelection.pScroll){u(t);return}else{s=E(this,t);this._oRangeSelection.pScroll=s}}if(s){u(t);s.then(function(){return I(this)}.bind(this)).then(function(){N(this,i?1:0,i);delete this._oRangeSelection.pScroll}.bind(this))}else{N(this,o-(i?0:1),i)}}else{u(t)}}if(d._isKeyCombination(t,null,r.ALT)){if(n.isOfType(l.DATACELL)){o.setActionMode(true)}u(t)}};d.prototype.onsapleft=function(e){g(e)};d.prototype.onsapleftmodifiers=function(t){if(t.isMarked()){u(t);return}g(t);if(this._getKeyboardExtension().isInActionMode()){return}const n=e.getCellInfo(t.target);const i=o.getRTL();if(d._isKeyCombination(t,null,r.SHIFT)){if(n.isOfType(l.DATACELL)){if(!this._oRangeSelection){u(t);return}const o=e.getFocusedItemInfo(this);const n=e.hasRowHeader(this)&&o.cellInRow===1;if(n&&!e.isRowSelectorSelectionAllowed(this)){u(t)}}else if(n.isOfType(l.ROWACTION)){if(!this._oRangeSelection){u(t)}}else if(n.isOfType(l.ROWHEADER)&&i){if(!e.isRowSelectionAllowed(this)){u(t)}}else if(n.isOfType(l.COLUMNROWHEADER)&&i){u(t)}else if(n.isOfType(l.COLUMNHEADER)){let o=-e.convertCSSSizeToPixel(a);let s=0;if(i){o=o*-1}for(let t=n.columnIndex;t<n.columnIndex+n.columnSpan;t++){s+=e.Column.getColumnWidth(this,t)}const l=this.getColumns()[n.columnIndex];e.Column.resizeColumn(this,l,s+o,true,n.columnSpan);u(t)}}else if(d._isKeyCombination(t,null,r.CTRL)){if(n.isOfType(l.COLUMNHEADER)){u(t);L(this.getColumns()[n.columnIndex],i)}}else if(d._isKeyCombination(t,null,r.ALT)){u(t)}};d.prototype.onsaprightmodifiers=function(t){if(t.isMarked()){u(t);return}g(t);if(this._getKeyboardExtension().isInActionMode()){return}const n=e.getCellInfo(t.target);const i=o.getRTL();if(d._isKeyCombination(t,null,r.SHIFT)){if(n.isOfType(l.DATACELL)){if(!this._oRangeSelection){u(t)}}else if(n.isOfType(l.ROWHEADER)){if(!e.isRowSelectionAllowed(this)){u(t)}}else if(n.isOfType(l.ROWACTION)&&i){if(!this._oRangeSelection){u(t)}}else if(n.isOfType(l.COLUMNHEADER)){let o=e.convertCSSSizeToPixel(a);let s=0;if(i){o=o*-1}for(let t=n.columnIndex;t<n.columnIndex+n.columnSpan;t++){s+=e.Column.getColumnWidth(this,t)}const l=this.getColumns()[n.columnIndex];e.Column.resizeColumn(this,l,s+o,true,n.columnSpan);u(t)}else if(n.isOfType(l.COLUMNROWHEADER)){u(t)}}else if(d._isKeyCombination(t,null,r.CTRL)){if(n.isOfType(l.COLUMNHEADER)){u(t);L(this.getColumns()[n.columnIndex],!i)}}else if(d._isKeyCombination(t,null,r.ALT)){u(t)}};d.prototype.onsaphome=function(t){const o=this._getKeyboardExtension();g(t);if(o.isInActionMode()){return}if(e.Grouping.isInGroupHeaderRow(t.target)){u(t);return}const n=e.getCellInfo(t.target);if(n.isOfType(l.DATACELL|l.ROWACTION|l.COLUMNHEADER|l.ROWACTIONCOLUMNHEADER)){const n=e.getFocusedItemInfo(this);const i=n.cell;const s=n.cellInRow;const l=this.getComputedFixedColumnCount();const f=e.hasRowHeader(this);const r=f?1:0;if(e.hasFixedColumns(this)&&s>l+r){u(t);o.focusItem(i-s+l+r,null)}else if(f&&s>1){u(t);o.focusItem(i-s+r,null)}}};d.prototype.onsapend=function(t){const o=this._getKeyboardExtension();g(t);if(o.isInActionMode()){return}if(e.Grouping.isInGroupHeaderRow(t.target)){u(t);return}const n=e.getCellInfo(t.target);if(n.isOfType(l.ANY)){const i=e.getFocusedItemInfo(this);const s=i.cell;const f=i.columnCount;const r=this.getComputedFixedColumnCount();const c=i.cellInRow;const a=e.hasRowHeader(this);const g=a?1:0;let d=false;if(n.isOfType(l.COLUMNHEADER)&&e.hasFixedColumns(this)){const e=parseInt(n.cell.getAttribute("colspan")||1);if(e>1&&c+e-g===r){d=true}}if(a&&c===0){u(t);o.focusItem(s+1,null)}else if(e.hasFixedColumns(this)&&c<r-1+g&&!d){u(t);o.focusItem(s+r-c,null)}else if(e.hasRowActions(this)&&c<f-2){u(t);o.focusItem(s-c+f-2,null)}}};d.prototype.onsaphomemodifiers=function(t){const o=this._getKeyboardExtension();g(t);if(o.isInActionMode()){return}if(d._isKeyCombination(t,null,r.CTRL)){const n=e.getCellInfo(t.target);if(n.isOfType(l.ANYCONTENTCELL|l.COLUMNHEADER)){u(t);const n=e.getFocusedItemInfo(this);const i=n.row;if(i>0){const s=n.cell;const l=n.columnCount;const f=e.getHeaderRowCount(this);const r=this._getRowCounts();if(i<f+r.fixedTop){o.focusItem(s-l*i,t)}else if(i>=f+r.fixedTop&&i<f+e.getNonEmptyRowCount(this)-r.fixedBottom){this._getScrollExtension().scrollVerticallyMax(false);if(r.fixedTop>0){o.focusItem(s-l*(i-f),t)}else{o.focusItem(s-l*i,t)}}else{this._getScrollExtension().scrollVerticallyMax(false);o.focusItem(s-l*(i-f-r.fixedTop),t)}}}}};d.prototype.onsapendmodifiers=function(t){const o=this._getKeyboardExtension();g(t);if(o.isInActionMode()){return}if(d._isKeyCombination(t,null,r.CTRL)){const n=e.getCellInfo(t.target);if(n.isOfType(l.ANY)){const n=e.getFocusedItemInfo(this);const i=n.row;const s=e.getHeaderRowCount(this);const l=e.getNonEmptyRowCount(this);const f=this._getRowCounts();u(t);if(f.fixedBottom===0||i<s+l-1||e.isNoDataVisible(this)&&i<s-1){const r=n.cell;const c=n.columnCount;if(e.isNoDataVisible(this)){o.focusItem(r+c*(s-i-1),t)}else if(i<s){if(f.fixedTop>0){o.focusItem(r+c*(s+f.fixedTop-i-1),t)}else{this._getScrollExtension().scrollVerticallyMax(true);o.focusItem(r+c*(s+l-f.fixedBottom-i-1),t)}}else if(i>=s&&i<s+f.fixedTop){this._getScrollExtension().scrollVerticallyMax(true);o.focusItem(r+c*(s+l-f.fixedBottom-i-1),t)}else if(i>=s+f.fixedTop&&i<s+l-f.fixedBottom){this._getScrollExtension().scrollVerticallyMax(true);o.focusItem(r+c*(s+l-i-1),t)}else{o.focusItem(r+c*(s+l-i-1),t)}}}}};d.prototype.onsappageup=function(t){const o=this._getKeyboardExtension();g(t);if(o.isInActionMode()){return}const n=e.getCellInfo(t.target);if(n.isOfType(l.ANYCONTENTCELL|l.COLUMNHEADER)){const i=e.getFocusedItemInfo(this);const s=i.row;const f=e.getHeaderRowCount(this);const r=this._getRowCounts();if(r.fixedTop===0&&s>=f||r.fixedTop>0&&s>f){u(t);const c=i.cell;const a=i.columnCount;if(s<f+r.fixedTop){o.focusItem(c-a*(s-f),t)}else if(s===f+r.fixedTop){const i=e.getNonEmptyRowCount(this)-r.fixedTop-r.fixedBottom;const u=this.getFirstVisibleRow();E(this,t,true);if(u<i){if(r.fixedTop>0||n.isOfType(l.ROWACTION)){o.focusItem(c-a*(s-f),t)}else{o.focusItem(c-a*f,t)}}}else if(s>f+r.fixedTop&&s<f+e.getNonEmptyRowCount(this)){o.focusItem(c-a*(s-f-r.fixedTop),t)}else{o.focusItem(c-a*(s-f-e.getNonEmptyRowCount(this)+1),t)}}if(n.isOfType(l.ROWACTION)&&s===f&&r.fixedTop>0){u(t)}}};d.prototype.onsappagedown=function(t){const o=this._getKeyboardExtension();g(t);if(o.isInActionMode()){return}const n=e.getCellInfo(t.target);if(n.isOfType(l.ANY)){const i=e.getFocusedItemInfo(this);const s=i.row;const f=e.getHeaderRowCount(this);const r=e.getNonEmptyRowCount(this);const c=this._getRowCounts();u(t);if(e.isNoDataVisible(this)&&s<f-1||c.fixedBottom===0||s<f+r-1){const a=i.cell;const u=i.columnCount;if(s<f-1&&!n.isOfType(l.COLUMNROWHEADER)){o.focusItem(a+u*(f-s-1),t)}else if(s<f){if(!e.isNoDataVisible(this)){o.focusItem(a+u*(f-s),t)}}else if(s>=f&&s<f+r-c.fixedBottom-1){o.focusItem(a+u*(f+r-c.fixedBottom-s-1),t)}else if(s===f+r-c.fixedBottom-1){const n=e.getNonEmptyRowCount(this)-c.fixedTop-c.fixedBottom;const i=this._getTotalRowCount()-c.fixedBottom-this.getFirstVisibleRow()-n*2;R(this,t,true);if(i<n&&c.fixedBottom>0){o.focusItem(a+u*(f+r-s-1),t)}}else{o.focusItem(a+u*(f+r-s-1),t)}}}};d.prototype.onsappageupmodifiers=function(t){const o=this._getKeyboardExtension();g(t);if(o.isInActionMode()){return}if(d._isKeyCombination(t,null,r.ALT)){const n=e.getCellInfo(t.target);const i=e.getFocusedItemInfo(this);if(n.isOfType(l.DATACELL|l.COLUMNHEADER)){const n=i.cell;const s=i.cellInRow;const l=e.hasRowHeader(this);const f=l?1:0;const r=c;u(t);if(l&&(e.Grouping.isInGroupHeaderRow(t.target)||s===1)){o.focusItem(n-s,null)}else if(s-f<r){o.focusItem(n-s+f,null)}else{o.focusItem(n-r,null)}}else if(n.isOfType(l.ROWACTION)){o.focusItem(i.cell-1,null)}}};d.prototype.onsappagedownmodifiers=function(t){const o=this._getKeyboardExtension();g(t);if(o.isInActionMode()){return}if(d._isKeyCombination(t,null,r.ALT)){const n=e.getCellInfo(t.target);if(n.isOfType(l.DATACELL|l.ROWHEADER|l.ANYCOLUMNHEADER)){const i=e.getFocusedItemInfo(this);const s=i.cellInRow;const f=e.hasRowHeader(this);const r=f?1:0;const a=e.getVisibleColumnCount(this);const g=parseInt(n.cell.getAttribute("colspan")||1);u(t);if(s+g-r<a){const n=i.cell;const l=c;if(f&&s===0){o.focusItem(n+1,null)}else if(g>l){o.focusItem(n+g,null)}else if(s+g-r+l>a){o.focusItem(n+a-s-1+r,null)}else if(!e.Grouping.isInGroupHeaderRow(t.target)){o.focusItem(n+l,null)}}else if(n.isOfType(l.DATACELL)&&e.hasRowActions(this)&&s===i.columnCount-2){o.focusItem(i.cell+1,null)}}}};d.prototype.onsapenter=function(e){w(this,e)};return d});
//# sourceMappingURL=KeyboardDelegate.js.map