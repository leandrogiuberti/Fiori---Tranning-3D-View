/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Lib","sap/ui/dt/Util","sap/ui/rta/plugin/Plugin"],function(t,e,n){"use strict";const a=n.extend("sap.ui.rta.plugin.AddXML",{metadata:{library:"sap.ui.rta",properties:{fragmentHandler:{type:"function"}},associations:{},events:{}}});const o="addXML";a.prototype._isEditable=async function(t){const e=this.getAction(t);if(e===null){return Promise.resolve(false)}const n=await this.hasChangeHandler(o,t.getElement());return n};a.prototype.isEnabled=function(t){const e=t.length===1&&!this.isInReuseComponentOnS4HanaCloud(t[0])&&this.hasStableId(t[0]);return e};a.prototype.getActionText=function(e,n,a){const o=n.name;const i=e.getElement();let r;if(o){if(typeof o==="function"){return o(i)}r=e.getDesignTimeMetadata()?e.getDesignTimeMetadata().getLibraryText(i,o):""}else{r=t.getResourceBundleFor("sap.ui.rta").getText(a)}if(this.isInReuseComponentOnS4HanaCloud(e)){r+=` (${t.getResourceBundleFor("sap.ui.rta").getText("CTX_DISABLED_REUSE")})`}else if(!this.hasStableId(e)){r+=` (${t.getResourceBundleFor("sap.ui.rta").getText("CTX_DISABLED_NO_STABLE_ID")})`}return r};a.prototype.handler=async function(t,n){try{const e=n.fragmentHandler||this.getFragmentHandler();if(!e){throw Error("Fragment handler function is not available in the handler")}const a=t[0];const i=this.getAction(a)?.excludedAggregations||[];const r=await e(a,i);const s=await this.getCommandFactory().getCommandFor(a.getElement(),o,r);this.fireElementModified({command:s})}catch(t){throw e.propagateError(t,"AddXML#handler","Error occurred in AddXML handler function","sap.ui.rta")}};a.prototype.getMenuItems=function(t){return this._getMenuItems(t,{pluginId:"CTX_ADDXML",icon:"sap-icon://attachment-html",additionalInfoKey:"ADDXML_RTA_CONTEXT_MENU_INFO"})};a.prototype.getActionName=function(){return"addXML"};a.prototype.getAction=function(t){const e=n.prototype.getAction.apply(this,[t]);return e||{changeType:o}};return a});
//# sourceMappingURL=AddXMLPlugin.js.map