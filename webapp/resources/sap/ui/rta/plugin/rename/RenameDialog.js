/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/ManagedObject","sap/ui/core/Element","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ui/model/resource/ResourceModel","sap/ui/rta/util/validateText","sap/ui/rta/Utils"],function(e,t,o,a,i,s,n){"use strict";const r=e.extend("sap.ui.rta.plugin.rename.RenameDialog");r.prototype._createPopup=async function(){const e=await o.load({name:"sap.ui.rta.plugin.rename.RenameDialog",controller:this});e.addStyleClass(n.getRtaStyleClassName());this.oDialogModel=new a;e.setModel(this.oDialogModel);const t=new i({bundleName:"sap.ui.rta.messagebundle"});e.setModel(t,"i18n");return e};r.prototype._openPopup=function(){this._oDialog.open();const e=t.getElementById("sapUiRtaRenameDialog_input");e.getFocusDomRef().select();return new Promise(e=>{this._fnResolveAfterClose=e})};function l(e){if(e.currentText){return e.currentText}const t=e.overlay;const o=t.getElement();return t.getDesignTimeMetadata().getLabel(o)}r.prototype.openDialogAndHandleRename=async function(e){this._oDialog=await this._createPopup();const t=l(e);this.bAcceptSameText=e.acceptSameText||false;this.oDialogModel.setData({oldText:t,newText:t,dialogSettings:e.dialogSettings||{},isSaveEnabled:this.bAcceptSameText});this.oDialogModel.refresh(true);this.oAction=e.action;const o=await this._openPopup();const a=new Promise(e=>{this._oDialog.attachAfterClose(()=>{this._oDialog.destroy();e()})});this._oDialog.close();await a;return o};function c(){const e=this.oDialogModel.getData();const t=e.newText||"";const o=e.oldText||"";try{s(t,o,this.oAction);this.oDialogModel.setProperty("/validationError",undefined);this.oDialogModel.setProperty("/isSaveEnabled",true);return true}catch(e){if(e.message==="sameTextError"){this.oDialogModel.setProperty("/validationError",undefined);this.oDialogModel.setProperty("/isSaveEnabled",this.bAcceptSameText);return true}this.oDialogModel.setProperty("/validationError",e.message);this.oDialogModel.setProperty("/isSaveEnabled",false);return false}}r.prototype.onTextChange=function(e){const t=e.getParameter("value").trim("");this.oDialogModel.setProperty("/newText",t.length?t:"Â ");c.call(this)};r.prototype.onSave=function(){if(c.call(this)){this._fnResolveAfterClose(this.oDialogModel.getData().newText)}};r.prototype.onCancel=function(){this._fnResolveAfterClose()};r.prototype.destroy=function(...t){e.prototype.destroy.apply(this,t);if(this._oDialog){this._oDialog.destroy()}};return r});
//# sourceMappingURL=RenameDialog.js.map