/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/uid","sap/ui/dt/Util","sap/ui/fl/Utils","sap/ui/rta/plugin/rename/RenameDialog","sap/ui/rta/plugin/BaseCreate","sap/ui/rta/plugin/Plugin"],function(t,e,n,a,i,r){"use strict";var o=i.extend("sap.ui.rta.plugin.CreateContainer",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});o.prototype.init=function(...t){r.prototype.init.apply(this,t);this._oDialog=new a};o.prototype.isEnabled=function(t,e){var n=t[0];var a=this.getCreateAction(e,n);return this.isActionEnabled(a,e,n)};o.prototype.getCreateContainerText=function(t,e){var n=this.getCreateAction(t,e);var a=this._getParentOverlay(t,e);var i=a.getDesignTimeMetadata();var r=a.getElement();var o="CTX_CREATE_CONTAINER";return this._getText(n,r,i,o)};o.prototype._getContainerTitle=function(t,e,n){var a="TITLE_CREATE_CONTAINER";return this._getText(t,e,n,a)};o.prototype.handleCreate=async function(a,i){const r=this.getCreateAction(a,i);const o=this._getParentOverlay(a,i);const s=o.getElement();const g=o.getDesignTimeMetadata();const l=n.getViewForControl(s);const c=a?i.getElement():null;const p=l.createId(t());const d=g.getAggregation(r.aggregation).getIndex;const u=this._determineIndex(s,c,r.aggregation,d);const C=this.getVariantManagementReference(o);const h=this._getContainerTitle(r,s,g);const T=await this._oDialog.openDialogAndHandleRename({overlay:i,action:r,currentText:h,acceptSameText:true,dialogSettings:{title:this.getCreateContainerText(a,i)}});if(!T){return}try{const t=await this.getCommandFactory().getCommandFor(s,"createContainer",{newControlId:p,label:T,index:u,parentId:s.getId()},g,C);this.fireElementModified({command:t,action:r,newControlId:p})}catch(t){throw e.createError("CreateContainer#handleCreate",t,"sap.ui.rta")}};o.prototype.getMenuItems=function(t){var e=true;var n="CTX_CREATE_SIBLING_CONTAINER";var a=this.getRank(n);var i=[];var r=function(t,e){return this.isEnabled(e,t)}.bind(this);for(var o=0;o<2;o++){if(this.isAvailable(t,e)){i.push({id:n,text:this.getCreateContainerText.bind(this,e),handler:this.handleCreate.bind(this,e,t[0]),enabled:r.bind(this,e),icon:"sap-icon://add-folder",rank:a})}e=false;n="CTX_CREATE_CHILD_CONTAINER";a=this.getRank(n)}return i};o.prototype.getActionName=function(){return"createContainer"};o.prototype.destroy=function(...t){r.prototype.destroy.apply(this,t);this._oDialog.destroy();delete this._oDialog};return o});
//# sourceMappingURL=CreateContainer.js.map