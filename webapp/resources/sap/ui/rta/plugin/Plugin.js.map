{"version":3,"file":"Plugin.js","names":["sap","ui","define","debounce","JsControlTreeModifier","OverlayRegistry","OverlayUtil","Plugin","ChangesWriteAPI","Utils","hasStableId","isReuseComponent","RtaUtils","CONTEXT_MENU_RANKS","CTX_ADDXML","CTX_EXTEND_CONTROLLER","CTX_RENAME","CTX_ANNOTATION_CHANGE_SINGLE_LABEL","CTX_ADD_ELEMENTS_AS_SIBLING","CTX_ADD_ELEMENTS_AS_CHILD","CTX_ADD_ELEMENTS_CHILD_AND_SIBLING","CTX_CREATE_SIBLING_CONTAINER","CTX_CREATE_CHILD_CONTAINER","CTX_REMOVE","CTX_LOCAL_RESET","CTX_CUT","CTX_PASTE","CTX_GROUP_FIELDS","CTX_UNGROUP_FIELDS","CTX_ADDXML_AT_EXTENSIONPOINT","CTX_SETTINGS","CTX_CREATE_SIBLING_IFRAME","CTX_VARIANT_SET_TITLE","CTX_COMP_VARIANT_RENAME","CTX_VARIANT_SAVE","CTX_COMP_VARIANT_SAVE","CTX_VARIANT_SAVEAS","CTX_COMP_VARIANT_SAVE_AS","CTX_VARIANT_MANAGE","CTX_COMP_VARIANT_MANAGE","CTX_VARIANT_SWITCH_SUBMENU","CTX_COMP_VARIANT_SWITCH","CTX_COMP_VARIANT_CONTENT","CTX_ANNOTATION","_handleEditableByPlugin","mPropertyBag","aPromises","oSourceElementOverlay","oResponsibleElementOverlay","this","getActionName","isResponsibleElementActionAvailable","getResponsibleElementOverlay","vEditable","getElement","getDesignTimeMetadata","markedAsNotAdaptable","_isEditable","sourceElementOverlay","then","vEditablePromiseValue","_handleModifyPluginList","bind","push","BasePlugin","extend","metadata","abstract","library","properties","commandFactory","type","multiple","commandStack","events","elementModified","command","prototype","executeWhenVisible","oElementOverlay","fnCallback","fnGeometryChangedCallback","oEvent","getSource","getGeometry","visible","detachEvent","mOverlayGeometry","getElementVisibility","attachEvent","debounceFunction","mDebounceFunctions","oOverlay","sName","fnOriginalFunction","sOverlayId","getId","_onElementModified","async","getCommandStack","getLastCommandExecuted","_mDebounceFunctions","insertOrRemove","addOrSet","oParams","getParameters","aRelevantOverlays","name","_getRelevantOverlays","value","evaluateEditable","onRegistration","getDesignTime","getStatus","attachEventOnce","oDesignTime","sAggregationName","aAlreadyDefinedRelevantOverlays","getRelevantOverlays","length","getIsPartOfTemplate","findAllOverlaysInContainer","oAggregationOverlay","getAggregationOverlay","aAggregationChildren","getChildren","filter","oChildOverlay","indexOf","concat","setRelevantOverlays","aOverlays","getBusyPlugins","setProcessingStatus","reduce","Promise","all","error","undefined","_modifyPluginList","asChild","asSibling","bIsEditable","bOverlayIsSibling","addToPluginsList","removeFromPluginsList","_retrievePluginName","bSibling","getMetadata","getName","_isEditableByPlugin","sPluginName","getEditableByPlugins","registerElementOverlay","attachElementModified","deregisterElementOverlay","detachElementModified","getVariantManagementReference","sVariantManagementReference","getVariantManagement","checkAggregationsOnSelf","sAction","sParentAggregationName","sSubAction","oDesignTimeMetadata","oElement","aActionData","getActionDataFromAggregations","oAction","oActionData","aggregation","sChangeType","changeType","bChangeOnRelevantContainer","changeOnRelevantContainer","getRelevantContainer","oRelevantOverlay","getOverlay","resolve","hasChangeHandler","mEditableByPlugins","setEditableByPlugins","Object","values","some","Boolean","setEditable","sControlType","getChangeHandler","element","modifier","layer","getCommandFactory","getFlexSettings","controlType","catch","isAvailable","aElementOverlays","every","_checkRelevantContainerStableID","oRelevantContainer","_checkChangeHandlerAndStableId","getAction","bHasChangeHandler","getRank","sPluginId","_getMenuItems","rank","pluginId","apply","isInReuseComponentOnS4HanaCloud","oComponent","getComponentForControl","bIsS4HanaCloud","isS4HanaCloud"],"sources":["Plugin-dbg.js"],"mappings":"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","ignoreList":[]}