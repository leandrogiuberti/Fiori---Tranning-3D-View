/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/isEmptyObject","sap/base/util/values","sap/ui/base/ManagedObject","sap/ui/dt/plugin/ContextMenu","sap/ui/dt/plugin/ToolHooks","sap/ui/fl/write/api/FeaturesAPI","sap/ui/fl/Layer","sap/ui/rta/command/CommandFactory","sap/ui/rta/plugin/additionalElements/AdditionalElementsPlugin","sap/ui/rta/plugin/annotations/AnnotationPlugin","sap/ui/rta/plugin/iframe/AddIFrame","sap/ui/rta/plugin/Combine","sap/ui/rta/plugin/CompVariant","sap/ui/rta/plugin/ControlVariant","sap/ui/rta/plugin/CreateContainer","sap/ui/rta/plugin/CutPaste","sap/ui/rta/plugin/DragDrop","sap/ui/rta/plugin/LocalReset","sap/ui/rta/plugin/Remove","sap/ui/rta/plugin/rename/Rename","sap/ui/rta/plugin/Resize","sap/ui/rta/plugin/RTAElementMover","sap/ui/rta/plugin/Selection","sap/ui/rta/plugin/Settings","sap/ui/rta/plugin/Split","sap/ui/rta/plugin/Stretch"],function(t,a,e,i,n,o,s,u,l,m,r,g,c,d,p,h,y,f,P,_,C,F,D,b,E,w){"use strict";const v=e.extend("sap.ui.rta.util.PluginManager",{metadata:{properties:{plugins:{type:"any",defaultValue:{}}}}});v.prototype.init=function(){this.iEditableOverlaysCount=0};v.prototype.getEditableOverlaysCount=function(){return this.iEditableOverlaysCount};v.prototype.getDefaultPlugins=function(t){if(!this._mDefaultPlugins){this._oCommandFactory=new u({flexSettings:t});this._mDefaultPlugins={};this._mDefaultPlugins.selection=new D({commandFactory:this._oCommandFactory,multiSelectionRequiredPlugins:[g.getMetadata().getName(),P.getMetadata().getName()],elementEditableChange:this.onElementEditableChange.bind(this)});this._oRTAElementMover=new F({commandFactory:this._oCommandFactory});this._mDefaultPlugins.dragDrop=new y({elementMover:this._oRTAElementMover,commandFactory:this._oCommandFactory,dragStarted:this.handleStopCutPaste.bind(this)});this._mDefaultPlugins.rename=new _({commandFactory:this._oCommandFactory,editable:this.handleStopCutPaste.bind(this)});this._mDefaultPlugins.additionalElements=new l({commandFactory:this._oCommandFactory});this._mDefaultPlugins.createContainer=new p({commandFactory:this._oCommandFactory});this._mDefaultPlugins.remove=new P({commandFactory:this._oCommandFactory});this._mDefaultPlugins.cutPaste=new h({elementMover:this._oRTAElementMover,commandFactory:this._oCommandFactory});this._mDefaultPlugins.settings=new b({commandFactory:this._oCommandFactory});this._mDefaultPlugins.combine=new g({commandFactory:this._oCommandFactory});this._mDefaultPlugins.split=new E({commandFactory:this._oCommandFactory});this._mDefaultPlugins.resize=new C({commandFactory:this._oCommandFactory});this._mDefaultPlugins.contextMenu=new i;this._mDefaultPlugins.stretch=new w;if(o.isVariantAdaptationEnabled()){this._mDefaultPlugins.compVariant=new c({commandFactory:this._oCommandFactory})}this._mDefaultPlugins.controlVariant=new d({commandFactory:this._oCommandFactory});this._mDefaultPlugins.addIFrame=new r({commandFactory:this._oCommandFactory});this._mDefaultPlugins.toolHooks=new n;if(t.layer===s.CUSTOMER&&o.isLocalResetEnabled()){this._mDefaultPlugins.localReset=new f({commandFactory:this._oCommandFactory})}if(o.areAnnotationChangesEnabled()){this._mDefaultPlugins.annotation=new m({commandFactory:this._oCommandFactory})}}return{...this._mDefaultPlugins}};v.prototype.preparePlugins=function(a,e,i){if(t(this.getPlugins())){this.setPlugins(this.getDefaultPlugins(a))}else{this._destroyDefaultPlugins(this.getPlugins())}Object.keys(this.getPlugins()).forEach(t=>{if(this.getPlugin(t).attachElementModified){this.getPlugin(t).attachElementModified(e)}});this.provideCommandStack(i)};v.prototype.getPluginList=function(){return a(this.getPlugins())};v.prototype.getPlugin=function(t){return this.getPlugins()[t]};v.prototype.provideCommandStack=function(t){Object.keys(this.getPlugins()).forEach(a=>{if(this.getPlugin(a)&&this.getPlugin(a).setCommandStack){this.getPlugin(a).setCommandStack(t)}})};v.prototype.onElementEditableChange=function(t){const a=t.getParameter("editable");if(a){this.iEditableOverlaysCount+=1}else{this.iEditableOverlaysCount-=1}};v.prototype.handleStopCutPaste=function(){const t=this.getPlugin("cutPaste");if(t){t.stopCutAndPaste()}};v.prototype._destroyDefaultPlugins=function(t){for(const a in this._mDefaultPlugins){const e=this._mDefaultPlugins[a];if(e&&!e.bIsDestroyed){if(!t||t[a]!==e){e.destroy()}}}};return v});
//# sourceMappingURL=PluginManager.js.map