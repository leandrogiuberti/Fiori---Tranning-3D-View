/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/ManagedObject","sap/ui/rta/appVariant/AppVariantDialog","sap/ui/rta/appVariant/AppVariantUtils","sap/ui/rta/appVariant/Feature","sap/ui/rta/appVariant/S4HanaCloudBackend"],function(t,e,a,n,r){"use strict";const i=t.extend("sap.ui.rta.appVariant.AppVariantManager",{metadata:{library:"sap.ui.rta",properties:{commandSerializer:{type:"object"},layer:{type:"string"}}}});i.prototype._openDialog=function(t,a){const n=new e("appVariantDialog");n.attachCreate(t);n.attachCancel(a);n.attachAfterClose(function(){this.destroy()});n.open();return n};i.prototype._prepareAppVariantData=function(t,e){return{referenceAppId:t["sap.app"].id,title:e.title,subTitle:e.subTitle,description:e.description,icon:e.icon,inbounds:t["sap.app"].crossNavigation&&t["sap.app"].crossNavigation.inbounds?t["sap.app"].crossNavigation.inbounds:null}};i.prototype.createAllInlineChanges=function(t,e){a.getId(t.referenceAppId);const n=[];let r={};r.content=a.prepareTextsChange("title",t.title);n.push(a.createInlineChange(r,"appdescr_app_setTitle",e));r.content=a.prepareTextsChange("subtitle",t.subTitle);n.push(a.createInlineChange(r,"appdescr_app_setSubTitle",e));r.content=a.prepareTextsChange("description",t.description);n.push(a.createInlineChange(r,"appdescr_app_setDescription",e));r=a.getInlineChangeInputIcon(t.icon);n.push(a.createInlineChange(r,"appdescr_ui_setIcon",e));return Promise.all(n)};i.prototype.createAppVariant=function(t,e,n){const r={id:t,parsedHash:e,layer:this.getLayer()};return a.createAppVariant(n,r)};i.prototype.deleteAppVariant=function(t){return a.deleteAppVariant({appId:t},this.getLayer())};i.prototype.processSaveAsDialog=function(t,e){return new Promise(function(a,r){const i=function(e){const n=e.getParameters();const r=this._prepareAppVariantData(t,n);a(r)}.bind(this);const p=function(){if(!e){return n.onGetOverview(true,this.getLayer())}r()}.bind(this);return this._openDialog(i,p)}.bind(this))};i.prototype._clearRTACommandStack=function(){return this.getCommandSerializer().clearCommandStack()};i.prototype.clearRTACommandStack=function(t){const e=this.getCommandSerializer().getCommandStack();if(t&&e.getAllExecutedCommands().length){return this._clearRTACommandStack()}return Promise.resolve()};i.prototype.triggerCatalogPublishing=function(t,e,n){const r=n?a.triggerCatalogAssignment:a.triggerCatalogUnAssignment;return r(t,this.getLayer(),e).catch(function(e){const r=n?"MSG_CATALOG_ASSIGNMENT_FAILED":"MSG_DELETE_APP_VARIANT_FAILED";return a.catchErrorDialog(e,r,t)})};i.prototype.notifyKeyUserWhenPublishingIsReady=function(t,e,n){const i=new r;return i.notifyFlpCustomizingIsReady(t,n).catch(function(t){let r=n?"MSG_TILE_CREATION_FAILED":"MSG_DELETE_APP_VARIANT_FAILED";if(!n&&t.error==="locked"){r="MSG_CATALOGS_LOCKED"}return a.catchErrorDialog(t,r,e)})};i.prototype.showSuccessMessage=function(t){return a.showRelevantDialog(t,true)};return i});
//# sourceMappingURL=AppVariantManager.js.map