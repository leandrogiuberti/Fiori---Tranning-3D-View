/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./View","./HTMLViewRenderer","./ViewType","sap/base/util/merge","sap/ui/base/ManagedObject","sap/ui/base/OwnStatics","sap/ui/core/DeclarativeSupport","sap/ui/model/resource/ResourceModel","sap/base/util/LoaderExtensions"],function(e,t,r,n,o,i,a,l,s){"use strict";const{runWithPreprocessors:u}=i.get(o);var c=e.extend("sap.ui.core.mvc.HTMLView",{metadata:{library:"sap.ui.core",deprecated:true},renderer:t});c.create=function(t){var o=n({},t);o.type=r.HTML;return e.create(o)};sap.ui.htmlview=function(e,t){return sap.ui.view(e,t,r.HTML)};c._sType=r.HTML;c.asyncSupport=true;c._mTemplates={};c._mAllowedSettings={viewName:true,controller:true,viewContent:true,definition:true,controllerName:true,resourceBundleName:true,resourceBundleUrl:true,resourceBundleLocale:true,resourceBundleAlias:true};c._getTemplate=function(e,t){var r=this._getViewUrl(e);var n=this._mTemplates[r];if(!n){n=this._loadTemplate(e,t);if(t&&t.async){var o=this;return n.then(function(e){o._mTemplates[r]=e;return Promise.resolve(e)})}else{this._mTemplates[r]=n}}return t.async?Promise.resolve(n):n};c.prototype.getControllerName=function(){return this._controllerName};c._getViewUrl=function(e){return sap.ui.require.toUrl(e.replace(/\./g,"/"))+".view.html"};c._loadTemplate=function(e,t){var r=e.replace(/\./g,"/")+".view.html";return s.loadResource(r,t)};c.prototype.initViewSettings=function(e){if(!e){throw new Error("mSettings must be given")}if(e.viewName&&e.viewContent){throw new Error("View name and view content are given. There is no point in doing this, so please decide.")}else if(!e.viewName&&!e.viewContent){throw new Error("Neither view name nor view content is given. One of them is required.")}var t=this;function r(){t._oTemplate=document.createElement("div");if(typeof n==="string"){t._oTemplate.innerHTML=n}else{var r=n;var o=document.createDocumentFragment();for(var i=0;i<r.length;i++){o.appendChild(r.item(i))}t._oTemplate.appendChild(o)}var s=t._oTemplate.getElementsByTagName("template")[0];var u=t.getMetadata().getAllProperties();if(s){var p=s.getAttributeNames();for(var m=0;m<p.length;m++){var d=p[m];var v=a.convertAttributeToSettingName(d,t.getId());var f=s.getAttribute(d);var h=u[v];if(!e[v]){if(h){e[v]=a.convertValueToType(a.getPropertyDataType(h),f)}else if(c._mAllowedSettings[v]){e[v]=f}}}t._oTemplate=s}if(t._oTemplate.content){var o=t._oTemplate.content;t._oTemplate=document.createElement("div");t._oTemplate.appendChild(o)}if(e.controllerName){t._controllerName=e.controllerName}if((e.resourceBundleName||e.resourceBundleUrl)&&(!e.models||!e.models[e.resourceBundleAlias])){var g=new l({bundleName:e.resourceBundleName,bundleUrl:e.resourceBundleUrl,bundleLocale:e.resourceBundleLocale,async:e.async});var _=g.getResourceBundle();if(_ instanceof Promise){return _.then(function(){t.setModel(g,e.resourceBundleAlias)})}t.setModel(g,e.resourceBundleAlias)}}var n=e.viewContent;if(!n){n=c._getTemplate(e.viewName,{async:e.async})}if(e.async){return n.then(function(e){n=e;return r()})}r()};c.prototype.onControllerConnected=function(e){var t=this;u(function(){a.compile(t._oTemplate,t)},{settings:this._fnSettingsPreprocessor})};c.prototype.exit=function(){this._oTemplate=null;e.prototype.exit.call(this);if(this._connectedControls){for(var t=0;t<this._connectedControls.length;t++){this._connectedControls[t].destroy()}this._connectedControls=null}};c.prototype.connectControl=function(e){this._connectedControls=this._connectedControls||[];this._connectedControls.push(e)};return c});
//# sourceMappingURL=HTMLView.js.map