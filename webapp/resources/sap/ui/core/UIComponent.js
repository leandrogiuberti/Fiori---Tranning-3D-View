/*
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["../base/ManagedObject","../base/OwnStatics","./Component","./ComponentHooks","./Element","sap/ui/core/mvc/ViewType","sap/ui/core/mvc/XMLProcessingMode","./UIComponentMetadata","./mvc/Controller","./mvc/View","./mvc/_ViewFactory","sap/base/util/ObjectPath","sap/base/future","sap/base/Log"],function(t,e,o,n,i,r,s,a,u,c,f,p,l,g){"use strict";const{runWithPreprocessors:h}=e.get(t);var d=o.extend("sap.ui.core.UIComponent",{constructor:function(t,e){var n=false;try{if(typeof t!=="string"){e=t;t=undefined}if(e&&e.hasOwnProperty("_routerHashChanger")){this._oRouterHashChanger=e._routerHashChanger;delete e._routerHashChanger}if(e&&e.hasOwnProperty("_propagateTitle")){this._bRoutingPropagateTitle=e._propagateTitle;delete e._propagateTitle}o.apply(this,arguments);n=true}finally{if(!n){this._destroyCreatedInstances()}}},metadata:{abstract:true,rootView:null,publicMethods:["render"],aggregations:{rootControl:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}},designtime:"sap/ui/core/designtime/UIComponent.designtime",routing:{}}},a);d.prototype.init=function(){var t=this;var e={};var o;if(this.getAutoPrefixId()){e.id=function(e){return t.createId(e)}}function i(e){var o=function(){n.onUIComponentInstanceInitialized.execute(t)};var i=function(e){t.setAggregation("rootControl",e)};if(e instanceof Promise){t.pRootControlLoaded=t.pRootControlLoaded.then(function(t){i(t);o();return t})}else if(e instanceof c&&e.oAsyncState&&e.oAsyncState.promise){i(e);t.pRootControlLoaded=t.pRootControlLoaded.then(function(t){o();return t})}else{i(e);o()}}function r(e,o){var n;if(e instanceof Promise){n=t.pRootControlLoaded.then(function(t){return t instanceof c?t.getId():undefined})}else if(e instanceof c){n=e.getId()}if(n){if(o.targetParent===undefined){o.targetParent=n}if(t._oTargets){t._oTargets._setRootViewId(n)}}}var s=this._getManifestEntry("/sap.ui5/routing",true)||{},a=s.config||{},u=s.routes;if(this.getManifestObject()?._getSchemaVersion()===2||this.isA("sap.ui.core.IAsyncContentCreation")){a.async=true}const f=this.getMetadata().collectRoutingClasses(this)||{};if(f.routerClass){var p=f.routerClass;this._oRouter=new p(u,a,this,s.targets,this._oRouterHashChanger);this._oTargets=this._oRouter.getTargets();this._oViews=this._oRouter.getViews()}else if(f.targetsClass){var l=f.views;this._oViews=new l({component:this});var g=f.targetsClass;this._oTargets=new g({targets:s.targets,config:a,views:this._oViews})}this.runAsOwner(function(){h(function(){o=t.createContent()},e)});if(o instanceof Promise){if(this.isA("sap.ui.core.IAsyncContentCreation")){this.pRootControlLoaded=o}else{throw new Error("Interface 'sap.ui.core.IAsyncContentCreation' must be implemented for component '"+this.getMetadata().getComponentName()+"' when 'createContent' is implemented asynchronously")}}else if(o instanceof c&&o.oAsyncState&&o.oAsyncState.promise){this.pRootControlLoaded=o.loaded()}else{this.pRootControlLoaded=Promise.resolve(o)}r(o,a);i(o)};function y(t){g.error(`The routing related class '${t}' was loaded synchronously as a result of a synchronous Component creation. Resolving a class in this fashion is deprecated. `+`Please use the asynchronous Component.create() factory instead and ensure all non-default routing relevant classes are maintained in the manifest.json.`)}function C(t){var e;if(typeof t==="string"){let o;if(t.startsWith("module:")){o=t.slice("module:".length)}else{o=t.replace(/\./g,"/")}e=sap.ui.require(o);if(!e){e=sap.ui.requireSync(o);y(o)}if(!e){e=p.get(t);if(e){g.error(`The class '${t}' was accessed via globals. `+"Retrieving routing classes via globals is deprecated and a result of synchronous Component creation, "+"please use the asynchronous sap.ui.core.Component.create() factory instead.")}}if(!e){l.errorThrows(`${this}: The specified class for router or targets "${t}" is undefined.`)}}else{e=t}return e}d.prototype.rootControlLoaded=function(){if(!this.pRootControlLoaded){l.errorThrows("Mandatory init() not called for UIComponent: '"+this.getManifestObject().getComponentName()+"'. A sub-class of sap.ui.core.UIComponent which overrides the init() function must apply the super init() function as well.",null,"sap.ui.support",function(){return{type:"missingInitInUIComponent"}})}return this.pRootControlLoaded||Promise.resolve(this.getRootControl())};d.prototype.destroy=function(){n.onUIComponentInstanceDestroy.execute(this);this._destroyCreatedInstances();return o.prototype.destroy.apply(this,arguments)};d.prototype._destroyCreatedInstances=function(){if(this._oRouter){this._oRouter.destroy();delete this._oRouter}else{if(this._oTargets){this._oTargets.destroy();this._oTargets=null}if(this._oViews){this._oViews.destroy();this._oViews=null}}};d.getRouterFor=function(t){var e=t;if(e instanceof u){e=e.getView()}if(e instanceof c){var n=o.getOwnerComponentFor(e);if(n){return n.getRouter()}else{return undefined}}};d.prototype.getRouter=function(){return this._oRouter};d.prototype.hasNativeRouter=function(){return this._oRouter===this.getRouter()};d.prototype.getTargets=function(){return this._oTargets};d.prototype.getAutoPrefixId=function(){return!!this.getManifestObject().getEntry("/sap.ui5/autoPrefixId")};d.prototype.byId=function(t){return i.getElementById(this.createId(t))};d.prototype.createId=function(t){if(!this.isPrefixedId(t)){t=this.getId()+"---"+t}return t};d.prototype.getLocalId=function(t){var e=this.getId()+"---";return t&&t.indexOf(e)===0?t.slice(e.length):null};d.prototype.isPrefixedId=function(t){return!!(t&&t.indexOf(this.getId()+"---")===0)};d.prototype.createContent=function(){var t=this._getManifestEntry("/sap.ui5/rootView",true);if(t&&typeof t==="string"){t={viewName:t}}if(t&&typeof t==="object"){if(!t.type&&!t.viewName?.startsWith("module:")){t.type=r.XML}if(t.id){t.id=this.createId(t.id)}if(this.getManifestObject()?._getSchemaVersion()===2){t.async=true}if(t.async&&t.type===r.XML){t.processingMode=s.Sequential}const e=this.isA("sap.ui.core.IAsyncContentCreation");if(e){return c.create(t)}else{return f.create(t)}}else if(t){throw new Error("Configuration option 'rootView' of component '"+this.getMetadata().getName()+"' is invalid! 'rootView' must be type of string or object!")}return null};d.prototype.getRootControl=function(){return this.getAggregation("rootControl")};d.prototype.render=function(t){var e=this.getRootControl();if(e&&t){t.renderControl(e)}};d.prototype.getUIArea=function(){return this.oContainer?this.oContainer.getUIArea():null};d.prototype.getEventingParent=function(){return this.getUIArea()};d.prototype.setContainer=function(t){this.oContainer=t;if(t){this._applyContextualSettings(t._getContextualSettings())}else{this._oContextualSettings=m;if(!this._bIsBeingDestroyed){setTimeout(function(){if(!this.oContainer){this._propagateContextualSettings()}}.bind(this),0)}}return this};d.prototype.onBeforeRendering=function(){};d.prototype.onAfterRendering=function(){};d.prototype._getRouterClassName=function(){var t=this._getManifestEntry("/sap.ui5/routing",true)||{},e=t.config||{};return e.routerClass};a.prototype.collectRoutingClasses=function(t){const e={};const o=this._getManifestEntry("/sap.ui5/rootView");const n=typeof o==="string"?o:o?.viewName;if(n?.startsWith("module:")){e["viewClass"]=n}else if(n){const t=o.type||"XML";if(r[t]){const o="sap/ui/core/mvc/"+r[t]+"View";e["viewClass"]=o}}const i=this._getManifestEntry("/sap.ui5/routing",true);if(i){if(i.routes){let o;const n=this.getStaticProperty("_fnGetRouterClassName");if(typeof n==="function"){o=n(this.getManifestObject())}o??=t?._getRouterClassName()||i.config?.routerClass||"sap.ui.core.routing.Router";if(typeof o==="string"){o=o.replace(/\./g,"/")}e["routerClass"]=o}else if(i.targets){let t=i.config?.targetsClass||"sap.ui.core.routing.Targets";if(typeof t==="string"){t=t.replace(/\./g,"/")}e["targetsClass"]=t;e["views"]="sap/ui/core/routing/Views"}}if(t){for(const t in e){const o=e[t];e[t]=C(o)}}return e};const{_oContextualSettings:m}=new t;return d});
//# sourceMappingURL=UIComponent.js.map