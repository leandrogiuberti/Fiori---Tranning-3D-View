/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/EventBus","sap/ui/core/Theming","sap/ui/documentation/sdk/controller/BaseController","sap/ui/model/json/JSONModel","sap/ui/thirdparty/URI","sap/uxap/ThrottledTaskHelper"],function(e,t,i,o,s,r){"use strict";var n={HTML:"index.html",XML:"App.view.xml",INDEX_JS:"index.js",CONTROLLER_JS:"App.controller.js"},a="HelloWorld",l=function(e){return a+"/"+e},u={};u[n.HTML]="text";u[n.XML]="xml";u[n.INDEX_JS]="javascript";u[n.CONTROLLER_JS]="javascript";return i.extend("sap.ui.documentation.sdk.controller.LiveEditor",{onInit:function(){this._oSrcFileContent={};this._oViewModel=new o({autoPreview:true,selectedFileName:n.XML,selectedFileType:u[n.XML],selectedFileContent:""});this.getView().setModel(this._oViewModel,"viewModel");new o(sap.ui.require.toUrl("sap/ui/documentation/sdk/model/LiveEditorData.json")).attachRequestCompleted(function(e){var t=e.getSource().getData(),i=new s(sap.ui.require.toUrl("sap-ui-core.js"),document.baseURI).href();if(t[n.HTML]){t[n.HTML]=t[n.HTML].replace(/&sol;/g,"/").replace("resources/sap-ui-core.js",i)}this._oSrcFileContent=t;this.showFileInEditor(n.XML)}.bind(this));this.getView().byId("resultBox").addEventDelegate({onAfterRendering:this.requestExecuteCurrentSrc.bind(this)});this._bSuppressRemoveOnce=false;this._bSuppressInsertOnce=false;this._oThrottledTask=null;this.bus=e.getInstance();this.bus.subscribe("themeChanged","onDemoKitThemeChanged",this.onDemoKitThemeChanged,this)},onDemoKitThemeChanged:function(e,t,i){this._oThrottledTask=null;this.requestExecuteCurrentSrc()},onSrcLiveChange:function(e){var t=e.getParameter("value"),i=e.getParameter("editorEvent").action,o;if(this._bSuppressRemoveOnce===true&&i==="remove"){this._bSuppressRemoveOnce=false;return}if(this._bSuppressInsertOnce===true&&i==="insert"){this._bSuppressInsertOnce=false;return}o=this._oViewModel.getProperty("/selectedFileName");this._oSrcFileContent[o]=t;if(this._oViewModel.getProperty("/autoPreview")){this.requestExecuteCurrentSrc()}},requestExecuteCurrentSrc:function(){this._getExecuteSrcThrottledTask().reSchedule(false,{}).catch(function(e){})},createFrame:function(){var e=document.createElement("iframe");e.id="outputWindow";e.width="100%";e.className="editorOutputWindow";e.src=sap.ui.require.toUrl("sap/ui/documentation/sdk/util/liveEditorOutput.html");e.sandbox="allow-forms allow-modals allow-pointer-lock allow-popups allow-scripts";return e},onFileSwitch:function(e){var t=e.getParameter("selectedKey");this._bSuppressRemoveOnce=true;this._bSuppressInsertOnce=true;this.showFileInEditor(t)},showFileInEditor:function(e){this._oViewModel.setProperty("/selectedFileContent",this._oSrcFileContent[e]);this._oViewModel.setProperty("/selectedFileType",u[e])},_getDataToPost:function(){var e={},i=l(n.INDEX_JS).slice(0,-3),o,s;Object.keys(n).forEach(function(t){s=n[t];o=l(s);e[o]=this._oSrcFileContent[s]},this);return{src:e,moduleNameToRequire:i,activeTheme:t.getTheme().toLowerCase()}},_getExecuteSrcThrottledTask:function(){var e;if(!this._oThrottledTask){e=function(){var e=this.getView().byId("outputWindowWrapper").getDomRef(),t;if(e){while(e.firstChild){e.removeChild(e.firstChild)}t=this.createFrame();t.onload=function(){if(t.contentWindow){t.contentWindow.postMessage(this._getDataToPost(),"*");t.onload=null}}.bind(this);e.appendChild(t)}};this._oThrottledTask=new r(e,500,this)}return this._oThrottledTask},onNavButtonPress:function(){this.getRouter().myNavBack("welcome")}})});
//# sourceMappingURL=LiveEditor.controller.js.map