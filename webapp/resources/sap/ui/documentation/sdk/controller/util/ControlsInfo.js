/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/documentation/library","sap/base/Log","sap/ui/documentation/sdk/util/Resources","sap/ui/VersionInfo"],function(jQuery,e,r,n,s){"use strict";var t;var i={loadData:function(){if(!t){const r=function({isOpenUI5:r}){return new Promise(function(n,s){e._loadAllLibInfo("","_getDocuIndex",function(e,s){var t=i._getIndices(e,s,function(){n(t)},{isOpenUI5:r})})})};t=Promise.all([s.load()]).then(function(e){const[r]=e;const n=r?.gav?.toLowerCase();const s=r?.name?.toLowerCase();const t=/openui5/i.test(n||s)??true;return{isOpenUI5:t}}).then(r)}return t},_getIndices:function(s,t,i,a){var o=a.isOpenUI5;var l=["_PRIVATE_"];var p=["Action","Application","Container","Display","Chart","Mini Chart","Layout","List","Floorplans & Patterns","Popup","Tile","User Input","Showcase","Testing","Theming","Tutorial","Routing","Data Binding","Data Visualization","Map","Utility","Web Components","Metadata-Driven Controls (sap.ui.mdc)","Personalization"];var f=["namespace","since","category"];var c={namespace:{},since:{},category:{},formFactors:{Independent:true,Condensed:true,Compact:true,Cozy:true}};var d={"-":"Independent",S:"Condensed",SM:"Condensed, Compact",SL:"Condensed, Cozy",SML:"Condensed, Compact, Cozy",M:"Compact",ML:"Compact, Cozy",L:"Cozy"};var m={};m={};m.entityCount=0;m.entities=[];m.filter={};m.samples={};jQuery.each(t,function(e,s){if(!s.explored){return}else if(!s.explored.samplesRef){r.error("explored: cannot register lib '"+s.library+"'. missing 'explored.samplesRef'");return}else if(Array.isArray(s.explored.samplesRef)&&s.explored.samplesRef.length!==s.explored.samplesRef.filter(function(e){return e.namespace&&e.ref}).length){r.error("explored: cannot register lib '"+s.library+"'. missing 'explored.samplesRef.namespace' or 'explored.samplesRef.ref' in one or more of the configured namespaces");return}else if(!Array.isArray(s.explored.samplesRef)&&!s.explored.samplesRef.namespace){r.error("explored: cannot register lib '"+s.library+"'. missing 'explored.samplesRef.namespace'");return}else if(!Array.isArray(s.explored.samplesRef)&&!s.explored.samplesRef.ref){r.error("explored: cannot register lib '"+s.library+"'. missing 'explored.samplesRef.ref'");return}else if(!s.explored.entities){r.error("explored: cannot register lib '"+s.library+"'. missing 'explored.entities'");return}else{r.info("explored: now reading lib '"+s.library+"'")}if(Array.isArray(s.explored.samplesRef)){s.explored.samplesRef.forEach(function(e){(function(){var r={};r[e.namespace.replace(/\./g,"/")]=""+n.getResourceOriginPath(e.ref||".");sap.ui.loader.config({paths:r})})()})}else{(function(){var e={};e[s.explored.samplesRef.namespace.replace(/\./g,"/")]=""+n.getResourceOriginPath(s.explored.samplesRef.ref||".");sap.ui.loader.config({paths:e})})()}jQuery.each(s.explored.samples,function(e,n){if(!n.id){r.error("explored: cannot register sample '?'. missing 'id'")}else if(!n.name){r.error("explored: cannot register sample '"+n.id+"'. missing 'name'")}else{m.samples[n.id]=n;n.library=s.library}});jQuery.each(s.explored.entities,function(e,n){if(!n.id){r.error("explored: cannot register entity '?'. missing 'id'");return}if(s.explored.entitiesDefaults){jQuery.each(s.explored.entitiesDefaults,function(e,r){if(!n.hasOwnProperty(e)){n[e]=r}})}var t=n.id.lastIndexOf(".");var i=t!==-1?n.id.substring(0,t):n.id;n.namespace=i;if(!n.name){r.error("explored: cannot register entity '"+n.id+"'. missing 'name'");return}if(p.indexOf(n.category)===-1&&l.indexOf(n.category)===-1){r.error("explored: cannot register entity '"+n.id+"'. category '"+n.category+"' is not allowed");return}if(!n.formFactors){r.error("explored: cannot register entity '"+n.id+"'. missing 'formFactors'");return}if(!d[n.formFactors]){r.error("explored: cannot register entity '"+n.id+"'. formFactors '"+n.formFactors+"' is not allowed");return}n.formFactors=d[n.formFactors];var a=false;jQuery.each(f,function(e,s){if(!n[s]){r.error("explored: cannot register entity '"+n.id+"'. missing '"+s+"'");a=true;return false}});if(a){return}jQuery.each(f,function(e,r){c[r][n[r]]=true});n.library=s.library;if(n.samples?.length>0){n.samples=n.samples.filter(function(e){var r=m.samples[e];if(r&&r.sapui5Only){return!o}return true});if(n.samples.length===0){return}}if(p.indexOf(n.category)>-1&&!n.hidden){m.entities.push(n)}})});jQuery.each(m.entities,function(e,n){var s=0,t,i;n.searchTags=n.name+" "+n.name.replace(/\s/g,"")+" "+n.category;if(n.samples){n.samples.forEach(function(e){var r=m.samples[e];if(r){n.searchTags+=" "+r.name;n.searchTags+=" "+r.description}})}if(n.samples&&!(n.samples instanceof Array)){n.samples=[];r.error("explored: cannot register samples for entity '"+n.id+"'. 'samples' is not an array");return}if(!n.samples){n.samples=[]}if(n.samplesAsSteps){if(!(n.samplesAsSteps instanceof Array)){r.error("explored: cannot register samples for entity '"+n.id+"'. 'samplesAsSteps' is not an array");return}i=function(e){if(e.toString().length===1){return"0"+e}return e};for(;s<n.samplesAsSteps.length;s++){t={id:n.id+"."+i(s+1),name:n.name+" - Step "+(s+1)+" - "+n.samplesAsSteps[s]};if(s>0){t.previousSampleId=n.id+"."+i(s)}if(s<n.samplesAsSteps.length-1){t.nextSampleId=n.id+"."+i(s+2)}t.entityId=n.id;n.samples.push(t);t.library=n.library;m.samples[t.id]=t;n.searchTags+=" "+t.name}}else{var a=[],o;jQuery.each(n.samples,function(e,s){var t=m.samples[s];if(!t){r.warning("explored: cannot register sample '"+s+"' for '"+n.id+"'. not found in the available docu indizes")}else{t.entityId=n.id;if(!t.contexts){t.contexts={}}if(!t.contexts[t.entityId]){t.contexts[t.entityId]={}}t.contexts[t.entityId].previousSampleId=o?o.id:undefined;if(o){o.contexts[t.entityId].nextSampleId=t.id}o=t;a.push(t);n.searchTags+=" "+t.name}});n.samples=a}n.sampleCount=n.samples.length});m.entityCount=m.entities.length;jQuery.each(c,function(e,r){m.filter[e]=[];jQuery.each(r,function(r,n){m.filter[e].push({id:r})})});var u=e._getLibraryInfoSingleton();var g={};var y=[];for(var h=0;h<s.length;h++){y.push(new Promise(function(e){var r=function(r){g[r.library]=r.componentInfo;e()};u._getLibraryInfo(s[h],r)}))}Promise.all(y).then(function(){i&&i()});m.libComponentInfos=g;m.groups=this.getGroups(m.entities);return m},findGroup:function(e,r){var n;for(var s=0;s<e.length;s++){n=e[s];if(n.name==r){return n}}},getGroups:function(e){var r=[],n,s,t,i,a,o;for(a=0;a<e.length;a++){n=e[a];n.key="#/entity/"+n.id;t=n.samples;for(o=0;o<t.length;o++){i=t[o];i.key="#/sample/"+i.id+"/preview"}s=this.findGroup(r,n.category);if(!s){s={name:n.category,key:"#/group/"+n.category,controls:[n]};r.push(s)}else{s.controls.push(n)}}return r}};return i},true);
//# sourceMappingURL=ControlsInfo.js.map