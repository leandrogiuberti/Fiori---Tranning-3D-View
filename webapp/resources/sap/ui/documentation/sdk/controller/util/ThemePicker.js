/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Core","sap/ui/core/EventBus"],function(e,i){"use strict";var t={};var a="appearance",o="light",n="dark",s="hcb",h="hcw",r="auto",c="sap_fiori_3",p="sap_fiori_3_dark",_="sap_fiori_3_hcb",f="sap_fiori_3_hcw",g=Object.create(null);g[o]="sap_horizon";g[n]="sap_horizon_dark";g[s]="sap_horizon_hcb";g[h]="sap_horizon_hcw";g[r]="sap_horizon";g[c]="sap_fiori_3";g[p]="sap_fiori_3_dark";g[_]="sap_fiori_3_hcb";g[f]="sap_fiori_3_hcw";t.init=function(e){this.oComponent=e;this._oConfigUtil=e.getOwnerComponent().getConfigUtil();this._oCookieNames=this._oConfigUtil.COOKIE_NAMES;this._oConsentManager=e.getOwnerComponent().getCookiesConsentManager();this.bus=i.getInstance();this._createConfigurationBasedOnURIInput();this._bSupportsPrefersColorScheme=!!(window.matchMedia&&(window.matchMedia("(prefers-color-scheme: dark)").matches||window.matchMedia("(prefers-color-scheme: light)").matches));if(this._oConfigUtil.getCookieValue(a)){t._applyCookiesConfiguration(this._aConfiguration)}else{t._applyDefaultConfiguration(this._aConfiguration)}};t._getTheme=function(){return g};t._updateAppearance=function(i){var t=this._bSupportsPrefersColorScheme&&i===r,s=window.matchMedia("(prefers-color-scheme: dark)").matches;if(t){this._toggleLightOrDarkAppearance(s);this._attachPrefersColorSchemeChangeListener()}else{e.applyTheme(this._getTheme()[i])}this._sLastKnownAppearanceKey=i;if(t){this.bus.publish("themeChanged","onThemeChanged",{sThemeActive:g[s?n:o]})}else{this.bus.publish("themeChanged","onThemeChanged",{sThemeActive:this._getTheme()[i]})}this._oConsentManager.checkUserAcceptsToPersistDisplaySettings(function(e){if(e){this._oConfigUtil.setCookie(a,i)}}.bind(this))};t._toggleLightOrDarkAppearance=function(i){if(i){e.applyTheme(this._getTheme().dark)}else{e.applyTheme(this._getTheme().light)}};t._attachPrefersColorSchemeChangeListener=function(){var e=this,i,t;if(!this._bAttachedPrefersColorSchemeChangeListener){i=window.matchMedia("(prefers-color-scheme: dark)");t=function(i){if(e._sLastKnownAppearanceKey===r){this._toggleLightOrDarkAppearance(i.matches);e.bus.publish("themeChanged","onThemeChanged",{sThemeActive:g[i.matches?n:o]})}};if(i.addEventListener){i.addEventListener("change",t)}else{i.addListener(t)}this._bAttachedPrefersColorSchemeChangeListener=true}};t._applyCookiesConfiguration=function(){var e,i,t;for(t=0;t<this._aConfiguration.length;t++){i=this._aConfiguration[t];e=this._oConfigUtil.getCookieValue(i);if(e!==""){if(i===a){this._updateAppearance(e,this.oComponent)}this._aConfiguration.splice(t,1);t--}}if(this._aConfiguration.length>0){this._applyDefaultConfiguration()}};t._applyDefaultConfiguration=function(){this._aConfiguration.forEach(function(e){if(e===a){this._updateAppearance(r)}},this)};t._createConfigurationBasedOnURIInput=function(){var e=new URLSearchParams(window.location.search);this._aConfiguration=[];if(!(e.has("sap-ui-theme")||e.has("sap-theme"))){this._aConfiguration.push(a)}};return t});
//# sourceMappingURL=ThemePicker.js.map