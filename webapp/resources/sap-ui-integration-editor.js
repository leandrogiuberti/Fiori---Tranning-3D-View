//@ui5-bundle sap-ui-integration-editor.js
/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash strict include="omit,uniq,uniqBy,uniqWith,intersection,intersectionBy,intersectionWith,pick,pickBy,debounce,throttle,max,min,castArray,curry,merge,mergeWith,toArray,xor,xorBy,xorWith,isNil,difference,differenceBy,differenceWith,flatMap,flatMapDeep,flatMapDepth,isEqual,isEqualWith,without,flatten,flattenDeep,flattenDepth,compact,zipObject,zipObjectDeep,union,unionBy,unionWith"`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Modifications SAP SE or an SAP affiliate company and OpenUI5 contributors. All rights reserved.
 */
sap.ui.predefine("sap/base/util/restricted/_/lodash.custom", function(){"use strict";var r;var t="4.17.21";var n=200;var e="Expected a function";var u="__lodash_hash_undefined__";var i=500;var a="__lodash_placeholder__";var f=1,o=2,c=4;var l=1,s=2;var v=1,h=2,p=4,g=8,y=16,_=32,w=64,b=128,d=256,j=512;var m=800,O=16;var A=1/0,x=9007199254740991,z=17976931348623157e292,k=0/0;var S=4294967295;var E=[["ary",b],["bind",v],["bindKey",h],["curry",g],["curryRight",y],["flip",j],["partial",_],["partialRight",w],["rearg",d]];var T="[object Arguments]",$="[object Array]",I="[object AsyncFunction]",B="[object Boolean]",W="[object Date]",L="[object Error]",M="[object Function]",P="[object GeneratorFunction]",D="[object Map]",F="[object Number]",q="[object Null]",R="[object Object]",C="[object Promise]",U="[object Proxy]",N="[object RegExp]",V="[object Set]",G="[object String]",K="[object Symbol]",H="[object Undefined]",J="[object WeakMap]";var Q="[object ArrayBuffer]",X="[object DataView]",Y="[object Float32Array]",Z="[object Float64Array]",rr="[object Int8Array]",tr="[object Int16Array]",nr="[object Int32Array]",er="[object Uint8Array]",ur="[object Uint8ClampedArray]",ir="[object Uint16Array]",ar="[object Uint32Array]";var fr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,or=/^\w*$/,cr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var lr=/[\\^$.*+?()[\]{}|]/g;var sr=/^\s+/;var vr=/\s/;var hr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,pr=/\{\n\/\* \[wrapped with (.+)\] \*/,gr=/,? & /;var yr=/\\(\\)?/g;var _r=/\w*$/;var wr=/^[-+]0x[0-9a-f]+$/i;var br=/^0b[01]+$/i;var dr=/^\[object .+?Constructor\]$/;var jr=/^0o[0-7]+$/i;var mr=/^(?:0|[1-9]\d*)$/;var Or="\\ud800-\\udfff",Ar="\\u0300-\\u036f",xr="\\ufe20-\\ufe2f",zr="\\u20d0-\\u20ff",kr=Ar+xr+zr,Sr="\\ufe0e\\ufe0f";var Er="["+Or+"]",Tr="["+kr+"]",$r="\\ud83c[\\udffb-\\udfff]",Ir="(?:"+Tr+"|"+$r+")",Br="[^"+Or+"]",Wr="(?:\\ud83c[\\udde6-\\uddff]){2}",Lr="[\\ud800-\\udbff][\\udc00-\\udfff]",Mr="\\u200d";var Pr=Ir+"?",Dr="["+Sr+"]?",Fr="(?:"+Mr+"(?:"+[Br,Wr,Lr].join("|")+")"+Dr+Pr+")*",qr=Dr+Pr+Fr,Rr="(?:"+[Br+Tr+"?",Tr,Wr,Lr,Er].join("|")+")";var Cr=RegExp($r+"(?="+$r+")|"+Rr+qr,"g");var Ur=RegExp("["+Mr+Or+kr+Sr+"]");var Nr={};Nr[Y]=Nr[Z]=Nr[rr]=Nr[tr]=Nr[nr]=Nr[er]=Nr[ur]=Nr[ir]=Nr[ar]=true;Nr[T]=Nr[$]=Nr[Q]=Nr[B]=Nr[X]=Nr[W]=Nr[L]=Nr[M]=Nr[D]=Nr[F]=Nr[R]=Nr[N]=Nr[V]=Nr[G]=Nr[J]=false;var Vr={};Vr[T]=Vr[$]=Vr[Q]=Vr[X]=Vr[B]=Vr[W]=Vr[Y]=Vr[Z]=Vr[rr]=Vr[tr]=Vr[nr]=Vr[D]=Vr[F]=Vr[R]=Vr[N]=Vr[V]=Vr[G]=Vr[K]=Vr[er]=Vr[ur]=Vr[ir]=Vr[ar]=true;Vr[L]=Vr[M]=Vr[J]=false;var Gr=parseInt;var Kr=typeof global=="object"&&global&&global.Object===Object&&global;var Hr=typeof self=="object"&&self&&self.Object===Object&&self;var Jr=Kr||Hr||Function("return this")();var Qr=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var Xr=Qr&&typeof module=="object"&&module&&!module.nodeType&&module;var Yr=Xr&&Xr.exports===Qr;var Zr=Yr&&Kr.process;var rt=function(){try{var r=Xr&&Xr.require&&Xr.require("util").types;if(r){return r}return Zr&&Zr.binding&&Zr.binding("util")}catch(r){}}();var tt=rt&&rt.isMap,nt=rt&&rt.isSet,et=rt&&rt.isTypedArray;function ut(r,t,n){switch(n.length){case 0:return r.call(t);case 1:return r.call(t,n[0]);case 2:return r.call(t,n[0],n[1]);case 3:return r.call(t,n[0],n[1],n[2])}return r.apply(t,n)}function it(r,t){var n=-1,e=r==null?0:r.length;while(++n<e){if(t(r[n],n,r)===false){break}}return r}function at(r,t){var n=-1,e=r==null?0:r.length,u=0,i=[];while(++n<e){var a=r[n];if(t(a,n,r)){i[u++]=a}}return i}function ft(r,t){var n=r==null?0:r.length;return!!n&&pt(r,t,0)>-1}function ot(r,t,n){var e=-1,u=r==null?0:r.length;while(++e<u){if(n(t,r[e])){return true}}return false}function ct(r,t){var n=-1,e=r==null?0:r.length,u=Array(e);while(++n<e){u[n]=t(r[n],n,r)}return u}function lt(r,t){var n=-1,e=t.length,u=r.length;while(++n<e){r[u+n]=t[n]}return r}function st(r,t){var n=-1,e=r==null?0:r.length;while(++n<e){if(t(r[n],n,r)){return true}}return false}function vt(r){return r.split("")}function ht(r,t,n,e){var u=r.length,i=n+(e?1:-1);while(e?i--:++i<u){if(t(r[i],i,r)){return i}}return-1}function pt(r,t,n){return t===t?Tt(r,t,n):ht(r,gt,n)}function gt(r){return r!==r}function yt(t){return function(n){return n==null?r:n[t]}}function _t(r,t){var n=-1,e=Array(r);while(++n<r){e[n]=t(n)}return e}function wt(r){return r?r.slice(0,It(r)+1).replace(sr,""):r}function bt(r){return function(t){return r(t)}}function dt(r,t){return ct(t,function(t){return r[t]})}function jt(r,t){return r.has(t)}function mt(r,t){var n=r.length,e=0;while(n--){if(r[n]===t){++e}}return e}function Ot(t,n){return t==null?r:t[n]}function At(r){return Ur.test(r)}function xt(r){var t,n=[];while(!(t=r.next()).done){n.push(t.value)}return n}function zt(r){var t=-1,n=Array(r.size);r.forEach(function(r,e){n[++t]=[e,r]});return n}function kt(r,t){return function(n){return r(t(n))}}function St(r,t){var n=-1,e=r.length,u=0,i=[];while(++n<e){var f=r[n];if(f===t||f===a){r[n]=a;i[u++]=n}}return i}function Et(r){var t=-1,n=Array(r.size);r.forEach(function(r){n[++t]=r});return n}function Tt(r,t,n){var e=n-1,u=r.length;while(++e<u){if(r[e]===t){return e}}return-1}function $t(r){return At(r)?Bt(r):vt(r)}function It(r){var t=r.length;while(t--&&vr.test(r.charAt(t))){}return t}function Bt(r){return r.match(Cr)||[]}var Wt=Array.prototype,Lt=Function.prototype,Mt=Object.prototype;var Pt=Jr["__core-js_shared__"];var Dt=Lt.toString;var Ft=Mt.hasOwnProperty;var qt=function(){var r=/[^.]+$/.exec(Pt&&Pt.keys&&Pt.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();var Rt=Mt.toString;var Ct=Dt.call(Object);var Ut=RegExp("^"+Dt.call(Ft).replace(lr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Nt=Yr?Jr.Buffer:r,Vt=Jr.Symbol,Gt=Jr.Uint8Array,Kt=Nt?Nt.allocUnsafe:r,Ht=kt(Object.getPrototypeOf,Object),Jt=Object.create,Qt=Mt.propertyIsEnumerable,Xt=Wt.splice,Yt=Vt?Vt.isConcatSpreadable:r,Zt=Vt?Vt.iterator:r,rn=Vt?Vt.toStringTag:r;var tn=function(){try{var r=Mu(Object,"defineProperty");r({},"",{});return r}catch(r){}}();var nn=Object.getOwnPropertySymbols,en=Nt?Nt.isBuffer:r,un=kt(Object.keys,Object),an=Math.max,fn=Math.min,on=Date.now;var cn=Mu(Jr,"DataView"),ln=Mu(Jr,"Map"),sn=Mu(Jr,"Promise"),vn=Mu(Jr,"Set"),hn=Mu(Jr,"WeakMap"),pn=Mu(Object,"create");var gn=hn&&new hn;var yn={};var _n=_i(cn),wn=_i(ln),bn=_i(sn),dn=_i(vn),jn=_i(hn);var mn=Vt?Vt.prototype:r,On=mn?mn.valueOf:r,An=mn?mn.toString:r;function xn(){}var zn=function(){function t(){}return function(n){if(!oa(n)){return{}}if(Jt){return Jt(n)}t.prototype=n;var e=new t;t.prototype=r;return e}}();function kn(){}function Sn(r){this.__wrapped__=r;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=S;this.__views__=[]}Sn.prototype=zn(kn.prototype);Sn.prototype.constructor=Sn;function En(r){var t=-1,n=r==null?0:r.length;this.clear();while(++t<n){var e=r[t];this.set(e[0],e[1])}}function Tn(){this.__data__=pn?pn(null):{};this.size=0}function $n(r){var t=this.has(r)&&delete this.__data__[r];this.size-=t?1:0;return t}function In(t){var n=this.__data__;if(pn){var e=n[t];return e===u?r:e}return Ft.call(n,t)?n[t]:r}function Bn(t){var n=this.__data__;return pn?n[t]!==r:Ft.call(n,t)}function Wn(t,n){var e=this.__data__;this.size+=this.has(t)?0:1;e[t]=pn&&n===r?u:n;return this}En.prototype.clear=Tn;En.prototype["delete"]=$n;En.prototype.get=In;En.prototype.has=Bn;En.prototype.set=Wn;function Ln(r){var t=-1,n=r==null?0:r.length;this.clear();while(++t<n){var e=r[t];this.set(e[0],e[1])}}function Mn(){this.__data__=[];this.size=0}function Pn(r){var t=this.__data__,n=ie(t,r);if(n<0){return false}var e=t.length-1;if(n==e){t.pop()}else{Xt.call(t,n,1)}--this.size;return true}function Dn(t){var n=this.__data__,e=ie(n,t);return e<0?r:n[e][1]}function Fn(r){return ie(this.__data__,r)>-1}function qn(r,t){var n=this.__data__,e=ie(n,r);if(e<0){++this.size;n.push([r,t])}else{n[e][1]=t}return this}Ln.prototype.clear=Mn;Ln.prototype["delete"]=Pn;Ln.prototype.get=Dn;Ln.prototype.has=Fn;Ln.prototype.set=qn;function Rn(r){var t=-1,n=r==null?0:r.length;this.clear();while(++t<n){var e=r[t];this.set(e[0],e[1])}}function Cn(){this.size=0;this.__data__={hash:new En,map:new(ln||Ln),string:new En}}function Un(r){var t=Wu(this,r)["delete"](r);this.size-=t?1:0;return t}function Nn(r){return Wu(this,r).get(r)}function Vn(r){return Wu(this,r).has(r)}function Gn(r,t){var n=Wu(this,r),e=n.size;n.set(r,t);this.size+=n.size==e?0:1;return this}Rn.prototype.clear=Cn;Rn.prototype["delete"]=Un;Rn.prototype.get=Nn;Rn.prototype.has=Vn;Rn.prototype.set=Gn;function Kn(r){var t=-1,n=r==null?0:r.length;this.__data__=new Rn;while(++t<n){this.add(r[t])}}function Hn(r){this.__data__.set(r,u);return this}function Jn(r){return this.__data__.has(r)}Kn.prototype.add=Kn.prototype.push=Hn;Kn.prototype.has=Jn;function Qn(r){var t=this.__data__=new Ln(r);this.size=t.size}function Xn(){this.__data__=new Ln;this.size=0}function Yn(r){var t=this.__data__,n=t["delete"](r);this.size=t.size;return n}function Zn(r){return this.__data__.get(r)}function re(r){return this.__data__.has(r)}function te(r,t){var e=this.__data__;if(e instanceof Ln){var u=e.__data__;if(!ln||u.length<n-1){u.push([r,t]);this.size=++e.size;return this}e=this.__data__=new Rn(u)}e.set(r,t);this.size=e.size;return this}Qn.prototype.clear=Xn;Qn.prototype["delete"]=Yn;Qn.prototype.get=Zn;Qn.prototype.has=re;Qn.prototype.set=te;function ne(r,t){var n=ra(r),e=!n&&Zi(r),u=!n&&!e&&ea(r),i=!n&&!e&&!u&&ya(r),a=n||e||u||i,f=a?_t(r.length,String):[],o=f.length;for(var c in r){if((t||Ft.call(r,c))&&!(a&&(c=="length"||u&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Hu(c,o)))){f.push(c)}}return f}function ee(t,n,e){if(e!==r&&!Yi(t[n],e)||e===r&&!(n in t)){oe(t,n,e)}}function ue(t,n,e){var u=t[n];if(!(Ft.call(t,n)&&Yi(u,e))||e===r&&!(n in t)){oe(t,n,e)}}function ie(r,t){var n=r.length;while(n--){if(Yi(r[n][0],t)){return n}}return-1}function ae(r,t){return r&&cu(t,xa(t),r)}function fe(r,t){return r&&cu(t,za(t),r)}function oe(r,t,n){if(t=="__proto__"&&tn){tn(r,t,{configurable:true,enumerable:true,value:n,writable:true})}else{r[t]=n}}function ce(t,n,e,u,i,a){var l,s=n&f,v=n&o,h=n&c;if(e){l=i?e(t,u,i,a):e(t)}if(l!==r){return l}if(!oa(t)){return t}var p=ra(t);if(p){l=Uu(t);if(!s){return ou(t,l)}}else{var g=qu(t),y=g==M||g==P;if(ea(t)){return ru(t,s)}if(g==R||g==T||y&&!i){l=v||y?{}:Nu(t);if(!s){return v?su(t,fe(l,t)):lu(t,ae(l,t))}}else{if(!Vr[g]){return i?t:{}}l=Vu(t,g,s)}}a||(a=new Qn);var _=a.get(t);if(_){return _}a.set(t,l);if(ha(t)){t.forEach(function(r){l.add(ce(r,n,e,r,t,a))})}else if(la(t)){t.forEach(function(r,u){l.set(u,ce(r,n,e,u,t,a))})}var w=h?v?Eu:Su:v?za:xa;var b=p?r:w(t);it(b||t,function(r,u){if(b){u=r;r=t[u]}ue(l,u,ce(r,n,e,u,t,a))});return l}function le(r,t,e,u){var i=-1,a=ft,f=true,o=r.length,c=[],l=t.length;if(!o){return c}if(e){t=ct(t,bt(e))}if(u){a=ot;f=false}else if(t.length>=n){a=jt;f=false;t=new Kn(t)}r:while(++i<o){var s=r[i],v=e==null?s:e(s);s=u||s!==0?s:0;if(f&&v===v){var h=l;while(h--){if(t[h]===v){continue r}}c.push(s)}else if(!a(t,v,u)){c.push(s)}}return c}var se=hu(ge);function ve(t,n,e){var u=-1,i=t.length;while(++u<i){var a=t[u],f=n(a);if(f!=null&&(o===r?f===f&&!ga(f):e(f,o))){var o=f,c=a}}return c}function he(r,t,n,e,u){var i=-1,a=r.length;n||(n=Ku);u||(u=[]);while(++i<a){var f=r[i];if(t>0&&n(f)){if(t>1){he(f,t-1,n,e,u)}else{lt(u,f)}}else if(!e){u[u.length]=f}}return u}var pe=pu();function ge(r,t){return r&&pe(r,t,xa)}function ye(t,n){n=Ze(n,t);var e=0,u=n.length;while(t!=null&&e<u){t=t[yi(n[e++])]}return e&&e==u?t:r}function _e(r,t,n){var e=t(r);return ra(r)?e:lt(e,n(r))}function we(t){if(t==null){return t===r?H:q}return rn&&rn in Object(t)?Pu(t):ai(t)}function be(r,t){return r>t}function de(r,t){return r!=null&&t in Object(r)}function je(t,n,e){var u=e?ot:ft,i=t[0].length,a=t.length,f=a,o=Array(a),c=Infinity,l=[];while(f--){var s=t[f];if(f&&n){s=ct(s,bt(n))}c=fn(s.length,c);o[f]=!e&&(n||i>=120&&s.length>=120)?new Kn(f&&s):r}s=t[0];var v=-1,h=o[0];r:while(++v<i&&l.length<c){var p=s[v],g=n?n(p):p;p=e||p!==0?p:0;if(!(h?jt(h,g):u(l,g,e))){f=a;while(--f){var y=o[f];if(!(y?jt(y,g):u(t[f],g,e))){continue r}}if(h){h.push(g)}l.push(p)}}return l}function me(r){return ca(r)&&we(r)==T}function Oe(r,t,n,e,u){if(r===t){return true}if(r==null||t==null||!ca(r)&&!ca(t)){return r!==r&&t!==t}return Ae(r,t,n,e,Oe,u)}function Ae(r,t,n,e,u,i){var a=ra(r),f=ra(t),o=a?$:qu(r),c=f?$:qu(t);o=o==T?R:o;c=c==T?R:c;var s=o==R,v=c==R,h=o==c;if(h&&ea(r)){if(!ea(t)){return false}a=true;s=false}if(h&&!s){i||(i=new Qn);return a||ya(r)?Au(r,t,n,e,u,i):xu(r,t,o,n,e,u,i)}if(!(n&l)){var p=s&&Ft.call(r,"__wrapped__"),g=v&&Ft.call(t,"__wrapped__");if(p||g){var y=p?r.value():r,_=g?t.value():t;i||(i=new Qn);return u(y,_,n,e,i)}}if(!h){return false}i||(i=new Qn);return zu(r,t,n,e,u,i)}function xe(r){return ca(r)&&qu(r)==D}function ze(t,n,e,u){var i=e.length,a=i,f=!u;if(t==null){return!a}t=Object(t);while(i--){var o=e[i];if(f&&o[2]?o[1]!==t[o[0]]:!(o[0]in t)){return false}}while(++i<a){o=e[i];var c=o[0],v=t[c],h=o[1];if(f&&o[2]){if(v===r&&!(c in t)){return false}}else{var p=new Qn;if(u){var g=u(v,h,c,t,n,p)}if(!(g===r?Oe(h,v,l|s,u,p):g)){return false}}}return true}function ke(r){if(!oa(r)||Zu(r)){return false}var t=aa(r)?Ut:dr;return t.test(_i(r))}function Se(r){return ca(r)&&qu(r)==V}function Ee(r){return ca(r)&&fa(r.length)&&!!Nr[we(r)]}function Te(r){if(typeof r=="function"){return r}if(r==null){return Wa}if(typeof r=="object"){return ra(r)?Me(r[0],r[1]):Le(r)}return Pa(r)}function $e(r){if(!ri(r)){return un(r)}var t=[];for(var n in Object(r)){if(Ft.call(r,n)&&n!="constructor"){t.push(n)}}return t}function Ie(r){if(!oa(r)){return ii(r)}var t=ri(r),n=[];for(var e in r){if(!(e=="constructor"&&(t||!Ft.call(r,e)))){n.push(e)}}return n}function Be(r,t){return r<t}function We(r,t){var n=-1,e=ta(r)?Array(r.length):[];se(r,function(r,u,i){e[++n]=t(r,u,i)});return e}function Le(r){var t=Lu(r);if(t.length==1&&t[0][2]){return ni(t[0][0],t[0][1])}return function(n){return n===r||ze(n,r,t)}}function Me(t,n){if(Qu(t)&&ti(n)){return ni(yi(t),n)}return function(e){var u=Oa(e,t);return u===r&&u===n?Aa(e,t):Oe(n,u,l|s)}}function Pe(t,n,e,u,i){if(t===n){return}pe(n,function(a,f){i||(i=new Qn);if(oa(a)){De(t,n,f,e,Pe,u,i)}else{var o=u?u(li(t,f),a,f+"",t,n,i):r;if(o===r){o=a}ee(t,f,o)}},za)}function De(t,n,e,u,i,a,f){var o=li(t,e),c=li(n,e),l=f.get(c);if(l){ee(t,e,l);return}var s=a?a(o,c,e+"",t,n,f):r;var v=s===r;if(v){var h=ra(c),p=!h&&ea(c),g=!h&&!p&&ya(c);s=c;if(h||p||g){if(ra(o)){s=o}else if(na(o)){s=ou(o)}else if(p){v=false;s=ru(c,true)}else if(g){v=false;s=iu(c,true)}else{s=[]}}else if(va(c)||Zi(c)){s=o;if(Zi(o)){s=ja(o)}else if(!oa(o)||aa(o)){s=Nu(c)}}else{v=false}}if(v){f.set(c,s);i(s,c,u,a,f);f["delete"](c)}ee(t,e,s)}function Fe(r,t){return qe(r,t,function(t,n){return Aa(r,n)})}function qe(r,t,n){var e=-1,u=t.length,i={};while(++e<u){var a=t[e],f=ye(r,a);if(n(f,a)){Ue(i,Ze(a,r),f)}}return i}function Re(r){return function(t){return ye(t,r)}}function Ce(r,t){return vi(fi(r,t,Wa),r+"")}function Ue(t,n,e,u){if(!oa(t)){return t}n=Ze(n,t);var i=-1,a=n.length,f=a-1,o=t;while(o!=null&&++i<a){var c=yi(n[i]),l=e;if(c==="__proto__"||c==="constructor"||c==="prototype"){return t}if(i!=f){var s=o[c];l=u?u(s,c,o):r;if(l===r){l=oa(s)?s:Hu(n[i+1])?[]:{}}}ue(o,c,l);o=o[c]}return t}var Ne=!gn?Wa:function(r,t){gn.set(r,t);return r};var Ve=!tn?Wa:function(r,t){return tn(r,"toString",{configurable:true,enumerable:false,value:Ba(t),writable:true})};function Ge(r,t,n){var e=-1,u=r.length;if(t<0){t=-t>u?0:u+t}n=n>u?u:n;if(n<0){n+=u}u=t>n?0:n-t>>>0;t>>>=0;var i=Array(u);while(++e<u){i[e]=r[e+t]}return i}function Ke(r){if(typeof r=="string"){return r}if(ra(r)){return ct(r,Ke)+""}if(ga(r)){return An?An.call(r):""}var t=r+"";return t=="0"&&1/r==-A?"-0":t}function He(r,t,e){var u=-1,i=ft,a=r.length,f=true,o=[],c=o;if(e){f=false;i=ot}else if(a>=n){var l=t?null:ju(r);if(l){return Et(l)}f=false;i=jt;c=new Kn}else{c=t?[]:o}r:while(++u<a){var s=r[u],v=t?t(s):s;s=e||s!==0?s:0;if(f&&v===v){var h=c.length;while(h--){if(c[h]===v){continue r}}if(t){c.push(v)}o.push(s)}else if(!i(c,v,e)){if(c!==o){c.push(v)}o.push(s)}}return o}function Je(r,t){t=Ze(t,r);r=oi(r,t);return r==null||delete r[yi(Ei(t))]}function Qe(r,t,n){var e=r.length;if(e<2){return e?He(r[0]):[]}var u=-1,i=Array(e);while(++u<e){var a=r[u],f=-1;while(++f<e){if(f!=u){i[u]=le(i[u]||a,r[f],t,n)}}}return He(he(i,1),t,n)}function Xe(t,n,e){var u=-1,i=t.length,a=n.length,f={};while(++u<i){var o=u<a?n[u]:r;e(f,t[u],o)}return f}function Ye(r){return na(r)?r:[]}function Ze(r,t){if(ra(r)){return r}return Qu(r,t)?[r]:gi(ma(r))}function ru(r,t){if(t){return r.slice()}var n=r.length,e=Kt?Kt(n):new r.constructor(n);r.copy(e);return e}function tu(r){var t=new r.constructor(r.byteLength);new Gt(t).set(new Gt(r));return t}function nu(r,t){var n=t?tu(r.buffer):r.buffer;return new r.constructor(n,r.byteOffset,r.byteLength)}function eu(r){var t=new r.constructor(r.source,_r.exec(r));t.lastIndex=r.lastIndex;return t}function uu(r){return On?Object(On.call(r)):{}}function iu(r,t){var n=t?tu(r.buffer):r.buffer;return new r.constructor(n,r.byteOffset,r.length)}function au(r,t,n,e){var u=-1,i=r.length,a=n.length,f=-1,o=t.length,c=an(i-a,0),l=Array(o+c),s=!e;while(++f<o){l[f]=t[f]}while(++u<a){if(s||u<i){l[n[u]]=r[u]}}while(c--){l[f++]=r[u++]}return l}function fu(r,t,n,e){var u=-1,i=r.length,a=-1,f=n.length,o=-1,c=t.length,l=an(i-f,0),s=Array(l+c),v=!e;while(++u<l){s[u]=r[u]}var h=u;while(++o<c){s[h+o]=t[o]}while(++a<f){if(v||u<i){s[h+n[a]]=r[u++]}}return s}function ou(r,t){var n=-1,e=r.length;t||(t=Array(e));while(++n<e){t[n]=r[n]}return t}function cu(t,n,e,u){var i=!e;e||(e={});var a=-1,f=n.length;while(++a<f){var o=n[a];var c=u?u(e[o],t[o],o,e,t):r;if(c===r){c=t[o]}if(i){oe(e,o,c)}else{ue(e,o,c)}}return e}function lu(r,t){return cu(r,Du(r),t)}function su(r,t){return cu(r,Fu(r),t)}function vu(t){return Ce(function(n,e){var u=-1,i=e.length,a=i>1?e[i-1]:r,f=i>2?e[2]:r;a=t.length>3&&typeof a=="function"?(i--,a):r;if(f&&Ju(e[0],e[1],f)){a=i<3?r:a;i=1}n=Object(n);while(++u<i){var o=e[u];if(o){t(n,o,u,a)}}return n})}function hu(r,t){return function(n,e){if(n==null){return n}if(!ta(n)){return r(n,e)}var u=n.length,i=t?u:-1,a=Object(n);while(t?i--:++i<u){if(e(a[i],i,a)===false){break}}return n}}function pu(r){return function(t,n,e){var u=-1,i=Object(t),a=e(t),f=a.length;while(f--){var o=a[r?f:++u];if(n(i[o],o,i)===false){break}}return t}}function gu(r,t,n){var e=t&v,u=yu(r);function i(){var t=this&&this!==Jr&&this instanceof i?u:r;return t.apply(e?n:this,arguments)}return i}function yu(r){return function(){var t=arguments;switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3]);case 5:return new r(t[0],t[1],t[2],t[3],t[4]);case 6:return new r(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new r(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=zn(r.prototype),e=r.apply(n,t);return oa(e)?e:n}}function _u(t,n,e){var u=yu(t);function i(){var a=arguments.length,f=Array(a),o=a,c=Iu(i);while(o--){f[o]=arguments[o]}var l=a<3&&f[0]!==c&&f[a-1]!==c?[]:St(f,c);a-=l.length;if(a<e){return du(t,n,wu,i.placeholder,r,f,l,r,r,e-a)}var s=this&&this!==Jr&&this instanceof i?u:t;return ut(s,this,f)}return i}function wu(t,n,e,u,i,a,f,o,c,l){var s=n&b,p=n&v,_=n&h,w=n&(g|y),d=n&j,m=_?r:yu(t);function O(){var r=arguments.length,v=Array(r),h=r;while(h--){v[h]=arguments[h]}if(w){var g=Iu(O),y=mt(v,g)}if(u){v=au(v,u,i,w)}if(a){v=fu(v,a,f,w)}r-=y;if(w&&r<l){var b=St(v,g);return du(t,n,wu,O.placeholder,e,v,b,o,c,l-r)}var j=p?e:this,A=_?j[t]:t;r=v.length;if(o){v=ci(v,o)}else if(d&&r>1){v.reverse()}if(s&&c<r){v.length=c}if(this&&this!==Jr&&this instanceof O){A=m||yu(A)}return A.apply(j,v)}return O}function bu(r,t,n,e){var u=t&v,i=yu(r);function a(){var t=-1,f=arguments.length,o=-1,c=e.length,l=Array(c+f),s=this&&this!==Jr&&this instanceof a?i:r;while(++o<c){l[o]=e[o]}while(f--){l[o++]=arguments[++t]}return ut(s,u?n:this,l)}return a}function du(t,n,e,u,i,a,f,o,c,l){var s=n&g,y=s?f:r,b=s?r:f,d=s?a:r,j=s?r:a;n|=s?_:w;n&=~(s?w:_);if(!(n&p)){n&=~(v|h)}var m=[t,n,i,d,y,j,b,o,c,l];var O=e.apply(r,m);if(Yu(t)){si(O,m)}O.placeholder=u;return hi(O,t,n)}var ju=!(vn&&1/Et(new vn([,-0]))[1]==A)?Ma:function(r){return new vn(r)};function mu(t,n,u,i,a,f,o,c){var l=n&h;if(!l&&typeof t!="function"){throw new TypeError(e)}var s=i?i.length:0;if(!s){n&=~(_|w);i=a=r}o=o===r?o:an(ba(o),0);c=c===r?c:ba(c);s-=a?a.length:0;if(n&w){var p=i,b=a;i=a=r}var d=l?r:Tu(t);var j=[t,n,u,i,a,p,b,f,o,c];if(d){ui(j,d)}t=j[0];n=j[1];u=j[2];i=j[3];a=j[4];c=j[9]=j[9]===r?l?0:t.length:an(j[9]-s,0);if(!c&&n&(g|y)){n&=~(g|y)}if(!n||n==v){var m=gu(t,n,u)}else if(n==g||n==y){m=_u(t,n,c)}else if((n==_||n==(v|_))&&!a.length){m=bu(t,n,u,i)}else{m=wu.apply(r,j)}var O=d?Ne:si;return hi(O(m,j),t,n)}function Ou(t){return va(t)?r:t}function Au(t,n,e,u,i,a){var f=e&l,o=t.length,c=n.length;if(o!=c&&!(f&&c>o)){return false}var v=a.get(t);var h=a.get(n);if(v&&h){return v==n&&h==t}var p=-1,g=true,y=e&s?new Kn:r;a.set(t,n);a.set(n,t);while(++p<o){var _=t[p],w=n[p];if(u){var b=f?u(w,_,p,n,t,a):u(_,w,p,t,n,a)}if(b!==r){if(b){continue}g=false;break}if(y){if(!st(n,function(r,t){if(!jt(y,t)&&(_===r||i(_,r,e,u,a))){return y.push(t)}})){g=false;break}}else if(!(_===w||i(_,w,e,u,a))){g=false;break}}a["delete"](t);a["delete"](n);return g}function xu(r,t,n,e,u,i,a){switch(n){case X:if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset){return false}r=r.buffer;t=t.buffer;case Q:if(r.byteLength!=t.byteLength||!i(new Gt(r),new Gt(t))){return false}return true;case B:case W:case F:return Yi(+r,+t);case L:return r.name==t.name&&r.message==t.message;case N:case G:return r==t+"";case D:var f=zt;case V:var o=e&l;f||(f=Et);if(r.size!=t.size&&!o){return false}var c=a.get(r);if(c){return c==t}e|=s;a.set(r,t);var v=Au(f(r),f(t),e,u,i,a);a["delete"](r);return v;case K:if(On){return On.call(r)==On.call(t)}}return false}function zu(t,n,e,u,i,a){var f=e&l,o=Su(t),c=o.length,s=Su(n),v=s.length;if(c!=v&&!f){return false}var h=c;while(h--){var p=o[h];if(!(f?p in n:Ft.call(n,p))){return false}}var g=a.get(t);var y=a.get(n);if(g&&y){return g==n&&y==t}var _=true;a.set(t,n);a.set(n,t);var w=f;while(++h<c){p=o[h];var b=t[p],d=n[p];if(u){var j=f?u(d,b,p,n,t,a):u(b,d,p,t,n,a)}if(!(j===r?b===d||i(b,d,e,u,a):j)){_=false;break}w||(w=p=="constructor")}if(_&&!w){var m=t.constructor,O=n.constructor;if(m!=O&&("constructor"in t&&"constructor"in n)&&!(typeof m=="function"&&m instanceof m&&typeof O=="function"&&O instanceof O)){_=false}}a["delete"](t);a["delete"](n);return _}function ku(t){return vi(fi(t,r,Oi),t+"")}function Su(r){return _e(r,xa,Du)}function Eu(r){return _e(r,za,Fu)}var Tu=!gn?Ma:function(r){return gn.get(r)};function $u(r){var t=r.name+"",n=yn[t],e=Ft.call(yn,t)?n.length:0;while(e--){var u=n[e],i=u.func;if(i==null||i==r){return u.name}}return t}function Iu(r){var t=Ft.call(xn,"placeholder")?xn:r;return t.placeholder}function Bu(){var r=xn.iteratee||La;r=r===La?Te:r;return arguments.length?r(arguments[0],arguments[1]):r}function Wu(r,t){var n=r.__data__;return Xu(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Lu(r){var t=xa(r),n=t.length;while(n--){var e=t[n],u=r[e];t[n]=[e,u,ti(u)]}return t}function Mu(t,n){var e=Ot(t,n);return ke(e)?e:r}function Pu(t){var n=Ft.call(t,rn),e=t[rn];try{t[rn]=r;var u=true}catch(r){}var i=Rt.call(t);if(u){if(n){t[rn]=e}else{delete t[rn]}}return i}var Du=!nn?Da:function(r){if(r==null){return[]}r=Object(r);return at(nn(r),function(t){return Qt.call(r,t)})};var Fu=!nn?Da:function(r){var t=[];while(r){lt(t,Du(r));r=Ht(r)}return t};var qu=we;if(cn&&qu(new cn(new ArrayBuffer(1)))!=X||ln&&qu(new ln)!=D||sn&&qu(sn.resolve())!=C||vn&&qu(new vn)!=V||hn&&qu(new hn)!=J){qu=function(t){var n=we(t),e=n==R?t.constructor:r,u=e?_i(e):"";if(u){switch(u){case _n:return X;case wn:return D;case bn:return C;case dn:return V;case jn:return J}}return n}}function Ru(r){var t=r.match(pr);return t?t[1].split(gr):[]}function Cu(r,t,n){t=Ze(t,r);var e=-1,u=t.length,i=false;while(++e<u){var a=yi(t[e]);if(!(i=r!=null&&n(r,a))){break}r=r[a]}if(i||++e!=u){return i}u=r==null?0:r.length;return!!u&&fa(u)&&Hu(a,u)&&(ra(r)||Zi(r))}function Uu(r){var t=r.length,n=new r.constructor(t);if(t&&typeof r[0]=="string"&&Ft.call(r,"index")){n.index=r.index;n.input=r.input}return n}function Nu(r){return typeof r.constructor=="function"&&!ri(r)?zn(Ht(r)):{}}function Vu(r,t,n){var e=r.constructor;switch(t){case Q:return tu(r);case B:case W:return new e(+r);case X:return nu(r,n);case Y:case Z:case rr:case tr:case nr:case er:case ur:case ir:case ar:return iu(r,n);case D:return new e;case F:case G:return new e(r);case N:return eu(r);case V:return new e;case K:return uu(r)}}function Gu(r,t){var n=t.length;if(!n){return r}var e=n-1;t[e]=(n>1?"& ":"")+t[e];t=t.join(n>2?", ":" ");return r.replace(hr,"{\n/* [wrapped with "+t+"] */\n")}function Ku(r){return ra(r)||Zi(r)||!!(Yt&&r&&r[Yt])}function Hu(r,t){var n=typeof r;t=t==null?x:t;return!!t&&(n=="number"||n!="symbol"&&mr.test(r))&&(r>-1&&r%1==0&&r<t)}function Ju(r,t,n){if(!oa(n)){return false}var e=typeof t;if(e=="number"?ta(n)&&Hu(t,n.length):e=="string"&&t in n){return Yi(n[t],r)}return false}function Qu(r,t){if(ra(r)){return false}var n=typeof r;if(n=="number"||n=="symbol"||n=="boolean"||r==null||ga(r)){return true}return or.test(r)||!fr.test(r)||t!=null&&r in Object(t)}function Xu(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}function Yu(r){var t=$u(r),n=xn[t];if(typeof n!="function"||!(t in Sn.prototype)){return false}if(r===n){return true}var e=Tu(n);return!!e&&r===e[0]}function Zu(r){return!!qt&&qt in r}function ri(r){var t=r&&r.constructor,n=typeof t=="function"&&t.prototype||Mt;return r===n}function ti(r){return r===r&&!oa(r)}function ni(t,n){return function(e){if(e==null){return false}return e[t]===n&&(n!==r||t in Object(e))}}function ei(r){var t=Ji(r,function(r){if(n.size===i){n.clear()}return r});var n=t.cache;return t}function ui(r,t){var n=r[1],e=t[1],u=n|e,i=u<(v|h|b);var f=e==b&&n==g||e==b&&n==d&&r[7].length<=t[8]||e==(b|d)&&t[7].length<=t[8]&&n==g;if(!(i||f)){return r}if(e&v){r[2]=t[2];u|=n&v?0:p}var o=t[3];if(o){var c=r[3];r[3]=c?au(c,o,t[4]):o;r[4]=c?St(r[3],a):t[4]}o=t[5];if(o){c=r[5];r[5]=c?fu(c,o,t[6]):o;r[6]=c?St(r[5],a):t[6]}o=t[7];if(o){r[7]=o}if(e&b){r[8]=r[8]==null?t[8]:fn(r[8],t[8])}if(r[9]==null){r[9]=t[9]}r[0]=t[0];r[1]=u;return r}function ii(r){var t=[];if(r!=null){for(var n in Object(r)){t.push(n)}}return t}function ai(r){return Rt.call(r)}function fi(t,n,e){n=an(n===r?t.length-1:n,0);return function(){var r=arguments,u=-1,i=an(r.length-n,0),a=Array(i);while(++u<i){a[u]=r[n+u]}u=-1;var f=Array(n+1);while(++u<n){f[u]=r[u]}f[n]=e(a);return ut(t,this,f)}}function oi(r,t){return t.length<2?r:ye(r,Ge(t,0,-1))}function ci(t,n){var e=t.length,u=fn(n.length,e),i=ou(t);while(u--){var a=n[u];t[u]=Hu(a,e)?i[a]:r}return t}function li(r,t){if(t==="constructor"&&typeof r[t]==="function"){return}if(t=="__proto__"){return}return r[t]}var si=pi(Ne);var vi=pi(Ve);function hi(r,t,n){var e=t+"";return vi(r,Gu(e,wi(Ru(e),n)))}function pi(t){var n=0,e=0;return function(){var u=on(),i=O-(u-e);e=u;if(i>0){if(++n>=m){return arguments[0]}}else{n=0}return t.apply(r,arguments)}}var gi=ei(function(r){var t=[];if(r.charCodeAt(0)===46){t.push("")}r.replace(cr,function(r,n,e,u){t.push(e?u.replace(yr,"$1"):n||r)});return t});function yi(r){if(typeof r=="string"||ga(r)){return r}var t=r+"";return t=="0"&&1/r==-A?"-0":t}function _i(r){if(r!=null){try{return Dt.call(r)}catch(r){}try{return r+""}catch(r){}}return""}function wi(r,t){it(E,function(n){var e="_."+n[0];if(t&n[1]&&!ft(r,e)){r.push(e)}});return r.sort()}function bi(r){var t=-1,n=r==null?0:r.length,e=0,u=[];while(++t<n){var i=r[t];if(i){u[e++]=i}}return u}var di=Ce(function(r,t){return na(r)?le(r,he(t,1,na,true)):[]});var ji=Ce(function(t,n){var e=Ei(n);if(na(e)){e=r}return na(t)?le(t,he(n,1,na,true),Bu(e,2)):[]});var mi=Ce(function(t,n){var e=Ei(n);if(na(e)){e=r}return na(t)?le(t,he(n,1,na,true),r,e):[]});function Oi(r){var t=r==null?0:r.length;return t?he(r,1):[]}function Ai(r){var t=r==null?0:r.length;return t?he(r,A):[]}function xi(t,n){var e=t==null?0:t.length;if(!e){return[]}n=n===r?1:ba(n);return he(t,n)}var zi=Ce(function(r){var t=ct(r,Ye);return t.length&&t[0]===r[0]?je(t):[]});var ki=Ce(function(t){var n=Ei(t),e=ct(t,Ye);if(n===Ei(e)){n=r}else{e.pop()}return e.length&&e[0]===t[0]?je(e,Bu(n,2)):[]});var Si=Ce(function(t){var n=Ei(t),e=ct(t,Ye);n=typeof n=="function"?n:r;if(n){e.pop()}return e.length&&e[0]===t[0]?je(e,r,n):[]});function Ei(t){var n=t==null?0:t.length;return n?t[n-1]:r}var Ti=Ce(function(r){return He(he(r,1,na,true))});var $i=Ce(function(t){var n=Ei(t);if(na(n)){n=r}return He(he(t,1,na,true),Bu(n,2))});var Ii=Ce(function(t){var n=Ei(t);n=typeof n=="function"?n:r;return He(he(t,1,na,true),r,n)});function Bi(r){return r&&r.length?He(r):[]}function Wi(r,t){return r&&r.length?He(r,Bu(t,2)):[]}function Li(t,n){n=typeof n=="function"?n:r;return t&&t.length?He(t,r,n):[]}var Mi=Ce(function(r,t){return na(r)?le(r,t):[]});var Pi=Ce(function(r){return Qe(at(r,na))});var Di=Ce(function(t){var n=Ei(t);if(na(n)){n=r}return Qe(at(t,na),Bu(n,2))});var Fi=Ce(function(t){var n=Ei(t);n=typeof n=="function"?n:r;return Qe(at(t,na),r,n)});function qi(r,t){return Xe(r||[],t||[],ue)}function Ri(r,t){return Xe(r||[],t||[],Ue)}function Ci(r,t){return he(Vi(r,t),1)}function Ui(r,t){return he(Vi(r,t),A)}function Ni(t,n,e){e=e===r?1:ba(e);return he(Vi(t,n),e)}function Vi(r,t){var n=ra(r)?ct:We;return n(r,Bu(t,3))}var Gi=function(){return Jr.Date.now()};function Ki(t,n,e){n=e?r:n;var u=mu(t,g,r,r,r,r,r,n);u.placeholder=Ki.placeholder;return u}function Hi(t,n,u){var i,a,f,o,c,l,s=0,v=false,h=false,p=true;if(typeof t!="function"){throw new TypeError(e)}n=da(n)||0;if(oa(u)){v=!!u.leading;h="maxWait"in u;f=h?an(da(u.maxWait)||0,n):f;p="trailing"in u?!!u.trailing:p}function g(n){var e=i,u=a;i=a=r;s=n;o=t.apply(u,e);return o}function y(r){s=r;c=setTimeout(b,n);return v?g(r):o}function _(r){var t=r-l,e=r-s,u=n-t;return h?fn(u,f-e):u}function w(t){var e=t-l,u=t-s;return l===r||e>=n||e<0||h&&u>=f}function b(){var r=Gi();if(w(r)){return d(r)}c=setTimeout(b,_(r))}function d(t){c=r;if(p&&i){return g(t)}i=a=r;return o}function j(){if(c!==r){clearTimeout(c)}s=0;i=l=a=c=r}function m(){return c===r?o:d(Gi())}function O(){var t=Gi(),e=w(t);i=arguments;a=this;l=t;if(e){if(c===r){return y(l)}if(h){clearTimeout(c);c=setTimeout(b,n);return g(l)}}if(c===r){c=setTimeout(b,n)}return o}O.cancel=j;O.flush=m;return O}function Ji(r,t){if(typeof r!="function"||t!=null&&typeof t!="function"){throw new TypeError(e)}var n=function(){var e=arguments,u=t?t.apply(this,e):e[0],i=n.cache;if(i.has(u)){return i.get(u)}var a=r.apply(this,e);n.cache=i.set(u,a)||i;return a};n.cache=new(Ji.Cache||Rn);return n}Ji.Cache=Rn;function Qi(r,t,n){var u=true,i=true;if(typeof r!="function"){throw new TypeError(e)}if(oa(n)){u="leading"in n?!!n.leading:u;i="trailing"in n?!!n.trailing:i}return Hi(r,t,{leading:u,maxWait:t,trailing:i})}function Xi(){if(!arguments.length){return[]}var r=arguments[0];return ra(r)?r:[r]}function Yi(r,t){return r===t||r!==r&&t!==t}var Zi=me(function(){return arguments}())?me:function(r){return ca(r)&&Ft.call(r,"callee")&&!Qt.call(r,"callee")};var ra=Array.isArray;function ta(r){return r!=null&&fa(r.length)&&!aa(r)}function na(r){return ca(r)&&ta(r)}var ea=en||Fa;function ua(r,t){return Oe(r,t)}function ia(t,n,e){e=typeof e=="function"?e:r;var u=e?e(t,n):r;return u===r?Oe(t,n,r,e):!!u}function aa(r){if(!oa(r)){return false}var t=we(r);return t==M||t==P||t==I||t==U}function fa(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=x}function oa(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}function ca(r){return r!=null&&typeof r=="object"}var la=tt?bt(tt):xe;function sa(r){return r==null}function va(r){if(!ca(r)||we(r)!=R){return false}var t=Ht(r);if(t===null){return true}var n=Ft.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Dt.call(n)==Ct}var ha=nt?bt(nt):Se;function pa(r){return typeof r=="string"||!ra(r)&&ca(r)&&we(r)==G}function ga(r){return typeof r=="symbol"||ca(r)&&we(r)==K}var ya=et?bt(et):Ee;function _a(r){if(!r){return[]}if(ta(r)){return pa(r)?$t(r):ou(r)}if(Zt&&r[Zt]){return xt(r[Zt]())}var t=qu(r),n=t==D?zt:t==V?Et:Ia;return n(r)}function wa(r){if(!r){return r===0?r:0}r=da(r);if(r===A||r===-A){var t=r<0?-1:1;return t*z}return r===r?r:0}function ba(r){var t=wa(r),n=t%1;return t===t?n?t-n:t:0}function da(r){if(typeof r=="number"){return r}if(ga(r)){return k}if(oa(r)){var t=typeof r.valueOf=="function"?r.valueOf():r;r=oa(t)?t+"":t}if(typeof r!="string"){return r===0?r:+r}r=wt(r);var n=br.test(r);return n||jr.test(r)?Gr(r.slice(2),n?2:8):wr.test(r)?k:+r}function ja(r){return cu(r,za(r))}function ma(r){return r==null?"":Ke(r)}function Oa(t,n,e){var u=t==null?r:ye(t,n);return u===r?e:u}function Aa(r,t){return r!=null&&Cu(r,t,de)}function xa(r){return ta(r)?ne(r):$e(r)}function za(r){return ta(r)?ne(r,true):Ie(r)}var ka=vu(function(r,t,n){Pe(r,t,n)});var Sa=vu(function(r,t,n,e){Pe(r,t,n,e)});var Ea=ku(function(r,t){var n={};if(r==null){return n}var e=false;t=ct(t,function(t){t=Ze(t,r);e||(e=t.length>1);return t});cu(r,Eu(r),n);if(e){n=ce(n,f|o|c,Ou)}var u=t.length;while(u--){Je(n,t[u])}return n});var Ta=ku(function(r,t){return r==null?{}:Fe(r,t)});function $a(r,t){if(r==null){return{}}var n=ct(Eu(r),function(r){return[r]});t=Bu(t);return qe(r,n,function(r,n){return t(r,n[0])})}function Ia(r){return r==null?[]:dt(r,xa(r))}function Ba(r){return function(){return r}}function Wa(r){return r}function La(r){return Te(typeof r=="function"?r:ce(r,f))}function Ma(){}function Pa(r){return Qu(r)?yt(yi(r)):Re(r)}function Da(){return[]}function Fa(){return false}function qa(t){return t&&t.length?ve(t,Wa,be):r}function Ra(t){return t&&t.length?ve(t,Wa,Be):r}xn.castArray=Xi;xn.compact=bi;xn.constant=Ba;xn.curry=Ki;xn.debounce=Hi;xn.difference=di;xn.differenceBy=ji;xn.differenceWith=mi;xn.flatMap=Ci;xn.flatMapDeep=Ui;xn.flatMapDepth=Ni;xn.flatten=Oi;xn.flattenDeep=Ai;xn.flattenDepth=xi;xn.intersection=zi;xn.intersectionBy=ki;xn.intersectionWith=Si;xn.iteratee=La;xn.keys=xa;xn.keysIn=za;xn.map=Vi;xn.memoize=Ji;xn.merge=ka;xn.mergeWith=Sa;xn.omit=Ea;xn.pick=Ta;xn.pickBy=$a;xn.property=Pa;xn.throttle=Qi;xn.toArray=_a;xn.toPlainObject=ja;xn.union=Ti;xn.unionBy=$i;xn.unionWith=Ii;xn.uniq=Bi;xn.uniqBy=Wi;xn.uniqWith=Li;xn.values=Ia;xn.without=Mi;xn.xor=Pi;xn.xorBy=Di;xn.xorWith=Fi;xn.zipObject=qi;xn.zipObjectDeep=Ri;xn.eq=Yi;xn.get=Oa;xn.hasIn=Aa;xn.identity=Wa;xn.isArguments=Zi;xn.isArray=ra;xn.isArrayLike=ta;xn.isArrayLikeObject=na;xn.isBuffer=ea;xn.isEqual=ua;xn.isEqualWith=ia;xn.isFunction=aa;xn.isLength=fa;xn.isMap=la;xn.isNil=sa;xn.isObject=oa;xn.isObjectLike=ca;xn.isPlainObject=va;xn.isSet=ha;xn.isString=pa;xn.isSymbol=ga;xn.isTypedArray=ya;xn.last=Ei;xn.max=qa;xn.min=Ra;xn.stubArray=Da;xn.stubFalse=Fa;xn.noop=Ma;xn.now=Gi;xn.toFinite=wa;xn.toInteger=ba;xn.toNumber=da;xn.toString=ma;xn.VERSION=t;Ki.placeholder=xn;return xn});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/base/util/restricted/_debounce", ["sap/base/util/restricted/_/lodash.custom"],function(e){"use strict";return e.debounce});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/base/util/restricted/_isEqual", ["sap/base/util/restricted/_/lodash.custom"],function(s){"use strict";return s.isEqual});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/ColorPalette", ["sap/ui/core/Control","sap/ui/Device","sap/ui/base/DataType","sap/ui/core/Lib","sap/ui/core/library","sap/ui/core/delegate/ItemNavigation","./Button","./Dialog","./library","./ColorPaletteRenderer","sap/ui/dom/containsOrEquals","sap/ui/events/KeyCodes","sap/ui/thirdparty/jquery","sap/ui/unified/library","sap/ui/unified/ColorPickerDisplayMode","sap/ui/unified/ColorPicker"],function(t,e,o,r,i,n,s,l,a,h,u,p,jQuery,c,C,f){"use strict";var g=i.CSSColor;var _=c.ColorPickerMode;var d=a.ButtonType;var m=o.getType("boolean");var y="sapMColorPaletteSquare";var v="sapMColorPaletteContent";var R=5;var I=2;var D=15;var S=r.getResourceBundleFor("sap.m");var w=t.extend("sap.m.ColorPalette",{metadata:{library:"sap.m",properties:{colors:{type:"sap.ui.core.CSSColor[]",group:"Appearance",defaultValue:["gold","darkorange","indianred","darkmagenta","cornflowerblue","deepskyblue","darkcyan","olivedrab","darkslategray","azure","white","lightgray","darkgray","dimgray","black"]},selectedColor:{type:"sap.ui.core.CSSColor",defaultValue:null},_isInPopover:{type:"boolean",defaultValue:false,visibility:"hidden"}},aggregations:{_defaultColorButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_moreColorsButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"}},events:{colorSelect:{parameters:{value:{type:"sap.ui.core.CSSColor"},defaultAction:{type:"boolean"}}},liveChange:{parameters:{r:{type:"int"},g:{type:"int"},b:{type:"int"},h:{type:"int"},s:{type:"int"},v:{type:"int"},l:{type:"int"},hex:{type:"string"},alpha:{type:"string"}}}}},renderer:h});w.prototype.init=function(){this._oDefaultColor=null;this._bShowDefaultColorButton=false;this._bShowMoreColorsButton=false;this._bShowRecentColorsSection=false;this._oDisplayMode=C.Default;this._oMoreColorsDialog=null;this._oPaletteColorItemNavigation=null;this._oRecentColorItemNavigation=null;this._recentColors=[];this._bMainRegionSelection=true;this._bDefaultColorSelected=false};w.prototype.exit=function(){if(this._oMoreColorsDialog){this._oMoreColorsDialog.destroy();delete this._oMoreColorsDialog}if(this._oPaletteColorItemNavigation){this.removeDelegate(this._oPaletteColorItemNavigation);this._oPaletteColorItemNavigation.destroy();delete this._oPaletteColorItemNavigation}if(this._oRecentColorItemNavigation){this.removeDelegate(this._oRecentColorItemNavigation);this._oRecentColorItemNavigation.destroy();delete this._oRecentColorItemNavigation}};w.prototype.setColors=function(t){t=this.validateProperty("colors",t);if(t.length<I||t.length>D){throw new Error("Cannot set property 'colors' - array must has minimum 2 and maximum 15 elements")}return this.setProperty("colors",t)};w.prototype._setDisplayMode=function(t){var e=this._getColorPicker();e.setDisplayMode(t);this._oDisplayMode=t;return this};w.prototype._getDisplayMode=function(){return this._oDisplayMode};w.prototype._getColorPicker=function(){return this._ensureMoreColorsDialog()._oColorPicker};w.prototype.ontap=function(t){var e=t.target,o,r,i,n;r=e.closest("."+y);i=e.closest("."+v);if(!(r&&i)){return}o=r.getAttribute("data-sap-ui-color");n=i.getAttribute("data-sap-ui-region");this._bMainRegionSelection=n==="main-colors-palette";this._fireColorSelect(o,false,t)};w.prototype.onsaptabnext=w.prototype.onsaptabprevious=function(t){var e=this._getElementInfo(t.target);if(e.bIsMoreColorsButton){this.fireEvent("_colorNotSelected",{_originalEvent:t});return}if(e.bIsDefaultColorButton){this._bMainRegionSelection=false;this._fireColorSelect(this._getDefaultColor(),true,t);return}w.prototype.ontap.apply(this,arguments)};w.prototype.onsapenter=w.prototype.ontap;w.prototype.onsapspace=function(t){t.preventDefault()};w.prototype.onkeyup=function(t){if(t.which===p.SPACE){t.preventDefault();w.prototype.ontap.apply(this,arguments)}};w.prototype.onAfterRendering=function(){this._ensureItemNavigation()};w.prototype.pushToRecentColors=function(t){var e=this._recentColors.indexOf(t);if(!t){return}if(e>-1){this._recentColors.splice(e,1)}else if(this._recentColors.length===5){this._recentColors.pop()}this._recentColors.unshift(t);this.invalidate()};w.prototype.setColorPickerSelectedColor=function(t){if(!g.isValid(t)){throw new Error("Cannot set the selected color - invalid value: "+t)}const e=this._getColorPicker();e.setColorString(t);t=t.toLowerCase();if(t.indexOf("rgba")===-1&&t.indexOf("hsla")===-1){e._updateAlphaValue(1)}return this};w.prototype._createDefaultColorButton=function(){return new s(this.getId()+"-btnDefaultColor",{width:"100%",type:d.Transparent,text:S.getText("COLOR_PALETTE_DEFAULT_COLOR"),visible:this._getShowDefaultColorButton(),press:function(t){this._bMainRegionSelection=false;this._fireColorSelect(this._getDefaultColor(),true,t)}.bind(this)})};w.prototype._getDefaultColor=function(){return this._oDefaultColor};w.prototype._setDefaultColor=function(t){if(!g.isValid(t)){throw new Error("Cannot set internal property '_defaultColor' - invalid value: "+t)}this._oDefaultColor=t;return this};w.prototype._getShowDefaultColorButton=function(){return this._bShowDefaultColorButton};w.prototype._setShowDefaultColorButton=function(t){if(!m.isValid(t)){throw new Error("Cannot set internal property 'showDefaultColorButton' - invalid value: "+t)}this._bShowDefaultColorButton=t;if(t&&!this._getDefaultColorButton()){this.setAggregation("_defaultColorButton",this._createDefaultColorButton())}if(this._getDefaultColorButton()){this._getDefaultColorButton().setVisible(t)}return this};w.prototype._getDefaultColorButton=function(){return this.getAggregation("_defaultColorButton")};w.prototype._createMoreColorsButton=function(){return new s(this.getId()+"-btnMoreColors",{width:"100%",type:d.Transparent,text:S.getText("COLOR_PALETTE_MORE_COLORS"),visible:this._getShowMoreColorsButton(),press:this._openColorPicker.bind(this)})};w.prototype._getShowMoreColorsButton=function(){return this._bShowMoreColorsButton};w.prototype._getShowRecentColorsSection=function(){return this._bShowRecentColorsSection};w.prototype._getRecentColors=function(){return this._recentColors};w.prototype._setShowRecentColorsSection=function(t){if(!m.isValid(t)){throw new Error("Cannot set internal property 'showRecentColorsSection' - invalid value: "+t)}this._bShowRecentColorsSection=t;return this};w.prototype._setShowMoreColorsButton=function(t){if(!m.isValid(t)){throw new Error("Cannot set internal property 'showMoreColorsButton' - invalid value: "+t)}this._bShowMoreColorsButton=t;if(t&&!this._getMoreColorsButton()){this.setAggregation("_moreColorsButton",this._createMoreColorsButton())}if(this._getMoreColorsButton()){this._getMoreColorsButton().setVisible(t)}return this};w.prototype._getMoreColorsButton=function(){return this.getAggregation("_moreColorsButton")};w.prototype._isSelectedInMainRegion=function(){return this._bMainRegionSelection};w.prototype._isSelectedInRecentColors=function(){return!(this._bDefaultColorSelected||this._bMainRegionSelection)};w.prototype._openColorPicker=function(){const t=this.getSelectedColor();this.fireEvent("_beforeOpenColorPicker");if(t!==""){this.setColorPickerSelectedColor(t)}this._ensureMoreColorsDialog().open()};w.prototype._ensureMoreColorsDialog=function(){if(!this._oMoreColorsDialog){this._oMoreColorsDialog=this._createMoreColorsDialog()}return this._oMoreColorsDialog};w.prototype._createMoreColorsDialog=function(){var t=new l(this.getId()+"-moreColorsDialog",{stretch:!!e.system.phone,title:S.getText("COLOR_PALETTE_MORE_COLORS_TITLE")}).addStyleClass("CPDialog");t.addContent(t._oColorPicker=new f({mode:_.HSL,displayMode:this._oDisplayMode,liveChange:function(t){this.fireLiveChange(t.getParameters())}.bind(this)}));t.setBeginButton(new s({text:S.getText("COLOR_PALETTE_MORE_COLORS_CONFIRM"),type:d.Emphasized,press:function(e){t.close();if(t._oColorPicker.getColorString()){this._bMainRegionSelection=false;this._fireColorSelect(t._oColorPicker.getColorString(),false,e)}}.bind(this)}));t.setEndButton(new s({text:S.getText("COLOR_PALETTE_MORE_COLORS_CANCEL"),press:function(){t.close()}}));return t};w.prototype._focusFirstElement=function(){var t=this._getShowDefaultColorButton()?this._getDefaultColorButton().getDomRef():this._getAllPaletteColorSwatches()[0];t.focus()};w.prototype._focusSelectedElement=function(){var t,e=this._getAllRecentColorSwatches()[0];if(!this.getSelectedColor()||this._bDefaultColorSelected){this._focusFirstElement();return}if(this._bMainRegionSelection){t=this._getAllPaletteColorSwatches().find(t=>t.classList.contains("sapMColorPaletteSquareSelected"))}else{t=e}t?t.focus():this._focusFirstElement()};w.prototype._fireColorSelect=function(t,e,o){this.fireColorSelect({value:t,defaultAction:e,_originalEvent:o});this._bDefaultColorSelected=e;this.setSelectedColor(t);this.pushToRecentColors(t)};w.prototype._ensureItemNavigation=function(){var t=[],e=[];if(!this._oPaletteColorItemNavigation){this._oPaletteColorItemNavigation=new B(this);this._oPaletteColorItemNavigation.setColumns(R);this._oPaletteColorItemNavigation.setCycling(false);this.addDelegate(this._oPaletteColorItemNavigation);this._oPaletteColorItemNavigation.attachEvent(n.Events.BorderReached,this._onSwatchContainerBorderReached,this);this._oPaletteColorItemNavigation.setDisabledModifiers({sapnext:["alt","meta"],sapprevious:["alt","meta"],saphome:["alt","meta"],sapend:["meta"]})}if(!this._oRecentColorItemNavigation){this._oRecentColorItemNavigation=new B(this);this._oRecentColorItemNavigation.setColumns(R);this._oRecentColorItemNavigation.setCycling(false);this.addDelegate(this._oRecentColorItemNavigation);this._oRecentColorItemNavigation.attachEvent(n.Events.BorderReached,this._onSwatchContainerBorderReached,this);this._oRecentColorItemNavigation.setDisabledModifiers({sapnext:["alt","meta"],sapprevious:["alt","meta"],saphome:["alt","meta"],sapend:["meta"]})}t=t.concat(this._getAllPaletteColorSwatches());e=e.concat(this._getAllRecentColorSwatches());e=e.slice(0,this._getRecentColors().length);this._oPaletteColorItemNavigation.setRootDomRef(this.getDomRef("swatchCont-paletteColor"));this._oPaletteColorItemNavigation.setItemDomRefs(t);this._oRecentColorItemNavigation.setRootDomRef(this.getDomRef("swatchCont-recentColors"));this._oRecentColorItemNavigation.setItemDomRefs(e)};w.prototype._onSwatchContainerBorderReached=function(t){var e,o,r=["saphome","sapend"].indexOf(t.getParameter("event").type)>-1,i=this._getAllRecentColorSwatches()[0]?this._getElementInfo(t.mParameters.event.target).bIsRecentColorSwatch:false;if(t.getParameter(B.BorderReachedDirection)===B.BorderReachedDirectionForward){if(this._getShowMoreColorsButton()&&!i){e=this._getMoreColorsButton()}else if(!r&&this._bShowRecentColorsSection&&!i&&this._getRecentColors().length>0){e=this._getAllRecentColorSwatches()[0]}else if(!r&&this._getShowDefaultColorButton()){e=this._getDefaultColorButton()}else if(!r){e=this._getAllPaletteColorSwatches()[0]}}else{if(this._getShowDefaultColorButton()&&!i){e=this._getDefaultColorButton()}else if(!r&&this._bShowRecentColorsSection&&!i&&this._getRecentColors().length>0){e=this._getAllRecentColorSwatches()[0]}else if(!r&&this._getShowMoreColorsButton()){e=this._getMoreColorsButton()}else if(!r&&!this._getShowDefaultColorButton()){o=this._getAllPaletteColorSwatches();e=o[o.length-1]}else if(!r){o=this._getAllPaletteColorSwatches();e=o[this._oPaletteColorItemNavigation._getIndexOfTheFirstItemInLastRow()]}}if(e){e.focus()}return e};w.prototype.onsapnext=function(t){var e,o=this._getElementInfo(t.target);if(!(o.bIsDefaultColorButton||o.bIsMoreColorsButton)){return}t.preventDefault();t.stopImmediatePropagation(true);if(o.bIsDefaultColorButton){e=this._getAllPaletteColorSwatches()[0]}else if(this._getRecentColors().length>0&&!o.bIsRecentColorSwatch&&this._bShowRecentColorsSection){e=this._getAllRecentColorSwatches()[0]}else{e=this._getShowDefaultColorButton()?this._getDefaultColorButton():this._getAllPaletteColorSwatches()[0]}e.focus()};w.prototype.onsapprevious=function(t){var e,o=this._getElementInfo(t.target),r;if(!(o.bIsDefaultColorButton||o.bIsMoreColorsButton||t.target===this._getAllRecentColorSwatches()[0])){return}t.preventDefault();t.stopImmediatePropagation(true);r=this._getAllPaletteColorSwatches();if(o.bIsMoreColorsButton||!o.bIsMoreColorsButton&&this.bIsRecentColorSwatch){e=t.keyCode===p.ARROW_UP?r[r.length-1]:r[this._oPaletteColorItemNavigation._getIndexOfTheFirstItemInLastRow()]}else if(o.bIsRecentColorSwatch&&!this._bShowMoreColorsButton&&!this._bShowDefaultColorButton){r=this._getAllPaletteColorSwatches();e=r[this._oPaletteColorItemNavigation._getIndexOfTheFirstItemInLastRow()]}else if(this._getRecentColors().length>0&&!o.bIsRecentColorSwatch&&this._bShowRecentColorsSection){e=this._getAllRecentColorSwatches()[0]}else if(this._getShowMoreColorsButton()){e=this._getMoreColorsButton()}else{e=r[this._oPaletteColorItemNavigation._getIndexOfTheFirstItemInLastRow()]}e.focus()};w.prototype.onsaphome=function(t){if(!this.getProperty("_isInPopover")){return}var e=this._getElementInfo(t.target);if(!e.bIsMoreColorsButton){return}if(this._getShowDefaultColorButton()){this._getDefaultColorButton().focus()}t.preventDefault();t.stopImmediatePropagation(true)};w.prototype.onsapend=function(t){if(!this.getProperty("_isInPopover")){return}var e=this._getElementInfo(t.target);if(!e.bIsDefaultColorButton){return}if(this._getShowMoreColorsButton()){this._getMoreColorsButton().focus()}t.preventDefault();t.stopImmediatePropagation(true)};w.prototype._getAllPaletteColorSwatches=function(){return this.$().find("."+y).get().slice(0,this.getColors().length)};w.prototype._getAllRecentColorSwatches=function(){return this.$().find("."+y).get().slice(this.getColors().length)};w.prototype._getElementInfo=function(t){var e=this._getShowDefaultColorButton()&&u(t,this._getDefaultColorButton().getDomRef()),o=!e&&this._getShowMoreColorsButton()&&u(t,this._getMoreColorsButton().getDomRef()),r=this._getAllRecentColorSwatches().indexOf(t)>-1,i=this._getAllPaletteColorSwatches().indexOf(t)>-1;return{bIsDefaultColorButton:e,bIsMoreColorsButton:o,bIsASwatch:i,bIsRecentColorSwatch:r}};var B=n.extend("sap.m.ItemNavigationHomeEnd",{constructor:function(){n.apply(this,arguments);this.setHomeEndColumnMode(true);this.fireEvent=function(t,e){var o;if(t===n.Events.BorderReached){o=B.BorderReachedDirectionBackward;if(["sapnext","sapend"].indexOf(e.event.type)>-1){o=B.BorderReachedDirectionForward}e[B.BorderReachedDirection]=o}return n.prototype.fireEvent.apply(this,arguments)}}});B.BorderReachedDirection="direction";B.BorderReachedDirectionForward="BorderReachedDirectionForward";B.BorderReachedDirectionBackward="BorderReachedDirectionBackward";B.prototype.getColumns=function(){return this.iColumns};B.prototype.onsapprevious=function(t){var e=u(this.getRootDomRef(),t.target),o=t.keyCode===p.ARROW_UP&&this.getFocusedIndex()===0;if(!e){return}if(!o){n.prototype.onsapprevious.apply(this,arguments);return}t.preventDefault();this.fireEvent(n.Events.BorderReached,{index:0,event:t})};B.prototype.onsapnext=function(t){var e=u(this.getRootDomRef(),t.target),o,r,i;if(!e){return}if(t.keyCode!==p.ARROW_DOWN){n.prototype.onsapnext.apply(this,arguments);return}r=this.getFocusedIndex();i=this._getItemInfo(r);if(i.bIsLastItem&&i.bIsInTheLastColumn){t.preventDefault();this.fireEvent(n.Events.BorderReached,{index:r,event:t});return}if(i.bNextRowExists&&!i.bItemSameColumnNextRowExists){t.preventDefault();o=this.getItemDomRefs();o[o.length-1].focus();return}n.prototype.onsapnext.apply(this,arguments)};B.prototype.onsaphome=function(t){var e=u(this.getRootDomRef(),t.target),o=!this._isColorPaletteInPopover(),r;if(!e||o){return}r=this._getItemInfo(this.getFocusedIndex());if(!r.bIsInTheFirstColumn){n.prototype.onsaphome.apply(this,arguments);return}t.preventDefault();if(r.bIsFirstItem){this.fireEvent(n.Events.BorderReached,{index:0,event:t})}else{this.getItemDomRefs()[0].focus()}};B.prototype.onsapend=function(t){var e=u(this.getRootDomRef(),t.target),o=!this._isColorPaletteInPopover(),r;if(!e||o){return}r=this._getItemInfo(this.getFocusedIndex());if(!(r.bIsLastItem||r.bIsInTheLastColumn)){n.prototype.onsapend.apply(this,arguments);return}t.preventDefault();if(r.bIsLastItem){this.fireEvent(n.Events.BorderReached,{index:this.getItemDomRefs().length-1,event:t})}else{this.getItemDomRefs()[this.getItemDomRefs().length-1].focus()}};B.prototype._getItemInfo=function(t){var e=this.getItemDomRefs().length,o=t===e-1,r=e>this.getColumns()?this.getColumns():e,i=t%this.getColumns()===0,n=(t+1)%r===0,s=Math.floor(t/this.getColumns())+1,l,a;l=s*this.getColumns()<e;a=l&&t+this.getColumns()<e;return{bIsFirstItem:t===0,bIsLastItem:o,bIsInTheLastColumn:n,bIsInTheFirstColumn:i,bNextRowExists:l,bItemSameColumnNextRowExists:a}};B.prototype._getIndexOfTheFirstItemInLastRow=function(){return Math.floor((this.getItemDomRefs().length-1)/this.getColumns())*this.getColumns()};B.prototype._isColorPaletteInPopover=function(){const t=jQuery(this.getRootDomRef()).control(0);return t&&t.isA&&t.isA("sap.m.ColorPalette")&&t.getProperty("_isInPopover")};w.prototype._ItemNavigation=B;w.prototype._ColorsHelper={RGB_TO_NAMED_COLORS_MAP:{"#FFB200":"gold","#FF8C00":"darkorange","#CD5C5C":"indianred","#8B008B":"darkmagenta","#6495ED":"cornflowerblue","#00BFFF":"deepskyblue","#008B8B":"darkcyan","#6B8E23":"olivedrab","#2F4F4F":"darkslategray","#F0FFFF":"azure","#FFFFFF":"white","#D3D3D3":"lightgray","#A9A9A9":"darkgray","#696969":"dimgray","#000000":"black"},NAME_COLORS_TO_RGB_MAP:{gold:"#FFB200",darkorange:"#FF8C00",indianred:"#CD5C5C",darkmagenta:"#8B008B",cornflowerblue:"#6495ED",deepskyblue:"#00BFFF",darkcyan:"#008B8B",olivedrab:"#6B8E23",darkslategray:"#2F4F4F",azure:"#F0FFFF",white:"#FFFFFF",lightgray:"#D3D3D3",darkgray:"#A9A9A9",dimgray:"#696969",black:"#000000"},getNamedColor:function(t){var e="";if(!t||t.toLowerCase().indexOf("hsl")!==-1){return undefined}if(t.indexOf("#")===-1){return this.NAME_COLORS_TO_RGB_MAP[t.toLowerCase()]?t.toLowerCase():undefined}if(t.length===4){e=["#",t[1],t[1],t[2],t[2],t[3],t[3]].join("")}else{e=t}e=e.toUpperCase();return this.RGB_TO_NAMED_COLORS_MAP[e]}};return w});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/ColorPalettePopover", ["sap/ui/core/Control","sap/ui/Device","sap/ui/core/Lib","sap/ui/unified/ColorPickerDisplayMode","./Button","./ResponsivePopover","./ColorPalette","./library"],function(e,t,o,r,a,n,l,i){"use strict";var s=i.PlacementType;var p=e.extend("sap.m.ColorPalettePopover",{metadata:{library:"sap.m",publicMethods:["openBy","close"],properties:{defaultColor:{type:"sap.ui.core.CSSColor",group:"Appearance",defaultValue:null},colors:{type:"sap.ui.core.CSSColor[]",group:"Appearance",defaultValue:["gold","darkorange","indianred","darkmagenta","cornflowerblue","deepskyblue","darkcyan","olivedrab","darkslategray","azure","white","lightgray","darkgray","dimgray","black"]},selectedColor:{type:"sap.ui.core.CSSColor",defaultValue:null},showDefaultColorButton:{type:"boolean",group:"Appearance",defaultValue:true},showMoreColorsButton:{type:"boolean",group:"Appearance",defaultValue:true},showRecentColorsSection:{type:"boolean",group:"Appearance",defaultValue:true},displayMode:{type:"sap.ui.unified.ColorPickerDisplayMode",group:"Appearance",defaultValue:r.Default}},events:{colorSelect:{parameters:{value:{type:"sap.ui.core.CSSColor"},defaultAction:{type:"boolean"}}},liveChange:{parameters:{r:{type:"int"},g:{type:"int"},b:{type:"int"},h:{type:"int"},s:{type:"int"},v:{type:"int"},l:{type:"int"},hex:{type:"string"},alpha:{type:"string"}}}}},renderer:{apiVersion:2}});var u=o.getResourceBundleFor("sap.m");var c={COLOR_PALETTE_PROPS:{colors:"setColors",selectedColor:"setSelectedColor",defaultColor:"_setDefaultColor",showDefaultColorButton:"_setShowDefaultColorButton",showMoreColorsButton:"_setShowMoreColorsButton",showRecentColorsSection:"_setShowRecentColorsSection",displayMode:"_setDisplayMode"},POPOVER_METHODS:{getDomRef:"",close:"",openBy:""}};p.prototype.init=function(){this._oPopover=null;this._bPopoverDestroying=null};p.prototype.exit=function(){this._bPopoverDestroying=true;if(this._oPopover){this._oPopover.removeDelegate(this._oPopover._onAfterRenderingDelegate);this._oPopover.destroy();this._oPopover=null}};p.prototype.setColorPickerSelectedColor=function(e){this._getPalette().setColorPickerSelectedColor(e);return this};p.prototype._getPalette=function(){return this._ensurePopover().getContent()[0]};p.prototype._ensurePopover=function(){if(!this._oPopover){this._oPopover=this._createPopover()}return this._oPopover};p.prototype._createPopover=function(){var e,o=this._createColorPalette(),r;e=new n(this.getId()+"-colorPalettePopover",{showHeader:t.system.phone,placement:s.VerticalPreferredBottom,showArrow:false,showCloseButton:false,title:u.getText("COLOR_PALETTE_TITLE"),content:o,afterOpen:o._focusSelectedElement.bind(o)}).addStyleClass("sapMColorPaletteContainer");if(t.system.phone){e.setEndButton(new a({text:u.getText("COLOR_PALETTE_CANCEL"),press:function(){e.close()}}))}o.attachEvent("_beforeOpenColorPicker",function(){e.close()});o.attachEvent("_colorNotSelected",function(t){this._handleNextOrPreviousUponPaletteClose(t);e.close()}.bind(this));o.attachEvent("colorSelect",function(t){this._handleNextOrPreviousUponPaletteClose(t);e.close();const o=t.getParameter("value");this.setSelectedColor(o);this.fireColorSelect({value:o,defaultAction:t.getParameter("defaultAction")})}.bind(this));r={onAfterRendering:function(){var e=this.$();e.attr("aria-modal","true");e.attr("aria-label",this.getTitle())}};e.addEventDelegate(r,e);e._onAfterRenderingDelegate=r;return e};p.prototype._createColorPalette=function(){var e=new l(this.getId()+"-palette",{liveChange:function(e){this.fireLiveChange(e.getParameters())}.bind(this)});e._setShowDefaultColorButton(this.getShowDefaultColorButton());e._setShowMoreColorsButton(this.getShowMoreColorsButton());e._setShowRecentColorsSection(this.getShowRecentColorsSection());e.setProperty("_isInPopover",true);return e};p.prototype._handleNextOrPreviousUponPaletteClose=function(e){var t=e.getParameter("_originalEvent");if(!t){return}if(t.type==="saptabnext"||t.type==="saptabprevious"){t.stopPropagation();t.preventDefault()}};p.prototype.setProperty=function(t,o,r){var a;if(c.COLOR_PALETTE_PROPS[t]!==undefined){a=c.COLOR_PALETTE_PROPS[t]||t;l.prototype[a].call(this._getPalette(),o)}return e.prototype.setProperty.apply(this,arguments)};Object.keys(c.POPOVER_METHODS).forEach(function(e){var t=c.COLOR_PALETTE_PROPS[e]||e;p.prototype[e]=function(){if(this._bPopoverDestroying){return null}var e=this._ensurePopover();return e[t].apply(e,arguments)}});return p});
/*
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/ColorPaletteRenderer", ["sap/ui/Device","sap/ui/core/Lib"],function(e,t){"use strict";var o={apiVersion:2};var r=t.getResourceBundleFor("sap.m");o.render=function(t,o){t.openStart("div",o);t.class("sapMColorPalette");t.openEnd();if(o._getShowDefaultColorButton()){this.renderDefaultColorButton(t,o);this.renderSeparator(t)}this.renderSwatches(t,o);if(o._getShowMoreColorsButton()){this.renderSeparator(t);this.renderMoreColorsButton(t,o);if(e.system.phone){this.renderSeparator(t)}}if(o._getShowRecentColorsSection()){if(!o._getShowMoreColorsButton()||!e.system.phone){this.renderSeparator(t)}this.renderRecentColorsSection(t,o);if(e.system.phone){this.renderSeparator(t)}}t.close("div")};o.renderSwatches=function(e,t){var o=t.getColors(),n=t.getSelectedColor(),a=t._isSelectedInMainRegion(),s=o.indexOf(n),l;e.openStart("div",t.getId()+"-swatchCont-paletteColor");e.class("sapMColorPaletteContent");e.attr("data-sap-ui-region","main-colors-palette");e.accessibilityState(t,{role:"region",label:r.getText("COLOR_PALETTE_SWATCH_CONTAINER_TITLE")});e.openEnd();o.forEach(function(o,r){l=a&&s===r&&o===n;this.renderSquare(e,t,o,r,false,l)},this);e.close("div")};o.renderSquare=function(e,t,o,n,a,s){var l=t._ColorsHelper.getNamedColor(o),i=l===undefined?r.getText("COLOR_PALETTE_PREDEFINED_COLOR_CUSTOM"):r.getText("COLOR_PALETTE_PREDEFINED_COLOR_"+l.toUpperCase()),d=a?r.getText("COLOR_PALETTE_RECENT_COLOR",[n+1,i]):r.getText("COLOR_PALETTE_PREDEFINED_COLOR",[n+1,i]);e.openStart("div");e.class("sapMColorPaletteSquare");if(a&&o===""){e.class("sapMRecentColorSquareDisabled")}if(s){e.class("sapMColorPaletteSquareSelected")}e.attr("data-sap-ui-color",o);e.attr("tabindex","-1");e.attr("title",d);e.accessibilityState(t,{role:"button",label:d,pressed:s});e.openEnd();e.openStart("div");e.style("background-color",o);e.openEnd();e.close("div");e.close("div")};o.renderSeparator=function(e){e.openStart("div");e.class("sapMColorPaletteSeparator");e.openEnd();e.voidStart("hr");e.voidEnd();e.close("div")};o.renderDefaultColorButton=function(e,t){e.renderControl(t._getDefaultColorButton())};o.renderMoreColorsButton=function(e,t){e.renderControl(t._getMoreColorsButton())};o.renderRecentColorsSection=function(e,t){var o,n=t._getRecentColors(),a=5,s=r.getText("COLOR_PALETTE_SWATCH_RECENT_COLOR_CONTAINER_TITLE"),l=t._isSelectedInRecentColors(),i=t.getSelectedColor(),d;e.openStart("div",t.getId()+"-swatchCont-recentColors");e.class("sapMColorPaletteContent");e.attr("data-sap-ui-region","recent-colors-palette");e.attr("role","region");e.attr("aria-label",s);e.openEnd();for(var c=0;c<a;c++){if(n[c]){o=n[c]}else{o=""}d=l&&c==0&&i&&o===i;this.renderSquare(e,t,o,c,true,d)}e.close("div")};return o},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/IconTabBar", ["./library","sap/ui/core/Control","./IconTabBarRenderer","./IconTabHeader","sap/ui/core/RenderManager","sap/ui/core/util/ResponsivePaddingsEnablement","sap/ui/thirdparty/jquery"],function(e,t,n,r,a,o,jQuery){"use strict";var i=e.IconTabHeaderMode;var s=e.BackgroundDesign;var d=e.IconTabDensityMode;var p=e.TabsOverflowMode;var l=t.extend("sap.m.IconTabBar",{metadata:{interfaces:["sap.m.ObjectHeaderContainer","sap.f.IDynamicPageStickyContent"],library:"sap.m",properties:{showSelection:{type:"boolean",group:"Misc",defaultValue:true,deprecated:true},expandable:{type:"boolean",group:"Misc",defaultValue:true},expanded:{type:"boolean",group:"Misc",defaultValue:true},selectedKey:{type:"string",group:"Data",defaultValue:null},upperCase:{type:"boolean",group:"Appearance",defaultValue:false},stretchContentHeight:{type:"boolean",group:"Appearance",defaultValue:false},applyContentPadding:{type:"boolean",group:"Appearance",defaultValue:true},backgroundDesign:{type:"sap.m.BackgroundDesign",group:"Appearance",defaultValue:s.Solid},headerMode:{type:"sap.m.IconTabHeaderMode",group:"Appearance",defaultValue:i.Standard},showOverflowSelectList:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},headerBackgroundDesign:{type:"sap.m.BackgroundDesign",group:"Appearance",defaultValue:s.Solid},enableTabReordering:{type:"boolean",group:"Behavior",defaultValue:false},maxNestingLevel:{type:"int",group:"Behavior",defaultValue:0},tabDensityMode:{type:"sap.m.IconTabDensityMode",group:"Appearance",defaultValue:d.Cozy},ariaTexts:{type:"object",group:"Accessibility",defaultValue:null},tabsOverflowMode:{type:"sap.m.TabsOverflowMode",group:"Behavior",defaultValue:p.End}},aggregations:{items:{type:"sap.m.IconTab",multiple:true,singularName:"item",forwarding:{getter:"_getIconTabHeader",aggregation:"items",forwardBinding:true}},content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"},_header:{type:"sap.m.IconTabHeader",multiple:false,visibility:"hidden"}},events:{select:{parameters:{item:{type:"sap.m.IconTabFilter"},key:{type:"string"},previousKey:{type:"string"},selectedItem:{type:"sap.m.IconTabFilter"},selectedKey:{type:"string"}}},expand:{parameters:{expand:{type:"boolean"},collapse:{type:"boolean"}}}},designtime:"sap/m/designtime/IconTabBar.designtime"},renderer:n});o.call(l.prototype,{header:{selector:".sapMITH"},content:{suffix:"content"}});l._CLASSES_TO_COPY=["sapUiResponsiveContentPadding","sapUiNoContentPadding","sapUiContentPadding"];l.prototype.init=function(){this._initResponsivePaddingsEnablement()};l.prototype.setExpanded=function(e){this.setProperty("expanded",e,true);if(this.$().length){this._toggleExpandCollapse(this.getProperty("expanded"))}return this};l.prototype.setHeaderMode=function(e){var t=this._getIconTabHeader();this.setProperty("headerMode",e,true);if(t){t.setMode(e)}return this};l.prototype.setTabDensityMode=function(e){var t=this._getIconTabHeader();this.setProperty("tabDensityMode",e);if(t){t.setTabDensityMode(e)}return this};l.prototype.setHeaderBackgroundDesign=function(e){var t=this._getIconTabHeader();this.setProperty("headerBackgroundDesign",e,true);if(t){t.setBackgroundDesign(e)}return this};l.prototype.setEnableTabReordering=function(e){var t=this._getIconTabHeader();this.setProperty("enableTabReordering",e,true);if(t){t.setEnableTabReordering(e)}return this};l.prototype.setAriaTexts=function(e){var t=this._getIconTabHeader();this.setProperty("ariaTexts",e,true);if(t){t.setAriaTexts(e)}return this};l.prototype.addStyleClass=function(e,n){var r=this._getIconTabHeader();if(r){e.split(/\s+/).forEach(e=>{if(l._CLASSES_TO_COPY.includes(e)){r.addStyleClass(e,true)}})}return t.prototype.addStyleClass.apply(this,arguments)};l.prototype.removeStyleClass=function(e,n){var r=this._getIconTabHeader();if(r){e.split(/\s+/).forEach(e=>{if(l._CLASSES_TO_COPY.includes(e)){r.removeStyleClass(e,true)}})}return t.prototype.removeStyleClass.apply(this,arguments)};l.prototype._rerenderContent=function(e){var t=this.$("content");if(e&&t.length>0){var n=(new a).getInterface();for(var r=0;r<e.length;r++){n.renderControl(e[r])}n.flush(t[0]);n.destroy()}};l.prototype._toggleExpandCollapse=function(e){var t=this.$("content");var n=this._getIconTabHeader().oSelectedItem;if(e===undefined){e=!this.getExpanded()}if(n){n.$().toggleClass("sapMITBSelected",e);n.$().attr({"aria-expanded":e});if(e){n.$().attr({"aria-selected":e})}else{n.$().removeAttr("aria-selected")}}this._iAnimationCounter=this._iAnimationCounter===undefined?1:++this._iAnimationCounter;if(e){if(n){if(this.$("content").children().length===0){var r=n.getContent();if(r.length>0){this._rerenderContent(r)}else{this._rerenderContent(this.getContent())}}t.stop(true,true).slideDown("400",jQuery.proxy(this.onTransitionEnded,this,e));this.$("containerContent").toggleClass("sapMITBContentClosed",!e)}}else{this.$("contentArrow").hide();t.stop(true,true).slideUp("400",jQuery.proxy(this.onTransitionEnded,this,e))}if(!e||n){this.setProperty("expanded",e,true)}this.fireExpand({expand:e,collapse:!e});return this};l.prototype.onTransitionEnded=function(e){var t=this.$("content"),n=this.$("containerContent"),r=this.$("contentArrow");if(this._iAnimationCounter===1){n.toggleClass("sapMITBContentClosed",!e);if(e){r.show();t.css("display","block")}else{r.hide();t.css("display","none")}}this._iAnimationCounter=this._iAnimationCounter>0?--this._iAnimationCounter:0;return this};l.prototype._getIconTabHeader=function(){if(this.isDestroyStarted()){return null}var e=this.getAggregation("_header");if(!e){e=new r(this.getId()+"--header",{});this.setAggregation("_header",e,true)}return e};l.prototype._getStickyContent=function(){return this._getIconTabHeader()};l.prototype._returnStickyContent=function(){if(this.bIsDestroyed){return}this._getStickyContent().$().prependTo(this.$())};l.prototype._setStickySubheaderSticked=function(e){this._bStickyContentSticked=e};l.prototype._getStickySubheaderSticked=function(){return this._bStickyContentSticked};l.prototype.onBeforeRendering=function(){var e=this._getIconTabHeader(),t=e.$();e.setMaxNestingLevel(this.getMaxNestingLevel());e.setTabsOverflowMode(this.getTabsOverflowMode());if(this._bStickyContentSticked&&t){delete this._bStickyContentSticked;this._getIconTabHeader().$().remove()}};l.prototype.setShowSelection=function(e){var t=this._getIconTabHeader();if(t){t.setShowSelection(e)}this.setProperty("showSelection",e,true);return this};l.prototype.setSelectedKey=function(e){var t=this._getIconTabHeader();if(t){t.setSelectedKey(e)}return this};l.prototype.getSelectedKey=function(){var e=this._getIconTabHeader();if(e){return e.getSelectedKey()}return this.getMetadata().getProperty("selectedKey").getDefaultValue()};l.prototype.setSelectedItem=function(e,t){return this._getIconTabHeader().setSelectedItem(e,t)};return l});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/IconTabBarDragAndDropUtil", ["sap/base/i18n/Localization","sap/ui/core/dnd/DragInfo","sap/ui/core/dnd/DropInfo","sap/ui/events/KeyCodes","sap/ui/core/library"],function(e,t,r,i,a){"use strict";var n=a.dnd.DropPosition;var s="Before",o="insertBefore",g="insertAfter",f,l="IconTabReorder",c="Forward",u="Backward";var d={_insertControl:function(e,t,r,i){var a=t.$(),n=r.$(),s=[],o=[];if(t._getNestedLevel()>1&&r._getNestedLevel()>1){s=t._getRootTab()._getSelectList().getItems().filter(function(e){return t._getRealTab()._isParentOf(e._getRealTab())});o=r._getRootTab()._getSelectList().getItems().filter(function(e){return r._getRealTab()._isParentOf(e._getRealTab())})}if(i){var f=t._getRootTab().getParent()._getOverflow()._getSelectList().getItems();s=f.filter(function(e){return t._getRealTab()._isParentOf(e._getRealTab())});o=f.filter(function(e){return r._getRealTab()._isParentOf(e._getRealTab())})}if(e===g){a.insertAfter(n)}else{a.insertBefore(n)}s.reverse().forEach(function(e){e.$().insertAfter(a)});o.reverse().forEach(function(e){e.$().insertAfter(n)})},handleDrop:function(t,r,i,a,l,c){var u=t.indexOfItem(i),_=t.indexOfItem(a),b=0,p=e.getRTL(),h=r===s,I=a._getNestedLevel()-1;if(i._isParentOf(a)){return}if(I===c&&r===n.On){return}if(p&&!l){if(h){b=u<_?_:_+1;f=g}else{b=u<_?_-1:_;f=o}}else{if(h){b=u<_?_-1:_;f=o}else{b=u<_?_:_+1;f=g}}if(t.isA("sap.m.IconTabFilter")||!i.getParent().isA("sap.m.IconTabHeader")){if(h){b=_}else{b=_+1}}d._insertControl(f,i,a);if(r===n.On){if(a===i){return}b=t.getAggregation("items").length}d._handleConfigurationAfterDragAndDrop.call(t,i,b)},_updateAccessibilityInfo:function(){var e=this.getItems(),t=1,r;e.forEach(function(e){r=e.getDomRef();if(r&&r.getAttribute("aria-posinset")!==null){r.setAttribute("aria-posinset",t++)}})},_handleConfigurationAfterDragAndDrop:function(e,t){var r=[],i=this.isA("sap.m.IconTabHeader")?this:this._getIconTabHeader();if(this.isA("sap.m.IconTabBarSelectList")){r=this.getItems().filter(function(t){return e._getRealTab()._isParentOf(t._getRealTab())})}i._setPreserveSelection(true);this.removeAggregation("items",e,true);this.insertAggregation("items",e,t,true);r.forEach(function(e){this.removeAggregation("items",e,true)}.bind(this));var a=1+this.indexOfAggregation("items",e);r.reverse().forEach(function(e){this.insertAggregation("items",e,a,true)}.bind(this));i._setPreserveSelection(false);d._updateAccessibilityInfo.call(this)},_decreaseDropIndex:function(e,t){var r=e-1;while(r>=0&&(t[e]._getRealTab()._getNestedLevel()!==t[r]._getRealTab()._getNestedLevel()||!t[r].getVisible()||!t[e].$().hasClass("sapMITBFilterHidden")&&t[r].$().hasClass("sapMITBFilterHidden"))){r--}if(r<0){f=g;return e}f=o;return r},_increaseDropIndex:function(e,t,r){var i=e+1;while(i<t.length&&(t[e]._getRealTab()._getNestedLevel()!==t[i]._getRealTab()._getNestedLevel()||!t[i].getVisible())){i++}if(i>r){f=o;return e}f=g;return i},moveItem:function(t,r,a){var n=this.getItems(),s=this.indexOfItem(t),l=e.getRTL(),_,b;if(this.isA("sap.m.IconTabFilter")){n=this._getRealTab().getItems()}switch(r){case i.HOME:_=0;f=o;break;case i.END:_=n.length-1;f=g;break;case i.ARROW_LEFT:if(l){b=d.preventDragBetweenSubItems(t,c,this);_=d._increaseDropIndex(s,n,a)}else{b=d.preventDragBetweenSubItems(t,u,this);_=d._decreaseDropIndex(s,n)}break;case i.ARROW_RIGHT:if(l){b=d.preventDragBetweenSubItems(t,u,this);_=d._decreaseDropIndex(s,n)}else{b=d.preventDragBetweenSubItems(t,c,this);_=d._increaseDropIndex(s,n,a)}break;case i.ARROW_DOWN:b=d.preventDragBetweenSubItems(t,c,this);_=d._increaseDropIndex(s,n,a);break;case i.ARROW_UP:b=d.preventDragBetweenSubItems(t,u,this);_=d._decreaseDropIndex(s,n);break;default:return false}if(b){return false}if(!this.isA("sap.m.IconTabFilter")){var p=n[_];d._insertControl(f,t,p,this._oTabFilter&&this._oTabFilter._bIsOverflow)}d._handleConfigurationAfterDragAndDrop.call(this,t,_);return true},setDragDropAggregations:function(e,i,a){var n=e._oIconTabHeader?e._oIconTabHeader:e;var s=n.getId();e.addDragDropConfig(new t({sourceAggregation:"items",groupName:l+s}));e.addDragDropConfig(new r({targetAggregation:"items",dropPosition:a,dropLayout:i,drop:e._handleDragAndDrop.bind(e),groupName:l+s}))},preventDragBetweenSubItems:function(e,t,r){var i=false;if(r.isA("sap.m.IconTabBarSelectList")){var a=e._getRealTab(),n=a.getParent(),s=n.getItems();if(s.indexOf(a)===0&&t===u||s.indexOf(a)+1===s.length&&t===c||s.length===1){i=true}}return i}};return d});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/IconTabBarRenderer", [],function(){"use strict";var e={apiVersion:2};e._aAllIconColors=["sapMITBFilterCritical","sapMITBFilterPositive","sapMITBFilterNegative","sapMITBFilterDefault"];e.render=function(e,t){var n=t.getContent(),a=t._getIconTabHeader();e.openStart("div",t).class("sapMITB");if(t.getStretchContentHeight()){e.class("sapMITBStretch")}if(!t.getApplyContentPadding()){e.class("sapMITBNoContentPadding")}e.class("sapMITBBackgroundDesign"+t.getBackgroundDesign()).openEnd();if(!t._bHideHeader){e.renderControl(a)}e.openStart("div",t.getId()+"-containerContent").class("sapMITBContainerContent");if(!t.getExpanded()){e.class("sapMITBContentClosed")}e.openEnd();e.openStart("div",t.getId()+"-content").class("sapMITBContent").attr("role","tabpanel");if(!t.getExpanded()){e.style("display","none")}if(a.oSelectedItem){e.accessibilityState({labelledby:a.oSelectedItem._getRootTab().getId()})}e.openEnd();if(t.getExpanded()){if(a.oSelectedItem&&a.oSelectedItem.getContent()){var o=a.oSelectedItem.getContent();if(o.length>0){n=o}}n.forEach(function(t){e.renderControl(t)})}e.close("div").close("div").close("div")};return e},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/IconTabBarSelectList", ["./library","./IconTabBarDragAndDropUtil","./IconTabBarSelectListRenderer","sap/ui/core/Control","sap/ui/core/delegate/ItemNavigation","sap/ui/core/theming/Parameters","sap/ui/core/library","sap/ui/events/KeyCodes"],function(e,t,i,o,n,a,r,s){"use strict";var g=r.dnd.DropPosition;var l=o.extend("sap.m.IconTabBarSelectList",{metadata:{library:"sap.m",aggregations:{items:{type:"sap.m.IconTab",multiple:true,singularName:"item",dnd:true}},events:{selectionChange:{parameters:{selectedItem:{type:"sap.m.IconTabFilter"}}}}},renderer:i});l.prototype.init=function(){this._oItemNavigation=new n;this._oItemNavigation.setCycling(false);this.addEventDelegate(this._oItemNavigation);this._oItemNavigation.setPageSize(10);this._oIconTabHeader=null;this._oTabFilter=null};l.prototype.exit=function(){this._oItemNavigation.destroy();this._oItemNavigation=null;this._oIconTabHeader=null;this._oTabFilter=null};l.prototype.onBeforeRendering=function(){if(!this._oIconTabHeader){return}this.destroyDragDropConfig();this._setsDragAndConfiguration()};l.prototype.onAfterRendering=function(){this._initItemNavigation();this.getItems().forEach(function(e){if(e._onAfterParentRendering){e._onAfterParentRendering()}})};l.prototype._setsDragAndConfiguration=function(){if(this._oIconTabHeader.getEnableTabReordering()&&!this.getDragDropConfig().length){t.setDragDropAggregations(this,"Vertical",this._oIconTabHeader._getDropPosition())}};l.prototype._initItemNavigation=function(){var e=this.getItems(),t=[],i=this._oIconTabHeader.oSelectedItem,o=-1,n,a;for(a=0;a<e.length;a++){n=e[a];if(n.isA("sap.m.IconTabFilter")){var r=n._getAllSubFiltersDomRefs();t=t.concat(n.getDomRef(),r)}if(i&&this.getSelectedItem()&&this.getSelectedItem()._getRealTab()===i){o=a}}if(i&&t.indexOf(i.getDomRef())!==-1){o=t.indexOf(i.getDomRef())}this._oItemNavigation.setRootDomRef(this.getDomRef()).setItemDomRefs(t).setSelectedIndex(o)};l.prototype.getVisibleItems=function(){return this.getItems().filter(function(e){return e.getVisible()})};l.prototype.getVisibleTabFilters=function(){return this.getVisibleItems().filter(function(e){return e.isA("sap.m.IconTabFilter")})};l.prototype.setSelectedItem=function(e){this._selectedItem=e};l.prototype.getSelectedItem=function(){return this._selectedItem};l.prototype._getIconTabHeader=function(){return this._oIconTabHeader};l.prototype._getParams=function(){var e=Object.assign({_sap_m_IconTabBar_SelectListItem_PaddingLeft:"0.5rem",_sap_m_IconTabBar_SelectListItem_PaddingLeftAdditional:"0"},a.get({name:["_sap_m_IconTabBar_SelectListItem_PaddingLeft","_sap_m_IconTabBar_SelectListItem_PaddingLeftAdditional"],callback:this.invalidate.bind(this)}));return{fNestedItemPaddingLeft:Number.parseFloat(e["_sap_m_IconTabBar_SelectListItem_PaddingLeft"]),fAdditionalPadding:Number.parseFloat(e["_sap_m_IconTabBar_SelectListItem_PaddingLeftAdditional"])}};l.prototype._checkTextOnly=function(){return this.getItems().every(function(e){return e.isA("sap.m.IconTabSeparator")||!e.getIcon()})};l.prototype.onkeydown=function(e){switch(e.which){case s.ENTER:this._selectItem(e);e.preventDefault();break;case s.SPACE:e.preventDefault();break}};l.prototype.onkeyup=function(e){if(e.which===s.SPACE){this._selectItem(e)}};l.prototype.ontap=function(e){this._selectItem(e)};l.prototype._selectItem=function(e){var t=e.srcControl;if(!t){return}if(!t.isA("sap.m.IconTabFilter")){return}if(!this._oIconTabHeader._isSelectable(t)){return}e.preventDefault();if(t!==this.getSelectedItem()){this.fireSelectionChange({selectedItem:t})}};l.prototype.checkIconOnly=function(){this._bIconOnly=this.getVisibleTabFilters().every(function(e){return!e.getText()&&!e.getCount()});return this._bIconOnly};l.prototype._handleDragAndDrop=function(e){var i=e.getParameter("dropPosition"),o=e.getParameter("draggedControl"),n=e.getParameter("droppedControl"),a=n._getRealTab().getParent(),r=this._oIconTabHeader.getMaxNestingLevel();if(this._oTabFilter._isOverflow()){a=this._oIconTabHeader}if(i===g.On){a=n._getRealTab()}t.handleDrop(a,i,o._getRealTab(),n._getRealTab(),true,r);this._oIconTabHeader._setItemsForStrip();this._oIconTabHeader._initItemNavigation();this._oTabFilter._setSelectListItems();this._initItemNavigation();n._getRealTab().getParent().$().trigger("focus")};l.prototype.ondragrearranging=function(e){if(!this._oIconTabHeader.getEnableTabReordering()){return}var i=e.srcControl,o=e.keyCode,n=this.indexOfItem(i),a=this;t.moveItem.call(a,i,o,a.getItems().length-1);this._initItemNavigation();i.$().trigger("focus");if(n===this.indexOfItem(i)){return}a=i._getRealTab().getParent();if(this._oTabFilter._isOverflow()&&i._getRealTab()._getNestedLevel()===1){this._oIconTabHeader._moveTab(i._getRealTab(),o,this._oIconTabHeader.getItems().length-1)}else{t.moveItem.call(a,i._getRealTab(),o,a.getItems().length-1)}};l.prototype.onsaphomemodifiers=l.prototype.ondragrearranging;l.prototype.onsapendmodifiers=l.prototype.ondragrearranging;l.prototype.onsapincreasemodifiers=l.prototype.ondragrearranging;l.prototype.onsapdecreasemodifiers=l.prototype.ondragrearranging;return l});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/IconTabBarSelectListRenderer", ["sap/ui/core/library"],function(e){"use strict";var t=e.IconColor;var i={apiVersion:2};i.render=function(e,i){var r=i._getParams(),n=i.getVisibleItems(),a=i._oIconTabHeader,s=i._checkTextOnly(),l=a.getVisibleTabFilters().length,o=r.fNestedItemPaddingLeft,c=false;var f=n.filter(function(e){return e.isA("sap.m.IconTabFilter")}).some(function(e){return e.getIconColor()!==t.Default});i.checkIconOnly();var u=r.fAdditionalPadding;if(f&&u){o+=u;c=true}this.renderList(e,n,i,a,s,o,c,l)};i.renderList=function(e,t,i,r,n,a,s,l){if(!t.length){return}e.openStart("ul",i).attr("role","menu").class("sapMITBSelectList");if(n){e.class("sapMITBSelectListTextOnly")}e.openEnd();for(var o=0;o<t.length;o++){var c=t[o],f;if(r&&c.isA("sap.m.IconTabFilter")){f=r.getVisibleTabFilters().indexOf(c._getRealTab())}if(c.isA("sap.m.IconTabFilter")&&c._getRootTab()._getSelectList()===i){f=o;l=t.length}var u=c._getNestedLevel()-2;if(s){u++}if(i._bIsOverflow){u++}c.renderInSelectList(e,i,f,l,a*u)}e.close("ul")};return i},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/IconTabFilter", ["./library","sap/ui/core/Icon","./IconTabFilterExpandButtonBadge","sap/base/i18n/Localization","sap/ui/core/Lib","sap/ui/core/library","sap/ui/core/Item","sap/ui/core/Renderer","sap/ui/core/IconPool","sap/ui/core/InvisibleMessage","sap/ui/Device","sap/m/BadgeCustomData","sap/m/Button","sap/m/ResponsivePopover","sap/m/IconTabBarSelectList","sap/m/BadgeEnabler","sap/m/ImageHelper","sap/ui/core/InvisibleText"],function(e,t,o,i,s,a,n,r,l,p,g,d,c,h,f,u,_,I){"use strict";var v=a.TextAlign;var b=a.TextDirection;var T=e.PlacementType;var m=e.IconTabFilterDesign;var B=e.IconTabFilterInteractionMode;var y=e.BadgeStyle;var C=e.BadgeState;var S=a.IconColor;var O=3e3;var x=a.InvisibleMessageMode;var E=-8;var D=n.extend("sap.m.IconTabFilter",{metadata:{interfaces:["sap.m.IconTab","sap.ui.core.PopupInterface","sap.m.IBadge"],library:"sap.m",designtime:"sap/m/designtime/IconTabFilter.designtime",properties:{count:{type:"string",group:"Data",defaultValue:""},showAll:{type:"boolean",group:"Misc",defaultValue:false},icon:{type:"sap.ui.core.URI",group:"Misc",defaultValue:""},iconColor:{type:"sap.ui.core.IconColor",group:"Appearance",defaultValue:S.Default},iconDensityAware:{type:"boolean",group:"Appearance",defaultValue:true},visible:{type:"boolean",group:"Behavior",defaultValue:true},design:{type:"sap.m.IconTabFilterDesign",group:"Appearance",defaultValue:m.Vertical},interactionMode:{type:"sap.m.IconTabFilterInteractionMode",group:"Behavior",defaultValue:B.Auto}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"},items:{type:"sap.m.IconTab",multiple:true,singularName:"item"},_expandIcon:{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"},_expandButtonBadge:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}}}});u.call(D.prototype);var A=s.getResourceBundleFor("sap.m");D._aAllIconColors=["sapMITBFilterCritical","sapMITBFilterPositive","sapMITBFilterNegative","sapMITBFilterDefault","sapMITBFilterNeutral"];D.prototype._getImageControl=function(e,t,o){var i={src:this.getIcon(),densityAware:this.getIconDensityAware(),useIconTooltip:false};if(i.src){this._oImageControl=_.getImageControl(this.getId()+"-icon",this._oImageControl,t,i,e,o)}else if(this._oImageControl){this._oImageControl.destroy();this._oImageControl=null}return this._oImageControl};D.prototype.init=function(){this._oDragEventDelegate={onlongdragover:this._handleOnLongDragOver,ondragover:this._handleOnDragOver,ondragleave:this._handleOnDragLeave,ondrop:this._handleOnDrop};this.initBadgeEnablement({style:y.Attention,selector:{selector:".sapMITBBadgeHolder"}});this._oCloneInList=null;this.setAggregation("_expandButtonBadge",new o)};D.prototype.exit=function(e){if(this._oImageControl){this._oImageControl.destroy()}if(n.prototype.exit){n.prototype.exit.call(this,e)}if(this._oPopover){this._oPopover.destroy();this._oPopover=null}if(this._oExpandIcon){this._oExpandIcon.removeEventDelegate(this._oDragEventDelegate);this._oExpandIcon.destroy();this._oExpandIcon=null}this.removeEventDelegate(this._oDragEventDelegate);this._oDragEventDelegate=null;if(this._iHideBadgeTimeout){clearTimeout(this._iHideBadgeTimeout)}};D.prototype.invalidate=function(){var e=this.getParent(),t,o;if(!e){return}t=e.getParent();if(!(t&&t.isA("sap.m.IconTabBar"))){e.invalidate();return}o=t.getParent();if(o&&o.isA("sap.m.ObjectHeader")){o.invalidate()}else{t.invalidate()}};D.prototype.setProperty=function(e,t,o){switch(e){case"textDirection":case"text":case"count":case"showAll":case"icon":case"iconColor":case"iconDensityAware":case"design":if(this.getProperty(e)===t){return this}n.prototype.setProperty.call(this,e,t,true);if(!o){var i=this.getParent();if(i&&i.isA("sap.m.IconTabHeader")){i.invalidate()}}break;default:n.prototype.setProperty.apply(this,arguments);break}return this};D.prototype._getNonEmptyKey=function(){var e=this.getKey();if(e){return e}return this.getId()};D.prototype._getRealTab=function(){return this._oRealItem||this};D.prototype._getRootTab=function(){var e=this._getRealTab(),t=e.getParent();while(t&&t.isA("sap.m.IconTabFilter")){e=t;t=t.getParent()}return e};D.prototype._getNestedLevel=function(){var e=this._getRealTab().getParent(),t;for(t=1;e&&e.isA("sap.m.IconTabFilter");t++){e=e.getParent()}return t};D.prototype.render=function(e,t,o){if(!this.getVisible()){return}var i=this.getParent(),s=i.getParent();if(i.getEnableTabReordering()){this._prepareDragEventDelegate()}var a=i._isInsideIconTabBar(),n={role:"tab"},r=this.getId(),p=this.getCount(),g=this.getText(),d=this.getIcon(),c=this.getIconColor(),h=this.getEnabled(),f=this._shouldReadIconColor(),u=this.getDesign()===m.Horizontal,_=i._bTextOnly,I=i._bInLine||i.isInlineMode(),v=this.getShowAll(),T=this.getTextDirection(),B=i._isSelectable(this);if(this._isOverflow()){n.role="button";n.expanded=false}if(this.getItems().length&&B){n.haspopup="menu"}if(a){n.controls=s.getId()+"-content"}if(g.length||p!==""||d){var y=[];if(p!==""&&!I){y.push(r+"-count")}if(g.length){y.push(r+"-text")}if(d){y.push(r+"-icon")}if(f){y.push(r+"-iconColor")}n.labelledby=y.join(" ")}if(t!==undefined&&o!==undefined){Object.assign(n,{posinset:t+1,setsize:o})}e.openStart("div",this).accessibilityState(n).class("sapMITBItem");if(!p){e.class("sapMITBItemNoCount")}if(u){e.class("sapMITBHorizontal")}else{e.class("sapMITBVertical")}if(v){e.class("sapMITBAll")}else{e.class("sapMITBFilter")}if(!v&&h){e.class("sapMITBFilter"+c)}if(!B){e.class("sapMITHUnselectable")}if(this.getItems().length>0){e.class("sapMITBFilterWithItems")}if(!h){e.class("sapMITBDisabled").attr("aria-disabled",true)}e.attr("tabindex","-1");if(!this._isOverflow()){e.attr("aria-selected",false)}var C=this.getTooltip_AsString();if(C){e.attr("title",C)}if(this._isOverflow()||!B){e.attr("aria-haspopup","menu")}e.openEnd();if(f){this._renderIconColorDescription(e)}e.openStart("div").class("sapMITBFilterWrapper").openEnd();if(!I){e.openStart("div",r+"-tab").class("sapMITBTab").openEnd();if(!v||!d){var S=["sapMITBFilterIcon","sapMITBBadgeHolder"];if(h){S.push("sapMITBFilter"+c)}e.renderControl(this._getImageControl(S,i,D._aAllIconColors))}if(!v&&!d&&!_){e.openStart("span").class("sapMITBFilterNoIcon").openEnd().close("span")}if(u&&!v){e.close("div");e.openStart("div").class("sapMITBHorizontalWrapper").openEnd()}e.openStart("span",r+"-count").class("sapMITBCount");if(v||!d&&!g.length){e.class("sapMITBBadgeHolder")}e.openEnd();if(p===""&&u){e.unsafeHtml("&nbsp;")}else{e.text(p)}e.close("span");if(!u){e.close("div")}}if(g.length){e.openStart("div",r+"-text").class("sapMITBText");if(!v){e.class("sapMITBBadgeHolder")}if(a&&s.getUpperCase()){e.class("sapMITBTextUpperCase")}e.openEnd();if(I&&d){this._renderIcon(e)}e.openStart("span").class("sapMITHTextContent").attr("dir",T!==b.Inherit?T.toLowerCase():"auto");e.openEnd().text(i._getDisplayText(this)).close("span");if(this._isOverflow()||this.getItems().length&&!B){e.openStart("span",this.getId()+"-expandButton").class("sapMITHShowSubItemsIcon").openEnd();e.icon(l.getIconURI("slim-arrow-down"),null,{title:null,"aria-hidden":true});e.close("span")}e.close("div")}if(!I&&u){e.close("div")}e.openStart("div").class("sapMITBContentArrow").openEnd().close("div");e.close("div");if(this.getItems().length&&B){e.openStart("span").class("sapMITBFilterExpandBtnSeparator").accessibilityState({role:"separator"}).openEnd().close("span");e.openStart("span",this.getId()+"-expandButton").class("sapMITBFilterExpandBtn").openEnd();e.renderControl(this._getExpandIcon());e.close("span")}e.renderControl(this.getAggregation("_expandButtonBadge"));if(this.getItems().length){this._updateExpandButtonBadge()}e.close("div")};D.prototype.renderInSelectList=function(e,t,o,i,s){if(!this.getVisible()){return}var a=t._bIconOnly,n=true,r=t._oIconTabHeader,l=this.getIconColor(),p=this.getEnabled();if(r){n=t._checkTextOnly()}e.openStart("li",this).class("sapMITBSelectItem").attr("tabindex","-1").attr("role","menuitem");if(s){e.style("padding-left",s+"rem")}if(o!==undefined&&i!==undefined){e.attr("aria-posinset",o+1);e.attr("aria-setsize",i)}var g=this.getTooltip_AsString();if(g){e.attr("title",g)}if(!r._isSelectable(this)){e.class("sapMITHUnselectable")}if(!p){e.class("sapMITBDisabled").attr("aria-disabled",true)}if(t.getSelectedItem()==this){e.class("sapMITBSelectItemSelected");e.attr("aria-selected",true)}if(p){e.class("sapMITBFilter"+l)}var d=this.getId(),c=this._shouldReadIconColor(),h=[];if(!a){h.push(d+"-text")}if(!n&&this.getIcon()){h.push(d+"-icon")}if(c){h.push(d+"-iconColor")}e.accessibilityState({labelledby:h.join(" ")}).openEnd();if(c){this._renderIconColorDescription(e)}if(!n){this._renderIcon(e,a)}if(!a){this._renderText(e)}e.close("li")};D.prototype._onAfterParentRendering=function(){this._renderBadge();p.getInstance()};D.prototype._renderIcon=function(e,t){var o=this.getIcon();if(o){var i=l.getIconInfo(o),s=["sapMITBSelectItemIcon"];if(i&&!i.suppressMirroring){s.push("sapUiIconMirrorInRTL")}if(t){s.push("sapMITBBadgeHolder")}if(this._getIconTabHeader().isInlineMode()){s.push("sapMITBInlineIcon")}e.icon(o,s,{id:this.getId()+"-icon","aria-hidden":true,"aria-label":null})}else{e.openStart("span").class("sapUiIcon").openEnd().close("span")}};D.prototype._renderIconColorDescription=function(e){e.openStart("div",this.getId()+"-iconColor").style("display","none").openEnd().text(A.getText("ICONTABBAR_ICONCOLOR_"+this.getIconColor().toUpperCase())).close("div")};D.prototype._renderText=function(e){var t=this.getText(),o=this.getCount(),s=i.getRTL(),a=this.getTextDirection();e.openStart("span",this.getId()+"-text").attr("dir",a!==b.Inherit?a.toLowerCase():"auto").class("sapMText").class("sapMTextNoWrap").class("sapMITBText").class("sapMITBBadgeHolder");var n=r.getTextAlign(v.Begin,a);if(n){e.style("text-align",n)}if(o){if(s){t="("+o+") "+t}else{t+=" ("+o+")"}}e.openEnd().text(t).close("span")};D.prototype._getSelectList=function(){if(!this._oSelectList){this._oSelectList=new f({selectionChange:function(e){var t=e.getParameter("selectedItem");this._oIconTabHeader.setSelectedItem(t._getRealTab());this._oTabFilter._closePopover()}});this._oSelectList._oIconTabHeader=this.getParent();this._oSelectList._oTabFilter=this;this._oSelectList._bIsOverflow=this._isOverflow()}return this._oSelectList};D.prototype._prepareDragEventDelegate=function(){if(this.getEnabled()){this.addEventDelegate(this._oDragEventDelegate,this)}else{this.removeEventDelegate(this._oDragEventDelegate)}};D.prototype._updateTabCountText=function(){if(!this._isOverflow()){return}var e=this._getIconTabHeader()._getItemsForOverflow(this._bIsStartOverflow,true).filter(function(e){return e.isA("sap.m.IconTabFilter")}).length;this.setText("+"+e)};D.prototype._getExpandIcon=function(){this._oExpandIcon=this.getAggregation("_expandIcon");if(!this._oExpandIcon){this._oExpandIcon=new t(this.getId()+"-expandIcon",{src:l.getIconURI("slim-arrow-down"),tooltip:A.getText("ICONTABHEADER_OVERFLOW_MORE"),noTabStop:true,press:this._expandButtonPress.bind(this)}).addStyleClass("sapMITBFilterExpandIcon");this.setAggregation("_expandIcon",this._oExpandIcon)}return this._oExpandIcon};D.prototype._updateExpandButtonBadge=function(){var e=this.getAggregation("_expandButtonBadge"),t=e.getBadgeCustomData()&&e.getBadgeCustomData().getVisible(),o=this._hasChildWithBadge();if(o&&!t){e.addCustomData(new d({visible:true}))}else if(!o&&t){e.getBadgeCustomData().setVisible(false)}};D.prototype._hasChildWithBadge=function(){var e=this._isOverflow()?this._getIconTabHeader()._getItemsForOverflow(this._bIsStartOverflow):this._getAllSubItems();return e.some(function(e){return e.isA("sap.m.IBadge")&&e.getBadgeCustomData()&&e.getBadgeCustomData().getVisible()})};D.prototype._expandButtonPress=function(){if(!this.getEnabled()){return}this.$().trigger("focus");if(!this._oPopover){this._oPopover=new h({showArrow:false,showHeader:false,offsetY:0,offsetX:0,placement:T.VerticalPreferredBottom,ariaLabelledBy:this._isOverflow()?I.getStaticId("sap.m",this._getOverflowPopoverAccessibleNameLabel()):I.getStaticId("sap.m",this._getSubItemsPopoverAccessibleNameLabel())}).addStyleClass("sapMITBFilterPopover");this._oPopover.attachAfterClose(function(){this._getSelectList().destroyItems();if(this._isOverflow()){this.getDomRef().setAttribute("aria-expanded","false")}},this);if(g.system.phone){this._oPopover._oControl.addButton(this._createPopoverCloseButton())}if(this._getIconTabHeader()._isInsideToolHeader()){this._oPopover.addStyleClass("sapMITBFilterPopoverInToolHeader");this._oPopover.setOffsetY(E);if(!g.system.phone){this._oPopover.addEventDelegate({onAfterRendering:function(e){this._oPopover.getDomRef().style.minWidth=this.$().outerWidth(true)+"px"}.bind(this)})}}this.addDependent(this._oPopover);this._oPopover._oControl._adaptPositionParams=function(){var e=this.$().parents().hasClass("sapUiSizeCompact");this._arrowOffset=0;if(e){this._offsets=["0 0","0 0","0 4","0 0"]}else{this._offsets=["0 0","0 0","0 5","0 0"]}this._atPositions=["end top","end top","end bottom","begin top"];this._myPositions=["end bottom","begin top","end top","end top"]}}var e=this._setSelectListItems();var t=this._getSelectList();this._oPopover.removeAllContent();if(this.getItems().length||this._isOverflow()){if(this._isOverflow()){this.getDomRef().setAttribute("aria-expanded","true")}this._oPopover.addContent(t);this._oPopover.setInitialFocus(e?t.getSelectedItem():t.getVisibleTabFilters()[0]);this._oPopover.openBy(this)}};D.prototype._getOverflowPopoverAccessibleNameLabel=function(){return"ICONTABBAR_OVERFLOW_POPOVER_ACCESSIBLE_NAME"};D.prototype._getSubItemsPopoverAccessibleNameLabel=function(){return"ICONTABBAR_SUBITEMS_POPOVER_ACCESSIBLE_NAME"};D.prototype._getAllSubItems=function(){var e=[];this._getRealTab().getItems().forEach(function(t){if(t.isA("sap.m.IconTabFilter")){e=e.concat(t,t._getAllSubItems())}else{e=e.concat(t)}});return e};D.prototype._getAllSubFilters=function(){return this._getAllSubItems().filter(function(e){return e.isA("sap.m.IconTabFilter")})};D.prototype._getAllSubFiltersDomRefs=function(){return this._getAllSubFilters().filter(function(e){return Boolean(e._getRealTab().getDomRef())}).map(function(e){return e._getRealTab().getDomRef()})};D.prototype._getFirstAvailableSubFilter=function(){var e=this._getAllSubFilters();for(var t=0;t<e.length;t++){var o=e[t];if(o.getContent().length&&o.getVisible()){return o}}return this};D.prototype._isParentOf=function(e){var t=this._getAllSubFilters();for(var o=0;o<t.length;o++){if(t[o]._getRealTab()===e){return true}}return false};D.prototype._createPopoverCloseButton=function(){return new c({text:A.getText("SELECT_CANCEL_BUTTON"),press:this._closePopover.bind(this)})};D.prototype._closePopover=function(){if(this._oPopover){this._oPopover.close();this._oPopover.removeAllContent()}if(this._isOverflow()&&this.getParent().oSelectedItem){(this.getParent()._oSelectedRootItem||this.getParent().oSelectedItem._getRootTab()).$().trigger("focus")}};D.prototype._handleOnDragOver=function(e){if(this._isDropPossible(e)){this.getDomRef().classList.add("sapMITHDragOver");e.preventDefault()}};D.prototype._handleOnLongDragOver=function(e){if(this._isDropPossible(e)){if(this._oPopover&&this._oPopover.isOpen()){return}this._expandButtonPress()}};D.prototype._handleOnDrop=function(){this.getDomRef().classList.remove("sapMITHDragOver")};D.prototype._handleOnDragLeave=function(){this.getDomRef().classList.remove("sapMITHDragOver")};D.prototype._isDropPossible=function(e){var t=this._getIconTabHeader(),o=e.dragSession.getDragControl()._getRealTab(),i=t.oSelectedItem;if(t!==o._getIconTabHeader()){return false}if(o===this||o._isParentOf(this)){return false}if(!this._isOverflow()&&!t.getMaxNestingLevel()){return false}if(this._isOverflow()&&i&&(i===o||i._getRootTab()===o)){return false}return true};D.prototype._setSelectListItems=function(){var e=this.getParent(),t=this._getSelectList(),o=this._getAllSubItems(),i=e.oSelectedItem,s=false,a,n,r,l,p;if(this._isOverflow()){o=e._getItemsForOverflow(this._bIsStartOverflow)}t.destroyItems();t.setSelectedItem(null);for(l=0;l<o.length;l++){a=o[l];n=a.clone(undefined,undefined,{cloneChildren:false,cloneBindings:true});a._oCloneInList=n;r=a.getCustomData();for(p=0;p<r.length;p++){n.addCustomData(r[p].clone())}n._oRealItem=a;t.addItem(n);if(a.isA("sap.m.IconTabSeparator")){continue}if(n._getRealTab()===i){t.setSelectedItem(n);s=true;continue}if(n._getRealTab()._isParentOf(i)){t.setSelectedItem(i._getRealTab());s=true}}return s};D.prototype._isOverflow=function(){return this._bIsOverflow||this._bIsStartOverflow};D.prototype._getIconTabHeader=function(){return this._getRootTab().getParent()};D.prototype.onsapdown=function(e){if(!this.getEnabled()){return}if(this._isOverflow()||this._getNestedLevel()===1&&this._getRealTab()===this&&this._getRealTab().getItems().length!==0){e.stopImmediatePropagation();this._expandButtonPress()}};D.prototype._startBadgeHiding=function(){if(this._iHideBadgeTimeout){return}this._iHideBadgeTimeout=setTimeout(this._hideBadge.bind(this),O);if(this._getRootTab()!==this){this._getRootTab()._updateExpandButtonBadge()}};D.prototype._hideBadge=function(){var e=this.getBadgeCustomData();if(!e){return}e.setVisible(false);if(this._getRootTab()!==this){this._getRootTab()._updateExpandButtonBadge()}if(this._oCloneInList&&!this._oCloneInList.bIsDestroyed&&this._oCloneInList.getBadgeCustomData()){this._oCloneInList.getBadgeCustomData().setVisible(false);this._oCloneInList=null}if(this._isInOverflow()){this._getIconTabHeader()._getOverflow()._updateExpandButtonBadge()}if(this._isInStartOverflow()){this._getIconTabHeader()._getStartOverflow()._updateExpandButtonBadge()}this._iHideBadgeTimeout=null};D.prototype._isInOverflow=function(){return!this._bIsOverflow&&this._getIconTabHeader()._getItemsInStrip().indexOf(this._getRealTab())===-1};D.prototype._isInStartOverflow=function(){return!this._bIsStartOverflow&&this._getIconTabHeader()._getItemsInStrip().indexOf(this._getRealTab())===-1};D.prototype.onBadgeUpdate=function(e,t,o){var i=this.getDomRef(),s=this._getIconTabHeader(),a,n,r,l,g,c,h,f;if(!s){return}if(i){r=i.getAttribute("aria-labelledby")||"";switch(t){case C.Appear:r=o+" "+r;break;case C.Disappear:r=r.replace(o,"").trim();break}i.setAttribute("aria-labelledby",r)}if(!s._isRendered()){return}a=this._getRootTab();if(a._isInOverflow()){g=this._getIconTabHeader()._getOverflow();g._updateExpandButtonBadge()}if(a._isInStartOverflow()){c=this._getIconTabHeader()._getStartOverflow();c._updateExpandButtonBadge()}else if(a!==this){a._updateExpandButtonBadge()}if(t!==C.Appear){return}this._enableMotion();if((this._isInOverflow()||this._isInStartOverflow())&&this._oCloneInList){this._oCloneInList.addCustomData(new d)}n=p.getInstance();l=this.getText();if(a._isInOverflow()){h="ICONTABFILTER_SUB_ITEM_BADGE";f=[l,g.getText()]}if(a._isInStartOverflow()){h="ICONTABFILTER_SUB_ITEM_BADGE";f=[l,c.getText()]}else{if(a!==this){h="ICONTABFILTER_SUB_ITEM_BADGE";f=[l,a.getText()]}else{h="ICONTABFILTER_BADGE_MSG";f=[l]}}n.announce(A.getText(h,f),x.Assertive)};D.prototype.getAriaLabelBadgeText=function(){return A.getText("ICONTABFILTER_BADGE")};D.prototype._enableMotion=function(){if(this._getRealTab()._isInOverflow()||this._getRealTab()._isInStartOverflow()){if(this._oCloneInList&&this._oCloneInList.getDomRef()){this._oCloneInList.getDomRef().classList.add("sapMITBFilterBadgeMotion")}}else if(this.getDomRef()){this.getDomRef().classList.add("sapMITBFilterBadgeMotion")}};D.prototype._shouldReadIconColor=function(){var e=this.getIconColor();return this.getEnabled()&&(e==="Positive"||e==="Critical"||e==="Negative"||e==="Neutral")};return D});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/IconTabFilterExpandButtonBadge", ["./BadgeEnabler","sap/ui/core/Control","sap/ui/core/Lib"],function(e,t,a){"use strict";var n=a.getResourceBundleFor("sap.m");var r=t.extend("sap.m.IconTabFilterExpandButtonBadge",{metadata:{library:"sap.m",interfaces:["sap.m.IBadge"]},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t).class("sapMITFExpandButtonBadge").openEnd().close("div")}}});e.call(r.prototype);r.prototype.init=function(){this.initBadgeEnablement({style:"Attention"})};r.prototype.getAriaLabelBadgeText=function(){return n.getText("ICONTABFILTER_SUB_ITEMS_BADGES")};r.prototype.onBadgeUpdate=function(){var e=this.getParent();e.onBadgeUpdate.apply(e,arguments)};return r});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/IconTabHeader", ["./library","sap/base/i18n/Localization","sap/ui/core/Control","sap/ui/core/Element","sap/ui/core/EnabledPropagator","sap/ui/core/Lib","sap/ui/core/delegate/ItemNavigation","sap/ui/core/InvisibleText","sap/ui/core/ResizeHandler","sap/ui/core/Theming","sap/ui/Device","sap/m/Button","sap/m/IconTabFilter","sap/m/IconTabSeparator","sap/m/IconTabBarDragAndDropUtil","sap/ui/core/library","sap/m/IconTabHeaderRenderer","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/events/KeyCodes"],function(e,t,i,s,r,o,a,n,l,d,h,f,p,g,c,u,v,jQuery,m,I){"use strict";var _=u.dnd.DropPosition;var y=e.BackgroundDesign;var b=e.IconTabHeaderMode;var T=e.IconTabDensityMode;var S=e.TabsOverflowMode;var w=e.IconTabFilterInteractionMode;var O=i.extend("sap.m.IconTabHeader",{metadata:{library:"sap.m",properties:{showSelection:{type:"boolean",group:"Misc",defaultValue:true,deprecated:true},selectedKey:{type:"string",group:"Data",defaultValue:null},visible:{type:"boolean",group:"Behavior",defaultValue:true},mode:{type:"sap.m.IconTabHeaderMode",group:"Appearance",defaultValue:b.Standard},showOverflowSelectList:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},backgroundDesign:{type:"sap.m.BackgroundDesign",group:"Appearance",defaultValue:y.Solid},enableTabReordering:{type:"boolean",group:"Behavior",defaultValue:false},maxNestingLevel:{type:"int",group:"Behavior",defaultValue:0},tabDensityMode:{type:"sap.m.IconTabDensityMode",group:"Appearance",defaultValue:T.Cozy},ariaTexts:{type:"object",group:"Accessibility",defaultValue:null},tabsOverflowMode:{type:"sap.m.TabsOverflowMode",group:"Behavior",defaultValue:S.End}},aggregations:{items:{type:"sap.m.IconTab",multiple:true,singularName:"item",dnd:{draggable:true,droppable:true,layout:"Horizontal"}},_overflow:{type:"sap.m.IconTabFilter",multiple:false,visibility:"hidden"},_startOverflow:{type:"sap.m.IconTabFilter",multiple:false,visibility:"hidden"}},events:{select:{parameters:{item:{type:"sap.m.IconTabFilter"},key:{type:"string"},previousKey:{type:"string"}}}}},renderer:v});var x=o.getResourceBundleFor("sap.m");r.apply(O.prototype,[true]);O.prototype.init=function(){this._bFireSelectEvent=false;this._aTabKeys=[];this._oAriaHeadText=null;this._bIsRendered=false;this._bThemeApplied=false;this._handleThemeAppliedBound=this._handleThemeApplied.bind(this)};O.prototype.exit=function(){if(this._oItemNavigation){this.removeDelegate(this._oItemNavigation);this._oItemNavigation.destroy();delete this._oItemNavigation}if(this._sResizeListenerId){l.deregister(this._sResizeListenerId);this._sResizeListenerId=null}if(this._aTabKeys){this._aTabKeys=null}if(this._oOverflow){this._oOverflow.removeEventDelegate(this._oOverflowEventDelegate);this._oOverflowEventDelegate=null;this._oOverflow=null}if(this._oStartOverflow){this._oStartOverflow.removeEventDelegate(this._oStartOverflowEventDelegate);this._oStartOverflowEventDelegate=null;this._oStartOverflow=null}if(this._oAriaHeadText){this._oAriaHeadText.destroy();this._oAriaHeadText=null}this._bRtl=null};O.prototype.onBeforeRendering=function(){this._bIsRendered=false;this._bRtl=t.getRTL();if(this._sResizeListenerId){l.deregister(this._sResizeListenerId);this._sResizeListenerId=null}this._updateSelection();this.destroyDragDropConfig();this._setsDragAndDropConfigurations()};O.prototype.onAfterRendering=function(){this._applyTabDensityMode();if(this.oSelectedItem){this._applySelectionToFilters();this.oSelectedItem._hideBadge()}if(this._bThemeApplied){this._setItemsForStrip()}else{d.attachApplied(this._handleThemeAppliedBound)}this._initItemNavigation();this._sResizeListenerId=l.register(this.getDomRef(),jQuery.proxy(this._fnResize,this));this.getItems().forEach(function(e){if(e._onAfterParentRendering){e._onAfterParentRendering()}});this._bIsRendered=true};O.prototype._isRendered=function(){return this._bIsRendered};O.prototype._getSelectList=function(){return this._getOverflow()._getSelectList()};O.prototype._getOverflow=function(){var e=this.getAggregation("_overflow");if(!e){e=new p({id:this.getId()+"-overflow",text:x.getText("ICONTABHEADER_OVERFLOW_MORE")});e._bIsOverflow=true;this._oOverflowEventDelegate={onsapnext:e.onsapdown};e.addEventDelegate(this._oOverflowEventDelegate,e);this.setAggregation("_overflow",e);this._oOverflow=e}return e};O.prototype._getStartOverflow=function(){var e=this.getAggregation("_startOverflow");if(!e){e=new p({id:this.getId()+"-startOverflow",text:x.getText("ICONTABHEADER_OVERFLOW_MORE")});e._bIsStartOverflow=true;this._oStartOverflowEventDelegate={onsapprevious:e.onsapdown};e.addEventDelegate(this._oStartOverflowEventDelegate,e);this.setAggregation("_startOverflow",e);this._oStartOverflow=e}return e};O.prototype._getInvisibleHeadText=function(){var e=this.getAriaTexts()||{};if(!this._oAriaHeadText){this._oAriaHeadText=new n({id:this.getId()+"-ariaHeadText"})}this._oAriaHeadText.setText(e.headerDescription);return this._oAriaHeadText};O.prototype._onItemNavigationFocusLeave=function(){if(!this.oSelectedItem){return}var e=this._oItemNavigation.getItemDomRefs().indexOf(this.oSelectedItem._getRootTab().getDomRef());this._oItemNavigation.setFocusedIndex(e)};O.prototype._onItemNavigationBeforeFocus=function(e){if(e.getParameter("event").target===this.getDomRef()){s.getElementById(this._oItemNavigation.getItemDomRefs()[e.getParameter("index")].getAttribute("id"))._closePopover()}};O.prototype.getTabFilters=function(){var e=[];this.getItems().forEach(function(t){if(t instanceof p){e.push(t)}});return e};O.prototype._setsDragAndDropConfigurations=function(){if(this.getEnableTabReordering()&&!this.getDragDropConfig().length){c.setDragDropAggregations(this,"Horizontal",this._getDropPosition())}};O.prototype._getDropPosition=function(){return this.getMaxNestingLevel()===0?_.Between:_.OnOrBetween};O.prototype.setSelectedKey=function(e){if(e===this.getSelectedKey()){if(this._isInsideIconTabBar()){this.getParent().setProperty("selectedKey",e,true)}return this}var t=this.getTabFilters(),i=this._isInsideIconTabBar(),s=true,r;if(t.length>0){e=e||t[0]._getNonEmptyKey()}if(this.$().length){r=this._findItemByKey(e);if(r){this.setSelectedItem(r,s)}else if(!i&&e){this.setSelectedItem(null)}}this.setProperty("selectedKey",e,true);return this};O.prototype.setSelectedItem=function(e,t){if(!e){if(this.oSelectedItem){this._removeSelectionFromFilters();this.oSelectedItem=null}return this}if(!this._isSelectable(e)){return this}var i=this.getParent();var s=this._isInsideIconTabBar();var r=this.getSelectedKey();var o=false;if(e.getContent().length===0&&this.oSelectedItem&&this.oSelectedItem.getContent().length===0){o=true}if(this.oSelectedItem&&this.oSelectedItem.getVisible()&&(!t&&s&&i.getExpandable()||this.oSelectedItem!==e)){this._removeSelectionFromFilters()}if(e.getVisible()){if(this.oSelectedItem===e){if(!t&&s&&i.getExpandable()){i._toggleExpandCollapse()}}else{if(s){i.$("content").attr("aria-labelledby",e._getRootTab().getId())}this.oSelectedItem=e;this._applySelectionToFilters();this.setProperty("selectedKey",this.oSelectedItem._getNonEmptyKey(),true);if(s&&(i.getExpandable()||i.getExpanded())){var a=this.oSelectedItem.getContent();if(a.length>0){i._rerenderContent(a)}else{if(!o){i._rerenderContent(i.getContent())}}if(!t&&i.getExpandable()&&!i.getExpanded()){i._toggleExpandCollapse(true)}}}}this.oSelectedItem=e;var n=this.oSelectedItem._getNonEmptyKey();this.setProperty("selectedKey",n,true);if(s){i.setProperty("selectedKey",n,true)}if(s){t=t&&!i._bFireSelectEvent}else{t=t&&!this._bFireSelectEvent}if(!t){if(s){i.fireSelect({selectedItem:this.oSelectedItem,selectedKey:n,item:this.oSelectedItem,key:n,previousKey:r})}else{this.fireSelect({selectedItem:this.oSelectedItem,selectedKey:n,item:this.oSelectedItem,key:n,previousKey:r})}}this.oSelectedItem._startBadgeHiding();var l=this.oSelectedItem._getRootTab().getDomRef();if(!l||l.classList.contains("sapMITBFilterHidden")||this.getTabsOverflowMode()===S.End){this._setItemsForStrip()}return this};O.prototype.getVisibleTabFilters=function(){return this.getTabFilters().filter(function(e){return e.getVisible()})};O.prototype._initItemNavigation=function(){var e=[],t=-1,i=this.oSelectedItem&&this.oSelectedItem._getRootTab();if(this.$().hasClass("sapMITHStartOverflowList")){var s=this._getStartOverflow().getFocusDomRef();s.setAttribute("tabindex","-1");e.push(s)}this.getTabFilters().forEach(function(s){var r=this.getFocusDomRef(s);if(!r){return}r.setAttribute("tabindex","-1");e.push(r);if(s===i||s===this.oSelectedItem){t=e.indexOf(r)}}.bind(this));if(this.$().hasClass("sapMITHEndOverflowList")){var r=this._getOverflow().getFocusDomRef();r.setAttribute("tabindex","-1");e.push(r)}if(!this._oItemNavigation){this._oItemNavigation=(new a).setCycling(false).attachEvent(a.Events.FocusLeave,this._onItemNavigationFocusLeave,this).attachEvent(a.Events.BeforeFocus,this._onItemNavigationBeforeFocus,this).setDisabledModifiers({sapnext:["alt","meta"],sapprevious:["alt","meta"]});this.addDelegate(this._oItemNavigation)}this._oItemNavigation.setRootDomRef(this.getDomRef()).setItemDomRefs(e).setPageSize(e.length).setSelectedIndex(t)};O.prototype.onThemeChanged=function(){this._applyTabDensityMode()};O.prototype._applyTabDensityMode=function(){var e=this.getTabDensityMode();this.$().removeClass("sapUiSizeCompact");switch(e){case T.Compact:this.$().addClass("sapUiSizeCompact");break;case T.Inherit:if(this.getDomRef()?.closest(".sapUiSizeCompact")){this.$().addClass("sapUiSizeCompact")}break}};O.prototype._handleThemeApplied=function(){this._bThemeApplied=true;this._setItemsForStrip(this);d.detachApplied(this._handleThemeAppliedBound)};O.prototype.destroyItems=function(){this.oSelectedItem=null;this._aTabKeys=[];this.destroyAggregation("items");return this};O.prototype.addItem=function(e){if(!(e instanceof g)){var t=e.getKey();if(this._aTabKeys.indexOf(t)!==-1){m.info("sap.m.IconTabHeader: duplicate key '"+t+"' inside the IconTabFilter. Please use unique keys.")}this._aTabKeys.push(t)}this.addAggregation("items",e);this._invalidateParentIconTabBar();return this};O.prototype.insertItem=function(e,t){if(!(e instanceof g)){var i=e.getKey();if(this._aTabKeys.indexOf(i)!==-1){m.warning("sap.m.IconTabHeader: duplicate key '"+i+"' inside the IconTabFilter. Please use unique keys.")}this._aTabKeys.push(i)}this.insertAggregation("items",e,t);this._invalidateParentIconTabBar()};O.prototype.removeAllItems=function(){var e=this.removeAllAggregation("items");this._aTabKeys=[];this.oSelectedItem=null;this._invalidateParentIconTabBar();return e};O.prototype.removeItem=function(e){e=this.removeAggregation("items",e);if(e&&!(e instanceof g)){var t=e.getKey();this._aTabKeys.splice(this._aTabKeys.indexOf(t),1)}if(this.oSelectedItem===e){this.oSelectedItem=null}this._invalidateParentIconTabBar();return e};O.prototype.updateAggregation=function(){this.oSelectedItem=null;i.prototype.updateAggregation.apply(this,arguments);this.invalidate()};O.prototype.removeAggregation=function(e,t,s){var r=this.getTabFilters();var o=i.prototype.removeAggregation.apply(this,arguments);if(s){return o}if(!this._getPreserveSelection()&&o&&o==this.oSelectedItem&&e=="items"){var a=r?Array.prototype.indexOf.call(r,o):-1;r=this.getTabFilters();a=Math.max(0,Math.min(a,r.length-1));var n=r[a];if(n){this.setSelectedItem(n,true)}else{var l=this.getParent();if(this._isInsideIconTabBar()&&l.getExpanded()){l.$("content").children().remove()}}}return o};O.prototype.removeAllAggregation=function(e,t){if(e=="items"){var s=this.getParent();if(this._isInsideIconTabBar()&&s.getExpanded()){s.$("content").children().remove()}}return i.prototype.removeAllAggregation.apply(this,arguments)};O.prototype._getPreserveSelection=function(){return this._bPreserveSelection};O.prototype._setPreserveSelection=function(e){this._bPreserveSelection=e};O.prototype._getDisplayText=function(e){var t=e.getText();if(this.isInlineMode()){var i=e.getCount();if(i){if(this._bRtl){t="("+i+") "+t}else{t+=" ("+i+")"}}}return t};O.prototype.isInlineMode=function(){return this.getMode()===b.Inline};O.prototype._checkTextOnly=function(){this._bTextOnly=this.getItems().every(function(e){return e instanceof g||!e.getIcon()});return this._bTextOnly};O.prototype._checkNoText=function(e){if(e.length>0){for(var t=0;t<e.length;t++){if(!(e[t]instanceof g)){if(e[t].getText().length>0){return false}}}}return true};O.prototype._checkInLine=function(e){var t;if(e.length>0){for(var i=0;i<e.length;i++){t=e[i];if(!(t instanceof g)){if(t.getIcon()||t.getCount()){this._bInLine=false;return false}}}}this._bInLine=true;return true};O.prototype._getItemsInStrip=function(){return this.getItems().filter(function(e){var t=e.getDomRef();return t&&!t.classList.contains("sapMITBFilterHidden")})};O.prototype._setItemsForStrip=function(){var e=this.getVisibleTabFilters();if(!this._bThemeApplied||!e.length){return}var t=this.getDomRef("head");if(!t){return}var i=this._getStartOverflow(),s=this._getOverflow(),r=this.getItems().filter(function(e){return e.getDomRef()}).map(function(e){return e.getDomRef()}),o=this.oSelectedItem&&this.oSelectedItem.getVisible()?this.oSelectedItem:e[0],a=(o._getRootTab()||o).getDomRef();if(!r.length||!a){return}i.$().removeClass("sapMITHOverflowVisible");s.$().removeClass("sapMITHOverflowVisible");this.$().removeClass("sapMITHStartOverflowList");this.$().removeClass("sapMITHEndOverflowList");r.forEach(function(e){e.classList.remove("sapMITBFilterHidden")});var n=r.reduce(function(e,t){return e+jQuery(t).outerWidth(true)},0),l=n>t.offsetWidth;if(!l){return}switch(this.getTabsOverflowMode()){case S.StartAndEnd:this._updateStartAndEndOverflow(r,a);break;case S.End:default:this._updateEndOverflow(r,a);break}};O.prototype._updateEndOverflow=function(e,t){var i=this._getOverflow(),s=this.getDomRef("head"),r,o,a,n;i.$().addClass("sapMITHOverflowVisible");this.$().addClass("sapMITHEndOverflowList");r=s.offsetWidth;a=this._getSelectedItemIndexAndSize(e,t);o=this._findLastVisibleItem(e,r,a.width);for(n=o+1;n<e.length;n++){e[n].classList.add("sapMITBFilterHidden")}i._updateExpandButtonBadge()};O.prototype._updateStartAndEndOverflow=function(e,t){var i=this._getStartOverflow(),s=this._getOverflow(),r=this.getDomRef("head"),o=r.offsetWidth,a=this._getSelectedItemIndexAndSize(e,t),n=this._hasStartOverflow(o,e,a),l=this._hasEndOverflow(o,e,a),d,h,f;if(!n){s.$().addClass("sapMITHOverflowVisible");this.$().addClass("sapMITHEndOverflowList");o=r.offsetWidth;h=this._findLastVisibleItem(e,o,a.width);for(f=h+1;f<e.length;f++){e[f].classList.add("sapMITBFilterHidden")}s._updateTabCountText();s._updateExpandButtonBadge();return}if(!l){i.$().addClass("sapMITHOverflowVisible");this.$().addClass("sapMITHStartOverflowList");o=r.offsetWidth;d=this._findFirstVisibleItem(e,o,a.width);for(f=d-1;f>=0;f--){e[f].classList.add("sapMITBFilterHidden")}i._updateTabCountText();i._updateExpandButtonBadge();return}i.$().addClass("sapMITHOverflowVisible");this.$().addClass("sapMITHStartOverflowList");s.$().addClass("sapMITHOverflowVisible");this.$().addClass("sapMITHEndOverflowList");o=r.offsetWidth;d=this._findFirstVisibleItem(e,o,a.width,a.index-1);h=this._findLastVisibleItem(e,o,a.width,d);for(f=d-1;f>=0;f--){e[f].classList.add("sapMITBFilterHidden")}for(f=h+1;f<e.length;f++){e[f].classList.add("sapMITBFilterHidden")}i._updateExpandButtonBadge();i._updateTabCountText();s._updateTabCountText();s._updateExpandButtonBadge()};O.prototype._hasStartOverflow=function(e,t,i){if(i.index===0){return false}var s,r=0;for(s=i.index-1;s>=0;s--){r+=this._getItemSize(t[s])}var o=e<r+i.width;if(!o){this._getOverflow().$().addClass("sapMITHOverflowVisible");this.$().addClass("sapMITHEndOverflowList");e=this.getDomRef("head").offsetWidth;o=e<r+i.width;this._getOverflow().$().removeClass("sapMITHOverflowVisible");this.$().removeClass("sapMITHEndOverflowList")}return o};O.prototype._hasEndOverflow=function(e,t,i){if(i.index>=t.length){return false}var s,r=0;for(s=i.index;s<t.length;s++){r+=this._getItemSize(t[s])}var o=e<r+i.width;if(!o){this._getStartOverflow().$().addClass("sapMITHOverflowVisible");this.$().addClass("sapMITHStartOverflowList");e=this.getDomRef("head").offsetWidth;o=e<r+i.width;this._getStartOverflow().$().removeClass("sapMITHOverflowVisible");this.$().removeClass("sapMITHStartOverflowList")}return o};O.prototype._getSelectedItemIndexAndSize=function(e,t){var i=e.indexOf(t),s=this._getItemSize(t),r;if(e[i-1]&&e[i-1].classList.contains("sapMITBSep")){r=e[i-1];s+=this._getItemSize(r)}e.splice(i,1);if(r){e.splice(i-1,1);i--}return{index:i,width:s}};O.prototype._findFirstVisibleItem=function(e,t,i,s){var r,o,a;if(s===undefined){s=e.length-1}r=s+1;for(o=s;o>=0;o--){a=this._getItemSize(e[o]);if(t<i+a){break}i+=a;r=o}return r};O.prototype._findLastVisibleItem=function(e,t,i,s){var r,o,a;s=s||0;r=s-1;for(o=s;o<e.length;o++){a=this._getItemSize(e[o]);if(t<i+a){break}i+=a;r=o}var n=e[o-1];if(n&&n.classList.contains("sapMITBSep")){r-=1}return r};O.prototype._getItemSize=function(e){var t=window.getComputedStyle(e),i=e.offsetWidth,s=Number.parseInt(t.marginLeft)+Number.parseInt(t.marginRight);return i+s};O.prototype._hasSubItems=function(){var e=this.getTabFilters(),t;for(t=0;t<e.length;t++){if(e[t].getItems().length>0){return true}}return false};O.prototype._handleActivation=function(e){var t=e.target.id,i=e.srcControl,r,o=jQuery(e.target);if(i instanceof f){return}var a=t?jQuery(document.getElementById(t)):jQuery();if(a.parents()&&Array.prototype.indexOf.call(a.parents(),this.$("content")[0])>-1){return}if(t){e.preventDefault();if(o.hasClass("sapMITBFilterIcon")||o.hasClass("sapMITBCount")||o.hasClass("sapMITBText")||o.hasClass("sapMITBTab")||o.hasClass("sapMITBContentArrow")||o.hasClass("sapMITBSep")||o.hasClass("sapMITBSepIcon")){r=e.srcControl.getId().replace(/-icon$/,"");i=s.getElementById(r);if(i.getMetadata().isInstanceOf("sap.m.IconTab")&&!(i instanceof g)){if(!this._isSelectable(i)){if(i.getItems().length||i._isOverflow()){i._expandButtonPress()}return}if(i===this._getOverflow()||i===this._getStartOverflow()){i._expandButtonPress();return}this.setSelectedItem(i)}return}if(i.getMetadata().isInstanceOf("sap.m.IconTab")&&!(i instanceof g)){if(!this._isSelectable(i)){if(i.getItems().length||i._isOverflow()){i._expandButtonPress()}return}if(i===this._getOverflow()||i===this._getStartOverflow()){i._expandButtonPress();return}this.setSelectedItem(i)}return}if(i.getMetadata().isInstanceOf("sap.m.IconTab")&&!(i instanceof g)){if(!this._isSelectable(i)){if(i.getItems().length||i._isOverflow()){i._expandButtonPress()}return}if(i===this._getOverflow()||i===this._getStartOverflow()){i._expandButtonPress();return}this.setSelectedItem(i)}};O.prototype._fnResize=function(){if(this._getOverflow()._oPopover){this._getOverflow()._oPopover.close()}if(this._getStartOverflow()._oPopover){this._getStartOverflow()._oPopover.close()}this._setItemsForStrip();this._initItemNavigation()};O.prototype._isSelectable=function(e){var t=e._getRealTab(),i=t.getInteractionMode();if(!t.getEnabled()){return false}if(!t.getItems().length||t._isOverflow()){return true}if(i===w.Auto){return!this._isInsideIconTabBar()||t._getNestedLevel()!==1||this.getParent().getContent().length||t.getContent().length}return i===w.Select};O.prototype._isInsideIconTabBar=function(){var e=this.getParent();return e instanceof i&&e.isA("sap.m.IconTabBar")};O.prototype._isInsideToolHeader=function(){var e=this.getParent();return e instanceof i&&e.isA("sap.tnt.ToolHeader")};O.prototype._invalidateParentIconTabBar=function(){if(this._isInsideIconTabBar()){this.getParent().invalidate()}};O.prototype.getFocusDomRef=function(e){var t=e||this.oSelectedItem;if(!t){return null}return t.getDomRef()};O.prototype.applyFocusInfo=function(e){if(e.focusDomRef){jQuery(e.focusDomRef).trigger("focus")}};O.prototype._updateSelection=function(){var e=this.getItems(),t=this.getSelectedKey(),i=0,s=this._isInsideIconTabBar(),r=this._isInsideToolHeader();if(!e.length){return}if(!this.oSelectedItem||t&&t!==this.oSelectedItem._getNonEmptyKey()){if(t){this.oSelectedItem=this._findItemByKey(t)}if(!this.oSelectedItem&&(s||!t)){for(i=0;i<e.length;i++){if(!(e[i]instanceof g)&&e[i].getVisible()){this.oSelectedItem=e[i];break}}}}if(!r&&this.oSelectedItem&&!this.oSelectedItem.getVisible()){for(i=0;i<e.length;i++){if(!(e[i]instanceof g)&&e[i].getVisible()){this.oSelectedItem=e[i];break}}}if(!this.oSelectedItem){return}if(!this._isSelectable(this.oSelectedItem)){this.setSelectedItem(this.oSelectedItem._getFirstAvailableSubFilter(),true);return}this.setProperty("selectedKey",this.oSelectedItem._getNonEmptyKey(),true)};O.prototype._findItemByKey=function(e){var t=this.getTabFilters(),i;for(var s=0;s<t.length;s++){if(t[s]._getNonEmptyKey()===e){return t[s]}i=t[s]._getAllSubFilters();for(var r=0;r<i.length;r++){if(i[r]._getNonEmptyKey()===e){return i[r]}}}};O.prototype._applySelectionToFilters=function(){if(this._isInsideIconTabBar()&&!this.getParent().getExpanded()){return}this.oSelectedItem.$().addClass("sapMITBSelected").attr({"aria-selected":true});if(this.oSelectedItem._getNestedLevel()!==1){var e=this.oSelectedItem._getRootTab();e.$().addClass("sapMITBSelected").attr({"aria-selected":true})}};O.prototype._removeSelectionFromFilters=function(){this.oSelectedItem.$().removeClass("sapMITBSelected").attr({"aria-selected":false});if(this.oSelectedItem._getNestedLevel()!==1){var e=this.oSelectedItem._getRootTab();e.$().removeClass("sapMITBSelected").attr({"aria-selected":false})}};O.prototype._getItemsForOverflow=function(e,t){var i=this._getItemsInStrip(),s=this.getTabsOverflowMode()===S.StartAndEnd,r,o=this.getItems(),a=[];if(s){r=o.indexOf(i[0]);o=e?o.slice(0,r):o.slice(r,o.length)}o.forEach(function(e){if(!h.system.phone&&i.indexOf(e)>-1){return}a.push(e);if(e.isA("sap.m.IconTabFilter")&&!t){e._getAllSubItems().forEach(function(e){a.push(e)})}});return a};O.prototype.ontouchstart=function(e){var t=e.targetTouches[0];if(e.which===3){return}else{this._iActiveTouch=t.identifier}};O.prototype.ontouchend=function(e){if(this._iActiveTouch===undefined){return}var t=0;var i=1;var s;if(e.which===s||e.which===t||e.which===i){this._handleActivation(e)}this._iActiveTouch=undefined};O.prototype.ontouchcancel=O.prototype.ontouchend;O.prototype.onkeydown=function(e){switch(e.which){case I.ENTER:this._handleActivation(e);e.preventDefault();break;case I.SPACE:e.preventDefault();break}};O.prototype.onkeyup=function(e){if(e.which===I.SPACE){this._handleActivation(e)}};O.prototype._handleDragAndDrop=function(e){var t=e.getParameter("dropPosition"),i=e.getParameter("draggedControl"),s=e.getParameter("droppedControl"),r=this,o=this.getMaxNestingLevel();if(t===_.On){r=s._getRealTab()}c.handleDrop(r,t,i._getRealTab(),s,false,o);if(i._getNestedLevel()>1){i._getRootTab()._closePopover()}this._setItemsForStrip();this._initItemNavigation();this._getOverflow()._setSelectListItems();this._getStartOverflow()._setSelectListItems();this._getSelectList()._initItemNavigation();i._getRealTab().$().trigger("focus");if(t===_.On){s._getRealTab().$().trigger("focus")}};O.prototype._moveTab=function(e,t,i){c.moveItem.call(this,e,t,i);this._setItemsForStrip();this._initItemNavigation()};O.prototype.ondragrearranging=function(e){if(!this.getEnableTabReordering()){return}var t=e.srcControl,i=this.indexOfItem(this._getItemsInStrip().pop());e.preventDefault();this._moveTab(t,e.keyCode,i);t.$().trigger("focus")};O.prototype.onsaphomemodifiers=O.prototype.ondragrearranging;O.prototype.onsapendmodifiers=O.prototype.ondragrearranging;O.prototype.onsapincreasemodifiers=O.prototype.ondragrearranging;O.prototype.onsapdecreasemodifiers=O.prototype.ondragrearranging;return O});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/IconTabHeaderRenderer", ["./library","sap/ui/core/InvisibleText","sap/ui/core/Lib"],function(e,t,i){"use strict";var s={apiVersion:2};var a=e.TabsOverflowMode;s.getInvisibleSplitTabDescriptionText=function(){if(!this.oInvisibleSplitTabDescriptionText){this.oInvisibleSplitTabDescriptionText=new t({text:i.getResourceBundleFor("sap.m").getText("ICONTABHEADER_SPLIT_TAB_DESCRIPTION")}).toStatic()}return this.oInvisibleSplitTabDescriptionText};s.render=function(e,t){if(!t.getVisible()){return}var i=t.getId(),n=t.getItems(),r=t.getVisibleTabFilters().length,l=0,o=t._checkTextOnly(),c=t._checkNoText(n),p=t._checkInLine(n)||t.isInlineMode();var d=t.getParent(),T=d&&d.isA("sap.m.IconTabBar")&&d.getUpperCase(),b=t.getAriaTexts()||{};e.openStart("div",t).class("sapMITH").class("sapContrastPlus").class("sapMITHBackgroundDesign"+t.getBackgroundDesign());if(T){e.class("sapMITBTextUpperCase")}if(o){e.class("sapMITBTextOnly")}if(c){e.class("sapMITBNoText")}if(p){e.class("sapMITBInLine");e.class("sapMITBTextOnly")}e.accessibilityState(t,{role:"navigation"});if(b.headerLabel){e.accessibilityState(t,{label:b.headerLabel})}e.openEnd();if(n.length&&t.getTabsOverflowMode()===a.StartAndEnd){e.openStart("div").class("sapMITHStartOverflow").openEnd();t._getStartOverflow().render(e);e.close("div")}if(b.headerDescription){e.renderControl(t._getInvisibleHeadText())}e.openStart("div",i+"-head").class("sapMITBHead");e.accessibilityState({role:"tablist",orientation:"horizontal"});if(b.headerDescription){e.accessibilityState({describedby:{value:t._getInvisibleHeadText().getId(),append:true}})}if(t._hasSubItems()){e.accessibilityState({describedby:{value:s.getInvisibleSplitTabDescriptionText().getId(),append:true}})}e.openEnd();for(var I=0;I<n.length;I++){var v=n[I];v.render(e,l,r);if(v.isA("sap.m.IconTabFilter")){if(v.getVisible()){l++}}}e.close("div");if(n.length){e.openStart("div").class("sapMITHEndOverflow").openEnd();t._getOverflow().render(e);e.close("div")}e.close("div")};return s},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/IconTabSeparator", ["sap/ui/core/Element","sap/ui/core/Item","sap/m/IconTabFilter","sap/m/ImageHelper","sap/ui/core/Lib"],function(e,t,o,a,r){"use strict";var i=e.extend("sap.m.IconTabSeparator",{metadata:{interfaces:["sap.m.IconTab"],library:"sap.m",designtime:"sap/m/designtime/IconTabSeparator.designtime",properties:{icon:{type:"sap.ui.core.URI",group:"Misc",defaultValue:""},visible:{type:"boolean",group:"Behavior",defaultValue:true},iconDensityAware:{type:"boolean",group:"Appearance",defaultValue:true}}}});i.prototype._getImageControl=function(e,t){var o={src:this.getIcon(),densityAware:this.getIconDensityAware(),useIconTooltip:false};this._oImageControl=a.getImageControl(this.getId()+"-icon",this._oImageControl,t,o,e);return this._oImageControl};i.prototype.exit=function(t){if(this._oImageControl){this._oImageControl.destroy()}e.prototype.exit.call(this,t)};i.prototype._getRealTab=function(){return o.prototype._getRealTab.call(this)};i.prototype._getNestedLevel=function(){return o.prototype._getNestedLevel.call(this)};i.prototype.render=function(e){if(!this.getVisible()){return}var t=this.getIcon(),o=this.getParent(),a=r.getResourceBundleFor("sap.m"),i={};if(t){i.role="img";i.label=a.getText("ICONTABBAR_NEXTSTEP")}else{i.role="separator"}e.openStart("div",this).accessibilityState(i).class("sapMITBItem").class("sapMITBSep");if(!t){e.class("sapMITBSepLine")}e.openEnd();if(t){e.renderControl(this._getImageControl(["sapMITBSepIcon"],o))}e.close("div")};i.prototype.renderInSelectList=function(e,t,o,a,i){if(!this.getVisible()){return}var s=this.getIcon(),n=t._oIconTabHeader,l=r.getResourceBundleFor("sap.m"),p={};if(s){p.role="img";p.label=l.getText("ICONTABBAR_NEXTSTEP")}else{p.role="separator"}e.openStart("li",this).class("sapMITBSelectItem").class("sapMITBSep").accessibilityState(p);if(i&&!s){e.style("padding-left",i+"rem")}if(!s){e.class("sapMITBSepLine")}e.openEnd();if(s){e.renderControl(this._getImageControl(["sapMITBSepIcon"],n))}e.close("li")};return i});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/InputListItem", ["sap/ui/core/library","./library","./ListItemBase","./InputListItemRenderer"],function(e,t,n,i){"use strict";var r=e.TextDirection;var a=t.InputListItemContentSize;var u=n.extend("sap.m.InputListItem",{metadata:{library:"sap.m",properties:{label:{type:"string",group:"Misc",defaultValue:null},labelTextDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:r.Inherit},contentSize:{type:"sap.m.InputListItemContentSize",group:"Appearance",defaultValue:a.L}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content",bindable:"bindable"}},designtime:"sap/m/designtime/InputListItem.designtime"},renderer:i});u.prototype.getContentAnnouncement=function(){var e=this.getLabel()+" . ";this.getContent().forEach(function(t){e+=n.getAccessibilityText(t)+" "});return e.trim()};return u});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/InputListItemRenderer", ["sap/ui/core/library","sap/ui/core/Renderer","./ListItemBaseRenderer"],function(e,t,n){"use strict";var r=e.TextDirection;var a=t.extend(n);a.apiVersion=2;a.renderLIAttributes=function(e,t){e.class("sapMILI")};a.renderLIContent=function(e,t){e.openStart("div",t.getId()+"-contentWrapper").class("sapMILIContentWrapper");e.class("sapMILIContentWrapper"+t.getContentSize());e.openEnd();this.renderLabel(e,t);this.renderInput(e,t);e.close("div")};a.renderLabel=function(e,t){var n=t.getLabel();if(n){e.openStart("span",t.getId()+"-label");e.class("sapMILILabel");var a=t.getLabelTextDirection();if(a!==r.Inherit){e.attr("dir",a.toLowerCase())}e.openEnd();e.text(n);e.close("span")}};a.renderInput=function(e,t){e.openStart("div").class("sapMILIDiv").class("sapMILI-CTX").openEnd();t.getContent().forEach(function(n){if(n.addAriaLabelledBy){const e=t.getId()+"-label";if(n.getAriaLabelledBy().indexOf(e)===-1){n.addAriaLabelledBy(e)}}e.renderControl(n)});e.close("div")};return a},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/MessageBox", ["./Button","./Dialog","./Text","./FormattedText","./Link","./MessageStrip","./VBox","sap/ui/core/IconPool","sap/ui/core/ElementMetadata","sap/ui/core/Lib","sap/ui/core/library","sap/ui/core/message/MessageType","sap/ui/core/Control","sap/m/library","sap/ui/thirdparty/jquery"],function(e,t,i,n,s,o,a,l,r,c,u,d,f,g,jQuery){"use strict";var O=g.DialogType;var p=g.DialogRoleType;var I=g.ButtonType;var T=g.TitleAlignment;var R=g.FlexRendertype;var S=g.FlexAlignItems;var E=g.LinkAccessibleRole;var y=u.TextDirection;var x={};x.Action={OK:"OK",CANCEL:"CANCEL",YES:"YES",NO:"NO",ABORT:"ABORT",RETRY:"RETRY",IGNORE:"IGNORE",CLOSE:"CLOSE",DELETE:"DELETE"};x.Icon={NONE:"NONE",INFORMATION:"INFORMATION",WARNING:"WARNING",ERROR:"ERROR",SUCCESS:"SUCCESS",QUESTION:"QUESTION"};var A=x.Action,N=x.Icon;function C(){if(x._rb!==c.getResourceBundleFor("sap.m")){x._rb=c.getResourceBundleFor("sap.m")}}function M(e){if(typeof e==="object"){return"<pre>"+JSON.stringify(e,null,"\t").replace(/{/gi,"&#x007B;")+"</pre>"}return e}function h(e,t,i,l){var r,c,u,f,g=false,O=new a({renderType:R.Bare,alignItems:S.Start,items:[t]});if(!e.details){return O}function p(e){r.setHtmlText(M(e));var t=i.getInitialFocus();i.addAriaLabelledBy(r);r.setVisible(true);c.setVisible(false);i._setInitialFocus();if(!t||t===c.getId()){l.focus()}}function I(){c.setBusyIndicatorDelay(0).setBusy(true);c.getDomRef("busyIndicator").focus();e.details().then(function(e){if(i.isDestroyed()){return}p(e)}).catch(function(){if(i.isDestroyed()){return}if(document.activeElement===c.getDomRef("busyIndicator")){g=true}c.setVisible(false);u.setVisible(true)})}r=new n({visible:false});c=new s({accessibleRole:E.Button,text:x._rb.getText("MSGBOX_LINK_TITLE"),press:function(){if(typeof e.details==="function"){I()}else{p(e.details)}}});f=new s({text:x._rb.getText("MSGBOX_DETAILS_RETRY_LOADING"),accessibleRole:E.Button,press:function(){c.setVisible(true);u.setVisible(false);var e={onAfterRendering:function(){c.removeEventDelegate(e);I()}};c.addEventDelegate(e)}});f.addEventDelegate({onAfterRendering:function(){if(g){f.focus()}g=false}});u=new o({text:x._rb.getText("MSGBOX_DETAILS_LOAD_ERROR"),type:d.Error,visible:false,link:f});c.addStyleClass("sapMMessageBoxLinkText");u.addStyleClass("sapMMessageBoxErrorText");r.addStyleClass("sapMMessageBoxDetails");O.addItem(c);O.addItem(u);O.addItem(r);return O}x.show=function(n,s){var o,a,c,u=null,d=[],g,R,S,E,M,b,m,B={id:r.uid("mbox"),initialFocus:null,textDirection:y.Inherit,verticalScrolling:true,horizontalScrolling:true,details:"",contentWidth:null},v={INFORMATION:"sapMMessageBoxInfo",WARNING:"sapMMessageBoxWarning",ERROR:"sapMMessageBoxError",SUCCESS:"sapMMessageBoxSuccess",QUESTION:"sapMMessageBoxQuestion",STANDARD:"sapMMessageBoxStandard"},_={INFORMATION:l.getIconURI("information"),WARNING:l.getIconURI("alert"),ERROR:l.getIconURI("error"),SUCCESS:l.getIconURI("sys-enter-2"),QUESTION:l.getIconURI("sys-help-2")};C();if(typeof s==="string"||arguments.length>2){R=arguments[1];S=arguments[2];E=arguments[3];M=arguments[4];b=arguments[5];m=arguments[6];s={icon:R,title:S,actions:E,onClose:M,id:b,styleClass:m}}if(s&&s.hasOwnProperty("details")){B.icon=N.INFORMATION;B.emphasizedAction=A.OK;B.actions=[A.OK,A.CANCEL];s=jQuery.extend({},B,s)}s=jQuery.extend({},B,s);if(typeof s.actions!=="undefined"&&!Array.isArray(s.actions)){if(s.emphasizedAction!==null){s.emphasizedAction=s.actions}s.actions=[s.actions]}if(!s.actions||s.actions.length===0){s.emphasizedAction=A.OK;s.actions=[A.OK]}function L(t,i){var n;if(x.Action.hasOwnProperty(t)){n=x._rb.getText("MSGBOX_"+t)}var s=new e({id:r.uid("mbox-btn-"),text:n||t,type:i,press:function(){u=t;o.close()}});return s}var F;for(g=0;g<s.actions.length;g++){F=s.emphasizedAction===s.actions[g]?I.Emphasized:I.Default;d.push(L(s.actions[g],F))}function D(){if(typeof s.onClose==="function"){s.onClose(u)}o.detachAfterClose(D);o.destroy()}function w(){var e=0;var t=null;if(s.initialFocus){if(s.initialFocus instanceof f){t=s.initialFocus}if(typeof s.initialFocus==="string"){for(e=0;e<d.length;e++){if(x.Action.hasOwnProperty(s.initialFocus)){if(x._rb.getText("MSGBOX_"+s.initialFocus).toLowerCase()===d[e].getText().toLowerCase()){t=d[e];break}}else{if(s.initialFocus.toLowerCase()===d[e].getText().toLowerCase()){t=d[e];break}}}}}return t}if(typeof n==="string"){c=new i({textDirection:s.textDirection}).setText(n).addStyleClass("sapMMsgBoxText");a=c}else if(n instanceof f){c=n.addStyleClass("sapMMsgBoxText")}o=new t({id:s.id,type:O.Message,title:s.title,titleAlignment:T.Auto,icon:_[s.icon],initialFocus:w(),verticalScrolling:s.verticalScrolling,horizontalScrolling:s.horizontalScrolling,afterClose:D,buttons:d,ariaLabelledBy:a?a.getId():undefined,contentWidth:s.contentWidth,closeOnNavigation:s.closeOnNavigation}).addStyleClass("sapMMessageBox");if(s.hasOwnProperty("details")&&s.details!==""){c=h(s,c,o,d[0])}o.addContent(c);o.setProperty("role",p.AlertDialog);if(v[s.icon]){o.addStyleClass(v[s.icon])}else{o.addStyleClass(v.STANDARD)}if(s.styleClass){o.addStyleClass(s.styleClass)}if(s.dependentOn){s.dependentOn.addDependent(o)}o.open()};x.alert=function(e,t){C();var i={icon:N.NONE,title:x._rb.getText("MSGBOX_TITLE_ALERT"),emphasizedAction:t&&t.actions?null:A.OK,actions:A.OK,id:r.uid("alert"),initialFocus:null},n,s,o,a;if(typeof t==="function"||arguments.length>2){n=arguments[1];s=arguments[2];o=arguments[3];a=arguments[4];t={onClose:n,title:s,id:o,styleClass:a}}t=jQuery.extend({},i,t);x.show(e,t)};x.confirm=function(e,t){C();var i={icon:N.QUESTION,title:x._rb.getText("MSGBOX_TITLE_CONFIRM"),emphasizedAction:t&&t.actions?null:A.OK,actions:[A.OK,A.CANCEL],id:r.uid("confirm"),initialFocus:null},n,s,o,a;if(typeof t==="function"||arguments.length>2){n=arguments[1];s=arguments[2];o=arguments[3];a=arguments[4];t={onClose:n,title:s,id:o,styleClass:a}}t=jQuery.extend({},i,t);x.show(e,t)};x.error=function(e,t){C();var i={icon:N.ERROR,title:x._rb.getText("MSGBOX_TITLE_ERROR"),emphasizedAction:null,actions:A.CLOSE,id:r.uid("error"),initialFocus:null};t=jQuery.extend({},i,t);x.show(e,t)};x.information=function(e,t){C();var i={icon:N.INFORMATION,title:x._rb.getText("MSGBOX_TITLE_INFO"),emphasizedAction:t&&t.actions?null:A.OK,actions:A.OK,id:r.uid("info"),initialFocus:null};t=jQuery.extend({},i,t);x.show(e,t)};x.warning=function(e,t){C();var i={icon:N.WARNING,title:x._rb.getText("MSGBOX_TITLE_WARNING"),emphasizedAction:t&&t.actions?null:A.OK,actions:A.OK,id:r.uid("warning"),initialFocus:null};t=jQuery.extend({},i,t);x.show(e,t)};x.success=function(e,t){C();var i={icon:N.SUCCESS,title:x._rb.getText("MSGBOX_TITLE_SUCCESS"),emphasizedAction:t&&t.actions?null:A.OK,actions:A.OK,id:r.uid("success"),initialFocus:null};t=jQuery.extend({},i,t);x.show(e,t)};return x},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/MessageToast", ["./InstanceManager","sap/ui/base/DataType","sap/ui/core/AnimationMode","sap/ui/core/ControlBehavior","sap/ui/core/Popup","sap/ui/core/library","sap/ui/core/Control","sap/ui/core/Element","sap/ui/core/UIArea","sap/ui/Device","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,o,i,n,s,a,r,u,l,f,jQuery){"use strict";var d=t.getType("sap.ui.core.Popup.Dock");var c=s.CSSSize;var p={};var m="0 -64",v="sapMMessageToast",_="sapUiSelectable",y="sapContrast",g="sapContrastPlus";p._mSettings={duration:3e3,width:"15em",my:"CenterBottom",at:"CenterBottom",of:document.defaultView,offset:"0 0",collision:"fit fit",onClose:null,animationTimingFunction:"ease",animationDuration:1e3,autoClose:true,closeOnBrowserNavigation:true};p._aPopups=[];p._iOpenedPopups=0;p._bBoundedEvents=false;p._mOptions={};p._sMessage="";p._validateSettings=function(e){p._isFiniteInteger(e.duration);p._validateWidth(e.width);p._validateDockPosition(e.my);p._validateDockPosition(e.at);p._validateOf(e.of);p._validateOffset(e.offset);p._validateCollision(e.collision);p._validateOnClose(e.onClose);p._validateAutoClose(e.autoClose);p._validateAnimationTimingFunction(e.animationTimingFunction);p._isFiniteInteger(e.animationDuration)};p._isFiniteInteger=function(e){if(typeof e!=="number"||!isFinite(e)||!(Math.floor(e)===e)||e<=0){f.error('"iNumber" needs to be a finite positive nonzero integer on '+p+"._isFiniteInteger")}};p._validateWidth=function(e){if(!c.isValid(e)){f.error(e+" is not of type "+'"sap.ui.core.CSSSize" for property "width" on '+p+"._validateWidth")}};p._validateDockPosition=function(e){if(!d.isValid(e)){f.error('"'+e+'"'+" is not of type "+'"sap.ui.core.Popup.Dock" on '+p+"._validateDockPosition")}};p._validateOf=function(e){if(!(e instanceof jQuery)&&!(e&&e.nodeType===1)&&!(e instanceof a)&&e!==window){f.error('"of" needs to be an instance of sap.ui.core.Control or an Element or a jQuery object or the window on '+p+"._validateOf")}};p._validateOffset=function(e){if(typeof e!=="string"){f.error(e+" is of type "+typeof e+', expected "string" for property "offset" on '+p+"._validateOffset")}};p._validateCollision=function(e){var t=/^(fit|flip|none|flipfit|flipflip|flip flip|flip fit|fitflip|fitfit|fit fit|fit flip)$/i;if(!t.test(e)){f.error('"collision" needs to be a single value “fit”, “flip”, or “none”, or a pair for horizontal and vertical e.g. "fit flip”, "fit none", "flipfit" on '+p+"._validateOffset")}};p._validateOnClose=function(e){if(typeof e!=="function"&&e!==null){f.error('"onClose" should be a function or null on '+p+"._validateOnClose")}};p._validateAutoClose=function(e){if(typeof e!=="boolean"){f.error('"autoClose" should be a boolean on '+p+"._validateAutoClose")}};p._validateAnimationTimingFunction=function(e){var t=/^(ease|linear|ease-in|ease-out|ease-in-out)$/i;if(!t.test(e)){f.error('"animationTimingFunction" should be a string, expected values: '+"ease, linear, ease-in, ease-out, ease-in-out on "+p+"._validateAnimationTimingFunction")}};function h(e){for(var t=["my","at","of","offset"],o=0;o<t.length;o++){if(e[t[o]]!==undefined){return false}}return true}function C(e){var t=document.createElement("div");t.className=v+" "+_+" "+y+" "+g;if(i.isAccessibilityEnabled()){t.setAttribute("role","alert")}t.style.width=e.width;t.appendChild(document.createTextNode(e.message));return t}function b(e){if(e){if(h(e)){e.offset=m}if(e.of&&e.of.nodeType===9){e.of=document.defaultView}}else{e={offset:m}}return e}p._handleResizeEvent=function(){if(l.system.phone||l.system.tablet){p._resetPosition(p._aPopups)}setTimeout(p["_applyPositions"].bind(p,p._aPopups),0)};p._handleMouseDownEvent=function(e){var t=e.target.hasAttribute("class")&&e.target.getAttribute("class").indexOf(v)!==-1;if(t||e.isMarked("delayedMouseEvent")){return}p._aPopups.forEach(function(e){e&&e.__bAutoClose&&e.close()})};p._resetPosition=function(e){for(var t=0,o;t<e.length;t++){o=e[t]&&e[t].getContent();if(o){o.style.visibility="hidden";o.style.left=0}}};p._applyPositions=function(e){for(var t=0,o,i;t<e.length;t++){o=e[t];if(o){i=o._oPosition;if(l.system.phone||l.system.tablet){setTimeout(p["_applyPosition"].bind(p,o,i),0)}else{o.setPosition(i.my,i.at,i.of,i.offset)}}}};p._applyPosition=function(e,t){t=t||e._oPosition;var o=e.getContent();e.setPosition(t.my,t.at,t.of,t.offset);o.style.visibility="visible"};p._setCloseAnimation=function(e,t,n,s){var a="opacity "+s.animationTimingFunction+" "+s.animationDuration+"ms",r="webkitTransitionEnd."+v+" transitionend."+v,u=i.getAnimationMode(),l=u!==o.none&&u!==o.minimal;if(l&&s.animationDuration>0){e[0].style.webkitTransition=a;e[0].style.transition=a;e[0].style.opacity=0;e.on(r,function t(){e.off(r);n()})}else{n()}};p._fnKeyDown=function(e){var t;var o=this._aPopups[0];var i=e.shiftKey;var n=l.os.macintosh?e.metaKey:e.ctrlKey;if(o&&o.isOpen()&&i&&n&&e.code==="KeyM"){e.preventDefault();t=document.querySelector(".sapMMessageToastHiddenFocusable");o.getContent().classList.add("sapMFocus");t.focus();clearTimeout(this._iCloseTimeoutId)}};function P(e){var t=e.shiftKey;var o=l.os.macintosh?e.metaKey:e.ctrlKey;var i=this._aPopups[0];if(e.code==="Escape"||t&&o&&e.code==="KeyM"){e.preventDefault();setTimeout(function(){this._mSettings.opener&&this._mSettings.opener.focus()}.bind(this),0);i.close()}}p.show=function(t,o){if(/sap-ui-xx-no-toasts=true/.test(document.location.search)){return}var i=r.closestTo(document.activeElement);var s=i&&i.getUIArea&&i.getUIArea();var a;var u=p,f=jQuery.extend({},p._mSettings,{message:t}),d=new n,c,m,_="mousedown."+v+" touchstart."+v,y;p._mSettings.opener=i;if(!this._oRootNode||this._oRootNode&&s&&s.getRootNode()!==this._oRootNode){this._oRootNode=s?s.getRootNode():document.documentElement}o=b(o);jQuery.extend(f,o);p._validateSettings(f);m=C(f);c=p._aPopups.push(d)-1;d.setContent(m);d.setPosition(f.my,f.at,f.of,f.offset,f.collision);d.setAnimations(function e(t,o,i){i()},function e(t,o,i){u._setCloseAnimation(t,o,i,f)});d.setShadow(false);d.__bAutoClose=f.autoClose;if(f.closeOnBrowserNavigation){e.addPopoverInstance(d)}if(!p._bBoundedEvents){jQuery(window).on("resize."+v,p._handleResizeEvent.bind(p));jQuery(document).on(_,p._handleMouseDownEvent.bind(p));p._bBoundedEvents=true}a=document.createElement("span");a.setAttribute("tabIndex",0);a.setAttribute("class","sapMMessageToastHiddenFocusable");d.getContent().prepend(a);if(this._oRootNode){this._oRootNode.removeEventListener("keydown",u._fnKeyDown.bind(u));this._oRootNode.addEventListener("keydown",u._fnKeyDown.bind(u));a.addEventListener("keydown",P.bind(this))}d.open();p._iOpenedPopups++;function g(){e.removePopoverInstance(u._aPopups[c]);jQuery(u._aPopups[c].getContent()).remove();u._aPopups[c].detachClosed(g);u._aPopups[c].destroy();u._aPopups[c]=null;u._iOpenedPopups--;if(u._iOpenedPopups===0){u._aPopups=[];jQuery(window).off("resize."+v);jQuery(document).off(_);u._bBoundedEvents=false}if(typeof f.onClose==="function"){f.onClose.call(u)}}d.attachClosed(g);this._iCloseTimeoutId=setTimeout(d["close"].bind(d),f.duration);function h(){clearTimeout(u._iCloseTimeoutId);u._iCloseTimeoutId=null;function e(){y=setTimeout(d["close"].bind(d),f.duration);d.getContent().removeEventListener("mouseleave",e)}d.getContent().addEventListener("mouseleave",e);clearTimeout(y);y=null}d.getContent().addEventListener("touchstart",h);d.getContent().addEventListener("mouseover",h);if(l.system.desktop){d.getContent().addEventListener("mouseleave",function(){if(document.activeElement!==d.getContent()){this._iCloseTimeoutId=setTimeout(d["close"].bind(d),f.duration)}})}};p.toString=function(){return"sap.m.MessageToast"};return p},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/MultiComboBox", ["./InputBase","./ComboBoxBase","./Tokenizer","./Token","./Popover","./CheckBox","./Toolbar","./library","sap/ui/core/Element","sap/ui/core/EnabledPropagator","sap/ui/core/IconPool","sap/ui/core/Lib","sap/ui/core/library","sap/ui/Device","sap/ui/core/Item","sap/ui/core/ResizeHandler","./MultiComboBoxRenderer","sap/ui/dom/containsOrEquals","sap/m/inputUtils/completeTextSelected","sap/m/inputUtils/inputsDefaultFilter","sap/m/inputUtils/typeAhead","sap/m/inputUtils/ListHelpers","sap/m/inputUtils/filterItems","sap/m/inputUtils/itemsVisibilityHandler","sap/m/inputUtils/forwardItemPropertiesToToken","sap/m/inputUtils/getTokenByItem","sap/ui/events/KeyCodes","sap/base/util/deepEqual","sap/base/assert","sap/base/Log","sap/ui/core/InvisibleText","sap/ui/thirdparty/jquery","sap/ui/dom/jquery/cursorPos"],function(e,t,i,s,n,o,r,a,l,h,u,c,g,p,d,f,m,I,y,v,S,_,k,T,b,C,E,P,A,V,O,jQuery){"use strict";var D=a.ListMode;var x=g.ValueState;var F=g.OpenState;var L=a.TokenizerRenderMode;var R=t.extend("sap.m.MultiComboBox",{metadata:{library:"sap.m",designtime:"sap/m/designtime/MultiComboBox.designtime",properties:{selectedKeys:{type:"string[]",group:"Data",defaultValue:[]},hasSelection:{type:"boolean",visibility:"hidden",defaultValue:false},showSelectAll:{type:"boolean",defaultValue:false}},associations:{selectedItems:{type:"sap.ui.core.Item",multiple:true,singularName:"selectedItem"}},aggregations:{tokenizer:{type:"sap.m.Tokenizer",multiple:false,visibility:"hidden"}},events:{selectionChange:{parameters:{changedItem:{type:"sap.ui.core.Item"},changedItems:{type:"sap.ui.core.Item[]"},selected:{type:"boolean"},selectAll:{type:"boolean"}}},selectionFinish:{parameters:{selectedItems:{type:"sap.ui.core.Item[]"}}}},dnd:{draggable:false,droppable:true}},renderer:m});u.insertFontFaceStyle();h.apply(R.prototype,[true]);R.prototype.clone=function(e){var i=t.prototype.clone.apply(this,arguments),s=this._getList();if(s){i.syncPickerContent()}return i};R.prototype.open=function(){if(!this.isOpen()){this._bPickerIsOpening=true}this.syncPickerContent();return t.prototype.open.apply(this,arguments)};R.prototype.onsapend=function(e){if(e.isMarked("forwardFocusToParent")){this.focus()}};R.prototype.onsaphome=function(e){if(!this.getFocusDomRef().selectionStart&&this._hasTokens()){i.prototype.onsaphome.apply(this.getAggregation("tokenizer"),arguments)}e.setMarked()};R.prototype.onsapdown=function(e){if(!this.getEnabled()||!this.getEditable()){return}e.setMarked();e.preventDefault();this.syncPickerContent();if(!this.isOpen()){this._oTraversalItem=this._getNextTraversalItem();if(this._oTraversalItem&&!this.isFocusInTokenizer()&&!this.isComposingCharacter()){this.updateDomValue(this._oTraversalItem.getText());this.selectText(0,this.getValue().length)}return}setTimeout(this.handleDownEvent.bind(this,e),0)};R.prototype.onsapup=function(e){if(!this.getEnabled()||!this.getEditable()){return}e.setMarked();e.preventDefault();this.syncPickerContent();if(this.isFocusInTokenizer()||this.isOpen()){return}this._oTraversalItem=this._getPreviousTraversalItem();if(this._oTraversalItem){this.updateDomValue(this._oTraversalItem.getText());this.selectText(0,this.getValue().length)}};R.prototype.handleDownEvent=function(e){if(!this.isOpen()){return}var t=e.srcControl,i=t&&t.getDomRef(),s=I(this.getDomRef(),i);e.setMarked();e.preventDefault();if(s&&this.getShowSelectAll()){this.focusSelectAll();return}this.focusFirstItemInList()};R.prototype.handleEndEvent=function(e){e.setMarked();e.preventDefault();var t=_.getVisibleItems(this.getItems()),i=t.length&&_.getListItem(t[t.length-1]);i&&i.focus()};R.prototype.handleHomeEvent=function(e){e.setMarked();e.preventDefault();if(this.getShowSelectAll()){this.focusSelectAll();e.stopPropagation(true);return}this.focusFirstItemInList()};R.prototype.focusFirstItemInList=function(){var e=_.getVisibleItems(this.getItems()),t=e.length&&_.getListItem(e[0]);t&&t.focus()};R.prototype.isFocusInTokenizer=function(){return jQuery.contains(this.getAggregation("tokenizer").getFocusDomRef(),document.activeElement)};R.prototype.onsapshow=function(e){e.preventDefault();this._handleItemToFocus();t.prototype.onsapshow.apply(this,arguments)};R.prototype._handlePopupOpenAndItemsLoad=function(){this._handleItemToFocus();t.prototype._handlePopupOpenAndItemsLoad.apply(this,arguments)};R.prototype._closePickerDelegate={onsaptabnext:function(){this.close();setTimeout(function(){this.closeValueStateMessage()}.bind(this),0)}};R.prototype._formattedTextLinksNav=function(){return{onsapup:this.focus,onsapdown:this.handleDownEvent}};R.prototype._handleFormattedTextNav=function(){var e=this.getPicker().getCustomHeader();var t=this.getValueStateLinks();if(!e.getDomRef()||t.length===0){return}const i=t[t.length-1];const s=t[0];s.focus();if(!this.bSetLinksDelegates){this.bSetLinksDelegates=true;t.forEach(function(e){e.addEventDelegate(this._formattedTextLinksNav(),this)},this);const e={onsaptabprevious:function(e){e.preventDefault();this.getFocusDomRef().focus()}};i.addEventDelegate(this._closePickerDelegate,this);s.addEventDelegate(e,this)}};R.prototype.onsaphide=function(e){this.onsapshow(e)};R.prototype._selectItemByKey=function(e){var t,i,s,n,o,r;if(!this.getEnabled()||!this.getEditable()){return}if(e){e.setMarked()}t=this._getUnselectedItems();for(n=0;n<t.length;n++){r=!(t[n].getKey()===undefined||t[n].getKey()===null)&&!t[n].isA("sap.ui.core.SeparatorItem");if(t[n].getText().toUpperCase()===this.getValue().toUpperCase()&&r){s=t[n];o=true;break}}if(o){i={item:s,id:s.getId(),key:s.getKey(),fireChangeEvent:true,fireFinishEvent:true,suppressInvalidate:true,listItemUpdated:false};this._bPreventValueRemove=false;if(this.getValue()===""||typeof this.getValue()==="string"&&s.getText().toLowerCase().startsWith(this.getValue().toLowerCase())){if(_.getListItem(s).getSelected()){this.setValue("")}else{this.setSelection(i)}}}else{this._bPreventValueRemove=true}if(e){this.close()}};R.prototype.onsapenter=function(t){var i=this.getAggregation("tokenizer");e.prototype.onsapenter.apply(this,arguments);this._showAlreadySelectedVisualEffect();if(this.getValue()&&!this.isComposingCharacter()){this._selectItemByKey(t)}if(!this.getEditable()&&i.getHiddenTokensCount()&&t.target===this.getFocusDomRef()){i._togglePopup()}};R.prototype.onsaptabnext=function(e){var t=this.getValue();if(t){var i=this._getUnselectedItemsStartingText(t);if(i.length){this._selectItemByKey(e)}else{this._showWrongValueVisualEffect()}}};R.prototype.onsaptabprevious=R.prototype.onsaptabnext;R.prototype.onsapfocusleave=function(e){var t=this.isPlatformTablet(),i=l.getElementById(e.relatedControlId),s=i&&i.getFocusDomRef(),n=this.getPicker(),o=this.getAggregation("tokenizer");if(!this._bPickerIsOpening&&(!n||!n.getFocusDomRef()||!s||!jQuery.contains(n.getFocusDomRef(),s))){if(!jQuery.contains(this.getDomRef(),document.activeElement)){o.setRenderMode(L.Narrow)}}if(n&&s){if(P(n.getFocusDomRef(),s)&&!t&&!this.isPickerDialog()){this.focus()}}};R.prototype.onfocusin=function(e){var t=this.getPicker();var i=false;var s=t&&t.getFocusDomRef();var n=t&&t.oPopup.getOpenState()||F.CLOSED;var o=n===F.CLOSING||n===F.CLOSED;var r=this.getPickerType()==="Dropdown";var a=this.getAggregation("tokenizer");if(r){i=s&&jQuery.contains(s,e.relatedTarget)}if(this.getEditable()&&e.target===this.getDomRef("inner")){a.setRenderMode(L.Loose);setTimeout(a["scrollToEnd"].bind(a),0)}if(e.target===this.getFocusDomRef()){a.hasOneTruncatedToken()&&a.setFirstTokenTruncated(false);this.getEnabled()&&this.addStyleClass("sapMFocus");!o&&i&&this.handleInputValidation(e,false)}if(e.target===this.getOpenArea()&&r&&!this.isPlatformTablet()){this.focus()}if(!this.isOpen()&&this.shouldValueStateMessageBeOpened()){this.openValueStateMessage()}};R.prototype._handleItemTap=function(e){var t=l.closestTo(e.target);if(!t.isA("sap.m.CheckBox")&&!t.isA("sap.m.GroupHeaderListItem")){this._bCheckBoxClicked=false}};R.prototype._handleItemPress=function(e){if(this.isOpen()&&this._isListInSuggestMode()&&this.getPicker().oPopup.getOpenState()!==F.CLOSING){this.clearFilter();var t=this._getLastSelectedItem();if(t){_.getListItem(t).focus()}}};R.prototype._handleSelectionLiveChange=function(e){if(e.getParameter("selectAll")){return}var t=e.getParameter("listItem");var i=e.getParameter("listItems");var s=i&&i[i.length-1]||t;var n=this.isPickerDialog()?this.getPickerTextField():this;var o=this._getIsClick()&&!!s;var r=e.getParameter("selected");var a=_.getItemByListItem(this.getItems(),t);var l;if(i&&i.length){l=[];i.forEach(function(e){if(e.getType()==="Active"){l.push(_.getItemByListItem(this.getItems(),e))}},this)}if(t.getType()==="Inactive"){return}A(a,"The corresponding mapped item was not found on "+this);if(!a){return}var h={item:a,items:l,id:a.getId(),key:a.getKey(),selectAll:false,fireChangeEvent:true,suppressInvalidate:true,listItemUpdated:true};if(r){this.fireChangeEvent(a.getText());this.setSelection(h)}else{this.fireChangeEvent(a.getText());this.removeSelection(h)}if(this._bCheckBoxClicked){n.setValue(this._sOldInput);if(o&&this.isOpen()&&this.getPicker().oPopup.getOpenState()!==F.CLOSING){s.focus();this._setIsClick(false)}}else{this._bCheckBoxClicked=true;this.setValue("");this.close()}};R.prototype.onkeydown=function(e){if(this.areHotKeysPressed(e)&&this.isOpen()){this._handleFormattedTextNav();return}var i=this.getEditable(),s=this.getAggregation("tokenizer"),n=s.getTokens().length;t.prototype.onkeydown.apply(this,arguments);if(!this.getEnabled()){return}if((e.ctrlKey||e.metaKey)&&e.which===E.I&&n){e.preventDefault();if(i){this._togglePopover()}else{this._handleIndicatorPress()}return}this._bIsPasteEvent=(e.ctrlKey||e.metaKey)&&e.which===E.V;if(this.getValue().length===0&&(e.ctrlKey||e.metaKey)&&e.which===E.A&&this._hasTokens()){s.focus();s.selectAllTokens(true);e.preventDefault()}if(this.isPickerDialog()){this._sOldValue=this.getPickerTextField().getValue();this._iOldCursorPos=jQuery(this.getFocusDomRef()).cursorPos()}this._bDoTypeAhead=!p.os.android&&e.which!==E.BACKSPACE&&e.which!==E.DELETE};R.prototype.oninput=function(e){t.prototype.oninput.apply(this,arguments);var i=e.srcControl,s=this.isPickerDialog(),n=s?this.getPickerTextField():this,o=n.getValueState();if(o===x.Error&&this._bAlreadySelected){n.setValueState(this._sInitialValueState);n.setValueStateText(this._sInitialValueStateText);this._bAlreadySelected=false}if(!this.getEnabled()||!this.getEditable()){return}this.syncPickerContent();this.handleInputValidation(e,this.isComposingCharacter());if(this._bIsPasteEvent){i.updateDomValue(this._sOldValue||e.target.value||"");return}if(this.isOpen()){setTimeout(this.highlightList.bind(this,this._sOldInput))}if(this._getItemsShownWithFilter()){this.toggleIconPressedStyle(true)}};R.prototype.filterItems=function(e){return k(this,e.items,e.value,true,false,this.fnFilter||v)};R.prototype.onkeyup=function(e){t.prototype.onkeyup.apply(this,arguments);if(!this.getEnabled()||!this.getEditable()){return}this._sOldValue=this.getValue();this._iOldCursorPos=jQuery(this.getFocusDomRef()).cursorPos()};R.prototype._showWrongValueVisualEffect=function(){var e=this._getSuggestionsPopover();var t=this._sInitialValueStateText;var i=this._sInitialValueState;var s=t||this._oRbC.getText("VALUE_STATE_ERROR");var n=this;if(i===x.Error){return}if(e){e.updateValueState(x.Error,s,true);setTimeout(e.updateValueState.bind(e,n.getValueState(),s,true),1e3)}if(!this.isPickerDialog()){this.setValueState(x.Error);this.setValueStateText(this.getValueStateText()||s);setTimeout(this["setValueState"].bind(this,i||x.Error),1e3)}this._syncInputWidth(this.getAggregation("tokenizer"))};R.prototype._showAlreadySelectedVisualEffect=function(){var e=this._oRb.getText("VALUE_STATE_ERROR_ALREADY_SELECTED");if(!this.getValue()){return}var t=!!this.getSelectedItems().filter(function(e){return e.getText().toLowerCase()===this.getValue().toLowerCase()},this).length;var i=this.getItems().filter(function(e){return e.getText().toLowerCase()===this.getValue().toLowerCase()},this).length;if(t){if(!this._bAlreadySelected){this._sInitialValueState=this.getValueState();this._sInitialValueStateText=this.getValueStateText()}this._bAlreadySelected=true;this.setValueStateText(e);this.setValueState("Error");return}else if(i){return}else{this._showWrongValueVisualEffect()}};R.prototype._hasShowSelectedButton=function(){return true};R.prototype.forwardEventHandlersToSuggPopover=function(e){t.prototype.forwardEventHandlersToSuggPopover.apply(this,arguments);e.setShowSelectedPressHandler(this._filterSelectedItems.bind(this))};R.prototype.configPicker=function(e){var t=this.getRenderer(),i=t.CSS_CLASS_MULTICOMBOBOX;e.setHorizontalScrolling(false).addStyleClass(t.CSS_CLASS_COMBOBOXBASE+"Picker").addStyleClass(i+"Picker").addStyleClass(i+"Picker-CTX").attachBeforeOpen(this.onBeforeOpen,this).attachAfterOpen(this.onAfterOpen,this).attachBeforeClose(this.onBeforeClose,this).attachAfterClose(this.onAfterClose,this).addEventDelegate({onBeforeRendering:this.onBeforeRenderingPicker,onAfterRendering:this.onAfterRenderingPicker},this)};R.prototype._configureList=function(e){var t=10;if(!e){return}e.applyAriaRole("listbox");e.setMode(D.MultiSelect);e.setIncludeItemInSelection(true);e.setGrowingThreshold(t);e.attachBrowserEvent("tap",this._handleItemTap,this).attachSelectionChange(this._handleSelectionLiveChange,this).attachItemPress(this._handleItemPress,this);e.addEventDelegate({onAfterRendering:this.onAfterRenderingList,onfocusin:this.onFocusinList},this);this.getShowSelectAll()&&this.createSelectAllHeaderToolbar(e)};R.prototype._decoratePopupInput=function(e){t.prototype._decoratePopupInput.apply(this,arguments);if(!e||!e.isA(["sap.m.InputBase"])){return}e.attachSubmit(function(t){var i=e.getValue();if(i){this.setValue(i);this._selectItemByKey();this.setValue(this._sOldInput);this.close()}}.bind(this));e.addEventDelegate({onfocusout:this._handleInputFocusOut},this);e.attachChange(this._handleInnerInputChange.bind(this));return e};R.prototype._handleOkPress=function(){t.prototype._handleOkPress.apply(this,arguments);if(this.getValue()){this._selectItemByKey()}};R.prototype._handleInnerInputChange=function(e){if(e.getParameter("value")===""){this._sOldInput="";this.clearFilter()}};R.prototype.onBeforeRendering=function(){var e=this.getEditable();var i=this.getAggregation("tokenizer");var s=this.getItems();t.prototype.onBeforeRendering.apply(this,arguments);this._bInitialSelectedKeysSettersCompleted=true;i.setEnabled(this.getEnabled());i.setEditable(e);this._updatePopoverBasedOnEditMode(e);if(!s.length){this._clearTokenizer()}if(this._getList()){this.syncPickerContent(true)}this.toggleSelectAllVisibility(this.getShowSelectAll());if(this._sOldInput&&s.length&&this.isOpen()){T(this.getItems(),this.filterItems({value:this._sOldInput,items:s}));setTimeout(this.highlightList.bind(this,this._sOldInput))}this._deregisterResizeHandler();this._synchronizeSelectedItemAndKey();this.setProperty("hasSelection",!!this.getSelectedItems().length);if(!this._bAlreadySelected){this._sInitialValueState=this.getValueState();this._sInitialValueStateText=this.getValueStateText()}if(this.getShowClearIcon()){this._getClearIcon().setVisible(this.shouldShowClearIcon())}else if(this._oClearIcon){this._getClearIcon().setVisible(false)}};R.prototype.syncPickerContent=function(e){var t,i;var s=this.getPicker();var n=this.getAggregation("tokenizer");if(!s){s=this.createPicker(this.getPickerType());this._updateSuggestionsPopoverValueState();e=true}if(e){i=this._getList();t=this.getEditable()?this.getItems():this.getSelectedItems();this._synchronizeSelectedItemAndKey();var o=n.getTokens();var r=o.findIndex(function(e){return document.activeElement===e.getDomRef()});i.destroyItems();this._clearTokenizer();this._fillList(t);this.bShouldRestoreTokenizerFocus=r>-1;this.iFocusedIndex=r;if(i.getItemNavigation()){this._iFocusedIndex=i.getItemNavigation().getFocusedIndex()}}return s};R.prototype._registerResizeHandler=function(){A(!this._iResizeHandlerId,"Resize handler already registered");this._iResizeHandlerId=f.register(this,this._onResize.bind(this))};R.prototype._deregisterResizeHandler=function(){if(this._iResizeHandlerId){f.deregister(this._iResizeHandlerId);this._iResizeHandlerId=null}};R.prototype._onResize=function(){var e=this.getAggregation("tokenizer");e.setMaxWidth(this._calculateSpaceForTokenizer());this._syncInputWidth(e);this._handleNMoreAccessibility()};R.prototype.onAfterRenderingPicker=function(){var e=this["_onAfterRendering"+this.getPickerType()];var t=this.getDomRef().getBoundingClientRect().width;var i=getComputedStyle(this.getDomRef()).getPropertyValue("--sPopoverMaxWidth");if(e){e.call(this)}if(t<=parseInt(i)&&!p.system.phone){this.getPicker().addStyleClass("sapMSuggestionPopoverDefaultWidth")}else{this.getPicker().getDomRef().style.setProperty("max-width",t+"px");this.getPicker().addStyleClass("sapMSuggestionPopoverInputWidth")}};R.prototype.onBeforeOpen=function(){t.prototype.onBeforeOpen.apply(this,arguments);var e=this._getSuggestionsPopover();var i=this["_onBeforeOpen"+this.getPickerType()],s=this.getFocusDomRef();if(s){s.setAttribute("aria-controls",this.getPicker().getId())}this.addContent();this._aInitiallySelectedItems=this.getSelectedItems();this._synchronizeSelectedItemAndKey();if(i){i.call(this)}e.resizePopup(this)};R.prototype.onAfterOpen=function(){var e=this.getFocusDomRef();e&&this.getFocusDomRef().setAttribute("aria-expanded","true");this._bPickerIsOpening=false;this.closeValueStateMessage()};R.prototype.onBeforeClose=function(){t.prototype.onBeforeClose.apply(this,arguments)};R.prototype.onAfterClose=function(){var e=!jQuery.contains(this.getDomRef(),document.activeElement)||this.isPickerDialog(),t=this.getFocusDomRef();t&&this.getFocusDomRef().setAttribute("aria-expanded","false");this.toggleIconPressedStyle(false);this.clearFilter();!this.isComposingCharacter()&&!this._bPreventValueRemove&&this.setValue("");this._sOldValue="";this._sOldInput="";this._getSuggestionsPopover()._sTypedInValue="";if(this.isPickerDialog()){this.getPickerTextField().setValue("");this.getFilterSelectedButton()&&this.getFilterSelectedButton().setPressed(false)}this.fireSelectionFinish({selectedItems:this.getSelectedItems()});this.getAggregation("tokenizer").setRenderMode(e?L.Narrow:L.Loose);if(this.getValueState()==x.Error&&document.activeElement===this.getFocusDomRef()){this.selectText(0,this.getValue().length)}};R.prototype._onBeforeOpenDialog=function(){};R.prototype._onBeforeOpenDropdown=function(){var e=this.getPicker(),t=this.getDomRef(),i;if(t&&e){i=t.offsetWidth/parseFloat(a.BaseFontSize)+"rem";e.setContentMinWidth(i)}};R.prototype.getFilterSelectedButton=function(){return this._getSuggestionsPopover().getFilterSelectedButton()};R.prototype._filterSelectedItems=function(e,t){var i=e.oSource,s,n,o=this.getPickerTextField()?this.getPickerTextField().getValue():"",r=i&&i.getPressed&&i.getPressed()||t,a=_.getVisibleItems(this.getItems()),l=this.getItems(),h=this.getSelectedItems(),u=null;if(r){a.forEach(function(e){n=h.indexOf(e)>-1?true:false;s=_.getListItem(e);if(!s){return}if(s.isA("sap.m.GroupHeaderListItem")){s.setVisible(false);u=s}else{s.setVisible(n);if(n&&u){u.setVisible(true)}}},this)}else{T(this.getItems(),this.filterItems({value:o,items:l}))}this.manageSelectAllCheckBoxState()};R.prototype.revertSelection=function(){this.setSelectedItems(this._aInitiallySelectedItems)};R.prototype.setSelection=function(e){var t=this._getList(),i;if(e.item&&this.isItemSelected(e.item)){return}if(!e.item){return}if(!e.items||!e.items.length||e.selectAll){i=[e.item]}else{i=e.items}i.forEach(function(i){if(!e.listItemUpdated&&_.getListItem(i)&&t){t.setSelectedItem(_.getListItem(i),true)}var n=new s({key:i.getKey()});n.setText(i.getText());i.data(_.CSS_CLASS+"Token",n);this.getAggregation("tokenizer").addToken(n);this.addAssociation("selectedItems",i,e.suppressInvalidate);var o=this.getSelectedKeys();var r=this.getKeys([i])[0];if(r===""||o.indexOf(r)===-1){o.push(r);this.setProperty("selectedKeys",o,e.suppressInvalidate)}if(e.fireChangeEvent){this.fireSelectionChange({changedItem:e.item,changedItems:e.items,selectAll:e.selectAll,selected:true})}},this);if(!this.getProperty("hasSelection")&&this.getSelectedItems().length){this.setProperty("hasSelection",true)}this.setValue("");if(e.fireFinishEvent){if(!this.isOpen()){this.fireSelectionFinish({selectedItems:this.getSelectedItems()})}}};R.prototype.removeSelection=function(e){var t,i,s;if(e.item&&!this.isItemSelected(e.item)){return}if(!e.item){return}if(!e.items||!e.items.length||e.selectAll){t=[e.item]}else{t=e.items}t.forEach(function(t){this.removeAssociation("selectedItems",t,e.suppressInvalidate);i=this.getSelectedKeys();s=i.indexOf(t.getKey());i.splice(s,1);this.setProperty("selectedKeys",i,e.suppressInvalidate);if(!e.listItemUpdated&&_.getListItem(t)){var n=_.getListItem(t);this._getList().setSelectedItem(n,false)}if(!e.tokenUpdated){var o=C(t);t.data(_.CSS_CLASS+"Token",null);this.getAggregation("tokenizer").removeToken(o)}if(e.fireChangeEvent){this.fireSelectionChange({changedItem:e.item,changedItems:e.items,selectAll:e.selectAll,selected:false})}},this);if(this.getProperty("hasSelection")&&!this.getSelectedItems().length){this.setProperty("hasSelection",false)}if(e.fireFinishEvent){if(!this.isOpen()){this.fireSelectionFinish({selectedItems:this.getSelectedItems()})}}};R.prototype._synchronizeSelectedItemAndKey=function(){var e=this.getSelectedKeys();var t=this.getKeys(this.getSelectedItems());if(!e.length){V.info("Info: _synchronizeSelectedItemAndKey() the MultiComboBox control does not contain any item on ",this);return}for(var i=0,s=null,n=null,o=e.length;i<o;i++){s=e[i];if(t.indexOf(s)>-1){continue}n=this.getItemByKey(""+s);if(n){this.setSelection({item:n,id:n.getId(),key:n.getKey(),fireChangeEvent:false,suppressInvalidate:true,listItemUpdated:false})}}};R.prototype.updateItems=function(e){var i=function(e){return e&&e.getKey&&e.getKey()},s,n=this.getSelectedItems().map(i),o=this.getSelectedKeys();var r=t.prototype.updateItems.apply(this,arguments);n=this.getSelectedItems().map(i).filter(function(e){return n.indexOf(e)>-1});s=o.concat(n);this.setSelectedKeys(s);return r};R.prototype._getSelectedItemsOf=function(e){for(var t=0,i=e.length,s=[];t<i;t++){if(_.getListItem(e[t]).getSelected()){s.push(e[t])}}return s};R.prototype._getLastSelectedItem=function(){var e=this.getAggregation("tokenizer").getTokens();var t=e.length?e[e.length-1]:null;if(!t){return null}return this._getItemByToken(t)};R.prototype._getFocusedListItem=function(){if(!document.activeElement){return null}var e=l.getElementById(document.activeElement.id);if(this._getList()&&I(this._getList().getFocusDomRef(),e.getFocusDomRef())){return e}return null};R.prototype._getFocusedItem=function(){return _.getItemByListItem(this.getItems(),this._getFocusedListItem())};R.prototype._hasTokens=function(){return this.getAggregation("tokenizer").getTokens().length>0};R.prototype._decorateListItem=function(e){e.addDelegate({onkeydown:function(e){if((e.ctrlKey||e.metaKey)&&e.which==E.A){e.setMarked();e.preventDefault();var t=_.getSelectableItems(this.getItems());var i=this._getSelectedItemsOf(t);if(i.length!==t.length){t.forEach(function(e){this.setSelection({item:e,items:t,selectAll:true,id:e.getId(),key:e.getKey(),fireChangeEvent:true,suppressInvalidate:true,listItemUpdated:false})},this)}else{t.forEach(function(e){this.removeSelection({item:e,items:t,selectAll:true,id:e.getId(),key:e.getKey(),fireChangeEvent:true,suppressInvalidate:true,listItemUpdated:false})},this)}}if(this.areHotKeysPressed(e)){this._handleFormattedTextNav(e)}},onmousedown:function(e){this._setIsClick(true)},onkeyup:function(e){var t=null;if(e.which==E.SPACE&&this.isOpen()&&this._isListInSuggestMode()){this.open();t=this._getLastSelectedItem();if(t){_.getListItem(t).focus()}return}}},true,this);e.addEventDelegate({onsapbackspace:function(e){e.preventDefault()},onsapshow:function(e){e.setMarked();this.close()},onsaphide:function(e){this.onsapshow(e)},onsapenter:function(e){e.setMarked();if(e.srcControl&&e.srcControl.isA("sap.m.GroupHeaderListItem")){return}this.close()},onsaphome:this.handleHomeEvent.bind(this),onsapend:this.handleEndEvent.bind(this),onsapup:function(e){e.setMarked();e.preventDefault();var t=_.getVisibleItems(this.getItems());var i=t[0];var s=l.closestTo(document.activeElement);if(s!==_.getListItem(i)){return}if(this.getShowSelectAll()){this.focusSelectAll()}else{this.focus()}e.stopPropagation(true)},onfocusin:function(e){this.addStyleClass(this.getRenderer().CSS_CLASS_MULTICOMBOBOX+"Focused")},onfocusout:function(e){this.removeStyleClass(this.getRenderer().CSS_CLASS_MULTICOMBOBOX+"Focused")},onsapfocusleave:function(e){var t=this.getAggregation("picker");var i=l.getElementById(e.relatedControlId);if(t&&i&&P(t.getFocusDomRef(),i.getFocusDomRef())){if(e.srcControl){e.srcControl.focus()}}},onsaptabnext:function(){this.getPicker().close()},onsaptabprevious:function(){this.getPicker().close()}},this);if(p.support.touch){e.addEventDelegate({ontouchstart:function(e){e.setMark("cancelAutoClose")}})}};R.prototype._handleInputFocusOut=function(e){var t=this.isPickerDialog(),i=t?this.getPickerTextField():this,s=this._sOldInput||this._sOldValue||"",n=t&&e&&e.relatedTarget&&e.relatedTarget.id.includes("-popup-closeButton");if(!n){i.updateDomValue(s)}this._bIsPasteEvent=null};R.prototype.onItemChange=function(e){var i=t.prototype.onItemChange.call(this,e,this.getShowSecondaryValues());var s=e.getParameters();b({item:e.getSource(),propName:s.name,propValue:s.newValue});return i};R.prototype._handleIndicatorPress=function(){var e,t=this.getAggregation("tokenizer");if(this.getEditable()){this.syncPickerContent();this._filterSelectedItems({},true);this.focus();e=this.getPicker();e.open()}else{t._togglePopup()}if(this.isPickerDialog()){this.getFilterSelectedButton().setPressed(true);this.bOpenedByKeyboardOrButton=true}};R.prototype._togglePopover=function(){var e=this.getPicker();if(!e){e=this.syncPickerContent(true)}if(e.isOpen()){e.close()}else{e.open()}};R.prototype._createTokenizer=function(){var e=new i({renderMode:L.Narrow}).attachTokenDelete(this._handleTokenDelete,this);e.getTokensPopup().attachAfterOpen(function(){if(e.hasOneTruncatedToken()){e.setFirstTokenTruncated(false)}}).attachAfterClose(function(){var t=e.getTokens();if(t.length===1&&!t[0].getTruncated()){e.setFirstTokenTruncated(true)}});e.addEventDelegate({onAfterRendering:this._onAfterRenderingTokenizer},this);e.setShouldRenderTabIndex(false);return e};R.prototype._onAfterRenderingTokenizer=function(){var e=this.getAggregation("tokenizer");if(this.getEditable()){e.addStyleClass("sapMTokenizerIndicatorDisabled")}else{e.removeStyleClass("sapMTokenizerIndicatorDisabled")}setTimeout(this._syncInputWidth.bind(this,e),0);setTimeout(this._handleNMoreAccessibility.bind(this),0)};R.prototype._handleTokenDelete=function(e){var t=e.getParameter("tokens");var i=this.getSelectedItems();this._removeSelection(t);if(i.length!==_.getSelectableItems(this.getItems())){!this.isPickerDialog()&&!this.isFocusInTokenizer()&&this.focus();this.fireChangeEvent("")}};R.prototype._removeSelection=function(e){var t=this.getAggregation("tokenizer");e.forEach(function(e){var i=e&&this._getItemByToken(e);if(!this.getEditable()||!this.getEnabled()||!i||!this.isItemSelected(i)||!i.getEnabled()||!e.getEditable()){return}this.removeSelection({item:i,id:i.getId(),key:i.getKey(),tokenUpdated:true,fireChangeEvent:true,fireFinishEvent:true,suppressInvalidate:true});e.destroy();if(this.getSelectedItems().length>0){var s=t.getTokens();s[s.length-1].focus()}else{this.focus()}},this)};R.prototype.onAfterRenderingList=function(){var e=document.activeElement===this.getFocusDomRef();var t=l.closestTo(document.activeElement);var i=t&&t.isA("sap.m.Token");var s=this._getList();var n=s?s.getVisibleItems():[];if(this.getEditable()&&!e&&!i&&n[this._iFocusedIndex]){n[this._iFocusedIndex].focus();this._iFocusedIndex=null}this.manageSelectAllCheckBoxState()};R.prototype.onFocusinList=function(){var e=this._getList();if(this._bListItemNavigationInvalidated&&this._getList().getItemNavigation()){e.getItemNavigation().setSelectedIndex(this._iInitialItemFocus);this._bListItemNavigationInvalidated=false}this._getSuggestionsPopover().updateListDataAttributes(e)};R.prototype.onAfterRendering=function(){var e=this.getAggregation("tokenizer");var i=l.getElementById(e.getProperty("opener"))?.getDomRef();var s;t.prototype.onAfterRendering.apply(this,arguments);this._registerResizeHandler();setTimeout(function(){e.setMaxWidth(this._calculateSpaceForTokenizer())}.bind(this),0);if(this.bShouldRestoreTokenizerFocus){s=e.getTokens()[this.iFocusedIndex];if(s){s.focus()}this.bShouldRestoreTokenizerFocus=false}if(i!==this.getDomRef()){e.setProperty("opener",this.getId(),true)}};R.prototype.onfocusout=function(e){this.isOpen()&&this._handleInputFocusOut();this.removeStyleClass("sapMFocus");if(this.getValueState()===x.Error&&this.getValueStateText()===this._oRb.getText("VALUE_STATE_ERROR_ALREADY_SELECTED")){this.setValueState(this._sInitialValueState);this.setValueStateText(this._sInitialValueStateText)}t.prototype.onfocusout.apply(this,arguments);var i=this.getValue(),s=this.getPicker(),n=e.relatedTarget;if(!I(s?.getDomRef(),n)&&!I(this.getDomRef(),n)){this.setValue(null);if(i){this.fireChangeEvent("",{value:i})}}};R.prototype.onpaste=function(e){var t;var i=false;var s=this.getSelectedItems();var n=_.getSelectableItems(this.getItems());if(!n.length){this.syncPickerContent(true)}n=_.getSelectableItems(this.getItems());t=e.originalEvent.clipboardData.getData("text/plain");if(t.length&&t.endsWith("\r\n")){t=t.substring(0,t.lastIndexOf("\r\n"))}var o=t.split(/\r\n|\r|\n|\t/g);if(o&&o.length>1){n.filter(function(e){return s.indexOf(e)===-1}).forEach(function(e){if(o.indexOf(e.getText())>-1){i=true;this.setSelection({item:e,id:e.getId(),key:e.getKey(),fireChangeEvent:true,fireFinishEvent:true,suppressInvalidate:true,listItemUpdated:false})}},this)}if(i){e.stopPropagation();e.preventDefault()}};R.prototype.onsapbackspace=function(e){var t=this.getAggregation("tokenizer");var i=t.getTokens();var s=i.filter(function(e){return e.getSelected()});if(!this.getEnabled()||!this.getEditable()){e.preventDefault();return}if(this.getCursorPosition()>0||this.getValue().length>0){return}if(s.length>0){this._removeAllTokens();return}if(document.activeElement===this.getFocusDomRef()){i[i.length-1]&&i[i.length-1].focus()}e.preventDefault()};R.prototype._removeAllTokens=function(){var e=this.getAggregation("tokenizer");var t=e.getTokens().filter(function(e){return e.getSelected()});if(!t.length){return}this._removeSelection(t);this.fireChangeEvent("");this.invalidate()};R.prototype.onsapdelete=R.prototype.onsapbackspace;R.prototype.onsapnext=function(e){var t=this.getAggregation("tokenizer");if(e.isMarked()){return}var i=l.closestTo(document.activeElement);if(!i){return}if(i===t||t.$().find(i.$()).length>0&&this.getEditable()){t.scrollToEnd();this.focus()}};R.prototype.onsapprevious=function(e){if(this.getCursorPosition()===0&&!y(this.getFocusDomRef())){if(e.srcControl===this){i.prototype.onsapprevious.apply(this.getAggregation("tokenizer"),arguments)}}};R.prototype.onclick=function(e){var t=this.getEditable(),i=this.getEnabled(),s=e.target.className.indexOf("sapMTokenizerIndicator")>-1;if(t&&i&&s){e.preventDefault();this._handleIndicatorPress()}};R.prototype.ontap=function(e){t.prototype.ontap.apply(this,arguments);var i=this.getOpenArea();if(!this.getEnabled()||!this.getEditable()){return}e.setMarked();if(this.isPickerDialog()&&i.contains(e.target)){this.open()}};R.prototype.getOpenArea=function(){if(this.isPickerDialog()){return this.getDomRef()}else{return t.prototype.getOpenArea.apply(this,arguments)}};R.prototype._getItemsStartingWithPerTerm=function(e,t){var i=[],s=t?_.getEnabledItems(this.getItems()):_.getSelectableItems(this.getItems()),n=this.fnFilter?this.fnFilter:v;s.forEach(function(t){if(n(e,t)){i.push(t)}},this);return i};R.prototype._getItemsStartingWith=function(e,t){var i=[],s=t?_.getEnabledItems(this.getItems()):_.getSelectableItems(this.getItems());s.forEach(function(t){if(typeof e==="string"&&e!==""&&t.getText().toLowerCase().startsWith(e.toLowerCase())){i.push(t)}},this);return i};R.prototype._getUnselectedItemsStartingText=function(e){var t=[];this._getUnselectedItems().forEach(function(i){if(typeof e==="string"&&e!==""&&i.getText().toLowerCase().startsWith(e.toLowerCase())){t.push(i)}},this);return t};R.prototype.getCursorPosition=function(){return this._$input.cursorPos()};R.prototype._selectPreviousItemsOf=function(e){var t;do{t=true;var i=this._getPreviousVisibleItemOf(e);if(i){var s=_.getListItem(i);if(s){t=_.getListItem(i).getSelected()}}this.setSelection({item:e,id:e.getId(),key:e.getKey(),fireChangeEvent:true,suppressInvalidate:true});e=i}while(!t)};R.prototype._getNextVisibleItemOf=function(e){var t=_.getSelectableItems(this.getItems());var i=t.indexOf(e)+1;if(i<=0||i>t.length-1){return null}return t[i]};R.prototype._getPreviousVisibleItemOf=function(e){var t=_.getSelectableItems(this.getItems());var i=t.indexOf(e)-1;if(i<0){return null}return t[i]};R.prototype._getNextUnselectedItemOf=function(e){var t=this._getUnselectedItems();var i=t.indexOf(e)+1;if(i<=0||i>t.length-1){return null}return t[i]};R.prototype._getPreviousUnselectedItemOf=function(e){var t=this._getUnselectedItems();var i=t.indexOf(e)-1;if(i<0){return null}return t[i]};R.prototype._getNextTraversalItem=function(){var e=this.getValue();var t=this._getUnselectedItemsPerTerm(e);if(t.indexOf(this._oTraversalItem)>-1&&this._oTraversalItem.getText()===this.getValue()){return this._getNextUnselectedItemOf(this._oTraversalItem)}return t[0]};R.prototype._getPreviousTraversalItem=function(){var e=this.getValue();var t=this._getUnselectedItemsPerTerm(e);if(t.indexOf(this._oTraversalItem)>-1&&this._oTraversalItem.getText()===this.getValue()){return this._getPreviousUnselectedItemOf(this._oTraversalItem)}return t[t.length-1]};R.prototype.setSelectedItems=function(e){this.removeAllSelectedItems();if(!e||!e.length){return this}if(!Array.isArray(e)){V.warning("Warning: setSelectedItems() has to be an array of sap.ui.core.Item instances or of valid sap.ui.core.Item IDs",this);return this}e.forEach(function(e){if(!(e instanceof d)&&typeof e!=="string"){V.warning("Warning: setSelectedItems() has to be an array of sap.ui.core.Item instances or of valid sap.ui.core.Item IDs",this);return}if(typeof e==="string"){e=l.getElementById(e)}this.setSelection({item:e?e:null,id:e?e.getId():"",key:e?e.getKey():"",suppressInvalidate:true})},this);return this};R.prototype.addSelectedItem=function(e){if(!e){return this}if(typeof e==="string"){e=l.getElementById(e)}this.setSelection({item:e?e:null,id:e?e.getId():"",key:e?e.getKey():"",fireChangeEvent:false,suppressInvalidate:true});return this};R.prototype.removeSelectedItem=function(e){if(!e){return null}if(typeof e==="string"){e=l.getElementById(e)}if(!this.isItemSelected(e)){return null}this.removeSelection({item:e,id:e.getId(),key:e.getKey(),fireChangeEvent:false,suppressInvalidate:true});return e};R.prototype.removeAllSelectedItems=function(){var e=[];var t=this.getAssociation("selectedItems",[]);t.forEach(function(t){var i=this.removeSelectedItem(t);if(i){e.push(i.getId())}},this);return e};R.prototype.removeSelectedKeys=function(e){var t,i=[];if(!e||!e.length||!Array.isArray(e)){return i}e.forEach(function(e){t=this.getItemByKey(e);if(t){this.removeSelection({item:t?t:null,id:t?t.getId():"",key:t?t.getKey():"",fireChangeEvent:false,suppressInvalidate:true});i.push(t)}},this);return i};R.prototype.setSelectedKeys=function(e){if(this._bInitialSelectedKeysSettersCompleted){this.setProperty("selectedKeys",[],true);this.removeAllSelectedItems()}this.addSelectedKeys(e);this._bInitialSelectedKeysSettersCompleted=true;return this};R.prototype.addSelectedKeys=function(e){var t,i=[];e=this.validateProperty("selectedKeys",e);e.forEach(function(e){var t=this.getItemByKey(e);if(t){this.addSelectedItem(t)}else if(e!=null){i.push(e)}},this);if(i.length>0){t=this.getProperty("selectedKeys").filter(function(e){return i.indexOf(e)===-1});i=t.concat(i);this.setProperty("selectedKeys",i,true)}return this};R.prototype._getUnselectedItems=function(){var e=jQuery(_.getSelectableItems(this.getItems())).not(this.getSelectedItems()).get();if(!this.isOpen()){return e.filter(function(e){return!e.isA("sap.ui.core.SeparatorItem")})}return e};R.prototype._getUnselectedItemsPerTerm=function(e){var t=jQuery(_.getSelectableItems(this.getItems())).not(this.getSelectedItems()).get();var i=[];var s=this.fnFilter?this.fnFilter:v;if(!this.isOpen()){t=t.filter(function(e){return!e.isA("sap.ui.core.SeparatorItem")})}t.forEach(function(t){if(s(e,t)){i.push(t)}},this);return i};R.prototype.getSelectedItems=function(){var e=[],t=this.getAssociation("selectedItems")||[];t.forEach(function(t){var i=l.getElementById(t);if(i){e.push(i)}},this);return e};R.prototype.getWidth=function(){return this.getProperty("width")||"100%"};R.prototype._updatePopoverBasedOnEditMode=function(e){var t=this._getList(),i=this._getSuggestionsPopover();if(t&&e!==this._bPrevEditable&&e){i.addContent(t)}this._bPrevEditable=e};R.prototype._mapItemToListItem=function(e){var t,i,s,n=this.getRenderer();if(!e){return null}t=_.createListItemFromCoreItem(e,this.getShowSecondaryValues());this._decorateListItem(t);if(e.isA("sap.ui.core.SeparatorItem")){return t}i=n.CSS_CLASS_MULTICOMBOBOX+"Item";s=this.isItemSelected(e)?i+"Selected":"";t.addStyleClass(i+" "+s);this.setSelectable(e,e.getEnabled());return t};R.prototype.setSelectable=function(e,i){t.prototype.setSelectable.call(this,e,i);var s=C(e);if(s){s.setVisible(i)}};R.prototype._fillList=function(){var e;var t;var i;var n=this._getList();var o=this.getEditable()?this.getItems():this.getSelectedItems();if(!n){return}n.destroyItems();for(var r=0,a,l=o.length;r<l;r++){a=this._mapItemToListItem(o[r]);if(a.isA("sap.m.GroupHeaderListItem")){this._getList().addItemGroup(null,a)}else{this._getList().addItem(a)}if(this.isItemSelected(o[r])){this._getList().setSelectedItem(a,true)}}e=this.getAggregation("tokenizer");t=this.getSelectedItems();for(var h=0;h<t.length;h++){i=t[h];var u=new s({key:i.getKey(),text:i.getText()});i.data(_.CSS_CLASS+"Token",u);e.addToken(u,true)}};R.prototype.handleInputValidation=function(e,t){var i=e.target.value,s=this.isValueValid(i),n,o,r;var a=e.srcControl;if(!s&&i!==""&&!t){this._handleFieldValidationState(a);return}r=this._getItemsStartingWith(i,true);if(!t||this._bIsPasteEvent){this._handleTypeAhead(i,r,a)}n=this.getItems();if(this.isPickerDialog()){o=this.getFilterSelectedButton();if(o!=null&&o.getPressed()){o.setPressed(false)}}T(this.getItems(),this.filterItems({value:i,items:n}));this.manageSelectAllCheckBoxState();this._sOldInput=i;if((!this.getValue()||!s)&&!this.bOpenedByKeyboardOrButton&&!this.isPickerDialog()){this.close()}else{this.open()}};R.prototype.isValueValid=function(e){var t=this._getItemsStartingWith(e,true);var i=this._getItemsStartingWithPerTerm(e,true);return t.length||i.length};R.prototype._handleTypeAhead=function(e,t,i){var s,n;if(!this._bDoTypeAhead){return}s=this.getSelectedItems();n=t.filter(function(e){return s.indexOf(e)===-1});S(e,i,n)};R.prototype._handleFieldValidationState=function(e){if(this._sOldInput&&this.isValueValid(this._sOldInput)){e.updateDomValue(this._sOldInput)}else if(this._sOldValue&&this.isValueValid(this._sOldValue)){e.updateDomValue(this._sOldValue)}else{e.updateDomValue("");e.setProperty("effectiveShowClearIcon",false)}if(this._iOldCursorPos){jQuery(e.getFocusDomRef()).cursorPos(this._iOldCursorPos)}this._showWrongValueVisualEffect()};R.prototype.init=function(){t.prototype.init.apply(this,arguments);this._bInitialSelectedKeysSettersCompleted=false;this._bListItemNavigationInvalidated=false;this._iInitialItemFocus=-1;this._bCheckBoxClicked=true;this._bPreventValueRemove=false;this._oTokenizer=this._createTokenizer();this._oTokenizer.onfocusfail=function(){};this.setAggregation("tokenizer",this._oTokenizer);this._aInitiallySelectedItems=[];this._oRbC=c.getResourceBundleFor("sap.ui.core");this._fillList()};R.prototype.handleItemRemoval=function(e){this.removeSelection({item:e,id:e?e.getId():"",key:e?e.getKey():"",fireChangeEvent:false,suppressInvalidate:true,listItemUpdated:true})};R.prototype.isItemSelected=function(e){return this.getSelectedItems().indexOf(e)>-1};R.prototype._clearTokenizer=function(){this.getAggregation("tokenizer").destroyTokens()};R.prototype.exit=function(){t.prototype.exit.apply(this,arguments);this._deregisterResizeHandler();if(this._oTokenizer){this._oTokenizer.destroy();this._oTokenizer=null}this._oRbC=null;this.oValueStateNavDelegate=null;this._sInitialValueState=null};R.prototype.destroyItems=function(){this.setProperty("selectedKeys",[]);this._clearTokenizer();return this.destroyAggregation("items")};R.prototype._getItemByToken=function(e){return _.getItemBy(this.getItems(),e,"Token")};R.prototype._getItemByValue=function(e){var t=_.getSelectableItems(this.getItems());for(var i=0;i<t.length;i++){if(t[i].getText().toLowerCase()===e.toLowerCase()){return t[i]}}};R.prototype._handleItemToFocus=function(){if(this.isOpen()){return}this.syncPickerContent();var e,t,i=l.getElementById(document.activeElement.id),s=this.getSelectedItems(),n=_.getSelectableItems(this.getItems()),o=this._getList(),r=o&&o.getItemNavigation(),a=this.getValue(),h=this.getPicker();if(i&&i.isA("sap.m.Token")){t=this._getItemByToken(i)}else if(a){t=this._getItemByValue(a)}if(!t){t=s.length?_.getItemByListItem(this.getItems(),this._getList().getSelectedItems()[0]):n[0]}e=_.getVisibleItems(this.getItems()).indexOf(t);if(r){r.setSelectedIndex(e)}else{this._bListItemNavigationInvalidated=true;this._iInitialItemFocus=e}if(!t){h.setInitialFocus(this)}else{h.setInitialFocus(o)}};R.prototype.getAccessibilityInfo=function(){var e=this.getSelectedItems().map(function(e){return e.getText()}).join(" ");var i=t.prototype.getAccessibilityInfo.apply(this,arguments);i.type=c.getResourceBundleFor("sap.m").getText("ACC_CTR_TYPE_MULTICOMBO");i.description=(this.getValueDescriptionInfo()+" "+e).trim();return i};R.prototype.getValueDescriptionInfo=function(){if(this.getValue()){return this.getValue()}return this._hasTokens()?"":c.getResourceBundleFor("sap.m").getText("INPUTBASE_VALUE_EMPTY")};R.prototype._setIsClick=function(e){this._bIsClick=e};R.prototype._getIsClick=function(){return this._bIsClick};R.prototype._calculateSpaceForTokenizer=function(){if(this.getDomRef()){var e,t=this.getDomRef().getBoundingClientRect().width,i=this._calculateIconsSpace(),s=this.$().find(".sapMInputBaseInner"),n=["min-width","padding-right","padding-left"],o=n.reduce(function(e,t){return e+(parseInt(s.css(t))||0)},0);e=t-(i+o);e=e<0?0:e;return e+"px"}else{return null}};R.prototype._syncInputWidth=function(e){var t=this.getDomRef("inner"),i,s;if(!t||e&&!e.getDomRef()){return}s=parseFloat(e.getDomRef().getBoundingClientRect().width.toFixed(2));i=this._calculateIconsSpace();t.style.width="calc(100% - "+parseFloat(i+s)+"px)"};R.prototype._handleNMoreAccessibility=function(){var e=O.getStaticId("sap.m","MULTICOMBOBOX_OPEN_NMORE_POPOVER"),t=this.getAggregation("tokenizer"),i=this.getFocusDomRef(),s=i&&i.getAttribute("aria-describedby"),n=s?s.split(" "):[],o=n.indexOf(e),r=this.getEnabled(),a=!this.getEditable()&&t&&t.getHiddenTokensCount();if(a&&o===-1){n.push(e);r&&this.getFocusDomRef().setAttribute("aria-keyshortcuts","Enter")}else if(o!==-1&&!a){n.splice(o,1);this.getFocusDomRef().removeAttribute("aria-keyshortcuts")}if(i&&n.length){i.setAttribute("aria-describedby",n.join(" ").trim())}};R.prototype.applyShowItemsFilters=function(){this.syncPickerContent();T(this.getItems(),this.filterItems({value:this.getValue()||"_",items:this.getItems()}));this.manageSelectAllCheckBoxState()};R.prototype.showItems=function(e){var i=true,s=this.fnFilter;if(typeof e==="function"){this.syncPickerContent();this.setFilterFunction(e||function(){return true});i=this.filterItems({value:this.getValue()||"_",items:this.getItems()}).items.length>0;this.setFilterFunction(s)}if(i){t.prototype.showItems.apply(this,arguments)}};R.prototype.createSelectAllHeaderToolbar=function(e){e=e||this._getList();if(!e||e.getHeaderToolbar()){return}var t=new o({select:function(e){var t=e.getSource(),i=_.getSelectableItems(this.getItems()),s=this._getSelectedItemsOf(i);if(e.getParameter("selected")){var n=i.filter(function(e){return s.indexOf(e)===-1});n.forEach(function(e){this.setSelection({item:e,items:n,selectAll:true,id:e.getId(),key:e.getKey(),fireChangeEvent:true,suppressInvalidate:true,listItemUpdated:false})},this)}else{s.forEach(function(e){this.removeSelection({item:e,items:s,selectAll:true,id:e.getId(),key:e.getKey(),fireChangeEvent:true,suppressInvalidate:true,listItemUpdated:false})},this)}t.focus()}.bind(this)});t.addEventDelegate(this._selectAllDelegate(),this);e.setHeaderToolbar(new r({content:t}).addStyleClass("sapMMultiComboBoxSelectAll")).setSticky(["HeaderToolbar"]);this.attachSelectionChange(this.manageSelectAllCheckBoxState.bind(this))};R.prototype.manageSelectAllCheckBoxState=function(){var e=this.getSelectAllCheckbox();if(!e){return}var t=this.getItems(),i=this.getSelectedItems(),s=_.getSelectableItems(t).filter(function(e){return i.indexOf(e)>-1}).length===_.getSelectableItems(t).length;e.setText(this._oRb.getText("MULTICOMBOBOX_SELECT_ALL_CHECKBOX",[i.length,_.getAllSelectableItems(t).length])).setSelected(s)};R.prototype.getSelectAllToolbar=function(){var e=this._getList();return e&&e.getHeaderToolbar()};R.prototype.getSelectAllCheckbox=function(){var e=this.getSelectAllToolbar();return e&&e.getContent()[0]};R.prototype._selectAllDelegate=function(){return{onsapdown:this.handleDownEvent,onsapup:function(e){e.preventDefault();this.getFocusDomRef().focus()},onsaphome:this.handleHomeEvent,onsapend:this.handleEndEvent,onfocusin:function(){var e=this.getRenderer(),t=this.getSelectAllToolbar();t&&t.addStyleClass(e.CSS_CLASS_MULTICOMBOBOX+"SelectAllFocused")},onfocusout:function(){var e=this.getRenderer(),t=this.getSelectAllToolbar();t&&t.removeStyleClass(e.CSS_CLASS_MULTICOMBOBOX+"SelectAllFocused")},onsapshow:this.close,onsaphide:this.close}};R.prototype.focusSelectAll=function(){var e=this.getSelectAllCheckbox();e&&e.focus()};R.prototype.toggleSelectAllVisibility=function(e){var t=this.getSelectAllToolbar();if(t){t.setVisible(e);return}e&&this.createSelectAllHeaderToolbar()};R.prototype.handleClearIconPress=function(){if(!(this.getEnabled()&&this.getEditable())){return}if(this.getValue()!==""){this.setValue("");this._sOldInput="";this.bOpenedByKeyboardOrButton?this.clearFilter():this.close();this.setProperty("effectiveShowClearIcon",false)}};R.prototype.getFormFormattedValue=function(){return this.getSelectedItems().map(function(e){return e.getText()}).join(", ")};R.prototype.getFormObservingProperties=function(){return["value","selectedKeys"]};return R});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/MultiComboBoxRenderer", ["./ComboBoxBaseRenderer","./ComboBoxTextFieldRenderer","sap/ui/core/Lib","sap/ui/core/Renderer","sap/ui/core/library"],function(e,t,r,i,n){"use strict";var o=i.extend(e);o.apiVersion=2;o.CSS_CLASS_MULTICOMBOBOX="sapMMultiComboBox";o.addOuterClasses=function(t,r){e.addOuterClasses.apply(this,arguments);t.class(o.CSS_CLASS_MULTICOMBOBOX);if(r.getProperty("hasSelection")){t.class("sapMMultiComboBoxHasToken")}};o.getAriaDescribedBy=function(e){var r=t.getAriaDescribedBy.apply(this,arguments),i=e.getAggregation("tokenizer"),n=i&&i.getTokensInfoId();if(e.getValueStateLinksForAcc().length){r=r?`${r} ${e.getValueStateLinksShortcutsId()}`:e.getValueStateLinksShortcutsId()}return(r?r+" ":"")+n};o.getAccessibilityState=function(t){var i=e.getAccessibilityState.apply(this,arguments),n=r.getResourceBundleFor("sap.m");i.roledescription=n.getText("MULTICOMBOBOX_ARIA_ROLE_DESCRIPTION");return i};o.prependInnerContent=function(e,t){e.renderControl(t.getAggregation("tokenizer"))};return o},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/MultiInput", ["./Input","./Tokenizer","./Token","./library","sap/ui/core/Element","sap/ui/core/EnabledPropagator","sap/ui/base/ManagedObject","sap/ui/base/ManagedObjectMetadata","sap/ui/base/ManagedObjectObserver","sap/ui/core/Lib","sap/ui/core/ResizeHandler","sap/ui/core/IconPool","sap/ui/Device","./MultiInputRenderer","sap/ui/dom/containsOrEquals","sap/m/inputUtils/completeTextSelected","sap/ui/events/KeyCodes","sap/ui/core/InvisibleText","sap/ui/core/util/PasteHelper","sap/ui/dom/jquery/cursorPos"],function(e,t,i,o,n,s,r,a,g,l,p,u,h,d,f,c,k,T,y){"use strict";var v=o.TokenizerRenderMode;var _=e.extend("sap.m.MultiInput",{metadata:{library:"sap.m",designtime:"sap/m/designtime/MultiInput.designtime",properties:{enableMultiLineMode:{type:"boolean",group:"Behavior",defaultValue:false,deprecated:true},maxTokens:{type:"int",group:"Behavior"},showSuggestion:{type:"boolean",group:"Behavior",defaultValue:true},_semanticFormValue:{type:"string",group:"Behavior",defaultValue:"",visibility:"hidden"}},aggregations:{tokens:{type:"sap.m.Token",multiple:true,singularName:"token"},tokenizer:{type:"sap.m.Tokenizer",multiple:false,visibility:"hidden"}},events:{tokenChange:{parameters:{type:{type:"string"},token:{type:"sap.m.Token"},tokens:{type:"sap.m.Token[]"},addedTokens:{type:"sap.m.Token[]"},removedTokens:{type:"sap.m.Token[]"}},deprecated:true},tokenUpdate:{allowPreventDefault:true,parameters:{type:{type:"string"},addedTokens:{type:"sap.m.Token[]"},removedTokens:{type:"sap.m.Token[]"}}}},dnd:{draggable:false,droppable:true}},renderer:d});s.apply(_.prototype,[true]);var m=l.getResourceBundleFor("sap.m");_.prototype.init=function(){var i=this;this._bShowListWithTokens=false;e.prototype.init.call(this);this._getClearIcon();this._bIsValidating=false;var o=this._initTokenizer();o.updateTokens=function(){var e=i.getDomRef();if(e&&e.contains(document.activeElement)){i.bTokensUpdated=true}this.destroyTokens();this.updateAggregation("tokens")};o.onfocusfail=function(){if(i.bTokensUpdated){return undefined}else{return n.prototype.onfocusfail.apply(this,arguments)}};o.setShouldRenderTabIndex(false);this.setAggregation("tokenizer",o);o.afterPopupClose=this._onAfterCloseTokensPicker.bind(this);o.getTokensPopup().attachBeforeOpen(this._onBeforeOpenTokensPicker.bind(this))._getPopup().setExtraContent([o,this]);o.getTokensPopup().addEventDelegate({onAfterRendering:function(){var e=this.getDomRef().getBoundingClientRect().width;var t=getComputedStyle(this.getDomRef()).getPropertyValue("--sPopoverMaxWidth");if(e<=parseInt(t)&&!h.system.phone){o.getTokensPopup().getDomRef().style.setProperty("max-width","40rem")}else{o.getTokensPopup().getDomRef().style.setProperty("max-width",e+"px")}o.getTokensPopup().getDomRef().style.setProperty("min-width",e+"px");o.getTokensPopup().setContentWidth(e+"px")}},this);this.setAggregation("tokenizer",o);this._oTokenizerObserver=new g(function(e){var i=e.mutation;var o=e.child;switch(i){case"insert":o.attachEvent("_change",this.invalidate,this);this.fireTokenChange({type:t.TokenChangeType.Added,token:o,tokens:[o],removedTokens:[]});break;case"remove":var n=e.object.getTokens().length?t.TokenChangeType.Removed:t.TokenChangeType.RemovedAll;o.detachEvent("_change",this.invalidate,this);this.fireTokenChange({type:n,token:o,removedTokens:[o]});break;default:break}this.updateFormValueProperty();this.invalidate()}.bind(this));this._oTokenizerObserver.observe(o,{aggregations:["tokens"]});this._bShowListWithTokens=false;this._bIsValidating=false;o.addEventDelegate({onThemeChanged:this._handleInnerVisibility.bind(this),onAfterRendering:function(){var e=this.getEditable()&&document.activeElement===this.getDomRef("inner");if(this.isMobileDevice()&&this.getEditable()){o.addStyleClass("sapMTokenizerIndicatorDisabled")}else{o.removeStyleClass("sapMTokenizerIndicatorDisabled")}this._syncInputWidth(o);if(this.getEditable()){o.addStyleClass("sapMTokenizerIndicatorDisabled")}else{o.removeStyleClass("sapMTokenizerIndicatorDisabled")}if(this.getTokens().length){this._handleInnerVisibility();this._handleNMoreAccessibility();this._registerTokenizerResizeHandler()}if(!this.isMobileDevice()&&!this._getIsSuggestionPopupOpen()&&e){o.scrollToEnd()}}.bind(this)},this);this._aTokenValidators=[];this.setShowValueHelp(true);this._getSuggestionsPopover().getPopover().attachBeforeOpen(function(){if(i.isMobileDevice()!==true){return}var e=o._getTokensList();o._fillTokensList(e);this.addContent(e);i._manageListsVisibility(!!o.getTokens().length)}).attachAfterOpen(function(){var e=i.getTokens().length?m.getText("MULTIINPUT_NAVIGATION_POPUP_AND_TOKENS"):m.getText("MULTIINPUT_NAVIGATION_POPUP");i._oInvisibleMessage.announce(e)});this.attachSuggestionItemSelected(this._onSuggestionItemSelected,this);this.attachLiveChange(this._onLiveChange,this);this.attachValueHelpRequest(this._onValueHelpRequested,this);this._getValueHelpIcon().setProperty("visible",true,true);this._onResize=this._onResize.bind(this)};_.prototype.exit=function(){this._deregisterResizeHandler();this._deregisterTokenizerResizeHandler();this._oTokenizerObserver.disconnect();this._oTokenizerObserver.destroy();this._oTokenizerObserver=null;e.prototype.exit.call(this)};_.prototype.onAfterRendering=function(){var t=this.getAggregation("tokenizer");var i=n.getElementById(t.getProperty("opener"))?.getDomRef();this._bTokenIsValidated=false;t.setMaxWidth(this._calculateSpaceForTokenizer());if(i!==this.getDomRef()){t.setProperty("opener",this.getId(),true)}this._registerResizeHandler();e.prototype.onAfterRendering.apply(this,arguments);if(this.bTokensUpdated&&this.bDeletePressed){var o=t.getTokens();if(o[this.iFocusedIndexBeforeUpdate]){o[this.iFocusedIndexBeforeUpdate].focus()}else{this.focus()}}this.bTokensUpdated=false};_.prototype._initTokenizer=function(){return new t({renderMode:v.Narrow,tokenDelete:this._tokenDelete.bind(this)})};_.prototype._tokenDelete=function(e){if(!this.getEditable()||!this.getEnabled()){return}this._deleteTokens(e.getParameter("tokens"),e.getParameters())};_.prototype._deleteTokens=function(e,i){var o=this.getAggregation("tokenizer");var n=0;var s=i.keyCode===k.BACKSPACE;var r=e[e.length-1];var a=e[0];n=this.getTokens().indexOf(s?a:r);this.iFocusedIndexBeforeUpdate=n;this.bDeletePressed=!s;o.focusToken(n,i,function(){this.focus()}.bind(this));this.fireTokenUpdate({type:t.TokenUpdateType.Removed,addedTokens:[],removedTokens:e});e.filter(function(e){return this.getEditable()&&this.getEnabled()&&e.getEditable()}.bind(this)).forEach(function(e){e.destroy()});if(this.getTokens().length===0){o.getTokensPopup().close()}if(!i.keyCode){this.focus()}};_.prototype._handleInnerVisibility=function(){var e=!!this.getAggregation("tokenizer").getHiddenTokensCount();this._setValueVisible(!e)};_.prototype.oninput=function(t){this.setProperty("selectedKey","",true);e.prototype.oninput.call(this,t);if(t.isMarked("invalid")||!this.getEditable()){return}this._setValueVisible(true);this._manageListsVisibility(false);this.getAggregation("tokenizer").getTokensPopup().close()};_.prototype._registerResizeHandler=function(){if(!this._iResizeHandlerId){this._iResizeHandlerId=p.register(this,this._onResize)}};_.prototype._deregisterResizeHandler=function(){if(this._iResizeHandlerId){p.deregister(this._iResizeHandlerId);this._iResizeHandlerId=null}};_.prototype._registerTokenizerResizeHandler=function(){if(!this._iTokenizerResizeHandler){this._iTokenizerResizeHandler=p.register(this.getAggregation("tokenizer"),this._onResize)}};_.prototype._deregisterTokenizerResizeHandler=function(){if(this._iTokenizerResizeHandler){p.deregister(this._iTokenizerResizeHandler);this._iTokenizerResizeHandler=null}};_.prototype._onResize=function(){this.getAggregation("tokenizer").setMaxWidth(this._calculateSpaceForTokenizer())};_.prototype._onSuggestionItemSelected=function(e){var t=this.getAggregation("tokenizer"),o=null,n=null,s=t.getTokens().length;if(this.getMaxTokens()&&s>=this.getMaxTokens()||this._bValueHelpOpen){return}if(this._hasTabularSuggestions()){o=e.getParameter("selectedRow")}else{o=e.getParameter("selectedItem");if(o){n=new i({text:r.escapeSettingsValue(o.getText()),key:r.escapeSettingsValue(o.getKey())})}}if(o&&!this._bTokenIsAdded){var a=this.getValue();this.addValidateToken({text:a,token:n,suggestionObject:o,validationCallback:this._validationCallback.bind(this,s)})}if(this.isMobileDevice()){var g=t.getTokens().length;if(s<g){this.setValue("")}if(this._getSuggestionsList().isA("sap.m.Table")){this._getSuggestionsList().addStyleClass("sapMInputSuggestionTableHidden")}else{this._getSuggestionsList().destroyItems()}var l=this.getAggregation("tokenizer").getScrollDelegate();if(l){l.scrollTo(0,0,0)}this._getSuggestionsPopover().getInput().focus()}this._bTokenIsAdded=false};_.prototype._onValueHelpRequested=function(){this._bValueHelpOpen=true};_.prototype._onLiveChange=function(e){var i=this.getAggregation("tokenizer").getTokens();var o=i.length>0&&i.every(e=>e.getSelected());if(!o){return}this.fireTokenUpdate({type:t.TokenUpdateType.Removed,addedTokens:[],removedTokens:i});this.removeAllTokens()};_.prototype._setValueVisible=function(e){var t=e?"1":"0";this.$("inner").css("opacity",t)};_.prototype.onmousedown=function(e){if(e.target==this.getDomRef("content")){e.preventDefault();e.stopPropagation()}};_.prototype.openMultiLine=function(){};_.prototype.closeMultiLine=function(){};_.prototype.showItems=function(){e.prototype.showItems.apply(this,arguments);this._manageListsVisibility(false)};_.prototype.onBeforeRendering=function(){var t=this.getAggregation("tokenizer");var i=t._getTokensList();e.prototype.onBeforeRendering.apply(this,arguments);this._hideTokensOverLimit();t.setEnabled(this.getEnabled());t._fillTokensList(i)};_.prototype._hideTokensOverLimit=function(){if(!this.getMaxTokens()){return}this.getTokens().forEach(function(e,t){if(t>=this.getMaxTokens()){return e.setVisible(false)}return e.setVisible(true)},this)};_.prototype.onsapnext=function(e){var t=this.getAggregation("tokenizer");if(e.isMarked()){return}var i=n.closestTo(document.activeElement);if(!i){return}if(t===i||t.$().find(i.$()).length>0){t.scrollToEnd();this.$().find("input").trigger("focus")}};_.prototype.onsapbackspace=function(e){var t=this.getValue();var i=this.getFocusDomRef()===document.activeElement;var o=this.getTokens();var n=o[o.length-1];if(!this.getEnabled()||!this.getEditable()){e.preventDefault();return}if(t===""&&i&&n&&e.srcControl===this){var s=o.filter(function(e){return e.getSelected()}).length===o.length;if(s){return this._deleteTokens(o,{keyCode:k.BACKSPACE})}n.focus();e.preventDefault()}};_.prototype.onsapdelete=function(e){if(!this.getEditable()){return}if(this.getValue()&&!c(this.getFocusDomRef())){return}if(e.isMarked("forwardFocusToParent")){this.focus()}};_.prototype.onsapright=function(e){const t=this.getAggregation("tokenizer").getTokens();if(!t.length){return}if(e.isMarked("forwardFocusToParent")){e.preventDefault()}};_.prototype.onkeydown=function(t){var i=this.getAggregation("tokenizer");e.prototype.onkeydown.apply(this,arguments);if(!this.getEnabled()){return}if(t.which===k.TAB){i.selectAllTokens(false)}if((t.ctrlKey||t.metaKey)&&t.which===k.A&&i.getTokens().length>0){i.focus();i.selectAllTokens(true);t.preventDefault()}if((t.ctrlKey||t.metaKey)&&(t.which===k.C||t.which===k.INSERT)){i._copy()}if((t.ctrlKey||t.metaKey)&&t.which===k.X||t.shiftKey&&t.which===k.DELETE){if(this.getEditable()){i._cut()}else{i._copy()}}if((t.ctrlKey||t.metaKey)&&t.which===k.I&&i.getTokens().length){i._togglePopup();t.preventDefault()}};_.prototype.onpaste=function(e){var i,o,n,s,r=[];if(this.getValueHelpOnly()){return}i=e.originalEvent.clipboardData.getData("text/plain");if(i.length&&i.endsWith("\r\n")){i=i.substring(0,i.lastIndexOf("\r\n"))}n=i.split(/\r\n|\r|\n|\t/g);s=y.getPastedDataAs2DArray(e.originalEvent);if(n.length<=1){return}const a=this.getMaxTokens();if(a){n=n.slice(0,a)}setTimeout(function(){if(n){if(this.fireEvent("_validateOnPaste",{texts:n,textRows:s},true)){var e="";for(o=0;o<n.length;o++){if(n[o]){var i=this._convertTextToToken(n[o],true);if(this._addUniqueToken(i)){r.push(i)}else{e=n[o]}}}this.updateDomValue(e);if(r.length>0){this.fireTokenUpdate({addedTokens:r,removedTokens:[],type:t.TokenUpdateType.Added});this.fireTokenChange({addedTokens:r,removedTokens:[],type:t.TokenChangeType.TokensChanged})}}if(r.length){this.cancelPendingSuggest()}}}.bind(this),0)};_.prototype._validationCallback=function(e,t){var i=this.getAggregation("tokenizer").getTokens().length;var o=this._getSuggestionsPopover();this._bIsValidating=false;if(t){this.setValue("");this._bTokenIsValidated=true;if(this.isMobileDevice()&&o&&o.getInput()&&e<i){o.getInput().setValue("")}}};_.prototype.onsapprevious=function(e){if(this._getIsSuggestionPopupOpen()){return}if(this._$input.cursorPos()===0){if(e.srcControl===this){t.prototype.onsapprevious.apply(this.getAggregation("tokenizer"),arguments)}}if(e.keyCode===k.ARROW_UP){e.preventDefault()}};_.prototype.onsaphome=function(i){if(!this.getFocusDomRef().selectionStart){t.prototype.onsaphome.apply(this.getAggregation("tokenizer"),arguments)}e.prototype.onsaphome.apply(this,arguments)};_.prototype.onsapend=function(t){if(t.isMarked("forwardFocusToParent")){this.focus()}e.prototype.onsapend.apply(this,arguments)};_.prototype.onsapenter=function(t){var i=this.getDOMValue(),o=this._getSuggestionsPopover(),n=o&&o.getFocusedListItem();e.prototype.onsapenter.apply(this,arguments);if(n&&n.isA("sap.m.GroupHeaderListItem")){return}var s=true,r=this.getAggregation("tokenizer");if(this._getIsSuggestionPopupOpen()){if(this._hasTabularSuggestions()){s=!this._getSuggestionsTable().getSelectedItem()}else{s=!this._getSuggestionsList().getSelectedItem()}}if(s&&!this.isComposingCharacter()){this._validateCurrentText()}if(t&&t.setMarked&&(this._bTokenIsValidated||i)){t.setMarked()}if(!this.getEditable()&&r.getHiddenTokensCount()&&t.target===this.getFocusDomRef()){r._togglePopup()}if(!f(r.getFocusDomRef(),document.activeElement)){this.focus()}};_.prototype.onsapfocusleave=function(t){var i=this._getSuggestionsPopoverPopup(),o=this.getAggregation("tokenizer"),s=o.getTokensPopup(),r=false,a=false,g=this.getDomRef()&&f(this.getDomRef(),document.activeElement),l,p,u;if(i&&i.isA("sap.m.Popover")){if(t.relatedControlId){p=n.getElementById(t.relatedControlId).getFocusDomRef();r=f(i.getFocusDomRef(),p);a=f(o.getFocusDomRef(),p);if(s){u=f(s.getFocusDomRef(),p)}}}e.prototype.onsapfocusleave.apply(this,arguments);if(this._bIsValidating||this._bValueHelpOpen){return}l=!r&&t.relatedControlId!==this.getId()&&!a;if(l&&(this.isMobileDevice()&&!this.getShowSuggestion()||!this.isMobileDevice())){this._validateCurrentText(true)}if(!this.isMobileDevice()&&this.getEditable()){if(g||r){return}}if(!u&&!a){s.isOpen()&&!this.isMobileDevice()&&o._togglePopup();o.setRenderMode(v.Narrow)}this._handleInnerVisibility()};_.prototype.ontap=function(t){const i=this.getAggregation("tokenizer");const o=t.target?.className&&t.target.className.indexOf("sapMTokenizerIndicator")>-1;if(o&&this.getEditable()){this._handleNMoreIndicatorPress()}if(document.activeElement===this._$input[0]||document.activeElement===i.getDomRef()){i.selectAllTokens(false)}if(t&&t.isMarked("tokenDeletePress")){return}if(!o){e.prototype.ontap.apply(this,arguments);this._getSuggestionsPopover()?.getInput()?.setValueHelpIconSrc("sap-icon://search")}};_.prototype.onfocusin=function(t){var i=this.getAggregation("tokenizer");this._deregisterTokenizerResizeHandler();this._bValueHelpOpen=false;if(t.target===this.getFocusDomRef()){e.prototype.onfocusin.apply(this,arguments);if(i.hasOneTruncatedToken()&&this.getEnabled()&&this.getEditable()){i.getTokens()[0].setSelected(false);!this.isMobileDevice()&&i.setFirstTokenTruncated(false)}}if(!this.isMobileDevice()&&this.getEditable()&&t.target===this.getDomRef("inner")&&!this._getIsSuggestionPopupOpen()){i.setRenderMode(v.Loose);this._setValueVisible(true)}this._registerResizeHandler()};_.prototype.onsapescape=function(t){var i=this.getAggregation("tokenizer"),o=i.getTokensPopup();this.getAggregation("tokenizer").selectAllTokens(false);this.selectText(0,0);if(o.isOpen()){i._togglePopup()}e.prototype.onsapescape.apply(this,arguments)};_.prototype._getIsSuggestionPopupOpen=function(){var e=this._getSuggestionsPopover(),t=this._getSuggestionsPopoverPopup();return e&&t&&t.isOpen()};_.prototype.setEditable=function(t){var i=this.getAggregation("tokenizer");t=this.validateProperty("editable",t);if(t===this.getEditable()){return this}if(e.prototype.setEditable){e.prototype.setEditable.apply(this,arguments)}i.setEditable(t);return this};_.prototype._findItem=function(e,t,i,o){if(!e){return}if(!(t&&t.length)){return}e=e.toLowerCase();var n=t.length;for(var s=0;s<n;s++){var r=t[s];var a=o(r);if(!a){continue}a=a.toLowerCase();if(a===e){return r}if(!i&&a.indexOf(e)===0){return r}}};_.prototype._getSuggestionItem=function(e,t){var i=null;var o=null;if(this._hasTabularSuggestions()){i=this.getSuggestionRows();o=this._findItem(e,i,t,function(e){var t=e.getCells();var i=null;if(t){var o;for(o=0;o<t.length;o++){if(t[o].getText){i=t[o].getText();break}}}return i})}else{i=this.getSuggestionItems();o=this._findItem(e,i,t,function(e){return e.getText()})}return o};_.prototype.clone=function(){var t;this.detachSuggestionItemSelected(this._onSuggestionItemSelected,this);this.detachLiveChange(this._onLiveChange,this);this.detachValueHelpRequest(this._onValueHelpRequested,this);t=e.prototype.clone.apply(this,arguments);this.attachSuggestionItemSelected(this._onSuggestionItemSelected,this);this.attachLiveChange(this._onLiveChange,this);this.attachValueHelpRequest(this._onValueHelpRequested,this);return t};_.getMetadata().forwardAggregation("tokens",{getter:function(){return this.getAggregation("tokenizer")},aggregation:"tokens",forwardBinding:true});_.prototype.getPopupAnchorDomRef=function(){return this.getDomRef("content")};_.prototype.setTokens=function(e){if(!Array.isArray(e)){return}this.removeAllTokens();e.forEach(function(e){a.addAPIParentInfoBegin(e,this,"tokens")},this);e.forEach(function(e){this.addToken(e)},this);e.forEach(function(e){a.addAPIParentInfoEnd(e)},this);this.fireTokenChange({type:t.TokenChangeType.TokensChanged,addedTokens:e,removedTokens:[]});return this};_.TokenChangeType={Added:"added",Removed:"removed",RemovedAll:"removedAll",TokensChanged:"tokensChanged"};_.prototype.getWaitForAsyncValidation=function(){return _.WaitForAsyncValidation};_.WaitForAsyncValidation="sap.m.MultiInput.WaitForAsyncValidation";_.prototype.getDomRefForValueStateMessage=_.prototype.getPopupAnchorDomRef;_.prototype.updateInputField=function(t){e.prototype.updateInputField.call(this,t);if(this.isMobileDevice()){this.updateInputFieldOnMobile()}else{this.updateInputFieldOnDesktop(t)}};_.prototype.updateInputFieldOnMobile=function(){var e=this._getSuggestionsPopover();if(e.getInput()){e.getInput().setDOMValue("")}};_.prototype.updateInputFieldOnDesktop=function(e){e=this._getInputValue(e);this.setDOMValue("");this.onChange(null,null,e)};_.prototype.onChange=function(e,t,i){t=t||this.getChangeEventParams();if(!this.getEditable()||!this.getEnabled()){return}var o=this._getInputValue(i);if(o===this.getLastValue()){this._bCheckDomValue=false;return}if(!this._bTokenIsValidated){this.setValue(o);o=this.getValue();this.setLastValue(o)}this.fireChangeEvent(o,t);return true};_.prototype.getAccessibilityInfo=function(){var t=this.getTokens().map(function(e){return e.getText()}).join(" ");var i=e.prototype.getAccessibilityInfo.apply(this,arguments);i.type=m.getText("ACC_CTR_TYPE_MULTIINPUT");i.description=(this.getValueDescriptionInfo()+" "+t).trim();return i};_.prototype.getValueDescriptionInfo=function(){var e=this.getTokens().length;var t=this.getDescription()||"";var i=this.getValue();if(i){return i}if(e>0){return t}else{return t?t:l.getResourceBundleFor("sap.m").getText("INPUTBASE_VALUE_EMPTY")}};_.prototype._decoratePopupInput=function(t){e.prototype._decoratePopupInput.apply(this,arguments);if(!t){return}if(!this._oPopupInputDelegate){this._oPopupInputDelegate={oninput:this._manageListsVisibility.bind(this,false),onsapenter:this._handleConfirmation.bind(this,false)}}t.addEventDelegate(this._oPopupInputDelegate,this);return t};_.prototype._hasShowSelectedButton=function(){return true};_.prototype.forwardEventHandlersToSuggPopover=function(e){e.setShowSelectedPressHandler(this._handleShowSelectedPress.bind(this));e.setOkPressHandler(this._handleConfirmation.bind(this,true));e.setCancelPressHandler(this._revertPopupSelection.bind(this))};_.prototype._handleConfirmation=function(e,t){var i=this._getSuggestionsPopover().getInput();if(e||!e&&i.getValue()){this._closeSuggestionPopup()}this._validateCurrentText();this._setValueVisible(false);this.onChange(t,null,i.getValue())};_.prototype._handleShowSelectedPress=function(e){this._bShowListWithTokens=e.getSource().getPressed();this._manageListsVisibility(this._bShowListWithTokens)};_.prototype._onBeforeOpenTokensPicker=function(){this._setValueVisible(false);this._manageListsVisibility(true)};_.prototype._onAfterCloseTokensPicker=function(){var e=this.getAggregation("tokenizer");if(document.activeElement!==this.getDomRef("inner")&&!e.checkFocus()){e.setRenderMode(v.Narrow)}};_.prototype.getDialogTitle=function(){var e=this._getSuggestionsPopoverPopup(),t=e&&e.getCustomHeader();if(t){return t.getContentMiddle()[0]}return null};_.prototype._updatePickerHeaderTitle=function(){var e,t;t=this.getLabels();if(t.length){e=t[0];if(e&&typeof e.getText==="function"){this.getDialogTitle().setText(e.getText())}}else{this.getDialogTitle().setText(m.getText("COMBOBOX_PICKER_TITLE"))}};_.prototype._getSuggestionsList=function(){var e=this._getSuggestionsPopover();return e&&e.getItemsContainer()};_.prototype._getSuggestionsPopoverPopup=function(){return this._oSuggestionPopup};_.prototype._manageListsVisibility=function(e){if(!this.isMobileDevice()){return}this.getAggregation("tokenizer")._getTokensList().setVisible(e);this._getSuggestionsList()&&this._getSuggestionsList().setVisible(!e);this._getSuggestionsPopover().getFilterSelectedButton().setPressed(e)};_.prototype._handleNMoreAccessibility=function(){var e=T.getStaticId("sap.m","MULTICOMBOBOX_OPEN_NMORE_POPOVER"),t=this.getFocusDomRef(),i=t&&t.getAttribute("aria-describedby"),o=i?i.split(" "):[],n=o.indexOf(e),s=this.getEnabled(),r=!this.getEditable()&&this.getAggregation("tokenizer").getHiddenTokensCount();if(r&&n===-1){o.push(e);s&&this.getFocusDomRef().setAttribute("aria-keyshortcuts","Enter")}else if(n!==-1&&!r){o.splice(n,1);this.getFocusDomRef().removeAttribute("aria-keyshortcuts")}if(t&&o.length){t.setAttribute("aria-describedby",o.join(" ").trim())}};_.prototype._handleNMoreIndicatorPress=function(){const e=this.getAggregation("tokenizer");e._bIsOpenedByNMoreIndicator=true;e._togglePopup()};_.prototype.shouldSuggetionsPopoverOpenOnMobile=function(e){var t=this.getAggregation("tokenizer");return this.isMobileDevice()&&this.getEditable()&&this.getEnabled()&&(this.getShowSuggestion()||t.getHiddenTokensCount()||t.hasOneTruncatedToken())&&!this._bClearButtonPressed&&e.target.id!==this.getId()+"-vhi"};_.prototype._calculateSpaceForTokenizer=function(){var e=this.getDomRef();if(e){var t,i=this.$().find(".sapMInputDescriptionWrapper"),o=this.$().find(".sapMInputBaseInner"),n=e.offsetWidth||0,s=i.width()||0,r=this._calculateIconsSpace(),a=["min-width","padding-right","padding-left"],g=a.reduce(function(e,t){return e+(parseInt(o.css(t))||0)},0);t=n-(r+g+s);t=t<0?0:t;return t+"px"}else{return null}};_.prototype._syncInputWidth=function(e){var t=this.getDomRef("inner"),i,o;if(!t||e&&!e.getDomRef()){return}i=this._calculateIconsSpace();o=e.getDomRef().scrollWidth;t.style.width="calc(100% - "+Math.floor(i+o)+"px"};_.prototype.isValueHelpOnlyOpener=function(e){return[this._$input[0],this._getValueHelpIcon().getDomRef()].indexOf(e)>-1};_.prototype._shouldTriggerSuggest=function(){var t=e.prototype._shouldTriggerSuggest.apply(this,arguments);return t&&!this._bShowListWithTokens};_.prototype.addValidator=function(e){if(typeof e==="function"){this._aTokenValidators.push(e)}};_.prototype.removeValidator=function(e){var t=this._aTokenValidators.indexOf(e);if(t!==-1){this._aTokenValidators.splice(t,1)}};_.prototype.removeAllValidators=function(){this._aTokenValidators=[]};_.prototype.getValidators=function(){return this._aTokenValidators};_.prototype.addValidateToken=function(e,i){var o=this._validateToken(e,i),n=this._addUniqueToken(o,e.validationCallback);if(n){this.fireTokenUpdate({addedTokens:[o],removedTokens:[],type:t.TokenUpdateType.Added});this.fireTokenChange({addedTokens:[o],removedTokens:[],type:t.TokenChangeType.TokensChanged})}};_.prototype._validateToken=function(e,t){var i=e.token,o=e.validationCallback,n=e.suggestionObject,s=i&&i.getText(),r=s?s:e.text,a;t=t?t:this._aTokenValidators;a=t.length;if(!a){if(!i&&o){o(false)}return i}for(var g=0;g<a;g++){i=t[g]({text:r,suggestedToken:i,suggestionObject:n,asyncCallback:this._getAsyncValidationCallback(t,g,r,n,o)});if(!i){if(o){o(false)}return null}if(i===this.getWaitForAsyncValidation()){return null}}return i};_.prototype._addUniqueToken=function(e,t){if(!e){return false}var i=!this._tokenExists(e);i&&this.addToken(e);if(t){t(i)}return i};_.prototype._tokenExists=function(e){var t=this.getTokens(),i=t.length,o=e&&e.getKey();if(!o){return false}for(var n=0;n<i;n++){if(t[n].getKey()===o){return true}}return false};_.prototype._convertTextToToken=function(e,t){var i=this.getAggregation("tokenizer"),o=i.getTokens().length,n=this._configureTokenOptions(e,false,t),s=n.text,r=n.item,a=n.token;if(!s){return null}return this._validateToken({text:s,token:a,suggestionObject:r,validationCallback:this._validationCallback.bind(this,o)})};_.prototype._validateCurrentText=function(e){var t=this.getAggregation("tokenizer"),i=t.getTokens().length,o=this._configureTokenOptions(this.getValue(),e),n=o.text,s=o.item,a=o.token;if(!n){return null}if(s){this._bTokenIsAdded=true}if(!this.getMaxTokens()||this.getTokens().length<this.getMaxTokens()){this._bIsValidating=true;this.addValidateToken({text:r.escapeSettingsValue(n),token:a,suggestionObject:s,validationCallback:this._validationCallback.bind(this,i)})}};_.prototype._configureTokenOptions=function(e,t,o){var n,s;if(e&&this.getEditable()){e=e.trim()}if(e&&(t||o||this._getIsSuggestionPopupOpen())){if(this._hasTabularSuggestions()){n=this._getSuggestionsTable().getSelectedItem()}else{n=this._getSuggestionItem(e,t)}}if(n&&n.getText&&n.getKey){s=new i({text:r.escapeSettingsValue(n.getText()),key:n.getKey()})}return{text:e,item:n,token:s}};_.prototype._getAsyncValidationCallback=function(e,t,i,o,n){var s=this;return function(r){if(r){r=s.addValidateToken({text:i,token:r,suggestionObject:o,validationCallback:n},e.slice(t+1))}else{n&&n(false)}}};_.prototype.getFormFormattedValue=function(){return this.getTokens().map(function(e){return e.getText()}).join(", ")};_.prototype.getFormValueProperty=function(){return"_semanticFormValue"};_.prototype.getFormObservingProperties=function(){return["_semanticFormValue"]};_.prototype.updateFormValueProperty=function(){this.setProperty("_semanticFormValue",this.getFormFormattedValue(),true)};return _});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/MultiInputRenderer", ["./InputRenderer","sap/ui/core/Lib","sap/ui/core/Renderer"],function(e,t,n){"use strict";var r=n.extend(e);r.apiVersion=2;r.prependInnerContent=function(e,t){e.renderControl(t.getAggregation("tokenizer"))};r.addOuterClasses=function(t,n){e.addOuterClasses.apply(this,arguments);t.class("sapMMultiInput");if(n.getTokens().length>0){t.class("sapMMultiInputHasTokens")}};r.getAriaDescribedBy=function(t){var n=e.getAriaDescribedBy.apply(this,arguments),r=t.getAggregation("tokenizer")&&t.getAggregation("tokenizer").getTokensInfoId();if(n){n=n+" "+r}else{n=r}return n};r.getAccessibilityState=function(n){var r=e.getAccessibilityState.apply(this,arguments),i=t.getResourceBundleFor("sap.m");r.roledescription=i.getText("MULTIINPUT_ARIA_ROLE_DESCRIPTION");return r};return r},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/Panel", ["./library","sap/ui/core/Control","sap/ui/core/ControlBehavior","sap/ui/core/IconPool","sap/ui/Device","./PanelRenderer","sap/ui/core/Lib","sap/m/Button"],function(e,t,a,n,o,i,r,s){"use strict";var p=e.PanelAccessibleRole;var l=e.BackgroundDesign;var d=e.ButtonType;var u=t.extend("sap.m.Panel",{metadata:{library:"sap.m",properties:{headerText:{type:"string",group:"Data",defaultValue:""},width:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"auto"},expandable:{type:"boolean",group:"Appearance",defaultValue:false},expanded:{type:"boolean",group:"Appearance",defaultValue:false},expandAnimation:{type:"boolean",group:"Behavior",defaultValue:true},backgroundDesign:{type:"sap.m.BackgroundDesign",group:"Appearance",defaultValue:l.Translucent},accessibleRole:{type:"sap.m.PanelAccessibleRole",group:"Accessibility",defaultValue:p.Form},stickyHeader:{type:"boolean",group:"Appearance",defaultValue:false}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"},headerToolbar:{type:"sap.m.Toolbar",multiple:false},infoToolbar:{type:"sap.m.Toolbar",multiple:false}},events:{expand:{parameters:{expand:{type:"boolean"},triggeredByInteraction:{type:"boolean"}}}},dnd:{draggable:true,droppable:true},designtime:"sap/m/designtime/Panel.designtime"},renderer:i});u.prototype.init=function(){this._bInteractiveExpand=false;this.data("sap-ui-fastnavgroup","true",true)};u.prototype.onThemeChanged=function(){this._setContentHeight()};u.prototype.setExpanded=function(e){var t=this;if(e===this.getExpanded()){return this}this.setProperty("expanded",e,true);this.addStyleClass("sapMPanelAnimating");if(!this.getExpandable()){return this}this._toggleExpandCollapse(function(){t.removeStyleClass("sapMPanelAnimating");t.invalidate()});this._toggleButtonIcon(e);this.fireExpand({expand:e,triggeredByInteraction:this._bInteractiveExpand});this._bInteractiveExpand=false;return this};u.prototype.onBeforeRendering=function(){if(this.getExpandable()&&!this._oExpandButton){this._oExpandButton=this._createExpandButton()}if(a.isAccessibilityEnabled()){this.$().attr("role",this.getAccessibleRole().toLowerCase())}};u.prototype.onAfterRendering=function(){var e=this.$(),t=this.getDomRef("content"),a,n=this.getDomRef();if(n){n.style.width=this.getWidth();a=this.getHeight();n.style.height=a;if(parseFloat(a)!=0){n.querySelector(".sapMPanelContent").style.height=a}}this._setContentHeight();if(this.getExpandable()){this.getHeaderToolbar()&&t&&this._oExpandButton.$().attr("aria-controls",t.id);if(!this.getExpanded()){e.children(".sapMPanelExpandablePart").css("display","none")}}};u.prototype.ontap=function(e){var t=this.getDomRef(),a=t&&t.querySelector(".sapMPanelWrappingDiv");if(!this.getExpandable()||this.getHeaderToolbar()||!a){return}if(a.contains(e.target)){this._bInteractiveExpand=true;this.setExpanded(!this.getExpanded())}};u.prototype.onsapspace=function(e){var t=[this.getDomRef().querySelector(".sapMPanelWrappingDiv"),this.getDomRef("expandButton")];if(t.includes(e.target)){e.preventDefault()}if(e.originalEvent.repeat){return}this.ontap(e)};u.prototype.onsapenter=function(e){this.ontap(e)};u.prototype.exit=function(){if(this._oExpandButton){this._oExpandButton.destroy();this._oExpandButton=null}};u.prototype._createExpandButton=function(){var e=this,t=this.getExpanded()?n.getIconURI("slim-arrow-down"):n.getIconURI("slim-arrow-right"),a=r.getResourceBundleFor("sap.m").getText("PANEL_ICON"),o;if(!this.getHeaderToolbar()){return n.createControlByURI({src:t,tooltip:a})}o=new s(this.getId()+"-expandButton",{icon:t,tooltip:a,type:d.Transparent,press:function(){e._bInteractiveExpand=true;e.setExpanded(!e.getExpanded())}}).addEventDelegate({onAfterRendering:function(){o.$().attr("aria-expanded",this.getExpanded())}.bind(this)},this);this.addDependent(o);return o};u.prototype._toggleButtonIcon=function(e){var t=e?n.getIconURI("slim-arrow-down"):n.getIconURI("slim-arrow-right");if(!this._oExpandButton){return}if(this.getHeaderToolbar()){this._oExpandButton.setIcon(t)}else{this._oExpandButton.setSrc(t)}};u.prototype._setContentHeight=function(){var e,t=this.getDomRef(),a=t&&t.querySelector(".sapMPanelContent");if(this.getHeight()==="auto"||!a){return}e="calc("+"100%"+" - "+a.offsetTop+"px)";a.style.height=e};u.prototype._toggleExpandCollapse=function(e){var t={complete:e};if(!this.getExpandAnimation()){t.duration=0}this.$().children(".sapMPanelExpandablePart").slideToggle(t)};u.prototype._getLabellingElementId=function(){var e=this.getHeaderToolbar(),t=this.getHeaderText(),a=null;if(e){a=e.getTitleId()}else if(t){a=this.getId()+"-header"}return a};return u});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/PanelRenderer", ["sap/m/library","sap/ui/Device"],function(e,t){"use strict";var a=e.ToolbarDesign;var n={apiVersion:2};n.render=function(e,t){this.startPanel(e,t);this.renderHeader(e,t);this.renderContent(e,t);this.endPanel(e)};n.startPanel=function(e,t){var a=t.getExpandable(),n=t.getStickyHeader(),r={role:t.getAccessibleRole().toLowerCase()},i=t.getExpanded();e.openStart("div",t);e.class("sapMPanel");if(n){e.class("sapMPanelHasStickyHeader")}if(a){e.class("sapMPanelExpandable")}if(i){e.class("sapMPanelExpanded")}e.style("width",t.getWidth());e.style("height",t.getHeight());if(t.getHeaderToolbar()||!a){r.labelledby=t._getLabellingElementId()}e.accessibilityState(t,r);e.openEnd()};n.renderHeader=function(e,t){var n=t.getExpandable(),r=t.getExpanded(),i=t.getStickyHeader(),s=t.getHeaderToolbar(),d;e.openStart("div");e.class("sapMPanelHeadingDiv");if(i){e.class("sapMPanelStickyHeadingDiv")}if(!s){e.attr("role","heading");e.attr("aria-level","2")}e.openEnd();if(n){e.openStart("div");if(s){d="sapMPanelWrappingDivTb"}else{d="sapMPanelWrappingDiv";this.writeHeaderAccessibility(e,t)}e.class(d);if(r){e.class(d+"Expanded")}e.openEnd();if(n){e.renderControl(t._oExpandButton)}}var l=t.getHeaderText();if(s){s.setDesign(a.Transparent,true);s.addStyleClass("sapMPanelHeaderTB");e.renderControl(s)}else if(l||n){e.openStart("div",t.getId()+"-header");e.class("sapMPanelHdr");e.openEnd();e.text(l);e.close("div")}if(n){e.close("div")}e.close("div");var o=t.getInfoToolbar();if(o){o.setDesign(a.Info,true);o.addStyleClass("sapMPanelInfoTB");if(n){e.openStart("div");e.class("sapMPanelExpandablePart");e.openEnd();e.renderControl(o);e.close("div")}else{e.renderControl(o)}}};n.writeHeaderAccessibility=function(e,t){e.attr("tabindex",0);e.attr("role","button");e.attr("aria-expanded",t.getExpanded());e.attr("aria-controls",t.getId()+"-content")};n.renderContent=function(e,t){this.startContent(e,t);this.renderChildren(e,t.getContent());this.endContent(e)};n.startContent=function(e,a){e.openStart("div",a.getId()+"-content");e.class("sapMPanelContent");e.class("sapMPanelBG"+a.getBackgroundDesign());if(a.getExpandable()){e.class("sapMPanelExpandablePart")}if(t.browser.firefox){e.attr("tabindex","-1")}e.openEnd()};n.renderChildren=function(e,t){t.forEach(e.renderControl,e)};n.endContent=function(e){e.close("div")};n.endPanel=function(e){e.close("div")};return n},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/ScrollContainer", ["./library","sap/base/i18n/Localization","sap/ui/core/Control","sap/ui/core/delegate/ScrollEnablement","sap/ui/core/Element","./ScrollContainerRenderer","sap/ui/dom/denormalizeScrollBeginRTL"],function(e,o,t,r,l,i,n){"use strict";var a=t.extend("sap.m.ScrollContainer",{metadata:{library:"sap.m",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"auto"},height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"auto"},horizontal:{type:"boolean",group:"Behavior",defaultValue:true},vertical:{type:"boolean",group:"Behavior",defaultValue:false},focusable:{type:"boolean",group:"Behavior",defaultValue:false}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},dnd:{draggable:false,droppable:true},designtime:"sap/m/designtime/ScrollContainer.designtime"},renderer:i});a.prototype.init=function(){this._oScroller=new r(this,this.getId()+"-scroll",{horizontal:true,vertical:false})};a.prototype.onBeforeRendering=function(){this._oScroller.setHorizontal(this.getHorizontal());this._oScroller.setVertical(this.getVertical())};a.prototype.exit=function(){if(this._oScroller){this._oScroller.destroy();this._oScroller=null}};a.prototype.getScrollDelegate=function(){return this._oScroller};a.prototype.scrollTo=function(e,t,r){if(this._oScroller){var l=this.getDomRef();if(l){if(o.getRTL()){e=n(e,l)}this._oScroller.scrollTo(e,t,r)}else{this._oScroller._scrollX=e;this._oScroller._scrollY=t}}return this};a.prototype.scrollToElement=function(e,o){if(e instanceof l){e=e.getDomRef()}if(this._oScroller){this._oScroller.scrollToElement(e,o)}return this};return a});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/ScrollContainerRenderer", [],function(){"use strict";var t={apiVersion:2};t.render=function(t,e){t.openStart("div",e).style("width",e.getWidth()).style("height",e.getHeight());if(e.getVertical()){if(!e.getHorizontal()){t.class("sapMScrollContV")}else{t.class("sapMScrollContVH")}}else{t.class("sapMScrollContH")}t.class("sapMScrollCont");var l=e.getTooltip_AsString();if(l){t.attr("title",l)}if(e.getFocusable()){t.attr("tabindex","0")}t.openEnd();t.openStart("div",e.getId()+"-scroll").class("sapMScrollContScroll").openEnd();var o=e.getContent(),r=o.length;for(var s=0;s<r;s++){t.renderControl(o[s])}t.close("div");t.close("div")};return t},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/Switch", ["./library","sap/base/i18n/Localization","sap/ui/core/Control","sap/ui/core/EnabledPropagator","sap/ui/core/IconPool","sap/ui/core/Lib","sap/ui/core/theming/Parameters","sap/ui/events/KeyCodes","./SwitchRenderer","sap/base/assert"],function(t,e,i,s,o,n,a,r,p,u){"use strict";var c=t.touch;var h=t.SwitchType;var _=i.extend("sap.m.Switch",{metadata:{interfaces:["sap.ui.core.IFormContent","sap.m.IOverflowToolbarContent","sap.m.IToolbarInteractiveControl"],library:"sap.m",properties:{state:{type:"boolean",group:"Misc",defaultValue:false},customTextOn:{type:"string",group:"Misc",defaultValue:""},customTextOff:{type:"string",group:"Misc",defaultValue:""},enabled:{type:"boolean",group:"Data",defaultValue:true},name:{type:"string",group:"Misc",defaultValue:""},type:{type:"sap.m.SwitchType",group:"Appearance",defaultValue:h.Default}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{change:{parameters:{state:{type:"boolean"}}}},designtime:"sap/m/designtime/Switch.designtime"},renderer:p});o.insertFontFaceStyle();s.apply(_.prototype,[true]);_.prototype._slide=function(t){if(t>_._OFFPOSITION){t=_._OFFPOSITION}else if(t<_._ONPOSITION){t=_._ONPOSITION}if(t>this._iNoLabelFix){t=this._iNoLabelFix}if(this._iCurrentPosition===t){return}this._iCurrentPosition=t;this.getDomRef("inner").style[e.getRTL()?"right":"left"]=t+"px";this._setTempState(Math.abs(t)<_._SWAPPOINT)};_.prototype._resetSlide=function(){this.getDomRef("inner").style.cssText=""};_.prototype._setTempState=function(t){if(this._bTempState===t){return}this._bTempState=t;this.getDomRef("handle").setAttribute("data-sap-ui-swt",t?this._sOn:this._sOff)};_.prototype.getInvisibleElementId=function(){return this.getId()+"-invisible"};_.prototype.getInvisibleElementText=function(t){var e=n.getResourceBundleFor("sap.m");var i="";switch(this.getType()){case h.Default:i=t?this.getCustomTextOn().trim():this.getCustomTextOff().trim();break;case h.AcceptReject:i=t?e.getText("SWITCH_ARIA_ACCEPT"):e.getText("SWITCH_ARIA_REJECT");break}return i};var l=Object.assign({_sap_m_Switch_OnPosition:-32,_sap_m_Switch_OffPosition:0},a.get({name:["_sap_m_Switch_OnPosition","_sap_m_Switch_OffPosition"],callback:function(t){_._ONPOSITION=Number(t["_sap_m_Switch_OnPosition"]);_._OFFPOSITION=Number(t["_sap_m_Switch_OffPosition"]);_._SWAPPOINT=Math.abs((_._ONPOSITION-_._OFFPOSITION)/2)}}));_._ONPOSITION=Number(l["_sap_m_Switch_OnPosition"]);_._OFFPOSITION=Number(l["_sap_m_Switch_OffPosition"]);_._SWAPPOINT=Math.abs((_._ONPOSITION-_._OFFPOSITION)/2);_.prototype.onBeforeRendering=function(){var t=n.getResourceBundleFor("sap.m");this._sOn=this.getCustomTextOn()||t.getText("SWITCH_ON");this._sOff=this.getCustomTextOff()||t.getText("SWITCH_OFF")};_.prototype.ontouchstart=function(t){var e=t.targetTouches[0],i=this.getRenderer().CSS_CLASS,s=this.$("inner");t.setMarked();if(c.countContained(t.touches,this.getId())>1||!this.getEnabled()||t.button){return}this._iActiveTouchId=e.identifier;this._bTempState=this.getState();this._iStartPressPosX=e.pageX;this._iPosition=s.position().left;this._bDragging=false;setTimeout(this["focus"].bind(this),0);this.$("switch").addClass(i+"Pressed");this._iNoLabelFix=parseInt(getComputedStyle(this.getDomRef("switch")).outlineOffset)};_.prototype.ontouchmove=function(t){t.setMarked();t.preventDefault();var i,s,o=c;if(!this.getEnabled()||t.button){return}u(o.find(t.touches,this._iActiveTouchId),"missing touchend");i=o.find(t.changedTouches,this._iActiveTouchId);if(!i||Math.abs(i.pageX-this._iStartPressPosX)<6){return}this._bDragging=true;s=(this._iStartPressPosX-i.pageX)*-1+this._iPosition;if(e.getRTL()){s=-s}this._slide(s)};_.prototype.ontouchend=function(t){t.setMarked();var e,i=c;if(!this.getEnabled()||t.button){return}u(this._iActiveTouchId!==undefined,"expect to already be touching");e=i.find(t.changedTouches,this._iActiveTouchId);if(e){u(!i.find(t.touches,this._iActiveTouchId),"touchend still active");if(!this._updateStateAndNotify()){this.$("switch").removeClass(this.getRenderer().CSS_CLASS+"Pressed");this._resetSlide()}}};_.prototype.ontouchcancel=_.prototype.ontouchend;_.prototype._handleSpaceOrEnter=function(t){if(this.getEnabled()){t.setMarked();if(!this._bDragging){this._updateStateAndNotify()}}};_.prototype.onsapspace=function(t){t.preventDefault()};_.prototype.onkeyup=function(t){if(t.which===r.SPACE){this._handleSpaceOrEnter(t)}};_.prototype.onsapenter=_.prototype._handleSpaceOrEnter;_.prototype._updateStateAndNotify=function(){var t=this.getState(),e;this.setState(this._bDragging?this._bTempState:!t);e=t!==this.getState();if(e){this.fireChange({state:this.getState()})}this._bDragging=false;return e};_.prototype.getAccessibilityInfo=function(){var t=n.getResourceBundleFor("sap.m"),e=this._getAccDescription();return{role:"switch",type:t.getText("ACC_CTR_TYPE_SWITCH"),description:e,focusable:this.getEnabled(),enabled:this.getEnabled()}};_.prototype.getOverflowToolbarConfig=function(){return{propsUnrelatedToSize:["enabled","state"]}};_.prototype._getToolbarInteractive=function(){return true};_.prototype._getAccDescription=function(){var t=this.getState(),e=n.getResourceBundleFor("sap.m"),i=t?e.getText("SWITCH_ON"):e.getText("SWITCH_OFF"),s=this.getInvisibleElementText(t);return i+(s?", "+s:"")};return _});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/SwitchRenderer", ["sap/ui/Device","sap/m/library","sap/ui/core/Configuration","sap/ui/core/ControlBehavior"],function(e,t,i,n){"use strict";var a=t.SwitchType;var s={apiVersion:2};s.CSS_CLASS="sapMSwt";s.render=function(t,a){var l=a.getState(),d=l?a._sOn:a._sOff,r=a.getTooltip_AsString(),o=a.getEnabled(),c=a.getName(),p=n.isAccessibilityEnabled(),f=n.getAnimationMode(),S=s.CSS_CLASS;t.openStart("div",a);t.class(S+"Cont");if(!o){t.class(S+"ContDisabled")}if(o){t.attr("tabindex","0")}if(r){t.attr("title",r)}if(p){this.writeAccessibilityState(t,a)}t.openEnd();t.openStart("div",a.getId()+"-switch");t.attr("aria-hidden","true");t.class(S);if(f!==i.AnimationMode.none&&f!==i.AnimationMode.minimal){t.class(S+"Trans")}t.class(l?S+"On":S+"Off");t.class(S+a.getType());if(e.system.desktop&&o){t.class(S+"Hoverable")}if(!o){t.class(S+"Disabled")}if(a._sOn===" "&&a._sOff===" "){t.class(S+"NoLabel")}t.openEnd();t.openStart("div",a.getId()+"-inner");t.class(S+"Inner");t.openEnd();this.renderText(t,a);this.renderHandle(t,a,d);t.close("div");t.close("div");if(c){this.renderCheckbox(t,a,d)}if(p){this.renderInvisibleElement(t,a,{id:a.getInvisibleElementId(),text:a.getInvisibleElementText(l)})}t.close("div")};s.renderText=function(e,t){var i=s.CSS_CLASS,n=t.getType()===a.Default;e.openStart("div",t.getId()+"-texton");e.class(i+"Text");e.class(i+"TextOn");e.openEnd();e.openStart("span");e.class(i+"Label");e.class(i+"LabelOn");e.openEnd();if(n){e.text(t._sOn)}e.close("span");e.close("div");e.openStart("div",t.getId()+"-textoff");e.class(i+"Text");e.class(i+"TextOff");e.openEnd();e.openStart("span");e.class(i+"Label");e.class(i+"LabelOff");e.openEnd();if(n){e.text(t._sOff)}e.close("span");e.close("div")};s.renderHandle=function(e,t,i){var n=s.CSS_CLASS;e.openStart("div",t.getId()+"-handle");e.attr("data-sap-ui-swt",i);e.class(n+"Handle");e.openEnd();e.close("div")};s.renderCheckbox=function(e,t,i){e.voidStart("input",t.getId()+"-input");e.attr("type","checkbox");e.attr("name",t.getName());e.attr("value",i);if(t.getState()){e.attr("checked","checked")}if(!t.getEnabled()){e.attr("disabled","disabled")}e.voidEnd()};s.writeAccessibilityState=function(e,t){var i=t.getAriaLabelledBy(),n;if(i){i={value:t.getInvisibleElementId(),append:true}}n={role:"switch",checked:t.getState(),labelledby:i};e.accessibilityState(t,n)};s.renderInvisibleElement=function(e,t,i){e.openStart("span",i.id);e.attr("aria-hidden","true");e.class("sapUiInvisibleText");e.openEnd();e.text(i.text);e.close("span")};return s},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/Token", ["./library","sap/ui/core/Control","sap/ui/core/Lib","sap/ui/core/library","sap/ui/core/Icon","./TokenRenderer","sap/ui/events/KeyCodes"],function(e,t,i,r,o,a,n){"use strict";var s=r.TextDirection;var p=t.extend("sap.m.Token",{metadata:{library:"sap.m",properties:{selected:{type:"boolean",group:"Misc",defaultValue:false},key:{type:"string",group:"Data",defaultValue:""},text:{type:"string",group:"Data",defaultValue:""},editable:{type:"boolean",group:"Misc",defaultValue:true},textDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:s.Inherit},editableParent:{type:"boolean",group:"Behavior",defaultValue:true,visibility:"hidden"},truncated:{type:"boolean",group:"Appearance",defaultValue:false,visibility:"hidden"},posinset:{type:"int",visibility:"hidden"},setsize:{type:"int",visibility:"hidden"}},aggregations:{deleteIcon:{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"}},associations:{ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{delete:{enableEventBubbling:true},press:{},select:{},deselect:{}}},renderer:a});p.prototype.init=function(){var e=new o({id:this.getId()+"-icon",src:"sap-icon://decline",noTabStop:true,press:this._fireDeleteToken.bind(this),tooltip:i.getResourceBundleFor("sap.m").getText("TOKEN_ICON_TOOLTIP")});e.addStyleClass("sapMTokenIcon");e.setUseIconTooltip(false);this.setAggregation("deleteIcon",e)};p.prototype.ontouchstart=function(e){if(e.target.id===this.getId()+"-icon"){e.preventDefault()}};p.prototype._getTooltip=function(e,t){return e.getTooltip_AsString()};p.prototype._onTokenPress=function(e){var t=this.getSelected(),i=e.ctrlKey||e.metaKey,r=!t;if(i||e.which===n.SPACE){r=!t}this.setSelected(r);this.firePress();if(t!==r){if(r){this.fireSelect()}else{this.fireDeselect()}}if(this.getSelected()){this.focus()}};p.prototype.ontap=function(e){var t=this.getAggregation("deleteIcon");if(t&&e.target.id===t.getId()){e.setMark("tokenDeletePress",true);return}e.setMark("tokenTap",this);this._onTokenPress(e)};p.prototype._fireDeleteToken=function(e,t,i){if(this.getEditable()&&this.getProperty("editableParent")){this.fireDelete({token:this,byKeyboard:t,backspace:i})}e.preventDefault()};p.prototype.onsapspace=function(e){this._onTokenPress(e);if(e){e.preventDefault();e.stopPropagation()}};p.prototype.onkeydown=function(e){if((e.ctrlKey||e.metaKey)&&e.which===n.SPACE){this.onsapspace(e);e.preventDefault()}};p.prototype.getTruncated=function(){return this.getProperty("truncated")};p.prototype.setTruncated=function(e){return this.setProperty("truncated",e)};return p});
/*!

* OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.

*/
sap.ui.predefine("sap/m/TokenRenderer", ["sap/ui/core/library","sap/ui/core/InvisibleText"],function(e,t){"use strict";var r=e.TextDirection;var a={apiVersion:2};a.render=function(e,r){var i=r._getTooltip(r,r.getEditable()&&r.getProperty("editableParent"));var n=r.getAggregation("deleteIcon");var s=[];var o={role:"option"};var d=r.getProperty("posinset");var l=r.getProperty("setsize");e.openStart("div",r).class("sapMToken");this._setAttributes(e,r);if(r.getSelected()){e.class("sapMTokenSelected")}if(d!==undefined){e.attr("aria-posinset",r.getProperty("posinset"))}if(l!==undefined){e.attr("aria-setsize",r.getProperty("setsize"))}if(!r.getEditable()){e.class("sapMTokenReadOnly");o.readonly=null}if(r.getTruncated()){e.class("sapMTokenTruncated")}if(i){e.attr("title",i)}s.push(t.getStaticId("sap.m","TOKEN_ARIA_LABEL"));if(r.getEditable()&&r.getProperty("editableParent")){s.push(t.getStaticId("sap.m","TOKEN_ARIA_DELETABLE"))}e.attr("aria-selected",r.getSelected());o.describedby={value:s.join(" "),append:true};e.accessibilityState(r,o);e.openEnd();a._renderInnerControl(e,r);if(r.getEditable()&&n){e.renderControl(n)}e.close("div")};a._renderInnerControl=function(e,t){var a=t.getTextDirection();e.openStart("span").class("sapMTokenText");if(a!==r.Inherit){e.attr("dir",a.toLowerCase())}e.openEnd();var i=t.getText();if(i){e.text(i)}e.close("span")};a._setAttributes=function(e,t){e.attr("tabindex","-1")};return a},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/Tokenizer", ["./library","sap/base/i18n/Localization","sap/m/Button","sap/m/List","sap/m/StandardListItem","sap/m/ResponsivePopover","sap/ui/core/ControlBehavior","sap/ui/core/Control","sap/ui/core/Element","sap/ui/core/Lib","sap/ui/core/delegate/ScrollEnablement","sap/ui/base/ManagedObjectObserver","sap/ui/Device","sap/ui/core/InvisibleText","sap/ui/core/ResizeHandler","./TokenizerRenderer","sap/ui/dom/containsOrEquals","sap/ui/events/KeyCodes","sap/base/Log","sap/ui/core/Theming","sap/ui/core/theming/Parameters","sap/ui/dom/jquery/scrollLeftRTL"],function(e,t,o,i,n,s,r,a,l,d,h,p,u,c,f,g,T,k,_,m,y){"use strict";var v="sapUiNoContentPadding";var b="sapMTokenizerTokensPopup";var I=e.TokenizerRenderMode;var R=e.PlacementType;var S=e.ListMode;var M=e.ListType;var E=e.ButtonType;var C=a.extend("sap.m.Tokenizer",{metadata:{library:"sap.m",properties:{editable:{type:"boolean",group:"Misc",defaultValue:true},enabled:{type:"boolean",group:"Misc",defaultValue:true},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},maxWidth:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"},renderMode:{type:"string",group:"Misc",defaultValue:I.Narrow},hiddenTokensCount:{type:"int",group:"Misc",defaultValue:0,visibility:"hidden"},opener:{type:"string",multiple:false,visibility:"hidden"}},defaultAggregation:"tokens",aggregations:{tokens:{type:"sap.m.Token",multiple:true,singularName:"token"},_tokensInfo:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"}},associations:{ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{tokenChange:{deprecated:true,parameters:{type:{type:"string"},token:{type:"sap.m.Token"},tokens:{type:"sap.m.Token[]"},addedTokens:{type:"sap.m.Token[]"},removedTokens:{type:"sap.m.Token[]"}}},tokenUpdate:{deprecated:true,allowPreventDefault:true,parameters:{type:{type:"string"},addedTokens:{type:"sap.m.Token[]"},removedTokens:{type:"sap.m.Token[]"}}},tokenDelete:{parameters:{tokens:{type:"sap.m.Token[]"},keyCode:{type:"number"}}},renderModeChange:{parameters:{renderMode:{type:"string"}}}}},renderer:g});var P=d.getResourceBundleFor("sap.m");C.prototype.init=function(){this.allowTextSelection(false);this._oTokensWidthMap={};this._oIndicator=null;this._bShouldRenderTabIndex=null;this._oScroller=new h(this,this.getId()+"-scrollContainer",{horizontal:true,vertical:false,nonTouchScrolling:true});this._fFontSizeRatio=1;if(r.isAccessibilityEnabled()){var e=new c({text:P.getText("TOKENIZER_ARIA_NO_TOKENS")});this.setAggregation("_tokensInfo",e)}this.attachEvent("delete",function(e){var t=e.getSource();var o=this.getSelectedTokens();var i=!!o.length&&o[o.indexOf(t)+1]||o[o.indexOf(t)-1];this._fireCompatibilityEvents(t,o);this.fireEvent("tokenDelete",{tokens:[t]});if(i){i.focus()}e.cancelBubble()},this);this._bThemeApplied=false;this._handleThemeApplied=()=>{this._bThemeApplied=true;m.detachApplied(this._handleThemeApplied)};m.attachApplied(this._handleThemeApplied);this._observeTokens()};C.prototype._fireCompatibilityEvents=function(e,t){this.fireTokenChange({type:C.TokenChangeType.Removed,token:e,tokens:t.length?t:[e],addedTokens:[],removedTokens:t.length?t:[e]});this.fireTokenUpdate({type:C.TokenChangeType.Removed,addedTokens:[],removedTokens:t.length?t:[e]})};C.prototype._handleNMoreIndicatorPress=function(){this._bIsOpenedByNMoreIndicator=true;this._togglePopup(this.getTokensPopup(),this._getEffectiveOpener())};C.prototype._getEffectiveOpener=function(){return document.getElementById(this.getProperty("opener"))||this.getDomRef()};C.prototype._getTokensList=function(){if(!this._oTokensList){this._oTokensList=new i({width:"auto",mode:S.Delete}).attachDelete(this._handleListItemDelete,this).attachItemPress(this._handleListItemPress,this)}return this._oTokensList};C.prototype._setPopoverMode=function(e){var t=this.getTokensPopup();var o={showArrow:true,placement:R.VerticalPreferredBottom};t.setShowArrow(o.showArrow);t.setPlacement(o.placement);this._getTokensList().setMode(e)};C.prototype._fillTokensList=function(e,t){e.destroyItems();t=t?t:function(){return true};this.getTokens().filter(t).forEach(function(t){e.addItem(this._mapTokenToListItem(t))},this)};C.prototype._handleListItemDelete=function(e){var t=e.getParameter("listItem");var o=t&&t.data("tokenId");var i;i=this.getTokens().filter(function(e){return e.getId()===o&&e.getEditable()})[0];if(i){this.fireTokenUpdate({addedTokens:[],removedTokens:[i],type:C.TokenUpdateType.Removed});this.fireTokenDelete({tokens:[i]});this._adjustTokensVisibility()}};C.prototype._handleListItemPress=function(e){var t=e.getParameter("listItem");var o=t&&t.data("tokenId");var i=this.getTokens().filter(function(e){return e.getId()===o})[0];if(i){i.firePress()}};C.prototype.focusFirstTokenItem=function(){const e=this._getTokensList();const t=e.getItems();if(t.length){t[0].focus()}};C.prototype._handleTokenizerAfterOpen=function(e){this.focusFirstTokenItem();this.setRenderMode(I.Loose);this.fireRenderModeChange({renderMode:I.Loose})};C.prototype.addPopupClasses=function(e){if(e.hasStyleClass(b)){return}e.addStyleClass(b);e.addStyleClass(v)};C.prototype.getTokensPopup=function(){var e=this._getTokensList();if(this._oPopup){return this._oPopup}this._oPopup=new s({showArrow:true,showHeader:u.system.phone,placement:R.Auto,offsetX:0,offsetY:3,horizontalScrolling:false,title:this._getDialogTitle(),content:this._getTokensList()}).attachBeforeOpen(function(){var t=this.getEditable()?120:32,o=this._oPopup,i=function(){var e=this.getDomRef()&&this.getDomRef().parentElement;var t="Cozy";if(!e){return t}if(e.closest(".sapUiSizeCompact")!==null||document.body.classList.contains("sapUiSizeCompact")){t="Compact"}return t}.bind(this),n=new Promise(function(e){y.get({name:["_sap_m_Tokenizer_FontSizeRatio"+i()],callback:function(t){var o=parseFloat(t);if(isNaN(o)){e(this._fFontSizeRatio);return}e(o)}.bind(this)})}.bind(this));if(o.getContent&&!o.getContent().length){o.addContent(e)}this._fillTokensList(e);t+=Object.keys(this._oTokensWidthMap).map(function(e){return this._oTokensWidthMap[e]},this).sort(function(e,t){return e-t}).pop()||0;n.then(function(e){t+=Math.ceil(t*(1-e));o.setContentWidth(t+"px")})},this).attachAfterClose(this.afterPopupClose,this).attachAfterOpen(this._handleTokenizerAfterOpen,this);this.addDependent(this._oPopup);this.addPopupClasses(this._oPopup);if(u.system.phone){this._oPopup.setEndButton(new o({text:P.getText("SUGGESTIONSPOPOVER_CLOSE_BUTTON"),type:E.Emphasized,press:function(){this._oPopup.close()}.bind(this)}))}return this._oPopup};C.prototype.afterPopupClose=function(){if(!this.checkFocus()){this.setRenderMode(I.Narrow);this.fireRenderModeChange({renderMode:"Narrow"})}};C.prototype._getDialogTitle=function(){var e=d.getResourceBundleFor("sap.m");var t=this.getAriaLabelledBy().map(function(e){return l.getElementById(e)});return t.length?t[0].getText?.():e.getText("COMBOBOX_PICKER_TITLE")};C.prototype._togglePopup=function(){var e=this._getEffectiveOpener(),t=this.getTokensPopup(),o=t.isOpen(),i=this.getEditable();this._setPopoverMode(i?S.Delete:S.None);if(o){t.close()}else{t.openBy(e)}};C.prototype._mapTokenToListItem=function(e){if(!e){return null}var t=new n({selected:true,wrapping:true,type:M.Active,wrapCharLimit:1e4}).data("tokenId",e.getId());var o=function(e){this._togglePopup(this.getTokensPopup());if(this.getTokens().length&&this._bIsOpenedByNMoreIndicator){this.getTokens()[0].focus();this._bIsOpenedByNMoreIndicator=false}};t.setTitle(e.getText());t.addDelegate({onkeydown:function(e){e.preventDefault();if(!((e.ctrlKey||e.metaKey)&&e.which===k.I)&&e.which!==k.ESCAPE){return}this._togglePopup(this.getTokensPopup());if(this.getTokens().length&&this._bIsOpenedByNMoreIndicator){this.getTokens()[0].focus();this._bIsOpenedByNMoreIndicator=false}},onsapshow:o,onsaphide:o},this);return t};C.prototype._getPixelWidth=function(){var e=this.getMaxWidth(),t,o=this.getDomRef("inner")||this.getDomRef(),i;if(!o){return}i=parseInt(this.$().css("padding-left"));if(e.indexOf("px")===-1){t=o.clientWidth}else{t=parseInt(this.getMaxWidth())}return t-i};C.prototype._adjustTokensVisibility=function(){if(!this.getDomRef()){return}var e=this._getPixelWidth(),t=this._getVisibleTokens(),o=t.length,i,n,s,r=-1;t.some(function(t,i){e=e-this._oTokensWidthMap[t.getId()];if(e<=1&&o===1||e<0){r=i;return true}else{n=e;return false}},this);if(o===1&&r!==-1){this.setFirstTokenTruncated(true);return}else if(o===1&&t[0].getTruncated()){this.setFirstTokenTruncated(false)}if(r>-1){for(s=0;s<o;s++){if(s>=r){t[s].addStyleClass("sapMHiddenToken")}else{t[s].removeStyleClass("sapMHiddenToken")}}this._handleNMoreIndicator(o-r);i=this._oIndicator.width();if(i>=n){r=r-1;this._handleNMoreIndicator(o-r);t[r].addStyleClass("sapMHiddenToken")}this._setHiddenTokensCount(o-r)}else{this._setHiddenTokensCount(0);this._showAllTokens()}};C.prototype.setFirstTokenTruncated=function(e){var t=this.getTokens()[0];t&&t.setTruncated(e);if(e){this.addStyleClass("sapMTokenizerOneLongToken")}else{this.removeStyleClass("sapMTokenizerOneLongToken")}return this};C.prototype.hasOneTruncatedToken=function(){return this.getTokens().length===1&&this.getTokens()[0].getTruncated()};C.prototype._handleNMoreIndicator=function(e){if(!this.getDomRef()){return this}if(e){let t="MULTIINPUT_SHOW_MORE_TOKENS";if(e===this._getVisibleTokens().length){if(e===1){t="TOKENIZER_SHOW_ALL_ITEM"}else{t="TOKENIZER_SHOW_ALL_ITEMS"}}this._oIndicator.html(P.getText(t,[e]))}return this};C.prototype._getVisibleTokens=function(){return this.getTokens().filter(function(e){return e.getVisible()})};C.prototype._showAllTokens=function(){this._getVisibleTokens().forEach(function(e){e.removeStyleClass("sapMHiddenToken")})};C.prototype.getScrollDelegate=function(){return this._oScroller};C.prototype.scrollToEnd=function(){var e=this.getDomRef(),o=t.getRTL(),i=this.getTokens()[0]&&this.getTokens()[0].getDomRef()&&this.getTokens()[0].getDomRef()===document.activeElement,n,s;if(!this.getDomRef()||i){return}s=this.$().find(".sapMTokenizerScrollContainer")[0];n=s.scrollWidth;if(o){n*=-1}e.scrollLeft=n};C.prototype._registerResizeHandler=function(){if(!this._sResizeHandlerId){this._sResizeHandlerId=f.register(this,this._handleResize.bind(this))}};C.prototype._handleResize=function(){this._useCollapsedMode(this.getRenderMode())};C.prototype.setPixelWidth=function(e){if(typeof e!=="number"){_.warning("Tokenizer.setPixelWidth called with invalid parameter. Expected parameter of type number.");return}this.setWidth(e+"px");if(this._oScroller){this._oScroller.refresh()}};C.prototype.scrollToStart=function(){var e=this.getDomRef();if(!e){return}e.scrollLeft=0};C.prototype.getScrollWidth=function(){if(!this.getDomRef()){return 0}return this.$().children(".sapMTokenizerScrollContainer")[0].scrollWidth};C.prototype.onBeforeRendering=function(){var e=this.getTokens();if(e.length!==1){this.setFirstTokenTruncated(false)}e.forEach(function(t,o){t.setProperty("editableParent",this.getEditable()&&this.getEnabled());t.setProperty("posinset",o+1);t.setProperty("setsize",e.length)},this);this._setTokensAria();if(this.getTokensPopup()&&this.getTokensPopup().isOpen()){const t=this._getTokensList().getItems().length;if(e.length!==t){this._fillTokensList(this._getTokensList())}}};C.prototype.onAfterRendering=function(){var e=this.getRenderMode();var t=this._getTokenToFocus();this._oIndicator=this.$().find(".sapMTokenizerIndicator");if(this._bThemeApplied){this._storeTokensSizes()}this._useCollapsedMode(e);this._registerResizeHandler();if(!this.getEnabled()&&this.getTokens().length){this.getTokens().forEach(function(e){if(!e.getDomRef()){return}e.getDomRef().setAttribute("tabindex","-1")})}if(t&&t.getDomRef()&&this.getEffectiveTabIndex()){t.getDomRef().setAttribute("tabindex","0")}if(this._bFocusFirstToken){this.scrollToStart();this._bFocusFirstToken=false;return}if(e===I.Loose&&this._nMoreIndicatorPressed){this.scrollToEnd()}};C.prototype.onThemeChanged=function(){this._storeTokensSizes();this._useCollapsedMode(this.getRenderMode())};C.prototype._storeTokensSizes=function(){var e=this.getTokens();e.forEach(function(e){if(e.getDomRef()&&!e.$().hasClass("sapMHiddenToken")&&!e.getTruncated()){this._oTokensWidthMap[e.getId()]=e.$().outerWidth(true)}},this)};C.prototype._getTokenToFocus=function(){var e=this._getVisibleTokens();return e.find(e=>e.getSelected())||e[0]};C.prototype._useCollapsedMode=function(e){var t=this._getVisibleTokens();if(!t.length){this._setHiddenTokensCount(0);return}if(e===I.Loose){this._setHiddenTokensCount(0);this._showAllTokens();return}this._adjustTokensVisibility()};C.prototype.onsapfocusleave=function(e){if(document.activeElement===this.getDomRef()||!this.checkFocus()){this._oSelectionOrigin=null}if(!this.checkFocus()){this._bFocusFirstToken=true;this.setRenderMode(I.Narrow);this.fireRenderModeChange({renderMode:"Narrow"})}};C.prototype.onsapbackspace=function(e){var t=this.getSelectedTokens();var o=this.getTokens().filter(function(e){return e.getFocusDomRef()===document.activeElement})[0];var i=this.getTokens();var n=t.length?t:[o];var s=!!t.length&&i[t.indexOf(o)+1]||i[t.indexOf(o)-1];e.preventDefault();if(s){s.focus()}return this.fireTokenDelete({tokens:n,keyCode:e.which})};C.prototype.onsapdelete=C.prototype.onsapbackspace;C.prototype.onkeydown=function(e){var t;var o=(e.ctrlKey||e.metaKey)&&e.which===k.I;if(!this.getEnabled()){return}if(e.which===k.TAB){this._changeAllTokensSelection(false)}if((e.ctrlKey||e.metaKey)&&e.which===k.A){t=this.getSelectedTokens().length<this._getVisibleTokens().length;if(this._getVisibleTokens().length>0){this.focus();this._changeAllTokensSelection(t);e.preventDefault();e.stopPropagation()}}if((e.ctrlKey||e.metaKey)&&(e.which===k.C||e.which===k.INSERT)){this._copy()}if((e.ctrlKey||e.metaKey)&&e.which===k.X||e.shiftKey&&e.which===k.DELETE){if(this.getEditable()){this._cut()}else{this._copy()}}if(o){e.preventDefault();e.stopPropagation();this._togglePopup(this.getTokensPopup());return}};C.prototype.onsaphide=function(e){this._togglePopup(this.getTokensPopup())};C.prototype.onsapshow=C.prototype.onsaphide;C.prototype._shouldPreventModifier=function(e){var t=u.os.macintosh&&e.metaKey;var o=u.os.windows&&e.altKey;return t||o};C.prototype.onsappreviousmodifiers=function(e){if(!this._shouldPreventModifier(e)){this.onsapprevious(e)}};C.prototype._observeTokens=function(){var e=new p(function(e){var t=e.mutation;var o=e.child;switch(t){case"insert":o.attachEvent("_change",this.invalidate,this);break;case"remove":o.detachEvent("_change",this.invalidate,this);break;default:break}}.bind(this));e.observe(this,{aggregations:["tokens"]})};C.prototype.onsapnextmodifiers=function(e){if(!this._shouldPreventModifier(e)){this.onsapnext(e)}};C.prototype.onsaphomemodifiers=function(e){this._selectRange(false);this.scrollToStart()};C.prototype.onsappageupmodifiers=function(e){this._selectRange(false);this.scrollToStart()};C.prototype.onsapendmodifiers=function(e){this._selectRange(true);this.scrollToEnd()};C.prototype.onsappagedownmodifiers=function(e){this._selectRange(true);this.scrollToEnd()};C.prototype._selectRange=function(e){var t={},o=this._getVisibleTokens(),i=l.closestTo(document.activeElement),n=o.indexOf(i);if(!i||!i.isA("sap.m.Token")){return}if(e){t.start=n;t.end=o.length-1}else{t.start=0;t.end=n}if(t.start<t.end){for(var s=t.start;s<=t.end;s++){o[s].setSelected(true)}}};C.prototype._copy=function(){this._fillClipboard("copy")};C.prototype._fillClipboard=function(e){var t=this.getSelectedTokens();var o=t.map(function(e){return e.getText()}).join("\r\n");var i=function(e){if(e.clipboardData){e.clipboardData.setData("text/plain",o)}else{e.originalEvent.clipboardData.setData("text/plain",o)}e.preventDefault()};document.addEventListener(e,i);document.execCommand(e);document.removeEventListener(e,i)};C.prototype._cut=function(){var e=this.getSelectedTokens();this._fillClipboard("cut");this.fireTokenChange({type:C.TokenChangeType.Removed,token:e,tokens:e,addedTokens:[],removedTokens:e});this.fireTokenUpdate({type:C.TokenChangeType.Removed,addedTokens:[],removedTokens:e});this.fireTokenDelete({tokens:e})};C.prototype._ensureTokenVisible=function(e){if(!e||!e.getDomRef()||!this.getDomRef()){return}var o=this.$().offset().left,i=this.$().width(),n=e.$().offset().left,s=t.getRTL(),r=s?parseInt(e.$().css("margin-left")):parseInt(e.$().css("margin-right")),a=parseInt(e.$().css("border-left-width"))+parseInt(e.$().css("border-right-width")),l=e.$().width()+r+a,d=s?this.$().scrollLeftRTL():this.$().scrollLeft(),h=d-o+n,p=d+(n-o+l-i);if(this._getVisibleTokens().indexOf(e)===0){this.$().scrollLeft(0);return}if(n<o){s?this.$().scrollLeftRTL(h):this.$().scrollLeft(h)}if(n-o+l>i){s?this.$().scrollLeftRTL(p):this.$().scrollLeft(p)}};C.prototype.onfocusin=function(e){this.setRenderMode(I.Loose);this.fireRenderModeChange({renderMode:"Loose"});const t=this.getTokens()[0];this._bFocusFirstToken=e.srcControl===t;if(!this._bFocusFirstToken&&!this._bTokenToBeDeleted){this._ensureTokenVisible(e.srcControl)}};C.prototype.onmousedown=function(e){this._bTokenToBeDeleted=e.target.matches(".sapMTokenIcon, .sapMTokenIcon *")};C.prototype.ontap=function(e){var t=e.shiftKey,o=e.ctrlKey||e.metaKey,i=e.getMark("tokenTap"),n=e.getMark("tokenDeletePress"),s=this._getVisibleTokens(),r,a,l,d,h;if(n||!i||!t&&o){this._oSelectionOrigin=null;return}if(!t){this._oSelectionOrigin=i;this._changeAllTokensSelection(false,i,true)}r=i;if(this._oSelectionOrigin){r=this._oSelectionOrigin}else{this._oSelectionOrigin=r}if(i&&this.hasOneTruncatedToken()){this._handleNMoreIndicatorPress();return}a=this.indexOfToken(r);l=this.indexOfToken(i);d=Math.min(a,l);h=Math.max(a,l);s.forEach(function(e,o){if(o>=d&&o<=h&&t){e.setSelected(i.getSelected())}})};C.prototype.onsapprevious=function(e){var t=this._getVisibleTokens(),o=t.length;e.preventDefault();if(o===0){return}var i=l.closestTo(document.activeElement);var n=i?t.indexOf(i):-1;if(n===0){e.setMarked("forwardFocusToParent");return}var s,r;if(n>0){s=t[n-1];this._ensureTokenVisible(s);s.focus()}else{s=t[t.length-1];this._ensureTokenVisible(s);s.focus({preventScroll:true})}if(e.shiftKey){r=t[n];s.setSelected(true);r.setSelected(true)}e.setMarked()};C.prototype.onsapnext=function(e){var t=this._getVisibleTokens(),o=t.length;e.preventDefault();if(o===0){return}var i=l.closestTo(document.activeElement);var n=i?t.indexOf(i):-1;var s=t[n+1];this._ensureTokenVisible(s);if(n<o-1){var r=t[n];s.focus();if(e.shiftKey){s.setSelected(true);r.setSelected(true)}}else{e.setMarked("forwardFocusToParent");return}e.setMarked()};C.prototype.addValidator=function(e){_.warning("[Warning]:","You are attempting to use deprecated method 'addValidator()', please use MultiInput.prototype.addValidator instead.",this)};C.prototype.removeValidator=function(e){_.warning("[Warning]:","You are attempting to use deprecated method 'addValidator()', please use MultiInput.prototype.addValidator instead.",this)};C.prototype.removeAllValidators=function(){_.warning("[Warning]:","You are attempting to use deprecated method 'addValidator()', please use MultiInput.prototype.addValidator instead.",this)};C.prototype.addValidateToken=function(e){_.warning("[Warning]:","You are attempting to use deprecated method 'addValidator()', please use MultiInput.prototype.addValidator instead.",this)};C.prototype._parseString=function(e){return e.split(/\r\n|\r|\n/g)};C.prototype.checkFocus=function(){var e=this._oPopup&&this._oPopup.getDomRef();var t=T(e,document.activeElement);return this.getDomRef()&&T(this.getDomRef(),document.activeElement)||t};C.prototype.selectAllTokens=function(e){if(e===undefined){e=true}this._changeAllTokensSelection(e);return this};C.prototype._changeAllTokensSelection=function(e,t,o){var i=this._getVisibleTokens();i.filter(function(e){return e!==t}).forEach(function(t){t.setSelected(e)});if(!o){this._doSelect()}return this};C.prototype.getSelectedTokens=function(){return this._getVisibleTokens().filter(function(e){return e.getSelected()})};["onsappageup","onsappagedown","onsaphome","onsapend"].forEach(function(e){C.prototype[e]=function(t){if(e==="onsaphome"||e==="onsappageup"){var o=this.getTokens().filter(function(e){return e.getDomRef()&&!e.getDomRef().classList.contains("sapMHiddenToken")});o.length&&o[0].focus();this.scrollToStart();t.preventDefault();return}var i=this._getVisibleTokens(),n=i[i.length-1];if(n.getDomRef()!==document.activeElement){n.focus();this.scrollToEnd();t.stopPropagation()}else{t.setMarked("forwardFocusToParent")}t.preventDefault()}});C.prototype.setShouldRenderTabIndex=function(e){this._bShouldRenderTabIndex=e};C.prototype.getEffectiveTabIndex=function(){return this._bShouldRenderTabIndex===null?!!this.getTokens().length:this._bShouldRenderTabIndex};C.prototype.onclick=function(e){if(!this.getEnabled()){return}this._nMoreIndicatorPressed=!this.hasOneTruncatedToken()&&!this.hasStyleClass("sapMTokenizerIndicatorDisabled")&&e.target.classList.contains("sapMTokenizerIndicator");if(this._nMoreIndicatorPressed){this._handleNMoreIndicatorPress()}};C.prototype.ontouchstart=function(e){e.setMarked();if(u.browser.chrome&&window.getSelection()){window.getSelection().removeAllRanges()}};C.prototype.exit=function(){this._deregisterResizeHandler();if(this._oTokensList){this._oTokensList.destroy();this._oTokensList=null}if(this._oScroller){this._oScroller.destroy();this._oScroller=null}if(this._oPopup){this._oPopup.destroy();this._oPopup=null}this._oTokensWidthMap=null;this._oIndicator=null;this._aTokenValidators=null;this._bShouldRenderTabIndex=null;this._bThemeApplied=false};C.prototype._deregisterResizeHandler=function(){if(this._sResizeHandlerId){f.deregister(this._sResizeHandlerId);delete this._sResizeHandlerId}};C.prototype._setTokensAria=function(){var e=this._getVisibleTokens().length;var t;var o="";var i="";var n={0:"TOKENIZER_ARIA_NO_TOKENS",1:"TOKENIZER_ARIA_CONTAIN_ONE_TOKEN"};if(r.isAccessibilityEnabled()){t=this.getAggregation("_tokensInfo");i=n[e]?n[e]:"TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS";o=P.getText(i,[e]);t.setText(o)}};C.prototype._doSelect=function(){if(this.checkFocus()&&this._bCopyToClipboardSupport){var e=document.activeElement;var t=window.getSelection();t.removeAllRanges();if(this.getSelectedTokens().length){var o=document.createRange();o.selectNodeContents(this.getDomRef("clip"));t.addRange(o)}if(window.clipboardData&&e.id===this.getId()+"-clip"&&this.getDomRef()){this.getDomRef().focus()}}};C.prototype._setHiddenTokensCount=function(e){e=this.validateProperty("hiddenTokensCount",e);return this.setProperty("hiddenTokensCount",e)};C.prototype.getHiddenTokensCount=function(){return this.getProperty("hiddenTokensCount")};C.prototype.getTokensInfoId=function(){return this.getAggregation("_tokensInfo").getId()};C.prototype._handleBackspace=function(e,t){var o=this.getTokens();if(o[e-1]){return o[e-1].focus()}return t()};C.prototype._handleDelete=function(e,t){var o=this.getTokens();if(o[e+1]){return o[e+1].focus()}return t()};C.prototype.focusToken=function(e,t,o){var i=this.getTokens();var n=t.keyCode;var s=t.keyCode===k.BACKSPACE;if(i.length===0){return}if(!n){return}if(s){return this._handleBackspace(e,o)}return this._handleDelete(e,o)};C.TokenChangeType={Added:"added",Removed:"removed",RemovedAll:"removedAll",TokensChanged:"tokensChanged"};C.TokenUpdateType={Added:"added",Removed:"removed"};return C});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/TokenizerRenderer", ["sap/ui/Device","sap/ui/core/InvisibleText"],function(e,n){"use strict";var t={apiVersion:2};t.render=function(e,n){this.renderOpenTag(e,n);this.renderInnerContent(e,n)};t.renderInnerContent=function(t,o){var r=o.getTokens();t.class("sapMTokenizer");if(!o.getEditable()){t.class("sapMTokenizerReadonly")}if(!o.getEnabled()){t.class("sapMTokenizerDisabled")}if(!r.length){t.class("sapMTokenizerEmpty");t.attr("aria-hidden","true")}this.addWidthStyles(t,o);var i={role:"listbox"};i.labelledby={value:n.getStaticId("sap.m","TOKENIZER_ARIA_LABEL"),append:true};t.accessibilityState(o,i);t.openEnd();t.renderControl(o.getAggregation("_tokensInfo"));o._bCopyToClipboardSupport=false;if((e.system.desktop||e.system.combi)&&r.length){t.openStart("div",o.getId()+"-clip").class("sapMTokenizerClip");if(window.clipboardData){t.attr("contenteditable","true");t.attr("tabindex","-1")}t.openEnd();t.unsafeHtml("&nbsp");t.close("div");o._bCopyToClipboardSupport=true}t.openStart("div",o.getId()+"-scrollContainer");t.class("sapMTokenizerScrollContainer");if(o.getHiddenTokensCount()===o.getTokens().length){t.class("sapMTokenizerScrollContainerNoVisibleTokens")}t.openEnd();this._renderTokens(t,o);t.close("div");this._renderIndicator(t,o);t.close("div")};t.renderOpenTag=function(e,n){e.openStart("div",n)};t.addWidthStyles=function(e,n){e.style("max-width",n.getMaxWidth());var t=n.getWidth();if(t){e.style("width",t)}};t._renderTokens=function(e,n){var t=0,o=n.getTokens(),r=o.length;for(t=0;t<r;t++){e.renderControl(o[t])}};t._renderIndicator=function(e,n){var t=n._oPopup?.isOpen();var o=n._oPopup?.getDomRef()&&n._oPopup?._oControl.getId();e.openStart("span");e.class("sapMTokenizerIndicator");this._renderIndicatorTabIndex(e,n);if(n.getHiddenTokensCount()===0){e.class("sapUiHidden")}e.attr("role","button").attr("aria-haspopup","dialog").attr("aria-expanded",t);if(o){e.attr("aria-controls",o)}e.openEnd().close("span")};t._renderIndicatorTabIndex=function(e,n){};return t},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/inputUtils/completeTextSelected", [],function(){"use strict";var e=function(e){var t=e&&e.value&&e.value.length;if(!e||!t||e.selectionStart!==0||e.selectionEnd!==t){return false}return true};return e});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/inputUtils/forwardItemPropertiesToToken", ["sap/m/inputUtils/ListHelpers","sap/m/inputUtils/getTokenByItem"],function(e,t){"use strict";var r=function(e){var r=e.item;var i=e.propName;var a=e.propValue;var s=t(r);if(!s){return}if(i==="enabled"){s.setVisible(a)}else if(s.getMetadata().hasProperty(i)){s.setProperty(i,a)}};return r});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/inputUtils/getTokenByItem", ["sap/m/inputUtils/ListHelpers"],function(n){"use strict";var t=function(t){return t?t.data(n.CSS_CLASS+"Token"):null};return t});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/p13n/AbstractContainer", ["sap/ui/core/Control","sap/m/Page"],(t,e)=>{"use strict";const i=t.extend("sap.m.p13n.AbstractContainer",{metadata:{library:"sap.m",defaultAggregation:"views",properties:{defaultView:{type:"string"}},aggregations:{header:{type:"sap.m.IBar",multiple:false,forwarding:{idSuffix:"-AbstractContainer",aggregation:"customHeader",forwardBinding:true}},subHeader:{type:"sap.m.IBar",multiple:false,forwarding:{idSuffix:"-AbstractContainer",aggregation:"subHeader",forwardBinding:true}},footer:{type:"sap.m.IBar",multiple:false,forwarding:{idSuffix:"-AbstractContainer",aggregation:"footer",forwardBinding:true}},views:{type:"sap.m.p13n.AbstractContainerItem",multiple:true},_content:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}},events:{beforeViewSwitch:{allowPreventDefault:true,parameters:{source:{type:"string"},target:{type:"string"}}},afterViewSwitch:{allowPreventDefault:true,parameters:{source:{type:"string"},target:{type:"string"}}}}},renderer:{apiVersion:2,render:function(t,e){t.openStart("div",e);t.style("height","100%");t.openEnd();t.renderControl(e.getAggregation("_content"));t.close("div")}}});i.prototype.init=function(){t.prototype.init.apply(this,arguments);this.addStyleClass("sapMAbstractContainer");this._initializeContent()};i.prototype.applySettings=function(){t.prototype.applySettings.apply(this,arguments);this.switchView(this.getDefaultView());return this};i.prototype._initializeContent=function(){this.oLayout=new e({id:this.getId()+"-AbstractContainer",backgroundDesign:"Transparent"});this.oLayout.onfocusfail=function(){};this.setAggregation("_content",this.oLayout)};i.prototype.removeView=function(t,e){let i=typeof t=="string"?this.getView(t):t;i=this.removeAggregation("views",i,e);if(i&&i.getKey()===this.getCurrentViewKey()){this.switchView()}return this};i.prototype.addView=function(t){if(t&&t.getContent()&&!t.getContent().hasStyleClass("sapUiMAbstractContainerContent")){t.getContent().addStyleClass("sapUiMAbstractContainerContent")}this.addAggregation("views",t);return this};i.prototype.getCurrentViewKey=function(){return this._sCurrentView?this._sCurrentView:this.getDefaultView()};i.prototype.getCurrentViewContent=function(){return this.getView(this.getCurrentViewKey()).getContent()};i.prototype.switchView=function(t){let e=this.getView(t);const i=this.getCurrentViewKey();if(!e){[e]=this.getViews();if(!e){return}}if(!this.fireBeforeViewSwitch({source:i,target:t})){this._bPrevented=true;return}this._bPrevented=false;this._sCurrentView=e.getKey();this.oLayout.removeAllContent();this.oLayout.addContent(e.getContent());if(i!==t){this.oAfterRenderingDelegate={onAfterRendering:()=>{this.removeEventDelegate(this.oAfterRenderingDelegate);this.fireAfterViewSwitch({source:i,target:t})}};this.addEventDelegate(this.oAfterRenderingDelegate,this)}};i.prototype.getView=function(t){return this.getViews().find(e=>{if(e.getKey()===t||e.getContent()===t){return e}})};i.prototype.getViewMap=function(){return this.getViews().map(t=>({key:t.getKey(),content:t.getContent()}))};i.prototype.exit=function(){t.prototype.exit.apply(this,arguments);this._sCurrentView=null;this.oResourceBundle=null};return i});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/p13n/AbstractContainerItem", ["sap/ui/core/Element"],t=>{"use strict";const e=t.extend("sap.m.p13n.AbstractContainerItem",{metadata:{library:"sap.m",defaultAggregation:"content",properties:{key:{type:"string",defaultValue:null},text:{type:"string",defaultValue:null},icon:{type:"string",defaultValue:null},type:{type:"string",defaultValue:"Active"}},aggregations:{content:{type:"sap.ui.core.Control",multiple:false}}}});e.prototype.exit=function(){t.prototype.exit.apply(this,arguments);if(this._oContent){this._oContent.destroy();this._oContent=null}};e.prototype.setContent=function(t){this.setAggregation("content",t);if(t){this._oContent=t}return this};e.prototype.getContent=function(){return this._oContent};return e});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/p13n/Container", ["sap/m/p13n/AbstractContainer","sap/m/Bar","sap/m/Button","sap/m/Title","sap/m/List","sap/m/IconTabBar","sap/m/IconTabFilter","sap/m/p13n/AbstractContainerItem","sap/ui/Device","sap/m/library","sap/m/StandardListItem","sap/ui/core/library"],(t,e,i,s,a,o,n,r,h,p,d,g)=>{"use strict";const l=p.ButtonType;const y=g.TitleLevel;const _=t.extend("sap.m.p13n.Container",{metadata:{library:"sap.m",properties:{listLayout:{type:"boolean",defaultValue:false}}},renderer:{apiVersion:2}});_.prototype.DEFAULT_KEY="$default";_.prototype.init=function(){t.prototype.init.apply(this,arguments);this.addStyleClass("sapMP13nContainer");this.setListLayout(h.system.phone)};_.prototype.setListLayout=function(t){this.setProperty("listLayout",t);this._getTabBar().removeAllItems();this._getNavigationList().removeAllItems();let i;let s;let a;if(t){this._getTabBar().setVisible(false);this._getNavigationList();this.switchView(this.DEFAULT_KEY);i=this._getNavBackBtn();s=this._getHeaderText()}else{this._getTabBar().setVisible(true);const t=this.getViews();if(t.length>1){this.switchView(t[1].getKey())}a=this._getTabBar()}const o=this.getHeader();if(!o){const t=new e({contentLeft:a?a:[i,s]});this.setHeader(t)}else{o.removeAllContentLeft();if(a){o.addContentLeft(a)}else{o.addContentLeft(i);o.addContentLeft(s)}}this._updateToolbarArialLabelledBy();this.getViews().forEach(t=>{this._addToNavigator(t)});return this};_.prototype.switchView=function(e){t.prototype.switchView.apply(this,arguments);if(this._bPrevented){return}this.getLayout().setShowHeader(e!==this.DEFAULT_KEY);this.getLayout().setShowFooter(e!==this.DEFAULT_KEY);this._getTabBar().setSelectedKey(e);this._getNavBackBtn().setVisible(e!==this.DEFAULT_KEY);const i=this._getHeaderText();i.setText(this.getView(e)?.getText()||e);i.setVisible(this._getNavBackBtn().getVisible());this._updateToolbarArialLabelledBy()};_.prototype._updateToolbarArialLabelledBy=function(){if(this.getListLayout()){const t=this._getHeaderText();const e=this.getHeader();if(t&&e?.getAriaLabelledBy().indexOf(t.getId())==-1){e.addAriaLabelledBy(t)}}};_.prototype.addView=function(e){this._addToNavigator(typeof e=="string"?this.getView(e):e);t.prototype.addView.apply(this,arguments);return this};_.prototype.removeView=function(e){this._removeFromNavigator(typeof e=="string"?this.getView(e):e);t.prototype.removeView.apply(this,arguments);return this};_.prototype.addSeparator=function(){if(!this.getProperty("listLayout")){return}const t=this._getNavigationList().getItems();const e=t[t.length-1];e.addStyleClass("sapMMenuDivider");return this};_.prototype.getLayout=function(){return this.oLayout};_.prototype._getTabBar=function(){if(!this._oTabBar){this._oTabBar=new o({headerBackgroundDesign:"Transparent",applyContentPadding:false,expandable:false,select:t=>{this.switchView(t.getParameter("key"))}});this.addDependent(this._oTabBar)}return this._oTabBar};_.prototype._getNavigationList=function(){if(!this._oNavigationList){this._oNavigationList=new a({itemPress:t=>{const e=t.getParameter("listItem");this.switchView(e._key)}});this.addDependent(this._oNavigationList)}if(!this.getView(this.DEFAULT_KEY)){const t=new r({key:this.DEFAULT_KEY,content:this._oNavigationList});this.addView(t)}return this._oNavigationList};_.prototype.setListHeader=function(t){return this._oNavigationList.setHeaderToolbar(t)};_.prototype._getNavBackBtn=function(){if(!this._oNavBackBtn){this._oNavBackBtn=new i({type:l.Back,press:t=>{this.switchView(this.DEFAULT_KEY)}});this.addDependent(this._oNavBackBtn)}return this._oNavBackBtn};_.prototype._getHeaderText=function(){if(!this._oHeaderText){this._oHeaderText=new s({level:h.system.phone?y.H2:y.H1});this.addDependent(this._oHeaderText)}return this._oHeaderText};_.prototype._addToNavigator=function(t){const e=t.getKey();const i=t.getBindingInfo("text");let s=t.getText();const a=t.getIcon();const o=t.getType();if(i&&i.parts){s={parts:i.parts}}if(e==this.DEFAULT_KEY){return}if(this.getListLayout()){this.getView(this.DEFAULT_KEY);const t=new d({type:o,icon:a,title:s});t._key=e;this._getNavigationList().addItem(t)}else{this._getTabBar().addItem(new n({key:e,text:s||e}))}};_.prototype._removeFromNavigator=function(t){const e=t.getKey();if(e==this.DEFAULT_KEY){return}if(this.getListLayout()){const t=this._getNavigationList().getItems().find(t=>t._key===e);this._getNavigationList().removeItem(t)}else{const t=this._getTabBar().getItems().find(t=>t.getKey()===e);this._getTabBar().removeItem(t)}};_.prototype.exit=function(){t.prototype.exit.apply(this,arguments);if(this._oTabBar){this._oTabBar.destroy();this._oTabBar=null}if(this._oNavigationList){this._oNavigationList.destroy();this._oNavigationList=null}this._oNavBackBtn=null;this._oHeaderText=null};return _});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/table/columnmenu/Menu", ["sap/m/ResponsivePopover","sap/m/Button","sap/m/OverflowToolbar","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/Title","sap/m/List","sap/m/InputListItem","sap/m/CustomListItem","sap/m/Label","sap/m/IllustratedMessage","sap/m/IllustratedMessageType","sap/m/IllustratedMessageSize","sap/m/library","sap/ui/Device","sap/ui/core/Control","sap/ui/core/Element","sap/ui/core/Lib","sap/ui/core/library","sap/ui/core/StaticArea","sap/ui/layout/form/Form","sap/ui/layout/form/FormContainer","sap/ui/layout/form/FormElement","sap/ui/layout/form/ResponsiveGridLayout","sap/ui/layout/GridData","sap/ui/performance/trace/FESRHelper","sap/ui/thirdparty/jquery","sap/ui/dom/containsOrEquals","sap/ui/events/ControlEvents","sap/base/strings/capitalize","sap/m/p13n/AbstractContainerItem","sap/m/p13n/Container","sap/m/table/columnmenu/MenuBase","sap/m/table/columnmenu/MenuRenderer"],function(t,e,i,o,s,n,r,a,u,l,c,h,p,f,g,_,d,m,v,y,I,C,L,b,E,A,jQuery,k,w,B,S,Q,T,M){"use strict";var P=v.aria.HasPopup;var O=f.table.columnmenu.Category;var N=T.extend("sap.m.table.columnmenu.Menu",{metadata:{library:"sap.m",defaultAggregation:"quickActions",properties:{showTableSettingsButton:{type:"boolean",defaultValue:false}},aggregations:{quickActions:{type:"sap.m.table.columnmenu.QuickActionBase"},items:{type:"sap.m.table.columnmenu.ItemBase"},_quickActions:{type:"sap.m.table.columnmenu.QuickActionBase",visibility:"hidden"},_items:{type:"sap.m.table.columnmenu.ItemBase",visibility:"hidden"}},events:{tableSettingsPressed:{}}},renderer:M});var R="$default";var x=P.Dialog;N.prototype.init=function(){this.fAnyEventHandlerProxy=jQuery.proxy(function(t){if(!this.isOpen()||!this.getDomRef()||t.type!="mousedown"&&t.type!="touchstart"){return}this.handleOuterEvent(this.getId(),t)},this)};N.prototype.openBy=function(t,e){if(this.isOpen()&&t===this._oIsOpenBy){return}var i=true;var o=t;if(!(t instanceof d)){o=d.closestTo(t,true)}if(!e){i=this.fireBeforeOpen({openBy:o})}if(!i){return}const s=()=>{this._initPopover();this._oQuickSortList=this._initQuickActionList(O.Sort);this._oQuickFilterList=this._initQuickActionList(O.Filter);this._oQuickGroupList=this._initQuickActionList(O.Group);this._oQuickAggregateList=this._initQuickActionList(O.Aggregate);this._oQuickGenericList=this._initQuickActionList(O.Generic);this._initItemsContainer();if(!this.getParent()){y.getUIArea().addContent(this,true)}if(this._getAllEffectiveQuickActions().length===0&&this._getAllEffectiveItems().length===0){this._initIllustratedMessage()}this._oPopover.setInitialFocus(this._oQuickSortList||this._oQuickFilterList||this._oQuickGroupList||this._oQuickAggregateList||this._oQuickGenericList||this._oItemsContainer);this._oPopover.openBy(t);this._oIsOpenBy=t;w.bindAnyEvent(this.fAnyEventHandlerProxy)};if(this.isOpen()){this._oPopover.attachEventOnce("afterClose",s);this.close()}else{s()}};N.prototype.setShowTableSettingsButton=function(t){this.setProperty("showTableSettingsButton",t,true);if(!this._oPopover){return this}if(!t){this._oPopover.getEndButton()?.destroy();this._oPopover.setEndButton(null)}else{this._oPopover.setEndButton(V(this))}return this};function V(t){const i=new e({icon:"sap-icon://action-settings",tooltip:t._getResourceText("table.COLUMNMENU_TABLE_SETTINGS"),press:()=>{t._oPopover.close();t.fireTableSettingsPressed()}});A.setSemanticStepname(i,"press","tbl:p13n");return i}N.prototype.getAriaHasPopupType=function(){return x};N.prototype.isOpen=function(){return this._oPopover?this._oPopover.isOpen():false};N.prototype.close=function(){this._previousView=null;if(this._oPopover&&this._oPopover.isOpen()){if(this._oQuickSortList){this.removeDependent(this._oQuickSortList);this._oQuickSortList.destroy();this._oQuickSortList=null}if(this._oQuickFilterList){this.removeDependent(this._oQuickFilterList);this._oQuickFilterList.destroy();this._oQuickFilterList=null}if(this._oQuickGroupList){this.removeDependent(this._oQuickGroupList);this._oQuickGroupList.destroy();this._oQuickGroupList=null}if(this._oQuickAggregateList){this.removeDependent(this._oQuickAggregateList);this._oQuickAggregateList.destroy();this._oQuickAggregateList=null}if(this._oQuickGenericList){this.removeDependent(this._oQuickGenericList);this._oQuickGenericList.destroy();this._oQuickGenericList=null}if(this._oItemsContainer){this.removeDependent(this._oItemsContainer);this._oItemsContainer.destroy();this._oItemsContainer=null}y.getUIArea().removeContent(this,true);this._oPopover.close();w.unbindAnyEvent(this.fAnyEventHandlerProxy)}};N.prototype._onPopoverAfterClose=function(){this.fireAfterClose()};N.prototype.exit=function(){T.prototype.exit.apply(this,arguments);if(this._oPopover){delete this._oPopover}if(this._oQuickSortList){delete this._oQuickSortList}if(this._oQuickFilterList){delete this._oQuickFilterList}if(this._oQuickGroupList){delete this._oQuickGroupList}if(this._oQuickAggregateList){delete this._oQuickAggregateList}if(this._oQuickGenericList){delete this._oQuickGenericList}if(this._oItemsContainer){delete this._oItemsContainer}if(this._oIsOpenBy){delete this._oIsOpenBy}if(this._oIllustratedMessage){this._oIllustratedMessage.destroy();delete this._oIllustratedMessage}w.unbindAnyEvent(this.fAnyEventHandlerProxy)};N.prototype._initPopover=function(){if(this._oPopover){return}this._oPopover=new t({showArrow:false,showHeader:g.system.phone,placement:f.PlacementType.VerticalPreferredBottom,content:new U({control:this,height:true}),horizontalScrolling:false,verticalScrolling:true,afterClose:[this._onPopoverAfterClose,this],customHeader:new i({content:[new n({text:this._getResourceText("table.COLUMNMENU_TITLE")}),new s,new e({icon:"sap-icon://decline",tooltip:this._getResourceText("table.COLUMNMENU_CLOSE"),press:()=>{this._oPopover.close()}})]}).addStyleClass("sapMTBHeader-CTX")});if(this.getShowTableSettingsButton()){this._oPopover.setEndButton(V(this))}this.addDependent(this._oPopover);this._oPopover.addStyleClass("sapMTCMenuPopup");this._oPopover.addEventDelegate({onsapfocusleave:this.handleFocusLeave},this);this._oPopover._oControl.oPopup.setAutoClose(false)};N.prototype.handleFocusLeave=function(t){if(!this.isOpen()){return}if(t.relatedControlId&&(!k(this.getDomRef(),jQuery(document.getElementById(t.relatedControlId)).get(0))&&!D(this,d.getElementById(t.relatedControlId)))){this.close()}};N.prototype.handleOuterEvent=function(t,e){var i=g.support.touch||g.system.combi;if(i&&(e.isMarked("delayedMouseEvent")||e.isMarked("cancelAutoClose"))){return}if(e.type=="mousedown"||e.type=="touchstart"){if(!k(this.getDomRef(),e.target)&&!k(this._oPopover.getDomRef(),e.target)&&!D(this,d.closestTo(e.target))){this.close()}}};function D(t,e){if(!t||!e){return false}var i=e.getParent();if(!i){return false}else if(i===t){return true}return D(t,i)}N.prototype._initItemsContainer=function(){var t=this._getAllEffectiveItems();var e=this._hasItems();if(e&&!this._oItemsContainer){this._createItemsContainer()}t.forEach(t=>{this._addView(t)})};var U=_.extend("sap.m.table.columnmenu.AssociativeControl",{metadata:{library:"sap.m",final:true,properties:{height:{type:"boolean",defaultValue:false}},associations:{control:{type:"sap.ui.core.Control"}}},renderer:{apiVersion:2,render:function(t,e){t.openStart("div",e);e.getHeight()&&t.style("height","100%");t.openEnd();t.renderControl(d.getElementById(e.getControl()));t.close("div")}},addAriaLabelledBy:function(t){const e=d.getElementById(this.getControl());e?.removeAllAssociation("ariaLabelledBy");e?.addAriaLabelledBy?.(t);return this},getAriaLabelledBy:function(){const t=d.getElementById(this.getControl());return t?.getAriaLabelledBy?.()||[]}});N.prototype._addView=function(t){var e=new S({content:new U({control:t.getContent(),height:true}),key:t.getId(),text:t.getLabel(),icon:t.getIcon(),type:t.isA("sap.m.table.columnmenu.ActionItem")?f.ListType.Active:f.ListType.Navigation});this._oItemsContainer.addView(e);this._setItemVisibility(t,t.getVisible())};N.prototype._createItemsContainer=function(){this._oBtnCancel=new e({text:this._getResourceText("table.COLUMNMENU_CANCEL"),press:[function(){var t=this._oItemsContainer.getCurrentViewKey();if(this._fireEvent(d.getElementById(t),"cancel")){this.close()}},this]});this._oBtnOk=new e({text:this._getResourceText("table.COLUMNMENU_CONFIRM"),type:f.ButtonType.Emphasized,press:[function(){var t=this._oItemsContainer.getCurrentViewKey();if(this._fireEvent(d.getElementById(t),"confirm")){this.close()}},this]});this._oItemsContainer=new Q({listLayout:true,defaultView:R,footer:new o({content:[new s,this._oBtnOk,this._oBtnCancel]}),beforeViewSwitch:[function(t){var e=t.getParameters();this.invalidate();if(e.target!=="$default"){var i=this._oItemsContainer.getView(e.target);var o=this._getItemFromContainerItem(i);if(o&&!this._fireEvent(o,"press")){t.preventDefault()}}},this],afterViewSwitch:[function(t){var e=this.getDependents();if(e){e.forEach(function(t){if(t&&t.isA("sap.ui.core.Control")){t.invalidate()}})}var i=t.getParameters();this._oItemsContainer.getLayout().setShowFooter(i.target!=="$default");this._previousView=i.source;if(i.target!=="$default"){var o=this._oItemsContainer.getView(i.target);if(o){var s=this._getItemFromContainerItem(o);this._updateButtonState(s);this._focusItem()}}else{this._focusItem()}},this]});const t=this._hasQuickActions()?this._getResourceText("table.COLUMNMENU_LIST_ITEMS_TITLE"):this._getResourceText("table.COLUMNMENU_LIST_ITEMS_ONLY_TITLE");this._oItemsContainer.setListHeader(new i({content:[new n({text:t})]}));this._oItemsContainer.getHeader().addContentRight(new e({text:this._getResourceText("table.COLUMNMENU_RESET"),press:[function(){this._fireEvent(d.getElementById(this._oItemsContainer.getCurrentViewKey()),"reset",false)},this]}));this.addDependent(this._oItemsContainer)};N.prototype._fireEvent=function(t,e,i){var o=t["on"+B(e)];if(i!==false){var s=jQuery.Event(e);o.call(t,s);return!s.isDefaultPrevented()}else{o.call(t);return true}};N.prototype._getResourceText=function(t,e){this.oResourceBundle=this.oResourceBundle?this.oResourceBundle:m.getResourceBundleFor("sap.m");return t?this.oResourceBundle.getText(t,e):this.oResourceBundle};var G={};G[O.Sort]=0;G[O.Filter]=1;G[O.Group]=2;G[O.Aggregate]=3;G[O.Generic]=4;N.prototype._getAllEffectiveQuickActions=function(t){var e=(this.getAggregation("_quickActions")||[]).concat(this.getQuickActions());e=e.reduce(function(t,e){return t.concat(e?e.getEffectiveQuickActions():[])},[]);if(!t){e.sort(function(t,e){return G[t.getCategory()]-G[e.getCategory()]})}return e};N.prototype._hasQuickActions=function(){return this._getAllEffectiveQuickActions(true).length>0};N.prototype._getAllEffectiveItems=function(){var t=(this.getAggregation("_items")||[]).concat(this.getItems());return t.reduce(function(t,e){return t.concat(e.getEffectiveItems())},[]).filter(function(t){return t.getVisible()})};N.prototype._hasItems=function(){return this._getAllEffectiveItems().length>0};N.prototype._getItemFromContainerItem=function(t){return this._getAllEffectiveItems().find(function(e){return e.getId()===t.getKey()})};N.prototype._updateButtonState=function(t){if(!this._oItemsContainer){return}if(this._oItemsContainer.getCurrentViewKey()===R){return}this._oItemsContainer.getHeader().getContentRight()[0].setVisible(t.getButtonSettings()["reset"]["visible"]);this._oItemsContainer.getHeader().getContentRight()[0].setEnabled(t.getButtonSettings()["reset"]["enabled"]);this._oBtnOk.setVisible(t.getButtonSettings()["confirm"]["visible"]);this._oBtnCancel.setVisible(t.getButtonSettings()["cancel"]["visible"])};N.prototype._focusItem=function(){if(this._previousView==R){this._oItemsContainer._getNavBackBtn().focus()}else{var t=this._oItemsContainer?._getNavigationList().getItems().find(function(t){return t.getVisible()&&t._key===this._previousView}.bind(this));t&&t.focus()}};N.prototype._setItemVisibility=function(t,e){if(!this._oItemsContainer){return}var i=this._oItemsContainer?._getNavigationList().getItems();var o=i.find(function(e){return e._key==t.getId()});o?.setVisible(e)};function F(){return this._getAllEffectiveQuickActions(true).filter(function(t){return t.getVisible()&&t.getCategory()!==O.Generic}).length>0}N.prototype._initQuickActionList=function(t){var e;var o=this._getAllEffectiveQuickActions().filter(function(e){return e.getVisible()&&e.getCategory()===t});const s=t===O.Generic&&!F.call(this)?this._getResourceText("table.COLUMNMENU_QUICK_GENERIC_ONLY_TITLE"):this._getResourceText("table.COLUMNMENU_QUICK_"+t.toUpperCase()+"_TITLE");if(o.length){e=new r({headerToolbar:new i({content:[new n({text:s})]}),keyboardMode:"Edit",items:[]});o.map(function(t){if(t.getContent()?.length===1&&t.getContent()[0].isA("sap.ui.core.IFormContent")){e.addItem(new a({contentSize:t.getContentSize(),label:t.getLabel(),content:z([].concat(t.getContent()))}))}else{e.addItem(new u({content:H(t)}))}});this.addDependent(e)}return e};function H(t){var e=new l({text:t.getLabel(),layoutData:new E({span:"XL4 L4 M4 S12"}),wrapping:true,width:"100%"});var i=t.getContent()||[];var o=new C;var s=new I({layout:new b({breakpointM:600,labelSpanXL:4,labelSpanL:4,labelSpanM:4,labelSpanS:12,columnsL:1,columnsM:1,adjustLabelSpan:false}),formContainers:[o]});var n=[];i.forEach(function(t,o){var s,r,a,u;if(t.getLayoutData()){s=t.getLayoutData().clone()}else{r="L8 M8 S12";a="";if(o>0||o==0&&i.length>1){r="L4 M4 S6";if(o!=0&&(o+1)%2>0){a="L4 M4 S0"}}s=new E({span:r,indent:a})}t.removeAllAssociation("ariaLabelledBy");t.addAssociation("ariaLabelledBy",e.getId());u=new U({control:t.setWidth("100%")});u.setLayoutData(s);n.push(u)},this);o.addFormElement(new L({label:e,fields:n}));return s}function z(t){var e=[];t.forEach(function(t){var i=new U({control:t});e.push(i)});return e}N.prototype._initIllustratedMessage=function(){if(this._oIllustratedMessage){return}this._oIllustratedMessage=new c({title:this._getResourceText("table.COLUMNMENU_EMPTY"),illustrationType:h.NoColumnsSet,illustrationSize:p.ExtraSmall,enableDefaultTitleAndDescription:false});this.addDependent(this._oIllustratedMessage)};return N});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/table/columnmenu/MenuBase", ["sap/ui/core/Control"],function(e){"use strict";var t=e.extend("sap.m.table.columnmenu.MenuBase",{metadata:{library:"sap.m",interfaces:["sap.ui.core.IColumnHeaderMenu"],events:{beforeOpen:{allowPreventDefault:true,parameters:{openBy:{type:"sap.ui.core.Element"}}},afterClose:{}}},renderer:{apiVersion:2}});t.prototype.openBy=function(e){throw new Error("This method should be implemented in one of the inherited classes.")};t.prototype.getAriaHasPopupType=function(){return"Menu"};t.prototype.isOpen=function(){throw new Error("This method should be implemented in one of the inherited classes.")};t.prototype.close=function(){throw new Error("This method should be implemented in one of the inherited classes.")};return t});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/table/columnmenu/MenuRenderer", [],function(){"use strict";var e={apiVersion:2};e.render=function(e,n){e.openStart("div",n);e.class("sapMTCMenu");e.openEnd();const t=n._getAllEffectiveQuickActions().length>0;if(t){this.renderQuickActions(e,n)}const r=n._getAllEffectiveItems().length>0;if(r){this.renderItems(e,n)}if(!t&&!r){e.renderControl(n._oIllustratedMessage)}e.close("div")};e.renderQuickActions=function(e,n){e.openStart("div");if(n._oItemsContainer){if(n._oItemsContainer.getCurrentViewKey()==="$default"){e.class("sapMTCMenuQAList")}else{e.class("sapMTCMenuQAListHidden")}}else{e.class("sapMTCMenuQAList")}e.attr("role","region");e.openEnd();e.renderControl(n._oQuickSortList);e.renderControl(n._oQuickFilterList);e.renderControl(n._oQuickGroupList);e.renderControl(n._oQuickAggregateList);e.renderControl(n._oQuickGenericList);e.close("div")};e.renderItems=function(e,n){e.openStart("div");e.class("sapMTCMenuContainerWrapper");e.openEnd();e.renderControl(n._oItemsContainer);e.close("div")};return e});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/core/DeclarativeSupport", ["sap/ui/thirdparty/jquery","sap/ui/base/BindingInfo","sap/ui/base/DataType","./Control","./CustomData","./HTML","./mvc/View","./mvc/_ViewFactory","./mvc/EventHandlerResolver","sap/base/Log","sap/base/util/ObjectPath","sap/base/assert","sap/base/strings/camelize"],function(jQuery,t,e,a,r,i,n,o,s,u,g,l,p){"use strict";var f={};f.attributes={"data-sap-ui-type":true,"data-sap-ui-id":true,"data-sap-ui-aggregation":true,"data-sap-ui-default-aggregation":true,"data-sap-ui-binding":function(e,a){var r=t.parse(e);a.objectBindings=a.objectBindings||{};a.objectBindings[r.model||undefined]=r},"data-tooltip":function(t,e){e["tooltip"]=t},tooltip:function(t,e,a){e["tooltip"]=t;u.warning('[Deprecated] Control "'+e.id+'": The attribute "tooltip" is not prefixed with "data-*". Future version of declarative support will only suppport attributes with "data-*" prefix.')},class:true,style:true,id:true};f.compile=function(t,e,a){var r=this;jQuery(t).find("[data-sap-ui-type]").filter(function(){return jQuery(this).parents("[data-sap-ui-type]").length===0}).each(function(){r._compile(this,e,a)})};f._compile=function(t,e,r){var i=jQuery(t);var n=i.attr("data-sap-ui-type");var o=[];var s=n==="sap.ui.core.UIArea";var u=t.getAttributeNames();if(s){var g=this;i.children().each(function(){var t=g._createControl(this,e);if(t){o.push(t)}})}else{var l=this._createControl(t,e);if(l){o.push(l)}}i.empty();var p=[];for(var f=0;f<u.length;f++){var d=u[f];if(!s||s&&/^data-/g.test(d.toLowerCase())){p.push(d)}}if(p.length>0){i.removeAttr(p.join(" "))}o.forEach(function(i){if(i instanceof a){if(e&&!r){e.addContent(i)}else{i.placeAt(t);if(e){e.connectControl(i)}}}})};f._createControl=function(t,e){var a=jQuery(t);var r=null;var i=a.attr("data-sap-ui-type");if(i){var s=sap.ui.requireSync(i.replace(/\./g,"/"));s=s||g.get(i);l(typeof s!=="undefined","Class not found: "+i);var u={};u.id=this._getId(a,e);if(e&&e._sProcessingMode!=null&&s.getMetadata().hasSpecialSetting("processingMode")){u.processingMode=e._sProcessingMode}this._addSettingsForAttributes(u,s,t,e);this._addSettingsForAggregations(u,s,t,e);var r;if(n.prototype.isPrototypeOf(s.prototype)&&typeof s._sType==="string"){r=o.create(u,undefined,s._sType)}else{r=new s(u)}if(t.className){r.addStyleClass(t.className)}a.removeAttr("data-sap-ui-type")}else{r=this._createHtmlControl(t,e)}return r};f._createHtmlControl=function(t,e){var a=new i;a.setDOMContent(t);this.compile(t,e,true);return a};f._addSettingsForAttributes=function(e,a,i,n){var o=this;var u=f.attributes;var g=t.parse;var d=[];var c=/^data-custom-data:(.+)/i;var v=i.getAttributeNames();for(var h=0;h<v.length;h++){var y=v[h];var m=i.getAttribute(y);if(!c.test(y)){if(typeof u[y]==="undefined"){y=o.convertAttributeToSettingName(y,e.id);var b=o._getProperty(a,y);if(b){var _=g(m,n&&n.getController(),true);if(_&&typeof _==="object"){e[y]=_}else{e[y]=o.convertValueToType(o.getPropertyDataType(b),_||m)}}else if(o._getAssociation(a,y)){var A=o._getAssociation(a,y);if(A.multiple){m=m.replace(/\s*,\s*|\s+/g,",");e[y]=m.split(",").map(function(t){return n?n.createId(t):t})}else{e[y]=n?n.createId(m):m}}else if(o._getAggregation(a,y)){var w=o._getAggregation(a,y);if(w.multiple){var _=g(m,n&&n.getController());if(_){e[y]=_}else{throw new Error("Aggregation "+y+" with cardinality 0..n only allows binding paths as attribute value")}}else if(w.altTypes){var _=g(m,n&&n.getController(),true);if(_&&typeof _==="object"){e[y]=_}else{e[y]=o.convertValueToType(w.altTypes[0],_||m)}}else{throw new Error("Aggregation "+y+" not supported")}}else if(o._getEvent(a,y)){var C=n&&(n._oContainingView||n).getController();var T=s.resolveEventHandler(m,C);if(T){e[y]=T}else{throw new Error('Control "'+e.id+'": The function "'+m+'" for the event "'+y+'" is not defined')}}else{l(y==="id","DeclarativeSupport encountered unknown setting '"+y+"' for class '"+a.getMetadata().getName()+"' (value:'"+m+"')")}}else if(typeof u[y]==="function"){u[y](m,e,a)}}else{y=p(c.exec(y)[1]);var _=g(m,n&&n.getController());d.push(new r({key:y,value:_||m}))}}if(d.length>0){e.customData=d}return e};f._addSettingsForAggregations=function(t,e,a,r){var i=jQuery(a);var n=this._getDefaultAggregation(e,a);var o=this;var s=e.getMetadata().getAllAggregations();i.children().each(function(){var e=jQuery(this);var a=e.attr("data-sap-ui-aggregation");var i=e.attr("data-sap-ui-type");var u=false;if(!a){u=true;a=n}if(a&&s[a]){var g=s[a].multiple;var p=function(e){var i=o._createControl(e,r);if(i){if(g){if(!t[a]){t[a]=[]}if(typeof t[a].path==="string"){l(!t[a].template,"list bindings support only a single template object");t[a].template=i}else{t[a].push(i)}}else{t[a]=i}}};if(u||i&&!u){p(this)}else{e.children().each(function(){p(this)})}}e.removeAttr("data-sap-ui-aggregation");e.removeAttr("data-sap-ui-type")});return t};f._getId=function(t,e){var a=jQuery(t);var r=a.attr("id");if(r){if(e){r=e.createId(r);a.attr("data-sap-ui-id",r)}a.attr("id","")}return r};f._getProperty=function(t,e){return t.getMetadata().getProperty(e)};f.convertValueToType=function(a,r){if(a instanceof e){r=a.parseValue(r)}return typeof r==="string"?t.parse.escape(r):r};f.getPropertyDataType=function(t){var a=e.getType(t.type);if(!a){throw new Error("Property "+t.name+" has no known type")}return a};f.convertAttributeToSettingName=function(t,e,a){if(t.indexOf("data-")===0){t=t.substr(5)}else if(a){u.warning('[Deprecated] Control "'+e+'": The attribute "'+t+'" is not prefixed with "data-*". Future version of declarative support will only suppport attributes with "data-*" prefix.')}else{throw new Error('Control "'+e+'": The attribute "'+t+'" is not prefixed with "data-*".')}return p(t)};f._getAssociation=function(t,e){return t.getMetadata().getAssociation(e)};f._getAggregation=function(t,e){return t.getMetadata().getAggregation(e)};f._getEvent=function(t,e){return t.getMetadata().getEvent(e)};f._getDefaultAggregation=function(t,e){var a=jQuery(e);var r=a.attr("data-sap-ui-default-aggregation")||t.getMetadata().getDefaultAggregationName();a.removeAttr("data-sap-ui-default-aggregation");return r};return f},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/core/Fragment", ["../base/ManagedObject","../base/OwnStatics","./Element","./DeclarativeSupport","./XMLTemplateProcessor","sap/base/future","sap/base/Log","sap/base/util/LoaderExtensions","sap/base/util/merge","sap/ui/util/XMLHelper","sap/ui/core/Component","sap/ui/core/mvc/XMLProcessingMode"],function(e,t,n,i,r,o,a,s,f,m,g,u){"use strict";var p={},c={};const{getCurrentOwnerId:l,runWithPreprocessors:h}=t.get(e);var d=e.extend("sap.ui.core.Fragment",{metadata:{properties:{type:"string"},specialSettings:{async:{type:"boolean",visibility:"hidden"},fragmentName:"string",fragmentContent:"any",containingView:{type:"sap.ui.core.mvc.View",visibility:"hidden"},oController:{type:"sap.ui.core.mvc.Controller",visibility:"hidden"},sId:{type:"sap.ui.core.ID",visibility:"hidden"},sOwnerId:{type:"sap.ui.core.ID",visibility:"hidden"},processingMode:{type:"sap.ui.core.mvc.XMLProcessingMode",visibility:"hidden"}}},constructor:function(t,n){e.apply(this,arguments);if(!this._bAsync){if(this._aContent&&this._aContent.length==1){return this._aContent[0]}else{return this._aContent}}}});d.registerType=function(e,t){if(typeof e!=="string"){o.errorThrows("Invalid non-string Fragment type: '"+e+"'.",{suffix:"It will be ignored."});return}if(c[e]){a.warning("sap.ui.core.Fragment.registerType(): Fragment type '"+e+"' is already defined. Overriding this type now!")}c[e]=t};d.prototype._initCompositeSupport=function(e){if(!e){throw new Error("Settings must be set")}if(!(e.fragmentName||e.fragmentContent)){throw new Error("Please provide a fragment name")}if(e.oController){this.oController=e.oController}this._bAsync=e.async||false;this._sExplicitId=e.sId||e.id;this._sFragmentName=e.fragmentName;this.fnScopedRunWithOwner=e.containingView&&e.containingView.fnScopedRunWithOwner;if(!this.fnScopedRunWithOwner&&this._sOwnerId){var t=g.getComponentById(this._sOwnerId);this.fnScopedRunWithOwner=function(e){return t.runAsOwner(e)}}var n=d.getType(e.type);if(n){this._pContentPromise=n.init.apply(this,[e]);if(!this._pContentPromise){this._pContentPromise=Promise.resolve(this._aContent)}}else{throw new Error("No type for the fragment has been specified: "+e.type)}};d.prototype.getFragmentName=function(){return this._sFragmentName};d.prototype.getController=function(){return this.oController};d.byId=function(e,t){if(!(typeof e==="string"&&typeof t==="string")){o.errorThrows("sap.ui.core.Fragment.byId: two strings must be given as parameters, but are: "+e+" and "+t);return undefined}return n.getElementById(e+"--"+t)};d.createId=function(e,t){if(!(typeof e==="string"&&typeof t==="string")){o.errorThrows("sap.ui.core.Fragment.createId: two strings must be given as parameters, but are: "+e+" and "+t);return undefined}return e+"--"+t};d.prototype.createId=function(e){var t=this._sExplicitId?this._sExplicitId+"--"+e:e;if(this._oContainingView&&this._oContainingView!=this){t=this._oContainingView.createId(t)}return t};d.prototype.isSubView=function(){return true};sap.ui.fragment=function(e,t,n){var i;if(typeof t==="string"){i=t.toLowerCase()}else if(typeof e==="object"&&typeof e.type==="string"){i=e.type.toLowerCase()}else{i=""}a.info("Do not use deprecated factory function 'sap.ui."+i+"fragment'.","sap.ui."+i+"fragment",null,function(){var t={type:"sap.ui."+i+"fragment",name:(e.fragmentName||e)+".fragment."+i};if(e.fragmentContent){t.content=e.fragmentContent;t.name=""}return t});if(typeof e==="object"&&e.fragmentName?.startsWith("module:")||typeof e==="string"&&e.startsWith("module:")){throw new Error(`sap.ui.fragment(): module name syntax '${e.fragmentName||e}' is not supported.`)}return y(e,t,n)};function y(e,t,n){var i={};if(typeof e==="string"){i.fragmentName=e;i.oController=n;i.type=t}else if(typeof e==="object"){i=e;i.async=i.async===true?i.async:false;if(t){i.oController=t}if(i.async){var r=function(){var e=i.sOwnerId||i.containingView&&i.containingView._sOwnerId;var t=g.getComponentById(e);if(t){return t.runAsOwner(function(){return new d(i)})}return new d(i)};var o=d.getType(i.type);if(i.fragmentName&&i.fragmentContent){delete i.fragmentName}if(i.fragmentName&&typeof o.load=="function"){return new Promise(function(e,t){o.load(i).then(function(t){i.fragmentContent=t;e(r())}).catch(function(e){t(e)})})}else{return Promise.resolve(r())}}}else{a.error("sap.ui.fragment() must be called with Fragment name or config object as first parameter, but is: "+e)}return new d(i)}d.load=function(e){var t=Object.assign({},e);if(t.name&&t.definition){a.error("The properties 'name' and 'definition' shouldn't be provided at the same time. The fragment definition will be used instead of the name. Fragment name was: "+t.name);delete t.name}if(t.name?.startsWith("module:")){if(t.type){throw new TypeError(`Invalid arguments: If the fragment name is given in module name syntax the type must be omitted. Found type: '${t.type}'.`)}else{t.type="JS"}}else{t.type??="XML"}t.async=true;t.processingMode=t.processingMode||u.Sequential;t.fragmentName=t.fragmentName||t.name;t.fragmentContent=t.fragmentContent||t.definition;t.oController=t.controller;t.sOwnerId=l();delete t.name;delete t.definition;delete t.controller;var n=y(t);return n.then(function(e){return e._pContentPromise})};d.getType=function(e){return c[e]};sap.ui.xmlfragment=function(e,t,n){if(typeof e==="string"){if(typeof t==="string"){return sap.ui.fragment({fragmentName:t,sId:e,type:"XML"},n)}else{return sap.ui.fragment(e,"XML",t)}}else{e.type="XML";return sap.ui.fragment(e,t)}};sap.ui.jsfragment=function(e,t,n){if(typeof e==="string"&&typeof t==="object"){if(t.createContent){p[e]=t;sap.ui.loader._.declareModule(e.replace(/\./g,"/")+".fragment.js")}else{return sap.ui.fragment(e,"JS",t)}}else if(typeof e==="string"&&t===undefined){return sap.ui.fragment(e,"JS")}else if(typeof e==="object"){e.type="JS";return sap.ui.fragment(e,t)}else if(arguments.length>=3){return sap.ui.fragment({id:e,fragmentName:t,type:"JS"},n)}else{a.error("sap.ui.jsfragment() was called with wrong parameter set: "+e+" + "+t)}};sap.ui.htmlfragment=function(e,t,n){if(typeof e==="string"){if(typeof t==="string"){return sap.ui.fragment({fragmentName:t,sId:e,type:"HTML"},n)}else{return sap.ui.fragment(e,"HTML",t)}}else{e.type="HTML";return sap.ui.fragment(e,t)}};d.registerType("XML",{load:function(e){return r.loadTemplatePromise(e.fragmentName,"fragment").then(function(e){return e})},init:function(e){this._aContent=[];if(e.fragmentContent){if(typeof e.fragmentContent==="string"){this._xContent=m.parse(e.fragmentContent).documentElement}else{this._xContent=e.fragmentContent}}else{a.warning("Synchronous loading of fragment, due to Fragment.init() call for '"+e.fragmentName+"'. Use 'sap/ui/core/Fragment' module with Fragment.load() instead.","SyncXHR",null,function(){return{type:"SyncXHR",name:"Fragment"}});this._xContent=r.loadTemplate(e.fragmentName,"fragment")}this._oContainingView=this._sExplicitId?this:e.containingView||this;if(this._oContainingView===this){this._oContainingView.oController=e.containingView&&e.containingView.oController||e.oController}this._sProcessingMode=e.processingMode;var t=this._oContainingView._fnSettingsPreprocessor;var i={fnRunWithPreprocessor:function(e){return h(e,{settings:t})}};var s=r.parseTemplatePromise(this._xContent,this,this._bAsync,i).then(function(t){this._aContent=t;if(this._aContent&&this._aContent.length&&e.objectBindings){this._aContent.forEach(function(t,i){if(t instanceof n){for(var r in e.objectBindings){t.bindObject(e.objectBindings[r])}}})}return this._aContent.length>1?this._aContent:this._aContent[0]}.bind(this));if(!this._bAsync){try{s.unwrap()}catch(t){o.errorThrows(this.getMetadata().getName()+": An Error occured during XML processing of '"+(e.fragmentName||e.fragmentContent)+"' with id '"+this.getId()+"'",{cause:t})}}return s}});d.registerType("JS",{load:function(e){let t;if(e.fragmentName.startsWith("module:")){t=e.fragmentName.substring(7)}else{t=e.fragmentName.replace(/\./g,"/")+".fragment"}return new Promise(function(e,n){sap.ui.require([t],function(t){e(t)},n)})},init:function(e){this._aContent=[];if(e.fragmentContent){f(this,e.fragmentContent)}else{(()=>{if(!p[e.fragmentName]){sap.ui.requireSync(e.fragmentName.replace(/\./g,"/")+".fragment")}})();f(this,p[e.fragmentName])}this._oContainingView=e.containingView||this;return h(function(){var t;if(this.fnScopedRunWithOwner){this.fnScopedRunWithOwner(function(){t=this.createContent(e.oController||this._oContainingView.oController)}.bind(this))}else{t=this.createContent(e.oController||this._oContainingView.oController)}if(t instanceof Promise){return t.then(function(e){this._aContent=this._aContent.concat(e);return this._aContent.length>1?this._aContent:this._aContent[0]}.bind(this))}else{return new Promise(function(e,n){this._aContent=this._aContent.concat(t);e(this._aContent.length>1?this._aContent:this._aContent[0])}.bind(this))}}.bind(this),{settings:this._oContainingView._fnSettingsPreprocessor})}});(function(){var e={};var t=function(t){var n=sap.ui.require.toUrl(t.replace(/\./g,"/"))+".fragment.html";var i=e[n];var r;if(!i){r=t.replace(/\./g,"/")+".fragment.html";i=s.loadResource(r);e[n]=i}return i};d.registerType("HTML",{load:function(e){var t=e.fragmentName.replace(/\./g,"/")+".fragment";return s.loadResource(t+".html",{async:true}).then(function(e){return e})},init:function(e){this._aContent=[];this.getContent=function(){return this._aContent};this.addContent=function(e){this._aContent.push(e)};this._oContainingView=e.containingView||this;this._sProcessingMode=e.processingMode;var n=e.fragmentContent||t(e.fragmentName);this._oTemplate=document.createElement("div");if(typeof n==="string"){this._oTemplate.innerHTML=n}else{var r=n;var o=document.createDocumentFragment();for(var a=0;a<r.length;a++){o.appendChild(r.item(a))}this._oTemplate.appendChild(o)}var s=this._oTemplate.getElementsByTagName("template")[0];var f=this.getMetadata().getAllProperties();if(s){var m=this;var g=s.getAttributeNames();for(var a=0;a<g.length-1;a++){var u=g[a];var p=i.convertAttributeToSettingName(u,m.getId());var c=s.getAttribute(u);var l=f[p];if(!e[p]){if(l){e[p]=i.convertValueToType(i.getPropertyDataType(l),c)}else if(sap.ui.core.mvc.HTMLView._mAllowedSettings[p]){e[p]=c}}}this._oTemplate=s}if(this._oTemplate.content){var d=this._oTemplate.content;this._oTemplate=document.createElement("div");this._oTemplate.appendChild(d)}return h(function(){if(this.fnScopedRunWithOwner){this.fnScopedRunWithOwner(function(){i.compile(this._oTemplate,this)}.bind(this))}else{i.compile(this._oTemplate,this)}var e=this.getContent();if(e&&e.length===1){this._aContent=[e[0]];return new Promise(function(e,t){e(this._aContent[0])}.bind(this))}}.bind(this),{settings:this._oContainingView._fnSettingsPreprocessor})}})})();return d});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/core/dnd/DragAndDrop", ["../library","sap/base/i18n/Localization","sap/ui/Device","sap/ui/core/Element","sap/ui/core/StaticArea","../UIArea","sap/ui/thirdparty/jquery"],function(e,t,r,n,o,i,jQuery){"use strict";var a=e.dnd.RelativeDropPosition;var f={},s=null,g=null,u=null,l=[],c=[],d=null,p,D,h,v,m={},w,b,A,C;function E(e,t){if(!e){return}if(e.addStyleClass){e.addStyleClass(t)}else{e.$().addClass(t)}}function y(e,t){if(!e){return}if(e.removeStyleClass){e.removeStyleClass(t)}else{e.$().removeClass(t)}}function T(e,t){var r=n.closestTo(e.target,true);if(!r){return}var o=new jQuery.Event(null,e);o.type=t;r.getUIArea()._handleEvent(o)}function x(e,t,r,n=true){const o=new Event(e);if(r){o.dataTransfer=r}const i=new jQuery.Event(o);i.setMark("simulated",n);t.$().trigger(i);return i}function S(e,t){let r=[];const n=e.getParent();const o=n.getMetadata();const i=e.sParentAggregationName;const a=o.getAllAggregations();if(a[i]){r=n[a[i]._sGetter]()}else{const e=o.getAllPrivateAggregations();if(e[i]){r=n.getAggregation(i)}}const f=r.indexOf(e);if(t=="next"){return r.slice(f+1).find(e=>e.getDomRef())}return r.slice(0,f).findLast(e=>e.getDomRef())}function I(e){if(e.isMarked()||!(e.ctrlKey||e.metaKey)||!e.code?.startsWith("Arrow")){return}const t=e.target;const r=t.hasAttribute("data-sap-ui-draghandle")?n.closestTo(t,true):n.getElementById(t.id);if(!r){return}const o=n.getElementById(r.$().closest("[data-sap-ui-draggable]").attr("id"));const i=o?.getParent();const a=o?.sParentAggregationName;if(!i||!a){return}const f=[];const s=[];i.getDragDropConfig().forEach(e=>{if(!e.getKeyboardHandling()){return}if(e.isA("sap.ui.core.dnd.IDropInfo")&&e.getTargetAggregation()==a&&e.getDropPosition()=="Between"){f.push(e)}if(e.isA("sap.ui.core.dnd.IDragInfo")&&e.getSourceAggregation()==a){s.push(e.getGroupName())}});const g=f.find(e=>s.includes(e.getGroupName()));if(!g){return}return{oDragControl:o,oDropConfig:g}}function k(e){return!e.disabled&&/^(input|textarea)$/.test(e.localName)}function N(e,t){if(!e||!e.getDragGhost){return}var r=e.getDragGhost();if(!r){return}if(!D){D=jQuery('<div class="sapUiDnDGhostContainer"></div>');jQuery(document.body).append(D)}D.append(r);window.setTimeout(function(){D.empty()},0);var n=t.originalEvent;n.dataTransfer.setDragImage(r,n.offsetX,n.offsetY)}function R(e){var t={},r,n=e.originalEvent.dataTransfer,o=function(e,t){n.setData(e,t)};return{setData:function(e,r){r=""+r;t[e]=r;o(e,r)},getData:function(e){return t[e]},setTextData:function(e){e=""+e;t["text/plain"]=e;t["text"]=e;o("text/plain",e);o("text",e)},getTextData:function(){return t["text/plain"]},setComplexData:function(e,r){t[e]=r},getComplexData:function(e){return t[e]},getIndicator:function(){return p&&p[0]},setIndicatorConfig:function(e){r=e},getIndicatorConfig:function(){return r},getDragControl:function(){return s},getDropControl:function(){return u},setDropControl:function(e){u=e},getDropInfo:function(){return c[0]||null},getDropPosition:function(){return h}}}function B(){O();s=g=u=d=null;h="";C=false;l=[];c=[]}function M(){if(p){return p}p=jQuery("<div class='sapUiDnDIndicator'></div>");jQuery(o.getDomRef()).append(p);return p}function O(){if(p){p.removeAttr("style");p.hide();m={}}}function P(e,r,n,o,i){if(!r){return}const f=e.getMark("simulated");if(f){if(f=="prev"){return a.Before}if(f=="next"){return a.After}}var s=u.getDropAreaRect?u.getDropAreaRect(o):r.getBoundingClientRect(),g=e.dragSession&&e.dragSession.getIndicatorConfig(),l=window.scrollY,c=window.scrollX,d=M(),p,D={},h={top:s.top+l,bottom:s.bottom+l,left:s.left+c,right:s.right+c,width:s.width,height:s.height};if(!n||n=="On"){p=a.On;o=""}else if(o=="Horizontal"){var v=e.pageX-h.left;D.height=h.height;D.top=h.top;if(n=="Between"){D.width="";if(v<h.width*.5){p=a.Before;D.left=h.left}else{p=a.After;D.left=h.right}}else if(n=="OnOrBetween"){if(v<h.width*.25){p=a.Before;D.left=h.left;D.width=""}else if(v>h.width*.75){p=a.After;D.left=h.right;D.width=""}else{p=a.On}}if(p!=a.On&&t.getRTL()){p=p==a.After?a.Before:a.After}}else{var w=e.pageY-h.top;D.width=h.width;D.left=h.left;if(n=="Between"){D.height="";if(w<h.height*.5){p=a.Before;D.top=h.top}else{p=a.After;D.top=h.bottom}}else if(n=="OnOrBetween"){if(w<h.height*.25){p=a.Before;D.top=h.top;D.height=""}else if(w>h.height*.75){p=a.After;D.top=h.bottom;D.height=""}else{p=a.On}}}if(i||g?.display=="none"){return p}if(p==a.On){D.top=h.top;D.left=h.left;D.width=h.width;D.height=h.height;n=p}else{n="Between"}if(m.top!=D.top||m.left!=D.left||m.width!=D.width||m.height!=D.height){d.attr("data-drop-layout",o);d.attr("data-drop-position",n);d.css(Object.assign(D,g));d.show();m=D}return p}function U(e){var t=e.getParent(),r=e.getDragDropConfig?e.getDragDropConfig():[],n=t&&t.getDragDropConfig?t.getDragDropConfig():[];return r.concat(n)}function L(e){var t=U(e);return t.filter(function(t){return t.isDraggable(e)})}function G(e,t,r){var n=U(e);t=t||[];return n.filter(function(e){return!e.isA("sap.ui.core.dnd.IDragInfo")}).concat(t).filter(function(n){if(!n.isDroppable(e,r)){return false}var o=n.getGroupName();if(!o){return true}return t.some(function(e){return e.getGroupName()==o})})}function W(e,t){e.preventDefault();if(s){var r=t.getDropEffect().toLowerCase();e.originalEvent.dataTransfer.dropEffect=r}}function $(e,t,r,n){var o=t.getTargetAggregation();if(!o){return P(e,r.getDomRef(),undefined,undefined,n)}var i;if(e.getMark("DragWithin")==o){i=r.getDomRefForSetting(o)}i=i||r.getDomRef();return P(e,i,t.getDropPosition(true),t.getDropLayout(true),n)}f.preprocessEvent=function(e){if(d&&e.type.indexOf("dr")==0){e.dragSession=d;if(A){A=clearTimeout(A)}}var t="onbefore"+e.type;if(f[t]){f[t](e)}};f.postprocessEvent=function(e){var t="onafter"+e.type;if(f[t]){f[t](e)}};f.onbeforekeydown=function(e){if(I(e)){e.setMark("dnd")}};f.onafterkeydown=function(e){if(!e.getMark("dnd")){return}let r,n;const{oDragControl:o,oDropConfig:i}=I(e);const a=i.getDropLayout(true);if(a=="Horizontal"&&(e.code=="ArrowRight"||e.code=="ArrowLeft")){const i=t.getRTL()?"prev":"next";const a=t.getRTL()?"next":"prev";r=e.code=="ArrowRight"?i:a;n=S(o,r);e.preventDefault()}if(a=="Vertical"&&(e.code=="ArrowDown"||e.code=="ArrowUp")){r=e.code=="ArrowDown"?"next":"prev";n=S(o,r);e.preventDefault()}if(!n){return}const f=new DataTransfer;const s=x("dragstart",o,f,r);if(s.isDefaultPrevented()||s.isMarked("NonDraggable")){return}const g=x("dragenter",n,f,r);if(!g.isMarked("NonDroppable")){x("drop",n,f,r)}x("dragend",o,f,r)};f.onbeforemousedown=function(e){if(r.browser.firefox&&k(e.target)){w=jQuery(e.target).closest("[data-sap-ui-draggable=true]").prop("draggable",false)[0]}};f.onbeforemouseup=function(e){if(w){w.draggable=true;w=null}};f.onbeforedragstart=function(e){if(!e.target.draggable){return}if(k(document.activeElement)){e.target.getAttribute("data-sap-ui-draggable")&&e.preventDefault();return}s=n.closestTo(e.target,true);if(!s){return}l=L(s);if(!l.length){return}if(r.browser.mobile&&!e.originalEvent.dataTransfer.getData("text")){e.originalEvent.dataTransfer.setData("text"," ")}e.dragSession=d=R(e)};f.onafterdragstart=function(e){if(!l.length||e.isDefaultPrevented()){B();return}l=e.isMarked("NonDraggable")?[]:l.filter(function(t){return t.fireDragStart(e)});if(!l.length){e.preventDefault();B();return}if(e.simulated){return}N(s,e);E(s,"sapUiDnDDragging");if(jQuery(e.target).closest(".sapUiScrollDelegate")[0]){jQuery("html").addClass("sapUiDnDNoScrolling")}};f.onbeforedragenter=function(e){var t=n.closestTo(e.target,true);if(t&&g===t){e.setMark("DragWithin","SameControl")}else{v=Date.now();g=t}var r=[],o;u=t;for(var i=0;i<20&&u;i++){r=G(u,l,e);if(r.length){break}o=u.getDomRef();o=o&&o.parentElement;u=n.closestTo(o,true)}if(e.getMark("DragWithin")!="SameControl"){c=r;if(d){d.setIndicatorConfig(null)}}if(!c.length){u=null}else if(!d){C=true;e.dragSession=d=R(e)}};f.onafterdragenter=function(e){if(!u||e.isMarked("NonDroppable")){c=[]}else if(e.getMark("DragWithin")!="SameControl"){c=c.filter(function(t){h=$(e,t,u,true);return t.fireDragEnter(e)})}var t=c[0];if(!t||t.getDropEffect()=="None"){O();h=""}else{W(e,t);h=$(e,t,u)}};f.onbeforedragover=function(e){var t=Date.now();if(t-v>=1e3){T(e,"longdragover");v=t}};f.onafterdragover=function(e){if(!u||e.isMarked("NonDroppable")){c=[]}else{c=c.filter(function(t){h=$(e,t,u,true);return t.fireDragOver(e)})}const t=c[0];if(!t||t.getDropEffect()=="None"){O();h=""}else{W(e,t);if(t&&t.getDropPosition(true)=="On"){return}h=$(e,t,u)}};f.onafterdragleave=function(e){if(C){if(r.browser.safari){A=setTimeout(B,100)}else if(!e.relatedTarget){B()}}};f.onbeforedrop=function(e){if(c.length){e.preventDefault()}};f.onafterdrop=function(e){c.forEach(function(t){t.fireDrop(e)});b=requestAnimationFrame(this.onafterdragend.bind(this,e))};f.onafterdragend=function(e){b=cancelAnimationFrame(b);l.forEach(function(t){t.fireDragEnd(e)});y(s,"sapUiDnDDragging");jQuery("html").removeClass("sapUiDnDNoScrolling");B()};i.addEventPreprocessor(f.preprocessEvent);i.addEventPostprocessor(f.postprocessEvent);return f},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/core/dnd/DragDropBase", ["sap/base/Log","../Element","../library","./DragAndDrop"],function(e,t){"use strict";var a=t.extend("sap.ui.core.dnd.DragDropBase",{metadata:{abstract:true,library:"sap.ui.core",properties:{groupName:{type:"string",defaultValue:null,invalidate:false},enabled:{type:"boolean",defaultValue:true,invalidate:false},keyboardHandling:{type:"boolean",defaultValue:false,invalidate:false}}}});a.prototype.bIgnoreMetadataCheck=false;a.prototype.isDraggable=function(e,t){return false};a.prototype.isDroppable=function(e,t){return false};a.prototype.checkMetadata=function(t,a,r){if(this.bIgnoreMetadataCheck){return true}var n=t.getMetadata().getDragDropInfo(a);if(!n[r]){e.warning((a?a+" aggregation of ":"")+t+" is not configured to be "+r);return false}return true};a.prototype.setProperty=function(e,a,r){r=r==undefined?(this.getMetadata().getProperty(e).appData||{}).invalidate===false:r;return t.prototype.setProperty.call(this,e,a,r)};return a});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/core/dnd/DragInfo", ["./DragDropBase"],function(t){"use strict";var e=t.extend("sap.ui.core.dnd.DragInfo",{metadata:{library:"sap.ui.core",interfaces:["sap.ui.core.dnd.IDragInfo"],properties:{sourceAggregation:{type:"string",defaultValue:null}},events:{dragStart:{allowPreventDefault:true},dragEnd:{}}}});e.Mixin=function(){this.isDraggable=function(t,e){if(!this.getEnabled()){return false}var r=this.getParent();if(!r){return false}var a=this.getSourceAggregation();if(!this.checkMetadata(r,a,"draggable")){return false}if(r===t&&!a||r===t&&e&&a===e||t.getParent()===r&&a===t.sParentAggregationName){return t.isDragAllowed&&!t.isDragAllowed(this)?false:true}return false};this.fireDragStart=function(t){if(!t||!t.dragSession){return}var e=t.dragSession;return this.fireEvent("dragStart",{dragSession:e,browserEvent:t.originalEvent,target:e.getDragControl()},true)};this.fireDragEnd=function(t){if(!t||!t.dragSession){return}var e=t.dragSession;return this.fireEvent("dragEnd",{dragSession:e,browserEvent:t.originalEvent,target:e.getDragControl()})};this.setEnabled=function(t){this.setProperty("enabled",t,false);this.invalidateDraggables();return this};this.setParent=function(){t.prototype.setParent.apply(this,arguments);this.invalidateDraggables();return this};this.setSourceAggregation=function(t){var e=this.getSourceAggregation();if(e==t){return this}e&&this.invalidateDraggables();this.setProperty("sourceAggregation",t,false);this.invalidateDraggables();return this};this.invalidateDraggables=function(){var t=this.getParent();if(t&&t.bOutput==true){var e=this.getSourceAggregation();if(e){[].concat(t.getAggregation(e)).forEach(function(t){if(t&&t.bOutput==true){t.invalidate()}})}else{t.invalidate()}}}};e.Mixin.apply(e.prototype);return e});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/core/dnd/DropInfo", ["./DragDropBase"],function(r){"use strict";var t=r.extend("sap.ui.core.dnd.DropInfo",{metadata:{library:"sap.ui.core",interfaces:["sap.ui.core.dnd.IDropInfo"],properties:{targetAggregation:{type:"string",defaultValue:null,invalidate:false},dropEffect:{type:"sap.ui.core.dnd.DropEffect",defaultValue:"Move",invalidate:false},dropPosition:{type:"sap.ui.core.dnd.DropPosition",defaultValue:"On",invalidate:false},dropLayout:{type:"sap.ui.core.dnd.DropLayout",defaultValue:"Default",invalidate:false}},events:{dragEnter:{allowPreventDefault:true},dragOver:{allowPreventDefault:true},drop:{}}}});t.prototype.getDropTarget=function(){return this.getParent()};t.prototype.isDroppable=function(r,t){this.sTemporaryDropPosition="";if(!this.getEnabled()){return false}var e=this.getDropTarget();if(!e){return false}var o=this.getTargetAggregation();if(!this.checkMetadata(e,o,"droppable")){return false}var o=this.getTargetAggregation();if(e===r&&!o){return true}if(r.getParent()===e&&o===r.sParentAggregationName){return true}if(t&&o&&e===r){var i=r.getDomRefForSetting(o);if(i&&i!=t.target&&i.contains(t.target)){t.setMark("DragWithin",o);this.sTemporaryDropPosition="On";return true}}return false};t.prototype.getDropPosition=function(r){if(r&&this.sTemporaryDropPosition){return this.sTemporaryDropPosition}return this.getProperty("dropPosition")};t.prototype.getDropLayout=function(r){var t=this.getProperty("dropLayout");if(!r||t!="Default"){return t}return this.getDropTarget().getMetadata().getDragDropInfo(this.getTargetAggregation()).layout};t.prototype.fireDragEnter=function(r){if(!r||!r.dragSession){return}var t=r.dragSession;return this.fireEvent("dragEnter",{dragSession:r.dragSession,browserEvent:r.originalEvent,target:t.getDropControl(),dropPosition:t.getDropPosition()},true)};t.prototype.fireDragOver=function(r){if(!r||!r.dragSession){return}var t=r.dragSession;return this.fireEvent("dragOver",{dragSession:r.dragSession,browserEvent:r.originalEvent,target:t.getDropControl(),dropPosition:t.getDropPosition()},true)};t.prototype.fireDrop=function(r){if(!r||!r.dragSession){return}var t=r.dragSession;this.fireEvent("drop",{dragSession:r.dragSession,browserEvent:r.originalEvent,dropPosition:t.getDropPosition(),draggedControl:t.getDragControl(),droppedControl:t.getDropControl()})};return t});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/dom/denormalizeScrollBeginRTL", ["sap/ui/util/_FeatureDetection"],function(i){"use strict";var t;if(i.initialScrollPositionIsZero()){t=function(i,t){return-i}}else{t=function(i,t){return t.scrollWidth-t.clientWidth-i}}var n=function(i,n){if(n){return t(i,n)}};return n});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/dom/denormalizeScrollLeftRTL", ["sap/ui/util/_FeatureDetection"],function(i){"use strict";var t;if(i.initialScrollPositionIsZero()){t=function(i,t){return t.clientWidth+i-t.scrollWidth}}else{t=function(i,t){return i}}var n=function(i,n){if(n){return t(i,n)}};return n});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/dom/jquery/scrollLeftRTL", ["sap/ui/dom/denormalizeScrollLeftRTL","sap/ui/util/_FeatureDetection","sap/ui/thirdparty/jquery"],function(t,e,jQuery){"use strict";var i;if(e.initialScrollPositionIsZero()){i=function(t){return t.scrollWidth+t.scrollLeft-t.clientWidth}}else{i=function(t){return t.scrollLeft}}var r=function(e){var r=this.get(0);if(r){if(e===undefined){return i(r)}else{r.scrollLeft=t(e,r);return this}}};jQuery.fn.scrollLeftRTL=r;return jQuery});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/Constants", [],function(){"use strict";return{EDITOR_MODE:{ADMIN:"admin",CONTENT:"content",TRANSLATION:"translation",ALL:"all"}}});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/Editor", ["sap/base/i18n/Localization","sap/ui/core/Control","sap/ui/core/Core","sap/base/util/deepClone","sap/base/util/deepEqual","sap/base/util/merge","sap/ui/base/Interface","sap/ui/core/Element","sap/ui/core/Lib","sap/ui/integration/Designtime","sap/ui/model/json/JSONModel","sap/ui/model/odata/v4/ODataModel","sap/ui/integration/util/Utils","sap/ui/integration/util/Destinations","sap/ui/integration/util/DataProviderFactory","sap/m/Label","sap/m/HBox","sap/m/VBox","sap/ui/core/Icon","sap/m/ResponsivePopover","sap/m/Popover","sap/m/Text","sap/base/Log","sap/ui/core/Popup","sap/base/i18n/ResourceBundle","sap/ui/integration/editor/EditorResourceBundles","sap/ui/dom/includeStylesheet","sap/base/util/LoaderExtensions","sap/ui/core/theming/Parameters","sap/base/util/ObjectPath","sap/m/FormattedText","sap/m/MessageStrip","sap/m/ToolbarSpacer","sap/ui/model/resource/ResourceModel","./Manifest","./Merger","./Settings","./Constants","sap/m/FlexItemData","sap/m/FlexBox","sap/m/Button"],function(e,t,i,a,n,s,r,o,l,d,f,u,g,p,h,c,_,m,v,y,b,I,T,D,M,E,C,P,x,S,A,R,O,L,w,B,F,V,N,U,j){"use strict";var k=b.prototype.init;b.prototype.init=function(){k.apply(this,arguments);var e=this.oPopup._applyPosition,t=this;this.oPopup._applyPosition=function(){var i=t.close;t.close=function(){};e.apply(this,arguments);t.close=i}};function W(e){if(e&&e.nodeType!==1){return 0}var t=parseInt(window.getComputedStyle(e).getPropertyValue("z-index"));if(isNaN(t)){return W(e.parentNode)}return t+1}var H=/\{\{(?!parameters.)(?!destinations.)([^\}\}]+)\}\}/g,q=/\{\{parameters\.([^\}\}]+)/g,G=5e3,K="_strip",z="module:",J;var X=t.extend("sap.ui.integration.editor.Editor",{metadata:{library:"sap.ui.integration",properties:{mode:{type:"string",defaultValue:V.EDITOR_MODE.ADMIN},language:{type:"string",defaultValue:""},allowDynamicValues:{type:"boolean",defaultValue:false},allowSettings:{type:"boolean",defaultValue:false},designtime:{type:"object"},section:{type:"string",defaultValue:"sap.card"},host:{type:"string",defaultValue:""},baseUrl:{type:"sap.ui.core.URI",defaultValue:null},json:{type:"object"},previewPosition:{type:"string",defaultValue:"right"},width:{type:"sap.ui.core.CSSSize",defaultValue:""},height:{type:"sap.ui.core.CSSSize",defaultValue:""}},aggregations:{_formContent:{type:"sap.ui.core.Control",multiple:true,visibility:"hidden"},_preview:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_messageStrip:{type:"sap.m.MessageStrip",multiple:false,visibility:"hidden"},_extension:{type:"sap.ui.integration.editor.Extension",multiple:false,visibility:"hidden"}},events:{manifestReady:{},fieldReady:{},destinationReady:{},UIReady:{},ready:{}}},renderer:{apiVersion:2,render:function(e,t){var i=t.getAggregation("_preview");var a=t.getMode()!==V.EDITOR_MODE.TRANSLATION&&t.hasPreview();var s=t.getPreviewPosition();if(a&&(s==="top"||s==="bottom")){e.openStart("div",t);e.openEnd();if(t.isFieldReady()&&s==="top"){e.renderControl(i)}}if(a&&s==="left"){e.openStart("div",t);e.class("sapUiIntegrationEditor");e.openEnd();if(t.isFieldReady()){e.renderControl(i)}}else if(a&&(s==="top"||s==="bottom")){e.openStart("div");e.class("sapUiIntegrationEditor");e.openEnd()}else{e.openStart("div",t);e.class("sapUiIntegrationEditor");e.openEnd()}if(t.isFieldReady()){e.openStart("div");e.class("sapUiIntegrationEditorForm");if(t.getMode()!==V.EDITOR_MODE.TRANSLATION){e.class("settingsButtonSpace")}e.openEnd();if(t.getMode()!==V.EDITOR_MODE.TRANSLATION){e.renderControl(t.getAggregation("_messageStrip"))}var r=t.getAggregation("_formContent");if(r){var l;var d;var f;var u;var g=[];var p=[];var h;var c=function(){if(g.length>0){var e=2-g.length;for(var t=0;t<e;t++){g.push(new m)}l.addContent(new U({alignItems:"Start",justifyContent:"SpaceBetween",items:g}));g=[]}};var v=function(){if(p.length>0){var e=2-p.length;for(var t=0;t<e;t++){p.push(new m)}d.addContent(new U({alignItems:"Start",justifyContent:"SpaceBetween",items:p}));p=[]}};var y=function(t){if(t.getContent().length>0){var i=t.getContent();if(i.length===1&&i[0].isA("sap.m.MessageStrip")){return}if(i[0].isA("sap.m.MessageStrip")){t.removeContent(0);t.addContent(i[0])}e.renderControl(t.getParent());if(t._messageStrip){e.renderControl(t._messageStrip)}}};var b=function(e,t){if(e&&t.getContent().length>0){var i=t.getContent();if(i[0].isA("sap.m.MessageStrip")){t.removeContent(0);t.addContent(i[0])}e.addContent(t.getParent());if(t._messageStrip){e.addContent(t._messageStrip)}}else{t=null}};var I=function(e,t){var i=e.getContent(),a;if(i.length>0){for(var n=0;n<i.length;n++){if(i[n].getAggregation("_field")&&i[n].getAggregation("_field").isA("sap.m.IconTabBar")){a=i[n].getAggregation("_field")}}}if(a&&t.getContent().length>0){a.addItem(t)}};for(var T=0;T<r.length;T++){var D=r[T];if(t.getMode()!==V.EDITOR_MODE.TRANSLATION){if(D.isA("sap.ui.integration.editor.fields.GroupField")){var M=D.getAggregation("_field");if(!M){continue}if(d){v();if(M.isA("sap.m.Panel")&&d.isA("sap.m.Panel")){b(l,d)}else{I(l,d)}}var E=0;if(M.isA("sap.m.Panel")){E=M._level}else if(M.isA("sap.m.IconTabBar")){E="1"}if(E==="1"){if(g.length>0){c()}if(M.isA("sap.m.IconTabBar")){var C=l.getContent(),P=false,x;if(C.length>0){for(var S=0;S<C.length;S++){if(C[S].getAggregation("_field")&&C[S].getAggregation("_field").isA("sap.m.IconTabBar")){P=true;x=C[S].getAggregation("_field")}}}d=M.getItems()[0];d._subItems=d._subItems||[];if(!P){M.removeItem(M.getItems()[0]);if(M._messageStrip){l.addContent(M._messageStrip)}M.addStyleClass("sapUiIntegrationEditorSubTab");l.addContent(D)}else{x.addItem(M.getItems()[0]);M.destroy()}}else{d=M;d._subItems=d._subItems||[]}}else{if(l){c();y(l);d=null}l=M;l._subItems=l._subItems||[];l.addStyleClass("sapUiIntegrationEditorItem")}if(T===r.length-1){c();y(l)}continue}if(D.isA("sap.m.FormattedText")){if(d){d.addContent(D.addStyleClass("sapUiIntegrationEditorHint"))}else{l.addContent(D.addStyleClass("sapUiIntegrationEditorHint"))}if(T===r.length-1){if(d){v();b(l,d)}c();y(l)}continue}var A=D._layout;if(D.isA("sap.m.Label")){D.addStyleClass("sapUiIntegrationEditorItemLabel");if(D.getRequired()){D.addStyleClass("sapUiIntegrationEditorItemLabelWithRequired")}if(A&&!n(A,{})){if(A.alignment&&A.alignment.label==="end"){D.setTextAlign("End")}u=D}else{if(D._cols===2){if(d){v()}else{c()}}else if(p.length===2){v()}else if(g.length===2){c()}if(d){d.addContent(D)}else{l.addContent(D)}}}else if(D.isA("sap.m.ToolbarSpacer")){if(D._hasLine){D.addStyleClass("sapUiIntegrationEditorSpacerWithLine")}else{D.addStyleClass("sapUiIntegrationEditorSpacerWithoutLine")}if(d){v();d.addContent(D)}else{c();l.addContent(D)}}else{var R=D.getConfiguration(),O=new _,L=.1,w=0,B;if(D._descriptionIcon){O.addItem(D._descriptionIcon);L+=.9}var F=o.getElementById(D.getAssociation("_messageIcon"));if(D.getAssociation("_messageIcon")&&F){O.addItem(F);L+=1.2}if(D._settingsButton){D._settingsButton.addStyleClass("sapUiIntegrationEditorSettingsButton");w=2}var j=new N({growFactor:10,maxWidth:"calc(100% - "+w+"rem)"});var k=new N({maxWidth:"calc(100% - "+L+"rem)"});if(u){var W,H,q="50%";if(A&&A["label-width"]){q=A["label-width"]}var G=parseInt(q);var K=100-G;if(D._cols===2){G=G-.5;K=K-.5}if(A.alignment&&A.alignment.field==="end"){D.addStyleClass("sapUiIntegrationEditorFieldAlignEnd")}if(A.alignment&&A.alignment.label==="end"){u.setLayoutData(new N({maxWidth:"calc(100% - "+L+"rem)",minWidth:"calc(100% - "+L+"rem)"}))}else{u.setLayoutData(k)}if(O.getItems().length>0){u.addStyleClass("sapUiIntegrationEditorItemLabelWithInfo");B=new _({items:[u,O]})}else{B=u}if(A&&A.position&&A.position==="field-label"){B.setLayoutData(j);H=new _({alignItems:"Start",justifyContent:"SpaceBetween",items:[B,D._settingsButton]});H.setLayoutData(new N({growFactor:G,maxWidth:G+"%"}));D.setLayoutData(new N({growFactor:K,maxWidth:K+"%"}));W=new _({alignItems:"Start",justifyContent:"SpaceBetween",items:[D,H]})}else{D.setLayoutData(j);H=new _({alignItems:"Start",justifyContent:"SpaceBetween",items:[D,D._settingsButton]});B.setLayoutData(new N({growFactor:G,maxWidth:G+"%"}));H.setLayoutData(new N({growFactor:K,maxWidth:K+"%"}));W=new _({alignItems:"Start",justifyContent:"SpaceBetween",items:[B,H]})}if(D._cols===1){if(d){if(p.length===2){v()}if(R.hint){var z=t._createHint(R.hint,D.getParameterId());var J=new m({items:[W,z.addStyleClass("sapUiIntegrationEditorHint")]});J.addStyleClass("col1");p.push(J)}else{W.addStyleClass("col1");p.push(W)}}else{if(g.length===2){c()}if(R.hint){var z=t._createHint(R.hint,D.getParameterId());var J=new m({items:[W,z.addStyleClass("sapUiIntegrationEditorHint")]});J.addStyleClass("col1");g.push(J)}else{W.addStyleClass("col1");g.push(W)}}}else if(d){v();d.addContent(W)}else{c();l.addContent(W)}u=null}else{var X;if(d){X=d.getContent().pop()}else{X=l.getContent().pop()}X.setLayoutData(k);if(O.getItems().length>0){X.addStyleClass("sapUiIntegrationEditorItemLabelWithInfo");B=new _({items:[X,O]})}else{B=X}B.setLayoutData(j);var Y=new U({alignItems:"Start",justifyContent:"SpaceBetween",items:[B,D._settingsButton]});if(D._cols===1){var J=new m({items:[Y,D]});if(R.hint){var z=t._createHint(R.hint,D.getParameterId());J.addItem(z.addStyleClass("sapUiIntegrationEditorHint"))}J.addStyleClass("col1");if(d){p.push(J)}else{g.push(J)}}else if(d){d.addContent(Y);d.addContent(D)}else{l.addContent(Y);l.addContent(D)}}if(d){d._subItems.push({settingspath:D.getConfiguration()._settingspath,itemId:D.getId()})}l._subItems.push({settingspath:D.getConfiguration()._settingspath,itemId:D.getId()})}if(T===r.length-1){if(d){v();if(d.isA("sap.m.Panel")){b(l,d)}else{I(l,d)}}c();y(l)}}else{if(T===0){f=D.getAggregation("_field");e.renderControl(D);D.addStyleClass("sapUiIntegrationEditorTranslationPanel");continue}if(D.isA("sap.ui.integration.editor.fields.GroupField")){var M=D.getAggregation("_field");if(d){if(M.isA("sap.m.Panel")&&d.isA("sap.m.Panel")){b(l,d)}else{I(l,d)}}var Z=0;if(M.isA("sap.m.Panel")){Z=M._level}else if(M.isA("sap.m.IconTabBar")){if(M.getItems().length>0&&M.getItems()[0]._level){Z=M.getItems()[0]._level}}if(Z==="1"){if(M.isA("sap.m.IconTabBar")){if(T!==r.length-1||T<r.length&&(r[T].isA("sap.m.IconTabBar")||r[T].isA("sap.m.Panel"))){var Q=l.getContent(),$=false;if(Q.length>0){for(var ee=0;ee<Q.length;ee++){if(Q[ee].getAggregation("_field")&&Q[ee].getAggregation("_field").isA("sap.m.IconTabBar")){$=true}}}if(!$){d=M.getItems()[0];M.removeItem(M.getItems()[0]);l.addContent(M.getParent())}else{d=M.getItems()[0]}}}else{d=M}}else{d=null;if(l&&l.getContent().length>0){f.addContent(l.getParent())}l=M}if(T===r.length-1){c();y(l)}continue}if(D.isA("sap.m.ToolbarSpacer")){continue}if(D.isA("sap.m.FormattedText")){continue}if(D.isA("sap.m.Label")){if(d){d.addContent(D)}else{l.addContent(D)}continue}if(D.isOrigLangField){h=D;continue}h.addStyleClass("sapUiIntegrationFieldTranslationText");var W=new _({items:[h,D]}).addStyleClass("notWrappingRow");if(d){d.addContent(W)}else{l.addContent(W)}if(T===r.length-1){if(d){if(d.isA("sap.m.Panel")){b(l,d)}else{I(l,d)}}f.addContent(l.getParent())}}}}e.close("div");if(a&&s==="right"){e.renderControl(i)}}e.close("div");if(a&&(s==="top"||s==="bottom")){if(s==="bottom"){e.renderControl(i)}e.close("div")}if(t.isFieldReady()&&!t.isReady()){t.fireUIReady();if(t._aFieldDataReadyPromise.length>0){Promise.all(t._aFieldDataReadyPromise).then(function(){t._aFieldDataReadyPromise=[];if(!t.isReady()){t._ready=true;t.fireReady()}})}else{t._ready=true;t.fireReady()}}}}});X.prototype.init=function(){if(X.oResourceBundle&&X.oResourceBundle.sLocale!==g._language){X.oResourceBundle=l.getResourceBundleFor("sap.ui.integration",g._language);this._applyLanguageChange()}this._fieldReady=false;this._ready=false;this._aFieldReadyPromise=[];this._aFieldDataReadyPromise=[];this._oResourceBundle=l.getResourceBundleFor("sap.ui.integration",g._language);this._appliedLayerManifestChanges=[];this._currentLayerManifestChanges={};this._mDestinationDataProviders={};var t=new R(this.getId()+K,{showIcon:false});t.addStyleClass("sapUiIntegrationEditorFieldMessageStrip");this.setAggregation("_messageStrip",t);K=t.getId();this.setLanguage(e.getLanguage());this._oLimitedInterface=new r(this,["getParameters","resolveDestination","request","getModel"])};X.prototype.getParameters=function(){if(!this._isManifestReady){T.error("sap.ui.integration.editor.Editor: the manifest is not ready. Consider using the 'manifestReady' event.","sap.ui.integration.editor.Editor");return null}var e=this._oEditorManifest.getProcessedParameters(),t={},i;for(i in e){t[i]=e[i].value}return t};X.prototype.resolveDestination=function(e){return this._oDestinations.getUrl(e)};X.prototype.isReady=function(){return this._ready};X.prototype.isFieldReady=function(){return this._fieldReady};X.prototype.hasPreview=function(){var e=this.getAggregation("_preview");if(e&&e.visible!==false){return true}return false};X.prototype.getSeparatePreview=function(){var e=this.getPreviewPosition();if(!this.isFieldReady()||e!=="separate"){return null}if(!this._oPreview){this._oPreview=this.getAggregation("_preview")}return this._oPreview};X.prototype.flattenData=function(e,t,i,a){a=a||"";i=i||[];if(typeof e==="object"){if(!e[t]){for(var n in e){this.flattenData(e[n],t,i,a+"/"+n)}}else{if(e.type){i.push({path:e.pathvalue||a.substring(1),value:e.pathvalue||"{context>"+a.substring(1)+"/value}",object:e})}else{i.push({path:a.substring(1),object:e});for(var n in e){this.flattenData(e[n],t,i,a+"/"+n)}}}}return i};X.prototype.setJson=function(e,t){this._fieldReady=false;this._ready=false;if(n(e,this._preIdOrSettings)){return this}this._preIdOrSettings=a(e,500);if(typeof e==="string"){try{e=JSON.parse(e)}catch(e){}}if(typeof e==="object"){if(e.manifestChanges){g.mapLanguagesInManifestChanges(e.manifestChanges);this._filterManifestChangesByLayer(e)}if(this._manifestModel){return}if(this._oDesigntimeInstance){this._oDesigntimeInstance.destroy()}if(e.host){this.setProperty("host",e.host)}if(e.baseUrl){this.setProperty("baseUrl",e.baseUrl)}this._appliedLayerManifestChanges=e.manifestChanges;this.createManifest(e,t)}};X.prototype.createManifest=function(e,t){var i=this.getBaseUrl();var a={},n=e.manifest;this._isManifestReady=false;if(typeof n==="string"){a.manifestUrl=n;n=null}if(this._oEditorManifest){this._oEditorManifest.destroy()}this.destroyAggregation("_extension");var r=B.layers[this.getMode()];this._oEditorManifest=new w(this.getSection(),n,i,e.manifestChanges);this._oEditorManifest.load(a).then(async function(){this._registerManifestModulePath();this._oInitialManifestModel=new f(this._oEditorManifest._oInitialJson);this.setProperty("json",this._oEditorManifest._oInitialJson,t);var e=this._oEditorManifest.oJson;var i=s({},e);this._beforeManifestModel=new f(i);if(r<B.layers[V.EDITOR_MODE.TRANSLATION]&&this._currentLayerManifestChanges){e=B.mergeDelta(e,[this._currentLayerManifestChanges],this.getSection())}this._manifestModel=new f(e);this._isManifestReady=true;this.fireManifestReady();this._initResourceBundlesForMultiTranslation();this._loadDefaultTranslations();if(this.getMode()===V.EDITOR_MODE.TRANSLATION){await this._loadSpecialTranslations()}this._createContextModel();if(this._oEditorManifest.getResourceBundle()){this._enhanceI18nModel(this._oEditorManifest.getResourceBundle())}return this._loadExtension().then(function(){this._initInternal()}.bind(this))}.bind(this))};X.prototype._initResourceBundlesForMultiTranslation=function(){var e=this._oEditorManifest.get("/sap.app/i18n");var t;var i;if(typeof e==="string"){t=this.getBaseUrl()+e}else if(typeof e==="object"){if(e.bundleUrl){t=this.getBaseUrl()+e.bundleUrl}if(e.supportedLocales){i=e.supportedLocales}}this._oEditorResourceBundles=new E({url:t,languages:X._oLanguages,supportedLocales:i});this._oEditorResourceBundles.loadResourceBundles()};X.prototype._registerManifestModulePath=function(){if(!this._oEditorManifest){return}this._sAppId=this._oEditorManifest.get("/sap.app/id");if(this._sAppId){P.registerResourcePath(this._sAppId.replace(/\./g,"/"),this._oEditorManifest.getUrl()||"/")}else{T.error("sap.ui.integration.editor.Editor: sap.app/id entry in the manifest is mandatory")}};X.prototype._loadDefaultTranslations=async function(){if(this._defaultTranslationsLoaded){return}var e=new L({bundle:this._oResourceBundle});await e.getResourceBundle();this.setModel(e,"i18n");this._defaultTranslationsLoaded=true};X.prototype._enhanceI18nModel=async function(e){var t=this.getModel("i18n");if(t.getResourceBundle().oUrlInfo.url!==e.oUrlInfo.url){await t.enhance(e);this._oResourceBundle=await t.getResourceBundle()}};X.prototype._loadExtension=function(){var e=this._oEditorManifest.get(this.getConfigurationPath()+"/extension")||this._oEditorManifest.get("/"+this.getSection()+"/extension"),t;if(!e){T.info("sap.ui.integration.editor.Editor: extension is not defined in manifest, do not load it.");return new Promise(function(e,t){e()})}if(e.startsWith(z)){t=e.replace(z,"")}else{t=this._sAppId.replace(/\./g,"/")+"/"+e}return new Promise(function(i,a){sap.ui.require([t],function(e){var t=new e;if(t._setEditor){t._setEditor(this,this._oLimitedInterface);this.setAggregation("_extension",t)}i()}.bind(this),function(t){T.error("sap.ui.integration.editor.Editor: failed to load "+e+". Check if the path is correct. Reason: "+t);a(t)})}.bind(this))};X.prototype.request=function(e){var t=this._oDataProviderFactory.create({request:e}).setAllowCustomDataType(true);return t._waitDependencies().then(function(){return t.getData()})};X.prototype.initDestinations=function(e){this._destinationsModel=new f({});this.setModel(this._destinationsModel,"destinations");var t=this.getHostInstance();if(e&&!t){T.error("sap.ui.integration.editor.Editor: Host with id '"+e+"' is not available during editor initialization. It must be available for host specific features to work.","Make sure that the host already exists, before assigning it to the editor.","sap.ui.integration.editor.Editor")}if(this._oDestinations){this._oDestinations.setHost(t)}else{var i=this.getConfigurationPath();this._oDestinations=new p({host:t,manifestConfig:this._manifestModel.getProperty(i+"/destinations"),prefix:"destinations"})}};X.prototype.initDataProviderFactory=function(){if(this._oDataProviderFactory){this._oDataProviderFactory.destroy()}var e=this.getAggregation("_extension");this._oDataProviderFactory=new h({destinations:this._oDestinations,extension:e,csrfTokensConfig:this._oEditorManifest.get(this.getConfigurationPath()+"/csrfTokens"),editor:this})};X.prototype.getRuntimeUrl=function(e){var t=this._sAppId,i,a=e&&e.trim().replace(/^\//,"");if(t===null){T.error("sap.ui.integration.editor.Editor: manifest is not ready so the URL can not be resolved. Consider using the 'manifestReady' event.","sap.ui.integration.editor.Editor");return null}if(!t||e.startsWith("http://")||e.startsWith("https://")||e.startsWith("//")){return e}i=t.replace(/\./g,"/");return sap.ui.require.toUrl(i)+"/"+a};X.prototype.getBindingNamespaces=function(){var e={},t=this.getAggregation("_extension");if(t){e.extension={formatters:t.getFormatters()}}return e};X.prototype.getHostInstance=function(){var e=this.getHost();if(!e){return null}return o.getElementById(e)};X.prototype.setLanguage=function(e,t){if(!e||typeof e!=="string"){return this}this._language=e.replaceAll("_","-");if(this.getLanguage()!=e){this._loadDefaultTranslations()}this.setProperty("language",e,t);if(!X._oLanguages[this._language]){this._language=this._language.split("-")[0]}if(!X._oLanguages[this._language]){T.warning("sap.ui.integration.editor.Editor: language: "+e+" is currently unknown, some UI controls might show "+e+" instead of the language name.")}return this};X.prototype.onAfterRendering=function(){if(this.getDomRef()){this._iZIndex=W(this.getDomRef());D.setInitialZIndex(this._iZIndex)}};X.prototype._filterManifestChangesByLayer=function(t){var i=[],a=this,n={},r={":layer":B.layers[this.getMode()]},o=B.layers[a.getMode()];t.manifestChanges.forEach(function(t){var l=t.hasOwnProperty(":layer")?t[":layer"]:1e3;if(l===B.layers[V.EDITOR_MODE.TRANSLATION]){var d=a._language;if(d===""){d=e.getLanguage().replaceAll("_","-")}var f={texts:{}};delete t.texts;f.texts[d]={};Object.keys(t).forEach(function(e){if(e.charAt(0)==="/"){f.texts[d][e]=t[e]}else{f[e]=t[e]}});t=f}if(l<o){i.push(t);n=s(n,t)}else if(l===o){r=t}});t.manifestChanges=i;this._currentLayerManifestChanges=r;this._beforeLayerManifestChanges=n};X.prototype._initInternal=function(){var e=this;var t=e.getConfigurationPath();var i=e._oEditorManifest.get(t+"/editor");if(!i){i=e._oEditorManifest.get("/"+e.getSection()+"/designtime")}var a=e._manifestModel.getProperty(t),n,s=e.getDesigntime();if(s){if(typeof s==="function"){n=new Promise(function(t,i){var a=new s;e._applyDesigntimeDefaults(a.getSettings());t(a)})}else if(typeof s==="object"){n=new Promise(function(t,i){sap.ui.require(["sap/ui/integration/Designtime"],function(i){var a=i.extend("test.Designtime");a.prototype.create=function(){return s};var n=new a;e._applyDesigntimeDefaults(n.getSettings());t(n)})})}}else if(i){n=e.loadDesigntime().then(function(t){e._applyDesigntimeDefaults(t.getSettings());return t})}else{n=Promise.resolve(e._createParameterDesigntime(a))}n.then(function(t){e._oDesigntimeInstance=t;e.initDestinations();e.initDataProviderFactory();if(e.getMode()===V.EDITOR_MODE.ADMIN||e.getMode()===V.EDITOR_MODE.ALL){e._addDestinationSettings(a)}else{e._deleleDestinationSettings()}e._settingsModel=new f(e._oDesigntimeInstance.getSettings());e.setModel(e._settingsModel,"currentSettings");e.setModel(e._settingsModel,"items");return e._loadValueContextInDesigntime()}).then(function(){e._applyDesigntimeLayers();return e._requestExtensionData()}).then(function(){e._requireFields().then(function(){e._startEditor()})})};X.prototype.loadDesigntime=function(){if(this._oDesigntime){return Promise.resolve(this._oDesigntime)}if(!this._oEditorManifest){return new Promise(function(e,t){this.attachManifestReady(function(){this.loadDesigntime().then(e,t)}.bind(this))}.bind(this))}if(!this._sAppId){return Promise.reject("App id not maintained")}return new Promise(function(e,t){var i=this._oEditorManifest.get(this.getConfigurationPath()+"/editor");if(!i){i=this._oEditorManifest.get("/"+this.getSection()+"/designtime")}var a=this._sAppId.replace(/\./g,"/")+"/"+i;if(a){sap.ui.require([a],function(t){t=new t;t._readyPromise(this._oLimitedInterface,this).then(function(){this._oDesigntime=t;e(t)}.bind(this))}.bind(this),function(){t({error:a+" not found"})})}else{t()}}.bind(this))};X.prototype.getConfigurationPath=function(){return"/"+this.getSection()+"/configuration"};X.prototype.getCurrentSettings=function(){var e=this._settingsModel.getProperty("/"),t={},i;if(e&&e.form&&e.form.items){for(var r in e.form.items){var o=e.form.items[r];if(o.editable&&o.visible){if(this.getMode()!==V.EDITOR_MODE.TRANSLATION){if(o.translatable&&!o._changed&&o._translatedPlaceholder&&!this._currentLayerManifestChanges[o.manifestpath]){}else{if(o.valueItems&&!n(this._beforeLayerManifestChanges[o.manifestpath.substring(0,o.manifestpath.lastIndexOf("/"))+"/valueItems"],o.valueItems)){t[o.manifestpath.substring(0,o.manifestpath.lastIndexOf("/"))+"/valueItems"]=o.valueItems}if(o.valueTokens&&!n(this._beforeLayerManifestChanges[o.manifestpath.substring(0,o.manifestpath.lastIndexOf("/"))+"/valueTokens"],o.valueTokens)){t[o.manifestpath.substring(0,o.manifestpath.lastIndexOf("/"))+"/valueTokens"]=o.valueTokens}var l=this._beforeLayerManifestChanges[o.manifestpath];if(typeof o.value!=="undefined"&&!n(l,o.value)){switch(o.type){case"string":if(!o.translatable){t[o.manifestpath]=o.value}else if(o._hasDynamicValue){t[o.manifestpath]=o.value;this.deleteAllTranslationValuesInTexts(o.manifestpath)}else if(o._beforeValue&&(o._beforeValue.indexOf("{context>")===0||o._beforeValue.indexOf("{{parameters")===0)){t[o.manifestpath]=o.value}break;case"group":break;case"date":case"datetime":if(l){if(o.value){var d=new Date(l);var f=new Date(o.value);if(d.getTime()!==f.getTime()){t[o.manifestpath]=o.value}}}else if(o.value){t[o.manifestpath]=o.value}break;case"object":if(o.value&&o.value!==""&&typeof o.value==="object"){t[o.manifestpath]=o.value}break;case"object[]":if(Array.isArray(o.value)){var u=a(o.value,500);u=u.sort(function(e,t){if(!e._dt||!e._dt._position||!t._dt||!t._dt._position){return 0}return e._dt._position-t._dt._position});for(var g=0;g<u.length;g++){var p=u[g];p._dt=p._dt||{};p._dt._position=g+1}t[o.manifestpath]=u}break;default:t[o.manifestpath]=o.value}}}}else if(o.translatable&&o.value){if(o._changed){t[o.manifestpath]=o.value}else if(this._currentLayerManifestChanges&&this._currentLayerManifestChanges.texts&&this._currentLayerManifestChanges.texts[this._language]&&this._currentLayerManifestChanges.texts[this._language][o.manifestpath]){t[o.manifestpath]=this._currentLayerManifestChanges.texts[this._language][o.manifestpath]}}if(o._next&&this.getAllowSettings()){if(o.type==="destination"){if(o._next.pageAdminNewDestinationParameter){i=i||{};i[o._settingspath+"/pageAdminNewDestinationParameter"]=o._next.pageAdminNewDestinationParameter}}else{var h=typeof o.visibleToUser==="undefined"?true:o.visibleToUser;var c=typeof o.editableToUser==="undefined"?true:o.editableToUser;var _=typeof o.allowDynamicValues==="undefined"?true:o.allowDynamicValues;if(o._next.visible===!h){i=i||{};i[o._settingspath+"/visible"]=o._next.visible}if(o._next.editable===!c){i=i||{};i[o._settingspath+"/editable"]=o._next.editable}if(o._next.allowDynamicValues===!_){i=i||{};i[o._settingspath+"/allowDynamicValues"]=o._next.allowDynamicValues}if(o._next.pageAdminValues){i=i||{};i[o._settingspath+"/pageAdminValues"]=o._next.pageAdminValues}}}}}}if(this.getMode()===V.EDITOR_MODE.TRANSLATION){delete t.texts}else if(e.texts){t.texts=a(e.texts,500)||{};var m=s({},this._beforeLayerManifestChanges.texts);if(n(m,t.texts)){delete t.texts}else{for(var v in t.texts){if(n(m[v],t.texts[v])){delete t.texts[v]}else{for(var y in t.texts[v]){if(m[v]&&n(m[v][y],t.texts[v][y])){delete t.texts[v][y]}else if(typeof t.texts[v][y]==="object"){var b=t[y];if(!b||typeof b!=="object"||n(b,{})||n(b,[])){delete t.texts[v][y]}else if(Array.isArray(b)){var I=b.map(function(e){return e._dt?e._dt._uuid||"":""});for(var T in t.texts[v][y]){if(!I.includes(T)){delete t.texts[v][y][T]}}}else{var D=b._dt?b._dt._uuid||"":"";if(D!==""){var M=t.texts[v][y][D];if(!M){delete t.texts[v][y]}else{t.texts[v][y]={};t.texts[v][y][D]=M}}else{delete t.texts[v][y]}}}}if(n(t.texts[v],{})){delete t.texts[v]}}}if(n(t.texts,{})){delete t.texts}}}t[":layer"]=B.layers[this.getMode()];t[":errors"]=this.checkCurrentSettings()[":errors"];if(i){t[":designtime"]=i}if(e[":designtime"]){t[":designtime"]=s(t[":designtime"],e[":designtime"])}return t};X.prototype.checkCurrentSettings=function(){var e=this._settingsModel.getProperty("/"),t={};if(e&&e.form&&e.form.items){for(var i in e.form.items){var a=e.form.items[i];if(a.editable){if(a.validateCheck==="failed"){t[a.manifestpath]=false}else if((a.isValid||a.required)&&!(this.getMode()===V.EDITOR_MODE.TRANSLATION&&a.translatable)){if(a.isValid){t[a.manifestpath]=a.isValid(a)}t[a.manifestpath]=true;var n=a.value;var s=a.type;if(s==="string"&&n===""){t[a.manifestpath]=n}if((s==="date"||s==="datetime")&&isNaN(Date.parse(n))){t[a.manifestpath]=n}if(s==="integer"){if(isNaN(parseInt(n))){t[a.manifestpath]=n}else if(n<a.min||n>a.max){t[a.manifestpath]=n}}if(s==="number"){if(isNaN(parseFloat(n))){t[a.manifestpath]=n}else if(n<a.min||n>a.max){t[a.manifestpath]=n}}}}}t[":layer"]=B.layers[this.getMode()]}t[":errors"]=Object.values(t).indexOf(false)>-1;return t};X.prototype._createContextModel=function(){var e=this.getHostInstance(),t=new f({}),i=new f([]);this.setModel(t,"context");this.setModel(i,"contextflat");t._aPendingPromises=[];i._getPathObject=function(e){var t=this.getData().filter(function(t){if(t.path===e){return true}});return t.length?t[0]:null};i._getValueObject=function(e){var t=this.getData()||[];t=t.filter(function(t){if(t.value===e||t.object.value===e){return true}});return t.length?t[0]:null};var a=new Promise(function(t,i){if(e&&e.getContext){var a=false;setTimeout(function(){if(a){return}T.error("sap.ui.integration.editor.Editor: context could not be determined with "+G+".");a=true;t({})},G);e.getContext().then(function(e){if(a){T.error("sap.ui.integration.editor.Editor: context returned after more than "+G+". Context is ignored.")}a=true;t(e||{})})}else{t({})}});a.then(function(e){var a=this._mergeContextData(e);t.setData(a);i.setData(this.flattenData(a,"label"))}.bind(this));t.getProperty=function(t,i){if(t&&!t.startsWith("/")&&!i){t="/"+t}var a=this.resolve(t,i),n;if(a.endsWith("/value")){this._mValues=this._mValues||{};if(this._mValues.hasOwnProperty(a)){return this._mValues[a]}this._mValues[a]=undefined;n=g.timeoutPromise(e.getContextValue(a.substring(1)));n=n.then(function(e){this._mValues[a]=e;this.checkUpdate()}.bind(this)).catch(function(e){this._mValues[a]=null;this.checkUpdate();T.error("sap.ui.integration.editor.Editor: path "+a+" could not be resolved. Reason: "+e)}.bind(this));this._aPendingPromises.push(n);return undefined}else{return f.prototype.getProperty.apply(this,arguments)}}};X.prototype._mergeContextData=function(e){var t={};t["empty"]=J.empty;for(var i in e){t[i]=e[i]}t["editor.internal"]=J["editor.internal"];return t};X.prototype._loadValueContextInDesigntime=function(){var e=this.getModel("context");var t=this._oDesigntimeInstance.getSettings();var i;if(t&&t.form&&t.form.items){i=JSON.stringify(t.form.items)}if(i){var a=/\{context\>[\/?\w+.]+\}/g;var n=i.match(a);var s;if(n&&n.length>0){n=n.filter(function(e){return e.endsWith("value}")});s=n.map(function(e){return e.substring("{context>".length,e.length-1)});s.forEach(function(t){e.getProperty(t)});return Promise.all(e._aPendingPromises).then(function(){e._aPendingPromises=[]})}}return Promise.resolve()};X.fieldMap={string:"sap/ui/integration/editor/fields/StringField","string[]":"sap/ui/integration/editor/fields/StringListField",integer:"sap/ui/integration/editor/fields/IntegerField",number:"sap/ui/integration/editor/fields/NumberField",boolean:"sap/ui/integration/editor/fields/BooleanField",date:"sap/ui/integration/editor/fields/DateField",datetime:"sap/ui/integration/editor/fields/DateTimeField",object:"sap/ui/integration/editor/fields/ObjectField","object[]":"sap/ui/integration/editor/fields/ObjectListField",destination:"sap/ui/integration/editor/fields/DestinationField",group:"sap/ui/integration/editor/fields/GroupField"};X.Fields=null;X.prototype._requireFields=function(){if(X.Fields){return Promise.resolve()}return new Promise(function(e){sap.ui.require(Object.values(X.fieldMap),function(){X.Fields={};for(var t in X.fieldMap){X.Fields[t]=arguments[Object.keys(X.fieldMap).indexOf(t)]}const i=[];for(const e of Object.values(X.Fields)){if(e.loadDependencies){i.push(e.loadDependencies())}}Promise.all(i).then(e)})})};X.prototype._createDescription=function(e,t){var i=new v(this.getId()+"_"+t+"_description_icon",{src:"sap-icon://message-information",color:"Marker",size:"12px",useIconTooltip:false,visible:typeof e.visible==="boolean"?"{currentSettings>visible}":e.visible,objectBindings:{currentSettings:{path:"currentSettings>"+e._settingspath},items:{path:"items>/form/items"},context:{path:"context>/"}}});i.addStyleClass("sapUiIntegrationEditorDescriptionIcon");i.onmouseover=function(t){t.addDependent(this._getPopover());this._getPopover().getContent()[0].applySettings({text:e.description});this._getPopover().openBy(t)}.bind(this,i);i.onmouseout=function(e){this._getPopover().close();e.removeDependent(this._getPopover())}.bind(this,i);return i};X.prototype._createMessageIcon=function(e,t){var i=e.getConfiguration();var a=new v(this.getId()+"_"+t+"_message_icon",{src:"sap-icon://message-information",size:"12px",visible:typeof i.visible==="boolean"?"{currentSettings>visible}":i.visible,useIconTooltip:false,objectBindings:{currentSettings:{path:"currentSettings>"+i._settingspath},items:{path:"items>/form/items"},context:{path:"context>/"}}});a.onmouseover=function(e){e._showMessage()}.bind(this,e);a.onmouseout=function(e){e._hideMessage()}.bind(this,e);a.addStyleClass("sapUiIntegrationEditorMessageIcon");return a};X.prototype._createLabel=function(e,t){var i=new c(this.getId()+"_"+t+"_label",{text:e.label,tooltip:e.tooltip||e.label,required:e.required&&e.editable||false,visible:typeof e.visible==="boolean"?"{currentSettings>visible}":e.visible,objectBindings:{currentSettings:{path:"currentSettings>"+e._settingspath},items:{path:"items>/form/items"},context:{path:"context>/"}}});i._cols=e.cols||2;if(e.layout){i._layout=e.layout}i._sOriginalType=e.type;return i};X.prototype._createSettingsButton=function(e,t){var i=e.getConfiguration();var a=new j(this.getId()+"_"+t+"_settings_btn",{icon:"{= ${currentSettings>_hasDynamicValue} ? 'sap-icon://display-more' : 'sap-icon://enter-more'}",type:"Transparent",tooltip:this._oResourceBundle.getText("EDITOR_FIELD_MORE_SETTINGS"),press:function(t){this._openSettingsDialog(200,t.oSource,e)}.bind(this),visible:typeof i.visible==="boolean"?"{currentSettings>visible}":i.visible,objectBindings:{currentSettings:{path:"currentSettings>"+i._settingspath},items:{path:"items>/form/items"},context:{path:"context>/"}}});return a};X.prototype._getSettingsPanel=function(e){if(!e._oSettingsPanel){e._oSettingsPanel=new F}return e._oSettingsPanel};X.prototype._openSettingsDialog=function(e,t,i){var a=this._getSettingsPanel(i);window.setTimeout(function(){a.setConfiguration(i.getConfiguration());a.open(t,t,this,i.getHost(),i,i._applySettings.bind(i),i._cancelSettings.bind(i))}.bind(this),e||600)};X.prototype._getPopover=function(){if(this._oPopover){return this._oPopover}var e=new I({text:""});e.addStyleClass("sapUiTinyMargin sapUiIntegrationEditorDescriptionText");this._oPopover=new y(this.getId()+"_popover",{showHeader:false,content:[e]});this._oPopover.addStyleClass("sapUiIntegrationEditorPopover");return this._oPopover};X.prototype._createField=function(e,t){var i=new X.Fields[e.type](this.getId()+"_"+t+"_field",{configuration:e,mode:this.getMode(),host:this.getHostInstance(),parameterKey:t,objectBindings:{currentSettings:{path:"currentSettings>"+e._settingspath},items:{path:"items>/form/items"},context:{path:"context>/"},destinations:{path:"destinations>/"}},visible:typeof e.visible==="boolean"?"{currentSettings>visible}":e.visible});i.setAssociation("_editor",this);this._aFieldReadyPromise.push(i._readyPromise.then(function(){if(e.type!=="group"){if(e.require||e.validation||e.validations&&e.validations.length>0||e.values&&e.values.data&&!e.values.data.json){var a=this._createMessageIcon(i,t);i.setAssociation("_messageIcon",a)}if(e.description&&this.getMode()!==V.EDITOR_MODE.TRANSLATION){i._descriptionIcon=this._createDescription(e,t)}if(e._changeDynamicValues){i._settingsButton=this._createSettingsButton(i,t);i._applyButtonStyles()}}}.bind(this)));if(e.type!=="group"){i._oValueBinding=this._settingsModel.bindProperty(e._settingspath+"/value");i._oValueBinding.attachChange(function(){if(!this._bIgnoreUpdates){e._changed=true;if(e._dependentFields&&e._dependentFields.length>0){this._updateEditor(e._dependentFields)}this._updatePreview()}}.bind(this));if(i.isFilterBackend()){var a=this._settingsModel.bindProperty(e._settingspath+"/suggestValue");a.attachChange(function(){var t=s({},e);t._cancel=false;this._addValueListModel(t,i)}.bind(this))}if(e.values){if(e.values.metadata){this._addMetadataModel(e,i)}if(e.type==="string[]"&&i.isFilterBackend()&&e.visualization&&e.visualization.type==="MultiInput"){i.setModel(new f({}),undefined)}else{var n=g.timeoutPromise(this._addValueListModel(e,i));n=n.catch(function(e){T.error("sap.ui.integration.editor.Editor: get data of field "+t+" could not be resolved. Reason: "+e)});this._aFieldDataReadyPromise.push(n)}}this._createDependentFields(e,i);i._oDataProviderFactory=this._oDataProviderFactory}i._cols=e.cols||2;if(e.layout){i._layout=e.layout}i._oEditorResourceBundles=this._oEditorResourceBundles;i.setAssociation("_messageStrip",K);return i};X.prototype._updateEditor=function(e){if(this._fieldReady){if(e.length===0){return}for(var t=0;t<e.length;t++){var i=e[t];i.config._cancel=true}if(!this._oDataProviderFactory){return}this._bIgnoreUpdates=true;for(var t=0;t<e.length;t++){var i=e[t];i.config._cancel=false;this._addValueListModel(i.config,i.field,500*t)}this._bIgnoreUpdates=false}};X.prototype._updatePreview=function(){var e=this.getAggregation("_preview")||this._oPreview;if(e&&e.update){e.update()}};X.prototype._requestData=function(e,t){var i=this._oDataProviderFactory.create(e.values.data);i.bindObject({path:"items>/form/items"});i.bindObject({path:"currentSettings>"+e._settingspath});i.bindObject({path:"context>/"});return i._waitDependencies().then(function(){return i.getData()}).then(function(i){if(e._cancel){e._values=[];this._settingsModel.setProperty(e._settingspath+"/_loading",false);return}var a=e.values.data.path,n,s=[];if(a&&a!=="/"){if(a.startsWith("/")){a=a.substring(1)}if(a.endsWith("/")){a=a.substring(0,a.length-1)}n=a.split("/");s=S.get(n,i)}else{s=i}if(e.type==="object"||e.type==="object[]"){s.forEach(function(e){e._dt={_editable:false}})}if(this.getMode()===V.EDITOR_MODE.CONTENT&&e.pageAdminValues&&e.pageAdminValues.length>0){var r=e.pageAdminValues,o=e.value,l=e.valueItems||[],d=[],f=[],u=[];this.prepareFieldsInKey(e);if(r.length>0){for(var g=0;g<r.length;g++){for(var p=0;p<s.length;p++){var h=this.getKeyFromItem(s[p]);if(r[g]===h){d.push(s[p])}}if(Array.isArray(o)){for(var c=0;c<o.length;c++){if(r[g]===o[c]){f.push(o[c])}}for(var _=0;_<l.length;_++){var m=this.getKeyFromItem(l[_]);if(r[g]===m){u.push(l[_])}}}}if(f.length>0){e.value=[];e.value=f}if(u.length>0){e.valueItems=[];e.valueItems=u}}if(e.values.data.path&&e.values.data.path!=="/"){delete i[n];S.set(n,d,i)}else{i=[];i=d}}var v=t.getConfiguration();if(e.type==="string[]"){var y=e.values.data.path;if(y&&y!=="/"){if(y.startsWith("/")){y=y.substring(1)}if(y.endsWith("/")){y=y.substring(0,y.length-1)}var n=y.split("/");var b=S.get(n,i);if(Array.isArray(b)){for(var I in b){var T=t.getKeyFromItem(b[I]);if(Array.isArray(v.value)&&v.value.length>0&&v.value.includes(T)){b[I].Selected=this._oResourceBundle.getText("EDITOR_ITEM_SELECTED")}else{b[I].Selected=this._oResourceBundle.getText("EDITOR_ITEM_UNSELECTED")}}S.set(n,b,i)}}else if(Array.isArray(i)){for(var I in i){var T=t.getKeyFromItem(i[I]);if(Array.isArray(v.value)&&v.value.length>0&&v.value.includes(T)){i[I].Selected=this._oResourceBundle.getText("EDITOR_ITEM_SELECTED")}else{i[I].Selected=this._oResourceBundle.getText("EDITOR_ITEM_UNSELECTED")}}}}e._values=i;var D=t.getModel();D.setData(i);D.checkUpdate(true);D.firePropertyChange();if(e.type==="object"||e.type==="object[]"){t.mergeValueWithRequestResult(s)}this._settingsModel.setProperty(e._settingspath+"/_loading",false);t._hideValueState(true,true)}.bind(this)).catch(function(i){var a=new Promise(function(e){var t=this._oResourceBundle.getText("EDITOR_BAD_REQUEST");if(Array.isArray(i)&&i.length>0){t=i[0];var a=i[1];if(a){var n;a.text().then(function(i){if(g.isJson(i)){n=JSON.parse(i).error}else{t=i}if(n){t=(n.code||n.errorCode||a.status)+": "+n.message}e(t)});return}else{e(t);return}}else if(typeof i==="string"){t=i;e(t);return}else{e(t);return}}.bind(this));return a.then(function(i){var a=t.getModel();a.firePropertyChange();if(e.type==="object"||e.type==="object[]"){t.mergeValueWithRequestResult()}this._settingsModel.setProperty(e._settingspath+"/_loading",false);t._showValueState("error",i,true)}.bind(this))}.bind(this))};X.prototype._requestExtensionData=function(){var e=this.getAggregation("_extension");if(!e){T.info("sap.ui.integration.editor.Editor: extension is not defined or created, do not load data of it.");return new Promise(function(e,t){e()})}var t=false;var i={};var a=this._oEditorManifest.get(this.getConfigurationPath()+"/data/extension");var n;if(a){t=true;n=this._oEditorManifest.get(this.getConfigurationPath()+"/data/path");i={extension:a};if(n){i.path=n}}else{a=this._oEditorManifest.get("/"+this.getSection()+"/data/extension");if(a){t=true;n=this._oEditorManifest.get("/"+this.getSection()+"/data/path");i={extension:a};if(n){i.path=n}}}if(!t){T.info("sap.ui.integration.editor.Editor: extension data is not defined in manifest, do not load data of it.");return new Promise(function(e,t){e()})}var s=this._oDataProviderFactory.create(i);return s._waitDependencies().then(function(){return s.getData()}).then(function(t){var i=e.getModel();if(!i){i=new f(t||{});e.setModel(i,undefined)}else{i.setData(t)}i.checkUpdate(true)}).catch(function(e){var t=this._oResourceBundle.getText("EDITOR_BAD_REQUEST");if(Array.isArray(e)&&e.length>0){t=e[0];var i=e[1];if(i){var a;i.text().then(function(e){if(g.isJson(e)){a=JSON.parse(e).error}else{t=e}if(a){t=(a.code||a.errorCode||i.status)+": "+a.message}T.error("sap.ui.integration.editor.Editor: request extension data failed, "+t)})}}else if(typeof e==="string"){t=e;T.error("sap.ui.integration.editor.Editor: request extension data failed, "+t)}}.bind(this))};X.prototype._addValueListModel=function(e,t,i){if(e.values){var a;if(e.values.data){t.bindObject({path:e.values.data.path||"/"});if(this._oDataProviderFactory){a=t.getModel();if(!a){a=new f({});t.setModel(a,undefined)}this._settingsModel.setProperty(e._settingspath+"/_loading",true);if(!i){return this._requestData(e,t)}else{setTimeout(function(){return this._requestData(e,t)}.bind(this),i)}}}else if(this.getAggregation("_extension")){a=this.getAggregation("_extension").getModel();if(a&&this.getMode()===V.EDITOR_MODE.CONTENT&&e.pageAdminValues&&e.pageAdminValues.length>0){this.prepareFieldsInKey(e);var n=e.values.path;if(n.length>1){n=n.substring(1)}var s=S.get([n],a.getData()),r=e.pageAdminValues,o=[];for(var l=0;l<r.length;l++){for(var d=0;d<s.length;d++){var u=this.getKeyFromItem(s[d]);if(r[l]===u){o.push(s[d])}}}delete s[n];S.set(n,o,s);a.setData(s)}t.bindObject({path:e.values.path||"/"});t.setModel(a,undefined);return Promise.resolve(null)}}};X.prototype._addMetadataModel=function(e,t){if(e.values&&e.values.metadata){var i=s({},e.values.metadata.request);var a={url:i.serviceUrl};var n=Promise.resolve(a);if(this._oDestinations){n=this._oDestinations.process(a)}n.then(function(e){if(!e.url.endsWith("/")){e.url=e.url+"/"}i.serviceUrl=e.url;var a=new u(i);a.oMetaModel.fetchData().then(function(e){t.setModel(new f(e),"meta")})})}};X.prototype._createDependentFields=function(e,t){if(e.values){var i=JSON.stringify(e.values.data);if(i){var a=/parameters\.([^\}\}]+)|destinations\.([^\}\}]+)|\{items\>[\/?\w+]+\}/g,n=i.match(a);if(n){for(var r=0;r<n.length;r++){var o="/value";var l=this.getConfigurationPath();if(n[r].indexOf("destinations.")===0||n[r].indexOf("parameters.")===0){if(n[r].indexOf("destinations.")===0){o="/name"}l=l+"/"+n[r].replace(".","/")+o}else if(n[r].indexOf("{items>")===0){l=l+"/parameters/"+n[r].slice(7,-1)}var d=this._mItemsByPaths[l];if(d){if(d._settingspath===e._settingspath){e=s({},e)}d._dependentFields=d._dependentFields||[];d._dependentFields.push({field:t,config:e})}}}}}};X.prototype.getBeforeLayerChange=function(e){if(!this._beforeLayerManifestChanges){this._beforeLayerManifestChanges={}}return this._beforeLayerManifestChanges[e]};X.prototype.getTranslationValueInTexts=function(e,t){var i="/texts/"+e;var a=this._settingsModel.getProperty(i)||{};return a[t]};X.prototype.deleteAllTranslationValuesInTexts=function(e){var t=this;var i=t._settingsModel.getData();if(!i||!i.texts){return}var n="/texts";var s=a(i.texts,500);for(var r in s){if(s[r][e]){delete s[r][e]}}this._settingsModel.setProperty(n,s)};X.prototype._addItem=function(e,t){var i=this.getMode();if(this.getAllowDynamicValues()===false||!e.allowDynamicValues){e.allowDynamicValues=false}if(this.getAllowSettings()===false){e.allowSettings=false}e.__cols=e.cols||2;if(e.visible===false||!e.translatable&&i===V.EDITOR_MODE.TRANSLATION&&e.type!=="group"){return}if(e.type==="group"){e.expanded=e.expanded!==false;var n=this._createField(e,t);this.addAggregation("_formContent",n);if(e.hint){this._addHint(e.hint,this.getId()+"_"+t)}return}if(e.type==="separator"){var s=new O;this.addAggregation("_formContent",s);return}var r=null;var o=g._language;if(i===V.EDITOR_MODE.TRANSLATION){if(e.type!=="string"){return}if(typeof e.value==="string"&&e.value.indexOf("{")===0||typeof e.values!=="undefined"){return}e._language={value:e.value};e.cols=1;delete e.values;var l=a(e,500);l._settingspath+="/_language";l.editable=false;l.required=false;if(!X._oLanguages[o]&&o.indexOf("-")>-1){o=o.substring(0,o.indexOf("-"))}if(X._oLanguages[o]){var d=this.getTranslationValueInTexts(o,e.manifestpath);if(d){l.value=d}}if(!l.value){l.value="-"}var f=this._createLabel(l,t);this.addAggregation("_formContent",f);var u=this._createField(l,t+"_ori");u.isOrigLangField=true;this.addAggregation("_formContent",u);e.editable=e.visible=e.translatable;o=this._language;if(!this.getBeforeLayerChange(e.manifestpath)){e.value=e._translatedValue||""}var d=this.getTranslationValueInTexts(o,e.manifestpath);if(d){e.value=d}e.label=e._translatedLabel||"";e.required=false;var p=this._createField(e,t+"_trans");var h={onAfterRendering:function(e){var t=document.getElementById(p.getId());t.setAttribute("aria-label",f)}};p.addEventDelegate(h);this.addAggregation("_formContent",p)}else{r=this._createLabel(e,t);this.addAggregation("_formContent",r);var c=this.getBeforeLayerChange(e.manifestpath);if(c){e._beforeLayerChange=c}if(this._currentLayerManifestChanges&&this._currentLayerManifestChanges[e.manifestpath]){e.value=this._currentLayerManifestChanges[e.manifestpath];e._beforeLayerChange=e.value}if(e.type==="string"){o=this._language;var d=this.getTranslationValueInTexts(o,e.manifestpath);if(d){e.value=d}}var n=this._createField(e,t);var _={onAfterRendering:function(e){var t=document.getElementById(n.getId());t.setAttribute("aria-label",r)}};n.addEventDelegate(_);this.addAggregation("_formContent",n)}if(e.hint&&(!e.cols||e.cols===2)){this._addHint(e.hint,this.getId()+"_"+t)}e.cols=e.__cols;delete e.__cols};X.prototype._createHint=function(e,t){e=e.replace(/<a href/g,"<a target='blank' href");var i=new A(t+"_hint",{htmlText:e});return i};X.prototype._addHint=function(e,t){var i=this._createHint(e,t);this.addAggregation("_formContent",i)};X.prototype._getCurrentLanguageSpecificText=function(e){if(this._oTranslationBundle){var t=this._oTranslationBundle.getText(e,[],true);if(t===undefined){return""}return t}return""};X.prototype._loadSpecialTranslations=async function(){if(this._oTranslationBundle){return}var e=this._language;if(!e){return}var t=this._oEditorManifest.get("/sap.app/i18n"),i,a;if(!t){return}if(typeof t==="string"){i=this.getBaseUrl()+t}else if(typeof t==="object"){if(t.bundleUrl){i=this.getBaseUrl()+t.bundleUrl}if(t.supportedLocales&&Array.isArray(t.supportedLocales)){a=t.supportedLocales;for(var n=0;n<a.length;n++){a[n]=a[n].replaceAll("_","-")}}}if(i){var s=[e];if(e.indexOf("-")>-1){s.push(e.substring(0,e.indexOf("-")))}if(!s.includes("en")){s.push("en")}s=this._filterSupportedFallbackLanguages(s,a);var r=await M.create({url:i,async:true,locale:s[0],supportedLocales:s,fallbackLocale:"en"});var o=new L({bundle:r});this._oTranslationBundle=await o.getResourceBundle()}};X.prototype._filterSupportedFallbackLanguages=function(e,t){if(Array.isArray(t)){var i=[];for(var a=0;a<e.length;a++){if(t.includes(e[a])){i.push(e[a])}}e=i}return e};X.prototype._startEditor=function(){var e=this.getAggregation("_formContent");if(e&&e.length>0){this.destroyAggregation("_formContent")}var t=this._settingsModel.getData();var i;if(t.form&&t.form.items){i=t.form.items;var a=false,n=this._destinationGroupAtTop?1:0,r=Object.keys(i),o=r.length,l=0;for(var d=n;d<o;d++){var f=i[r[d]];if(f.type==="destination"){if(!this._destinationGroupAtTop){break}l=d;continue}else if(f.type==="group"&&f.level!=="1"){break}else if(f.visible){a=true;break}}if(a){var u={type:"group",translatable:true,expanded:true,label:this._oResourceBundle.getText("EDITOR_PARAMETERS_GENERALSETTINGS"),_settingspath:"/form/items/generalPanel"};if(this._destinationGroupAtTop){var p={};var h=0;r.forEach(function(e){p[e]=i[e];if(h===l){p["generalPanel"]=u}h++});i=p}else{i=s({generalPanel:u},i)}t.form.items=i;this._settingsModel.setData(t)}}var c=this._settingsModel.getProperty("/");this._mItemsByPaths={};if(c.form&&c.form.items){i=c.form.items;var _=this._language||this.getLanguage()||g._language;if(this.getMode()===V.EDITOR_MODE.TRANSLATION){this._addItem({type:"group",translatable:true,expandable:false,expanded:true,label:this._oResourceBundle.getText("EDITOR_ORIGINALLANG")+": "+X._oLanguages[_]},"translationTopPanel")}for(var m in i){var f=i[m];if(f){f.label=f.label||m;var v;if(f.manifestpath){this._mItemsByPaths[f.manifestpath]=f;if(this.getMode()!==V.EDITOR_MODE.TRANSLATION){v=this._currentLayerManifestChanges[f.manifestpath]}}f._changed=v!==undefined&&this.getMode()!==V.EDITOR_MODE.TRANSLATION;if(f.values){f.translatable=false}f._beforeValue=this._getManifestBeforelValue(f.manifestpath);if(f.type==="string"){f._translatedDefaultPlaceholder=this._getManifestDefaultValue(f.manifestpath);var y=null,b=f._translatedDefaultPlaceholder;if(b){if(this._isValueWithParameterSyntax(b)){f.translatable=false}if(this._isValueWithHandlebarsTranslation(b)){y=b.substring(2,b.length-2)}else if(b.startsWith("{i18n>")){y=b.substring(6,b.length-1)}if(y){f.translatable=true}else if(f.translatable&&this.getMode()===V.EDITOR_MODE.TRANSLATION&&!this.getBeforeLayerChange(f.manifestpath)){f._translatedValue=f._translatedDefaultPlaceholder;f.value=f._translatedValue}}f._translatedPlaceholder=f._beforeValue;b=f._translatedPlaceholder;if(b){if(this._isValueWithParameterSyntax(b)){f.translatable=false}if(this._isValueWithHandlebarsTranslation(b)){y=b.substring(2,b.length-2)}else if(b.startsWith("{i18n>")){y=b.substring(6,b.length-1)}}if(f.value&&(f.value.indexOf("{context>")===0||f.value.indexOf("{{parameters")===0)){this.deleteAllTranslationValuesInTexts(f.manifestpath);y=null}var I=this.getTranslationValueInTexts(_,f.manifestpath);if(y){f._translatedValue=this.getModel("i18n").getResourceBundle().getText(y);if(f._changed){f.value=v}else if(f.value===f._translatedDefaultPlaceholder){f.value=f._translatedValue}if(this.getMode()===V.EDITOR_MODE.TRANSLATION){var T=this._getCurrentLanguageSpecificText(y);if(T!==""){f._translatedValue=T}}else if(I){f.value=I}}else if(this.getMode()!==V.EDITOR_MODE.TRANSLATION&&f.translatable&&I){f.value=I}if(this.getMode()===V.EDITOR_MODE.TRANSLATION){if(this._isValueWithHandlebarsTranslation(f.label)){f._translatedLabel=this._getCurrentLanguageSpecificText(f.label.substring(2,f.label.length-2),true)}else if(f.label&&f.label.startsWith("{i18n>")){f._translatedLabel=this._getCurrentLanguageSpecificText(f.label.substring(6,f.label.length-1),true)}}}else if(f.type==="string[]"){var D=f.manifestpath.substring(0,f.manifestpath.lastIndexOf("/"))+"/valueItems";var M=this._manifestModel.getProperty(D);if(M){f.valueItems=M}var E=f.manifestpath.substring(0,f.manifestpath.lastIndexOf("/"))+"/valueTokens";var C=this._manifestModel.getProperty(E);if(C){f.valueTokens=C}}else if(typeof f.value==="object"&&f.type==="object"){if(typeof f.value._editable==="boolean"){f.value._dt={_editable:f.value._editable};delete f.value._editable}}else if(Array.isArray(f.value)&&f.value.length>0&&f.type==="object[]"){f.value.forEach(function(e){if(typeof e._editable==="boolean"){e._dt={_editable:e._editable};delete e._editable}})}if(f.label&&this._isValueWithHandlebarsTranslation(f.label)){var P=f.label.substring(2,f.label.length-2);if(P){f.label=this.getModel("i18n").getResourceBundle().getText(P)}}}}}for(var m in i){var f=i[m];this._addItem(f,m)}var x=this._settingsModel.getProperty("/form/height")!==undefined?this._settingsModel.getProperty("/form/height"):"350px",S=this._settingsModel.getProperty("/form/width")!==undefined?this._settingsModel.getProperty("/form/width"):"100%";if(this.getProperty("height")===""){this.setProperty("height",x);document.body.style.setProperty("--sapUiIntegrationEditorFormHeight",x);document.body.style.setProperty("--sapUiIntegrationEditorPreviewHeight",x)}if(this.getProperty("width")===""){this.setProperty("width",S);document.body.style.setProperty("--sapUiIntegrationEditorFormWidth",S)}if(this.getMode()!==V.EDITOR_MODE.TRANSLATION&&this.getPreviewPosition()!=="separate"){this._initPreview()}Promise.all(this._aFieldReadyPromise).then(function(){this._fieldReady=true;this.fireFieldReady();if(this.getMode()!==V.EDITOR_MODE.ADMIN&&this.getMode()!==V.EDITOR_MODE.ALL){setTimeout(function(){this.fireDestinationReady()}.bind(this),100)}}.bind(this))};X.prototype.setHeight=function(e){if(e){this.setProperty("height",e);document.body.style.setProperty("--sapUiIntegrationEditorFormHeight",e);document.body.style.setProperty("--sapUiIntegrationEditorPreviewHeight",e)}};X.prototype.setWidth=function(e){if(e){this.setProperty("width",e);document.body.style.setProperty("--sapUiIntegrationEditorFormWidth",e)}};X.prototype.destroy=function(){if(this._oPopover){this._oPopover.destroy()}if(this._oDesigntimeInstance){this._oDesigntimeInstance.destroy()}var e=this.getAggregation("_preview");if(e&&e.destroy){e.destroy()}var i=o.getElementById(K);if(i){i.destroy()}this._manifestModel=null;this._beforeManifestModel=null;this._oInitialManifestModel=null;this._settingsModel=null;this._destinationsModel=null;this._oEditorResourceBundles=null;document.body.style.removeProperty("--sapUiIntegrationEditorFormWidth");document.body.style.removeProperty("--sapUiIntegrationEditorFormHeight");t.prototype.destroy.apply(this,arguments)};X.prototype._initPreview=function(){};X.prototype._applyDesigntimeDefaults=function(e){e=e||{};e.form=e.form||{};e.form.items=e.form.items||{};var t=e.form.items||e.form.items;for(var i in t){var a=t[i];if(a.type==="destination"){continue}if(a.manifestpath){a.value=this._manifestModel.getProperty(a.manifestpath)}if(a.visible===undefined||a.visible===null){a.visible=true}if(a.editable===undefined||a.editable===null){a.editable=true}if(this.getMode()!==V.EDITOR_MODE.ADMIN){if(a.visibleToUser!==undefined){a.visible=a.visibleToUser}if(a.editableToUser!==undefined){a.editable=a.editableToUser}}if(typeof a.translatable!=="boolean"){a.translatable=false}if(!a.label){a.label=i}if(!a.type||a.type==="enum"){a.type="string"}if(a.value===undefined||a.value===null){switch(a.type){case"boolean":a.value=false;break;case"integer":case"number":a.value=0;break;case"string[]":a.value=[];break;case"object":a.value=undefined;break;case"object[]":a.value=undefined;break;default:a.value=""}}if(a.type==="group"){if(a.visible===undefined||a.value===null){a.visible=true}}a._settingspath="/form/items/"+i}};X.prototype._applyDesigntimeLayers=function(e){var t={};var i={};if(this._appliedLayerManifestChanges&&Array.isArray(this._appliedLayerManifestChanges)){for(var a=0;a<this._appliedLayerManifestChanges.length;a++){var r=this._appliedLayerManifestChanges[a][":designtime"];if(r){var o=Object.keys(r);for(var l=0;l<o.length;l++){var d=o[l],f=r[d];if(!d.endsWith("/pageAdminValues")&&typeof f==="object"){if(f.configuration&&f.configuration.parameterFromDestination){var u=f.configuration;delete u.parameterFromDestination;u.value=this._manifestModel.getProperty(u.manifestpath);u._settingspath="/form/items/"+f.parameter;this._settingsModel.setProperty(u._settingspath,u)}else{i[o[l]]=s(i[o[l]],f);continue}}else{this._settingsModel.setProperty(o[l],f)}}}var g=this._appliedLayerManifestChanges[a]["texts"];if(g){t=s(t,g)}}}if(this._currentLayerManifestChanges){var r=this._currentLayerManifestChanges[":designtime"];if(r){var o=Object.keys(r);for(var l=0;l<o.length;l++){var d=o[l],f=r[d];p=d.substring(0,d.lastIndexOf("/")+1)+"_next";if(!d.endsWith("/pageAdminValues")&&typeof f==="object"){if(!f.configuration||!f.configuration.parameterFromDestination){i[d]=s(i[d],f);continue}}if(!this._settingsModel.getProperty(p)){this._settingsModel.setProperty(p,{})}var p=d.substring(0,d.lastIndexOf("/")+1)+"_next",h=d.substring(d.lastIndexOf("/")+1);this._settingsModel.setProperty(p+"/"+h,f)}}var c=this._currentLayerManifestChanges["texts"];if(c){t=s(t,c)}}if(!n(t,{})){this._settingsModel.setProperty("/texts",t)}if(!n(i,{})){this._settingsModel.setProperty("/:designtime",i)}};X.prototype._createParameterDesigntime=function(e){var t={},i=this.getConfigurationPath()+"/parameters",a=this.getMode();if(e&&e.parameters){t.form=t.form||{};t.form.items=t.form.items||{};var n=t.form.items;Object.keys(e.parameters).forEach(function(t){n[t]=s({manifestpath:i+"/"+t+"/value",editable:a!==V.EDITOR_MODE.TRANSLATION,_settingspath:"/form/items/"+t},e.parameters[t]);var r=n[t];if(!r.type){r.type="string"}if(!r.hasOwnProperty("visible")){r.visible=true}})}return new d(t)};X.prototype._addDestinationSettings=function(e){var t=this._oDesigntimeInstance.getSettings(),i=this.getConfigurationPath()+"/destinations";t.form=t.form||{};t.form.items=t.form.items||{};if(t&&e&&e.destinations){this._destinationGroupAtTop=false;var a=t.form.items,n={},r=this.getHostInstance();var o={label:this._oResourceBundle.getText("EDITOR_DESTINATIONS")||"Destinations",type:"group",expanded:true,visible:true,_settingspath:"/form/items/destination.group"};if(a["destination.group"]){this._destinationGroupAtTop=Object.keys(a)[0]==="destination.group";o=s(o,a["destination.group"]);delete a["destination.group"]}n["destination.group"]=o;Object.keys(e.destinations).forEach(function(t){var r=s({manifestpath:i+"/"+t+"/name",visible:true,type:"destination",editable:true,allowDynamicValues:false,allowSettings:false,value:e.destinations[t].name,defaultValue:e.destinations[t].defaultUrl,_settingspath:"/form/items/"+[t+".destination"],_values:[],_destinationName:t},e.destinations[t]);if(typeof r.label==="undefined"){r.label=t}if(a[t+".destination"]){r=s(r,a[t+".destination"]);delete a[t+".destination"]}n[t+".destination"]=r});if(this._destinationGroupAtTop){t.form.items=s(n,a)}else{t.form.items=s(a,n)}var l=false;if(r){this._destinationsModel.setProperty("/_loading",true);this._destinationsModel.checkUpdate(true);this.getHostInstance().getDestinations().then(function(e){l=true;this._destinationsModel.setProperty("/_values",e);this._destinationsModel.setProperty("/_loading",false);this._destinationsModel.setSizeLimit(e.length);this._destinationsModel.checkUpdate(true);setTimeout(function(){this.fireDestinationReady()}.bind(this),100)}.bind(this)).catch(function(){return this.getHostInstance().getDestinations()}.bind(this)).then(function(e){if(l){return}this._destinationsModel.setProperty("/_values",e);this._destinationsModel.setProperty("/_loading",false);this._destinationsModel.setSizeLimit(e.length);this._destinationsModel.checkUpdate(true);setTimeout(function(){this.fireDestinationReady()}.bind(this),100)}.bind(this)).catch(function(e){this._destinationsModel.setProperty("/_loading",false);this._destinationsModel.checkUpdate(true);setTimeout(function(){this.fireDestinationReady()}.bind(this),100);T.error("sap.ui.integration.editor.Editor: can not get destinations list from '"+r.getId()+"'.")}.bind(this))}}};X.prototype._deleleDestinationSettings=function(){var e=this._oDesigntimeInstance.getSettings();e.form=e.form||{};e.form.items=e.form.items||{};delete e.form.items["destination.group"];for(var t in e.form.items){var i=e.form.items[t];if(i.type==="destination"){delete e.form.items[t]}}};X.prototype._getManifestDefaultValue=function(e){return this._oInitialManifestModel.getProperty(e)};X.prototype._getManifestBeforelValue=function(e){return this._beforeManifestModel.getProperty(e)};X.prototype._isValueWithHandlebarsTranslation=function(e){if(typeof e==="string"){return!!e.match(H)}return false};X.prototype._isValueWithParameterSyntax=function(e){if(typeof e==="string"){return!!e.match(q)}return false};X.prototype.prepareFieldsInKey=function(e){this._sKeySeparator=e.values.keySeparator;if(!this._sKeySeparator){this._sKeySeparator="#"}var t=e.values.item.key;this._aFields=t.split(this._sKeySeparator);for(var i in this._aFields){if(this._aFields[i].startsWith("{")){this._aFields[i]=this._aFields[i].substring(1)}if(this._aFields[i].endsWith("}")){this._aFields[i]=this._aFields[i].substring(0,this._aFields[i].length-1)}}};X.prototype.getKeyFromItem=function(e){var t="";this._aFields.forEach(function(i){t+=e[i].toString()+this._sKeySeparator}.bind(this));if(t.endsWith(this._sKeySeparator)){t=t.substring(0,t.length-this._sKeySeparator.length)}return t};X.oResourceBundle=l.getResourceBundleFor("sap.ui.integration",g._language);X.initContextEntries=function(){return{empty:{label:X.oResourceBundle.getText("EDITOR_CONTEXT_EMPTY_VAL"),type:"string",description:X.oResourceBundle.getText("EDITOR_CONTEXT_EMPTY_DESC"),placeholder:"",value:""},"editor.internal":{label:X.oResourceBundle.getText("EDITOR_CONTEXT_EDITOR_INTERNAL_VAL"),todayIso:{type:"string",label:X.oResourceBundle.getText("EDITOR_CONTEXT_EDITOR_TODAY_VAL"),description:X.oResourceBundle.getText("EDITOR_CONTEXT_EDITOR_TODAY_DESC"),tags:[],placeholder:X.oResourceBundle.getText("EDITOR_CONTEXT_EDITOR_TODAY_VAL"),customize:["format.dataTime"],value:"{{parameters.TODAY_ISO}}"},nowIso:{type:"string",label:X.oResourceBundle.getText("EDITOR_CONTEXT_EDITOR_NOW_VAL"),description:X.oResourceBundle.getText("EDITOR_CONTEXT_EDITOR_NOW_DESC"),tags:[],placeholder:X.oResourceBundle.getText("EDITOR_CONTEXT_EDITOR_NOW_VAL"),customize:["dateFormatters"],value:"{{parameters.NOW_ISO}}"},currentLanguage:{type:"string",label:X.oResourceBundle.getText("EDITOR_CONTEXT_EDITOR_LANG_VAL"),description:X.oResourceBundle.getText("EDITOR_CONTEXT_EDITOR_LANG_VAL"),tags:["technical"],customize:["languageFormatters"],placeholder:X.oResourceBundle.getText("EDITOR_CONTEXT_EDITOR_LANG_VAL"),value:"{{parameters.LOCALE}}"}}}};J=X.initContextEntries();X.prototype._applyLanguageChange=function(){J=X.initContextEntries()};X._oLanguages={};X._appendThemeVars=function(){var e=["sapUiButtonHoverBackground","sapUiBaseBG","sapUiContentLabelColor","sapUiTileSeparatorColor","sapUiHighlight","sapUiListSelectionBackgroundColor","sapUiNegativeText","sapUiCriticalText","sapUiPositiveText","sapUiChartScrollbarBorderColor"];var t=x.get({name:e,callback:function(e){}});if(t){for(var i in t){document.body.style.setProperty("--"+i,t[i])}}};X.init=function(){this.init=function(){};X._appendThemeVars();var e=sap.ui.require.toUrl("sap.ui.integration.editor.css.Editor".replace(/\./g,"/")+".css");C(e);X._oLanguages=P.loadResource("sap/ui/integration/editor/languages.json",{dataType:"json",failOnError:false,async:false})};X.prototype.onThemeChanged=function(){X._appendThemeVars()};X.init();return X});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/EditorResourceBundles", ["sap/ui/base/ManagedObject","sap/base/i18n/ResourceBundle","sap/base/Log"],function(e,r,a){"use strict";var s=e.extend("sap.ui.integration.editor.EditorResourceBundles",{metadata:{library:"sap.ui.integration",properties:{url:{type:"string",defaultValue:""},languages:{type:"object"},supportedLocales:{type:"array"}},events:{ready:{}}}});s.prototype.loadResourceBundles=function(){var e=this;var s=e.getUrl();var u=e.getSupportedLocales();var o=e.getLanguages();e._ready=false;e._aResourceBundles=[];e._aResourceBundleReadyPromise=[];Object.keys(o).forEach(function(a){if(s){var n=[a];if(a.indexOf("-")>-1){n.push(a.substring(0,a.indexOf("-")))}if(!n.includes("en")){n.push("en")}e._aResourceBundles[a]="";var i=r.create({url:s,async:true,locale:a,supportedLocales:n}).then(function(r){var s={language:o[a],resourceBundle:r,isSupportedLocale:true};if(Array.isArray(u)&&!u.includes(a)&&!u.includes(a.replace("-","_"))){s.isSupportedLocale=false}e._aResourceBundles[a]=s});e._aResourceBundleReadyPromise.push(i)}else{var t={language:o[a],isSupportedLocale:true};if(Array.isArray(u)&&!u.includes(a)&&!u.includes(a.replace("-","_"))){t.isSupportedLocale=false}e._aResourceBundles[a]=t}});if(e._aResourceBundleReadyPromise.length>0){Promise.all(e._aResourceBundleReadyPromise).then(function(){Object.keys(o).forEach(function(r){if(e._aResourceBundles[r]==""){var a={language:o[r],isSupportedLocale:true};if(Array.isArray(u)&&!u.includes(r)&&!u.includes(r.replace("-","_"))){a.isSupportedLocale=false}e._aResourceBundles[r]=a}});a.info("sap.ui.integration.editor.EditorResourceBundles: resource bundles loaded.");e._ready=true;e.fireReady()})}else{a.info("sap.ui.integration.editor.EditorResourceBundles: no resource bundles.");e._ready=true;e.fireReady()}};s.prototype.isReady=function(){return this._ready};s.prototype.getResourceBundles=function(){return this._aResourceBundles};return s});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/Extension", ["sap/ui/integration/Extension","sap/base/Log"],function(t,i){"use strict";var o=t.extend("sap.ui.integration.editor.Extension");o.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oEditorInterface=null;this._oEditor=null};o.prototype.exit=function(){t.prototype.exit.apply(this,arguments);this._oEditorInterface=null;this._oEditor=null};o.prototype.setFormatters=function(o){t.prototype.setFormatters.apply(this,arguments);if(!this._oEditor){return}if(this._oEditor.getAggregation("_extension")!==this){i.error("sap.ui.integration.editor.Extension: extension formatters must be set before the initialization of the editor. Do this inside Extension#init().")}};o.prototype.onEditorReady=function(){};o.prototype.getEditor=function(){return this._oEditorInterface};o.prototype._setEditor=function(t,i){this._oEditor=t;this._oEditorInterface=i};return o});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/Manifest", ["sap/ui/integration/util/Manifest","./Merger"],function(e,t){"use strict";var i=e.extend("sap.ui.integration.editor.Manifest");i.prototype.mergeDeltaChanges=function(e){return t.mergeDelta(e,this._aChanges,this._sSection)};return i});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/Merger", ["sap/base/util/merge","sap/ui/model/json/JSONModel"],function(e,t){"use strict";var a={layers:{admin:0,content:5,translation:10,all:20},mergeManifestPathChanges:function(e,t){Object.keys(t).forEach(function(a){if(a.charAt(0)==="/"){var r=t[a];e.setProperty(a,r)}})},mergeDelta:function(r,n,i){var o=e({},r);if(typeof i==="undefined"){i="sap.card"}if(Array.isArray(n)&&n.length>0){var s;n.forEach(function(r){if(r.content){e(o[i],r.content)}else{s=s||new t(o);a.mergeManifestPathChanges(s,r)}})}return o},mergeDesigntimeMetadata:function(t,a){var r=e({},t);a.forEach(function(e){var t=e.content.entityPropertyChange||[];t.forEach(function(e){var t=e.propertyPath;switch(e.operation){case"UPDATE":if(r.hasOwnProperty(t)){r[t]=e.propertyValue}break;case"DELETE":delete r[t];break;case"INSERT":if(!r.hasOwnProperty(t)){r[t]=e.propertyValue}break;default:break}})});return r}};return a});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/Settings", ["sap/ui/core/Control","sap/m/Popover","sap/ui/core/Element","sap/ui/core/Lib","sap/ui/model/json/JSONModel","sap/m/Button","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/OverflowToolbar","sap/m/ToolbarSpacer","sap/m/VBox","sap/m/HBox","sap/m/Select","sap/ui/core/ListItem","sap/m/Label","sap/m/Text","sap/m/Title","sap/m/CheckBox","sap/m/Menu","sap/m/MenuItem","sap/m/Input","sap/ui/integration/util/ParameterMap","sap/base/util/merge","sap/m/Table","sap/m/Column","sap/m/ColumnListItem","sap/m/ScrollContainer","sap/base/util/ObjectPath","sap/ui/integration/util/BindingHelper","sap/ui/integration/editor/fields/ObjectListField","sap/ui/layout/form/SimpleForm","sap/ui/integration/util/Utils","sap/base/util/deepClone","sap/base/util/deepEqual"],function(e,t,a,n,s,i,l,r,o,d,u,p,_,g,c,m,f,v,y,b,S,h,T,w,I,x,P,E,D,V,M,C,O,A){"use strict";var R=e.extend("sap.ui.integration.editor.Settings",{metadata:{library:"sap.ui.integration"},renderer:null});var N=n.getResourceBundleFor("sap.ui.integration",C._language),L,B,j=null,U,F,$,K,k,H,G,W,Y,z,Z,q,X,J=450,Q=360;R.prototype.setConfiguration=function(e){this._originalConfig=e;e=T({},e);var t=new s(e);this.setModel(t,"currentSettings");this.bindElement({path:"currentSettings>/"})};R.prototype.open=function(e,t,s,i,l,r,o){if(N&&N.sLocale!==C._language){N=n.getResourceBundleFor("sap.ui.integration",C._language)}var d=this.getModel("currentSettings").getData(),u=l.getParameterId();if(d.values&&d.values.item){this.prepareFieldsInKey(d)}j=this;X=ee(d,l);this.addDependent(X);this.oHost=i;this.fnApply=r;this.fnCancel=o;this._oOpener=l;B=true;e.addDependent(this);if(!d.allowDynamicValues&&d.values&&d.values.item){a.getElementById(u+"_settings_popover_scroll_container").setHeight("155px")}this.getModel("currentSettings").checkUpdate(true,true);ye(N.getText("EDITOR_SELECT_FROM_LIST"),[]);if(t){var p=s.getDomRef().offsetHeight;p=p>J?J:p;X.setContentHeight(p-50+"px");var _;var g="Right";var c=s.getDomRef().getBoundingClientRect();var m=e.getDomRef().getBoundingClientRect();var f=m.x+m.width/2-c.x;var v=c.width;if(2*f>v){g="Left";_=f-m.width*1.5}else{_=v-f-m.width}_=_>Q?Q:_;X.setContentWidth(_+"px");X.setPlacement(g);k.setValue(e._label);X.openBy(e)}else{X.open()}L=this.getModel("currentSettings");if(L.getProperty("/type")==="destination"){le(u)}else if(L.getProperty("/_hasDynamicValue")){re(u)}else if(L.getProperty("/_hasSettings")){ie(u)}else if(L.getProperty("/allowDynamicValues")){re(u)}else if(L.getProperty("/allowSettings")){ie(u)}};R.prototype._applyCurrentSettings=function(){this.fnApply(L.getData())};R.prototype._cancelCurrentSettings=function(){this.fnCancel(this._originalConfig)};R.prototype.destroy=function(){this.removeDependent(X);return e.prototype.destroy.apply(this,arguments)};function ee(e,n){var s=n.getParameterId(),l=ne(e,s),r=se(e,s,n),u=pe(s),p=_e(s),_=ge(e,n),g=ce(e,n),c=new t({id:s+"_settings_popover",showArrow:true,contentWidth:"400px",showHeader:false,horizontalScrolling:false,verticalScrolling:false,modal:false,footer:new o({content:[r,new d,new i(s+"_settings_popover_ok_btn",{text:N.getText("EDITOR_MORE_OK"),type:"Emphasized",press:function(){if(e.type==="destination"){if(n._oNewParameter){var t=Object.assign({},n._oNewParameter);var i=O(Object.assign([],n._oValue.value));i=i.sort(function(e,t){if(!e._dt||!e._dt._position||!t._dt||!t._dt._position){return 0}return e._dt._position-t._dt._position});i.forEach(function(e){delete e._dt});t.configuration.values.data.json={values:i};oe("pageAdminNewDestinationParameter",t)}}else{if(e.values&&e.values.item){var l=a.getElementById(s+"_settings_popover_pav_table"),r=l.getSelectedContexts(),o=[];if(L.getProperty("/selectedValues")==="Partion"){for(var d=0;d<r.length;d++){var u=j.getKeyFromItem(r[d].getObject());o.push(u)}oe("pageAdminValues",o)}else{oe("pageAdminValues",[])}}}j._applyCurrentSettings();B=false;c.close()}}),new i(s+"_settings_popover_cancel_btn",{text:N.getText("EDITOR_MORE_CANCEL"),press:function(){c.close()}})]}),afterClose:function(){if(B){j._cancelCurrentSettings()}B=true;c.destroy()},afterOpen:function(){window.requestAnimationFrame(function(){c.getDomRef()&&(c.getDomRef().style.opacity="1")});if(e.values&&e.values.item){var t=a.getElementById(s+"_settings_popover_pav_table"),i=L.getProperty("/_next/pageAdminValues");if(i!==undefined&&i.length>0){t.removeSelections();L.setProperty("/selectedValues","None");var l=L.getProperty("/_next/pageAdminValues"),r=t.getItems();for(var o=0;o<l.length;o++){for(var d=0;d<r.length;d++){var u=j.getKeyFromItem(r[d].getBindingContext().getObject());if(l[o]===u){t.setSelectedItem(r[d])}}}L.setProperty("/selectedValues","Partion")}else{t.selectAll();L.setProperty("/selectedValues","All")}}n.fireSettingsPanelOpened()}});c.setCustomHeader(l);c.addContent(u);c.addContent(p);c.addContent(_);c.addContent(g);c.addStyleClass("sapUiIntegrationFieldSettings");return c}function te(e){z=new r({text:N.getText("EDITOR_MORE_SETTINGS"),tooltip:N.getText("EDITOR_MORE_SETTINGS"),key:"settings",icon:"sap-icon://action-settings",width:"50%",press:function(t){ie(e)}}).addStyleClass("setbtn");return z}function ae(e){z=te(e);Z=new l(e+"_settings_popover_segmented_btn",{width:"100%",visible:"{= ${currentSettings>allowDynamicValues} && ${currentSettings>allowSettings}}",items:[new r({text:N.getText("EDITOR_MORE_DYNAMICVALUES"),tooltip:N.getText("EDITOR_MORE_DYNAMICVALUES"),key:"dynamic",icon:"{= ${currentSettings>_hasDynamicValue} ? 'sap-icon://display-more' : 'sap-icon://enter-more'}",width:"50%",press:function(t){re(e)}}).addStyleClass("dynbtn sel"),z]});return Z}function ne(e,t){Z=ae(t);var a=new m(t+"_settings_popover_dynamicvalue_txt",{text:N.getText("EDITOR_MORE_DYNAMICVALUES"),tooltip:N.getText("EDITOR_MORE_DYNAMICVALUES"),visible:e.type!=="destination"&&e.allowDynamicValues&&!e.allowSettings}).addStyleClass("sapUiTinyMagin");var n=new m(t+"_settings_popover_settings_txt",{text:N.getText("EDITOR_MORE_SETTINGS"),visible:e.type!=="destination"&&!e.allowDynamicValues&&e.allowSettings}).addStyleClass("sapUiTinyMagin");var s=new m(t+"_settings_popover_transform_txt",{text:N.getText("EDITOR_MORE_TRANSFORM"),visible:e.type==="destination"}).addStyleClass("sapUiTinyMagin");var i=new o({content:[Z,a,n,s]}).addStyleClass("headertitle");return i}function se(e,t,n){q=new i(t+"_settings_popover_reset_btn",{type:"Transparent",text:N.getText("EDITOR_MORE_RESET"),enabled:"{= ${currentSettings>_next/visible} === (typeof(${currentSettings>visibleToUser}) === 'undefined' ? false : !${currentSettings>visibleToUser}) || ${currentSettings>_next/editable} === (typeof(${currentSettings>editableToUser}) === 'undefined' ? false : !${currentSettings>editableToUser}) || ${currentSettings>_next/allowDynamicValues} === (typeof(${currentSettings>allowDynamicValues}) === 'undefined' ? false : !${currentSettings>allowDynamicValues}) || ${currentSettings>_beforeValue} !== ${currentSettings>value} || ${currentSettings>type} === 'destination'}",tooltip:N.getText("EDITOR_MORE_SETTINGS_P_ADMIN_RESET"),press:function(){if(e.type==="destination"){oe("pageAdminNewDestinationParameter",undefined);n._oValue=undefined;n._oNewParameter=undefined}else{var s=typeof L.getProperty("/visibleToUser")==="undefined"?true:L.getProperty("/visibleToUser");var i=typeof L.getProperty("/editableToUser")==="undefined"?true:L.getProperty("/editableToUser");var l=typeof L.getProperty("/allowDynamicValues")==="undefined"?true:L.getProperty("/allowDynamicValues");oe("visible",s);oe("editable",i);oe("allowDynamicValues",l);if(L.getProperty("/translatable")){if(L.getProperty("/_translatedDefaultValue")&&L.getProperty("/_translatedDefaultValue")!==""){L.setProperty("/value",L.getProperty("/_translatedDefaultValue"))}else if(L.getProperty("/_translatedDefaultPlaceholder")&&L.getProperty("/_translatedDefaultPlaceholder")!==""){L.setProperty("/value",L.getProperty("/_translatedDefaultPlaceholder"))}L.setProperty("/_changed",false)}else{L.setProperty("/value",L.getProperty("/_beforeValue"));if(e.type.indexOf("object")>-1){n.setValue(L.getProperty("/_beforeValue"));n.resetControl()}}if(e.values&&e.values.item){var r=a.getElementById(t+"_settings_popover_pav_table"),o=L.getProperty("/_next/pageAdminValues"),d=r.getItems();if(o!==undefined&&o.length>0&&o.length<d.length){r.removeSelections();for(var u=0;u<o.length;u++){for(var p=0;p<d.length;p++){var _=j.getKeyFromItem(d[p].getBindingContext().getObject());if(o[u]===_){r.setSelectedItem(d[p])}}}L.setProperty("/selectedValues","Partion")}else{r.selectAll();L.setProperty("/selectedValues","All")}}}var g=a.getElementById(t+"_settings_popover");g.getFooter().getContent()[2].firePress()}}).addStyleClass("resetbutton");return q}function ie(e){F.setVisible(true);U.setVisible(false);$.setVisible(false);a.getElementById(e+"_settings_popover_segmented_btn").setSelectedKey("settings");var t=a.getElementById(e+"_settings_popover_currentvalue");t.setVisible(false)}function le(e){$.setVisible(true);F.setVisible(false);U.setVisible(false);var t=a.getElementById(e+"_settings_popover_currentvalue");t.setVisible(false)}function re(e){F.setVisible(false);$.setVisible(false);U.setVisible(true);a.getElementById(e+"_settings_popover_segmented_btn").setSelectedKey("dynamic");var t=j.getModel("contextflat"),n=t._getValueObject(L.getProperty("/value"));if(n&&n.object.label){k.setValue(n.object.label);ye(n.object.description,n.object.tags);if(n.path==="empty"){k.setValue(n.object.label)}Se(n)}var s=a.getElementById(e+"_settings_popover_currentvalue");s.setVisible(true)}function oe(e,t){if(!L.getProperty("/_next")){L.setProperty("/_next",{})}L.setProperty("/_next/"+e,t)}function de(e,t){var a=[];for(var n in e){if(e[n]&&e[n].label){var s=new b({text:e[n].label});s.__data=e[n];e[n].pathvalue=(t+"/"+n).substring(1);a.push(s);var i=de(e[n],t+"/"+n);for(var l=0;l<i.length;l++){s.addItem(i[l])}}}return a}var ue=[{formatMethod:"format.DateTime",sourceTypes:["datetime","date"],label:"Relative date/datetime text of the value",description:"Should be applied to dynamic values of type date or datetime or string values that represent a datetime in the format 'yyyy-MM-ddZhh:mm:ss'",example:"4 weeks ago",syntax:"handlebars",binding:"{= format.dateTime('__|VALUE|__',{relative:true})}"},{formatMethod:"format.DateTime",sourceTypes:["datetime","date"],label:"Short date/datetime text of the value",description:"Should be applied to dynamic values of type date, date-time or text values that represent a datetime in the format 'yyyy-MM-ddZhh:mm:ss.sss'",example:"9/18/20, 2:09 PM",binding:"{= format.dateTime('__|VALUE|__',{style:'short'})}"},{formatMethod:"format.DateTime",sourceTypes:["datetime","date"],label:"Medium date/datetime text of the value",description:"Should be applied to dynamic values of type date, date-time or text values that represent a datetime in the format 'yyyy-MM-ddThh:mm:ss.sssZ'",example:"Sep 18, 2020, 2:09:04 PM",binding:"{= format.dateTime('__|VALUE|__',{style:'medium'})}"},{formatMethod:"format.DateTime",sourceTypes:["datetime","date"],label:"Long date, date-time text of the value",description:"Should be applied to dynamic values of type date or date-time or string values that represent a datetime in the format 'yyyy-MM-ddThh:mm:ss.sssZ'",example:"Sep 18, 2020, 2:09:04 PM",binding:"{= format.dateTime('__|VALUE|__',{style:'long'})}"}];function pe(e){U=new u({visible:true});U.addStyleClass("sapUiSmallMargin");k=new S(e+"_settings_popover_dynamicvalue_input",{width:"100%",showValueHelp:true,valueHelpOnly:true,valueHelpRequest:function(){if(H){H.destroy()}H=new y({});G=de(U.getModel("context").getData(),"");for(var e=0;e<G.length;e++){H.addItem(G[e])}H.attachItemSelected(function(e){var t=e.getParameter("item").__data;ye(t.description||"",t.tags||[]);k.setValue(t.placeholder||t.label);var a=j.getModel("contextflat");Se(a._getPathObject(t.pathvalue))});k.addDependent(H);H.addStyleClass("sapUiIntegrationFieldSettingsMenu");H.openBy(k,false,null,null,"1 0")}});k.addStyleClass("selectvariable");var t=new c(e+"_settings_popover_dynamicvalue_label",{text:N.getText("EDITOR_MORE_DYNAMICVALUES_SELECT_DYNAMIC_VALUE")});k.addAriaLabelledBy(t);var a=new u({items:[t,k]});U.addItem(a);K=new m(e+"_settings_popover_dynamicvalue_desc_txt",{text:"",maxLines:6,renderWhitespace:true});a=new u({width:"100%",items:[K]});K.addStyleClass("description");U.addItem(a);if(ue.length===-1){W=new _(e+"_settings_popover_dynamicvalue_format_select",{width:"100%",enabled:true,change:function(){Y.setText(W.getSelectedItem()._data.description)}});a=new u({visible:false,items:[new c({text:"Customize the value..."}),W]});U.addItem(a);Y=new m(e+"_settings_popover_dynamicvalue_format_label",{text:"",maxLines:4,renderWhitespace:true});Y.addStyleClass("description");a=new u({width:"100%",items:[Y]});U.addItem(a);U.getItems()[2].getItems()[0].addStyleClass("sapUiTinyMarginTop")}U.getItems()[0].getItems()[0].addStyleClass("sapUiTinyMarginTop");return U}function _e(e){var t=new m(e+"_settings_popover_actualvalue_label",{text:N.getText("EDITOR_ACTUAL_VALUE")});var a=new S(e+"_settings_popover_actualvalue_input",{value:{path:"currentSettings>_currentContextValue"},editable:false});a.addAriaLabelledBy(t);var n=new u(e+"_settings_popover_currentvalue",{width:"100%",items:[t,a]});n.addStyleClass("currentval");return n}function ge(e,t){var a=t.getParameterId();F=new u({visible:false});if(e.type==="destination"){return F}var n=(new u).addStyleClass("commonSettings");F.addItem(n);n.addItem(new m({text:N.getText("EDITOR_MORE_SETTINGS_P_ADMIN"),wrapping:true}).addStyleClass("stitle"));var l=new c(a+"_settings_popover_adminvisible_label",{text:N.getText("EDITOR_MORE_SETTINGS_P_ADMIN_VISIBLE"),wrapping:true});var r=new v(a+"_settings_popover_adminvisible_checkbox",{selected:"{= ${currentSettings>_next/visible} !== false}",select:function(e){oe("visible",e.getParameter("selected"))}});r.addAriaLabelledBy(l);n.addItem(new p({alignItems:"Start",justifyContent:"SpaceBetween",items:[l,r]}).addStyleClass("cbrow"));var o=new c(a+"_settings_popover_admineditable_label",{text:N.getText("EDITOR_MORE_SETTINGS_P_ADMIN_EDIT"),wrapping:true});var d=new v(a+"_settings_popover_admineditable_checkbox",{selected:"{= ${currentSettings>_next/editable} !== false}",enabled:"{= ${currentSettings>_next/visible} !== false}",select:function(e){oe("editable",e.getParameter("selected"))}});d.addAriaLabelledBy(o);n.addItem(new p({alignItems:"Start",justifyContent:"SpaceBetween",items:[o,d]}).addStyleClass("cbrow"));var _=new c(a+"_settings_popover_allowdynamicvalues_label",{text:N.getText("EDITOR_MORE_SETTINGS_P_ADMIN_DYN"),wrapping:true});var g=new v(a+"_settings_popover_allowdynamicvalues_checkbox",{selected:"{= ${currentSettings>_next/allowDynamicValues} !== false}",enabled:"{= ${currentSettings>_next/visible} !== false && ${currentSettings>_next/editable} !== false}",select:function(e){oe("allowDynamicValues",e.getParameter("selected"))}});g.addAriaLabelledBy(_);n.addItem(new p({alignItems:"Start",justifyContent:"SpaceBetween",visible:"{= ${currentSettings>allowDynamicValues}!== false}",items:[_,g]}).addStyleClass("cbrow"));if(e.values&&e.values.item){var f;if(e.values.data){var y=e.values.data.path,b;if(y&&y!=="/"){if(y.startsWith("/")){y=y.substring(1)}if(y.endsWith("/")){y=y.substring(0,y.length-1)}b=y.split("/");f=E.get(["_values",b],e)}else{f=E.get(["_values"],e)}}else if(t.getParent().getParent().getAggregation("_extension")){var S=e.values.path;if(S.length>1){S=S.substring(1)}f=E.get([S],t.getModel().getData())}n.addItem(new p({alignItems:"Start",justifyContent:"SpaceBetween",visible:"{= ${currentSettings>_next/visible} !== false && ${currentSettings>_next/editable} !== false}",items:[new c(a+"_settings_popover_allowselectedvalues_label",{text:N.getText("EDITOR_MORE_SETTINGS_P_ADMIN_VALUES_LIST"),tooltip:N.getText("EDITOR_MORE_SETTINGS_P_ADMIN_VALUES_LIST_TOOLTIPS"),wrapping:false}),new i(a+"_settings_popover_allowselectedvalues_all_btn",{type:"Transparent",enabled:f!==undefined,icon:{path:"currentSettings>selectedValues",formatter:function(e){if(e==="All"){return"sap-icon://multiselect-all"}else if(e==="Partion"){return"sap-icon://multi-select"}else if(e==="None"){return"sap-icon://multiselect-none"}}},tooltip:{path:"currentSettings>selectedValues",formatter:function(e){if(e==="All"){return N.getText("EDITOR_MORE_SETTINGS_P_ADMIN_DESELECT_ALL")}else{return N.getText("EDITOR_MORE_SETTINGS_P_ADMIN_SELECT_ALL")}}},press:function(){me(a)}})]}).addStyleClass("cbrow"));var h=new w({id:a+"_settings_popover_pav_table",mode:"MultiSelect",select:function(e){fe(e,a)},columns:[new I]}).addStyleClass("tableHdr");var T=e.values.item.text,V=new s(f);h.setModel(V);var M=(new x).addStyleClass("pavlistItem");if(f){for(var C=0;C<f.length;C++){M.addCell(new p({items:[new m({text:D.createBindingInfos(T)}).addStyleClass("pavTblCellText")]})).addStyleClass("pavlistItem")}}h.bindItems("/",M);var O=new P({id:a+"_settings_popover_scroll_container",height:"125px",vertical:true,horizontal:false,visible:"{= ${currentSettings>_next/visible} !== false && ${currentSettings>_next/editable} !== false}",content:[h]}).addStyleClass("SettingsPAVTable");F.addItem(O)}return F}function ce(e,t){$=new u({visible:false});if(e.type!=="destination"){return $}var a=new c({text:N.getText("EDITOR_MORE_TRANSFORM_P_ADMIN_LABEL"),wrapping:true});var n=new S({id:t.getAssociation("_editor")+"_"+t.getParameterKey()+".toParameter_label",value:"{/configuration/label}"});n.addAriaLabelledBy(a);var i=new c({text:N.getText("EDITOR_MORE_TRANSFORM_P_ADMIN_MAPPINGS"),wrapping:true});var l=1,r=O(t.getModel("destinations").getData()._values),o=e._next?e._next.pageAdminNewDestinationParameter:undefined;if(!t._oValue){var d=o?o.configuration.values.data.json.values:[];if(Array.isArray(d)&&d.length>0){d.forEach(function(e){e.label=e.label||e.name;e._dt={_uuid:C.generateUuidV4(),_position:l};l++})}else{var p=t.getAggregation("_field").getSelectedItem();var _=p?p.getBindingContext("destinations").getPath():undefined;if(_){var g=O(p.getModel("destinations").getProperty(_));g.label=g.label||g.name;g._dt={_uuid:C.generateUuidV4(),_position:l};d=[g]}}t._oValue={value:d}}else{t._oValue.value.forEach(function(e){e._dt=e._dt||{};var t=O(e);delete t._dt;if(typeof t==="object"&&!A(t,{})){e.label=t.label||t.name}})}var m=new s(t._oValue);t._oDestinationValueObjectConfig={label:"Destination Mappings",type:"object[]",values:{data:{path:"/value"},allowAdd:true},showSelectionColumn:false,properties:{label:{label:"Label",column:{width:"50%"},cell:{text:"{label}",editable:true}},name:{label:"Name",column:{width:"50%"},cell:{type:"string",editable:true,values:{data:{json:r,path:"/"},item:{text:"{settings>name}",key:"{settings>name}"},sorter:"name"},change:function(e){var t=e.getSource();var a=t.getBindingContext().getObject();if(a&&!a.label&&a.name){a.label=a.name}}}}},value:t._oValue.value};var f=new V(t.getAssociation("_editor")+"_"+t.getParameterKey()+".toParameter_field",{configuration:t._oDestinationValueObjectConfig,allowPopover:false,parameterKey:t.getParameterKey()+".toParameter",objectBindings:{currentSettings:{path:"currentSettings>/"}}});f.setAssociation("_editor",t.getAssociation("_editor"));f.setModel(m);f.setModel(new s(t._oDestinationValueObjectConfig),"currentSettings");var v=new M({layout:"ResponsiveGridLayout",labelSpanXL:4,labelSpanL:4,labelSpanM:4,labelSpanS:12,emptySpanXL:1,emptySpanL:1,emptySpanM:1,emptySpanS:0,columnsXL:1,columnsL:1,columnsM:1,content:[a,n,i,f]});if(!t._oNewParameter){t._oNewParameter={parameter:t.getParameterKey()+".toParameter",configuration:{label:e.label,manifestpath:e.manifestpath,type:"string",visible:true,editable:true,values:{data:{path:"/values"},item:{text:"{label}",key:"{name}"}},parameterFromDestination:true}};if(o){delete o.configuration.values.data.json;t._oNewParameter=Object.assign(t._oNewParameter,o)}}var y=new s(t._oNewParameter);v.setModel(y);$.addItem(v);return $}function me(e){var t=a.getElementById(e+"_settings_popover_pav_table"),n=a.getElementById(e+"_settings_popover_reset_btn"),s=L.getProperty("/selectedValues");if(s==="All"){t.removeSelections();L.setProperty("/selectedValues","None")}else{t.selectAll();L.setProperty("/selectedValues","All")}if(!n.getEnabled()){n.setEnabled(true)}}function fe(e,t){var n=e.getSource(),s=n.getSelectedItems(),i=n.getItems(),l=a.getElementById(t+"_settings_popover_reset_btn");if(s.length===i.length){L.setProperty("/selectedValues","All")}else if(s.length<i.length&&s.length>0){L.setProperty("/selectedValues","Partion")}else{L.setProperty("/selectedValues","None")}if(!l.getEnabled()){l.setEnabled(true)}}function ve(e,t){e=e||[];W.removeAllItems();var a=[];W.addItem(new g({text:"No customizing needed",key:""}));for(var n=0;n<ue.length;n++){var s=ue[n],i=new g({text:s.label,key:"key"+n});i._data=s;if(s.sourceTypes.indexOf(t)>-1||e.indexOf(s.formatMethod)>-1){W.addItem(i)}else{a.push(i)}}for(var n=0;n<a.length;n++){W.addItem(a[n])}}function ye(e,t){t=t||[];if(t.indexOf("technical")>-1){e=e+"\n"+N.getText("EDITOR_MORE_DYNAMICVALUES_TECHHINT")}K.setText(e)}function be(e){if(ue.length===-1){if(!e){W.removeAllItems();W.addItem(new g({text:"No customizing available for this value"}));Y.setText("");W.setEnabled(false)}else{ve(e.customize,e.type);W.setEnabled(true)}}}function Se(e){if(e){L.setProperty("/_hasDynamicValue",true);var t=e.value;L.setProperty("/value",t);L.setProperty("/_contextpath",e.path);if(e.object&&e.object.value&&e.object.value.indexOf("{{")===0){L.setProperty("/_currentContextValue",h.processPredefinedParameter(e.object.value));be(e.object)}else{if(e.path==="empty"){L.setProperty("/value","");L.setProperty("/_currentContextValue","");L.setProperty("/_hasDynamicValue",false);be()}else{be(e.object);if(e.object&&e.object.hasOwnProperty("value")){L.setProperty("/_currentContextValue",e.object.value)}else{j.oHost.getContextValue(e.path+"/value").then(function(t){if(t===null){L.setProperty("/_currentContextValue","(not available)")}else{L.setProperty("/_currentContextValue",t)}e.object&&(e.object.value=t)})}}}}}R._private=function(){return{oPopover:X,oSegmentedButton:Z,oSettingsButton:z,oDynamicPanel:U,oSettingsPanel:F,oTransformPanel:$,oCurrentModel:L,updateCurrentValue:Se,oCurrentInstance:j,oDynamicValueField:k,oResetToDefaultButton:q,getMenuItems:function(){return G},getMenu:function(){return H}}};R.prototype.prepareFieldsInKey=function(e){this._sKeySeparator=e.values.keySeparator;if(!this._sKeySeparator){this._sKeySeparator="#"}var t=e.values.item.key;this._aFields=t.split(this._sKeySeparator);for(var a in this._aFields){if(this._aFields[a].startsWith("{")){this._aFields[a]=this._aFields[a].substring(1)}if(this._aFields[a].endsWith("}")){this._aFields[a]=this._aFields[a].substring(0,this._aFields[a].length-1)}}};R.prototype.getKeyFromItem=function(e){var t="";this._aFields.forEach(function(a){t+=e[a].toString()+this._sKeySeparator}.bind(this));if(t.endsWith(this._sKeySeparator)){t=t.substring(0,t.length-this._sKeySeparator.length)}return t};return R});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/fields/BaseField", ["sap/ui/core/Control","sap/m/Text","sap/m/Input","sap/m/MultiInput","sap/m/Token","sap/ui/core/Element","sap/ui/integration/util/BindingHelper","sap/ui/core/ListItem","sap/base/util/ObjectPath","sap/base/util/deepEqual","sap/base/util/deepClone","sap/ui/core/Fragment","sap/ui/integration/util/Validators","sap/ui/model/json/JSONModel","sap/m/List","sap/m/CustomListItem","sap/m/VBox","sap/ui/core/CustomData","sap/ui/model/Sorter","sap/ui/integration/editor/Constants"],function(e,t,i,s,a,n,r,o,l,u,g,d,f,h,p,y,c,v,_,m){"use strict";var b="sap/ui/integration/editor/fields/viz";var D=e.extend("sap.ui.integration.editor.fields.BaseField",{metadata:{library:"sap.ui.integration",properties:{configuration:{type:"object"},specialButton:{type:"object"},mode:{type:"string"},host:{type:"object"},visible:{type:"boolean",defaultValue:true},parameterKey:{type:"string"},allowPopover:{type:"boolean",defaultValue:true}},aggregations:{_field:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_dynamicField:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}},associations:{_messageIcon:{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"},_messageStrip:{type:"sap.m.MessageStrip",multiple:false,visibility:"hidden"},_editor:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}},events:{afterInit:{},validateFailed:{},settingsPanelOpened:{}}},renderer:{apiVersion:2,render:function(e,t){var i=t.getAggregation("_field"),s=t._getDynamicField();e.openStart("div",t);e.class("sapUiIntegrationEditorItemField");if(i&&i.getWidth){}if(!t.getVisible()){e.style("display","none")}e.openEnd();if(t.getVisible()){e.openStart("span");e.class("sapUiIntegrationEditorEditor");if(t._hasDynamicValue()){e.style("width","1px");e.style("opacity","0")}else{e.style("width","100%")}e.openEnd();e.renderControl(i);e.close("span");if(t._hasDynamicValue()){e.openStart("span");e.class("sapUiIntegrationEditorSettings");e.openEnd();e.openStart("span");e.class("sapUiIntegrationEditorSettingsField");e.style("width","100%");e.style("opacity","1");e.openEnd();e.renderControl(s);e.close("span");e.close("span")}e.openStart("div",t.getId()+"-ms");e.style("height","0");e.openEnd();e.close("div")}e.close("div")}}});D.prototype.init=function(){this._readyPromise=new Promise(function(e){this._fieldResolver=e}.bind(this))};D.prototype.getMessagestrip=function(){var e=this.getAssociation("_messageStrip");return n.getElementById(e)};D.prototype.getMessageIcon=function(){var e=this.getAssociation("_messageIcon");return n.getElementById(e)};D.prototype._removeValidationMessage=function(){var e=this.control,t=e.getParent().getMessageIcon();if(t){t.setVisible(false)}if(e.getEnabled()){e.setEnabled(false)}};D.prototype.getResourceBundle=function(){return this.getModel("i18n").getResourceBundle()};D.prototype.setConfiguration=function(e,t){if(e!==this.getConfiguration()){this._sanitizeValidationSettings(e);this.setProperty("configuration",e,t);if(e){Promise.resolve().then(function(){this.initEditor(e)}.bind(this))}}return this};D.prototype._sanitizeValidationSettings=function(e){e.validations=e.validations||[];if(e.validation&&e.validations&&Array.isArray(e.validations)){e.validations.push(e.validation);delete e.validation}if(e.validation&&!e.validations){e.validations=[e.validation];delete e.validation}if(e.required){e.validations.unshift({required:true,type:"error"})}};D.prototype.deleteTranslationValuesInTexts=function(e){var t=this;var i=t.getConfiguration();var s="/texts";var a=this._settingsModel.getData();if(!a||!a.texts){return}var n=g(a.texts,500);if(e){if(n[e]){delete n[e][i.manifestpath];if(u(n[e],{})){delete n[e]}if(u(n,{})){delete a.texts;this._settingsModel.setData(a)}else{this._settingsModel.setProperty(s,n)}}}else{for(var r in n){t.deleteTranslationValuesInTexts(r)}}};D.prototype._triggerValidation=function(e){if(u(e,this._preChangedValue)&&this._messageFrom==="validation"){return}this._preChangedValue=e;var t=this.getConfiguration();var i=false;if(t.required){i=true}else if(t.type==="string"&&e){i=true}else if((t.type==="integer"||t.type==="number")&&!isNaN(e)){if(e!==""){i=true}}else if(t.type==="boolean"){i=true}else if(t.type==="string[]"&&Array.isArray(e)){i=true}if(t.validations&&Array.isArray(t.validations)&&i){delete t.validateCheck;for(var s=0;s<t.validations.length;s++){var a=this._handleValidation(t.validations[s],e);if(typeof a==="boolean"&&!a){this.fireValidateFailed();t.validateCheck="failed";return}else if(typeof a.then==="function"){a.then(function(e){if(!e){this.fireValidateFailed();t.validateCheck="failed"}}.bind(this))}}this._hideValueState()}};D.prototype._requestData=function(e){var t=this.control.getParent();var i=t.getConfiguration();var s=t._oDataProviderFactory.create(e.data);t.getModel("currentSettings").setProperty(i._settingspath+"/_loading",true);var a=s.getData();return a.then(function(s){t.getModel("currentSettings").setProperty(i._settingspath+"/_loading",false);var a=e.data.path||"/";if(a.startsWith("/")){a=a.substring(1)}if(a.endsWith("/")){a=a.substring(0,a.length-1)}var n=a.split("/");var r=l.get(n,s);return r})};D.prototype._handleValidation=function(e,t){var i=this.getConfiguration(),s=f[i.type];var a=function(a,n){var r;if(typeof e.message==="function"){r=e.message(t,i,n)}else{r=e.message}if(!r){if(e._txt){r=this.getResourceBundle().getText(s[e._txt],[e[a]])}else{r=this.getResourceBundle().getText(s[a+"Txt"],[e[a]])}}this._showValueState(e.type||"error",r)}.bind(this);if(e["validate"]){var n={control:this.getAggregation("_field"),requestData:this._requestData,removeValidationMessage:this._removeValidationMessage};var r=e["validate"];return Promise.resolve(r(t,i,n)).then(function(e){var t=e.isValid;if(typeof t==="undefined"){t=e}var i=e.data?e.data:undefined;if(!t){a("validate",i);return false}else{this._hideValueState(true,false);return true}}.bind(this))}else{for(var o in e){if(s){var l=s[o];e._txt="";if(l){if(!l(t,e[o],e)){a(o);return false}}}}}return true};D.prototype.onAfterRendering=function(){this._applyMessage();var e=this.getMessagestrip();if(e&&e.getDomRef()){e.getDomRef().style.opacity="0"}};D.prototype._applyMessage=function(){var e=n.getElementById(this.getAssociation("_messageIcon"));if(this.getAssociation("_messageIcon")&&e){var t=e.getDomRef();if(t){t.classList.remove("error");t.classList.remove("warning");t.classList.remove("success");if(this._message){t.classList.add(this._message.type)}}}if(this._message&&(this._message.type==="error"||this._message.type==="warning")){var i=this._message.type==="error"?"Error":"Warning";this._setCurrentProperty("hasError",true);this._setCurrentProperty("errorType",i)}else{this._setCurrentProperty("hasError",false);this._setCurrentProperty("errorType","None")}};D.prototype._showValueState=function(e,t,i){var s=this.getAggregation("_field"),a=e.substring(0,1).toUpperCase()+e.substring(1);this._message={enum:a,type:e,message:t,atControl:false};this._messageFrom="validation";if(i){this._messageFrom="request"}var n=this.getMessagestrip();if(s&&s.setValueState){this._message.atControl=true;if(s.setShowValueStateMessage){s.setShowValueStateMessage(false)}s.setValueState(a);s.setValueStateText(t)}else if(n&&n.getVisible()&&s.getMetadata().getName()!=="sap.m.Switch"){this._showMessage()}this._applyMessage()};D.prototype._hideValueState=function(e,t){if(!this.getParent()){return}var i=this.getMessagestrip();if(this._message){if(e&&this._messageFrom==="request"||!e&&this._messageFrom==="validation"){var s=this.getAggregation("_field");this._message={enum:"Success",type:"success",message:"Corrected",atControl:this._message.atControl};this._messageFrom="validation";if(e){this._messageFrom="request"}if(this._messageto){clearTimeout(this._messageto)}this._messageto=setTimeout(function(){this._messageto=null;this._applyMessage();if(!this._message&&s.setValueState){s.setValueState("None")}}.bind(this),1500);this._applyMessage();if(i){if(i.getDomRef()){i.getDomRef().style.opacity="0"}i.onAfterRendering=null}if(s.setValueState){s.setValueState("Success")}if(s.setValueStateText){s.setValueStateText("")}this._message=null}if(!this._message&&e&&t){this._triggerValidation(this.getConfiguration().value)}}};D.prototype.onfocusin=function(e){if(e&&e.target.classList.contains("sapMBtn")){return}this._showMessage()};D.prototype.onfocusout=function(e){this._hideMessage()};D.prototype._showMessage=function(){if(!this.getParent()){return}var e=this.getMessagestrip();if(this._message&&e){e.applySettings({type:this._message.enum,text:this._message.message});var t=this;e.onAfterRendering=function(){e.getDomRef().style.zIndex="1";e.getDomRef().style.opacity="1";t.getDomRef("ms")&&t.getDomRef("ms").appendChild(e.getDomRef());var i=t.getAggregation("_field");if(t._message&&!t._message.atControl){e.getDomRef().style.marginTop="0";e.getDomRef().style.marginLeft="0"}var s=i.getDomRef()?i.getDomRef().offsetWidth-5:100;if(s<=100){s=i.getParent().getDomRef()?i.getParent().getDomRef().offsetWidth-35:100}e.getDomRef().style.width=s+"px"};e.invalidate()}};D.prototype._hideMessage=function(){var e=this.getMessagestrip();var t=this.getAggregation("_field"),i=t.getDomRef()&&t.getDomRef().contains(window.document.activeElement);if(e){if(!i&&e.getDomRef()){e.getDomRef().style.opacity="0";e.getDomRef().style.zIndex="-1"}e.onAfterRendering=null}};D.prototype.getParameterId=function(){return this.getAssociation("_editor")+"_"+this.getParameterKey()};D.prototype.initEditor=function(t){var i;this._settingsModel=this.getModel("currentSettings");this.initVisualization&&this.initVisualization(t);if(this._visualization.editor){i=this._visualization.editor}else if(this._visualization.type){if(typeof this._visualization.type==="string"){if(this._visualization.type.indexOf("/")===-1){this._visualization.type=b+"/"+this._visualization.type;this._visualization.settings=this._visualization.settings||{value:"{currentSettings>value}",editable:t.editable}}sap.ui.require([this._visualization.type],function(e){this._visualization.type=e;this.initEditor(t)}.bind(this));return}i=new this._visualization.type(this.getParameterId()+"_control",this._visualization.settings||{})}else if(this._visualization.fragment){if(typeof this._visualization.fragment==="string"){if(!this._visualization.controller){this._visualization.controller=this._visualization.fragment+".controller"}if(typeof this._visualization.controller==="string"){sap.ui.require([this._visualization.controller],function(e){this._visualization.controller=new e;this._visualization.controller.init();this._visualization.controller.setField(this);this.initEditor(t)}.bind(this))}else if(typeof this._visualization.controller==="object"){d.load({name:this._visualization.fragment,controller:this._visualization.controller}).then(function(e){this._visualization.fragment=e;this.initEditor(t)}.bind(this))}else{d.load({name:this._visualization.fragment}).then(function(e){this._visualization.fragment=e;this.initEditor(t)}.bind(this))}return}i=this._visualization.fragment}if(i instanceof e){this.setAggregation("_field",i);if(i.attachChange){i.attachChange(function(e){if(e.mParameters.value===""){var t=this.getConfiguration();if(t.type==="string[]"){this._triggerValidation(t.value)}else{this._triggerValidation(e.getParameter("value"))}}}.bind(this))}var s=this._settingsModel.bindProperty("value",this.getBindingContext("currentSettings"));s.attachChange(function(){this._triggerValidation(t.value)}.bind(this));this._triggerValidation(t.value)}var a=this.getMode();t.allowSettings=t.allowSettings||t.allowSettings!==false&&a===m.EDITOR_MODE.ADMIN;t.allowDynamicValues=t.allowDynamicValues||t.allowDynamicValues!==false;t._changeDynamicValues=t.visible&&t.editable&&(t.allowDynamicValues||t.allowSettings)&&a!==m.EDITOR_MODE.TRANSLATION;if(t._changeDynamicValues){this._getDynamicField()}this._applySettings(t);this.fireAfterInit()};D.prototype.initVisualization=function(){};D.prototype._hasDynamicValue=function(){var e=this._getCurrentProperty("value");var t=typeof e==="string"&&(e.indexOf("{context>")===0||e.indexOf("{{parameters")===0);this._setCurrentProperty("_hasDynamicValue",t);return t};D.prototype._hasSettings=function(){var e=this.getConfiguration();if(e._next){var t=e.hasOwnProperty("visibleToUser")?e.visibleToUser:true;var i=e.hasOwnProperty("editableToUser")?e.editableToUser:true;var s=e._next.visible===false?false:e._next.editable;var a=e.hasOwnProperty("allowDynamicValues")?e.allowDynamicValues:true;e._hasSettings=e._next.visible===!t||s===!i||e._next.allowDynamicValues===!a||typeof e._next.pageAdminNewDestinationParameter!=="undefined"}else{e._hasSettings=false;if(e.hasOwnProperty("editableToUser")||e.hasOwnProperty("visibleToUser")){e._next={}}if(e.hasOwnProperty("editableToUser")){e._next.editable=e.editableToUser}if(e.hasOwnProperty("visibleToUser")){e._next.visible=e.visibleToUser}}return e._hasSettings};D.prototype._getDynamicField=function(){var e=this.getAggregation("_dynamicField");if(!e){var e=new s(this.getParameterId()+"_dynamic_control",{showValueHelp:false});this.setAggregation("_dynamicField",e)}return e};D.prototype._hideDynamicField=function(){var e=this._getDynamicField(),t=this.getAggregation("_field");if(e.getDomRef()){var i=e.getDomRef().parentNode.style;i.width="1px";i.opacity=0;i=t.getDomRef().parentNode.style;t.getDomRef().style.visibility="visible";i.width="100%";i.opacity=1}};D.prototype._showDynamicField=function(){var e=this._getDynamicField(),t=this.getAggregation("_field");if(e.getDomRef()){var i=e.getDomRef().parentNode.style;i.width="100%";i.opacity=1;i=t.getDomRef().parentNode.style;t.getDomRef().style.visibility="hidden";i.width="1px";i.opacity=0}};D.prototype._setCurrentProperty=function(e,t){if(this._getCurrentProperty(e)!==t){this._settingsModel.setProperty(e,t,this.getBindingContext("currentSettings"))}};D.prototype._getCurrentProperty=function(e){return this._settingsModel.getProperty(e,this.getBindingContext("currentSettings"))};D.prototype._applySettings=function(e){var t=this._getDynamicField(),i=this.getModel("contextflat")._getValueObject(e.value);t.removeAllTokens();if(!this._getCurrentProperty("_changeDynamicValues")){t.setEnabled(false)}if(i&&i.path!=="empty"){if(i.object.value&&i.object.value.indexOf("{{")==0){this._setCurrentProperty("value",i.object.value)}else{this._setCurrentProperty("value",i.value)}t.addToken(new a({text:i.object.label,delete:function(){this._setCurrentProperty("value","");var e=this.getAggregation("_field");e.setValue("");e.fireChange();if(!this._hasDynamicValue()){this._hideDynamicField()}this._applyButtonStyles();window.setTimeout(function(){this.getAggregation("_field").focus()}.bind(this),100)}.bind(this)}));var s=this.getConfiguration();if(s.type==="string"&&s.translatable){this.deleteTranslationValuesInTexts()}}else{this._setCurrentProperty("value",e.value);this._setCurrentProperty("_changed",e._changed);this._hideDynamicField()}this._setCurrentProperty("_next",e._next);this._applyButtonStyles();if(!this._hasDynamicValue()){this._hideDynamicField()}else{this._showDynamicField()}this._fieldResolver&&this._fieldResolver();this._fieldResolver=null};D.prototype._cancelSettings=function(){this._applyButtonStyles();if(!this._hasDynamicValue()){this._hideDynamicField()}};D.prototype._applyButtonStyles=function(){if(!this._settingsButton){return}if(!this._hasDynamicValue()){this._settingsButton.removeStyleClass("dynamicvalue")}else{this._settingsButton.addStyleClass("dynamicvalue")}if(!this._hasSettings()){this._settingsButton.removeStyleClass("settings")}else{this._settingsButton.addStyleClass("settings")}};D.prototype.isFilterBackend=function(){var e=this.getConfiguration();var t=false;if(e&&e.values&&e.values.data){if(e.values.data.request&&e.values.data.request.parameters&&e.values.data.request.parameters.$filter&&e.values.data.request.parameters.$filter.indexOf("{currentSettings>suggestValue}")>-1){t=true}else if(e.values.data.request&&e.values.data.request.url&&e.values.data.request.url.indexOf("{currentSettings>suggestValue}")>-1){t=true}}return t};D.prototype.formatListItem=function(e){var t=new o;for(var i in e){t.bindProperty(i,r.createBindingInfos(e[i]))}return t};D.prototype.addModelPrefix=function(e,t){for(var i in e){var s=e[i];s="{"+t+">"+s.substring(1);e[i]=s}return e};D.prototype.getPopoverPlacement=function(e){var t="Right";var i=e.getDomRef().getBoundingClientRect().x;var s=document.body.offsetWidth;if(2*i>s){t="Left"}return t};D.prototype.buildTranslationsList=function(e){return new p(e+"",{items:{path:"languages>/translatedLanguages",key:"key",template:new y({content:[new c({items:[new t({text:"{languages>description}"}),new i({value:"{languages>value}",editable:"{languages>editable}",valueState:"{= ${languages>updated} === true ? 'Information' : 'None' }",showValueStateMessage:false})]})],customData:[new v({key:"{languages>key}",value:"{languages>description}"})]}),sorter:[new _({path:"updated",descending:true})]}})};D.prototype.buildTranslationsModel=function(e){var t=new h(e);t.attachPropertyChange(function(e){var i=e.getParameter("context");t.setProperty(i.getPath("updated"),true);t.setProperty("/isUpdated",true)});return t};return D});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/fields/BooleanField", ["sap/ui/integration/editor/fields/BaseField","sap/m/CheckBox"],function(e,t){"use strict";var i=e.extend("sap.ui.integration.editor.fields.BooleanField",{metadata:{library:"sap.ui.integration"},renderer:e.getMetadata().getRenderer()});i.prototype.initVisualization=function(e){var i=e.visualization;if(!i){i={type:t,settings:{selected:{path:"currentSettings>value"},editable:e.editable}};e.withLabel=true}else if(i.type==="Switch"){i.type="sap/m/Switch"}this._visualization=i};return i});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/fields/DateField", ["sap/ui/integration/editor/fields/BaseField","sap/m/DatePicker","sap/ui/core/date/UI5Date","sap/ui/model/type/Date"],function(e,t,a,i){"use strict";var n=e.extend("sap.ui.integration.editor.fields.DateField",{metadata:{library:"sap.ui.integration"},renderer:e.getMetadata().getRenderer()});n.prototype.initVisualization=function(e){var n=e.visualization;var r=e.formatter;if(e.value!==""){e.value=a.getInstance(e.value)}if(!n){n={type:t,settings:{value:{path:"currentSettings>value",type:new i(r)},editable:e.editable,width:"100%",change:function(e){if(e.getParameters().valid){var t=e.getSource();t.getBinding("value").setValue(t.getDateValue());t.getBinding("value").checkUpdate()}else{var t=e.getSource();t.getBinding("value").setValue("")}}}}}this._visualization=n};return n});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/fields/DateTimeField", ["sap/ui/integration/editor/fields/BaseField","sap/m/DateTimePicker","sap/ui/core/date/UI5Date","sap/ui/model/type/DateTime"],function(e,t,a,i){"use strict";var n=e.extend("sap.ui.integration.editor.fields.DateTimeField",{metadata:{library:"sap.ui.integration"},renderer:e.getMetadata().getRenderer()});n.prototype.initVisualization=function(e){var n=e.visualization;var r=e.formatter;if(e.value!==""){e.value=a.getInstance(e.value)}if(!n){n={type:t,settings:{value:{path:"currentSettings>value",type:new i(r)},editable:e.editable,width:"100%",change:function(e){if(e.getParameters().valid){var t=e.getSource();t.getBinding("value").setValue(t.getDateValue().toISOString());t.getBinding("value").checkUpdate()}else{var t=e.getSource();t.getBinding("value").setValue("");t.getBinding("value").checkUpdate(true)}}}}}this._visualization=n};return n});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/fields/DestinationField", ["sap/ui/integration/editor/fields/BaseField","sap/ui/core/ListItem","sap/m/ComboBox","sap/ui/model/Sorter","sap/ui/model/Filter"],function(e,t,i,a,n){"use strict";var r=e.extend("sap.ui.integration.editor.fields.DestinationField",{metadata:{library:"sap.ui.integration"},renderer:e.getMetadata().getRenderer()});r.prototype.initVisualization=function(e){var r=this;var s=e.visualization;if(!s){s={type:i,settings:{busy:{path:"destinations>_loading",formatter:function(t){if(!t&&e.filter){var i;if(Array.isArray(e.filter.filters)){var a=[];e.filter.filters.forEach(function(e){a.push(new n(e))});var s=typeof e.filter.and==="boolean"?e.filter.and:false;i=new n({filters:a,and:s})}else{i=new n(e.filter)}var o=r.getAggregation("_field").getBinding("items");if(!o){r.attachEventOnce("afterInit",function(){o=r.getAggregation("_field").getBinding("items");o.filter([i])})}else{o.filter([i])}}return t}},selectedKey:{path:"currentSettings>value"},width:"100%",editable:{path:"currentSettings>editable"},items:{path:"destinations>_values",template:new t({text:"{destinations>name}",key:"{destinations>name}"})}}};s.settings.items.sorter=[];var o=e.sorter||[{path:"name"}];o.forEach(function(e){s.settings.items.sorter.push(new a(e))})}this._visualization=s};return r});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/fields/GroupField", ["sap/ui/core/Element","sap/ui/integration/editor/fields/BaseField","sap/m/Panel","sap/m/IconTabBar","sap/m/IconTabFilter","sap/m/MessageStrip","sap/ui/integration/editor/Constants"],function(e,t,r,i,n,s,a){"use strict";var o=t.extend("sap.ui.integration.editor.fields.GroupField",{metadata:{library:"sap.ui.integration"},renderer:t.getMetadata().getRenderer()});o.prototype.initVisualization=function(t){var n=t.visualization;if(!n||n.type==="Panel"){n={type:r,settings:{headerText:t.label,visible:t.visible,expandable:t.expandable!==false,expanded:"{currentSettings>expanded}",width:"auto",backgroundDesign:"Transparent",objectBindings:{currentSettings:{path:"currentSettings>"+(t._settingspath||"/form/items")},items:{path:"items>/form/items"},context:{path:"context>/"}},expand:function(t){var r=t.getParameter("expand");if(r){var i=t.getSource();var n=this.getConfiguration();if(!i._level){i._level=n.level||0}var s=i._level==="1"&&this.getParent().getParent()?this.getParent().getParent().getAggregation("_messageStrip"):this.getParent().getAggregation("_messageStrip");if(s===null){s=e.getElementById(this.getAssociation("_messageStrip"))}i.addContent(s);i.focus()}}.bind(this)}}}else if(n.type==="Tab"){n={type:i,settings:{expandable:t.expandable!==false,visible:t.visible,expanded:"{currentSettings>expanded}",objectBindings:{currentSettings:{path:"currentSettings>"+(t._settingspath||"/form/items")},items:{path:"items>/form/items"},context:{path:"context>/"}},select:this.checkErrorsInIconTabBar.bind(this)}}}this._visualization=n;this.attachAfterInit(this._afterInit)};o.prototype._afterInit=function(){var e=this.getConfiguration();var t=this.getAggregation("_field");if(t instanceof r){if(this.getMode()!==a.EDITOR_MODE.TRANSLATION){var o=this.getResourceBundle();var g=new s({id:this.getParameterId()+"_strip",showIcon:false,visible:"{= !${currentSettings>expanded} && ${currentSettings>hasError} === true}",text:{path:"currentSettings>errorType",formatter:function(e){var t="";switch(e){case"Error":t=o.getText("EDITOR_GROUP_ERRORS");break;case"Warning":t=o.getText("EDITOR_GROUP_WARNINGS");break;default:}return t}},type:"{currentSettings>errorType}",objectBindings:{currentSettings:{path:"currentSettings>"+(e._settingspath||"/form/items")}}});if(e.level!=="1"){g.setModel(this._settingsModel,"currentSettings")}g.addStyleClass("sapUiIntegrationEditorPanelMessageStrip");t._messageStrip=g}t._cols=e.cols||2;t._level=e.level||0;var l={onAfterRendering:function(t){var n=t.srcControl;var s=document.getElementById(n.getId());s.setAttribute("aria-label",e.label);if(n._subItems&&n._subItems.length>0){this.checkErrorsInSubItems(this._settingsModel,n)}var a=n._messageStrip;if(n._level!=="1"&&a){a.invalidate()}if(n.getExpanded()){var o=n.getContent();o.forEach(function(e){if(e.isA("sap.ui.integration.editor.fields.GroupField")){var t=e.getAggregation("_field");if(t instanceof r&&t._subItems&&t._subItems.length>0){e.checkErrorsInSubItems(e._settingsModel,t)}else if(t instanceof i&&t.getItems().length>0){e.checkErrorsInIconTabBar()}}})}}.bind(this)};t.addEventDelegate(l)}else if(t instanceof i){var d=new n(this.getParameterId()+"_control_icontabfilter",{text:e.label,visible:e.visible,objectBindings:{currentSettings:{path:"currentSettings>"+(e._settingspath||"/form/items")},items:{path:"items>/form/items"},context:{path:"context>/"}}});t.addItem(d);t.setBackgroundDesign("Transparent");t.setHeaderBackgroundDesign("Transparent");if(this.getMode()!==a.EDITOR_MODE.TRANSLATION){var u=new s({id:this.getParameterId()+"_strip",showIcon:false,visible:false,objectBindings:{currentSettings:{path:"currentSettings>"+(e._settingspath||"/form/items")}}});u.addStyleClass("sapUiIntegrationEditorTabMessageStrip");t._messageStrip=u}d._level=e.level||0}};o.prototype.checkErrorsInIconTabBar=function(t){var r=this.getAggregation("_field"),i=r.getSelectedKey(),s=r.getItems(),a=r.getExpanded(),o=false;for(var g=0;g<s.length;g++){if(!a){o=true}else if(s[g].getId()!==i){o=true}else if(s[g].getId()===i){o=false}if(o){var l=false,d="None";if(s[g]._subItems&&s[g]._subItems.length>0){var u=s[g].getModel("currentSettings");var c=this.checkErrorsInSubItems(u,s[g]);l=c.hasError;d=c.errorType}if(l){var p=new n,f=s[g];if(f.getItems().length>0){f.removeAllItems()}f.addItem(p);this._handleITBValidation(f,d);if(f._oExpandButton===undefined){this._delayHandleITBValidation(f,d)}else{this._handleITBValidation(f,d)}}}else if(s[g].getItems().length>0){s[g].removeItem(s[g].getItems()[0]);if(s[g]._oExpandButton){s[g]._oExpandButton.visible=false}var h=this.getParent().getParent().getAggregation("_messageStrip");if(h===null){h=e.getElementById(this.getAssociation("_messageStrip"))}s[g].addContent(h)}}};o.prototype.checkErrorsInSubItems=function(t,r){var i=false;var n="None";for(var s=0;s<r._subItems.length;s++){var a=r._subItems[s].settingspath;var o=e.getElementById(r._subItems[s].itemId);if(t.getProperty(a+"/hasError")===true&&o.getVisible()){i=true;var g=t.getProperty(a+"/errorType");if(g==="Error"){n="Error";break}else if(g==="Warning"&&n!=="Error"){n="Warning"}}}t.setProperty("hasError",i,this.getBindingContext("currentSettings"));t.setProperty("errorType",n,this.getBindingContext("currentSettings"));return{hasError:i,errorType:n}};o.prototype._handleITBValidation=function(t,r){var i=this.getResourceBundle();if(t.getItems().length>0&&t._oExpandButton){var n=t._oExpandButton;var s=null;if(r==="Error"){s=i.getText("EDITOR_GROUP_ERRORS");n.setIcon("sap-icon://message-error");n.addStyleClass("errorBTNImage")}else if(r==="Warning"){s=i.getText("EDITOR_GROUP_WARNINGS");n.setIcon("sap-icon://message-warning");n.addStyleClass("warningBTNImage")}n.setTooltip(null);n.addEventDelegate({onAfterRendering:function(e){var t=document.getElementById(n.getId());t.setAttribute("aria-label","With validation errors");t.setAttribute("title","")}});n.setEnabled(false);n.addStyleClass("errorBTN").addStyleClass("errorBTNDisabled");var a=e.getElementById(this.getParameterId()+"_strip");n.addEventDelegate({onmouseover:function(){a.setVisible(true);a.setType(r);a.setText(s)},onmouseout:function(){a.setVisible(false)}},this)}};o.prototype._delayHandleITBValidation=function(e,t){var r=this;var i=setInterval(function(){if(e._oExpandButton){r._handleITBValidation(e,t);clearInterval(i)}},50)};return o});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/fields/IntegerField", ["sap/ui/integration/editor/fields/BaseField","sap/m/Input","sap/ui/model/type/Integer"],function(e,t,a){"use strict";var i=e.extend("sap.ui.integration.editor.fields.IntegerField",{metadata:{library:"sap.ui.integration"},renderer:e.getMetadata().getRenderer()});i.prototype.initVisualization=function(e){var i=e.visualization;var r=e.formatter;if(!i){i={type:t,settings:{value:{path:"currentSettings>value",type:new a(r)},editable:e.editable,type:"Number",parseError:function(e){var t=e.getSource(),a=null;if(t.getValue()!==""){if(e.getParameters()&&e.getParameters().exception&&e.getParameters().exception.message){a=e.getParameters().exception.message}else{a=e.getId()}t.getParent()._showValueState("error",a)}else{t.getParent()._showValueState("none","")}}}}}else if(i.type==="Slider"){i.type="sap/m/Slider"}this._visualization=i};return i});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/fields/NumberField", ["sap/ui/integration/editor/fields/BaseField","sap/m/Input","sap/ui/model/type/Float"],function(e,t,i){"use strict";var a=e.extend("sap.ui.integration.editor.fields.NumberField",{metadata:{library:"sap.ui.integration"},renderer:e.getMetadata().getRenderer()});a.prototype.initVisualization=function(e){var a=e.visualization;var r=e.formatter;if(!a){a={type:t,settings:{value:{path:"currentSettings>value",type:new i(r)},editable:e.editable,type:"Number"}}}this._visualization=a};return a});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/fields/ObjectField", ["sap/ui/integration/editor/fields/BaseField","sap/m/Text","sap/m/TextArea","sap/m/Input","sap/m/NavContainer","sap/m/Page","sap/m/Popover","sap/m/OverflowToolbar","sap/m/ToolbarSpacer","sap/m/Button","sap/ui/model/json/JSONModel","sap/m/Label","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/base/util/deepEqual","sap/ui/core/Icon","sap/m/Switch","sap/m/CheckBox","sap/m/MessageBox","sap/m/MessageToast","sap/base/util/deepClone","sap/m/Link","sap/ui/layout/form/SimpleForm","sap/base/util/merge","sap/ui/model/Sorter","sap/ui/integration/util/Utils","sap/m/table/columnmenu/Menu","sap/m/ComboBox","sap/ui/core/ListItem","sap/ui/model/type/Integer","sap/ui/model/type/Float","sap/m/HBox","sap/ui/core/CustomData","sap/ui/integration/editor/fields/viz/IconSelect","sap/m/Image","sap/ui/core/Lib"],function(e,t,a,r,o,n,l,i,s,d,u,p,_,c,g,v,f,T,b,h,y,O,P,m,E,I,S,D,w,L,C,x,V,B,A,R){"use strict";let M,j,N;var U=/\{\{(?!parameters.)(?!destinations.)([^\}\}]+)\}\}/g;var F=e.extend("sap.ui.integration.editor.fields.ObjectField",{metadata:{library:"sap.ui.integration",events:{tableUpdated:{},translationPopoverOpened:{}}},renderer:e.getMetadata().getRenderer()});F.loadDependencies=function(){return R.load("sap.ui.table").then(()=>new Promise((e,t)=>{sap.ui.require(["sap/ui/table/Table","sap/ui/table/Column","sap/ui/table/rowmodes/Fixed"],(t,a,r)=>{M=t;j=a;N=r;e()},t)}))};F.prototype.initVisualization=function(e){var t=this;t._newObjectTemplate={_dt:{_selected:true,_uuid:""}};var a=e.visualization;if(!a){if(e.value&&!e.properties&&(!e.values||e.values&&!e.values.metadata)){t.parseValueProperties()}if(e.values){a=t.createTableVisualization(e)}else if(e.properties){a=t.createSimpleFormVisualization(e)}else{a=t.createTextAreaVisualization(e)}e.withLabel=true}this._visualization=a;this.attachAfterInit(this._afterInit)};F.prototype._afterInit=function(){var e=this;var t=this.getAggregation("_field");if(t instanceof P){t.addStyleClass("sapUiIntegrationEditorItemObjectFieldForm");var a=y(e.getConfiguration().value,500)||{};t.setModel(new u({value:a,editMode:"Properties"}))}else if(t instanceof M){t.addStyleClass("sapUiIntegrationEditorItemObjectFieldTable");e._oMenu=new S;var r=t.getColumns();for(var o=0;o<r.length;o++){if(r[o].getFilterProperty()||r[o].getSortProperty()){r[o].setHeaderMenu(e._oMenu.getId())}}}};F.prototype.parseValueProperties=function(){var e=this;var t=e.getConfiguration();if(typeof t.value==="object"&&!g(t.value,{})&&!Array.isArray(t.value)&&!t.properties){var a={};for(var r in t.value){if(r!=="_dt"){var o=typeof t.value[r];var n=o==="string"?{}:{type:o};a[r]=n}}if(!g(a,{})){t.properties=a;t._propertiesParsedFromValue=true}}};F.prototype.createTableVisualization=function(e){var t=this;var a=t.createTableToolbar(e);var r=[];var o=e.values?e.values.data.path||"/":"/value";if(e.values&&e.values.metadata){r={path:"meta>/"+e.values.metadata.namespace+"."+e.values.metadata.entityTypeName,filters:new _({path:"$kind",operator:c.EQ,value1:"Property"}),factory:t.columnFactory.bind(t)}}else{r=t.buildTableColumns()}var n={type:M,settings:{rowMode:new N({rowCount:5}),busy:"{currentSettings>_loading}",busyIndicatorDelay:200,columns:r,selectionBehavior:"RowOnly",rowSelectionChange:t.onTableSelectionChange.bind(t),extension:a,filter:t.onFilter.bind(t)}};if(e.type==="object"){n.settings.rows="{"+o+"}"}else{n.settings.rows="{path: '"+o+"', sorter: {path: '_dt/_position', descending: false}}"}return n};F.prototype.createSimpleFormVisualization=function(e){var t=this;var a=t.getParameterId();var r=t.getResourceBundle();var o=function(){var e=this.getAggregation("_field").getModel();e.checkUpdate(true);var t=e.getProperty("/value")||{};if(!t._dt){t._dt={_uuid:I.generateUuidV4()}}else if(!t._dt._uuid){t._dt._uuid=I.generateUuidV4()}t=y(t,500);this.setValue(t)}.bind(t);var n=t.createFormContents(o,"/value/",false,t.openTranslationListPopup);var l=new d(a+"_control_form_editmode_btn",{icon:{path:"/editMode",formatter:function(e){if(e==="Properties"){return"sap-icon://syntax"}else{return"sap-icon://form"}}},tooltip:{path:"/editMode",formatter:function(e){if(e==="Properties"){return r.getText("EDITOR_FIELD_OBJECT_FORM_EDITMODE_JSON")}else{return r.getText("EDITOR_FIELD_OBJECT_FORM_EDITMODE_PROPERTIES")}}},press:function(){var e=t.getAggregation("_field").getModel();var a=e.getProperty("/editMode");if(a==="Properties"){e.setProperty("/editMode","Json")}else{e.setProperty("/editMode","Properties")}}});var u=new d(a+"_control_form_delete_btn",{icon:"sap-icon://delete",tooltip:r.getText("EDITOR_FIELD_OBJECT_DELETE"),visible:e.enabled,enabled:{path:"currentSettings>value",formatter:function(e){if(!e||e===""){return false}return true}},press:function(e){t.setValue(undefined);var a=t.getAggregation("_field").getModel();var r=a.getProperty("/value");if(r&&r._dt&&r._dt._uuid){t.deleteTranslationValueInTexts(undefined,r._dt._uuid)}a.setProperty("/value",{});a.checkUpdate(true)}});var p={type:P,settings:{layout:"ResponsiveGridLayout",visible:e.visible,labelSpanXL:2,labelSpanL:2,labelSpanM:2,labelSpanS:12,emptySpanXL:1,emptySpanL:1,emptySpanM:1,emptySpanS:0,columnsXL:1,columnsL:1,columnsM:1,toolbar:new i({content:[new s,l,u]}).addStyleClass("sapMTB"),content:n}};return p};F.prototype.createTextAreaVisualization=function(e){var t=this;var r={type:a,settings:{value:{path:"currentSettings>value",formatter:function(e){if(!e||e===""){return undefined}e=JSON.stringify(e,null,"\t");if(typeof e==="object"&&!e.length){e=e.replace(/\"\$\$([a-zA-Z]*)\$\$\"/g,function(e){return e.substring(3,e.length-3)})}return e}},editable:"{config/editable}",width:"100%",enabled:"{config/enabled}",placeholder:"{config/placeholder}",visible:e.visible,change:this.onChangeOfTextArea.bind(t),rows:7}};return r};F.prototype.buildSelectionColumnLabels=function(){var e=this;var t=e.getConfiguration();var a=e.getResourceBundle();return new d(e.getParameterId()+"_control_table_column_selection_label_clearall_btn",{icon:"sap-icon://clear-all",type:"Transparent",enabled:typeof t.values==="undefined"?false:"{/_hasSelected}",tooltip:a.getText("EDITOR_FIELD_OBJECT_TABLE_COLUMN_SELECTION_TOOLTIP_REMOVE"),press:e.onUnSelectAll.bind(e)})};F.prototype.buildTableColumns=function(){var e=this;var o=e.getParameterId();var n=e.getConfiguration();var _=[];var c=Object.keys(n.properties);if(c.length>0){var g=e.getResourceBundle();var b=typeof n.values==="undefined"?false:true;if(b){b=typeof n.showSelectionColumn==="undefined"?true:n.showSelectionColumn}var h=e.buildSelectionColumnLabels();var S=new j(o+"_control_table_column_selection",{width:"3.2rem",hAlign:"Center",visible:b,multiLabels:[h],template:new T({selected:"{_dt/_selected}",enabled:typeof n.values==="undefined"?false:true,tooltip:{path:"_dt/_selected",formatter:function(e){if(e){if(n.type==="object"){return g.getText("EDITOR_FIELD_OBJECT_TABLE_COLUMN_SELECTION_CELL_TOOLTIP_UNSELECT")}else{return g.getText("EDITOR_FIELD_OBJECT_LIST_TABLE_COLUMN_SELECTION_CELL_TOOLTIP_REMOVE")}}else if(n.type==="object"){return g.getText("EDITOR_FIELD_OBJECT_TABLE_COLUMN_SELECTION_CELL_TOOLTIP_SELECT")}else{return g.getText("EDITOR_FIELD_OBJECT_LIST_TABLE_COLUMN_SELECTION_CELL_TOOLTIP_ADD")}}},select:e.onSelectionChange.bind(e)})});_.push(S);for(var L in n.properties){var C=o+"_control_table_column_property_"+L;var B=n.properties[L];var R=B.label||L;var M="{"+L+"}";if(B.defaultValue){e._newObjectTemplate[L]=B.defaultValue}var N={width:"7rem",label:R};if(B.column){N=m(N,B.column)}if(N.label.match(U)){N.label="{i18n>"+N.label.substring(2,N.label.length-1)}N.tooltip=N.label;N.label=new p({text:N.label});var F=B.cell&&B.cell.type?B.cell.type:B.type||"Text";var k;var J;var $=y(B.cell)||{};if(!$.values&&B.values){$.values=B.values}delete $.type;if(F==="string"&&$.values){F="ComboBox"}if(F==="Text"&&$.editable){F="Input"}F=F.toLowerCase();switch(F){case"int":case"number":J={text:M,wrapping:false};J=m(J,$);k=new t(J);break;case"string":case"text":J={text:M,wrapping:false};J=m(J,$);var H=J.text;var z=new u({translatable:B.translatable||false,property:L});if(typeof H==="string"){var K=e.getTranslationKey(H);if(K){J.text=g.getText(K)}else if(H.startsWith("{")&&H.endsWith("}")){J.text={path:H.substring(1,H.length-1),formatter:function(t){var a=this.getBindingContext(),r,o=this.getModel("settings").getData(),n=e.getTranslationKey(t);if(o.translatable||n){if(a&&a.getObject()&&a.getObject()._dt){r=e.getTranslationValueInTexts(I._language,a.getObject()._dt._uuid,o.property);if(r){return r}}if(n){t=g.getText(n);return t}}return t}}}}J.tooltip=$.tooltip||J.text;k=new t(J);k.setModel(z,"settings");break;case"icon":var W={src:M,visible:"{= $"+M+".indexOf('data:image/') === 0}",press:function(e){var t=e.getSource();if(!t._oImagePopover){t._oImagePopover=new l(t.getId()+"-imagePopover",{placement:"Right",showHeader:false}).addStyleClass("sapUiIntegrationImageSelect")}t._oImagePopover.destroyContent();t._oImagePopover.addContent(new A(t.getId()+"-imagePopover-image",{src:t.getSrc()}).addStyleClass("image"));t._oImagePopover.openBy(t)}};var G={src:M,visible:"{= $"+M+".indexOf('data:image/') === -1}"};W=m(W,A.getMetadata().removeUnknownSettings($));G=m(G,v.getMetadata().removeUnknownSettings($));k=new x({alignItems:"Center",justifyContent:"Center",items:[new A(W).addStyleClass("imageCell"),new v(G)]});break;case"boolean":J={selected:M,enabled:false};J=m(J,$);k=new T(J);break;case"switch":J={state:M,enabled:false};J=m(J,$);k=new f(J);break;case"link":J={text:M,target:"_blank",href:M};J=m(J,$);k=new O(J);break;case"combobox":var X=this.addModelPrefix($.values.item,"settings");J={width:"100%",selectedKey:M,editable:false,items:{path:"settings>"+$.values.data.path,template:new w(X),templateShareable:false}};if($.values.sorter){J.items.sorter=[new E({path:$.values.sorter})];delete $.values.sorter}J=m(J,$);var q=new u($.values.data.json);delete J.values;k=new D(J);k.setModel(q,"settings");break;case"input":J={value:M};if($.text){J.value=$.text}J.tooltip=$.tooltip||J.text;k=new r(J);break;case"object":J={value:{path:L,formatter:function(e){if(!e||e===""){return undefined}e=JSON.stringify(e,null,"\t");if(typeof e==="object"&&!e.length){e=e.replace(/\"\$\$([a-zA-Z]*)\$\$\"/g,function(e){return e.substring(3,e.length-3)})}return e}},editable:false};J=m(J,$);k=new x({items:[new r(J),new d({icon:"sap-icon://display",customData:[new V({key:"value",value:M})],press:function(t){var r=t.getSource();if(!e._oObjectPropertyDetailsPopover){var n=new a(o+"_control_objectproperty_details_popover_textarea",{editable:false,rows:9});var u=new d(o+"_control_objectproperty_details_popover_close_btn",{text:g.getText("EDITOR_FIELD_OBJECT_DETAILS_POPOVER_BUTTON_CLOSE"),press:function(){e._oObjectPropertyDetailsPopover.close()}});e._oObjectPropertyDetailsPopover=new l(o+"_control_objectproperty_details_popover",{placement:"Right",contentWidth:"200px",contentHeight:"240px",modal:true,title:g.getText("EDITOR_FIELD_OBJECT_PROPERTY_POPOVER_TITLE"),content:[new P({layout:"ResponsiveGridLayout",labelSpanXL:4,labelSpanL:4,labelSpanM:4,labelSpanS:12,emptySpanXL:1,emptySpanL:1,emptySpanM:1,emptySpanS:0,columnsXL:1,columnsL:1,columnsM:1,content:[n]})],footer:new i({content:[new s,u]})}).addStyleClass("sapUiIntegrationEditorItemObjectFieldDetailsPopover");e._oObjectPropertyDetailsPopover._oTextArea=n;e._oObjectPropertyDetailsPopover._oCloseButton=u}var p=r.getCustomData()[0];var _=p.getValue();if(_){_=JSON.stringify(_,null,"\t");if(typeof _==="object"&&!_.length){_=_.replace(/\"\$\$([a-zA-Z]*)\$\$\"/g,function(e){return e.substring(3,e.length-3)})}}e._oObjectPropertyDetailsPopover._oTextArea.setValue(_);e._oObjectPropertyDetailsPopover.openBy(r)}})]});break;default:k=new t({text:M,wrapping:false});break}N.template=k;var Z=new j(C,N);_.push(Z)}}return _};F.prototype.checkHasFilterDefined=function(e){var t=true;if(e._propertiesParsedFromValue===true){t=false}else{var a=JSON.stringify(e.properties,null,"\t");t=a.indexOf("filterProperty")>-1?true:false}return t};F.prototype.createTableToolbar=function(e){var t=this;var a=t.getParameterId();var r=t.getResourceBundle();var o=t.checkHasFilterDefined(e);var n=e.enabled!==false;var l=e.addButtonText||r.getText("EDITOR_FIELD_OBJECT_TABLE_BUTTON_ADD_TOOLTIP");if(n&&e.values){n=e.values.allowAdd===true}var u=[new s,new d(a+"_control_table_add_btn",{icon:"sap-icon://add",visible:n,tooltip:l,press:t.addNewObject.bind(t)}),new d(a+"_control_table_edit_btn",{icon:"{= ${/_hasNotEditableItemSelected} ===  true ? 'sap-icon://display' : 'sap-icon://edit' }",tooltip:{path:"/_hasNotEditableItemSelected",formatter:function(e){return e===true?r.getText("EDITOR_FIELD_OBJECT_TABLE_BUTTON_DISPLAY_TOOLTIP"):r.getText("EDITOR_FIELD_OBJECT_TABLE_BUTTON_EDIT_TOOLTIP")}},enabled:"{= !!${/_hasTableSelected}}",visible:t.getAllowPopover(),press:t.onEditOrViewDetail.bind(t)}),new d(a+"_control_table_delete_btn",{icon:"sap-icon://delete",tooltip:r.getText("EDITOR_FIELD_OBJECT_DELETE"),enabled:"{= !!${/_canDelete}}",press:t.onDelete.bind(t)}),new d(a+"_control_table_filter_btn",{icon:"sap-icon://clear-filter",visible:o,enabled:"{= !!${/_hasFilter}}",tooltip:r.getText("EDITOR_FIELD_OBJECT_TABLE_BUTTON_CLEAR_ALL_FILTERS_TOOLTIP"),press:t.clearAllFilters.bind(t)}),new d(a+"_control_table_multiselect_all_btn",{icon:"sap-icon://multiselect-all",visible:false,enabled:"{= !${/_hasTableAllSelected}}",tooltip:r.getText("EDITOR_FIELD_OBJECT_TABLE_BUTTON_SELECT_ALL_SELETIONS_TOOLTIP"),press:t.selectAllTableSelections.bind(t)}),new d(a+"_control_table_multiselect_none_btn",{icon:"sap-icon://multiselect-none",visible:false,enabled:"{= !!${/_hasTableSelected}}",tooltip:r.getText("EDITOR_FIELD_OBJECT_TABLE_BUTTON_CLEAR_ALL_SELETIONS_TOOLTIP"),press:t.clearAllTableSelections.bind(t)})];if(e.type==="object[]"){u=u.concat([new d(a+"_control_table_navigationup_btn",{icon:"sap-icon://navigation-up-arrow",enabled:"{= !!${/_hasOnlyOneRowSelected}}",tooltip:r.getText("EDITOR_FIELD_OBJECT_TABLE_BUTTON_MOVE_UP_TOOLTIP"),press:t.moveRowUp.bind(t)}),new d(a+"_control_table_navigationdown_btn",{icon:"sap-icon://navigation-down-arrow",enabled:"{= !!${/_hasOnlyOneRowSelected}}",tooltip:r.getText("EDITOR_FIELD_OBJECT_TABLE_BUTTON_MOVE_DOWN_TOOLTIP"),press:t.moveRowDown.bind(t)})])}return new i({content:u})};F.prototype.onUnSelectAll=function(e){var t=this;var a=t.getAggregation("_field");var r=a.getBindingContext().getPath();var o=a.getModel();var n=o.getProperty(r);n.forEach(function(e){e._dt=e._dt||{};e._dt._selected=false});o.setProperty("/_hasSelected",false);o.checkUpdate(true);t.setValue(undefined)};F.prototype.onEditOrViewDetail=function(e){var t=this;var a=t.getAggregation("_field");var r=a.getSelectedIndices()[0];var o=a.getBinding("rows").getContexts();var n=o[r].getObject();var l=a.getFirstVisibleRow();if(r<l){a.setFirstVisibleRow(r);l=r}else if(r>=l+5){a.setFirstVisibleRow(r-5+1);l=r-5+1}var i=a.getRows()[r-l];var s=i.getCells()[0];t.openObjectDetailsPopover(n,s,!n._dt||n._dt._editable!==false?"update":"view")};F.prototype.onFilter=function(e){var t=this;var a=t.getAggregation("_field");a.detachEvent("rowsUpdated",t.updateTable,t);a.attachEventOnce("rowsUpdated",t.updateTable,t)};F.prototype.updateTable=function(e){var t=this;t.updateSelectionColumn();t.updateToolbar();t.fireTableUpdated()};F.prototype.updateSelectionColumn=function(){var e=this;var t=e.getAggregation("_field");var a=t.getBinding("rows").getContexts();var r=false;for(var o=0;o<a.length;o++){var n=a[o].getObject();if(n._dt&&n._dt._selected){r=true;break}}t.getModel().setProperty("/_hasSelected",r)};F.prototype.updateToolbar=function(){var e=this;var t=e.getAggregation("_field");var a=t.getColumns();var r=false;for(var o=0;o<a.length;o++){if(a[o].getFiltered()){r=true;break}}t.getModel().setProperty("/_hasFilter",r)};F.prototype.columnFactory=function(e,a){var r=a.getPath();var o=r.substring(a.getPath().lastIndexOf("/")+1);var n=a.getProperty("$Type");var l=a.getProperty("$MaxLength");var i="7rem";l=l?parseInt(l):10;l=l<7?7:l;if(l>50){i="15rem"}else if(l>9){i="10rem"}return new j(e,{visible:true,filterProperty:n&&n.indexOf("String")>=0?o:null,width:i,label:new p({text:o}),hAlign:n&&n.indexOf("Decimal")>=0?"End":"Begin",template:new t({text:{path:o},wrapping:false})})};F.prototype.onTableSelectionChange=function(e){var t=this;var a=t.getAggregation("_field");var r=a.getModel();var o=a.getSelectedIndices();var n=a.getBinding("rows").getContexts();if(o.length>0){r.setProperty("/_hasTableSelected",true);if(o.length===1){r.setProperty("/_hasOnlyOneRowSelected",true)}else{r.setProperty("/_hasOnlyOneRowSelected",false)}var l=n[o[0]].getObject();if(l._dt&&l._dt._editable===false){r.setProperty("/_hasNotEditableItemSelected",true)}else{r.setProperty("/_hasNotEditableItemSelected",false)}}else{r.setProperty("/_hasTableSelected",false);r.setProperty("/_hasNotEditableItemSelected",false);r.setProperty("/_hasOnlyOneRowSelected",false);r.setProperty("/_canDelete",false);return}if(o.length===a.getBinding("rows").getContexts().length){r.setProperty("/_hasTableAllSelected",true)}else{r.setProperty("/_hasTableAllSelected",false)}var i=[];o.forEach(function(e){var t=n[e].getObject();if(t._dt&&t._dt._editable!==false){var a=n[e].getPath();i.push(a)}});if(i.length===0){r.setProperty("/_canDelete",false)}else{r.setProperty("/_canDelete",true)}};F.prototype.selectAllTableSelections=function(e){var t=this;var a=t.getAggregation("_field");a.selectAll();a.getModel().setProperty("/_hasTableAllSelected",true)};F.prototype.clearAllTableSelections=function(e){var t=this;var a=t.getAggregation("_field");var r=a.getModel();a.clearSelection();r.setProperty("/_hasTableSelected",false);r.setProperty("/_hasNotEditableItemSelected",false);r.setProperty("/_hasOnlyOneRowSelected",false);r.setProperty("/_canDelete",false);r.setProperty("/_hasTableAllSelected",false)};F.prototype.moveRowUp=function(e){this.moveSelectedRow("Up")};F.prototype.moveRowDown=function(e){this.moveSelectedRow("Down")};F.prototype.moveSelectedRow=function(e){var t=this;var a=t.getAggregation("_field");var r=a.getModel();var o=a.getSelectedIndices()[0];var n=a.getContextByIndex(o);var l=o+(e==="Up"?-1:1);var i=a.getContextByIndex(l);if(!i){return}var s=i.getProperty("_dt/_position");var d=n.getProperty("_dt/_position");r.setProperty("_dt/_position",s,n);r.setProperty("_dt/_position",d,i);r.refresh(true);a.setSelectedIndex(l);t.refreshValue();t.updateTable()};F.prototype.onSelectionChange=function(e){var t=this;var a=e.getSource();var r=e.getParameter("selected");var o=t.getAggregation("_field");var n=o.getBindingContext().getPath();var l=o.getModel();if(r){var i=l.getProperty(n);i.forEach(function(e){e._dt=e._dt||{};e._dt._selected=false});var s=a.getBindingContext().getObject();s._dt._selected=true;var d=y(s);l.setProperty("/_hasSelected",true);t.setValue(d)}else{l.setProperty("/_hasSelected",false);t.setValue(undefined)}};F.prototype.addNewObject=function(e){var t=this;var a=e.getSource();t._newObjectTemplate._dt._uuid=I.generateUuidV4();if(t.getAllowPopover()){t.openObjectDetailsPopover(t._newObjectTemplate,a,"add")}else{t.onAddDirectly(t._newObjectTemplate)}};F.prototype.mergeValueWithRequestResult=function(e){var t=this;var a=t.getConfiguration();var r=t.getAggregation("_field");var o=r.getModel();var n=r.getBinding("rows").getPath();if(a.value&&typeof a.value==="object"&&!g(a.value,{})){var l=y(a.value,500);if(Array.isArray(e)&&e.length>0){if(l._dt&&l._dt._editable===false){var i=l._dt._uuid||I.generateUuidV4();delete l._dt._uuid;e.forEach(function(e){if(g(e,l)){e._dt._selected=true;e._dt._uuid=i}else{e._dt._uuid=I.generateUuidV4()}})}else{e.forEach(function(e){e._dt._uuid=I.generateUuidV4()});l._dt=l._dt||{};l._dt._selected=true;l._dt._uuid=l._dt._uuid||I.generateUuidV4();e.unshift(l)}}else{l._dt=l._dt||{};l._dt._selected=true;l._dt._uuid=l._dt._uuid||I.generateUuidV4();e=[l]}o.setProperty("/_hasSelected",true);o.setProperty(n,e)}else{if(Array.isArray(e)&&e.length>0){e.forEach(function(e){e._dt._uuid=I.generateUuidV4()})}else{o.setProperty(n,{})}o.setProperty("/_hasSelected",false)}o.checkUpdate();t.updateTable()};F.prototype.onChangeOfTextArea=function(e){var t=this;var a=t.getResourceBundle();var r=e.getSource();var o=r.getValue();if(!o||o===""){t.saveValue(undefined,r)}else{try{var n=JSON.parse(o);if(n instanceof Array){r.setValueState("Error");r.setValueStateText(a.getText("EDITOR_VAL_NOT_A_SINGLE_JSONOBJECT"));return}t.saveValue(n,r)}catch(e){r.setValueState("Error");r.setValueStateText(a.getText("EDITOR_VAL_NOT_A_JSONOBJECT"))}}};F.prototype.onChangeOfTextAreaInPopover=function(e){var t=this;var a=t.getResourceBundle();var r=e.getSource();var o=r.getValue();if(!o||o===""){t.saveValue(undefined,r,true)}else{try{var n=JSON.parse(o);if(n instanceof Array){r.setValueState("Error");r.setValueStateText(a.getText("EDITOR_VAL_NOT_A_SINGLE_JSONOBJECT"));return}t.saveValue(n,r,true)}catch(e){r.setValueState("Error");r.setValueStateText(a.getText("EDITOR_VAL_NOT_A_JSONOBJECT"))}}};F.prototype.createFormContents=function(e,t,r,o){var n=this;var l=n.getConfiguration();var i=n.createPropertyContents(e,t,r,o);i.push(new p({visible:false}).addStyleClass("sapFormLabel"));var s=r?n.getParameterId()+"_control_objectdetails_popover_form_textarea":n.getParameterId()+"_control_form_textarea";i.push(new a(s,{value:{path:t,formatter:function(e){if(!e||e===""){return undefined}if(g(e,{})&&!r&&!n._getCurrentProperty("value")){return undefined}e=JSON.stringify(e,null,"\t");if(typeof e==="object"&&!e.length){e=e.replace(/\"\$\$([a-zA-Z]*)\$\$\"/g,function(e){return e.substring(3,e.length-3)})}return e}},editable:l.editable===false?false:"{= ${"+t+"_dt/_editable} !== false}",width:"100%",placeholder:"{config/placeholder}",visible:"{= ${/editMode} === 'Json'}",change:r===true?this.onChangeOfTextAreaInPopover.bind(n):this.onChangeOfTextArea.bind(n),rows:r===true?11:7}));return i};F.prototype.createPropertyContents=function(e,t,o,n){var l=this;var i=l.getParameterId();var s=o?i+"_control_objectdetails_popover_form_property_":i+"_control_form_property_";var d=l.getConfiguration();var _=[];if(!t){t="currentSettings>value/"}var c={};if(d.values&&d.values.metadata){var v=l.getModel("meta");var b="/"+d.values.metadata.namespace+"."+d.values.metadata.entityTypeName;var h=v.getProperty(b);for(var O in h){var P=h[O];var E=P["$Type"];if(P["$kind"]==="Property"&&E){if(E.indexOf("Int")>=0){c[O]={type:"int"}}else if(E.indexOf("Boolean")>=0){c[O]={type:"boolean"}}else if(E.indexOf("Decimal")>=0){c[O]={type:"number"}}else{c[O]={type:"string"}}}}}if(g(c,{})){c=d.properties}for(var I in c){var S=c[I];var x=S.label||I;if(x.match(U)){var V=x.substring(2,x.length-2);x="{i18n>"+V+"}"}var A=s+I+"_label";var R=s+I+"_control";var M=new p(A,{text:x,visible:"{= ${/editMode} === 'Properties'}",required:S.required||false}).addStyleClass("propertyLabel");_.push(M);var j;S.values=S.values||S.cell&&S.cell.values;if(S.type==="string"&&S.values){S.type="ComboBox"}var N=y(S,500);delete N.type;delete N.label;delete N.translatable;delete N.defaultValue;delete N.formatter;delete N.column;delete N.cell;delete N.values;var F;if(S.type){S.type=S.type.toLowerCase()}switch(S.type){case"boolean":if(S.cell&&S.cell.type==="Switch"){F={state:"{"+t+I+"}",visible:"{= ${/editMode} === 'Properties'}",enabled:d.editable===false?false:"{= ${"+t+"_dt/_editable} !== false}",change:e};if(S.cell.customTextOn){F.customTextOn=S.cell.customTextOn}if(S.cell.customTextOff){F.customTextOff=S.cell.customTextOff}F=m(F,N);j=new f(R,F)}else{F={selected:"{"+t+I+"}",visible:"{= ${/editMode} === 'Properties'}",enabled:d.editable===false?false:"{= ${"+t+"_dt/_editable} !== false}",select:e};F=m(F,N);j=new T(R,F)}break;case"int":case"integer":F={value:{path:t+I,type:new L(S.formatter)},visible:"{= ${/editMode} === 'Properties'}",editable:d.editable===false?false:"{= ${"+t+"_dt/_editable} !== false}",type:"Number",change:e};F=m(F,N);j=new r(R,F);break;case"number":F={value:{path:t+I,type:new C(S.formatter)},visible:"{= ${/editMode} === 'Properties'}",editable:d.editable===false?false:"{= ${"+t+"_dt/_editable} !== false}",type:"Number",change:e};F=m(F,N);j=new r(R,F);break;case"combobox":var k=this.addModelPrefix(S.values.item,"settings");F={width:"100%",selectedKey:"{"+t+I+"}",visible:"{= ${/editMode} === 'Properties'}",editable:d.editable===false?false:"{= ${"+t+"_dt/_editable} !== false}",items:{path:"settings>"+S.values.data.path,template:new w(k),templateShareable:false},change:e};F=m(F,N);j=new D(R,F);var J=new u(S.values.data.json);j.setModel(J,"settings");break;case"object":F={value:{path:t+I,formatter:function(e){if(!e||e===""){return undefined}e=JSON.stringify(e,null,"\t");if(typeof e==="object"&&!e.length){e=e.replace(/\"\$\$([a-zA-Z]*)\$\$\"/g,function(e){return e.substring(3,e.length-3)})}return e}},visible:"{= ${/editMode} === 'Properties'}",editable:d.editable===false?false:"{= ${"+t+"_dt/_editable} !== false}",change:function(t){var a=t.getSource();var r=t.getParameter("value");var o=a.getModel();if(!r||r===""){o.setProperty(a.getBindingPath("value"),undefined);o.checkUpdate(true);a.setValueState("None");a.setValueStateText("");e(t)}else{try{var n=JSON.parse(r);o.setProperty(a.getBindingPath("value"),n);o.checkUpdate(true);a.setValueState("None");a.setValueStateText("");e(t)}catch(e){var i=l.getResourceBundle();a.setValueState("Error");a.setValueStateText(i.getText("EDITOR_VAL_NOT_A_JSONOBJECT"))}}},rows:3};F=m(F,N);j=new a(R,F);break;case"icon":var $=new u({uuidPath:t+"_dt/_uuid",property:I});F={value:"{"+t+I+"}",allowNone:!S.required&&S.allowNone!==false,allowFile:S.allowFile!==false,visible:"{= ${/editMode} === 'Properties'}",editable:d.editable===false?false:"{= ${"+t+"_dt/_editable} !== false}",change:e};j=new B(R,F);j.setModel($,"settings");break;default:var H=new u({translatable:S.translatable||false,uuidPath:t+"_dt/_uuid",property:I});F={value:"{"+t+I+"}",visible:"{= ${/editMode} === 'Properties'}",editable:d.editable===false?false:"{= ${"+t+"_dt/_editable} !== false}",change:function(t){var a=t.getSource();var r=t.getParameter("value");if(r&&r.match(U)){var o=r.substring(2,r.length-2);r="{i18n>"+o+"}";a.setValue(r);a.fireChange()}else if(e){e(t)}}};F=m(F,N);if(n){F.valueHelpIconSrc="sap-icon://translate";F.valueHelpRequest=n.bind(l,I);if(S.translatable){F.showValueHelp=true}else{F.showValueHelp={path:t+I,formatter:function(e){var t=this.getModel("settings").getData();var a=this.getModel().getProperty(t.uuidPath);var r="translatable";if(l.getTranslationKey(e)){if(!this.getShowValueHelp()&&l.getObjectPropertyConfigValueInDesigntime(a,t.property,r)===false){l.setObjectPropertyConfigValueInDesigntime(a,t.property,r,true)}return true}if(this.getShowValueHelp()){l.deleteTranslationValueInTexts(undefined,a,t.property);l.setObjectPropertyConfigValueInDesigntime(a,t.property,r,false);l._oUpdatedTranslations={}}return false}}}}j=new r(R,F);j.setModel(H,"settings")}_.push(j)}return _};F.prototype.saveValue=function(e,t,a){var r=this;var o;if(!a){r.setValue(e);o=r.getAggregation("_field").getModel();if(o){e=y(e,500);o.setProperty("/value",e||{})}t.setValueState("None");t.setValueStateText("");if(r.getConfiguration()._propertiesParsedFromValue){r.refreshSimpleForm()}}else{o=t.getModel();o.setProperty("/value",e);t.setValueState("None");t.setValueStateText("")}};F.prototype.refreshSimpleForm=function(){var e=this;var t=e.getConfiguration();var a=e.getAggregation("_field");var r=a.removeAllContent();for(var o=0;o<r.length-2;o++){r[o].destroy()}r=r.slice(-2);delete t.properties;e.parseValueProperties();var n=function(){var t=a.getModel();t.checkUpdate(true);var r=t.getProperty("/value");r=y(r,500);e.setValue(r)};var l=e.createPropertyContents(n,"/value/");l=l.concat(r);l.forEach(function(e){a.addContent(e)})};F.prototype.getOriginTranslatedValues=function(e){var t=[];var a=this._oEditorResourceBundles.getResourceBundles();for(var r in a){var o=a[r];var n="";var l="";if(e&&o){var i=o.resourceBundle&&o.resourceBundle.getText(e);n=i;l=i}else{n="";l=""}var s={key:r,description:o.language,value:n,originValue:l,editable:true};t.push(s)}return t};F.prototype.buildPropertyTranslationValues=function(e){var t=[];var a=this._oEditorResourceBundles.getResourceBundles();for(var r in a){t.push({key:r,description:a[r].language,value:e,originValue:e,editable:true})}return t};F.prototype.openObjectDetailsPopover=function(e,t,a){var r=this;var p=r.getParameterId();var _=r.getResourceBundle();var c=y(e,500);var v;var f="Right";if(a==="add"){f=this.getPopoverPlacement(t)}if(!r._oObjectDetailsPopover){var T=new d(p+"_control_objectdetails_popover_add_btn",{text:_.getText("EDITOR_FIELD_OBJECT_DETAILS_POPOVER_BUTTON_ADD"),visible:a==="add",enabled:{path:"/value",formatter:function(e){if(typeof e!=="object"||g(e,{})){return false}else{var t=y(e);delete t._dt;if(g(t,{})){return false}}return true}},press:r.onAdd.bind(r)});var b=new d(p+"_control_objectdetails_popover_update_btn",{text:_.getText("EDITOR_FIELD_OBJECT_DETAILS_POPOVER_BUTTON_UPDATE"),visible:a==="update",enabled:{path:"/value",formatter:function(e){if(!e||e===""||g(e,{})){return false}return true}},press:r.onUpdate.bind(r)});var h=new d(p+"_control_objectdetails_popover_cancel_btn",{text:_.getText("EDITOR_FIELD_OBJECT_DETAILS_POPOVER_BUTTON_CANCEL"),visible:a!=="view",press:function(){if(a==="add"){var e=r._oObjectDetailsPopover.getModel().getProperty("/value");r.deleteTranslationValueInTexts(undefined,e._dt._uuid)}r._oObjectDetailsPopover.close()}});var O=new d(p+"_control_objectdetails_popover_close_btn",{text:_.getText("EDITOR_FIELD_OBJECT_DETAILS_POPOVER_BUTTON_CLOSE"),visible:a==="view",press:function(){r._oObjectDetailsPopover.close()}});var m=new d(p+"_control_objectdetails_popover_editmode_btn",{icon:{path:"/editMode",formatter:function(e){if(e==="Properties"){return"sap-icon://syntax"}else{return"sap-icon://form"}}},tooltip:{path:"/editMode",formatter:function(e){if(e==="Properties"){return _.getText("EDITOR_FIELD_OBJECT_FORM_EDITMODE_JSON")}else{return _.getText("EDITOR_FIELD_OBJECT_FORM_EDITMODE_PROPERTIES")}}},press:function(e){var t=e.getSource();var a=t.getModel();var r=a.getProperty("/editMode");if(r==="Properties"){a.setProperty("/editMode","Json")}else{a.setProperty("/editMode","Properties")}}});var E;r._oNavContainer=new o;r._oObjectDetailsPage=new n({title:_.getText("EDITOR_FIELD_OBJECT_DETAILS_POPOVER_TITLE"),headerContent:m,footer:new i({content:[new s,T,b,h,O]})});var I=function(e){r._oNavContainer.back();r._oObjectDetailsPage.focus()};var S=r.buildTranslationsList(p+"_control_objectdetails_popover_translation_page_value_list");var D=r.buildTranslationsFooter(S,false);r._oTranslationListPage=new n({title:_.getText("EDITOR_FIELD_OBJECT_TRANSLATION_LIST_TITLE",["{languages>/property}"]),showNavButton:true,navButtonPress:I,content:S,footer:D});var w=function(e){var t=r._oObjectDetailsPopover.getModel();t.checkUpdate(true);var a=t.getProperty("/value");if(a&&a!==""&&typeof a==="object"&&!g(a,{})){T.setEnabled(true)}else{T.setEnabled(false)}};var L=function(){};if(e._dt&&e._dt._editable===false){E=r.createFormContents(L,"/value/",true,r.navToTranslationListPage)}else{E=r.createFormContents(w,"/value/",true,r.navToTranslationListPage)}var C=new P({layout:"ResponsiveGridLayout",labelSpanXL:4,labelSpanL:4,labelSpanM:4,labelSpanS:12,emptySpanXL:1,emptySpanL:1,emptySpanM:1,emptySpanS:0,columnsXL:1,columnsL:1,columnsM:1,content:E});r._oObjectDetailsPage.addContent(C);r._oNavContainer.addPage(r._oObjectDetailsPage);r._oNavContainer.addPage(r._oTranslationListPage);r._oObjectDetailsPopover=new l(p+"_control_objectdetails_popover",{placement:f,showHeader:false,contentWidth:"300px",contentHeight:"345px",modal:true,content:r._oNavContainer}).addStyleClass("sapUiIntegrationEditorItemObjectFieldDetailsPopover");v=new u({value:c,editMode:"Properties"});r._oObjectDetailsPopover.setModel(v);r._oObjectDetailsPopover.setModel(r.getModel("i18n"),"i18n");r._oObjectDetailsPopover._oAddButton=T;r._oObjectDetailsPopover._oUpdateButton=b;r._oObjectDetailsPopover._oCancelButton=h;r._oObjectDetailsPopover._oCloseButton=O;r._oObjectDetailsPopover._openBy=t}else{v=r._oObjectDetailsPopover.getModel();v.setProperty("/value",c);v.checkUpdate(true);if(a==="add"){r._oObjectDetailsPopover._oAddButton.setVisible(true);r._oObjectDetailsPopover._oUpdateButton.setVisible(false);r._oObjectDetailsPopover._oCancelButton.setVisible(true);r._oObjectDetailsPopover._oCloseButton.setVisible(false)}else if(a==="update"){r._oObjectDetailsPopover._oAddButton.setVisible(false);r._oObjectDetailsPopover._oUpdateButton.setVisible(true);r._oObjectDetailsPopover._oCancelButton.setVisible(true);r._oObjectDetailsPopover._oCloseButton.setVisible(false)}else{r._oObjectDetailsPopover._oAddButton.setVisible(false);r._oObjectDetailsPopover._oUpdateButton.setVisible(false);r._oObjectDetailsPopover._oCancelButton.setVisible(false);r._oObjectDetailsPopover._oCloseButton.setVisible(true)}r._oObjectDetailsPopover._openBy=t;r._oObjectDetailsPopover.setPlacement(f);r._oNavContainer.back()}r._oObjectDetailsPopover.openBy(t)};F.prototype.buildTranslationsData=function(e,t,a,r){var o=this;var n=o.getResourceBundle();o._oOriginTranslatedValues=o._oOriginTranslatedValues||{};o._oUpdatedTranslations=o._oUpdatedTranslations||{};var l=a+"_"+r;var i=e;if(t==="key"){if(!o._oOriginTranslatedValues[e]){o._oOriginTranslatedValues[e]=o.getOriginTranslatedValues(e)}}else if(t==="property"){i=l;o._oOriginTranslatedValues[i]=o.buildPropertyTranslationValues(e)}var s=[];o._oOriginTranslatedValues[i].forEach(function(e){var t=y(e,500);t.updated=false;var l=o.getTranslationValueInTexts(t.key,a,r);if(l){t.value=l;if(Array.isArray(o._oUpdatedTranslations[i])){if(o._oUpdatedTranslations[i].includes(t.key)){t.value=o.getTranslationValueInTexts(t.key,a,r);t.updated=true}else{t.originValue=t.value}}}if(t.key===I._language){t.description+=" ("+n.getText("EDITOR_FIELD_TRANSLATION_LIST_POPOVER_CURRENTLANGUAGE")+")";s.unshift(t)}else{s.push(t)}});var d={isUpdated:false,key:e,translationKey:i,translationType:t,uuid:a,property:r,translatedLanguages:s};return d};F.prototype.getTranslationKey=function(e){var t;if(e&&e.match(U)){t=e.substring(2,e.length-2)}else if(e&&e.startsWith("{i18n>")&&e.endsWith("}")){t=e.substring(6,e.length-1)}return t};F.prototype.buildTranslationsFooter=function(e,t){var a=this;var r=a.getParameterId();var o=a.getResourceBundle();var n=t?r+"_control_translation_popover":r+"_control_objectdetails_popover_translation_page";var l=new d(n+"_save_btn",{type:"Emphasized",text:o.getText("EDITOR_FIELD_TRANSLATION_LIST_POPOVER_BUTTON_SAVE"),enabled:"{languages>/isUpdated}",press:function(){var r=e.getModel("languages");var o=r.getData();var n=[];var l=o.key;var i=o.translationKey;var s=o.translationType;var d=o.uuid;var u=o.property;o.translatedLanguages.forEach(function(e){if(e.value!==e.originValue){if(e.updated){a.setTranslationValueInTexts(e.key,d,u,e.value);n.push(e.key)}}else if(e.updated){a.deleteTranslationValueInTexts(e.key,d,u)}});var p=false;if(n.length>0){a._oUpdatedTranslations=a._oUpdatedTranslations||{};a._oUpdatedTranslations[i]=n;if(n.includes(I._language)){p=true}}else if(a._oUpdatedTranslations){delete a._oUpdatedTranslations[i]}o=a.buildTranslationsData(l,s,d,u);r.setData(o);r.checkUpdate(true);if(a.getModel()){a.getModel().checkUpdate(true)}if(p&&a._oValueBinding){a._oValueBinding.fireEvent("change")}if(t){a._oTranslationPopover.close()}}});var u=new d(n+"_reset_btn",{text:o.getText("EDITOR_FIELD_OBJECT_DETAILS_POPOVER_BUTTON_RESET"),enabled:"{languages>/isUpdated}",press:function(t){var a=e.getModel("languages");var r=a.getData();r.translatedLanguages.forEach(function(e){e.value=e.originValue;e.updated=false});r.isUpdated=false;a.setData(r);a.checkUpdate(true)}});var p=new d(n+"_cancel_btn",{text:o.getText("EDITOR_FIELD_TRANSLATION_LIST_POPOVER_BUTTON_CANCEL"),visible:t,press:function(){a._oTranslationPopover.close()}});return new i({content:[new s,l,u,p]})};F.prototype.openTranslationListPopup=function(e,t){var a=this;if(!a._oEditorResourceBundles.isReady()){a._oEditorResourceBundles.attachEventOnce("ready",function(){a.openTranslationListPopup(e,t)});return}var r=t.getSource();var o=a.getResourceBundle();var n=r.getModel().getProperty("/value");if(!n._dt){n._dt={_uuid:I.generateUuidV4()}}else if(!n._dt._uuid){n._dt._uuid=I.generateUuidV4()}var i=r.getValue();var s=a.getTranslationKey(i);var d="property";if(s&&s!==""){d="key"}else{s=i}var u=a.buildTranslationsData(s,d,n._dt._uuid,e);var p;var _=this.getPopoverPlacement(r._oValueHelpIcon);if(!a._oTranslationPopover){var c=a.getParameterId();var g=a.buildTranslationsList(c+"_control_translation_popover_value_list");var v=a.buildTranslationsFooter(g,true);a._oTranslationPopover=new l(c+"_control_translation_popover",{placement:_,contentWidth:"300px",contentHeight:"345px",title:o.getText("EDITOR_FIELD_OBJECT_TRANSLATION_LIST_TITLE",["{languages>/property}"]),content:g,afterOpen:function(){a.fireTranslationPopoverOpened()},footer:v}).addStyleClass("sapUiIntegrationFieldTranslation");p=a.buildTranslationsModel(u);a._oTranslationPopover.setModel(p,"languages")}else{a._oTranslationPopover.setPlacement(_);p=a._oTranslationPopover.getModel("languages");p.setData(u);p.checkUpdate(true)}a._oTranslationPopover.openBy(r._oValueHelpIcon)};F.prototype.navToTranslationListPage=function(e,t){var a=this;if(!a._oEditorResourceBundles.isReady()){a._oEditorResourceBundles.attachEventOnce("ready",function(){a.navToTranslationListPage(t)});return}var r=a._oObjectDetailsPopover.getModel().getProperty("/value");var o=r[e];var n=a.getTranslationKey(o);var l="property";if(n&&n!==""){l="key"}else{n=o}var i=a.buildTranslationsData(n,l,r._dt._uuid,e);var s=a._oTranslationListPage.getModel("languages");if(!s){s=a.buildTranslationsModel(i);a._oTranslationListPage.setModel(s,"languages")}else{s.setData(i)}a._oNavContainer.to(a._oTranslationListPage);a._oTranslationListPage.focus()};F.prototype.onAdd=function(e){var t=this;var a=t.getAggregation("_field");var r=a.getModel();var o=t._oObjectDetailsPopover.getModel().getProperty("/value");var n=a.getBinding("rows").getPath();var l=r.getProperty(n);l.forEach(function(e){if(e._dt._selected){e._dt._selected=false}});l.push(o);r.setProperty("/_hasSelected",true);r.setProperty("/_hasTableAllSelected",false);r.setProperty("/_hasTableSelected",false);r.setProperty("/_hasNotEditableItemSelected",false);r.setProperty("/_hasOnlyOneRowSelected",false);r.checkUpdate();t.refreshValue();t.updateTable();t._oObjectDetailsPopover.close()};F.prototype.onAddDirectly=function(e){var t=this;var a=y(e,500);var r=t.getAggregation("_field");var o=r.getModel();var n=r.getBinding("rows").getPath();var l=o.getProperty(n);var i=1;l.unshift(a);l.forEach(function(e){e._dt=e._dt||{};e._dt._selected=false;e._dt._position=i;i++});o.checkUpdate();t.refreshValue();t.updateTable()};F.prototype.onUpdate=function(e){var t=this;var a=t.getAggregation("_field");var r=t._oObjectDetailsPopover.getModel().getProperty("/value");var o=a.getModel();var n=t._oObjectDetailsPopover._openBy.getParent();var l=n.getIndex();var i=a.getBinding("rows").getContexts();var s=i[l].getPath();o.setProperty(s,y(r,500));o.checkUpdate();if(r._dt&&r._dt._selected){t.refreshValue()}t.updateTable();t._oObjectDetailsPopover.close()};F.prototype.onDelete=function(e){var t=this;var a=t.getAggregation("_field");var r=t.getResourceBundle();var o=a.getSelectedIndices();var n=[];var l=a.getBinding("rows").getContexts();o.forEach(function(e){var t=l[e].getObject();if(t._dt&&t._dt._editable!==false){var a=l[e].getPath();var r=a.substring(a.lastIndexOf("/")+1);n.push(r)}});if(n.length===0){b.error(r.getText("EDITOR_FIELD_OBJECT_DELETE_ERROR_MSG"));return}if(t.getAllowPopover()){b.confirm(r.getText("EDITOR_FIELD_OBJECT_DELETE_CONFIRM_MSG"),{title:r.getText("EDITOR_FIELD_OBJECT_DELETE_CONFIRM_TITLE"),onClose:function(e){if(e===b.Action.OK){var o=a.getBindingContext().getPath();var l=a.getModel();var i=l.getProperty(o);var s=[];for(var d=0;d<i.length;d++){if(n.includes(d+"")){t.deleteTranslationValueInTexts(undefined,i[d]._dt._uuid)}else{s.push(i[d])}}l.setProperty(o,s);l.checkUpdate(true);t.refreshValue();t.updateTable()}else{h.show(r.getText("EDITOR_FIELD_OBJECT_DELETE_CONFIRM_CANCLE"))}}})}else{var i=a.getBinding("rows").getPath();var s=a.getModel();var d=s.getProperty(i);var u=[];for(var p=0;p<d.length;p++){if(n.includes(p+"")){t.deleteTranslationValueInTexts(undefined,d[p]._dt._uuid)}else{u.push(d[p])}}s.setProperty(i,u);s.checkUpdate(true);t.refreshValue();t.updateTable()}};F.prototype.refreshValue=function(){var e=this;var t=e.getAggregation("_field");var a=t.getModel();var r=t.getBinding("rows").getPath();var o=a.getProperty(r);var n;for(var l=0;l<o.length;l++){var i=o[l];if(i._dt._selected){n=y(i);break}}e.setValue(n)};F.prototype.resetControl=function(){var e=this;var t=e.getAggregation("_field");var a=e._getCurrentProperty("value");var r=t.getModel();if(t instanceof P){var o=r.getProperty("/value");if(o&&o._dt&&o._dt._uuid){e.deleteTranslationValueInTexts(undefined,o._dt._uuid)}a=a||{};r.setProperty("/value",a);r.checkUpdate(true)}else if(t instanceof M){var n=e.getConfiguration();var l;if(n.values){var i=t.getBinding("rows").getPath();l=r.getProperty(i);l.forEach(function(e){delete e._dt._selected})}e.mergeValueWithRequestResult(l)}};F.prototype.clearAllFilters=function(e){var t=this;var a=t.getAggregation("_field");var r=a.getColumns();for(var o=0;o<r.length;o++){var n=r[o];if(o<r.length-1){n._applySelection=false}a.filter(n,undefined)}};F.prototype.setValue=function(e){var t=this;t.cleanDT(e);t._setCurrentProperty("value",e)};F.prototype.cleanDT=function(e){if(e&&e._dt&&e._dt._selected){delete e._dt._selected}if(e&&e._dt&&g(e._dt,{})){delete e._dt}};F.prototype.getTranslationValueInTexts=function(e,t,a){var r=this;var o=r.getConfiguration();var n="/texts/"+e;var l=this._settingsModel.getProperty(n)||{};var i=l[o.manifestpath];var s;if(i&&i[t]){s=i[t][a]}return s};F.prototype.setObjectPropertyConfigValueInDesigntime=function(e,t,a,r){var o=this;var n=o.getConfiguration();var l="/:designtime";var i=this._settingsModel.getData();if(!i){return}var s;if(!i.hasOwnProperty(":designtime")){s={}}else{s=y(i[":designtime"],500)}if(!s.hasOwnProperty(n.manifestpath)){s[n.manifestpath]={}}if(!s[n.manifestpath].hasOwnProperty(e)){s[n.manifestpath][e]={}}if(!s[n.manifestpath][e].hasOwnProperty(t)){s[n.manifestpath][e][t]={}}s[n.manifestpath][e][t][a]=r;this._settingsModel.setProperty(l,s)};F.prototype.getObjectPropertyConfigValueInDesigntime=function(e,t,a){var r=this;var o;var n=r.getConfiguration();var l=this._settingsModel.getData();if(l&&l[":designtime"]&&l[":designtime"][n.manifestpath]&&l[":designtime"][n.manifestpath][e]&&l[":designtime"][n.manifestpath][e][t]&&l[":designtime"][n.manifestpath][e][t].hasOwnProperty(a)){o=l[":designtime"][n.manifestpath][e][t][a]}return o};F.prototype.setTranslationValueInTexts=function(e,t,a,r){var o=this;var n=o.getConfiguration();var l="/texts";var i=this._settingsModel.getData();if(!i){return}var s;if(!i.hasOwnProperty("texts")){s={}}else{s=y(i.texts,500)}if(!s.hasOwnProperty(e)){s[e]={}}if(!s[e].hasOwnProperty(n.manifestpath)){s[e][n.manifestpath]={}}if(!s[e][n.manifestpath].hasOwnProperty(t)){s[e][n.manifestpath][t]={}}s[e][n.manifestpath][t][a]=r;this._settingsModel.setProperty(l,s)};F.prototype.deleteTranslationValueInTexts=function(e,t,a){var r=this;var o=r._settingsModel.getData();if(!o||!o.texts||!t){return}var n=r.getConfiguration();var l="/texts";var i=y(o.texts,500);if(e){if(i[e]&&i[e][n.manifestpath]&&i[e][n.manifestpath][t]){if(a){if(i[e][n.manifestpath][t].hasOwnProperty(a)){delete i[e][n.manifestpath][t][a];if(g(i[e][n.manifestpath][t],{})){delete i[e][n.manifestpath][t]}this._settingsModel.setProperty(l,i)}}else{delete i[e][n.manifestpath][t];if(g(i[e][n.manifestpath],{})){delete i[e][n.manifestpath];if(g(i[e],{})){delete i[e]}}this._settingsModel.setProperty(l,i)}}}else{for(var s in i){r.deleteTranslationValueInTexts(s,t,a)}}};return F});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/fields/ObjectListField", ["sap/ui/integration/editor/fields/ObjectField","sap/ui/model/json/JSONModel","sap/m/CheckBox","sap/base/util/deepEqual","sap/base/util/deepClone","sap/ui/integration/util/Utils","sap/m/table/columnmenu/Menu","sap/ui/core/Lib"],function(e,t,r,a,i,o,n,l){"use strict";let s;var u=e.extend("sap.ui.integration.editor.fields.ObjectListField",{metadata:{library:"sap.ui.integration"},renderer:e.getMetadata().getRenderer()});u.loadDependencies=function(){return l.load("sap.ui.table").then(()=>new Promise((e,t)=>{sap.ui.require(["sap/ui/table/Table"],t=>{s=t;e()},t)}))};u.prototype.initVisualization=function(e){var t=this;t._positionCount=1;t._newObjectTemplate={_dt:{_selected:true,_uuid:""}};var r=e.visualization;if(!r){if(e.value&&!e.properties&&(!e.values||e.values&&!e.values.metadata)){t.parseValueProperties()}if(e.values||e.properties){r=t.createTableVisualization(e)}else{r=t.createTextAreaVisualization(e)}e.withLabel=true}this._visualization=r;this.attachAfterInit(this._afterInit)};u.prototype._afterInit=function(){var e=this;var r=e.getAggregation("_field");if(r instanceof s){r.addStyleClass("sapUiIntegrationEditorItemObjectListFieldTable");e._oMenu=new n;var a=r.getColumns();for(var l=0;l<a.length;l++){if(a[l].getFilterProperty()||a[l].getSortProperty()){a[l].setHeaderMenu(e._oMenu.getId())}}var u=e.getConfiguration();if(!u.values){var d=[];if(Array.isArray(u.value)){d=i(u.value,500);d.forEach(function(t){t._dt=t._dt||{};t._dt._selected=true;t._dt._uuid=t._dt._uuid||o.generateUuidV4();t._dt._position=e._positionCount;e._positionCount++})}e.setModel(new t({value:d,_allSelected:true}));e.bindObject({path:"/value"})}}};u.prototype.parseValueProperties=function(){var e=this;var t=e.getConfiguration();if(Array.isArray(t.value)&&t.value.length>0&&!t.properties){var r={};t.value.forEach(function(e){for(var t in e){if(!r[t]&&t!=="_dt"){var a=typeof e[t];var i=a==="string"?{}:{type:a};r[t]=i}}});if(!a(r,{})){t.properties=r;t._propertiesParsedFromValue=true}}};u.prototype.buildSelectionColumnLabels=function(){var e=this;var t=e.getConfiguration();var a=e.getResourceBundle();return new r(e.getParameterId()+"_control_table_column_selection_label_all_checkbox",{selected:"{/_allSelected}",visible:typeof t.values!=="undefined",tooltip:{path:"/_allSelected",formatter:function(e){if(!e){return a.getText("EDITOR_FIELD_OBJECT_LIST_TABLE_COLUMN_SELECTION_TOOLTIP_ADDALL")}else{return a.getText("EDITOR_FIELD_OBJECT_LIST_TABLE_COLUMN_SELECTION_TOOLTIP_REMOVEALL")}}},select:e.onSelectionColumnClick.bind(e)})};u.prototype.onSelectionColumnClick=function(e){var t=this;var r=e.getParameter("selected");var a=t.getAggregation("_field");var o=a.getBinding("rows").getContexts();o.forEach(function(e){var t=e.getObject();t._dt=t._dt||{};t._dt._selected=r});var n=a.getModel();var l=a.getBinding("rows").getPath();var s=n.getProperty(l);var u;s.forEach(function(e){if(e._dt&&e._dt._selected){var t=i(e,500);u=u||[];u.push(t)}});n.checkUpdate(true);t.setValue(u)};u.prototype.updateSelectionColumn=function(){var e=this;var t=e.getAggregation("_field");var r=t.getBinding("rows").getContexts();var a=true;if(r.length===0){a=false}else{for(var i=0;i<r.length;i++){var o=r[i].getObject();if(!o._dt||o._dt._selected!==true){a=false;break}}}t.getModel().setProperty("/_allSelected",a)};u.prototype.onAdd=function(e){var t=this;var r=t.getAggregation("_field");var a=t._oObjectDetailsPopover.getModel().getProperty("/value");a._dt._position=t._positionCount;var i=r.getBinding("rows").getPath();var o=r.getModel();var n=o.getProperty(i);n.push(a);o.setProperty("/_hasTableAllSelected",false);o.setProperty("/_hasTableSelected",false);o.setProperty("/_hasNotEditableItemSelected",false);o.checkUpdate();t.refreshValue();t._oObjectDetailsPopover.close();t._positionCount++;t.updateTable()};u.prototype.refreshValue=function(){var e=this;var t=e.getAggregation("_field");var r=t.getModel();var a=t.getBinding("rows").getPath();var o=r.getProperty(a);var n=[];o.forEach(function(e){if(e._dt._selected){var t=i(e);n.push(t)}});e.setValue(n)};u.prototype.onSelectionChange=function(e){var t=this;var r=e.getParameter("selected");var a=this._getCurrentProperty("value");var i=t.getAggregation("_field");var o=i.getModel();if(r||a.length>1){t.refreshValue();t.updateSelectionColumn()}else{o.setProperty("/_allSelected",false);t.setValue(undefined)}};u.prototype.mergeValueWithRequestResult=function(e){var t=this;var r=t.getConfiguration();var n=t.getAggregation("_field");var l=n.getModel();var s=n.getBinding("rows").getPath();if(Array.isArray(r.value)&&r.value.length>0){var u=i(r.value,500);if(Array.isArray(e)&&e.length>0){t._positionCount=r.value.length+1;var d=[];u.forEach(function(e){var t;if(!e._dt){t=o.generateUuidV4()}else{t=e._dt._uuid||o.generateUuidV4();delete e._dt._uuid;delete e._dt._position}d.push(t)});var _=[];for(var p=0;p<e.length;p++){var g=e[p];var c=false;for(var f=0;f<u.length;f++){if(a(g,u[f])){c=true;break}}if(!c){g._dt._uuid=o.generateUuidV4();g._dt._position=t._positionCount;t._positionCount++;_.push(g)}}for(var v=0;v<u.length;v++){var h=u[v];h._dt=h._dt||{};h._dt._selected=true;h._dt._uuid=d[v];h._dt._position=v+1}if(_.length>0){l.setProperty("/_allSelected",false);u=u.concat(_)}else{l.setProperty("/_allSelected",true)}}else{u.forEach(function(e){e._dt=e._dt||{};e._dt._selected=true;e._dt._uuid=e._dt._uuid||o.generateUuidV4();e._dt._position=t._positionCount;t._positionCount++});l.setProperty("/_allSelected",true)}l.setProperty(s,u)}else{if(Array.isArray(e)&&e.length>0){e.forEach(function(e){e._dt._uuid=o.generateUuidV4();e._dt._position=t._positionCount;t._positionCount++})}else{l.setProperty(s,[])}l.setProperty("/_allSelected",false)}l.checkUpdate();t.updateTable()};u.prototype.onChangeOfTextArea=function(e){var t=this;var r=t.getResourceBundle();var a=e.getSource();var i=a.getValue();if(!i||i===""){t.saveValue(undefined,a)}else{try{var o=JSON.parse(i);if(!(o instanceof Array)){a.setValueState("Error");a.setValueStateText(r.getText("EDITOR_VAL_NOT_AN_ARRAY_OF_JSONOBJECTS"));return}t.saveValue(o,a)}catch(e){a.setValueState("Error");a.setValueStateText(r.getText("EDITOR_VAL_NOT_A_JSONOBJECT"))}}};u.prototype.saveValue=function(e,t,r){var a=this;var i;if(!r){a.setValue(e)}else{i=t.getModel();i.setProperty("/value",e)}t.setValueState("None");t.setValueStateText("")};u.prototype.cleanDT=function(e){if(e){e.forEach(function(e){if(e&&e._dt&&e._dt._selected){delete e._dt._selected}if(e&&e._dt&&a(e._dt,{})){delete e._dt}})}};return u});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/fields/StringField", ["sap/ui/integration/editor/fields/BaseField","sap/m/Input","sap/m/Text","sap/m/Title","sap/m/Select","sap/m/ComboBox","sap/m/Popover","sap/m/Button","sap/m/OverflowToolbar","sap/m/ToolbarSpacer","sap/ui/core/ListItem","sap/m/VBox","sap/base/util/each","sap/base/util/restricted/_debounce","sap/base/util/deepClone","sap/base/util/deepEqual","sap/ui/integration/util/Utils","sap/ui/integration/editor/Constants"],function(e,t,a,n,s,i,r,l,o,u,g,d,p,c,v,h,f,_){"use strict";var T=/parameters\.([^\}\}]+)/g;var y=["TODAY_ISO","NOW_ISO","LOCALE"];var b=e.extend("sap.ui.integration.editor.fields.StringField",{metadata:{library:"sap.ui.integration",events:{translationPopoverOpened:{}}},renderer:e.getMetadata().getRenderer()});b.prototype.initVisualization=function(e){var n=e.visualization;var r;if(!n){var l=e.value?e.value.match(T):undefined;var o,u,d;if(l&&l.length>0){l=l.filter(function(e){var t=e.substring(11);return!y.includes(t)})}if(l&&l.length>0){o=l.map(function(e){if(this.isOrigLangField){return"items>"+e.substring(11)+"/_language/value"}return"items>"+e.substring(11)+"/value"}.bind(this));o.unshift("currentSettings>value");u={parts:o,formatter:function(e){var t=Array.prototype.slice.call(arguments,1);for(var a=0;a<t.length;a++){if(t[a]){e=e.replaceAll("{{"+l[a]+"}}",t[a])}}return e}};d=function(e){var t=e.getSource().getValue();var a=this.getBindingContext("currentSettings").sPath;this._settingsModel.setProperty(a+"/value",t);var n=this._settingsModel.getBindings();var s=a.substring(a.lastIndexOf("/")+1);p(n,function(e,t){if(t.sPath==="/form/items/"+s+"/value"){t.checkUpdate(true)}})}.bind(this)}if(this.getMode()===_.EDITOR_MODE.TRANSLATION){if(e.editable){n={type:t,settings:{value:{path:"currentSettings>value"},tooltip:{path:"currentSettings>value"},editable:e.editable,visible:e.visible,maxLength:e.maxLength,placeholder:e.placeholder}}}else{n={type:a,settings:{text:{path:"currentSettings>value"},tooltip:{path:"currentSettings>value"},visible:e.visible,wrapping:false}}}}else if(e.enum){r=new g({key:{path:"currentSettings>"},text:{path:"currentSettings>"}});n={type:s,settings:{selectedKey:{path:"currentSettings>value"},forceSelection:false,editable:e.editable,visible:e.visible,showSecondaryValues:false,width:"100%",items:{path:"currentSettings>enum",template:r}}}}else if(e.values){r=this.formatListItem(e.values.item);if(!e.values.item.key){e.values.item.key=e.values.item.text}n={type:i,settings:{busy:{path:"currentSettings>_loading"},selectedKey:{path:"currentSettings>value"},editable:e.editable,visible:e.visible,showSecondaryValues:true,width:"100%",items:{path:"",template:r}}};if(this.isFilterBackend()){n.settings.selectedKey={parts:["currentSettings>value","currentSettings>suggestValue"],formatter:function(e,t){if((!e||e==="")&&t){return t.replaceAll("''","'")}else{return e}}}}}else if(this.getMode()!==_.EDITOR_MODE.TRANSLATION&&e.translatable){n={type:t,settings:{value:{path:"currentSettings>value"},tooltip:{path:"currentSettings>value"},editable:e.editable,visible:e.visible,maxLength:e.maxLength,placeholder:e.placeholder,valueHelpIconSrc:"sap-icon://translate",showValueHelp:true,valueHelpRequest:this.openTranslationListPopup.bind(this),change:function(e){var t=e.getSource();var a=t.getValue();var n=f._language;t.getParent().setTranslationValueInTexts(n,a)}}};if(o){delete n.settings.tooltip;n.settings.value=u;n.settings.change=d;n.settings.showValueHelp=false;delete n.settings.valueHelpRequest}}else{n={type:t,settings:{value:{path:"currentSettings>value"},tooltip:{path:"currentSettings>value"},editable:e.editable,visible:e.visible,maxLength:e.maxLength,placeholder:e.placeholder}};if(o){delete n.settings.tooltip;n.settings.value=u;n.settings.change=d}}}else if(n.type==="TextArea"){n.type="sap/m/TextArea"}else if(n.type==="Select"&&e.values){r=this.formatListItem(e.values.item);var c=Object.assign({selectedKey:{path:"currentSettings>value"},forceSelection:false,editable:e.editable,visible:e.visible,showSecondaryValues:false,width:"100%",items:{path:"",template:r}},n.settings||{});n={type:s,settings:c}}this._visualization=n;this.attachAfterInit(this._afterInit)};b.prototype._afterInit=function(){var e=this.getAggregation("_field");if(e instanceof i){if(this.isFilterBackend()){this.onInput=c(this.onInput,500);e.oninput=this.onInput.bind(this);e.attachSelectionChange(this.onSelectionChange.bind(this))}}};b.prototype.onSelectionChange=function(e){var t=e.getParameter("selectedItem")||{};var a=t.getKey();var n=this.getBindingContext("currentSettings").sPath;this._settingsModel.setProperty(n+"/value",a)};b.prototype.onInput=function(e){var t=e.target.value;var a=this.getBindingContext("currentSettings").sPath;this._settingsModel.setProperty(a+"/suggestValue",t.replaceAll("'","''"));this._settingsModel.setProperty(a+"/_loading",true);this._settingsModel.setProperty(a+"/value","");var n=this._settingsModel.getBindings();var s=a.substring(a.lastIndexOf("/")+1);p(n,function(e,t){if(t.sPath==="/form/items/"+s+"/value"){t.checkUpdate(true)}});var i=e.srcControl;i.open();i.setValue(t);i.setSelection(null)};b.prototype.getOriginTranslatedValues=function(e){var t=[];var a=this._oEditorResourceBundles.getResourceBundles();var n;if(e._translatedDefaultPlaceholder&&e._translatedDefaultPlaceholder.startsWith("{i18n>")&&e._translatedDefaultPlaceholder.endsWith("}")){n=e._translatedDefaultPlaceholder.substring(6,e._translatedDefaultPlaceholder.length-1)}else if(e._translatedDefaultPlaceholder&&e._translatedDefaultPlaceholder.startsWith("{{")&&e._translatedDefaultPlaceholder.endsWith("}}")){n=e._translatedDefaultPlaceholder.substring(2,e._translatedDefaultPlaceholder.length-2)}for(var s in a){var i=a[s];var r="";var l="";if(n&&i){var o=i.resourceBundle&&i.resourceBundle.getText(n,[],true);if(o!==undefined){r=o;l=o}else{r=e._translatedValue||"";l=e._translatedValue||""}}else{r=e._translatedDefaultPlaceholder||"";l=e._translatedDefaultPlaceholder||""}var u={key:s,description:i.language,value:r,originValue:l,editable:true};t.push(u)}return t};b.prototype.getTranslationValueInTexts=function(e,t){var a="/texts/"+e;var n=this._settingsModel.getProperty(a)||{};return n[t]};b.prototype.setTranslationValueInTexts=function(e,t){var a=this.getConfiguration().manifestpath;var n="/texts";var s=this._settingsModel.getData();if(!s){return}if(!s.hasOwnProperty("texts")){var i={};i[e]={};i[e][a]=t;this._settingsModel.setProperty(n,i)}else{n="/texts/"+e;var r;if(!s.texts.hasOwnProperty(e)){r={}}else{r=s.texts[e]}r[a]=t;this._settingsModel.setProperty(n,r)}};b.prototype.deleteTranslationValueInTexts=function(e){var t=this.getConfiguration().manifestpath;var a=this._settingsModel.getData();if(a&&a.texts&&a.texts[e]){delete a.texts[e][t]}if(h(a.texts[e],{})){delete a.texts[e]}if(h(a.texts,{})){delete a.texts}this._settingsModel.setData(a)};b.prototype.openTranslationListPopup=function(e){var s=this;if(!s._oEditorResourceBundles.isReady()){s._oEditorResourceBundles.attachEventOnce("ready",function(){s.openTranslationListPopup(e)});return}var i=e.getSource();var g=s.getParameterId();var p=s.getResourceBundle();var c=s.buildTranslationsData(i);var v;var h=s.getPopoverPlacement(i._oValueHelpIcon);if(!s._oTranslationPopover){var f=s.buildTranslationsList(g+"_translation_popover_value_list");s._oTranslationPopover=new r(g+"_translation_popover",{placement:h,contentWidth:"300px",contentHeight:"345px",customHeader:new d({items:[new n({text:p.getText("EDITOR_FIELD_TRANSLATION_LIST_POPOVER_TITLE")}).addStyleClass("sapMPopoverTitle"),new n({text:p.getText("EDITOR_FIELD_TRANSLATION_LIST_POPOVER_CURRENTLANGUAGE")}).addStyleClass("sapMHeaderTitle"),new d({items:[new a(g+"_translation_popover_currentlanguage_description_label",{text:"{languages>/currentLanguage/description}"}),new t(g+"_translation_popover_currentlanguage_value_input",{value:"{languages>/currentLanguage/value}",editable:false})]}).addStyleClass("sapMCurrentLanguageVBox"),new n({text:p.getText("EDITOR_FIELD_TRANSLATION_LIST_POPOVER_OTHERLANGUAGES")}).addStyleClass("sapMHeaderTitle")]}),content:f,afterOpen:function(){s.fireTranslationPopoverOpened()},footer:new o({content:[new u,new l(g+"_translation_popover_save_btn",{type:"Emphasized",text:p.getText("EDITOR_FIELD_TRANSLATION_LIST_POPOVER_BUTTON_SAVE"),enabled:"{languages>/isUpdated}",press:function(){var e=s._oTranslationPopover.getModel("languages").getData();var t=[];e.translatedLanguages.forEach(function(e){if(e.value!==e.originValue){if(e.updated){s.setTranslationValueInTexts(e.key,e.value);t.push(e.key)}}else if(e.updated){s.deleteTranslationValueInTexts(e.key)}});if(t.length>0){s._aUpdatedLanguages=t}else{s._aUpdatedLanguages=undefined}s._oTranslationPopover.close()}}),new l(g+"_translation_popover_cancel_btn",{text:p.getText("EDITOR_FIELD_TRANSLATION_LIST_POPOVER_BUTTON_CANCEL"),press:function(){s._oTranslationPopover.close()}})]})}).addStyleClass("sapUiIntegrationFieldTranslation");v=s.buildTranslationsModel(c);s._oTranslationPopover.setModel(v,"languages")}else{s._oTranslationPopover.setPlacement(h);v=s._oTranslationPopover.getModel("languages");v.setData(c);v.checkUpdate(true)}s._oTranslationPopover.openBy(i._oValueHelpIcon)};b.prototype.buildTranslationsData=function(e){var t=this;var a=t.getConfiguration();if(!t._aOriginTranslatedValues){t._aOriginTranslatedValues=t.getOriginTranslatedValues(a)}var n=v(t._aOriginTranslatedValues,500);n.forEach(function(e){var n=t.getTranslationValueInTexts(e.key,a.manifestpath);if(n){e.value=n;if(Array.isArray(t._aUpdatedLanguages)&&!t._aUpdatedLanguages.includes(e.key)){e.originValue=e.value}}else if(a._beforeLayerChange){e.value=a._beforeLayerChange;if(Array.isArray(t._aUpdatedLanguages)&&!t._aUpdatedLanguages.includes(e.key)){e.originValue=e.value}}e.updated=false;if(e.key===f._language){e.editable=false}});var s={currentLanguage:{},isUpdated:false,translatedLanguages:[]};if(n){n.forEach(function(n){if(Array.isArray(t._aUpdatedLanguages)&&t._aUpdatedLanguages.includes(n.key)){n.value=t.getTranslationValueInTexts(n.key,a.manifestpath);n.updated=true}if(n.key===f._language){n.value=e.getValue();s.currentLanguage=n}else{s.translatedLanguages.push(n)}})}return s};return b});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/fields/StringListField", ["sap/ui/integration/editor/fields/BaseField","sap/m/Input","sap/m/MultiComboBox","sap/m/MultiInput","sap/base/util/restricted/_debounce","sap/base/util/restricted/_isEqual","sap/base/util/ObjectPath","sap/base/util/merge","sap/ui/core/SeparatorItem","sap/ui/model/Sorter","sap/m/Token","sap/m/Tokenizer","sap/base/util/deepClone","sap/ui/model/json/JSONModel","sap/ui/integration/util/BindingResolver"],function(e,t,r,a,i,n,s,o,u,l,g,v,c,h,p){"use strict";var d=e.extend("sap.ui.integration.editor.fields.StringListField",{metadata:{library:"sap.ui.integration"},renderer:e.getMetadata().getRenderer()});d.prototype.initVisualization=function(e){var i=this,n;var s=e.visualization;if(!s){if(e.values){n=this.formatListItem(e.values.item);s={type:r,settings:{selectedKeys:{path:"currentSettings>value"},busy:{path:"currentSettings>_loading"},editable:e.editable,visible:e.visible,showSecondaryValues:true,width:"100%",items:{path:"",template:n,sorter:[new l({path:"Selected",descending:false,group:true})],groupHeaderFactory:i.getGroupHeader}}};if(this.isFilterBackend()){s.settings.selectedKeys={parts:["currentSettings>value","currentSettings>suggestValue"],formatter:function(e,t){if(t){i.setSuggestValue()}return e}}}}else{s={type:t,settings:{value:{path:"currentSettings>value",formatter:function(e){e=e||[];return e.join(",")}},change:function(e){var t=e.getSource();t.getBinding("value").setRawValue(t.getValue().split(","))},editable:e.editable,visible:e.visible,placeholder:e.placeholder}}}}else if(e.values&&this.isFilterBackend()&&s.type==="MultiInput"){n=this.formatListItem(e.values.item);var u={busy:{path:"currentSettings>_loading"},placeholder:e.placeholder,editable:e.editable,visible:e.visible,showSuggestion:true,autocomplete:false,showValueHelp:false,filterSuggests:false,width:"100%",suggestionItems:{path:"",template:n,sorter:[new l({path:"Selected",descending:false,group:true})],groupHeaderFactory:i.getGroupHeader}};if(s.settings){u=o(u,s.settings)}s={type:a,settings:u}}this._visualization=s;this.attachAfterInit(this._afterInit)};d.prototype._afterInit=function(){var e=this.getAggregation("_field");var t=this.getModel();if(e instanceof r){if(this.isFilterBackend()){this.onInputForMultiComboBox=i(this.onInputForMultiComboBox,500);e.oninput=this.onInputForMultiComboBox;e.attachSelectionChange(this.onSelectionChangeForFilterBackend);e.attachSelectionFinish(this.onSelectionFinishForFilterBackend);t.attachPropertyChange(this.onPropertyChangeForFilterBackend,this)}else{e.attachSelectionChange(this.onSelectionChange);t.attachPropertyChange(this.onPropertyChange,this)}}else if(e instanceof a){this.initTokens();this.onInputForMultiInput=i(this.onInputForMultiInput,500);e.oninput=this.onInputForMultiInput;t.attachPropertyChange(this.onPropertyChangeForFilterBackend,this);t.attachPropertyChange(this.initTokens,this);e.attachTokenChange(this.onTokenChange)}};d.prototype.initTokens=function(){var e=this.getAggregation("_field");var t=this.getConfiguration();var r=[];if(Array.isArray(t.valueTokens)&&t.valueTokens.length>0){t.valueTokens.forEach(function(e){var t=new g(e);r.push(t)})}else if(Array.isArray(t.value)&&t.value.length>0&&Array.isArray(t.valueItems)&&t.valueItems.length>0){t.valueTokens=[];t.valueItems.forEach(function(e){var a=new h;a.setData(e);var i=p.resolveValue(t.values.item.key,a);if(t.value.includes(i)){var n=p.resolveValue(t.values.item.text,a);var s={key:i,text:n};var o=new g(s);r.push(o);t.valueTokens.push(s)}})}e.setTokens(r)};d.prototype.getKeyFromItem=function(e){var t=this.getConfiguration();var r=new h;r.setData(e);return p.resolveValue(t.values.item.key,r)};d.prototype.onPropertyChangeForFilterBackend=function(e){var t=this.getConfiguration();if(!t.valueItems){t.valueItems=[]}var r=t.values.data.path||"/";var a=this.getModel();var i=a.getData();if(r!=="/"){if(r.startsWith("/")){r=r.substring(1)}if(r.endsWith("/")){r=r.substring(0,r.length-1)}var n=r.split("/");var o=s.get(n,i);o=this.mergeSelectedItems(t,o);s.set(n,o,i)}else{i=this.mergeSelectedItems(t,i)}a.setData(i);this.setSuggestValue()};d.prototype.onPropertyChange=function(e){var t=this.getAggregation("_field");var r=t.getSelectedItems().map(function(e){return e.getKey()});var a=this.getBindingContext("currentSettings").sPath;var i=this.getModel("currentSettings");i.setProperty(a+"/value",r)};d.prototype.mergeSelectedItems=function(e,t){var r=this;var a=r.getResourceBundle();if(Array.isArray(t)){var i=e.valueItems.map(function(e){return this.getKeyFromItem(e)}.bind(this));var s=t.filter(function(e){var t=this.getKeyFromItem(e);return!i.includes(t)}.bind(this));var o=s.filter(function(e){return e.Selected===a.getText("EDITOR_ITEM_SELECTED")});e.valueItems=e.valueItems.concat(o);var u=s.filter(function(e){return e.Selected!==a.getText("EDITOR_ITEM_SELECTED")});t=e.valueItems.concat(u);var l=this.getAggregation("_field");if(l.isOpen&&l.isOpen()){i=e.valueItems.map(function(e){return this.getKeyFromItem(e)}.bind(this));var g=l.getSelectedKeys();if(!n(i,g)){l.setSelectedKeys(i)}}}else{t=e.valueItems}return t};d.prototype.setSuggestValue=function(){var e=this.getAggregation("_field");var t=this.getBindingContext("currentSettings").sPath;var r=this.getModel("currentSettings");var a=r.getProperty(t+"/suggestValue");if(a&&a!==""){e.setValue(a.replaceAll("''","'"))}};d.prototype.getSuggestValue=function(){var e=this.getBindingContext("currentSettings").sPath;var t=this.getModel("currentSettings");return t.getProperty(e+"/suggestValue")};d.prototype.getGroupHeader=function(e){return new u({text:e.key})};d.prototype.onSelectionChangeForFilterBackend=function(e){var t=e.getSource().getParent();var r=t.getConfiguration();var a=t.getResourceBundle();var i=e.getParameter("changedItem");var n=i.getKey();var o=e.getParameter("selected");var u=this.getModel().getData();var l=r.values.data.path||"/";var g,v;if(l!=="/"){if(l.startsWith("/")){l=l.substring(1)}if(l.endsWith("/")){l=l.substring(0,l.length-1)}g=l.split("/");v=s.get(g,u)}else{v=u}if(v){if(!r.valueItems){r.valueItems=[]}var h=[];v.forEach(function(e){var i=c(e,500);var s=t.getKeyFromItem(i);if(s===n){if(o){i.Selected=a.getText("EDITOR_ITEM_SELECTED");r.valueItems=r.valueItems.concat([i])}else{i.Selected=a.getText("EDITOR_ITEM_UNSELECTED");r.valueItems=r.valueItems.filter(function(e){var r=t.getKeyFromItem(e);return r!==n})}}h.push(i)});if(g!==undefined){s.set(g,h,u);this.getModel().checkUpdate(true)}else{this.getModel().setData(h)}}};d.prototype.onTokenChange=function(e){var t=this.getParent();var r=t.getConfiguration();var a=t.getResourceBundle();var i=t.getModel("currentSettings");var n=t.getBindingContext("currentSettings").sPath;var o=i.getProperty(n+"/value");var u=e.getParameter("token");if(u){var l=u.getKey();if(!r.valueTokens){r.valueTokens=[]}if(!o){o=[]}var g=e.getParameter("type");switch(g){case v.TokenChangeType.Removed:o=o.filter(function(e){return e!==l});r.value=o;r.valueTokens=r.valueTokens.filter(function(e){return e.key!==l});break;case v.TokenChangeType.Added:if(!o.includes(l)){o=o.concat([l]);r.value=o}var h=r.valueTokens.map(function(e){return e.key});if(!h.includes(l)){r.valueTokens=r.valueTokens.concat([{key:l,text:u.getText()}])}break;case v.TokenChangeType.RemovedAll:r.value=[];r.valueItems=[];r.valueTokens=[];break;default:break}var p=t.getModel().getData();var d;var f=r.values.data.path||"/";var m;if(f!=="/"){if(f.startsWith("/")){f=f.substring(1)}if(f.endsWith("/")){f=f.substring(0,f.length-1)}m=f.split("/");d=c(s.get(m,p),10)}else{d=c(p,10)}if(Array.isArray(d)){r.valueItems=[];d.forEach(function(e){var i=t.getKeyFromItem(e);if(r.value.includes(i)){e.Selected=a.getText("EDITOR_ITEM_SELECTED");r.valueItems.push(e)}else{e.Selected=a.getText("EDITOR_ITEM_UNSELECTED")}});if(f!=="/"){s.set(m,d,p)}else{p=d}t.getModel().setData(p);t.getModel().checkUpdate(true)}i.setProperty(n+"/value",r.value);i.setProperty(n+"/valueItems",r.valueItems);i.setProperty(n+"/valueTokens",r.valueTokens)}};d.prototype.onSelectionChange=function(e){var t=e.oSource.getParent();var r=t.getConfiguration();var a=t.getResourceBundle();var i=e.getParameter("changedItem");var n=i.getKey();var o=e.getParameter("selected");var u=this.getModel().getData();var l=r.values.data.path||"/";if(l!=="/"){if(l.startsWith("/")){l=l.substring(1)}if(l.endsWith("/")){l=l.substring(0,l.length-1)}var g=l.split("/");var v=s.get(g,u);if(Array.isArray(v)){for(var c in v){var h=t.getKeyFromItem(v[c]);if(h===n){if(o){v[c].Selected=a.getText("EDITOR_ITEM_SELECTED")}else{v[c].Selected=a.getText("EDITOR_ITEM_UNSELECTED")}}}s.set(g,v,u)}}else if(Array.isArray(u)){for(var c in u){var h=t.getKeyFromItem(u[c]);if(h===n){if(o){u[c].Selected=a.getText("EDITOR_ITEM_SELECTED")}else{u[c].Selected=a.getText("EDITOR_ITEM_UNSELECTED")}}}}this.getModel().setData(u);this.getModel().checkUpdate(true)};d.prototype.onSelectionFinishForFilterBackend=function(e){var t=this.getParent();var r=t.getConfiguration();var a=e.getParameter("selectedItems").map(function(e){return e.getKey()});var i=this.getModel().getData();var n=r.values.data.path||"/";if(n!=="/"){if(n.startsWith("/")){n=n.substring(1)}if(n.endsWith("/")){n=n.substring(0,n.length-1)}var o=n.split("/");i=s.get(o,i)}if(i){r.valueItems=i.filter(function(e){var r=t.getKeyFromItem(e);return a.includes(r)})}var u=this.getBindingContext("currentSettings").sPath;var l=this.getModel("currentSettings");l.setProperty(u+"/value",a);var g=t.getSuggestValue();if(g&&g!==""){l.setProperty(u+"/suggestValue","")}};d.prototype.onInputForMultiComboBox=function(e){var t=e.target.value;var r=this.getBindingContext("currentSettings").sPath;var a=this.getModel("currentSettings");a.setProperty(r+"/suggestValue",t.replaceAll("'","''"));a.setProperty(r+"/_loading",true);e.srcControl.open();e.srcControl._getSuggestionsPopover()._sTypedInValue=t};d.prototype.onInputForMultiInput=function(e){var t=e.srcControl;a.prototype.oninput.apply(t,arguments);var r=e.target.value;if(r===""){return}var i=this.getBindingContext("currentSettings").sPath;var n=this.getModel("currentSettings");var s=n.getProperty(i+"/suggestValue");if(s!==r.replaceAll("'","''")){n.setProperty(i+"/suggestValue",r.replaceAll("'","''"));n.setProperty(i+"/_loading",true)}};return d});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/fields/fragment/Controller", ["sap/ui/core/mvc/Controller","sap/ui/integration/util/Utils"],function(t,e){"use strict";var i=t.extend("sap.ui.integration.editor.fields.fragment.Controller",{});i.prototype.init=function(){};i.prototype.setField=function(t){this._oField=t};i.prototype.saveValue=function(t){var i=e._language;var n=this._oField.getConfiguration();if(n.type==="string"&&n.translatable){this._oField.setTranslationValueInTexts(i,t)}else{this._oField._settingsModel.setProperty(n.manifestpath,t)}};return i});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/fields/viz/ColorSelect", ["sap/ui/integration/editor/fields/viz/VizBase","sap/m/ColorPalettePopover","sap/m/Button","sap/ui/core/Core","sap/base/util/merge","sap/ui/core/theming/Parameters"],function(e,t,o,a,n,l){"use strict";var r=e.extend("sap.ui.integration.editor.fields.viz.ColorSelect",{metadata:{library:"sap.ui.integration",properties:{enumValue:{type:"string",defaultValue:""},colorValue:{type:"string",defaultValue:""},colorEnum:{type:"string",defaultValue:"sap.m.AvatarColor"},background:{type:"boolean",defaultValue:true},allowCustomColors:{type:"boolean",defaultValue:false}},aggregations:{_colorpalette:{type:"sap.m.ColorPalettePopover",multiple:false,visibility:"hidden"}}},renderer:{apiVersion:2}});var c={};function i(){var e=["sapUiAccent1","sapUiAccent2","sapUiAccent3","sapUiAccent4","sapUiAccent5","sapUiAccent6","sapUiAccent7","sapUiAccent8","sapUiAccent9","sapUiAccent10","sapUiTileIconColor","sapUiContentImagePlaceholderBackground"];var t=l.get({name:e,callback:function(e){}});if(t){c={"sap.m.AvatarColor":{Accent1:t["sapUiAccent1"],Accent2:t["sapUiAccent2"],Accent3:t["sapUiAccent3"],Accent4:t["sapUiAccent4"],Accent5:t["sapUiAccent5"],Accent6:t["sapUiAccent6"],Accent7:t["sapUiAccent7"],Accent8:t["sapUiAccent8"],Accent9:t["sapUiAccent9"],Accent10:t["sapUiAccent10"],TileIcon:t["sapUiTileIconColor"],Transparent:"transparent",Placeholder:t["sapUiContentImagePlaceholderBackground"]}}}}i();var s,p=new t("oColorPalettePopoverFull",{colorSelect:function(e){var t=e.getParameter("value"),o=c[s.getColorEnum()],a=Object.values(o).indexOf(t);s.setEnumValue(Object.keys(o)[a]);s.setColorValue(t);s._colorValue=t}});r.prototype.onInit=function(){this._oControl=new o({icon:"sap-icon://color-fill",press:function(){this._openPalette()}.bind(this)});this._colorValue="transparent"};r.prototype.onThemeChanged=function(){i()};r.prototype.applyStyle=function(e){e.class("sapUiIntegrationColorSelect");if(!this._colorValue||this._colorValue==="transparent"){e.class("noColorValueOrTransparentValue")}else{e.class("hasColorValue")}if(this._colorValue){e.style("--colorValue",this._colorValue)}};r.prototype._openPalette=function(){s=this;p.setShowDefaultColorButton(true);p.setShowMoreColorsButton(false);p.setDefaultColor("");var e=c[this.getColorEnum()];if(e){var t=[];for(var o in e){t.push(e[o])}p.setColors(t)}p.openBy(this._oControl)};r.prototype.setEnumValue=function(e){this.setProperty("enumValue",e);this._colorValue=c[this.getColorEnum()][e]};r.prototype.bindPropertyToControl=function(e,t){if(e==="editable"){var o=n({},t);this._oControl.bindProperty("enabled",o)}};return r});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/fields/viz/IconSelect", ["sap/ui/core/Element","sap/ui/core/Lib","sap/ui/integration/editor/fields/viz/VizBase","sap/m/Select","sap/ui/core/ListItem","sap/ui/model/json/JSONModel","sap/ui/core/IconPool","sap/ui/core/_IconRegistry","sap/base/util/merge","sap/base/util/deepClone","sap/base/util/deepEqual","sap/ui/integration/formatters/IconFormatter","sap/m/Popover","sap/m/Image","sap/m/OverflowToolbar","sap/m/ToolbarSpacer","sap/m/Text","sap/m/CheckBox","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/ui/integration/util/Utils"],function(e,t,o,i,n,s,l,a,r,c,p,d,u,h,f,g,_,I,y,S,C){"use strict";var m=t.getResourceBundleFor("sap.ui.integration",C._language),b,v,T=false;var P=o.extend("sap.ui.integration.editor.fields.viz.IconSelect",{metadata:{library:"sap.ui.integration",properties:{value:{type:"string",defaultValue:""},allowFile:{type:"boolean",defaultValue:true},allowNone:{type:"boolean",defaultValue:true},allowDefaultIcons:{type:"boolean",defaultValue:true}},events:{change:{}}},renderer:{apiVersion:2}});P.prototype._initDefaultIcons=function(){b=[];var e=l.getIconNames();e=e.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())});e.filter(function(e){var t=l.getIconInfo(e).text||("-"+e).replace(/-(.)/gi,function(e,t){return" "+t.toUpperCase()}).substring(1);b.push({icon:"sap-icon://"+e,key:"sap-icon://"+e,text:t,additionalText:"sap-icon://"+e,tooltip:t,enabled:true,type:"UI5"})});if(!T){return}var t=a.getFontRegistry();if(!t["SAP-icons-TNT"]){l.registerFont({fontFamily:"SAP-icons-TNT",collectionName:"SAP-icons-TNT",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts")})}if(!t["BusinessSuiteInAppSymbols"]){l.registerFont({fontFamily:"BusinessSuiteInAppSymbols",collectionName:"BusinessSuiteInAppSymbols",fontURI:sap.ui.require.toUrl("sap/ushell/themes/base/fonts/")})}v=Promise.all([l.fontLoaded("SAP-icons-TNT"),l.fontLoaded("BusinessSuiteInAppSymbols")]).then(function(){e=l.getIconNames("SAP-icons-TNT");e=e.filter(function(e){var t=e.substring(0,1).charCodeAt();return e.indexOf(" ")<0&&t>=97&&t<=122});e.sort();e.filter(function(e){var t=l.getIconInfo(e,"SAP-icons-TNT").text||("-"+e).replace(/-(.)/gi,function(e,t){return" "+t.toUpperCase()}).substring(1);b.push({icon:"sap-icon://SAP-icons-TNT/"+e,key:"sap-icon://SAP-icons-TNT/"+e,text:t,additionalText:"sap-icon://SAP-icons-TNT/"+e,tooltip:t,enabled:true,type:"SAP-icons-TNT"})});e=l.getIconNames("BusinessSuiteInAppSymbols");e.sort();e.filter(function(e){var t=l.getIconInfo(e,"BusinessSuiteInAppSymbols").text||("-"+e).replace(/-(.)/gi,function(e,t){return" "+t.toUpperCase()}).substring(1);b.push({icon:"sap-icon://BusinessSuiteInAppSymbols/"+e,key:"sap-icon://BusinessSuiteInAppSymbols/"+e,text:t,additionalText:"sap-icon://BusinessSuiteInAppSymbols/"+e,tooltip:t,enabled:true,type:"BusinessSuiteInAppSymbols"})})})};P.prototype._initIconModel=function(){var e=[{icon:"",text:m.getText("EDITOR_ICON_NONE"),tooltip:"",key:d.SRC_FOR_HIDDEN_ICON,enabled:true,type:"Action"},{icon:"sap-icon://upload",text:m.getText("EDITOR_ICON_CHOOSE"),tooltip:"",key:"file",enabled:true,type:"Action"},{icon:"sap-icon://download",text:m.getText("EDITOR_ICON_SELECTED"),tooltip:"",key:"selected",enabled:false,type:"Action"}];this._oIconModel=new s(e);this._oIconModel.setSizeLimit(e.length)};P.prototype._initConfigModel=function(){var e={icons:{layout:"Grid",types:{Action:true,UI5:true,"SAP-icons-TNT":true,BusinessSuiteInAppSymbols:true}}};this._oConfigModel=new s(e)};P.prototype.onInit=function(){if(m&&m.sLocale!==C._language){m=t.getResourceBundleFor("sap.ui.integration",C._language)}if(!this._oIconModel){this._initIconModel()}if(!b){this._initDefaultIcons()}if(v){v.then(function(){if(this.getAllowDefaultIcons()){var e=this._oIconModel.getData();e=e.concat(c(b,500));this._oIconModel.setData(e);this._oIconModel.setSizeLimit(e.length);this._oIconModel.checkUpdate(true);this._oControl&&this._oControl.setSelectedKey(this.getValue())}v=undefined}.bind(this))}else if(this.getAllowDefaultIcons()){var e=this._oIconModel.getData();e=e.concat(c(b,500));this._oIconModel.setData(e);this._oIconModel.setSizeLimit(e.length)}if(!this._oConfigModel){this._initConfigModel()}var o=new n({icon:"{iconlist>icon}",text:"{iconlist>text}",tooltip:"{iconlist>tooltip}",key:"{iconlist>key}",additionalText:"{iconlist>additionalText}",enabled:{parts:["config>/icons/types","iconlist>type","iconlist>enabled"],formatter:function(e,t,o){return o&&e[t]}}});this._oFileUpload=document.createElement("INPUT");this._oFileUpload.type="file";this._oFileUpload.accept=".png,.jpg,.jpeg,.svg";this._boundFileUploadChange=this._fileUploadChange.bind(this);this._oFileUpload.addEventListener("change",this._boundFileUploadChange);this._oControl=new i({width:"100%",items:{path:"iconlist>/",template:o},change:function(e){var t=e.getSource(),o=e.getSource().getSelectedKey();if(o==="file"){t._customImage=null;this._oFileUpload.click();this._boundFocusBack=this._focusBack.bind(this);t.getDomRef("hiddenSelect").addEventListener("focus",this._boundFocusBack)}else{this.setValue(o);this.fireChange(e)}}.bind(this)});this._oControl.setModel(this._oIconModel,"iconlist");this._oControl.setModel(this._oConfigModel,"config");this._oControl._fnOpen=this._oControl.open;if(this.getAllowDefaultIcons()){var s=this;this._oControl.open=function(){this._fnOpen&&this._fnOpen.apply(this,arguments);s._oPicker=this.getPicker();var e=false;if(!s._oPicker.getFooter()&&e){var t=new f({content:[new y({selectedKey:"{config>/icons/layout}",items:[new S({icon:"sap-icon://grid",tooltip:"Grid View",key:"Grid"}),new S({icon:"sap-icon://list",tooltip:"Details View",key:"Details"})],select:function(e){var t=e.getSource();var o=t.getSelectedKey();if(o==="Grid"){this._oPicker.addStyleClass("sapUiIntegrationIconSelectList");this._oControl.setShowSecondaryValues(false)}else if(o==="Details"){this._oPicker.removeStyleClass("sapUiIntegrationIconSelectList");this._oControl.setShowSecondaryValues(true)}}.bind(s)}),new g,new _({text:"Icon Types:"}),new I({selected:"{config>/icons/types/UI5}",text:"UI5",select:s.onIconTypeChanged.bind(s)}),new I({selected:"{config>/icons/types/SAP-icons-TNT}",text:"Fiori",select:s.onIconTypeChanged.bind(s)}),new I({selected:"{config>/icons/types/BusinessSuiteInAppSymbols}",text:"Business Suite",select:s.onIconTypeChanged.bind(s)})]});s._oPicker.setFooter(t)}if(!p(s._oConfigModel.getProperty("/icons/types"),{Action:true,UI5:false,"SAP-icons-TNT":false,BusinessSuiteInAppSymbols:false})){s._oPicker.addStyleClass("sapUiIntegrationIconSelectList");s._oPicker.setContentHeight("400px")}}}this._oControl.addDelegate({onAfterRendering:this.onAfterRenderingSelect.bind(this)});this._oControl.addDelegate({onsappageup:function(){if(this._oControl.isOpen()){var e=this._oControl.getSelectedIndex();this._oControl.setSelectedIndex(e-50)}}.bind(this),onsappagedown:function(){if(this._oControl.isOpen()){var e=this._oControl.getSelectedIndex();if(e<3){this._oControl.setSelectedIndex(29)}else{this._oControl.setSelectedIndex(e+50)}}}.bind(this),onsapup:function(){if(this._oControl.isOpen()){var e=this.getAllowFile();var t=this.getAllowNone();var o=this._oIconModel.getProperty("/2/enabled");var i=this._oControl.getSelectedIndex();if(i>11+2){this._oControl.setSelectedIndex(i-11)}else if(i>=3){if(t&&!e){this._oControl.setSelectedIndex(0)}else if(o){this._oControl.setSelectedIndex(2)}else{this._oControl.setSelectedIndex(3)}}}}.bind(this),onsapdown:function(){if(this._oControl.isOpen()){var e=this._oControl.getSelectedIndex();if(e>1){this._oControl.setSelectedIndex(e+11)}}}.bind(this),onsapleft:function(){if(this._oControl.isOpen()){this._oControl.onsapup.apply(this._oControl,arguments)}}.bind(this),onsapright:function(){if(this._oControl.isOpen()){this._oControl.onsapdown.apply(this._oControl,arguments)}}.bind(this)},true)};P.prototype.applyStyle=function(e){e.class("sapUiIntegrationIconSelect");if(this._oControl&&this._oControl.getWidth){e.style("width",this._oControl.getWidth())}};P.prototype.onIconTypeChanged=function(e){this._oConfigModel.checkUpdate(true);var t=this._oConfigModel.getProperty("/icons/types");if(p(t,{Action:true,UI5:false,"SAP-icons-TNT":false,BusinessSuiteInAppSymbols:false})){this._oPicker.setContentHeight("")}else{this._oPicker.setContentHeight("400px")}var o=this.getValue();if(o&&o.indexOf("data:image/")===0){this._oControl._customImage=o;this._oIconModel.setProperty("/2/enabled",true);this._oControl.setSelectedKey("selected")}else{this._oControl.setSelectedKey(o)}};P.prototype._fileUploadChange=function(){var e=new window.FileReader;e.onload=function(){this.setValue(e.result);this._oControl.invalidate()}.bind(this);if(this._oFileUpload.files.length===1){e.readAsDataURL(this._oFileUpload.files[0])}};P.prototype._focusBack=function(){this._oControl.getDomRef("hiddenSelect").removeEventListener("focus",this._boundFocusBack);setTimeout(function(){this.setValue(this.getValue())}.bind(this),150)};P.prototype.bindPropertyToControl=function(e,t){if(e==="editable"){var o=r({},t);this._oControl.bindProperty("editable",o)}};P.prototype.setValue=function(e){this.setProperty("value",e,true);if(e&&e.indexOf("data:image/")===0){this._oControl._customImage=e;this._oIconModel.setProperty("/2/enabled",true);this._oControl.setSelectedKey("selected")}else{this._oControl._customImage=null;this._oIconModel.setProperty("/2/enabled",false);this._oControl.setSelectedKey(e)}this._oControl.invalidate();return this};P.prototype.setAllowFile=function(e){this.setProperty("allowFile",e,true);e=this.getAllowFile();this._oIconModel.setProperty("/1/enabled",e);return this};P.prototype.setAllowNone=function(e){this.setProperty("allowNone",e,true);e=this.getAllowNone();this._oIconModel.setProperty("/0/enabled",e);return this};P.prototype.onAfterRenderingSelect=function(){var t=this._oControl.getDomRef("labelIcon");if(t){var o=this._oControl._customImage;var i=e.getElementById(t.id);if(o){t.style.backgroundImage="url('"+o+"')";t.classList.add("sapMSelectListItemIconCustom");t.children[0].title=m.getText("EDITOR_IMAGE_CUSTOMICON_TOOLTIP");i.onclick=function(e){e.stopImmediatePropagation();if(!i._oImagePopover){i._oImagePopover=new u(i.getId()+"-imagePopover",{placement:"Right",showHeader:false}).addStyleClass("sapUiIntegrationImageSelect")}i._oImagePopover.destroyContent();i._oImagePopover.addContent(new h(i.getId()+"-imagePopover-image",{src:o}).addStyleClass("image"));i._oImagePopover.openBy(i)}}else{t.style.backgroundImage="unset";t.classList.remove("sapMSelectListItemIconCustom");i.onclick=undefined}}};P.prototype.setAllowDefaultIcons=function(e){if(typeof e==="boolean"&&this.getAllowDefaultIcons()!==e){var t=this._oIconModel.getData();if(e){t=t.concat(c(b,500));var o=this._oConfigModel.getProperty("/icons/types");this._oControl.open=function(){this._fnOpen&&this._fnOpen.apply(this,arguments);if(!p(o,{Action:true,UI5:false,"SAP-icons-TNT":false,BusinessSuiteInAppSymbols:false})){this._oPicker.addStyleClass("sapUiIntegrationIconSelectList");this._oPicker.setContentHeight("400px")}}}else{t=t.slice(0,3);this._oControl.open=function(){this._fnOpen&&this._fnOpen.apply(this,arguments);this.getPicker().removeStyleClass("sapUiIntegrationIconSelectList")}}this._oIconModel.setData(t);this._oIconModel.setSizeLimit(t.length)}};return P});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/fields/viz/ImageSelect", ["sap/ui/integration/editor/fields/viz/IconSelect"],function(e){"use strict";var i=e.extend("sap.ui.integration.editor.fields.viz.ImageSelect",{metadata:{library:"sap.ui.integration",properties:{allowDefaultIcons:{type:"boolean",defaultValue:false}}},renderer:{apiVersion:2}});return i});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/fields/viz/ShapeSelect", ["sap/ui/integration/editor/fields/viz/VizBase","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/base/util/merge"],function(e,t,i,n){"use strict";var o=e.extend("sap.ui.integration.editor.fields.viz.ShapeSelect",{metadata:{library:"sap.ui.integration",properties:{value:{type:"string",defaultValue:"Circle"}}},renderer:{apiVersion:2}});o.prototype.onInit=function(){this._oControl=new t({items:[new i({icon:"sap-icon://circle-task",key:"Circle"}),new i({icon:"sap-icon://border",key:"Square"})]})};o.prototype.applyStyle=function(e){e.class("sapUiIntegrationShapeSelect")};o.prototype.bindPropertyToControl=function(e,t){if(e==="editable"){var i=n({},t);this._oControl.bindProperty("enabled",i)}if(e==="value"){var i=n({},t);this._oControl.bindProperty("selectedKey",i)}};return o});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/integration/editor/fields/viz/VizBase", ["sap/ui/core/Control","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/base/util/merge"],function(t,e,o,n){"use strict";var i=t.extend("sap.ui.integration.editor.fields.viz.VizBase",{metadata:{library:"sap.ui.integration",properties:{value:{type:"string",defaultValue:""},editable:{type:"boolean",defaultValue:true}},aggregations:{_control:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}}},renderer:{apiVersion:1,render:function(t,e){var o=e.getAggregation("_control");t.openStart("div",e);e.applyStyle(t);t.openEnd();t.renderControl(o);t.close("div")}}});i.prototype.init=function(){this.onInit();this.setAggregation("_control",this._oControl)};i.prototype.bindProperty=function(e,o){t.prototype.bindProperty.apply(this,arguments);this.bindPropertyToControl(e,o);return this};i.prototype.onInit=function(){};i.prototype.applyStyle=function(t){};i.prototype.bindPropertyToControl=function(t,e){};return i});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/Grid", ["sap/ui/core/Control","./library","sap/ui/Device","sap/ui/core/ResizeHandler","sap/ui/base/ManagedObjectObserver","./GridRenderer","sap/ui/thirdparty/jquery"],function(e,t,i,s,a,n,jQuery){"use strict";var o=e.extend("sap.ui.layout.Grid",{metadata:{library:"sap.ui.layout",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"},vSpacing:{type:"float",group:"Dimension",defaultValue:1},hSpacing:{type:"float",group:"Dimension",defaultValue:1},position:{type:"sap.ui.layout.GridPosition",group:"Dimension",defaultValue:"Left"},defaultSpan:{type:"sap.ui.layout.GridSpan",group:"Behavior",defaultValue:"XL3 L3 M6 S12"},defaultIndent:{type:"sap.ui.layout.GridIndent",group:"Behavior",defaultValue:"XL0 L0 M0 S0"},containerQuery:{type:"boolean",group:"Behavior",defaultValue:false}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},designtime:"sap/ui/layout/designtime/Grid.designtime"},renderer:n});(function(){o.prototype.init=function(){(()=>{var e=t.GridHelper.getLibrarySpecificClass();if(e){this.addStyleClass(e)}})();this._iBreakPointTablet=i.media._predefinedRangeSets[i.media.RANGESETS.SAP_STANDARD_EXTENDED].points[0];this._iBreakPointDesktop=i.media._predefinedRangeSets[i.media.RANGESETS.SAP_STANDARD_EXTENDED].points[1];this._iBreakPointLargeDesktop=i.media._predefinedRangeSets[i.media.RANGESETS.SAP_STANDARD_EXTENDED].points[2];this._indentXLChanged=false;this._spanXLChanged=false;this._oObserver=new a(o.prototype._observeChanges.bind(this));this._oObserver.observe(this,{aggregations:["content"]})};o.prototype.onAfterRendering=function(){if(this.getContainerQuery()){this._sContainerResizeListener=s.register(this,jQuery.proxy(this._onParentResize,this));this._onParentResize()}else{this._attachMediaContainerWidthChange(this._handleMediaChange,this,i.media.RANGESETS.SAP_STANDARD_EXTENDED)}};o.prototype.onBeforeRendering=function(){this._cleanup()};o.prototype.exit=function(){this._cleanup();if(this._oObserver){this._oObserver.disconnect();this._oObserver=null}};o.prototype._cleanup=function(){if(this._sContainerResizeListener){s.deregister(this._sContainerResizeListener);this._sContainerResizeListener=null}this._detachMediaContainerWidthChange(this._handleMediaChange,this,i.media.RANGESETS.SAP_STANDARD_EXTENDED)};o.prototype._observeVisibility=function(e){this._oObserver.observe(e,{properties:["visible"]})};o.prototype._unobserveVisibility=function(e){this._oObserver.unobserve(e,{properties:["visible"]})};o.prototype._observeChanges=function(e){var t=e.object,i=e.name,s=e.mutation,a=e.child;if(t===this){if(s==="insert"){this._observeVisibility(a)}else if(s==="remove"){this._unobserveVisibility(a)}}else if(i==="visible"){var n=this.getContent().indexOf(t);jQuery(this.$().children()[n]).toggleClass("sapUiRespGridSpanInvisible",!e.current)}};o.prototype._handleMediaChange=function(e){this._toggleClass(e.name)};o.prototype._setBreakPointTablet=function(e){this._iBreakPointTablet=e};o.prototype._setBreakPointDesktop=function(e){this._iBreakPointDesktop=e};o.prototype._setBreakPointLargeDesktop=function(e){this._iBreakPointLargeDesktop=e};o.prototype.setDefaultIndent=function(e){if(/XL/gi.test(e)){this._setIndentXLChanged(true)}return this.setProperty("defaultIndent",e)};o.prototype._setIndentXLChanged=function(e){this._indentXLChanged=e};o.prototype._getIndentXLChanged=function(){return this._indentXLChanged};o.prototype.setDefaultSpan=function(e){if(/XL/gi.test(e)){this._setSpanXLChanged(true)}return this.setProperty("defaultSpan",e)};o.prototype._setSpanXLChanged=function(e){this._spanXLChanged=e};o.prototype._getSpanXLChanged=function(){return this._spanXLChanged};o.prototype._onParentResize=function(){var e=this.getDomRef();if(!e){this._cleanup();return}if(!jQuery(e).is(":visible")){return}var t=e.clientWidth;if(t<=this._iBreakPointTablet){this._toggleClass("Phone")}else if(t>this._iBreakPointTablet&&t<=this._iBreakPointDesktop){this._toggleClass("Tablet")}else if(t>this._iBreakPointDesktop&&t<=this._iBreakPointLargeDesktop){this._toggleClass("Desktop")}else{this._toggleClass("LargeDesktop")}};o.prototype._toggleClass=function(e){var t=this.$();if(!t){return}if(t.hasClass("sapUiRespGridMedia-Std-"+e)){return}t.toggleClass("sapUiRespGridMedia-Std-"+e,true);if(e==="Phone"){t.toggleClass("sapUiRespGridMedia-Std-Desktop",false).toggleClass("sapUiRespGridMedia-Std-Tablet",false).toggleClass("sapUiRespGridMedia-Std-LargeDesktop",false)}else if(e==="Tablet"){t.toggleClass("sapUiRespGridMedia-Std-Desktop",false).toggleClass("sapUiRespGridMedia-Std-Phone",false).toggleClass("sapUiRespGridMedia-Std-LargeDesktop",false)}else if(e==="LargeDesktop"){t.toggleClass("sapUiRespGridMedia-Std-Desktop",false).toggleClass("sapUiRespGridMedia-Std-Phone",false).toggleClass("sapUiRespGridMedia-Std-Tablet",false)}else{t.toggleClass("sapUiRespGridMedia-Std-Phone",false).toggleClass("sapUiRespGridMedia-Std-Tablet",false).toggleClass("sapUiRespGridMedia-Std-LargeDesktop",false)}this.fireEvent("mediaChanged",{media:e})};o.prototype._getLayoutDataForControl=function(e){var t=e.getLayoutData();if(!t){return undefined}else if(t.isA("sap.ui.layout.GridData")){return t}else if(t.isA("sap.ui.core.VariantLayoutData")){var i=t.getMultipleLayoutData();for(var s=0;s<i.length;s++){var a=i[s];if(a&&a.isA("sap.ui.layout.GridData")){return a}}}};o.prototype.onLayoutDataChange=function(e){if(this.getDomRef()){this.invalidate()}};o.prototype._getAccessibleRole=function(){return null};o.prototype.getAccessibilityInfo=function(){return{children:this.getContent().filter(function(e){return e.$().is(":visible")})}}})();return o});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/GridData", ["sap/ui/core/LayoutData","./library","sap/base/Log"],function(e,t,n){"use strict";var a=e.extend("sap.ui.layout.GridData",{metadata:{library:"sap.ui.layout",properties:{span:{type:"sap.ui.layout.GridSpan",group:"Behavior",defaultValue:null},spanXL:{type:"int",group:"Behavior",defaultValue:null},spanL:{type:"int",group:"Behavior",defaultValue:null},spanM:{type:"int",group:"Behavior",defaultValue:null},spanS:{type:"int",group:"Behavior",defaultValue:null},indent:{type:"sap.ui.layout.GridIndent",group:"Behavior",defaultValue:null},indentXL:{type:"int",group:"Behavior",defaultValue:null},indentL:{type:"int",group:"Behavior",defaultValue:null},indentM:{type:"int",group:"Behavior",defaultValue:null},indentS:{type:"int",group:"Behavior",defaultValue:null},visibleXL:{type:"boolean",group:"Behavior",defaultValue:true},visibleL:{type:"boolean",group:"Behavior",defaultValue:true},visibleM:{type:"boolean",group:"Behavior",defaultValue:true},visibleS:{type:"boolean",group:"Behavior",defaultValue:true},moveBackwards:{type:"sap.ui.layout.GridIndent",group:"Misc",defaultValue:null},moveForward:{type:"sap.ui.layout.GridIndent",group:"Misc",defaultValue:null},linebreak:{type:"boolean",group:"Misc",defaultValue:false},linebreakXL:{type:"boolean",group:"Misc",defaultValue:false},linebreakL:{type:"boolean",group:"Misc",defaultValue:false},linebreakM:{type:"boolean",group:"Misc",defaultValue:false},linebreakS:{type:"boolean",group:"Misc",defaultValue:false},spanLarge:{type:"int",group:"Behavior",defaultValue:null,deprecated:true},spanMedium:{type:"int",group:"Behavior",defaultValue:null,deprecated:true},spanSmall:{type:"int",group:"Behavior",defaultValue:null,deprecated:true},indentLarge:{type:"int",group:"Behavior",defaultValue:null,deprecated:true},indentMedium:{type:"int",group:"Behavior",defaultValue:null,deprecated:true},indentSmall:{type:"int",group:"Behavior",defaultValue:null,deprecated:true},visibleOnLarge:{type:"boolean",group:"Behavior",defaultValue:true,deprecated:true},visibleOnMedium:{type:"boolean",group:"Behavior",defaultValue:true,deprecated:true},visibleOnSmall:{type:"boolean",group:"Behavior",defaultValue:true,deprecated:true}}}});(function(){a.prototype._setStylesInternal=function(e){if(e&&e.length>0){this._sStylesInternal=e}else{this._sStylesInternal=undefined}};a.prototype._getEffectiveSpanXLarge=function(){var e=this.getSpanXL();if(e&&e>0&&e<13){return e}var t=/XL([1-9]|1[0-2])(?:\s|$)/i;var n=t.exec(this.getSpan());if(n){var a=n[0];if(a){a=a.toUpperCase();if(a.substr(0,2)==="XL"){return parseInt(a.substr(2))}}}return undefined};a.prototype._getEffectiveSpanLarge=function(){var e=this.getSpanL();if(e&&e>0&&e<13){return e}var t=/\bL([1-9]|1[0-2])(?:\s|$)/i;var n=t.exec(this.getSpan());if(n){var a=n[0];if(a){a=a.toUpperCase();if(a.substr(0,1)==="L"){return parseInt(a.substr(1))}}}return undefined};a.prototype._getEffectiveSpanMedium=function(){var e=this.getSpanM();if(e&&e>0&&e<13){return e}var t=/M([1-9]|1[0-2])(?:\s|$)/i;var n=t.exec(this.getSpan());if(n){var a=n[0];if(a){a=a.toUpperCase();if(a.substr(0,1)==="M"){return parseInt(a.substr(1))}}}return undefined};a.prototype._getEffectiveSpanSmall=function(){var e=this.getSpanS();if(e&&e>0&&e<13){return e}var t=/S([1-9]|1[0-2])(?:\s|$)/i;var n=t.exec(this.getSpan());if(n){var a=n[0];if(a){a=a.toUpperCase();if(a.substr(0,1)==="S"){return parseInt(a.substr(1))}}}return undefined};a.prototype.init=function(){this._bLinebreakXLChanged=false};a.prototype.setLinebreakXL=function(e){this.setProperty("linebreakXL",e);this._bLinebreakXLChanged=true;return this};a.prototype._getLinebreakXLChanged=function(){return this._bLinebreakXLChanged};a.prototype.setSpanLarge=function(e){this.setSpanL(e);n.warning("Deprecated property spanLarge is used, please use spanL instead.");return this};a.prototype.setSpanMedium=function(e){n.warning("Deprecated property spanMedium is used, please use spanM instead.");return this.setSpanM(e)};a.prototype.setSpanSmall=function(e){n.warning("Deprecated property spanSmall is used, please use spanS instead.");return this.setSpanS(e)};a.prototype.setIndentLarge=function(e){n.warning("Deprecated property indentLarge is used, please use indentL instead.");return this.setIndentL(e)};a.prototype.setIndentMedium=function(e){n.warning("Deprecated property indentMedium is used, please use indentM instead.");return this.setIndentM(e)};a.prototype.setIndentSmall=function(e){n.warning("Deprecated property indentSmall is used, please use indentS instead.");return this.setIndentS(e)};a.prototype.setVisibleOnLarge=function(e){n.warning("Deprecated property visibleOnLarge is used, please use visibleL instead.");return this.setVisibleL(e)};a.prototype.setVisibleOnMedium=function(e){n.warning("Deprecated property visibleOnMedium is used, please use visibleM instead.");return this.setVisibleM(e)};a.prototype.setVisibleOnSmall=function(e){n.warning("Deprecated property visibleOnSmall is used, please use visibleS instead.");return this.setVisibleS(e)};a.prototype.getSpanLarge=function(){n.warning("Deprecated property spanLarge is used, please use spanL instead.");return this.getSpanL()};a.prototype.getSpanMedium=function(){n.warning("Deprecated property spanMedium is used, please use spanM instead.");return this.getSpanM()};a.prototype.getSpanSmall=function(){n.warning("Deprecated property spanSmall is used, please use spanS instead.");return this.getSpanS()};a.prototype.getIndentLarge=function(){n.warning("Deprecated property indentLarge is used, please use indentL instead.");return this.getIndentL()};a.prototype.getIndentMedium=function(){n.warning("Deprecated property indentMedium is used, please use indentM instead.");return this.getIndentM()};a.prototype.getIndentSmall=function(){n.warning("Deprecated property indentSmall is used, please use indentS instead.");return this.getIndentS()};a.prototype.getVisibleOnLarge=function(){n.warning("Deprecated property visibleOnLarge is used, please use visibleL instead.");return this.getVisibleL()};a.prototype.getVisibleOnMedium=function(){n.warning("Deprecated property visibleOnMedium is used, please use visibleM instead.");return this.getVisibleM()};a.prototype.getVisibleOnSmall=function(){n.warning("Deprecated property visibleOnSmall is used, please use visibleS instead.");return this.getVisibleS()}})();return a});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/GridRenderer", ["sap/ui/Device","sap/ui/layout/library"],function(e,s){"use strict";var a=s.GridPosition;var i={apiVersion:2};i.render=function(s,i){var r=/^([X][L](?:[0-9]|1[0-1]))? ?([L](?:[0-9]|1[0-1]))? ?([M](?:[0-9]|1[0-1]))? ?([S](?:[0-9]|1[0-1]))?$/i;var t=/^([X][L](?:[1-9]|1[0-2]))? ?([L](?:[1-9]|1[0-2]))? ?([M](?:[1-9]|1[0-2]))? ?([S](?:[1-9]|1[0-2]))?$/i;s.openStart("div",i);s.class("sapUiRespGrid");var p=i._getCurrentMediaContainerRange(e.media.RANGESETS.SAP_STANDARD_EXTENDED).name;s.class("sapUiRespGridMedia-Std-"+p);var n=i.getHSpacing();if(n===.5){n="05"}else if(n!==0&&n!==1&&n!==2){n=1}s.class("sapUiRespGridHSpace"+n);var l=i.getVSpacing();if(l===.5){l="05"}else if(l!==0&&l!==1&&l!==2){l=1}s.class("sapUiRespGridVSpace"+l);var d=i.getPosition();if(d){d=d.toUpperCase();if(d===a.Center.toUpperCase()){s.class("sapUiRespGridPosCenter")}else if(d===a.Right.toUpperCase()){s.class("sapUiRespGridPosRight")}}var f=i.getWidth();if(f!=="100%"&&f!=="auto"&&f!=="inherit"){if(n===0){s.style("width",f)}else{s.style("width","-webkit-calc("+f+" - "+n+"rem)");s.style("width","calc("+f+" - "+n+"rem)")}}var v=i._getAccessibleRole();var c;if(v){c={role:v}}s.accessibilityState(i,c);s.openEnd();var g=i.getContent();var o=i.getDefaultSpan();var L=["","XL3","L3","M6","S12"];var S=["","XL0","L0","M0","S0"];var U=t.exec(o);var u=i._getSpanXLChanged();var R=i._getIndentXLChanged();var G=i.getDefaultIndent();var b=r.exec(G);for(var X=0;X<g.length;X++){s.openStart("div",i.getId()+"-wrapperfor-"+g[X].getId());var h=i._getLayoutDataForControl(g[X]);var C=false;if(!g[X].getVisible()){s.class("sapUiRespGridSpanInvisible")}if(h){var I=false;if(h.getLinebreak()===true){s.class("sapUiRespGridBreak")}else{if(h.getLinebreakXL()===true){I=true;s.class("sapUiRespGridBreakXL")}if(h.getLinebreakL()===true){if(!I&&!h._getLinebreakXLChanged()){s.class("sapUiRespGridBreakXL")}s.class("sapUiRespGridBreakL")}if(h.getLinebreakM()===true){s.class("sapUiRespGridBreakM")}if(h.getLinebreakS()===true){s.class("sapUiRespGridBreakS")}}var M;var k;var y=h.getSpan();if(!y){M=U}else{M=t.exec(y);if(/XL/gi.test(y)){C=true}}if(M){for(var _=1;_<M.length;_++){var w=M[_];if(!w){w=U[_];if(!w){w=L[_]}}if(w.substr(0,1)==="L"){k=w.substr(1,2)}var B=h.getSpanXL();var D=h.getSpanL();var V=h.getSpanM();var x=h.getSpanS();w=w.toUpperCase();if(w.substr(0,2)==="XL"&&B>0&&B<13){s.class("sapUiRespGridSpanXL"+B);C=true}else if(w.substr(0,1)==="L"&&D>0&&D<13){s.class("sapUiRespGridSpanL"+D);k=D}else if(w.substr(0,1)==="M"&&V>0&&V<13){s.class("sapUiRespGridSpanM"+V)}else if(w.substr(0,1)==="S"&&x>0&&x<13){s.class("sapUiRespGridSpanS"+x)}else{if(w.substr(0,2)!=="XL"||u||C){s.class("sapUiRespGridSpan"+w)}}}if(!u&&!C){s.class("sapUiRespGridSpanXL"+k)}}var E;var H;var A=h.getIndent();if(!A||A.length==0){E=b}else{E=r.exec(A);if(/XL/gi.test(A)){R=true}}if(!E){E=b;if(!E){E=undefined}}var P=h.getIndentXL();var m=h.getIndentL();var F=h.getIndentM();var N=h.getIndentS();if(E){for(var _=1;_<E.length;_++){var T=E[_];if(!T){if(b&&b[_]){T=b[_]}else{T=S[_]}}if(T){T=T.toUpperCase();if(T.substr(0,1)==="L"){H=T.substr(1,2)}if(T.substr(0,2)==="XL"&&P>0&&P<12){s.class("sapUiRespGridIndentXL"+P);R=true}else if(T.substr(0,1)==="L"&&m>0&&m<12){s.class("sapUiRespGridIndentL"+m);H=m}else if(T.substr(0,1)==="M"&&F>0&&F<12){s.class("sapUiRespGridIndentM"+F)}else if(T.substr(0,1)==="S"&&N>0&&N<12){s.class("sapUiRespGridIndentS"+N)}else{if(!/^(XL0)? ?(L0)? ?(M0)? ?(S0)?$/.exec(T)){s.class("sapUiRespGridIndent"+T)}}}}if(!R){if(H&&H>0){s.class("sapUiRespGridIndentXL"+H)}}}if(!h.getVisibleXL()){s.class("sapUiRespGridHiddenXL")}if(!h.getVisibleL()){s.class("sapUiRespGridHiddenL")}if(!h.getVisibleM()){s.class("sapUiRespGridHiddenM")}if(!h.getVisibleS()){s.class("sapUiRespGridHiddenS")}var $=h.getMoveBackwards();if($&&$.length>0){var W=r.exec($);if(W){for(var _=1;_<W.length;_++){var j=W[_];if(j){s.class("sapUiRespGridBwd"+j.toUpperCase())}}}}var q=h.getMoveForward();if(q&&q.length>0){var z=r.exec(q);if(z){for(var _=1;_<z.length;_++){var J=z[_];if(J){s.class("sapUiRespGridFwd"+J.toUpperCase())}}}}if(typeof h._sStylesInternal==="string"){var K=h._sStylesInternal.split(" ");for(var O=0;O<K.length;O++){s.class(K[O])}}}if(!h){var w="";if(U){for(var _=1;_<U.length;_++){w=U[_];if(!w){if(_===1&&U[_+1]){w="X"+U[_+1]}else{w=L[_]}}s.class("sapUiRespGridSpan"+w.toUpperCase())}}else{for(var _=1;_<L.length;_++){w=L[_];s.class("sapUiRespGridSpan"+w.toUpperCase())}}var T="";if(b){for(var _=1;_<b.length;_++){T=b[_];if(!T){if(_===1&&b[_+1]){T="X"+b[_+1]}else{T=S[_]}}if(T.substr(0,1)!=="X"&&T.substr(1,1)!=="0"||T.substr(0,1)=="X"&&T.substr(2,1)!=="0"){s.class("sapUiRespGridIndent"+T.toUpperCase())}}}}s.openEnd();s.renderControl(g[X]);s.close("div")}s.close("div")};return i},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/HorizontalLayout", ["sap/ui/core/Control","./library","./HorizontalLayoutRenderer"],function(e,t,a){"use strict";var o=e.extend("sap.ui.layout.HorizontalLayout",{metadata:{library:"sap.ui.layout",properties:{allowWrapping:{type:"boolean",group:"Misc",defaultValue:false}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},designtime:"sap/ui/layout/designtime/HorizontalLayout.designtime",dnd:{draggable:false,droppable:true}},renderer:a});o.prototype.getAccessibilityInfo=function(){return{children:this.getContent()}};return o});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/HorizontalLayoutRenderer", [],function(){"use strict";var r={apiVersion:2};r.render=function(r,a){var e=r;var n=!a.getAllowWrapping();e.openStart("div",a);e.class("sapUiHLayout");if(n){e.class("sapUiHLayoutNoWrap")}e.openEnd();var i=a.getContent();for(var t=0;t<i.length;t++){if(n){e.openStart("div");e.class("sapUiHLayoutChildWrapper");e.openEnd()}e.renderControl(i[t]);if(n){e.close("div")}}e.close("div")};return r},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/VerticalLayout", ["sap/ui/core/Control","sap/ui/core/EnabledPropagator","./library","./VerticalLayoutRenderer"],function(e,t,a,r){"use strict";var i=e.extend("sap.ui.layout.VerticalLayout",{metadata:{library:"sap.ui.layout",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},enabled:{type:"boolean",group:"Behavior",defaultValue:true}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},dnd:{draggable:false,droppable:true},designtime:"sap/ui/layout/designtime/VerticalLayout.designtime"},renderer:r});i.prototype.getAccessibilityInfo=function(){return{children:this.getContent()}};t.call(i.prototype);return i});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/VerticalLayoutRenderer", [],function(){"use strict";var t={apiVersion:2};t.render=function(t,e){var i=t;i.openStart("div",e);i.class("sapUiVlt");i.class("sapuiVlt");if(e.getWidth()&&e.getWidth()!=""){i.style("width",e.getWidth())}i.openEnd();var n=e.getContent();for(var s=0;s<n.length;s++){i.openStart("div");i.class("sapUiVltCell");i.class("sapuiVltCell");i.openEnd();i.renderControl(n[s]);i.close("div")}i.close("div")};return t},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/form/Form", ["sap/ui/core/Control","sap/ui/base/ManagedObjectObserver","./FormRenderer","./FormHelper"],function(e,t,i,o){"use strict";var r=e.extend("sap.ui.layout.form.Form",{metadata:{library:"sap.ui.layout",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},editable:{type:"boolean",group:"Misc",defaultValue:false}},defaultAggregation:"formContainers",aggregations:{formContainers:{type:"sap.ui.layout.form.FormContainer",multiple:true,singularName:"formContainer"},title:{type:"sap.ui.core.Title",altTypes:["string"],multiple:false},toolbar:{type:"sap.ui.core.Toolbar",multiple:false},layout:{type:"sap.ui.layout.form.FormLayout",multiple:false}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},designtime:"sap/ui/layout/designtime/form/Form.designtime"},renderer:i});r.prototype.init=function(){this._oInitPromise=o.init();this._oObserver=new t(a.bind(this));this._oObserver.observe(this,{properties:["editable"],aggregations:["formContainers"]})};r.prototype.exit=function(){this._oObserver.disconnect();this._oObserver=undefined};r.prototype.toggleContainerExpanded=function(e){var t=this.getLayout();if(t){t.toggleContainerExpanded(e)}};r.prototype.contentOnAfterRendering=function(e,t){var i=this.getLayout();if(i&&i.contentOnAfterRendering){i.contentOnAfterRendering(e,t)}};r.prototype.onLayoutDataChange=function(e){var t=this.getLayout();if(t&&t.onLayoutDataChange){t.onLayoutDataChange(e)}};r.prototype.onBeforeFastNavigationFocus=function(e){var t=this.getLayout();if(t&&t.onBeforeFastNavigationFocus){t.onBeforeFastNavigationFocus(e)}};r.prototype.setEditable=function(e){const t=this.getLayout();const i=!t?.invalidateEditableChange();this.setProperty("editable",e,i);return this};function n(e,t){if(e!=t&&this.getDomRef()){if(e){this.$().addClass("sapUiFormEdit").addClass("sapUiFormEdit-CTX");this.$().removeAttr("aria-readonly")}else{this.$().removeClass("sapUiFormEdit").removeClass("sapUiFormEdit-CTX");this.$().attr("aria-readonly","true")}}var i=this.getFormContainers();for(var o=0;o<i.length;o++){var r=i[o];r._setEditable(e)}}r.prototype.setToolbar=function(e){const t=this.getToolbar();this.setAggregation("toolbar",e);if(this._oInitPromise){this._oInitPromise.then(function(){delete this._oInitPromise;e=o.setToolbar(e,t)}.bind(this))}else{e=o.setToolbar(e,t)}return this};r.prototype.invalidate=function(t){if(!this._bNoInvalidate){e.prototype.invalidate.apply(this,arguments)}};r.prototype.getContainerRenderedDomRef=function(e){var t=this.getLayout();if(t&&t.getContainerRenderedDomRef){return t.getContainerRenderedDomRef(e)}else{return null}};r.prototype.getElementRenderedDomRef=function(e){var t=this.getLayout();if(t&&t.getElementRenderedDomRef){return t.getElementRenderedDomRef(e)}else{return null}};r.prototype.getVisibleFormContainers=function(){var e=this.getFormContainers();var t=[];for(var i=0;i<e.length;i++){var o=e[i];if(o.isVisible()){t.push(o)}}return t};r.prototype._suggestTitleId=function(e){this._sSuggestedTitleId=e;if(this.getDomRef()){this.invalidate()}return this};function a(e){if(e.name==="editable"){n.call(this,e.current,e.old)}else if(e.name==="formContainers"){s.call(this,e.mutation,e.child)}}function s(e,t){if(e==="insert"){t._setEditable(this.getEditable())}}return r});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/form/FormContainer", ["sap/ui/core/Element","sap/ui/base/ManagedObjectObserver","sap/ui/core/Lib","sap/ui/core/theming/Parameters","./FormHelper","sap/base/Log"],function(e,t,i,n,o,r){"use strict";var a=e.extend("sap.ui.layout.form.FormContainer",{metadata:{library:"sap.ui.layout",properties:{expanded:{type:"boolean",group:"Misc",defaultValue:true},expandable:{type:"boolean",group:"Misc",defaultValue:false},visible:{type:"boolean",group:"Misc",defaultValue:true},_editable:{type:"boolean",group:"Misc",defaultValue:false,visibility:"hidden"}},defaultAggregation:"formElements",aggregations:{formElements:{type:"sap.ui.layout.form.FormElement",multiple:true,singularName:"formElement"},title:{type:"sap.ui.core.Title",altTypes:["string"],multiple:false},toolbar:{type:"sap.ui.core.Toolbar",multiple:false},_expandButton:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},designtime:"sap/ui/layout/designtime/form/FormContainer.designtime"}});a.prototype.init=function(){this._oInitPromise=o.init();this._rb=i.getResourceBundleFor("sap.ui.layout");this._oObserver=new t(this._observeChanges.bind(this));this._oObserver.observe(this,{properties:["expanded","expandable"],aggregations:["formElements"]})};a.prototype.exit=function(){if(this._oExpandButton){delete this._oExpandButton}this._rb=undefined;this._oObserver.disconnect();this._oObserver=undefined};function s(e){if(e){if(!this._oExpandButton){if(this._oInitPromise){this._oInitPromise.then(function(){delete this._oInitPromise;l.call(this,o.createButton(this.getId()+"--Exp",h,this))}.bind(this))}else{l.call(this,o.createButton(this.getId()+"--Exp",h,this))}}else{d.call(this)}}}function l(e){if(!this._bIsBeingDestroyed){this._oExpandButton=e;this.setAggregation("_expandButton",this._oExpandButton);d.call(this)}}function u(e){d.call(this);var t=this.getParent();if(t&&t.toggleContainerExpanded){t.toggleContainerExpanded(this)}}a.prototype.setToolbar=function(e){const t=this.getToolbar();this.setAggregation("toolbar",e);if(this._oInitPromise){this._oInitPromise.then(function(){delete this._oInitPromise;e=o.setToolbar(e,t)}.bind(this))}else{e=o.setToolbar(e,t)}return this};a.prototype.contentOnAfterRendering=function(e,t){var i=this.getParent();if(i&&i.contentOnAfterRendering){i.contentOnAfterRendering(e,t)}};a.prototype.onLayoutDataChange=function(e){var t=this.getParent();if(t&&t.onLayoutDataChange){t.onLayoutDataChange(e)}};a.prototype._checkProperties=function(){var e=0;if(this.getExpandable()&&(!this.getTitle()||this.getToolbar())){r.warning("Expander only displayed if title is set",this.getId(),"FormContainer");e=1}return e};a.prototype.getRenderedDomRef=function(){var e=this;var t=this.getParent();if(t&&t.getContainerRenderedDomRef){return t.getContainerRenderedDomRef(e)}else{return null}};a.prototype.getElementRenderedDomRef=function(e){var t=this.getParent();if(t&&t.getElementRenderedDomRef){return t.getElementRenderedDomRef(e)}else{return null}};a.prototype.getVisibleFormElements=function(){var e=this.getFormElements();var t=[];for(var i=0;i<e.length;i++){var n=e[i];if(n.isVisible()){t.push(n)}}return t};a.prototype._setEditable=function(e){var t=this.getProperty("_editable");this.setProperty("_editable",e,true);if(e!==t){var i=this.getFormElements();for(var n=0;n<i.length;n++){var o=i[n];o._setEditable(e)}}};a.prototype.isVisible=function(){return this.getVisible()};a.prototype.onThemeChanged=function(){d.call(this)};function p(e){return n.get({name:[e],_restrictedParseUrls:true})}function d(){if(!this._oExpandButton){return}var e,t,i,n;if(this.getExpanded()){e=p("_sap_ui_layout_Form_FormContainerColImageURL");t=p("_sap_ui_layout_Form_FormContainerColImageDownURL");i="-";n=this._rb.getText("FORM_COLLAPSE")}else{e=p("_sap_ui_layout_Form_FormContainerExpImageURL");t=p("_sap_ui_layout_Form_FormContainerExpImageDownURL");i="+";n=this._rb.getText("FORM_EXPAND")}if(e){i=""}o.setButtonContent(this._oExpandButton,i,n,e,t)}function h(e){this.setExpanded(!this.getExpanded())}a.prototype._observeChanges=function(e){if(e.name=="formElements"){g.call(this,e.mutation,e.child)}else if(e.name=="expanded"){u.call(this,e.current)}else if(e.name=="expandable"){s.call(this,e.current)}};function g(e,t){if(e==="insert"){var i=this.getProperty("_editable");t._setEditable(i)}}return a});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/form/FormElement", ["sap/ui/core/Element","sap/ui/core/Control","sap/ui/base/ManagedObjectObserver","./FormHelper","sap/base/Log"],function(e,t,i,s,a){"use strict";var r=e.extend("sap.ui.layout.form.FormElement",{metadata:{library:"sap.ui.layout",properties:{visible:{type:"boolean",group:"Misc",defaultValue:true},_editable:{type:"boolean",group:"Misc",defaultValue:false,visibility:"hidden"}},defaultAggregation:"fields",aggregations:{label:{type:"sap.ui.core.Label",altTypes:["string"],multiple:false},_label:{type:"sap.ui.core.Label",multiple:false,visibility:"hidden"},fields:{type:"sap.ui.core.Control",multiple:true,singularName:"field"}},designtime:"sap/ui/layout/designtime/form/FormElement.designtime"}});r.prototype.init=function(){this._oInitPromise=s.init();this._oFieldDelegate={oElement:this,onAfterRendering:f};this._oObserver=new i(this._observeChanges.bind(this));this._oObserver.observe(this,{aggregations:["fields"]})};r.prototype.exit=function(){if(this._oLabel){delete this._oLabel}this._oFieldDelegate=undefined;this._oObserver.disconnect();this._oObserver=undefined};r.prototype.setLabel=function(e){if(!this._oLabel){var t=this.getLabel();if(t){if(t.setAlternativeLabelFor){t.setAlternativeLabelFor(null)}if(t.isRequired){t.isRequired=t._sapuiIsRequired;t._sapuiIsRequired=undefined;t.disableRequiredChangeCheck(false)}if(t.isDisplayOnly){t.isDisplayOnly=t._sapuiIsDisplayOnly;t._sapuiIsDisplayOnly=undefined}if(t.isWrapping){t.isWrapping=t._sapuiIsWrapping;t._sapuiIsWrapping=undefined}}}this.setAggregation("label",e);var i=e;if(typeof i==="string"){if(this._oInitPromise){this._oInitPromise.then(function(){delete this._oInitPromise;var e=this.getLabel();if(typeof e==="string"){this._setInternalLabel(e)}}.bind(this))}else{this._setInternalLabel(i)}}else{if(this._oLabel){this._oLabel.destroy();delete this._oLabel}if(i&&i.isRequired){i._sapuiIsRequired=i.isRequired;i.isRequired=o;i.disableRequiredChangeCheck(true)}if(i&&i.isDisplayOnly){i._sapuiIsDisplayOnly=i.isDisplayOnly;i.isDisplayOnly=u}if(i&&i.isWrapping){i._sapuiIsWrapping=i.isWrapping;i.isWrapping=p}h.call(this)}return this};r.prototype._setInternalLabel=function(e){if(!this._oLabel){this._oLabel=s.createLabel(e,this.getId()+"-label");this.setAggregation("_label",this._oLabel);this._oLabel.disableRequiredChangeCheck(true);if(this._oLabel.isRequired){this._oLabel.isRequired=o}if(this._oLabel.isDisplayOnly){this._oLabel.isDisplayOnly=u}if(this._oLabel.setWrapping){this._oLabel.setWrapping(true)}}else{this._oLabel.setText(e)}h.call(this)};r.prototype.destroyLabel=function(){this.destroyAggregation("label");if(this._oLabel){this._oLabel.destroy();delete this._oLabel}return this};r.prototype.getLabelControl=function(){if(this._oLabel){return this._oLabel}else{var e=this.getLabel();if(typeof e==="string"){e=null}return e}};r.prototype.updateFields=function(){var e=this.getFields();var t;var i=0;for(i=0;i<e.length;i++){t=e[i];g.call(this,t)}this.updateAggregation("fields");e=this.getFields();for(i=0;i<e.length;i++){t=e[i];d.call(this,t)}h.call(this);return this};r.prototype.enhanceAccessibilityState=function(e,t){var i=this.getLabelControl();if(i&&i!=e&&e.getMetadata().getAllAssociations().ariaLabelledBy){var s=t["labelledby"];if(!s){s=i.getId()}else{var a=s.split(" ");if(a.indexOf(i.getId())<0){a.splice(0,0,i.getId());s=a.join(" ")}}t["labelledby"]=s}};r.prototype.onLayoutDataChange=function(e){var t=this.getParent();if(t&&t.onLayoutDataChange){t.onLayoutDataChange(e)}};r.prototype.getRenderedDomRef=function(){var e=this;var t=this.getParent();if(t&&t.getElementRenderedDomRef){return t.getElementRenderedDomRef(e)}else{return null}};r.prototype._setEditable=function(e){var t=this._getEditable();this.setProperty("_editable",e,true);if(e!==t){this.invalidateLabel()}};r.prototype._getEditable=function(){return this.getProperty("_editable")};r.prototype.invalidateLabel=function(){var e=this.getLabelControl();if(e&&e.getDomRef()){e.invalidate()}};r.prototype.isVisible=function(){return this.getVisible()};r.prototype.getFieldsForRendering=function(){return this.getFields()};r.prototype._observeChanges=function(e){if(e.object==this){if(e.name=="fields"){l.call(this,e.child,e.mutation)}}else{n.call(this,e)}};function l(e,t){if(t=="insert"){if(!e.isA("sap.ui.core.IFormContent")){a.warning(e+" is not valid Form content",this)}d.call(this,e)}else{g.call(this,e)}h.call(this)}function n(e){if(e.name=="required"||e.name=="editable"){this.invalidateLabel()}}function o(){if(this.getRequired&&this.getRequired()){return true}var e=this.getParent();var t=e.getFields();for(var i=0;i<t.length;i++){var s=t[i];if(s.getRequired&&s.getRequired()===true&&(!s.getEditable||s.getEditable())){return true}}return false}function u(){if(this.getDisplayOnly){if(!this.isPropertyInitial("displayOnly")){return this.getDisplayOnly()}var e=this.getParent();return!e._getEditable()}return false}function p(){if(this.getWrapping&&!this.isPropertyInitial("wrapping")){return this.getWrapping()}return true}function h(){var e=this.getFields();var i=e.length>0?e[0]:null;var s=this._oLabel;if(s){s.setLabelFor(i)}else{s=this.getLabel();if(s instanceof t){s.setAlternativeLabelFor(i)}}}function d(e){e.addDelegate(this._oFieldDelegate);if(!this._bNoObserverChange){if(e.getMetadata().getProperty("required")){this._oObserver.observe(e,{properties:["required"]})}if(e.getMetadata().getProperty("editable")){this._oObserver.observe(e,{properties:["editable"]})}}}function g(e){e.removeDelegate(this._oFieldDelegate);if(!this._bNoObserverChange){this._oObserver.unobserve(e)}}function f(e){var t=this.oElement.getParent();if(t&&t.contentOnAfterRendering){t.contentOnAfterRendering(this.oElement,e.srcControl)}}return r});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/form/FormHelper", ["sap/ui/core/Lib","sap/ui/core/library","sap/base/util/merge"],function(t,e,n){"use strict";const i={Label:undefined,Button:undefined,Text:undefined,Library:undefined,init:function(){this.Label=sap.ui.require("sap/m/Label");this.Text=sap.ui.require("sap/m/Text");this.Button=sap.ui.require("sap/m/Button");this.Library=sap.ui.require("sap/m/library");if(!this.Label||!this.Text||!this.Button||!this.Library){if(!this.oInitPromise){this.oInitPromise=new Promise(function(t,e){sap.ui.require(["sap/m/Label","sap/m/Text","sap/m/Button","sap/m/library"],function(e,n,i,r){this.Label=e;this.Text=n;this.Button=i;this.Library=r;t(true)}.bind(this))}.bind(this))}return this.oInitPromise}else if(this.oInitPromise){delete this.oInitPromise}return null},createLabel:function(t,e){return new this.Label(e,{text:t})},createButton:function(t,e,n){const i=new this.Button(t,{type:this.Library.ButtonType.Transparent});i.attachEvent("press",e,n);return i},setButtonContent:function(t,e,n,i,r){t.setText(e);t.setTooltip(n);t.setIcon(i);t.setActiveIcon(r)},addFormClass:function(){return"sapUiFormM"},setToolbar:function(t,e){if(e&&e.setDesign){e.setDesign(e.getDesign(),true)}if(t&&t.setDesign){const e=t.getMetadata().getManagedProperty("design");if(e&&e.type==="sap.m.ToolbarDesign"){t.setDesign(this.Library.ToolbarDesign.Transparent,true)}}return t},getToolbarTitle:function(t){if(t){const e=t.getContent?t.getContent():[];for(let t=0;t<e.length;t++){const n=e[t];if(n.isA("sap.m.Title")){return n.getId()}}return t.getId()}},createDelimiter:function(t,n){return new this.Text(n,{text:t,textAlign:e.TextAlign.Center})},createSemanticDisplayControl:function(t,e){return new this.Text(e,{text:t})},updateDelimiter:function(t,e){t.setText(e)},updateSemanticDisplayControl:function(t,e){t.setText(e)},isArrowKeySupported:function(){return false}};const r={init:function(){return null},createLabel:function(t,e){return new sap.ui.commons.Label(e,{text:t})},createButton:function(t,e,n){const i=new sap.ui.commons.Button(t,{lite:true});i.attachEvent("press",e,n);return i},setButtonContent:function(t,e,n,i,r){t.setText(e);t.setTooltip(n);t.setIcon(i);t.setIconHovered(r)},getToolbarTitle:function(t){return t&&t.getId()}};const o={init:function(){if(t.isLoaded("sap.m")){n(o,i);return this.init()}if(t.isLoaded("sap.ui.commons")&&!t.isLoaded("sap.m")){n(o,r);return this.init()}return null},createLabel:function(t){throw new Error("no Label control available!")},createButton:function(t,e,n){throw new Error("no Button control available!")},setButtonContent:function(t,e,n,i,r){throw new Error("no Button control available!")},addFormClass:function(){return null},setToolbar:function(t,e){return t},getToolbarTitle:function(t){return t&&t.getId()},createDelimiter:function(t,e){throw new Error("no delimiter control available!")},createSemanticDisplayControl:function(t,e){throw new Error("no display control available!")},updateDelimiter:function(t,e){throw new Error("no delimiter control available!")},updateSemanticDisplayControl:function(t,e){throw new Error("no display control available!")},isArrowKeySupported:function(){return true}};return o},false);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/form/FormLayout", ["sap/base/i18n/Localization","sap/ui/core/Control","sap/ui/core/Element","sap/ui/layout/library","./FormLayoutRenderer","./FormHelper","sap/ui/core/theming/Parameters","sap/ui/thirdparty/jquery","sap/ui/dom/jquery/Selectors"],function(e,t,r,i,n,o,a,jQuery){"use strict";var l=i.BackgroundDesign;var s=t.extend("sap.ui.layout.form.FormLayout",{metadata:{library:"sap.ui.layout",properties:{backgroundDesign:{type:"sap.ui.layout.BackgroundDesign",group:"Appearance",defaultValue:l.Translucent}}},renderer:n});s.prototype.init=function(){this._oInitPromise=o.init();this._sFormTitleSize="H4";this._sFormSubTitleSize="H5"};s.prototype.onBeforeRendering=function(e){this.loadTitleSizes()};s.prototype.contentOnAfterRendering=function(e,t){if(o.isArrowKeySupported()){jQuery(t.getFocusDomRef()).data("sap.InNavArea",true)}if(this.renderControlsForSemanticElement()&&e.isA("sap.ui.layout.form.SemanticFormElement")&&!e._getEditable()){t.$().css("max-width","100%")}else if(t.getWidth&&(!t.getWidth()||t.getWidth()=="auto")&&(!t.getFormDoNotAdjustWidth||!t.getFormDoNotAdjustWidth())){t.$().css("width","100%")}};s.prototype.toggleContainerExpanded=function(e){var t=e.getExpanded();if(this.getDomRef()){if(t){e.$("content").css("display","")}else{e.$("content").css("display","none")}}};s.prototype.getLayoutDataForElement=function(e,t){var r=e.getLayoutData();if(!r){return undefined}else if(r.isA(t)){return r}else if(r.isA("sap.ui.core.VariantLayoutData")){var i=r.getMultipleLayoutData();for(var n=0;n<i.length;n++){var o=i[n];if(o.isA(t)){return o}}}};s.prototype.onsapright=function(t){if(o.isArrowKeySupported()){var r=e.getRTL();if(!r){this.navigateForward(t)}else{this.navigateBack(t)}}};s.prototype.onsapleft=function(t){if(o.isArrowKeySupported()){var r=e.getRTL();if(!r){this.navigateBack(t)}else{this.navigateForward(t)}}};s.prototype.onsapdown=function(e){if(o.isArrowKeySupported()){var t=e.srcControl;var r;var i=this.findElement(t);var n=i.element;t=i.rootControl;if(n&&n.isA("sap.ui.layout.form.FormElement")){r=this.findFieldBelow(t,n)}else if(n&&n.isA("sap.ui.layout.form.FormContainer")){r=this.findFirstFieldOfNextElement(n,0)}if(r){r.focus();e.preventDefault()}}};s.prototype.onsapup=function(e){if(o.isArrowKeySupported()){var t=e.srcControl;var r=0;var i;var n=this.findElement(t);var a=n.element;t=n.rootControl;if(a&&a.isA("sap.ui.layout.form.FormElement")){i=this.findFieldAbove(t,a)}else if(a&&a.isA("sap.ui.layout.form.FormContainer")){var l=a.getParent();r=l.indexOfFormContainer(a);i=this.findLastFieldOfLastElementInPrevContainer(l,r-1)}if(i){i.focus();e.preventDefault()}}};s.prototype.onsaphome=function(e){if(o.isArrowKeySupported()){var t=e.srcControl;var r=0;var i;var n=this.findElement(t);var a=n.element;var l=a.getParent();var s=l.getParent();r=s.indexOfFormContainer(l);i=this.findFirstFieldOfFirstElementInNextContainer(s,r);if(i){i.focus();e.preventDefault()}}};s.prototype.onsaptop=function(e){if(o.isArrowKeySupported()){var t=e.srcControl;var r=this.findElement(t);var i=r.element;var n;var a;if(i&&i.isA("sap.ui.layout.form.FormElement")){a=i.getParent()}else if(i&&i.isA("sap.ui.layout.form.FormContainer")){a=i}var l=a.getParent();n=this.findFirstFieldOfForm(l);if(n){n.focus();e.preventDefault()}}};s.prototype.onsapend=function(e){if(o.isArrowKeySupported()){var t=e.srcControl;var r=0;var i;var n=this.findElement(t);var a=n.element;var l=a.getParent();var s=l.getParent();r=s.indexOfFormContainer(l);i=this.findLastFieldOfLastElementInPrevContainer(s,r);if(i){i.focus();e.preventDefault()}}};s.prototype.onsapbottom=function(e){if(o.isArrowKeySupported()){var t=e.srcControl;var r=this.findElement(t);var i=r.element;var n;var a;if(i&&i.isA("sap.ui.layout.form.FormElement")){a=i.getParent()}else if(i&&i.isA("sap.ui.layout.form.FormContainer")){a=i}var l=a.getParent();var s=l.getFormContainers();var f=s.length;n=this.findLastFieldOfLastElementInPrevContainer(l,f-1);if(n){n.focus();e.preventDefault()}}};s.prototype.onsapexpand=function(e){var t=e.srcControl;var r=this.findElement(t);var i=r.element;var n;if(i.isA("sap.ui.layout.form.FormContainer")){n=i}else{n=i.getParent()}if(n.getExpandable()&&t===n._oExpandButton){n.setExpanded(true)}};s.prototype.onsapcollapse=function(e){var t=e.srcControl;var r=this.findElement(t);var i=r.element;var n;if(i.isA("sap.ui.layout.form.FormContainer")){n=i}else{n=i.getParent()}if(n.getExpandable()&&t===n._oExpandButton){n.setExpanded(false)}};s.prototype.onsapskipforward=function(e){var t=e.srcControl;var r=this.findElement(t);var i=r.element;t=r.rootControl;var n;var o;if(i&&i.isA("sap.ui.layout.form.FormElement")){o=i.getParent()}else if(i&&i.isA("sap.ui.layout.form.FormContainer")){o=i}var a=o.getParent();var l=a.indexOfFormContainer(o);n=this.findFirstFieldOfFirstElementInNextContainer(a,l+1);if(n){n.focus();e.preventDefault()}};s.prototype.onsapskipback=function(e){var t=e.srcControl;var r=this.findElement(t);var i=r.element;t=r.rootControl;var n;var o;if(i&&i.isA("sap.ui.layout.form.FormElement")){o=i.getParent()}else if(i&&i.isA("sap.ui.layout.form.FormContainer")){o=i}var a=o.getParent();var l=a.getFormContainers();var s=a.indexOfFormContainer(o);while(!n&&s>0){var f=l[s-1];if(!f.getExpandable()||f.getExpanded()){n=this.findFirstFieldOfFirstElementInPrevContainer(a,s-1)}s=s-1}if(n&&n!==t.getFocusDomRef()){n.focus();e.preventDefault()}};s.prototype.onBeforeFastNavigationFocus=function(e){if(jQuery.contains(this.getDomRef(),e.source)){e.srcControl=r.closestTo(e.source);if(e.forward){this.onsapskipforward(e)}else{this.onsapskipback(e)}}else{var t=e.forward?this.findFirstFieldOfForm(this.getParent()):this.findFirstFieldOfLastContainerOfForm(this.getParent());if(t){t.focus();e.preventDefault()}}};s.prototype.findElement=function(e){var t=e.getParent();var r=e;while(t&&!t.isA("sap.ui.layout.form.FormElement")&&!t.isA("sap.ui.layout.form.FormContainer")&&!t.isA("sap.ui.layout.form.Form")){r=t;t=t.getParent()}return{rootControl:r,element:t}};s.prototype.navigateForward=function(e){var t=e.srcControl;var r=0;var i;var n=this.findElement(t);var o=n.element;t=n.rootControl;if(o&&o.isA("sap.ui.layout.form.FormElement")){if(t==o.getLabelControl()){r=-1}else{r=o.indexOfField(t)}i=this.findNextFieldOfElement(o,r+1);if(!i){var a=o.getParent();r=a.indexOfFormElement(o);i=this.findFirstFieldOfNextElement(a,r+1);if(!i){var l=a.getParent();r=l.indexOfFormContainer(a);i=this.findFirstFieldOfFirstElementInNextContainer(l,r+1)}}}else if(o&&o.isA("sap.ui.layout.form.FormContainer")){i=this.findFirstFieldOfNextElement(o,0)}if(i){i.focus();e.preventDefault()}};s.prototype.tabForward=function(e){var t;var r=e.srcControl;var i=0;var n;var o=this.findElement(r);var a=o.element;r=o.rootControl;if(a&&a.isA("sap.ui.layout.form.FormElement")){if(r==a.getLabelControl()){i=-1}else{i=a.indexOfField(r)}n=this.findNextFieldOfElement(a,i+1,true);if(!n){var l=a.getParent();i=l.indexOfFormElement(a);n=this.findFirstFieldOfNextElement(l,i+1,true);if(!n){t=l.getParent();i=t.indexOfFormContainer(l);n=this.findFirstFieldOfFirstElementInNextContainer(t,i+1,true)}}}else if(a&&a.isA("sap.ui.layout.form.FormContainer")){n=this.findFirstFieldOfNextElement(a,0,true);if(!n){t=a.getParent();i=t.indexOfFormContainer(a);n=this.findFirstFieldOfFirstElementInNextContainer(t,i+1,true)}}if(n){n.focus();e.preventDefault()}};s.prototype.findNextFieldOfElement=function(e,t,r){var i=e.getFieldsForRendering();var n=i.length;var o;for(var a=t;a<n;a++){var l=i[a];var s=this._getDomRef(l);if(r==true){if((!l.getEditable||l.getEditable())&&(!l.getEnabled||l.getEnabled())&&s){o=s;break}}else{if((!l.getEnabled||l.getEnabled())&&s){o=s;break}}}return o};s.prototype.findFirstFieldOfNextElement=function(e,t,r){var i=e.getFormElements();var n=i.length;var o;var a=t;while(!o&&a<n){var l=i[a];if(r==true){o=this.findNextFieldOfElement(l,0,true)}else{o=this.findNextFieldOfElement(l,0)}a++}return o};s.prototype.findFirstFieldOfForm=function(e){var t=this.findFirstFieldOfFirstElementInNextContainer(e,0);return t};s.prototype.findFirstFieldOfLastContainerOfForm=function(e){var t;var r=e.getFormContainers();var i=r.length;while(!t&&i>0){var n=r[i-1];if(!n.getExpandable()||n.getExpanded()){t=this.findFirstFieldOfFirstElementInPrevContainer(e,i-1)}i=i-1}return t};s.prototype.findFirstFieldOfFirstElementInNextContainer=function(e,t,r){var i=e.getFormContainers();var n=i.length;var o;var a=t;while(!o&&a<n){var l=i[a];if(l.getExpandable()&&r){o=l._oExpandButton.getFocusDomRef();if(o){break}}if(!l.getExpandable()||l.getExpanded()){if(r==true){o=this.findFirstFieldOfNextElement(l,0,true)}else{o=this.findFirstFieldOfNextElement(l,0)}}a++}return o};s.prototype.findFirstFieldOfFirstElementInPrevContainer=function(e,t){var r=e.getFormContainers();var i=r.length;var n;var o=t;while(!n&&o<i&&o>=0){var a=r[o];if(!a.getExpandable()||a.getExpanded()){n=this.findFirstFieldOfNextElement(a,0)}o++}return n};s.prototype.navigateBack=function(e){var t;var r=e.srcControl;var i=0;var n;var o=this.findElement(r);var a=o.element;r=o.rootControl;if(a&&a.isA("sap.ui.layout.form.FormElement")){if(r==a.getLabelControl()){i=0}else{i=a.indexOfField(r)}n=this.findPrevFieldOfElement(a,i-1);if(!n){var l=a.getParent();i=l.indexOfFormElement(a);n=this.findLastFieldOfPrevElement(l,i-1);if(!n){t=l.getParent();i=t.indexOfFormContainer(l);n=this.findLastFieldOfLastElementInPrevContainer(t,i-1)}}}else if(a&&a.isA("sap.ui.layout.form.FormContainer")){t=a.getParent();i=t.indexOfFormContainer(a);n=this.findLastFieldOfLastElementInPrevContainer(t,i-1)}if(n){n.focus();e.preventDefault()}};s.prototype.tabBack=function(e){var t;var r=e.srcControl;var i=0;var n;var o=this.findElement(r);var a=o.element;r=o.rootControl;if(a&&a.isA("sap.ui.layout.form.FormElement")){if(r==a.getLabelControl()){i=0}else{i=a.indexOfField(r)}n=this.findPrevFieldOfElement(a,i-1,true);if(!n){var l=a.getParent();i=l.indexOfFormElement(a);n=this.findLastFieldOfPrevElement(l,i-1,true);if(!n){t=l.getParent();i=t.indexOfFormContainer(l);if(l.getExpandable()){n=l._oExpandButton.getFocusDomRef()}if(!n){n=this.findLastFieldOfLastElementInPrevContainer(t,i-1,true)}}}}else if(a&&a.isA("sap.ui.layout.form.FormContainer")){t=a.getParent();i=t.indexOfFormContainer(a);n=this.findLastFieldOfLastElementInPrevContainer(t,i-1,true)}if(n){n.focus();e.preventDefault()}};s.prototype.findPrevFieldOfElement=function(e,t,r){var i=e.getFieldsForRendering();var n;for(var o=t;o>=0;o--){var a=i[o];var l=this._getDomRef(a);if(r==true){if((!a.getEditable||a.getEditable())&&(!a.getEnabled||a.getEnabled())&&l){n=l;break}}else{if((!a.getEnabled||a.getEnabled())&&l){n=l;break}}}return n};s.prototype.findLastFieldOfPrevElement=function(e,t,r){var i=e.getFormElements();var n;var o=t;while(!n&&o>=0){var a=i[o];var l=a.getFieldsForRendering().length;if(r==true){n=this.findPrevFieldOfElement(a,l-1,true)}else{n=this.findPrevFieldOfElement(a,l-1)}o--}return n};s.prototype.findLastFieldOfLastElementInPrevContainer=function(e,t,r){var i=e.getFormContainers();var n;var o=t;while(!n&&o>=0){var a=i[o];if(a.getExpandable()&&!a.getExpanded()&&r){n=a._oExpandButton.getFocusDomRef();if(n){break}}if(!a.getExpandable()||a.getExpanded()){var l=a.getFormElements().length;if(r==true){n=this.findLastFieldOfPrevElement(a,l-1,true)}else{n=this.findLastFieldOfPrevElement(a,l-1,0)}}o--}return n};s.prototype.findFieldBelow=function(e,t){var r=t.getParent();var i=r.indexOfFormElement(t);var n=this.findFirstFieldOfNextElement(r,i+1);if(!n){var o=r.getParent();i=o.indexOfFormContainer(r);n=this.findFirstFieldOfFirstElementInNextContainer(o,i+1)}return n};s.prototype.findFieldAbove=function(e,t){var r=t.getParent();var i=r.indexOfFormElement(t);var n=r.getFormElements();var o;var a=i-1;while(!o&&a>=0){var l=n[a];o=this.findPrevFieldOfElement(l,0);a--}if(!o){var s=r.getParent();i=s.indexOfFormContainer(r);o=this.findLastFieldOfLastElementInPrevContainer(s,i-1)}return o};s.prototype._getDomRef=function(e){var t=e.getFocusDomRef();if(!jQuery(t).is(":sapFocusable")){t=undefined}return t};s.prototype.getContainerRenderedDomRef=function(e){if(this.getDomRef()){return e.getDomRef()}else{return null}};s.prototype.getElementRenderedDomRef=function(e){if(this.getDomRef()){return e.getDomRef()}else{return null}};s.prototype.getLayoutDataForDelimiter=function(){};s.prototype.getLayoutDataForSemanticField=function(e,t,r){};s.prototype.renderControlsForSemanticElement=function(){return false};s.prototype.loadTitleSizes=function(){var e=a.get({name:["sap.ui.layout.FormLayout:_sap_ui_layout_FormLayout_FormTitleSize","sap.ui.layout.FormLayout:_sap_ui_layout_FormLayout_FormSubTitleSize"],callback:this.applyTitleSizes.bind(this)});if(e&&e.hasOwnProperty("sap.ui.layout.FormLayout:_sap_ui_layout_FormLayout_FormTitleSize")){this.applyTitleSizes(e,true)}};s.prototype.applyTitleSizes=function(e,t){if(e&&(this._sFormTitleSize!==e["sap.ui.layout.FormLayout:_sap_ui_layout_FormLayout_FormTitleSize"]||this._sFormSubTitleSize!==e["sap.ui.layout.FormLayout:_sap_ui_layout_FormLayout_FormSubTitleSize"])){this._sFormTitleSize=e["sap.ui.layout.FormLayout:_sap_ui_layout_FormLayout_FormTitleSize"];this._sFormSubTitleSize=e["sap.ui.layout.FormLayout:_sap_ui_layout_FormLayout_FormSubTitleSize"];if(!t){this.invalidate()}}};s.prototype.hasLabelledContainers=function(e){const t=e.getFormContainers();let r=false;for(let e=0;e<t.length;e++){if(this.isContainerLabelled(t[e])){r=true;break}}return r};s.prototype.isContainerLabelled=function(e){return!!e.getTitle()||!!e.getToolbar()||e.getAriaLabelledBy().length>0||e.getExpandable()};s.prototype.invalidateEditableChange=function(){return false};return s});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/form/FormLayoutRenderer", ["sap/ui/core/library","sap/ui/layout/library","sap/ui/layout/form/Form","./FormHelper","sap/ui/core/IconPool"],function(e,t,i,r,n){"use strict";var o=e.TitleLevel;var a=t.BackgroundDesign;var s={apiVersion:2};s.render=function(e,t){var r=t.getParent();if(r&&r instanceof i){this.renderForm(e,t,r)}};s.renderForm=function(e,t,i){var r=i.getToolbar();e.openStart("div",t);e.class(this.getMainClass());if(r){e.class("sapUiFormToolbar")}this.addBackgroundClass(e,t);e.openEnd();this.renderHeader(e,r,i.getTitle(),undefined,false,t._sFormTitleSize,i.getId());this.renderContainers(e,t,i);e.close("div")};s.getMainClass=function(){return"sapUiFormLayout"};s.addBackgroundClass=function(e,t){var i=t.getBackgroundDesign();if(i!=a.Transparent){e.class("sapUiFormBackgr"+i)}};s.renderContainers=function(e,t,i){var r=i.getVisibleFormContainers();for(var n=0,o=r.length;n<o;n++){var a=r[n];this.renderContainer(e,t,a)}};s.renderContainer=function(e,t,i){var r=i.getExpandable();var n=i.getToolbar();var o=i.getTitle();e.openStart("div",i);e.class("sapUiFormContainer");if(n){e.class("sapUiFormContainerToolbar")}else if(o){e.class("sapUiFormContainerTitle")}if(i.getTooltip_AsString()){e.attr("title",i.getTooltip_AsString())}this.writeAccessibilityStateContainer(e,i,t.isContainerLabelled(i)?"form":"");e.openEnd();this.renderHeader(e,n,o,i._oExpandButton,r,t._sFormSubTitleSize,i.getId());if(r){e.openStart("div",i.getId()+"-content");if(!i.getExpanded()){e.style("display","none")}e.openEnd()}var a=i.getVisibleFormElements();for(var s=0,l=a.length;s<l;s++){var d=a[s];if(d.isA("sap.ui.layout.form.SemanticFormElement")&&!d._getEditable()){this.renderSemanticElement(e,t,d)}else{this.renderElement(e,t,d)}}if(r){e.close("div")}e.close("section")};s.renderElement=function(e,t,i){var r=i.getLabelControl();e.openStart("div",i);e.class("sapUiFormElement");if(r){e.class("sapUiFormElementLbl")}e.openEnd();if(r){e.renderControl(r)}var n=i.getFieldsForRendering();if(n&&n.length>0){for(var o=0,a=n.length;o<a;o++){var s=n[o];e.renderControl(s)}}e.close("div")};s.renderSemanticElement=function(e,t,i){this.renderElement(e,t,i)};s.renderTitle=function(e,t,i,r,n,a){if(t){if(typeof t!=="string"&&t.getLevel()!=o.Auto){n=t.getLevel()}if(!n){n="H5"}const c=r&&i;if(c){e.openStart("div",a+"--head");e.class("sapUiFormTitle");e.class("sapUiFormTitleExpandable");e.openEnd();e.renderControl(i)}if(typeof t!=="string"){e.openStart(n.toLowerCase(),t);if(t.getTooltip_AsString()){e.attr("title",t.getTooltip_AsString())}if(t.getEmphasized()){e.class("sapUiFormTitleEmph")}}else{e.openStart(n.toLowerCase(),a+"--title")}if(!c){e.class("sapUiFormTitle")}e.class("sapUiFormTitle"+n);e.openEnd();if(typeof t==="string"){t.split(/\n/).forEach(function(t,i){if(i>0){e.voidStart("br").voidEnd()}e.text(t)})}else{var s=t.getIcon();if(s){var l=[];var d={title:null};d["id"]=t.getId()+"-ico";e.icon(s,l,d)}t.getText().split(/\n/).forEach(function(t,i){if(i>0){e.voidStart("br").voidEnd()}e.text(t)})}e.close(n.toLowerCase());if(c){e.close("div")}}};s.renderHeader=function(e,t,i,r,n,o,a){if(t){e.renderControl(t)}else{this.renderTitle(e,i,r,n,o,a)}};s.writeAccessibilityStateContainer=function(e,t,i){const r={};const n=this.getTitleId(t);if(n){r["labelledby"]={value:n,append:true}}if(i){r["role"]=i}e.accessibilityState(t,r)};s.getTitleId=function(e){const t=e.getTitle();const i=e.getToolbar();let n="";if(i){if(!e.getAriaLabelledBy()||e.getAriaLabelledBy().length==0){n=r.getToolbarTitle(i)}}else if(t){if(typeof t=="string"){n=e.getId()+"--title"}else{n=t.getId()}}return n};return s},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/form/FormRenderer", ["./FormHelper","sap/base/Log"],function(e,t){"use strict";var s={apiVersion:2};s.render=function(s,i){const r=i.getLayout();const a={role:r&&r.hasLabelledContainers(i)?"region":"form"};s.openStart("div",i).class("sapUiForm").class("sapUiFormLblColon").attr("data-sap-ui-customfastnavgroup","true");var o=e.addFormClass();if(o){s.class(o)}if(i.getEditable()){s.class("sapUiFormEdit");s.class("sapUiFormEdit-CTX")}else{a.readonly=""}if(i.getWidth()){s.style("width",i.getWidth())}if(i.getTooltip_AsString()){s.attr("title",i.getTooltip_AsString())}const n=r?.getRenderer().getTitleId(i)||i._sSuggestedTitleId;if(n){a["labelledby"]={value:n,append:true}}s.accessibilityState(i,a);s.openEnd();if(r){s.renderControl(r)}else{t.warning('Form "'+i.getId()+'" - Layout missing!',"Renderer","Form")}s.close("div")};return s},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/form/ResponsiveGridLayout", ["sap/ui/core/Control","sap/ui/core/Element","sap/ui/core/ResizeHandler","sap/ui/layout/library","sap/ui/layout/Grid","sap/ui/layout/GridData","./Form","./FormContainer","./FormElement","./FormLayout","./ResponsiveGridLayoutRenderer","sap/ui/thirdparty/jquery"],function(e,t,a,i,n,r,s,o,l,f,u,jQuery){"use strict";var d=f.extend("sap.ui.layout.form.ResponsiveGridLayout",{metadata:{library:"sap.ui.layout",properties:{labelSpanXL:{type:"int",group:"Misc",defaultValue:-1},labelSpanL:{type:"int",group:"Misc",defaultValue:4},labelSpanM:{type:"int",group:"Misc",defaultValue:2},labelSpanS:{type:"int",group:"Misc",defaultValue:12},adjustLabelSpan:{type:"boolean",group:"Misc",defaultValue:true},emptySpanXL:{type:"int",group:"Misc",defaultValue:-1},emptySpanL:{type:"int",group:"Misc",defaultValue:0},emptySpanM:{type:"int",group:"Misc",defaultValue:0},emptySpanS:{type:"int",group:"Misc",defaultValue:0},columnsXL:{type:"int",group:"Misc",defaultValue:-1},columnsL:{type:"int",group:"Misc",defaultValue:2},columnsM:{type:"int",group:"Misc",defaultValue:1},singleContainerFullSize:{type:"boolean",group:"Misc",defaultValue:true},breakpointXL:{type:"int",group:"Misc",defaultValue:1440},breakpointL:{type:"int",group:"Misc",defaultValue:1024},breakpointM:{type:"int",group:"Misc",defaultValue:600}}},renderer:u});var p=e.extend("sap.ui.layout.form.ResponsiveGridLayoutPanel",{metadata:{library:"sap.ui.layout",aggregations:{content:{type:"sap.ui.layout.Grid",multiple:false}},associations:{container:{type:"sap.ui.layout.form.FormContainer",multiple:false},layout:{type:"sap.ui.layout.form.ResponsiveGridLayout",multiple:false}}},getLayoutData:function(){var e=t.getElementById(this.getContainer());var a=t.getElementById(this.getLayout());var i;if(a&&e){i=a.getLayoutDataForElement(e,"sap.ui.layout.GridData")}if(i){return i}else{return this.getAggregation("layoutData")}},getCustomData:function(){var e=t.getElementById(this.getContainer());if(e){return e.getCustomData()}},refreshExpanded:function(){var e=t.getElementById(this.getContainer());if(e){if(e.getExpanded()){this.$().removeClass("sapUiRGLContainerColl")}else{this.$().addClass("sapUiRGLContainerColl")}}},renderer:{apiVersion:2,render:function(e,a){var i=t.getElementById(a.getContainer());var n=t.getElementById(a.getLayout());var r=a.getContent();var s=i.getExpandable();var o=i.getTooltip_AsString();var l=i.getToolbar();var f=i.getTitle();e.openStart("div",a);e.class("sapUiRGLContainer");if(s&&!i.getExpanded()){e.class("sapUiRGLContainerColl")}if(l){e.class("sapUiFormContainerToolbar")}else if(f){e.class("sapUiFormContainerTitle")}if(o){e.attr("title",o)}n.getRenderer().writeAccessibilityStateContainer(e,i,"form");e.openEnd();n.getRenderer().renderHeader(e,l,f,i._oExpandButton,s,n._sFormSubTitleSize,i.getId());if(r){e.openStart("div");e.class("sapUiRGLContainerCont");e.openEnd();e.renderControl(r);e.close("div")}e.close("div")}}});d.prototype.init=function(){f.prototype.init.apply(this,arguments);this.mContainers={};this.oDummyLayoutData=new r(this.getId()+"--Dummy")};d.prototype.exit=function(){for(var e in this.mContainers){_.call(this,e,true)}if(this._mainGrid){this._mainGrid.destroy();delete this._mainGrid}this.oDummyLayoutData.destroy();this.oDummyLayoutData=undefined};d.prototype.onBeforeRendering=function(e){f.prototype.onBeforeRendering.apply(this,arguments);var t=this.getParent();if(!t||!(t instanceof s)){return}t._bNoInvalidate=true;g.call(this,t);c.call(this,t);t._bNoInvalidate=false};d.prototype.onAfterRendering=function(e){if(this._mainGrid&&this._mainGrid.__bIsUsed){for(var t in this.mContainers){if(this.mContainers[t][1]._sContainerResizeListener){a.deregister(this.mContainers[t][1]._sContainerResizeListener);this.mContainers[t][1]._sContainerResizeListener=null}}}};d.prototype.toggleContainerExpanded=function(e){var t=e.getId();if(this.mContainers[t]&&this.mContainers[t][0]){var a=this.mContainers[t][0];a.refreshExpanded()}};d.prototype.onLayoutDataChange=function(e){var t=e.srcControl;if(t instanceof o){if(this._mainGrid){this._mainGrid.onLayoutDataChange(e);this.invalidate()}}else if(!(t instanceof l)){var a=t.getParent();if(a instanceof l){var i=a.getParent();var n=i.getId();if(this.mContainers[n]&&this.mContainers[n][1]){this.mContainers[n][1].onLayoutDataChange(e)}}}};d.prototype.onsapup=function(e){this.onsapleft(e)};d.prototype.onsapdown=function(e){this.onsapright(e)};d.prototype.getContainerRenderedDomRef=function(e){if(this.getDomRef()){var t=e.getId();if(this.mContainers[t]){if(this.mContainers[t][0]){var a=this.mContainers[t][0];return a.getDomRef()}else if(this.mContainers[t][1]){var i=this.mContainers[t][1];return i.getDomRef()}}}return null};d.prototype.getElementRenderedDomRef=function(e){return null};function g(e){var t=e.getVisibleFormContainers();var a=t.length;var i=0;var n;var r;var s;var o;var l=0;for(l=0;l<a;l++){s=t[l];s._checkProperties();if(s.isVisible()){i++;o=s.getId();n=undefined;r=undefined;var f=t[l+1];if(this.mContainers[o]&&this.mContainers[o][1]){r=this.mContainers[o][1]}else{r=h.call(this,s)}var u=s.getTitle();var d=s.getToolbar();if(d||u||s.getExpandable()){if(this.mContainers[o]&&this.mContainers[o][0]){n=this.mContainers[o][0]}else{n=m.call(this,s,r);v(r,true)}C(n,s,i,f,a)}else{if(this.mContainers[o]&&this.mContainers[o][0]){y(this.mContainers[o][0])}v(r,false);C(r,s,i,f,a)}this.mContainers[o]=[n,r]}}var p=Object.keys(this.mContainers).length;if(a<p){for(o in this.mContainers){var g=false;for(l=0;l<a;l++){s=t[l];if(o==s.getId()){g=true;break}}if(!g){_.call(this,o)}}}}function m(e,t){var a=e.getId();var i=new p(a+"---Panel",{container:e,layout:this,content:t});return i}function y(e,t){e.setLayout(null);e.setContainer(null);if(!t||!e.getParent()){e.setContent(null);e.destroy()}}function h(e){var a=e.getId()+"--Grid";var i=new n(a,{vSpacing:0,hSpacing:0,containerQuery:true});i.__myParentLayout=this;i.__myParentContainerId=e.getId();i.addStyleClass("sapUiFormResGridCont").addStyleClass("sapUiRespGridOverflowHidden");i.getContent=function(){var e=t.getElementById(this.__myParentContainerId);if(e){var a=[];var i=e.getVisibleFormElements();var n;var r;for(var s=0;s<i.length;s++){var o=i[s];r=o.getLabelControl();if(r){a.push(r)}n=o.getFieldsForRendering();for(var l=0;l<n.length;l++){a.push(n[l])}}return a}else{return false}};i.getAriaLabelledBy=function(){var e=t.getElementById(this.__myParentContainerId);if(e&&!e.getToolbar()&&!e.getTitle()&&!e.getExpandable()){return e.getAriaLabelledBy()}return[]};var r={labelSpan:0,span:0,firstField:false,defaultFields:0,row:0,myRow:false,freeFields:0,finished:false};var s={id:"XL",getEffectiveSpan:function(e){var t=e._getEffectiveSpanXLarge();if(!t){t=e._getEffectiveSpanLarge()}return t},getEmptySpan:function(e){var t=e.getEmptySpanXL();if(t<0){t=e.getEmptySpanL()}return t},getLabelSpan:function(e){return e.getLabelSpanXL()},setIndent:function(e,t){e.setIndentXL(t)},setLinebreak:function(e,t){e.setLinebreakXL(t)}};jQuery.extend(s,r);var o={id:"L",getEffectiveSpan:function(e){return e._getEffectiveSpanLarge()},getEmptySpan:function(e){return e.getEmptySpanL()},getLabelSpan:function(e){return e.getLabelSpanL()},setIndent:function(e,t){e.setIndentL(t)},setLinebreak:function(e,t){e.setLinebreakL(t)}};jQuery.extend(o,r);var l={id:"M",getEffectiveSpan:function(e){return e._getEffectiveSpanMedium()},getEmptySpan:function(e){return e.getEmptySpanM()},getLabelSpan:function(e){return e.getLabelSpanM()},setIndent:function(e,t){e.setIndentM(t)},setLinebreak:function(e,t){e.setLinebreakM(t)}};jQuery.extend(l,r);var f={id:"S",getEffectiveSpan:function(e){return e._getEffectiveSpanSmall()},getEmptySpan:function(e){return e.getEmptySpanS()},getLabelSpan:function(e){return e.getLabelSpanS()},setIndent:function(e,t){e.setIndentS(t)},setLinebreak:function(e,t){e.setLinebreakS(t)}};jQuery.extend(f,r);var u=[s,o,l,f];i._getLayoutDataForControl=function(e){var a=this.__myParentLayout;var i=a.getLayoutDataForElement(e,"sap.ui.layout.GridData");var n=e.getParent();var d=n.getLabelControl();if(i){if(d==e){i._setStylesInternal("sapUiFormElementLbl")}return i}else{var p=t.getElementById(this.__myParentContainerId);var g=a.getLayoutDataForElement(p,"sap.ui.layout.GridData");var m=p.getParent();var y;var h=0;for(h=0;h<u.length;h++){y=u[h];jQuery.extend(y,r);y.labelSpan=y.getLabelSpan(a)}if(a.getAdjustLabelSpan()){if(m.getVisibleFormContainers().length>=1&&a.getColumnsM()>1){l.labelSpan=a.getLabelSpanL()}if(g){if(g._getEffectiveSpanLarge()==12){o.labelSpan=a.getLabelSpanM();l.labelSpan=a.getLabelSpanM()}}if(m.getVisibleFormContainers().length==1||a.getColumnsL()==1){o.labelSpan=a.getLabelSpanM();l.labelSpan=a.getLabelSpanM()}}if(s.labelSpan<0){s.labelSpan=o.labelSpan}if(d==e){a.oDummyLayoutData.setSpan("XL"+s.labelSpan+" L"+o.labelSpan+" M"+l.labelSpan+" S"+f.labelSpan);a.oDummyLayoutData.setLinebreak(true);a.oDummyLayoutData.setIndentXL(0).setIndentL(0).setIndentM(0).setIndentS(0);a.oDummyLayoutData._setStylesInternal("sapUiFormElementLbl");return a.oDummyLayoutData}else{var L;if(d){L=a.getLayoutDataForElement(d,"sap.ui.layout.GridData")}var v=n.getFieldsForRendering();var C=v.length;var _;var c;var b=1;var S=false;var D;var F=0;for(h=0;h<u.length;h++){y=u[h];y.span=12-y.getEmptySpan(a);if(d){if(L){D=y.getEffectiveSpan(L);if(D){y.labelSpan=D}}if(y.labelSpan<12){y.span=y.span-y.labelSpan}}y.spanFields=y.span}for(F=0;F<C;F++){_=v[F];if(_!=e){c=a.getLayoutDataForElement(_,"sap.ui.layout.GridData");if(c){for(h=0;h<u.length;h++){y=u[h];D=y.getEffectiveSpan(c);if(D&&D<y.span){y.span=y.span-D}}}else{b++}}else{if(b==1){S=true}}}var G=[];for(h=0;h<u.length;h++){y=u[h];y.firstField=S;y.defaultFields=b;if(y.span<b){y.defaultFields=0;y.row=0;y.myRow=false;y.freeFields=y.spanFields;y.span=y.spanFields;y.finished=false;G.push(y)}}if(G.length>0){for(F=0;F<C;F++){_=v[F];c=undefined;if(_!=e){c=a.getLayoutDataForElement(_,"sap.ui.layout.GridData")}for(h=0;h<G.length;h++){y=G[h];if(y.finished){continue}if(c){D=y.getEffectiveSpan(c);y.span=y.span-D}else{D=1}if(y.freeFields>=D){y.freeFields=y.freeFields-D;if(!c){y.defaultFields++}}else{if(y.myRow){y.finished=true}else{y.freeFields=y.spanFields-D;y.row++;if(c){y.defaultFields=0;y.span=y.spanFields-D}else{y.defaultFields=1;y.span=y.spanFields}if(_==e){y.firstField=true}}}if(_==e){y.myRow=true}}}}var I=0;var R="";var E;for(h=0;h<u.length;h++){y=u[h];if(y.id!="S"||y.labelSpan<12){if(y.firstField){I=y.span-Math.floor(y.span/y.defaultFields)*y.defaultFields;E=Math.floor(y.span/y.defaultFields)+I}else{E=Math.floor(y.span/y.defaultFields)}}else{E=12}if(R){R=R+" "}R=R+y.id+E;y.setLinebreak(a.oDummyLayoutData,y.firstField&&y.row>0);y.setIndent(a.oDummyLayoutData,y.firstField&&y.row>0?y.labelSpan:0)}a.oDummyLayoutData.setSpan(R);a.oDummyLayoutData.setLinebreak(S&&!d);a.oDummyLayoutData._setStylesInternal(undefined);return a.oDummyLayoutData}}};i._onParentResizeOrig=i._onParentResize;i._onParentResize=function(){if(!this.getDomRef()){this._cleanup();return}if(!jQuery(this.getDomRef()).is(":visible")){return}var e=this.__myParentLayout;if(!e._mainGrid||!e._mainGrid.__bIsUsed){var t=e.getParent().getVisibleFormContainers()[0];if(!t||!e.mContainers[t.getId()]||t.getId()!=this.__myParentContainerId){return}if(e.mContainers[this.__myParentContainerId][0]){var a=e.mContainers[this.__myParentContainerId][0].getDomRef();var i=a.clientWidth;if(i<=e.getBreakpointM()){this._toggleClass("Phone")}else if(i>e.getBreakpointM()&&i<=e.getBreakpointL()){this._toggleClass("Tablet")}else if(i>e.getBreakpointL()&&i<=e.getBreakpointXL()){this._toggleClass("Desktop")}else{this._toggleClass("LargeDesktop")}}else{this._setBreakPointTablet(e.getBreakpointM());this._setBreakPointDesktop(e.getBreakpointL());this._setBreakPointLargeDesktop(e.getBreakpointXL());this._onParentResizeOrig()}}else{var n=e._mainGrid.$();if(n.hasClass("sapUiRespGridMedia-Std-Phone")){this._toggleClass("Phone")}else if(n.hasClass("sapUiRespGridMedia-Std-Tablet")){this._toggleClass("Tablet")}else if(n.hasClass("sapUiRespGridMedia-Std-Desktop")){this._toggleClass("Desktop")}else{this._toggleClass("LargeDesktop")}}};i._getAccessibleRole=function(){var e=t.getElementById(this.__myParentContainerId);var a=this.__myParentLayout;if(a._mainGrid&&a._mainGrid.__bIsUsed&&!e.getToolbar()&&!e.getTitle()&&!e.getExpandable()&&e.getAriaLabelledBy().length>0){return"form"}};i.getUIArea=function(){var e=this.__myParentLayout;if(e){return e.getUIArea()}else{return null}};return i}function L(e,t){if(e.__myParentContainerId){e.__myParentContainerId=undefined}e.__myParentLayout=undefined;if(!t||!e.getParent()){e.destroy()}}function v(e,a){if(a){if(e.__originalGetLayoutData){e.getLayoutData=e.__originalGetLayoutData;delete e.__originalGetLayoutData}}else if(!e.__originalGetLayoutData){e.__originalGetLayoutData=e.getLayoutData;e.getLayoutData=function(){var e=this.__myParentLayout;var a=t.getElementById(this.__myParentContainerId);var i;if(a){i=e.getLayoutDataForElement(a,"sap.ui.layout.GridData")}if(i){return i}else{return this.getAggregation("layoutData")}}}}function C(e,a,i,n,s){var o;if(e instanceof p){o=t.getElementById(e.getLayout())}else{o=e.__myParentLayout}var l=o.getLayoutDataForElement(a,"sap.ui.layout.GridData");if(!l){var f=o.getColumnsM();var u=o.getColumnsL();var d=o.getColumnsXL();var g=i%u==1;var m=i%u==0;var y=i>u*(Math.ceil(s/u)-1);var h=i<=u;var L=i%f==1;var v=i%f==0;var C=i>f*(Math.ceil(s/f)-1);var _=i<=f;var c=false;var b=m;var S=y;var D=h;if(d>0){c=i%d==1;b=i%d==0;S=i>d*(Math.ceil(s/d)-1);D=i<=d}if(n){var F=o.getLayoutDataForElement(n,"sap.ui.layout.GridData");if(F&&(F.getLinebreak()||F.getLinebreakXL())){b=true;S=false}if(F&&(F.getLinebreak()||F.getLinebreakL())){m=true;y=false}if(F&&(F.getLinebreak()||F.getLinebreakM())){v=true;C=false}}var G="";if(b){G="sapUiFormResGridLastContXL"}if(m){if(G){G=G+" "}G=G+"sapUiFormResGridLastContL"}if(v){if(G){G=G+" "}G=G+"sapUiFormResGridLastContM"}if(S){if(G){G=G+" "}G=G+"sapUiFormResGridLastRowXL"}if(y){if(G){G=G+" "}G=G+"sapUiFormResGridLastRowL"}if(C){if(G){G=G+" "}G=G+"sapUiFormResGridLastRowM"}if(D){if(G){G=G+" "}G=G+"sapUiFormResGridFirstRowXL"}if(h){if(G){G=G+" "}G=G+"sapUiFormResGridFirstRowL"}if(_){if(G){G=G+" "}G=G+"sapUiFormResGridFirstRowM"}l=e.getLayoutData();if(!l){l=new r(e.getId()+"--LD",{linebreakL:g,linebreakM:L});e.setLayoutData(l)}else{l.setLinebreakL(g);l.setLinebreakM(L)}if(d>0){l.setLinebreakXL(c)}l._setStylesInternal(G)}}function _(e,t){var a=this.mContainers[e];var i=a[1];if(i){L(i,t)}var n=a[0];if(n){y(n,t)}delete this.mContainers[e]}function c(e){var a=e.getVisibleFormContainers();var i;var r;var s=a.length;var o=0;var l=0;var f=0;if(s>1||!this.getSingleContainerFullSize()){var u=Math.floor(12/this.getColumnsM());var d=Math.floor(12/this.getColumnsL());var p;var g="";var m=this.getColumnsXL();if(m>=0){p=Math.floor(12/m);g=g+"XL"+p+" "}g=g+"L"+d+" M"+u+" S12";if(!this._mainGrid){this._mainGrid=new n(e.getId()+"--Grid",{defaultSpan:g,hSpacing:0,vSpacing:0,containerQuery:true}).setParent(this);this._mainGrid.addStyleClass("sapUiFormResGridMain").addStyleClass("sapUiRespGridOverflowHidden");this._mainGrid._onParentResizeOrig=this._mainGrid._onParentResize;this._mainGrid._onParentResize=function(){this._onParentResizeOrig();var e=this.getParent();for(var t in e.mContainers){e.mContainers[t][1]._onParentResize()}}}else{this._mainGrid.setDefaultSpan(g);var y=this._mainGrid.getContent();o=y.length;var h=false;for(l=0;l<o;l++){var L=y[l];i=undefined;if(L.getContainer){i=t.getElementById(L.getContainer())}else{i=t.getElementById(L.__myParentContainerId)}if(i&&i.isVisible()){var v=a[f];if(i!=v){h=true;break}var C=this.mContainers[i.getId()];if(C[0]&&C[0]!=L){h=true;break}if(!C[0]&&C[1]&&C[1]!=L){h=true;break}f++}else{this._mainGrid.removeContent(L)}}if(h){this._mainGrid.removeAllContent();o=0}}this._mainGrid._setBreakPointTablet(this.getBreakpointM());this._mainGrid._setBreakPointDesktop(this.getBreakpointL());this._mainGrid._setBreakPointLargeDesktop(this.getBreakpointXL());this._mainGrid.__bIsUsed=true;if(o<s){var _=0;if(o>0){_=o--}for(l=_;l<s;l++){i=a[l];r=i.getId();if(this.mContainers[r]){if(this.mContainers[r][0]){this._mainGrid.addContent(this.mContainers[r][0])}else if(this.mContainers[r][1]){this._mainGrid.addContent(this.mContainers[r][1])}}}}}else{if(this._mainGrid){this._mainGrid.__bIsUsed=false}for(l=0;l<s;l++){i=a[l];r=i.getId();if(this.mContainers[r]){if(this.mContainers[r][0]){if(this.mContainers[r][0].getParent()!==this){this.addDependent(this.mContainers[r][0])}}else if(this.mContainers[r][1]){if(this.mContainers[r][1].getParent()!==this){this.addDependent(this.mContainers[r][1])}}}}}}d.prototype.getLayoutDataForDelimiter=function(){return new r({spanS:1,spanM:1,spanL:1,spanXL:1})};d.prototype.getLayoutDataForSemanticField=function(e,t,a){var i=8-(e-1);i=Math.floor(i/e);if(e===t){i=i+8-(e-1+e*i)}if(a){if(a.isA("sap.ui.layout.GridData")){a.setSpanS(11).setSpanM(i).setSpanL(i).setSpanXL(i);return a}else{a.destroy()}}return new r({spanS:11,spanM:i,spanL:i,spanXL:i})};return d});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/form/ResponsiveGridLayoutRenderer", ["sap/ui/core/Renderer","./FormLayoutRenderer"],function(e,r){"use strict";var n=e.extend(r);n.apiVersion=2;n.getMainClass=function(){return"sapUiFormResGrid"};n.renderContainers=function(e,r,n){var i=n.getVisibleFormContainers();var t=i.length;if(t>0){if(t>1||!r.getSingleContainerFullSize()){e.renderControl(r._mainGrid)}else if(r.mContainers[i[0].getId()][0]){e.renderControl(r.mContainers[i[0].getId()][0])}else{e.renderControl(r.mContainers[i[0].getId()][1])}}};return n},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/form/SimpleForm", ["sap/ui/core/Control","sap/ui/base/ManagedObjectObserver","sap/ui/core/Element","sap/ui/layout/library","./Form","./FormContainer","./FormElement","./FormLayout","./SimpleFormRenderer","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,a,i,s,r,n,o,l,u,jQuery){"use strict";var h=i.BackgroundDesign;var g=i.form.SimpleFormLayout;var f;var d;var y;var p;var m;var v;var c;var L;var b=e.extend("sap.ui.layout.form.SimpleForm",{metadata:{library:"sap.ui.layout",properties:{maxContainerCols:{type:"int",group:"Appearance",defaultValue:2},minWidth:{type:"int",group:"Appearance",defaultValue:-1},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},editable:{type:"boolean",group:"Misc",defaultValue:false},labelMinWidth:{type:"int",group:"Misc",defaultValue:192},layout:{type:"sap.ui.layout.form.SimpleFormLayout",group:"Misc",defaultValue:g.ResponsiveGridLayout},labelSpanXL:{type:"int",group:"Misc",defaultValue:-1},labelSpanL:{type:"int",group:"Misc",defaultValue:4},labelSpanM:{type:"int",group:"Misc",defaultValue:2},labelSpanS:{type:"int",group:"Misc",defaultValue:12},adjustLabelSpan:{type:"boolean",group:"Misc",defaultValue:true},emptySpanXL:{type:"int",group:"Misc",defaultValue:-1},emptySpanL:{type:"int",group:"Misc",defaultValue:0},emptySpanM:{type:"int",group:"Misc",defaultValue:0},emptySpanS:{type:"int",group:"Misc",defaultValue:0},columnsXL:{type:"int",group:"Misc",defaultValue:-1},columnsL:{type:"int",group:"Misc",defaultValue:2},columnsM:{type:"int",group:"Misc",defaultValue:1},singleContainerFullSize:{type:"boolean",group:"Misc",defaultValue:true},breakpointXL:{type:"int",group:"Misc",defaultValue:1440},breakpointL:{type:"int",group:"Misc",defaultValue:1024},breakpointM:{type:"int",group:"Misc",defaultValue:600},backgroundDesign:{type:"sap.ui.layout.BackgroundDesign",group:"Appearance",defaultValue:h.Translucent}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Element",multiple:true,singularName:"content"},form:{type:"sap.ui.layout.form.Form",multiple:false,visibility:"hidden"},title:{type:"sap.ui.core.Title",altTypes:["string"],multiple:false},toolbar:{type:"sap.ui.core.Toolbar",multiple:false,forwarding:{idSuffix:"--Form",aggregation:"toolbar"}}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},designtime:"sap/ui/layout/designtime/form/SimpleForm.designtime"},renderer:l});b.prototype.init=function(){this._iMaxWeight=8;this._iLabelWeight=3;this._iCurrentWidth=0;var e=new s(this.getId()+"--Form");e.getTitle=function(){return this.getParent().getTitle()};e._origInvalidate=e.invalidate;e.invalidate=function(e){if(this.bOutput){this._origInvalidate(e)}if(this._bIsBeingDestroyed){return}var t=this.getParent();if(t){t._formInvalidated(e)}};e.getAriaLabelledBy=function(){var e=this.getParent();if(e){return e.getAriaLabelledBy()}else{return null}};e._origOnLayoutDataChange=e.onLayoutDataChange;e.onLayoutDataChange=function(e){this._origOnLayoutDataChange(e);var t=this.getParent();if(t){t._onLayoutDataChange(e)}};this.setAggregation("form",e);this._aElements=null;this._aLayouts=[];this._changedFormContainers=[];this._changedFormElements=[];this._oObserver=new t(N.bind(this))};b.prototype.exit=function(){var e=this.getAggregation("form");e.invalidate=e._origInvalidate;j.call(this);for(var t=0;t<this._aLayouts.length;t++){var i=a.getElementById(this._aLayouts[t]);if(i&&i.destroy){i.destroy()}}this._aLayouts=[];this._aElements=null;this._changedFormContainers=[];this._changedFormElements=[];this._oObserver.disconnect();this._oObserver=undefined};b.prototype.onBeforeRendering=function(){j.call(this);var e=this.getAggregation("form");var t=this.getLayout();if(!this._bResponsiveLayoutRequested&&t===g.ResponsiveLayout||!this._bGridLayoutRequested&&t===g.GridLayout||!this._bResponsiveGridLayoutRequested&&t===g.ResponsiveGridLayout||!this._bColumnLayoutRequested&&t===g.ColumnLayout){var a=true;if(!e.getLayout()){a=_.call(this)}if(a){A.call(this)}}};b.prototype.onAfterRendering=function(){if(this.getLayout()==g.ResponsiveLayout){this._bChangedByMe=true;this.$().css("visibility","hidden");this._applyLinebreaks();if(!this._bResponsiveLayoutRequested&&L){this._sResizeListenerId=L.register(this.getDomRef(),jQuery.proxy(this._resize,this))}this._bChangedByMe=false}};b.prototype.setEditable=function(e){this._bChangedByMe=true;this.setProperty("editable",e,true);var t=this.getAggregation("form");t.setEditable(e);this._bChangedByMe=false;return this};b.prototype.setToolbar=function(e){this._bChangedByMe=true;this.setAggregation("toolbar",e);this._bChangedByMe=false;return this};b.prototype.destroyToolbar=function(){this._bChangedByMe=true;this.destroyAggregation("toolbar");this._bChangedByMe=false;return this};b.prototype.setLabelMinWidth=function(e){this.setProperty("labelMinWidth",e,true);if(this.getLayout()==g.ResponsiveLayout){this._bLayoutDataChangedByMe=true;var t=this.getContent();for(var a=0;a<t.length;a++){var i=t[a];if(i.isA("sap.ui.core.Label")){var s=w.call(this,i);if(s&&s.isA("sap.ui.layout.ResponsiveFlowLayoutData")&&S.call(this,s)){s.setMinWidth(e)}}}this._bLayoutDataChangedByMe=false}return this};b.prototype.indexOfContent=function(e){var t=this._aElements;if(t){for(var a=0;a<t.length;a++){if(t[a]==e){return a}}}return-1};b.prototype.addContent=function(e){e=this.validateAggregation("content",e,true);if(this.indexOfContent(e)>=0){u.warning("SimpleForm.addContent: Content element '"+e+"' already assigned. Please remove before adding!",this);this.removeContent(e)}if(!this._aElements){this._aElements=[]}this._bChangedByMe=true;var t=this._aElements.length;var a;var i=this.getAggregation("form");var s;var o;var l;var h;var f=this.getLayout();if(e.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){s=W.call(this,e);i.addFormContainer(s);this._changedFormContainers.push(s)}else if(e.isA("sap.ui.core.Label")){if(t>0){a=this._aElements[t-1];l=a.getParent();if(l instanceof n){s=l.getParent()}else if(l instanceof r){s=l}}if(!s){s=W.call(this);i.addFormContainer(s);this._changedFormContainers.push(s)}o=O.call(this,s,e)}else{if(t>0){a=this._aElements[t-1];l=a.getParent();if(l instanceof n){s=l.getParent();o=l;h=w.call(this,e);if(h&&h.isA("sap.ui.layout.ResponsiveFlowLayoutData")&&f===g.ResponsiveLayout&&!S.call(this,h)&&h.getLinebreak()){o=O.call(this,s)}}else if(l instanceof r){s=l;o=O.call(this,s)}}else{s=W.call(this);i.addFormContainer(s);this._changedFormContainers.push(s);o=O.call(this,s)}T.call(this,e,5,false,true);o.addField(e);H(this._changedFormElements,o)}this._aElements.push(e);this._oObserver.observe(e,{properties:["visible"]});this.invalidate();this._bChangedByMe=false;return this};b.prototype.insertContent=function(e,t){e=this.validateAggregation("content",e,true);if(this.indexOfContent(e)>=0){u.warning("SimpleForm.insertContent: Content element '"+e+"' already assigned. Please remove before insert!",this);this.removeContent(e)}if(!this._aElements){this._aElements=[]}var a=this._aElements.length;var i;if(t<0){i=0}else if(t>a){i=a}else{i=t}if(i!==t){u.warning("SimpleForm.insertContent: index '"+t+"' out of range [0,"+a+"], forced to "+i)}if(i==a){this.addContent(e);return this}this._bChangedByMe=true;var s=this._aElements[i];var r=this.getAggregation("form");var n;var o;var l;var h;var f;var d=0;var y;var p;var m;var v;var c=0;var L;var b;var _=this.getLayout();if(e.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){n=W.call(this,e);if(t==0&&!s.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){l=s.getParent().getParent();m=l.getFormElements();for(c=0;c<m.length;c++){n.addFormElement(m[c])}l.destroy();f=0}else if(s.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){l=s.getParent();f=r.indexOfFormContainer(l)}else{h=s.getParent();l=h.getParent();f=r.indexOfFormContainer(l)+1;d=l.indexOfFormElement(h);if(!s.isA("sap.ui.core.Label")){y=h.indexOfField(s);if(y>0||h.getLabel()){o=O.call(this,n);this._changedFormElements.push(o);H(this._changedFormElements,h);p=h.getFields();for(c=y;c<p.length;c++){L=p[c];o.addField(L)}d++}}m=l.getFormElements();for(c=d;c<m.length;c++){n.addFormElement(m[c])}}r.insertFormContainer(n,f);this._changedFormContainers.push(n)}else if(e.isA("sap.ui.core.Label")){if(s.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){l=s.getParent();f=r.indexOfFormContainer(l);v=r.getFormContainers();if(f==0){n=W.call(this);r.insertFormContainer(n,f);this._changedFormContainers.push(n)}else{n=v[f-1]}o=O.call(this,n,e)}else if(s.isA("sap.ui.core.Label")){l=s.getParent().getParent();d=l.indexOfFormElement(s.getParent());o=x.call(this,l,e,d)}else{h=s.getParent();l=h.getParent();d=l.indexOfFormElement(h)+1;y=h.indexOfField(s);p=h.getFields();o=x.call(this,l,e,d);for(c=y;c<p.length;c++){L=p[c];o.addField(L)}if(y==0&&!h.getLabel()){h.destroy()}else{H(this._changedFormElements,h)}}this._changedFormElements.push(o)}else{b=w.call(this,e);if(s.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){l=s.getParent();f=r.indexOfFormContainer(l);if(f==0){n=W.call(this);r.insertFormContainer(n,f);this._changedFormContainers.push(n)}else{v=r.getFormContainers();n=v[f-1]}m=n.getFormElements();if(m.length==0){o=O.call(this,n)}else if(b&&b.isA("sap.ui.layout.ResponsiveFlowLayoutData")&&_===g.ResponsiveLayout&&!S.call(this,b)&&b.getLinebreak()){o=O.call(this,n)}else{o=m[m.length-1]}o.addField(e)}else if(s.isA("sap.ui.core.Label")){h=s.getParent();n=h.getParent();d=n.indexOfFormElement(h);if(d==0){o=x.call(this,n,null,0)}else if(b&&b.isA("sap.ui.layout.ResponsiveFlowLayoutData")&&_===g.ResponsiveLayout&&!S.call(this,b)&&b.getLinebreak()){o=x.call(this,n,null,d)}else{m=n.getFormElements();o=m[d-1]}o.addField(e)}else{o=s.getParent();y=o.indexOfField(s);if(b&&b.isA("sap.ui.layout.ResponsiveFlowLayoutData")&&_===g.ResponsiveLayout&&!S.call(this,b)&&b.getLinebreak()&&y>0){n=o.getParent();d=n.indexOfFormElement(o);H(this._changedFormElements,o);p=o.getFields();o=x.call(this,n,undefined,d+1);o.addField(e);for(c=y;c<p.length;c++){L=p[c];o.addField(L)}}else{o.insertField(e,y)}}H(this._changedFormElements,o);T.call(this,e,5,false,true)}this._aElements.splice(i,0,e);this._oObserver.observe(e,{properties:["visible"]});this.invalidate();this._bChangedByMe=false;return this};b.prototype.removeContent=function(e){var t=null;var i=-1;var s=0;if(this._aElements){if(typeof e=="string"){e=a.getElementById(e)}if(typeof e=="object"){for(s=0;s<this._aElements.length;s++){if(this._aElements[s]==e){e=s;break}}}if(typeof e=="number"){if(e<0||e>=this._aElements.length){u.warning("Element.removeAggregation called with invalid index: Items, "+e)}else{i=e;t=this._aElements[i]}}}if(t){this._bChangedByMe=true;var r=this.getAggregation("form");var n;var o;var l;var h;if(t.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){n=t.getParent();n.setTitle(null);n.setToolbar(null);l=n.getFormElements();if(i>0||l.length>0){var g=r.indexOfFormContainer(n);var f;if(i===0){f=W.call(this);r.insertFormContainer(f,g)}else{f=r.getFormContainers()[g-1];if(l.length>0&&!l[0].getLabel()){var d=f.getFormElements();var y=d[d.length-1];h=l[0].getFields();for(s=0;s<h.length;s++){y.addField(h[s])}H(this._changedFormElements,y);n.removeFormElement(l[0]);l[0].destroy();l.splice(0,1)}}for(s=0;s<l.length;s++){f.addFormElement(l[s])}H(this._changedFormContainers,f);r.removeFormContainer(n);n.destroy()}else{r.removeFormContainer(n);n.destroy()}}else if(t.isA("sap.ui.core.Label")){o=t.getParent();n=o.getParent();o.setLabel(null);h=o.getFields();var p=n.indexOfFormElement(o);var m;if(p===0){if(h.length===0){n.removeFormElement(o);o.destroy();if(n.getFormElements().length==0&&!n.getTitle()&&!n.getToolbar()){r.removeFormContainer(n);n.destroy()}}else{m=x.call(this,n,null,0)}}else{l=n.getFormElements();m=l[p-1];H(this._changedFormElements,m)}for(s=0;s<h.length;s++){m.addField(h[s])}n.removeFormElement(o);o.destroy()}else{o=t.getParent();o.removeField(t);if(o.getFields().length==0&&!o.getLabel()){n=o.getParent();n.removeFormElement(o);o.destroy();if(n.getFormElements().length==0&&!n.getTitle()&&!n.getToolbar()){r.removeFormContainer(n);n.destroy()}}else{H(this._changedFormElements,o)}}this._aElements.splice(i,1);t.setParent(null);this._oObserver.unobserve(t);q.call(this,t);this.invalidate();this._bChangedByMe=false;return t}return null};b.prototype.removeAllContent=function(){var e=0;if(this._aElements){this._bChangedByMe=true;var t=this.getAggregation("form");var a=t.getFormContainers();for(e=0;e<a.length;e++){var i=a[e];i.setTitle(null);i.setToolbar(null);var s=i.getFormElements();for(var r=0;r<s.length;r++){var n=s[r];n.setLabel(null);n.removeAllFields()}i.destroyFormElements()}t.destroyFormContainers();for(e=0;e<this._aElements.length;e++){var o=this._aElements[e];q.call(this,o);this._oObserver.unobserve(o)}var l=this._aElements;this._aElements=null;this.invalidate();this._bChangedByMe=false;return l}else{return[]}};b.prototype.destroyContent=function(){var e=this.removeAllContent();if(e){this._bChangedByMe=true;for(var t=0;t<e.length;t++){e[t].destroy()}this.invalidate();this._bChangedByMe=false}return this};b.prototype.getContent=function(){if(!this._aElements){this._aElements=this.getAggregation("content",[])}return this._aElements.slice()};b.prototype.setLayout=function(e){var t=this.getLayout();var a=this.isPropertyInitial("layout");if(e!=t){D.call(this)}this.setProperty("layout",e);if(e!=t||a){var i=_.call(this);if(i){B.call(this)}}return this};b.prototype.clone=function(t){this._bChangedByMe=true;var a=e.prototype.clone.apply(this,arguments);var i=this.getContent();for(var s=0;s<i.length;s++){var r=i[s];var n=r.getLayoutData();this._oObserver.unobserve(r);var o=r.clone(t);this._oObserver.observe(r,{properties:["visible"]});if(n){if(n.isA("sap.ui.core.VariantLayoutData")){var l=n.getMultipleLayoutData();for(var u=0;u<l.length;u++){if(S.call(this,l[u])){a._aLayouts.push(o.getLayoutData().getMultipleLayoutData()[u].getId())}}}else if(S.call(this,n)){a._aLayouts.push(o.getLayoutData().getId())}}a.addContent(o)}this._bChangedByMe=false;return a};function _(){var e=this.getAggregation("form");if(e.getLayout()){this._bChangedByMe=true;e.destroyLayout();j.call(this);this._bChangedByMe=false}var t;switch(this.getLayout()){case g.ResponsiveLayout:if((!f||!d||!L)&&!this._bResponsiveLayoutRequested){f=sap.ui.require("sap/ui/layout/form/ResponsiveLayout");d=sap.ui.require("sap/ui/layout/ResponsiveFlowLayoutData");L=sap.ui.require("sap/ui/core/ResizeHandler");if(!f||!d||!L){sap.ui.require(["sap/ui/layout/form/ResponsiveLayout","sap/ui/layout/ResponsiveFlowLayoutData","sap/ui/core/ResizeHandler"],C.bind(this));this._bResponsiveLayoutRequested=true}}if(f&&d){t=new f(this.getId()+"--Layout")}break;case g.GridLayout:if((!p||!m||!v)&&!this._bGridLayoutRequested){p=sap.ui.require("sap/ui/layout/form/GridLayout");m=sap.ui.require("sap/ui/layout/form/GridContainerData");v=sap.ui.require("sap/ui/layout/form/GridElementData");if(!p||!m||!v){sap.ui.require(["sap/ui/layout/form/GridLayout","sap/ui/layout/form/GridContainerData","sap/ui/layout/form/GridElementData"],F.bind(this));this._bGridLayoutRequested=true}}if(p&&m&&v){t=new p(this.getId()+"--Layout")}break;case g.ResponsiveGridLayout:if(!y&&!this._bResponsiveGridLayoutRequested){y=sap.ui.require("sap/ui/layout/form/ResponsiveGridLayout");if(!y){sap.ui.require(["sap/ui/layout/form/ResponsiveGridLayout"],E.bind(this));this._bResponsiveGridLayoutRequested=true}}if(y){t=new y(this.getId()+"--Layout")}break;case g.ColumnLayout:if(!c&&!this._bColumnLayoutRequested){c=sap.ui.require("sap/ui/layout/form/ColumnLayout");if(!c){sap.ui.require(["sap/ui/layout/form/ColumnLayout"],M.bind(this));this._bColumnLayoutRequested=true}}if(c){t=new c(this.getId()+"--Layout")}break}if(t){this._bChangedByMe=true;e.setLayout(t);this._bChangedByMe=false;return true}return false}function C(e,t,a){f=e;d=t;L=a;this._bResponsiveLayoutRequested=false;if(this.getLayout()==g.ResponsiveLayout){R.call(this);if(this.getDomRef()&&!this._sResizeListenerId){this._sResizeListenerId=L.register(this.getDomRef(),jQuery.proxy(this._resize,this))}}}function F(e,t,a){p=e;m=t;v=a;this._bGridLayoutRequested=false;if(this.getLayout()==g.GridLayout){R.call(this)}}function E(e){y=e;this._bResponsiveGridLayoutRequested=false;if(this.getLayout()==g.ResponsiveGridLayout){R.call(this)}}function M(e){c=e;this._bColumnLayoutRequested=false;if(this.getLayout()==g.ColumnLayout){R.call(this)}}function R(){if(!this._bIsBeingDestroyed){_.call(this);B.call(this);if(this.getDomRef()){A.call(this);var e=this.getAggregation("form");if(!e.getDomRef()){this.invalidate()}}}}function D(){this._bChangedByMe=true;var e=this.getAggregation("form");var t=e.getFormContainers();for(var a=0;a<t.length;a++){var i=t[a];H(this._changedFormContainers,i);if(i.getLayoutData()){i.destroyLayoutData()}var s=i.getFormElements();for(var r=0;r<s.length;r++){var n=s[r];H(this._changedFormElements,n);if(n.getLayoutData()){n.destroyLayoutData()}var o=n.getLabel();if(o){q.call(this,o)}var l=n.getFields();for(var u=0;u<l.length;u++){var h=l[u];q.call(this,h)}}}this._bChangedByMe=false}function B(){this._bChangedByMe=true;var e=this.getAggregation("form");var t=e.getFormContainers();for(var a=0;a<t.length;a++){var i=t[a];H(this._changedFormContainers,i);P.call(this,i);var s=i.getFormElements();for(var r=0;r<s.length;r++){var n=s[r];H(this._changedFormElements,n);I.call(this,n);var o=n.getLabel();if(o){T.call(this,o,this._iLabelWeight,false,true,this.getLabelMinWidth())}var l=n.getFields();for(var u=0;u<l.length;u++){var h=l[u];T.call(this,h,5,false,true)}}}this._bChangedByMe=false}function A(){this._bChangedByMe=true;this._changedFormContainers=[];var e=this.getLayout();var t=this.getAggregation("form").getLayout();t.setBackgroundDesign(this.getBackgroundDesign());switch(e){case g.ResponsiveLayout:this._applyLinebreaks();for(var a=0;a<this._changedFormElements.length;a++){var i=this._changedFormElements[a];z.call(this,i)}break;case g.GridLayout:X.call(this);break;case g.ResponsiveGridLayout:t.setLabelSpanXL(this.getLabelSpanXL());t.setLabelSpanL(this.getLabelSpanL());t.setLabelSpanM(this.getLabelSpanM());t.setLabelSpanS(this.getLabelSpanS());t.setAdjustLabelSpan(this.getAdjustLabelSpan());t.setEmptySpanXL(this.getEmptySpanXL());t.setEmptySpanL(this.getEmptySpanL());t.setEmptySpanM(this.getEmptySpanM());t.setEmptySpanS(this.getEmptySpanS());t.setColumnsXL(this.getColumnsXL());t.setColumnsL(this.getColumnsL());t.setColumnsM(this.getColumnsM());t.setSingleContainerFullSize(this.getSingleContainerFullSize());t.setBreakpointXL(this.getBreakpointXL());t.setBreakpointL(this.getBreakpointL());t.setBreakpointM(this.getBreakpointM());break;case g.ColumnLayout:t.setColumnsXL(this.getColumnsXL()>0?this.getColumnsXL():this.getColumnsL());t.setColumnsL(this.getColumnsL());t.setColumnsM(this.getColumnsM());t.setLabelCellsLarge(this.getLabelSpanL());t.setEmptyCellsLarge(this.getEmptySpanL());break}this._changedFormElements=[];this._bChangedByMe=false}function S(e){var t=e.getId(),a=" "+this._aLayouts.join(" ")+" ";return a.indexOf(" "+t+" ")>-1}function k(e,t,a,i){var s=new d({weight:e,linebreak:t===true,linebreakable:a===true});if(i){s.setMinWidth(i)}this._aLayouts.push(s.getId());return s}function w(e){var t;switch(this.getLayout()){case g.ResponsiveLayout:t=o.prototype.getLayoutDataForElement(e,"sap.ui.layout.ResponsiveFlowLayoutData");break;case g.GridLayout:t=o.prototype.getLayoutDataForElement(e,"sap.ui.layout.form.GridElementData");break;case g.ResponsiveGridLayout:t=o.prototype.getLayoutDataForElement(e,"sap.ui.layout.GridData");break;case g.ColumnLayout:t=o.prototype.getLayoutDataForElement(e,"sap.ui.layout.form.ColumnElementData");break}return t}function G(){var e=this.getLayout();if(e===g.ResponsiveLayout&&this._bResponsiveLayoutRequested||e===g.GridLayout&&this._bGridLayoutRequested||e===g.ResponsiveGridLayout&&this._bResponsiveGridLayoutRequested||e===g.ColumnLayout&&this._bColumnLayoutRequested){return false}if(!this.getAggregation("form").getLayout()){var t=this._bChangedByMe;var a=_.call(this);this._bChangedByMe=t;if(!a){return false}}return true}function T(e,t,a,i,s){if(this.getLayout()!=g.ResponsiveLayout){return}if(!G.call(this)){return}this._bLayoutDataChangedByMe=true;var r=w.call(this,e);if(!r||!S.call(this,r)){r=e.getLayoutData();if(r&&r.isA("sap.ui.core.VariantLayoutData")){r.addMultipleLayoutData(k.call(this,t,a,i,s))}else if(!r){e.setLayoutData(k.call(this,t,a,i,s))}else{u.warning("ResponsiveFlowLayoutData can not be set on Field "+e.getId(),"_createFieldLayoutData","SimpleForm")}}this._bLayoutDataChangedByMe=false}function I(e){if(this.getLayout()!=g.ResponsiveLayout){return}if(!G.call(this)){return}this._bLayoutDataChangedByMe=true;e.setLayoutData(new d({linebreak:true,margin:false}));this._bLayoutDataChangedByMe=false}function P(e){var t=this.getLayout();if(t!=g.ResponsiveLayout&&t!=g.GridLayout){return}if(!G.call(this)){return}this._bLayoutDataChangedByMe=true;switch(t){case g.ResponsiveLayout:e.setLayoutData(new d({minWidth:280}));break;case g.GridLayout:if(this.getMaxContainerCols()>1){e.setLayoutData(new m({halfGrid:true}))}else{e.setLayoutData(new m({halfGrid:false}))}break}this._bLayoutDataChangedByMe=false}function q(e){this._bLayoutDataChangedByMe=true;var t=w.call(this,e);if(t){var a=t.getId();for(var i=0;i<this._aLayouts.length;i++){var s=this._aLayouts[i];if(a==s){t.destroy();this._aLayouts.splice(i,1);break}}}this._bLayoutDataChangedByMe=false}function O(e,t){var a=V.call(this,t,e);e.addFormElement(a);return a}function x(e,t,a){var i=V.call(this,t,e);e.insertFormElement(i,a);return i}function V(e,t){var i;var s={};if(e){i=this.getId()+"--"+e.getId()+"--FE";e.addStyleClass("sapUiFormLabel-CTX");if(!w.call(this,e)){T.call(this,e,this._iLabelWeight,false,true,this.getLabelMinWidth())}s["label"]=e}else{i=t.getId()+"--FE-NoLabel";if(a.getElementById(i)){i=undefined}}var r=new n(i,s);I.call(this,r);r.isVisible=function(){var e=this.getFields();var t=false;for(var a=0;a<e.length;a++){var i=e[a];if(i.getVisible()){t=true;break}}return t};return r}function W(e){var t;var a={};if(e){t=this.getId()+"--"+e.getId()+"--FC";if(e.isA("sap.ui.core.Title")){a["title"]=e}else if(e.isA("sap.ui.core.Toolbar")){a["toolbar"]=e}}else{t=this.getId()+"--FC-NoHead"}var i=new r(t,a);P.call(this,i);i.getAriaLabelledBy=function(){var e=this.getToolbar();if(e){return e.getAriaLabelledBy()}else{return[]}};return i}function z(e){var t=this._iMaxWeight;var a=e.getFields();var i;var s=a.length;var r=e.getLabel();var n;var o=0;this._bLayoutDataChangedByMe=true;if(r&&w.call(this,r)){t=t-w.call(this,r).getWeight()}for(o=0;o<a.length;o++){i=a[o];n=w.call(this,i);if(n&&n.isA("sap.ui.layout.ResponsiveFlowLayoutData")&&!S.call(this,n)){t=t-n.getWeight();s--}}var l=Math.floor(t/s);var u=t%s;for(o=0;o<a.length;o++){i=a[o];n=w.call(this,i);var h=l;if(!n){T.call(this,i,h,false,o==0)}else if(S.call(this,n)&&n.isA("sap.ui.layout.ResponsiveFlowLayoutData")){if(u>0){h++;u--}n.setWeight(h)}}this._bLayoutDataChangedByMe=false}b.prototype._applyLinebreaks=function(){if(!f||this._bResponsiveLayoutRequested){return}this._bLayoutDataChangedByMe=true;var e=this.getAggregation("form"),t=e.getFormContainers();var a=this.getDomRef();var i=this.$();for(var s=1;s<t.length;s++){var r=t[s],n=r.getLayoutData();if(!a||i.outerWidth(true)>this.getMinWidth()){if(s%this.getMaxContainerCols()==0){n.setLinebreak(true)}else{n.setLinebreak(false)}}else{n.setLinebreak(true)}}if(a&&i.css("visibility")=="hidden"){var o=this;setTimeout(function(){if(o.getDomRef()){o.$().css("visibility","")}},10)}this._bLayoutDataChangedByMe=false};function X(){this._bLayoutDataChangedByMe=true;var e=this.getAggregation("form");var t=e.getFormContainers();var a=t.length;for(var i=0;i<a;i++){var s=t[i];if(this.getMaxContainerCols()<=1||i==a-1&&a%2>0){s.getLayoutData().setHalfGrid(false)}else if(!s.getLayoutData().getHalfGrid()){s.getLayoutData().setHalfGrid(true)}}this._bLayoutDataChangedByMe=false}b.prototype._resize=function(e){this._bChangedByMe=true;if(this._iCurrentWidth==e.size.width){return}this._iCurrentWidth=e.size.width;this._applyLinebreaks();this._bChangedByMe=false};function j(){if(this._sResizeListenerId){L.deregister(this._sResizeListenerId);this._sResizeListenerId=null}}function H(e,t){var a=false;for(var i=0;i<e.length;i++){var s=e[i];if(s==t){a=true;break}}if(!a){e.push(t)}}function N(e){if(e.name=="visible"){var t=e.object.getParent();t.invalidate()}}function $(e){var t=[];var a=e.getFormContainers();for(var i=0;i<a.length;i++){var s=a[i];var r=s.getTitle();if(r){t.push(r)}else{var n=s.getToolbar();if(n){t.push(n)}}var o=s.getFormElements();for(var l=0;l<o.length;l++){var u=o[l];var h=u.getLabel();if(h){t.push(h)}var g=u.getFields();for(var f=0;f<g.length;f++){var d=g[f];t.push(d)}}}return t}b.prototype._formInvalidated=function(e){if(!this._bChangedByMe){var t=$(this.getAggregation("form"));var a=0;var i=0;var s=false;if(!this._aElements||t.length<this._aElements.length){s=true}else{for(a=0;a<t.length;a++){var r=t[a];var n=this._aElements[i];if(r===n){i++}else{var o=t[a+1];if(o===n){this.insertContent(r,a);break}o=this._aElements[i+1];if(o===r){s=true;break}break}}}if(s){this.removeAllContent();for(a=0;a<t.length;a++){var l=t[a];this.addContent(l)}}}};b.prototype._onLayoutDataChange=function(e){if(!this._bLayoutDataChangedByMe&&!this._bIsBeingDestroyed){switch(this.getLayout()){case g.ResponsiveLayout:var t=e.srcControl;var a=t.getParent();if(a instanceof n){var i=this.indexOfContent(t);this.removeContent(t);this.insertContent(t,i)}break}}};b.prototype._suggestTitleId=function(e){var t=this.getAggregation("form");t._suggestTitleId(e);return this};return b});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/form/SimpleFormRenderer", [],function(){"use strict";var e={apiVersion:2};e.render=function(e,t){t._bChangedByMe=true;e.openStart("div",t).class("sapUiSimpleForm").style("width",t.getWidth()).openEnd();var r=t.getAggregation("form");if(r.getLayout()){e.renderControl(r)}e.close("div");t._bChangedByMe=false};return e},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/MetaModel", ["./Model"],function(t){"use strict";var n=t.extend("sap.ui.model.MetaModel",{constructor:function(){t.apply(this,arguments)}});n.prototype.createBindingContext=function(t,n,e,i){if(typeof n=="function"){i=n;n=null}if(typeof e=="function"){i=e;e=null}var o=this.resolve(t,n),u=o==undefined?undefined:this.getContext(o?o:"/");if(!u){u=null}if(i){i(u)}return u};n.prototype.destroyBindingContext=function(){};return n});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/OperationMode", function(){"use strict";var e={Default:"Default",Server:"Server",Client:"Client",Auto:"Auto"};return e},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/_AnnotationHelperBasics", ["sap/base/Log","sap/base/util/extend","sap/ui/base/BindingParser","sap/ui/performance/Measurement"],function(e,t,a,n){"use strict";var i="sap.ui.model.odata.AnnotationHelper",r=/[\\\{\}:]/,o,u=/^(\/dataServices\/schema\/\d+\/entityContainer\/\d+\/entitySet\/\d+)(?:\/|$)/,d=[i],s=i+"/followPath",p=/^(\/dataServices\/schema\/\d+\/(?:complex|entity)Type\/\d+)(?:\/|$)/,f={"Edm.Boolean":"sap.ui.model.odata.type.Boolean","Edm.Byte":"sap.ui.model.odata.type.Byte","Edm.Date":"sap.ui.model.odata.type.Date","Edm.DateTime":"sap.ui.model.odata.type.DateTime","Edm.DateTimeOffset":"sap.ui.model.odata.type.DateTimeOffset","Edm.Decimal":"sap.ui.model.odata.type.Decimal","Edm.Double":"sap.ui.model.odata.type.Double","Edm.Float":"sap.ui.model.odata.type.Single","Edm.Guid":"sap.ui.model.odata.type.Guid","Edm.Int16":"sap.ui.model.odata.type.Int16","Edm.Int32":"sap.ui.model.odata.type.Int32","Edm.Int64":"sap.ui.model.odata.type.Int64","Edm.SByte":"sap.ui.model.odata.type.SByte","Edm.Single":"sap.ui.model.odata.type.Single","Edm.String":"sap.ui.model.odata.type.String","Edm.Stream":"sap.ui.model.odata.type.Stream","Edm.Time":"sap.ui.model.odata.type.Time","Edm.TimeOfDay":"sap.ui.model.odata.type.TimeOfDay"};o={descend:function(e,a,n){var i=t({},e);o.expectType(e,typeof a==="number"?"array":"object");i.path=e.path+"/"+a;i.value=e.value[a];if(n===true){i.asExpression=true}else if(n){o.expectType(i,n)}return i},error:function(t,a,n){a=t.path+": "+a;e.error(a,o.toErrorString(t.value),n||i);throw new SyntaxError(a)},expectType:function(e,t){var a,n=e.value;if(t==="array"){a=!Array.isArray(n)}else{a=typeof n!==t||n===null||Array.isArray(n)}if(a){o.error(e,"Expected "+t)}},followPath:function(e,t){var a,i,r,u,p=e.getModel(),f,l={associationSetEnd:undefined,navigationAfterMultiple:false,isMultiple:false,navigationProperties:[],resolvedPath:undefined},m,y;n.average(s,"",d);i=o.getPath(t);r=i!==undefined&&o.getStartingPoint(e,i);if(!r){n.end(s);return undefined}f=i.split("/");if(i){while(f.length&&r){m=f[0];u=m.indexOf("@");if(u===0){r+="/"+m.slice(1);f.shift();continue}y=p.getObject(r);a=p.getODataAssociationEnd(y,m);if(a){l.associationSetEnd=p.getODataAssociationSetEnd(y,m);l.navigationProperties.push(m);if(l.isMultiple){l.navigationAfterMultiple=true}l.isMultiple=a.multiplicity==="*";r=p.getODataEntityType(a.type,true);f.shift();continue}r=p.getODataProperty(y,f,true)}}l.resolvedPath=r;n.end(s);return l},getPath:function(e){if(e){if(e.hasOwnProperty("AnnotationPath")){return e.AnnotationPath}if(e.hasOwnProperty("Path")){return e.Path}if(e.hasOwnProperty("PropertyPath")){return e.PropertyPath}if(e.hasOwnProperty("NavigationPropertyPath")){return e.NavigationPropertyPath}}return undefined},getStartingPoint:function(e,t){var a,n=p.exec(e.getPath()),i;if(n){return n[1]}n=u.exec(e.getPath());if(n){if(!t){return n[1]}i=e.getModel();a=i.getObject(n[1]);return i.getODataEntityType(a.entityType,true)}return undefined},property:function(e,t,a){return o.descend(e,t,a).value},resultToString:function(e,t,n,i){var u=e.value;function d(t){var a,n,i=e.parameters&&o.toJSON(e.parameters),d=i&&i!=="{}",s,p=f[e.type];t=t&&!e.ignoreTypeInPath&&p;if(t||r.test(u)||d){s="{path:"+o.toJSON(u);if(t){s+=",type:'"+p+"'";a=o.toJSON(e.constraints);if(a&&a!=="{}"){s+=",constraints:"+a}n=e.formatOptions&&o.toJSON(e.formatOptions);if(n&&n!=="{}"){s+=",formatOptions:"+n}}if(d){s+=",parameters:"+i}return s+"}"}return"{"+u+"}"}function s(e){switch(e.type){case"Edm.Boolean":case"Edm.Double":case"Edm.Int32":return String(e.value);default:return o.toJSON(e.value)}}switch(e.result){case"binding":if(t){return(i?"%":"$")+d(n)}return d(n);case"composite":if(t){throw new Error("Trying to embed a composite binding into an expression binding")}return u;case"constant":if(e.type==="edm:Null"){if(e.value===undefined){return t?"undefined":undefined}return t?"null":null}if(t){return s(e)}return typeof u==="string"?a.complexParser.escape(u):String(u);case"expression":return t?u:"{="+u+"}";default:return undefined}},toErrorString:function(e){var t;if(typeof e!=="function"){try{t=o.toJSON(e);if(t!==undefined&&t!=="null"){return t}}catch(e){}}return String(e)},toJSON:function(e){var t,a=false,n="",i,r;t=JSON.stringify(e);if(t===undefined){return undefined}for(i=0;i<t.length;i+=1){switch(r=t.charAt(i)){case"'":n+="\\'";break;case'"':if(a){n+=r;a=false}else{n+="'"}break;case"\\":if(a){n+="\\\\"}a=!a;break;default:if(a){n+="\\";a=false}n+=r}}return n}};return o});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/type/Boolean", ["sap/base/Log","sap/ui/core/Lib","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/model/odata/type/ODataType"],function(e,t,n,o,a,r){"use strict";function i(){return u("EnterYesOrNo",[l(true),l(false)])}function u(e,n){return t.getResourceBundleFor("sap.ui.core").getText(e,n)}function l(e){return u(e?"YES":"NO")}function s(t,n){var o;t.oConstraints=undefined;if(n){o=n.nullable;if(o===false||o==="false"){t.oConstraints={nullable:false}}else if(o!==undefined&&o!==true&&o!=="true"){e.warning("Illegal nullable: "+o,null,t.getName())}}}var f=r.extend("sap.ui.model.odata.type.Boolean",{constructor:function(e,t){r.apply(this,arguments);s(this,t)}});f.prototype.formatValue=function(e,t){if(e===null||e===undefined){return null}switch(this.getPrimitiveType(t)){case"any":case"boolean":return e;case"string":return l(e);default:throw new n("Don't know how to format "+this.getName()+" to "+t)}};f.prototype.parseValue=function(e,t){var n;if(e===null||e===""){return null}switch(this.getPrimitiveType(t)){case"boolean":return e;case"string":n=e.trim().toLowerCase();if(n===l(true).toLowerCase()){return true}if(n===l(false).toLowerCase()){return false}throw new o(i());default:throw new o("Don't know how to parse "+this.getName()+" from "+t)}};f.prototype.validateValue=function(e){if(e===null){if(this.oConstraints&&this.oConstraints.nullable===false){throw new a(i())}return}if(typeof e!=="boolean"){throw new a("Illegal "+this.getName()+" value: "+e)}};f.prototype.getName=function(){return"sap.ui.model.odata.type.Boolean"};return f});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/type/Byte", ["sap/ui/model/odata/type/Int"],function(t){"use strict";var e={minimum:0,maximum:255};var n=t.extend("sap.ui.model.odata.type.Byte",{constructor:function(){t.apply(this,arguments)}});n.prototype.getName=function(){return"sap.ui.model.odata.type.Byte"};n.prototype.getRange=function(){return e};return n});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/type/Date", ["sap/base/Log","sap/base/i18n/date/CalendarType","sap/base/util/extend","sap/ui/core/Lib","sap/ui/core/date/UI5Date","sap/ui/core/format/DateFormat","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/model/odata/type/ODataType"],function(t,e,a,r,n,o,i,s,l,u){"use strict";var p=/\d{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[12]\d|3[01])/,f;function c(){if(!f){f=o.getDateInstance({calendarType:e.Gregorian,pattern:"yyyy-MM-dd",strictParsing:true,UTC:true})}return f}function g(e,a){var r;e.oConstraints=undefined;if(a){r=a.nullable;if(r===false||r==="false"){e.oConstraints={nullable:false}}else if(r!==undefined&&r!==true&&r!=="true"){t.warning("Illegal nullable: "+r,null,e.getName())}}}var d=u.extend("sap.ui.model.odata.type.Date",{constructor:function(t,e){u.apply(this,arguments);this.oFormatOptions=t;g(this,e)}});d.prototype._handleLocalizationChange=function(){this.oFormat=null};d.prototype.formatValue=function(t,e){var a;if(t===undefined||t===null){return null}switch(this.getPrimitiveType(e)){case"any":return t;case"object":return t instanceof Date?n.getInstance(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()):c().parse(t,false);case"string":a=t instanceof Date?t:c().parse(t);return a?this.getFormat().format(a):t;default:throw new i("Don't know how to format "+this.getName()+" to "+e)}};d.prototype._getErrorMessage=function(){var t=n.getInstance().getFullYear()+"-12-31";return r.getResourceBundleFor("sap.ui.core").getText("EnterDate",[this.formatValue(t,"string")])};d.prototype.getDateValue=function(t){return t?n.getInstance(t+"T00:00"):null};d.prototype.getFormat=function(){if(!this.oFormat){var t=a({strictParsing:true},this.oFormatOptions);t.UTC=true;this.oFormat=o.getDateInstance(t)}return this.oFormat};d.prototype.getISOStringFromModelValue=function(t){return t?t:null};d.prototype.getModelFormat=function(){return c()};d.prototype.getModelValue=function(t){var e;if(t===null){e=null}else{n.checkDate(t);e=n.getInstance(0);e.setUTCFullYear(t.getFullYear(),t.getMonth(),t.getDate());e=this.getModelFormat().format(e)}this.validateValue(e);return e};d.prototype.getModelValueFromISOString=function(t){return t?t:null};d.prototype.getName=function(){return"sap.ui.model.odata.type.Date"};d.prototype.parseValue=function(t,e){var a;if(t===""||t===null){return null}switch(this.getPrimitiveType(e)){case"object":return c().format(t,false);case"string":a=this.getFormat().parse(t);if(!a){throw new s(this._getErrorMessage())}return c().format(a);default:throw new s("Don't know how to parse "+this.getName()+" from "+e)}};d.prototype.validateValue=function(t){if(t===null){if(this.oConstraints&&this.oConstraints.nullable===false){throw new l(this._getErrorMessage())}}else if(typeof t!=="string"||!p.test(t)){throw new l("Illegal "+this.getName()+" value: "+t)}};d._resetModelFormatter=function(){f=undefined};return d});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/type/DateTimeOffset", ["sap/base/Log","sap/base/i18n/date/CalendarType","sap/ui/core/date/UI5Date","sap/ui/core/format/DateFormat","sap/ui/model/FormatException","sap/ui/model/odata/type/DateTimeBase"],function(t,e,i,r,o,n){"use strict";var a=n.extend("sap.ui.model.odata.type.DateTimeOffset",{constructor:function(e,i){var r;n.call(this,e,{nullable:i?i.nullable:undefined,precision:i?i.precision:undefined});this.rDateTimeOffset=undefined;this.oModelFormat=undefined;this.bV4=false;if(i){r=i.V4;if(r===true){this.bV4=true}else if(r!==undefined&&r!==false){t.warning("Illegal V4: "+r,null,this.getName())}}}});function s(t){var i="yyyy-MM-dd'T'HH:mm:ss",o;if(!t.oModelFormat){o=t.oConstraints&&t.oConstraints.precision;if(o){i+="."+"".padEnd(o,"S")}t.oModelFormat=r.getDateInstance({calendarType:e.Gregorian,pattern:i+"XXX",strictParsing:true,UTC:t.oFormatOptions&&t.oFormatOptions.UTC})}return t.oModelFormat}a.prototype._resetModelFormatter=function(){this.oModelFormat=undefined};a.prototype.formatValue=function(t,e){var r;if(t===undefined||t===null){return null}if(this.getPrimitiveType(e)==="object"){if(t instanceof Date){return i.getInstance(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())}return s(this).parse(t)}if(typeof t==="string"&&this.getPrimitiveType(e)==="string"){r=s(this).parse(t);if(!r){throw new o("Illegal "+this.getName()+" value: "+t)}t=r}return n.prototype.formatValue.call(this,t,e)};a.prototype.getConstraints=function(){var t=n.prototype.getConstraints.call(this);if(this.bV4){t.V4=true}return t};a.prototype.getISOStringFromModelValue=function(t){if(!t){return null}return this.bV4?t:t.toISOString()};a.prototype.getModelFormat=function(){if(this.bV4){return s(this)}return n.prototype.getModelFormat.call(this)};a.prototype.getModelValue=function(t){var e=this._getModelValue(t);if(this.bV4&&e!==null){e=this.getModelFormat().format(e)}this.validateValue(e);return e};a.prototype.getModelValueFromISOString=function(t){if(!t){return null}return this.bV4?this.getModelFormat().format(i.getInstance(t),true):i.getInstance(t)};a.prototype.getName=function(){return"sap.ui.model.odata.type.DateTimeOffset"};a.prototype.parseValue=function(t,e){var i=n.prototype.parseValue.call(this,t,e);return this.bV4&&i!==null?s(this).format(i):i};a.prototype.setV4=function(){this.bV4=true;return this};a.prototype.validateValue=function(t){var e;if(this.bV4){if(typeof t==="string"){if(!this.rDateTimeOffset){e=this.oConstraints&&this.oConstraints.precision;this.rDateTimeOffset=new RegExp("^"+"\\d{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[12]\\d|3[01])"+"T"+"(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d"+(e?"(\\.\\d{1,"+e+"})?":"")+")?"+"(?:Z|[-+](?:0\\d|1[0-3]):[0-5]\\d|[-+]14:00)$","i")}if(this.rDateTimeOffset.test(t)){return}}else if(t){t=t.toString()}}n.prototype.validateValue.call(this,t)};return a});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/type/Decimal", ["sap/base/Log","sap/ui/core/Lib","sap/ui/core/format/NumberFormat","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/model/odata/ODataUtils","sap/ui/model/odata/type/ODataType"],function(t,e,i,n,r,a,o,s){"use strict";var u=/^[-+]?(\d+)(?:\.(\d+))?$/,m=/(?:(\.[0-9]*[1-9]+)0+|\.0*)$/;function l(t){return t.oConstraints&&t.oConstraints.scale||0}function f(t,i){return e.getResourceBundleFor("sap.ui.core").getText(t,i)}function c(t){if(t.indexOf(".")>=0){t=t.replace(m,"$1")}return t}function p(e,i){var n,r,a,o,s;function m(i,n){t.warning("Illegal "+n+": "+i,null,e.getName())}function l(t,e,i,n){var r=typeof t==="string"?parseInt(t):t;if(r===undefined){return e}if(typeof r!=="number"||isNaN(r)||r<i){m(t,n);return e}return r}function f(t,e){if(t){if(t.match(u)){return t}m(t,e)}return undefined}function c(t,e){if(t===true||t==="true"){return true}if(t!==undefined&&t!==false&&t!=="false"){m(t,e)}return undefined}function p(t,i,n){if(i!==n){e.oConstraints=e.oConstraints||{};e.oConstraints[t]=i}}e.oConstraints=undefined;if(i){n=i.nullable;a=i.precision;s=i.scale;o=s==="variable"?Infinity:l(s,0,0,"scale");r=l(a,Infinity,1,"precision");if(o!==Infinity&&r<o){t.warning("Illegal scale: must be less than or equal to precision (precision="+a+", scale="+s+")",null,e.getName());o=Infinity}p("precision",r,Infinity);p("scale",o,0);if(n===false||n==="false"){p("nullable",false,true)}else if(n!==undefined&&n!==true&&n!=="true"){m(n,"nullable")}p("minimum",f(i.minimum,"minimum"));p("minimumExclusive",c(i.minimumExclusive,"minimumExclusive"));p("maximum",f(i.maximum,"maximum"));p("maximumExclusive",c(i.maximumExclusive,"maximumExclusive"))}e._handleLocalizationChange()}var h=s.extend("sap.ui.model.odata.type.Decimal",{constructor:function(t,e){s.apply(this,arguments);this.oFormatOptions=t;p(this,e);this.checkParseEmptyValueToZero()}});h.prototype.formatValue=function(t,e){if(t===null||t===undefined){return null}switch(this.getPrimitiveType(e)){case"any":return t;case"float":return parseFloat(t);case"int":return Math.floor(parseFloat(t));case"string":return this.getFormat().format(c(String(t)));default:throw new n("Don't know how to format "+this.getName()+" to "+e)}};h.prototype.getFormat=function(){if(!this.oFormat){var t={groupingEnabled:true,maxIntegerDigits:Infinity},e=l(this);if(e!==Infinity){t.minFractionDigits=t.maxFractionDigits=e}var n=this.oFormatOptions||{};if(n.style!=="short"&&n.style!=="long"){t.preserveDecimals=true}Object.assign(t,this.oFormatOptions);t.parseAsString=true;delete t.parseEmptyValueToZero;this.oFormat=i.getFloatInstance(t)}return this.oFormat};h.prototype.parseValue=function(t,n){var a=this.getEmptyValue(t);if(a!==undefined){return a}var o;switch(this.getPrimitiveType(n)){case"string":o=this.getFormat().parse(t);if(!o){throw new r(e.getResourceBundleFor("sap.ui.core").getText("EnterNumber"))}o=c(o);break;case"int":case"float":o=i.getFloatInstance({maxIntegerDigits:Infinity,decimalSeparator:".",groupingEnabled:false}).format(t);break;default:throw new r("Don't know how to parse "+this.getName()+" from "+n)}return o};h.prototype._handleLocalizationChange=function(){this.oFormat=null};h.prototype.validateValue=function(t){var e,i,n,r,s,m,c,p,h;if(t===null&&(!this.oConstraints||this.oConstraints.nullable!==false)){return}if(typeof t!=="string"){throw new a(f("EnterNumber"))}n=u.exec(t);if(!n){throw new a(f("EnterNumber"))}i=n[1].length;e=(n[2]||"").length;h=l(this);p=this.oConstraints&&this.oConstraints.precision||Infinity;m=this.oConstraints&&this.oConstraints.minimum;r=this.oConstraints&&this.oConstraints.maximum;if(e>h){if(h===0){throw new a(f("EnterInt"))}else if(i+h>p){if(h!==p){throw new a(f("EnterNumberIntegerFraction",[p-h,h]))}if(n[1]!=="0"){throw new a(f("EnterNumberFractionOnly",[h]))}}throw new a(f("EnterNumberFraction",[h]))}if(h===Infinity){if(i+e>p){throw new a(f("EnterNumberPrecision",[p]))}}else if(i>p-h){if(h!==p){if(h){throw new a(f("EnterNumberInteger",[p-h]))}throw new a(f("EnterMaximumOfDigits",[p]))}if(n[1]!=="0"){throw new a(f("EnterNumberFractionOnly",[h]))}}if(m){c=this.oConstraints.minimumExclusive;if(o.compare(m,t,true)>=(c?0:1)){throw new a(f(c?"EnterNumberMinExclusive":"EnterNumberMin",[this.formatValue(m,"string")]))}}if(r){s=this.oConstraints.maximumExclusive;if(o.compare(r,t,true)<=(s?0:-1)){throw new a(f(s?"EnterNumberMaxExclusive":"EnterNumberMax",[this.formatValue(r,"string")]))}}};h.prototype.getName=function(){return"sap.ui.model.odata.type.Decimal"};return h});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/type/Double", ["sap/base/Log","sap/ui/core/Lib","sap/ui/core/format/NumberFormat","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/model/odata/type/ODataType"],function(e,t,a,o,r,n,i){"use strict";function s(){return t.getResourceBundleFor("sap.ui.core").getText("EnterNumber")}function l(e){return!e.oConstraints||e.oConstraints.nullable!==false}function u(t,a){var o;t.oConstraints=undefined;if(a){o=a.nullable;if(o===false||o==="false"){t.oConstraints={nullable:false}}else if(o!==undefined&&o!==true&&o!=="true"){e.warning("Illegal nullable: "+o,null,t.getName())}}t._handleLocalizationChange()}var p=i.extend("sap.ui.model.odata.type.Double",{constructor:function(e,t){i.apply(this,arguments);this.oFormatOptions=e;u(this,t);this.checkParseEmptyValueToZero()}});p.prototype.formatValue=function(e,t){var a,r;if(e===null||e===undefined){return null}if(typeof e==="number"){r=e}else if(typeof e==="string"){r=parseFloat(e)}else if(t!=="any"){throw new o("Illegal "+this.getName()+" value: "+e)}switch(this.getPrimitiveType(t)){case"any":return e;case"float":return r;case"int":return Math.floor(r);case"string":if(r&&(Math.abs(r)>=1e15||Math.abs(r)<1e-4)){a=this.getFormat().oFormatOptions;return r.toExponential().replace("e"," E").replace(".",a.decimalSeparator).replace("+",a.plusSign).replace("-",a.minusSign)}return this.getFormat().format(r);default:throw new o("Don't know how to format "+this.getName()+" to "+t)}};p.prototype.getFormat=function(){if(!this.oFormat){var e={groupingEnabled:true},t=this.oFormatOptions||{};if(t.style!=="short"&&t.style!=="long"){e.preserveDecimals=true}Object.assign(e,this.oFormatOptions);delete e.parseEmptyValueToZero;this.oFormat=a.getFloatInstance(e)}return this.oFormat};p.prototype.parseValue=function(e,t){var a=this.getEmptyValue(e,true);if(a!==undefined){return a}var o;switch(this.getPrimitiveType(t)){case"string":o=this.getFormat().parse(e);if(isNaN(o)){throw new r(s())}break;case"int":case"float":o=e;break;default:throw new r("Don't know how to parse "+this.getName()+" from "+t)}return o};p.prototype._handleLocalizationChange=function(){this.oFormat=null};p.prototype.validateValue=function(e){if(e===null&&l(this)){return}if(typeof e==="number"){return}throw new n(s())};p.prototype.getName=function(){return"sap.ui.model.odata.type.Double"};return p});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/type/Guid", ["sap/base/Log","sap/ui/core/Lib","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/model/odata/type/ODataType"],function(e,t,n,i,a,o){"use strict";var r=/[-\s]/g,l=/^[A-F0-9]{8}-([A-F0-9]{4}-){3}[A-F0-9]{12}$/i;function s(){return t.getResourceBundleFor("sap.ui.core").getText("EnterGuid")}function u(t,n){var i;t.oConstraints=undefined;if(n){i=n.nullable;if(i===false||i==="false"){t.oConstraints={nullable:false}}else if(i!==undefined&&i!==true&&i!=="true"){e.warning("Illegal nullable: "+i,null,t.getName())}}}var p=o.extend("sap.ui.model.odata.type.Guid",{constructor:function(e,t){o.apply(this,arguments);u(this,t)}});p.prototype.formatValue=function(e,t){if(e===undefined||e===null){return null}switch(this.getPrimitiveType(t)){case"any":case"string":return e;default:throw new n("Don't know how to format "+this.getName()+" to "+t)}};p.prototype.getName=function(){return"sap.ui.model.odata.type.Guid"};p.prototype.parseValue=function(e,t){var n;if(e===""||e===null){return null}if(this.getPrimitiveType(t)!=="string"){throw new i("Don't know how to parse "+this.getName()+" from "+t)}n=e.replace(r,"");if(n.length!==32){return e}return n.slice(0,8)+"-"+n.slice(8,12)+"-"+n.slice(12,16)+"-"+n.slice(16,20)+"-"+n.slice(20)};p.prototype.validateValue=function(e){if(e===null){if(this.oConstraints&&this.oConstraints.nullable===false){throw new a(s())}return}if(typeof e!=="string"){throw new a("Illegal "+this.getName()+" value: "+e)}if(!l.test(e)){throw new a(s())}};return p});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/type/Int", ["sap/base/Log","sap/base/util/extend","sap/ui/core/Lib","sap/ui/core/format/NumberFormat","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/model/odata/type/ODataType"],function(t,e,a,n,o,r,i,s){"use strict";function u(t,e){return a.getResourceBundleFor("sap.ui.core").getText(t,e)}function l(e,a){var n;e.oConstraints=undefined;if(a){n=a.nullable;if(n===false||n==="false"){e.oConstraints={nullable:false}}else if(n!==undefined&&n!==true&&n!=="true"){t.warning("Illegal nullable: "+n,null,e.getName())}}e._handleLocalizationChange()}var m=s.extend("sap.ui.model.odata.type.Int",{constructor:function(t,e){s.apply(this,arguments);this.oFormatOptions=t;l(this,e);this.checkParseEmptyValueToZero()},metadata:{abstract:true}});m.prototype._handleLocalizationChange=function(){this.oFormat=null};m.prototype.formatValue=function(t,e){if(t===undefined||t===null){return null}if(typeof t!=="number"&&e!=="any"){throw new o("Illegal "+this.getName()+" value: "+t)}switch(this.getPrimitiveType(e)){case"string":return this.getFormat().format(t);case"int":return Math.floor(t);case"float":case"any":return t;default:throw new o("Don't know how to format "+this.getName()+" to "+e)}};m.prototype.getFormat=function(){if(!this.oFormat){var t=e({groupingEnabled:true},this.oFormatOptions);delete t.parseEmptyValueToZero;this.oFormat=n.getIntegerInstance(t)}return this.oFormat};m.prototype.parseValue=function(t,e){var a=this.getEmptyValue(t,true);if(a!==undefined){return a}switch(this.getPrimitiveType(e)){case"string":var n=this.getFormat().parse(t);if(isNaN(n)){throw new r(u("EnterInt"))}return n;case"float":return Math.floor(t);case"int":return t;default:throw new r("Don't know how to parse "+this.getName()+" from "+e)}};m.prototype.validateValue=function(t){var e=this.getRange();if(t===null){if(this.oConstraints&&this.oConstraints.nullable===false){throw new i(u("EnterInt"))}return}if(typeof t!=="number"){throw new i(t+" (of type "+typeof t+") is not a valid "+this.getName()+" value")}if(Math.floor(t)!==t){throw new i(u("EnterInt"))}if(t<e.minimum){throw new i(u("EnterNumberMin",[this.formatValue(e.minimum,"string")]))}if(t>e.maximum){throw new i(u("EnterNumberMax",[this.formatValue(e.maximum,"string")]))}};return m});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/type/Int16", ["sap/ui/model/odata/type/Int"],function(t){"use strict";var e={minimum:-32768,maximum:32767};var n=t.extend("sap.ui.model.odata.type.Int16",{constructor:function(){t.apply(this,arguments)}});n.prototype.getName=function(){return"sap.ui.model.odata.type.Int16"};n.prototype.getRange=function(){return e};return n});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/type/Int32", ["sap/ui/model/odata/type/Int"],function(t){"use strict";var e={minimum:-2147483648,maximum:2147483647};var n=t.extend("sap.ui.model.odata.type.Int32",{constructor:function(){t.apply(this,arguments)}});n.prototype.getName=function(){return"sap.ui.model.odata.type.Int32"};n.prototype.getRange=function(){return e};return n});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/type/Int64", ["sap/base/Log","sap/base/util/extend","sap/ui/core/Lib","sap/ui/core/format/NumberFormat","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/model/odata/type/ODataType"],function(t,e,n,r,a,i,o,u){"use strict";var s=/^[-+]?(\d+)$/,l={minimum:"-9223372036854775808",maximum:"9223372036854775807"},m={minimum:"-9007199254740991",maximum:"9007199254740991"};function f(t,e,n){var r,a,i;a=s.exec(e);if(a){i=e.charAt(0)==="-";r=i?n.minimum.slice(1):n.maximum;if(a[1].length<r.length){return undefined}if(a[1].length>r.length||a[1]>r){if(i){return p("EnterNumberMin",[t.formatValue(n.minimum,"string")])}else{return p("EnterNumberMax",[t.formatValue(n.maximum,"string")])}}return undefined}return p("EnterInt")}function p(t,e){return n.getResourceBundleFor("sap.ui.core").getText(t,e)}function c(t){return!t.oConstraints||t.oConstraints.nullable!==false}function h(e,n){var r;e.oConstraints=undefined;if(n){r=n.nullable;if(r===false||r==="false"){e.oConstraints={nullable:false}}else if(r!==undefined&&r!==true&&r!=="true"){t.warning("Illegal nullable: "+r,null,e.getName())}}e._handleLocalizationChange()}var g=u.extend("sap.ui.model.odata.type.Int64",{constructor:function(t,e){u.apply(this,arguments);this.oFormatOptions=t;h(this,e);this.checkParseEmptyValueToZero()}});g.prototype.formatValue=function(t,e){var n;if(t===null||t===undefined){return null}switch(this.getPrimitiveType(e)){case"any":return t;case"float":case"int":n=f(this,t,m);if(n){throw new a(n)}return parseInt(t);case"string":return this.getFormat().format(t);default:throw new a("Don't know how to format "+this.getName()+" to "+e)}};g.prototype.getFormat=function(){if(!this.oFormat){var t=e({groupingEnabled:true},this.oFormatOptions);t.parseAsString=true;delete t.parseEmptyValueToZero;this.oFormat=r.getIntegerInstance(t)}return this.oFormat};g.prototype.getName=function(){return"sap.ui.model.odata.type.Int64"};g.prototype._handleLocalizationChange=function(){this.oFormat=null};g.prototype.parseValue=function(t,e){var n=this.getEmptyValue(t);if(n!==undefined){return n}var a;switch(this.getPrimitiveType(e)){case"string":a=this.getFormat().parse(t);if(!a){throw new i(p("EnterInt"))}break;case"int":case"float":a=r.getIntegerInstance({maxIntegerDigits:Infinity,groupingEnabled:false}).format(t);break;default:throw new i("Don't know how to parse "+this.getName()+" from "+e)}return a};g.prototype.validateValue=function(t){var e;if(t===null&&c(this)){return}if(typeof t==="string"){e=f(this,t,l);if(e){throw new o(e)}return}throw new o(p("EnterInt"))};return g});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/type/Raw", ["sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/model/odata/type/ODataType"],function(t,e,o,a){"use strict";var p=a.extend("sap.ui.model.odata.type.Raw",{constructor:function(t,e){a.apply(this,arguments);if(t!==undefined||e!==undefined||arguments.length>2){throw new Error("Unsupported arguments")}}});p.prototype.formatValue=function(e,o){if(o==="any"){return e}throw new t("Type 'sap.ui.model.odata.type.Raw' does not support formatting")};p.prototype.getName=function(){return"sap.ui.model.odata.type.Raw"};p.prototype.parseValue=function(){throw new e("Type 'sap.ui.model.odata.type.Raw' does not support parsing")};p.prototype.validateValue=function(){throw new o("Type 'sap.ui.model.odata.type.Raw' does not support validating")};return p});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/type/SByte", ["sap/ui/model/odata/type/Int"],function(t){"use strict";var e={minimum:-128,maximum:127};var n=t.extend("sap.ui.model.odata.type.SByte",{constructor:function(){t.apply(this,arguments)}});n.prototype.getName=function(){return"sap.ui.model.odata.type.SByte"};n.prototype.getRange=function(){return e};return n});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/type/Single", ["sap/base/Log","sap/ui/core/Lib","sap/ui/core/format/NumberFormat","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/model/odata/type/ODataType"],function(t,e,o,a,n,r,i){"use strict";function s(){return e.getResourceBundleFor("sap.ui.core").getText("EnterNumber")}function u(t){return!t.oConstraints||t.oConstraints.nullable!==false}function l(e,o){var a;e.oConstraints=undefined;if(o){a=o.nullable;if(a===false||a==="false"){e.oConstraints={nullable:false}}else if(a!==undefined&&a!==true&&a!=="true"){t.warning("Illegal nullable: "+a,null,e.getName())}}e._handleLocalizationChange()}var p=i.extend("sap.ui.model.odata.type.Single",{constructor:function(t,e){i.apply(this,arguments);this.oFormatOptions=t;l(this,e);this.checkParseEmptyValueToZero()}});p.prototype.formatValue=function(t,e){var o;if(t===null||t===undefined){return null}if(typeof t==="number"){o=t}else if(typeof t==="string"){o=parseFloat(t)}else if(e!=="any"){throw new a("Illegal "+this.getName()+" value: "+t)}switch(this.getPrimitiveType(e)){case"any":return t;case"float":return o;case"int":return Math.floor(o);case"string":return this.getFormat().format(parseFloat(o.toPrecision(7)));default:throw new a("Don't know how to format "+this.getName()+" to "+e)}};p.prototype.getFormat=function(){if(!this.oFormat){var t={groupingEnabled:true},e=this.oFormatOptions||{};if(e.style!=="short"&&e.style!=="long"){t.preserveDecimals=true}Object.assign(t,this.oFormatOptions);delete t.parseEmptyValueToZero;this.oFormat=o.getFloatInstance(t)}return this.oFormat};p.prototype.parseValue=function(t,e){var o=this.getEmptyValue(t,true);if(o!==undefined){return o}switch(this.getPrimitiveType(e)){case"string":var a=this.getFormat().parse(t);if(isNaN(a)){throw new n(s())}return Math.fround(a);case"int":case"float":return Math.fround(t);default:throw new n("Don't know how to parse "+this.getName()+" from "+e)}};p.prototype._handleLocalizationChange=function(){this.oFormat=null};p.prototype.validateValue=function(t){if(t===null&&u(this)){return}if(typeof t==="number"){return}throw new r(s())};p.prototype.getName=function(){return"sap.ui.model.odata.type.Single"};return p});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/type/Stream", ["sap/base/Log","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/model/odata/type/ODataType"],function(e,t,a,o,n){"use strict";function i(t,a){var o;t.oConstraints=undefined;if(a){o=a.nullable;if(o===false){t.oConstraints={nullable:false}}else if(o!==undefined&&o!==true){e.warning("Illegal nullable: "+o,null,t.getName())}}}var r=n.extend("sap.ui.model.odata.type.Stream",{constructor:function(e,t){n.apply(this,arguments);if(e!==undefined&&e!==null){throw new Error("Unsupported arguments")}i(this,t)}});r.prototype.formatValue=function(e,a){switch(this.getPrimitiveType(a)){case"any":case"string":return e;default:throw new t("Don't know how to format "+this.getName()+" to "+a)}};r.prototype.getName=function(){return"sap.ui.model.odata.type.Stream"};r.prototype.parseValue=function(){throw new a("Type 'sap.ui.model.odata.type.Stream' does not support parsing")};r.prototype.validateValue=function(){throw new o("Type 'sap.ui.model.odata.type.Stream' does not support validating")};return r});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/type/String", ["sap/base/Log","sap/ui/core/Lib","sap/ui/model/ValidateException","sap/ui/model/odata/type/ODataType","sap/ui/model/type/String"],function(e,t,i,n,s){"use strict";var r=/^\d+$/,a=/^0*(?=\d)/;function o(e,t){return t&&t.isDigitSequence&&e&&e.match(r)}function l(t,i){var n,s,r;t.oConstraints=undefined;if(i){s=i.maxLength;if(typeof s==="string"){s=parseInt(s)}if(typeof s==="number"&&!isNaN(s)&&s>0){t.oConstraints={maxLength:s}}else if(s!==undefined){e.warning("Illegal maxLength: "+i.maxLength,null,t.getName())}n=i.isDigitSequence;if(n===true||n==="true"){t.oConstraints=t.oConstraints||{};t.oConstraints.isDigitSequence=true}else if(n!==undefined&&n!==false&&n!=="false"){e.warning("Illegal isDigitSequence: "+n,null,t.getName())}r=i.nullable;if(r===false||r==="false"){t.oConstraints=t.oConstraints||{};t.oConstraints.nullable=false}else if(r!==undefined&&r!==true&&r!=="true"){e.warning("Illegal nullable: "+r,null,t.getName())}}}var u=n.extend("sap.ui.model.odata.type.String",{constructor:function(t,i){var s=t?t.parseKeepsEmptyString:undefined;n.apply(this,arguments);this.oFormatOptions=t;l(this,i);this._sParsedEmptyString=null;if(this.oConstraints&&this.oConstraints.nullable===false&&this.oConstraints.isDigitSequence){this._sParsedEmptyString="0"}else if(s!==undefined){if(s===true){this._sParsedEmptyString=""}else if(s!==false){e.warning("Illegal parseKeepsEmptyString: "+s,null,this.getName())}}}});u.prototype.formatValue=function(e,t){if(e===null&&this.getPrimitiveType(t)==="string"){return""}if(o(e,this.oConstraints)){e=e.replace(a,"");if(this.oConstraints.maxLength&&e==="0"&&this.getPrimitiveType(t)==="string"){return""}}return s.prototype.formatValue.call(this,e,t)};u.prototype.parseValue=function(e,t){var i;i=e===""?this._sParsedEmptyString:s.prototype.parseValue.apply(this,arguments);if(o(i,this.oConstraints)){i=i.replace(a,"");if(this.oConstraints.maxLength){i=i.padStart(this.oConstraints.maxLength,"0")}}return i};u.prototype.validateValue=function(e){var n=this.oConstraints||{},s=n.maxLength;if(e===null){if(n.nullable!==false){return}}else if(e===""&&this._sParsedEmptyString===""){return}else if(typeof e!=="string"){throw new i("Illegal "+this.getName()+" value: "+e)}else if(n.isDigitSequence){if(!e.match(r)){throw new i(t.getResourceBundleFor("sap.ui.core").getText("EnterDigitsOnly"))}if(s&&e.length>s){throw new i(t.getResourceBundleFor("sap.ui.core").getText("EnterMaximumOfDigits",[s]))}return}else if(!s||e.length<=s){return}throw new i(t.getResourceBundleFor("sap.ui.core").getText(s?"EnterTextMaxLength":"EnterText",[s]))};u.prototype.getName=function(){return"sap.ui.model.odata.type.String"};return u});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/type/TimeOfDay", ["sap/base/Log","sap/base/i18n/date/CalendarType","sap/base/util/extend","sap/ui/core/Lib","sap/ui/core/date/UI5Date","sap/ui/core/format/DateFormat","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/model/odata/type/ODataType"],function(t,e,o,n,i,a,r,s,l,u){"use strict";function f(t){return n.getResourceBundleFor("sap.ui.core").getText("EnterTime",[t.formatValue("23:59:58","string")])}function p(e,o){var n,i;e.oConstraints=undefined;if(o){n=o.nullable;i=o.precision;if(n===false){e.oConstraints={nullable:false}}else if(n!==undefined&&n!==true){t.warning("Illegal nullable: "+n,null,e.getName())}if(i===Math.floor(i)&&i>0&&i<=12){e.oConstraints=e.oConstraints||{};e.oConstraints.precision=i}else if(i!==undefined&&i!==0){t.warning("Illegal precision: "+i,null,e.getName())}}}var d=u.extend("sap.ui.model.odata.type.TimeOfDay",{constructor:function(t,e){u.apply(this,arguments);this.oModelFormat=undefined;this.rTimeOfDay=undefined;this.oFormat=undefined;p(this,e);this.oFormatOptions=t}});d.prototype._handleLocalizationChange=function(){this.oFormat=null};d.prototype._resetModelFormatter=function(){this.oModelFormat=undefined};d.prototype.formatValue=function(t,e){var o,n,a;if(t===undefined||t===null){return null}a=this.getPrimitiveType(e);switch(a){case"any":return t;case"object":case"string":n=t.indexOf(".");if(n>=0){t=t.slice(0,n+4)}o=this.getModelFormat().parse(t);if(o){if(a==="object"){return i.getInstance(1970,0,1,o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds())}return this.getFormat().format(o)}throw new r("Illegal "+this.getName()+" value: "+t);default:throw new r("Don't know how to format "+this.getName()+" to "+e)}};d.prototype.getDateValue=function(t){return t?i.getInstance("1970-01-01T"+t):null};d.prototype.getFormat=function(){if(!this.oFormat){var t=o({strictParsing:true},this.oFormatOptions);t.UTC=true;this.oFormat=a.getTimeInstance(t)}return this.oFormat};d.prototype.getISOStringFromModelValue=function(t){return t?t:null};d.prototype.getModelFormat=function(){var t="HH:mm:ss",o;if(!this.oModelFormat){o=this.oConstraints&&this.oConstraints.precision;if(o){t+="."+"".padEnd(o,"S")}this.oModelFormat=a.getTimeInstance({calendarType:e.Gregorian,pattern:t,strictParsing:true,UTC:true})}return this.oModelFormat};d.prototype.getModelValue=function(t){var e;if(t===null){e=null}else{i.checkDate(t);e=i.getInstance(0);e.setUTCHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds());e=this.getModelFormat().format(e)}this.validateValue(e);return e};d.prototype.getModelValueFromISOString=function(t){return t?this.getModelFormat().format(i.getInstance("1970-01-01T"+t+"Z")):null};d.prototype.getName=function(){return"sap.ui.model.odata.type.TimeOfDay"};d.prototype.parseValue=function(t,e){var o;if(t===""||t===null){return null}switch(this.getPrimitiveType(e)){case"object":return this.getModelFormat().format(t,false);case"string":o=this.getFormat().parse(t);if(!o){throw new s(f(this))}return this.getModelFormat().format(o);default:throw new s("Don't know how to parse "+this.getName()+" from "+e)}};d.prototype.validateValue=function(t){var e;if(t===null){if(this.oConstraints&&this.oConstraints.nullable===false){throw new l(f(this))}return}if(!this.rTimeOfDay){e=this.oConstraints&&this.oConstraints.precision;this.rTimeOfDay=new RegExp("^(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d"+(e?"(\\.\\d{1,"+e+"})?":"")+")?$")}if(!this.rTimeOfDay.test(t)){throw new l("Illegal sap.ui.model.odata.type.TimeOfDay value: "+t)}};return d});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/AnnotationHelper", ["./_AnnotationHelperExpression"],function(e){"use strict";var t=/[\\{}:]/,n=/\/\$count$/,r=/\$(?:(?:Annotation)|(?:(?:Navigation)?Property))?Path/,i=/^(.+?\/(\$(?:Annotation)?Path))(\/?)(.*)$/,a=/\$(?:(?:Any|Navigation)?Property|ModelElement)Path/,o={format:function(t,n){var r,o=n.context.getModel(),s=n.context.getPath();function l(r){if(s.endsWith("/")){s=s.slice(0,-1)}return e.getExpression({asExpression:false,complexBinding:true,formatOptions:n.arguments&&n.arguments[1],ignoreAsPrefix:n.overload&&n.overload.$IsBound&&!s.includes("/$Parameter/")?n.overload.$Parameter[0].$Name+"/":"",model:o,parameters:n.arguments&&n.arguments[0],path:s,prefix:r,value:t,$$valueAsPromise:true})}if(s.endsWith("/$Path")){s=s.slice(0,-6);t={$Path:t}}else if(s.endsWith("/$PropertyPath")){s=s.slice(0,-14);t={$PropertyPath:t}}r=a.exec(s);if(r){throw new Error("Unsupported path segment "+r[0]+" in "+s)}r=i.exec(s);if(r&&s.length>r[1].length){if(i.test(r[4])){throw new Error("Only one $Path or $AnnotationPath segment is supported: "+s)}return o.fetchObject(r[1]).then(function(e){var t=r[2]==="$AnnotationPath",n=t?e.split("@")[0]:e,i;if(!t&&r[3]){n+="/"}else if(!n.endsWith("/")){i=n.lastIndexOf("/");n=i<0?"":n.slice(0,i+1)}return l(n)})}return l("")},getNavigationBinding:function(e){e=o.getNavigationPath(e);if(t.test(e)){throw new Error("Invalid OData identifier: "+e)}return e?"{"+e+"}":e},getNavigationPath:function(e){var t;if(!e||e[0]==="@"){return""}if(n.test(e)){return e.slice(0,-7)}t=e.indexOf("@");if(t>-1){e=e.slice(0,t)}if(e[e.length-1]==="/"){e=e.slice(0,-1)}if(e.includes(".")){e=e.split("/").filter(function(e){return!e.includes(".")}).join("/")}return e},getValueListType:function(e,t){var n=typeof e==="string"?"/"+t.schemaChildName+"/"+e:t.context.getPath();return t.$$valueAsPromise?t.context.getModel().fetchValueListType(n).unwrap():t.context.getModel().getValueListType(n)},isMultiple:function(e,t){var r;function i(e){return e===true}if(!e||e[0]==="@"){return false}if(n.test(e)){return true}r=e.indexOf("@");if(r>-1){e=e.slice(0,r)}if(e[e.length-1]!=="/"){e+="/"}e="/"+t.schemaChildName+"/"+e+"$isCollection";return t.$$valueAsPromise?t.context.getModel().fetchObject(e).then(i).unwrap():t.context.getObject(e)===true},label:function(e,t){var n;if(e.Label){return o.value(e.Label,{context:t.context.getModel().createBindingContext("Label",t.context)})}if(e.Value&&e.Value.$Path){n=t.context.getModel().createBindingContext("Value/$Path@com.sap.vocabularies.Common.v1.Label",t.context);if(t.$$valueAsPromise){return n.getModel().fetchObject("",n).then(function(e){return o.value(e,{context:n})}).unwrap()}return o.value(n.getObject(""),{context:n})}},resolve$Path:function(e){var t,n,i,a,o,s=e.getPath(),l,u;for(;;){o=s.match(r);if(!o){return s}i=o.index;t=i+o[0].length;l=s.slice(0,t);u=e.getModel().getObject(l);if(typeof u!=="string"){throw new Error("Cannot resolve "+l+" due to unexpected value "+u)}l=s.slice(0,i);n=l.indexOf("@");a=l.lastIndexOf("/",n);if(a===0){l=l.slice(0,n);if(n>1&&u){l+="/"}}else{l=l.slice(0,a+1)}s=l+u+s.slice(t)}},value:function(t,n){var r=n.context.getPath();if(r.endsWith("/")){r=r.slice(0,-1)}else if(r.endsWith("/$Path")){r=r.slice(0,-6);t={$Path:t}}else if(r.endsWith("/$PropertyPath")){r=r.slice(0,-14);t={$PropertyPath:t}}return e.getExpression({asExpression:false,complexBinding:false,ignoreAsPrefix:n.overload&&n.overload.$IsBound&&!r.includes("/$Parameter/")?n.overload.$Parameter[0].$Name+"/":"",model:n.context.getModel(),parameters:n.arguments&&n.arguments[0],path:r,prefix:n.prefix??"",value:t,$$valueAsPromise:n.$$valueAsPromise})}};return o},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/Context", ["./lib/_Helper","sap/base/Log","sap/ui/base/SyncPromise","sap/ui/model/Context"],function(e,t,i,n){"use strict";var r="sap.ui.model.odata.v4.Context",o=0,s,h=Number.MIN_SAFE_INTEGER,a=n.extend("sap.ui.model.odata.v4.Context",{constructor:d});function d(e,t,i,r,o,s,h){if(i[0]!=="/"){throw new Error("Not an absolute path: "+i)}if(i.endsWith("/")){throw new Error("Unsupported trailing slash: "+i)}n.call(this,e,i);this.oBinding=t;this.setCreated(o);this.oDeletePromise=null;this.bFiringCreateActivate=false;this.iGeneration=s||0;this.bInactive=h||undefined;this.iIndex=r;this.bKeepAlive=false;this.bOutOfPlace=false;this.bSelected=false;this.fnOnBeforeDestroy=undefined}a.prototype.adjustPredicate=function(e,t,i){var n=this.sPath;this.sPath=n.replace(e,t);if(i){i(n,this.sPath)}this.oModel.getDependentBindings(this).forEach(function(i){i.adjustPredicate(e,t)})};a.prototype.checkUpdate=function(){if(this.oModel){this.oModel.getDependentBindings(this).forEach(function(e){e.checkUpdate()})}};a.prototype.checkUpdateInternal=function(){return i.all(this.oModel.getDependentBindings(this).map(function(e){return e.checkUpdateInternal()}))};a.prototype.collapse=function(e){switch(this.getProperty("@$ui5.node.level")===0?undefined:this.isExpanded()){case true:this.oBinding.collapse(this,e);break;case false:throw new Error("Already collapsed: "+this);default:throw new Error("Not expandable: "+this)}};a.prototype.created=function(){return this.oCreatedPromise};a.prototype.delete=function(t,n){var r,o=null,s=this;if(this.isDeleted()){throw new Error("Must not delete twice: "+this)}if(e.isDataAggregation(this.oBinding.mParameters)){throw new Error("Cannot delete "+this+" when using data aggregation")}this.oBinding.checkSuspended();if(this.isTransient()){if(!this.oBinding.getHeaderContext){throw new Error("Cannot delete "+this)}if(this.iIndex===undefined){return Promise.resolve()}t=null}else if(t===null){if(this.iIndex!==undefined||!this.isKeepAlive()){throw new Error("Cannot delete "+this)}}if(this.oBinding.mParameters.$$aggregation){if(this.iIndex===undefined){throw new Error("Unsupported kept-alive context: "+this)}if(t!==null){const e=t??this.oBinding.getUpdateGroupId();if(this.oModel.isApiGroup(e)){throw new Error("Unsupported group ID: "+e)}}}if(t===null){r=i.resolve();n=true}else{e.checkGroupId(t,false,true);r=this.fetchCanonicalPath().then(function(e){return e.slice(1)});o=this.oBinding.lockGroup(t,true,true)}return Promise.resolve(r.then(function(e){if(o&&s.oModel.getMetaModel().isAddressViaNavigationPath()){e=s.getPath().slice(1)}return s.oBinding.delete(o,e,s,null,n,function(){if(s.oDeletePromise){s.oDeletePromise=null;if(s.bSelected){s.oBinding.getHeaderContext().onSelectionChanged(s)}}})}).catch(function(e){if(o){o.unlock(true)}throw e}))};a.prototype.destroy=function(){var e=this.fnOnBeforeDestroy;if(e){this.fnOnBeforeDestroy=undefined;e()}this.oModel?.getDependentBindings(this).forEach(function(e){e.setContext(undefined)});this.oBinding=undefined;delete this.mChangeListeners;this.oCreatedPromise=undefined;this.oSyncCreatePromise=undefined;this.bInactive=undefined;this.bKeepAlive=undefined;this.bSelected=false;this.oModel=undefined;n.prototype.destroy.call(this)};a.prototype.doDelete=function(e,t,i,n,o,s){var h=this.oModel,a=this;this.oDeletePromise=o.deleteFromCache(e,t,i,n,s).then(function(){var e=a.sPath.slice(1);h.getAllBindings().forEach(function(t){t.removeCachesAndMessages(e,true)})}).catch(function(e){h.reportError("Failed to delete "+a.getPath(),r,e);a.checkUpdate();throw e});if(this.bSelected){this.oBinding.getHeaderContext().onSelectionChanged(this)}if(e&&h.isApiGroup(e.getGroupId())){h.getDependentBindings(this).forEach(function(e){e.setContext(undefined)})}return this.oDeletePromise};a.prototype.doSetProperty=function(t,n,o,s,h){var a=this.oModel,d=a.getMetaModel(),u,c,l=this;if(this.isDeleted()){if(o){o.unlock()}throw new Error("Must not modify a deleted entity: "+this)}if(t==="@$ui5.context.isSelected"){this.setSelected(n);if(o){o.unlock();o=null}if(this.oBinding.getHeaderContext?.()===this){return i.resolve()}}if(o&&this.isTransient()&&!this.isInactive()){c=this.getValue();u=c&&e.getPrivateAnnotation(c,"transient");if(u instanceof Promise){o.unlock();o=o.getUnlockedCopy();this.doSetProperty(t,n,null,true,true).catch(a.getReporter());return i.resolve(u).then(function(e){return e&&l.created()}).then(function(){return l.doSetProperty(t,n,o,s)})}}if(a.bAutoExpandSelect){t=d.getReducedPath(a.resolve(t,this),this.oBinding.getBaseForPathReduction())}return this.withCache(function(i,u,c){return c.doSetProperty(u,n,o)||d.fetchUpdateData(t,l,!o).then(function(u){var f=e.getRelativePath(u.entityPath,c.oReturnValueContext?c.oReturnValueContext.getPath():c.getResolvedPath()),p=false;function g(e){a.reportError("Failed to update path "+a.resolve(t,l),r,e);P(false)}function P(e){if(p){c.firePatchCompleted(e);p=false}}function v(){p=true;c.firePatchSent()}if(!o){return i.setProperty(u.propertyPath,n,f,h)}if(l.bInactive&&!l.bFiringCreateActivate){i.setProperty(u.propertyPath,n,f,h).catch(a.getReporter());l.bFiringCreateActivate=true;l.bInactive=c.fireCreateActivate(l)?false:1;l.bFiringCreateActivate=false;i.setInactive(f,l.bInactive)}const C=d.isAddressViaNavigationPath()?u.entityPath.slice(1):u.editUrl;const y=e.hasPathSuffix(l.sPath,f)?l.setCreated.bind(l):null;return i.update(o,u.propertyPath,n,s?undefined:g,C,f,d.getUnitOrCurrencyPath(l.oModel.resolve(t,l)),c.isPatchWithoutSideEffects(),v,l.isEffectivelyKeptAlive.bind(l),y).then(function(){P(true)},function(e){P(false);throw e})})},t,false,true)};a.prototype.doSetSelected=function(e,t){if(this.bSelected===e){return false}this.bSelected=e;if(!t){this.oBinding.onKeepAliveChanged(this)}const i=this.oBinding.getHeaderContext();if(i===this){if(!e){this.iSelectionCount=0}}else if(!this.isDeleted()){i.onSelectionChanged(this)}if(!t){this.withCache((t,i)=>{if(this.oBinding){t.setProperty("@$ui5.context.isSelected",e,i)}},"")}return true};a.prototype.expand=function(e){switch(this.isExpanded()){case true:if(!e){throw new Error("Already expanded: "+this)}this.oBinding.collapse(this,false,true);case false:{const t=e?Number.MAX_SAFE_INTEGER:1;return Promise.resolve(this.oBinding.expand(this,t)).then(()=>{})}default:throw new Error("Not expandable: "+this)}};a.prototype.fetchCanonicalPath=function(){return this.oModel.getMetaModel().fetchCanonicalPath(this)};a.prototype.fetchPrimitiveValue=function(e,t,n){var r,o=[this.fetchValue(e,null,n)],s=this.oModel.resolve(e,this);if(t){o.push(this.oModel.getMetaModel().fetchUI5Type(s))}return i.all(o).then(function(e){var i=e[1],n=e[0];if(n&&typeof n==="object"){r=new Error("Accessed value is not primitive: "+s);r.isNotPrimitive=true;throw r}return t?i.formatValue(n,"string"):n})};a.prototype.fetchValue=function(t,n,r){if(this.iIndex===h){return i.resolve()}if(this.oBinding.getHeaderContext?.()===this){const o=this.bSelected?undefined:this.iSelectionCount??0;if(t&&t.startsWith(this.sPath)){t=t.slice(this.sPath.length+1)}if(!t){if(n){throw new Error("Cannot register change listener for header context object")}return this.oBinding.fetchValue(this.sPath+"/$count",null,r).then(e=>({"@$ui5.context.isSelected":this.bSelected,$count:e,$selectionCount:o}))}else if(t==="@$ui5.context.isSelected"){this.mChangeListeners??={};e.registerChangeListener(this,t,n);return i.resolve(this.bSelected)}else if(t==="$selectionCount"){this.mChangeListeners??={};e.registerChangeListener(this,t,n);return i.resolve(o)}else if(t!=="$count"){throw new Error("Invalid header path: "+t)}}if(!t){t=this.sPath}else if(t[0]!=="/"){t=this.oModel.resolve(t,this);if(this.oModel.bAutoExpandSelect){t=this.oModel.getMetaModel().getReducedPath(t,this.oBinding.getBaseForPathReduction())}}return this.oBinding.fetchValue(t,n,r)};a.prototype.getAndRemoveCollection=function(e){return this.withCache(function(e,t){return e.getAndRemoveCollection(t)},e,true).unwrap()};a.prototype.getBinding=function(){return this.oBinding};a.prototype.getCanonicalPath=e.createGetMethod("fetchCanonicalPath",true);a.prototype.getFilter=function(){if(!this.oBinding.getHeaderContext||this.isTransient()){throw new Error("Not a list context path to an entity: "+this)}const t=e.getPredicateIndex(this.sPath);const i=this.sPath.slice(t).replace(/,?\$isTotal=true\)$/,")");if(i==="()"){return null}const n=this.oModel.getMetaModel();const r=e.getMetaPath(this.sPath);const o=n.getObject(r+"/");return e.getFilterForPredicate(i,o,n,r,true)};a.prototype.getGeneration=function(e){if(this.iGeneration||e){return this.iGeneration}return this.oBinding.getGeneration()};a.prototype.getGroupId=function(){return this.oBinding.getGroupId()};a.prototype.getIndex=function(){if(this.iIndex===undefined){return undefined}if(this.oBinding?.isFirstCreateAtEnd()){if(this.iIndex<0){return this.oBinding.bLengthFinal?this.oBinding.iMaxLength-this.iIndex-1:-this.iIndex-1}return this.iIndex}return this.getModelIndex()};a.prototype.getModelIndex=function(){if(this.iIndex!==undefined&&this.oBinding?.iCreatedContexts){return this.iIndex+this.oBinding.iCreatedContexts}return this.iIndex};a.prototype.getObject=function(t){return e.publicClone(this.getValue(t))};a.prototype.getParent=function(){if(!this.oBinding.fetchOrGetParent){throw new Error("Not a list binding's context: "+this)}return this.oBinding.fetchOrGetParent(this)};a.prototype.getProperty=function(e,i){var n,o;this.oBinding.checkSuspended();o=this.fetchPrimitiveValue(e,i,true);if(o.isRejected()){o.caught();n=o.getResult();if(n.isNotPrimitive){throw n}else if(!n.$cached){t.warning(n.message,e,r)}}return o.isFulfilled()?o.getResult():undefined};a.prototype.getQueryOptionsForPath=function(e){return this.oBinding.getQueryOptionsForPath(e)};a.prototype.getSibling=function(e){return this.oBinding.fetchOrGetSibling(this,e)};a.prototype.getUpdateGroupId=function(){return this.oBinding.getUpdateGroupId()};a.prototype.getValue=function(e){var t,i=this;this.oBinding.checkSuspended();t=this.fetchValue(e,null,true).catch(function(e){if(!e.$cached){i.oModel.reportError("Unexpected error",r,e)}});if(t.isFulfilled()){return t.getResult()}};a.prototype.hasPendingChanges=function(){var e=this;return this.isTransient()&&this.isInactive()!==true||this.oDeletePromise?.isPending()||this.oBinding.hasPendingChangesForPath(this.sPath)||this.oModel.getDependentBindings(this).some(function(t){return t.oCache?t._hasPendingChanges(false,e.sPath):t.hasPendingChangesInDependents(false,e.sPath)})||this.oModel.withUnresolvedBindings("hasPendingChangesInCaches",this.sPath.slice(1))};a.prototype.isAggregated=function(){this.oBinding.checkSuspended();const e=this.oBinding.mParameters.$$aggregation?.$leafLevelAggregated;if(e===undefined){return false}return e||this.oBinding.getHeaderContext()!==this&&this.isExpanded()!==undefined};a.prototype.isAncestorOf=function(e){if(!this.oBinding.isAncestorOf){throw new Error("Missing recursive hierarchy")}return this.oBinding.isAncestorOf(this,e)};a.prototype.isDeleted=function(){return!!this.oDeletePromise};a.prototype.isEffectivelyKeptAlive=function(){var e=this.oBinding.mParameters;return this.bKeepAlive&&!this.isDeleted()||!e.$$sharedRequest&&this.oBinding.getHeaderContext?.()&&this.oBinding.getHeaderContext().isSelected()!==this.isSelected()&&(e.$$ownRequest||!this.oBinding.isRelative())&&this.sPath.indexOf("(",this.sPath.lastIndexOf("/"))>0};a.prototype.isExpanded=function(){return this.getProperty("@$ui5.node.isExpanded")};a.prototype.isInactive=function(){return this.bInactive};a.prototype.isKeepAlive=function(){return this.bKeepAlive};a.prototype.isOutOfPlace=function(){return this.bOutOfPlace};a.prototype.isSelected=function(){return this.bSelected&&!this.oDeletePromise};a.prototype.isTransient=function(){return this.oSyncCreatePromise?.isPending()};a.prototype.move=function({copy:e,nextSibling:t,parent:i}={}){if(t===undefined&&i===undefined){return Promise.resolve()}if(this.iIndex===undefined||this.isDeleted()||this.isTransient()){throw new Error("Cannot move "+this)}if(i&&(i.iIndex===undefined||i.isDeleted()||i.isTransient())){throw new Error("Cannot move to "+i)}if(!e&&this.isAncestorOf(i)){throw new Error("Unsupported parent context: "+i)}return Promise.resolve(this.oBinding.move(this,i,t,e))};a.prototype.onSelectionChanged=function(t){this.iSelectionCount??=0;this.iSelectionCount+=t.isSelected()?+1:-1;if(this.iSelectionCount<0||t===this){throw new Error("Unexpected $selectionCount: "+this.iSelectionCount)}e.fireChange(this.mChangeListeners,"$selectionCount",this.iSelectionCount)};a.prototype.patch=function(e){return this.withCache(function(t,i){t.patch(i,e)},"")};a.prototype.refresh=function(e,t){this.requestRefresh.apply(this,arguments).catch(this.oModel.getReporter())};a.prototype.refreshDependentBindings=function(e,t,n,r){return i.all(this.oModel.getDependentBindings(this).map(function(i){return i.refreshInternal(e,t,n,r)}))};a.prototype.replaceWith=function(t){var i;this.oBinding.checkSuspended();if(this.isTransient()||this.isDeleted()){throw new Error("Cannot replace "+this)}if(t.oBinding!==this.oBinding||t.iIndex!==undefined||t.isDeleted()||!t.isKeepAlive()){throw new Error("Cannot replace with "+t)}i=t.getValue();this.oBinding.doReplaceWith(this,i,e.getPrivateAnnotation(i,"predicate"))};a.prototype.requestCanonicalPath=e.createRequestMethod("fetchCanonicalPath");a.prototype.requestObject=function(t){this.oBinding.checkSuspended();return Promise.resolve(this.fetchValue(t)).then(e.publicClone)};a.prototype.requestParent=function(){if(!this.oBinding.fetchOrGetParent){throw new Error("Not a list binding's context: "+this)}return Promise.resolve(this.oBinding.fetchOrGetParent(this,true))};a.prototype.requestProperty=function(e,i){var n=Array.isArray(e)?e:[e],o=this;this.oBinding.checkSuspended();return Promise.all(n.map(function(e){return o.oBinding.fetchIfChildCanUseCache(o,e,undefined,true).then(function(n){if(n){return o.fetchPrimitiveValue(n,i)}t.error("Not a valid property path: "+e,undefined,r)})})).then(function(t){return Array.isArray(e)?t:t[0]})};a.prototype.requestRefresh=function(t,i){var n;e.checkGroupId(t);if(this.oBinding.mParameters.$$aggregation){throw new Error("Cannot refresh "+this+" when using data aggregation")}this.oBinding.checkSuspended();if(this.hasPendingChanges()){throw new Error("Cannot refresh entity due to pending changes: "+this)}if(this.oBinding.refreshSingle){n=this.oBinding.refreshSingle(this,this.oBinding.lockGroup(t,true),i)}else{if(arguments.length>1){throw new Error("Unsupported parameter bAllowRemoval: "+i)}n=this.oBinding.refreshReturnValueContext(this,t)||this.oBinding.requestRefresh(t)}this.oModel.withUnresolvedBindings("removeCachesAndMessages",this.sPath.slice(1));return Promise.resolve(n).then(function(){})};a.prototype.requestSibling=function(e){return Promise.resolve(this.oBinding.fetchOrGetSibling(this,e,true))};a.prototype.requestSideEffects=function(t,n){var r,o=this.oModel.getMetaModel(),s=[],h=[],a,d,u=this;function c(e){if(!e){return false}if(e==="*"){return true}if(e.endsWith("/*")){e=e.slice(0,-2)}return!e.includes("*")}this.oBinding.checkSuspended();e.checkGroupId(n);if(this.isTransient()||this.isDeleted()){throw new Error("Unsupported context: "+this)}if(!t||!t.length){throw new Error("Missing edm:(Navigation)PropertyPath expressions")}if(!this.oBinding.isResolved()){throw new Error("Cannot request side effects of unresolved binding's context: "+this)}r=o.getObject("/$EntityContainer");if(!r){throw new Error("Missing metadata")}r="/"+r+"/";t.map(function(e){if(e&&typeof e==="object"){if(c(e.$PropertyPath)){return e.$PropertyPath}if(typeof e.$NavigationPropertyPath==="string"&&!e.$NavigationPropertyPath.includes("*")){return e.$NavigationPropertyPath}}else if(typeof e==="string"&&(!e||c(e))){return e}throw new Error("Not an edm:(Navigation)PropertyPath expression: "+JSON.stringify(e))}).forEach(function(e){if(e[0]==="/"){if(!e.startsWith(r)){throw new Error("Path must start with '"+r+"': "+e)}h.push(e.slice(r.length-1))}else{s.push(e)}});a=this.oBinding.getRootBinding();d=a.getResolvedPath();s=s.reduce(function(t,i){return t.concat(o.getAllPathReductions(e.buildPath(u.getPath(),i),d))},[]);s=e.filterPaths(h,s);n??=this.getUpdateGroupId();return Promise.resolve(i.resolve(this.oModel.isAutoGroup(n)&&this.oModel.oRequestor.waitForRunningChangeRequests(n).then(function(){u.oModel.oRequestor.relocateAll("$parked."+n,n)})).then(function(){return i.all([u.oModel.requestSideEffects(n,h),u.requestSideEffectsInternal(s,n)])})).then(function(){})};a.prototype.requestSideEffectsInternal=function(t,n){var r=this,o,s=r,h,a=[],d,u=[],c,l=[];if(!t.length){return undefined}for(;;){o=s.oBinding;c=o.getPath();d=o.getContext();if(o.oCache?.hasChangeListeners()||!h&&o.oCache!==null){h=s}if(h&&c){break}if(!o.getBoundContext){throw new Error("Not a context binding: "+o)}s=d}o=h.oBinding;t.forEach(function(t){var i=e.getRelativePath(t,h.getPath());if(i===undefined){u.push(t)}else{a.push(i)}});if(u.length){l.push(o.getContext().requestSideEffectsInternal(u,n))}if(a.length&&o.oCache!==undefined){l.push(o.requestSideEffects(n,a,h))}return i.all(l)};a.prototype.resetChanges=function(){var e=this.oDeletePromise?[this.oDeletePromise.catch(function(){})]:[],t=this;if(this.iIndex===h||this.oBinding.getHeaderContext&&!this.bInactive&&this.isTransient()||this.oBinding.getHeaderContext?.()===this||this.oBinding.oOperation&&this.oBinding.getParameterContext()===this){throw new Error("Cannot reset: "+this)}this.oBinding.checkSuspended();this.oBinding.resetChangesForPath(this.sPath,e);if(this.bInactive===1){this.bInactive=true}this.oModel.getDependentBindings(this).forEach(function(i){if(i.oCache){e.push(i._resetChanges(t.sPath))}else{i.resetChangesInDependents(e,t.sPath);i.resetInvalidDataState()}});return Promise.all(e).then(function(){})};a.prototype.resetKeepAlive=function(){this.bKeepAlive=false;this.doSetSelected(false,true)};a.prototype.setCreated=function(e){if(e&&this.oCreatedPromise){throw new Error("Already 'created'")}this.oCreatedPromise=e&&Promise.resolve(e).then(function(){});this.oSyncCreatePromise=e};a.prototype.setInactive=function(){if(!this.bInactive){throw new Error("Not inactive: "+this.bInactive)}this.bInactive=true};a.prototype.setKeepAlive=function(t,i,n){var r=this;if(this.isTransient()||t&&this.isDeleted()){throw new Error("Unsupported context: "+this)}e.getPredicateIndex(this.sPath);this.oBinding.checkKeepAlive(this,t);if(t&&n){if(!this.oModel.bAutoExpandSelect){throw new Error("Missing parameter autoExpandSelect at model")}this.bKeepAlive=t;this.oModel.getMetaModel().fetchObject(e.getMetaPath(this.sPath)+"/@com.sap.vocabularies.Common.v1.Messages/$Path").then(function(e){if(!e){throw new Error("Missing @com.sap.vocabularies.Common.v1.Messages")}return r.oBinding.fetchIfChildCanUseCache(r,e,undefined,true)}).then(function(e){return r.fetchValue(e)}).catch(this.oModel.getReporter())}this.bKeepAlive=t;this.fnOnBeforeDestroy=t?i:undefined;this.oBinding.onKeepAliveChanged(this)};a.prototype.setNewGeneration=function(){o+=1;this.iGeneration=o};a.prototype.setOutOfPlace=function(e){if(!e){this.setPersisted()}else if(!this.created()){throw new Error("Not 'created persisted'")}this.bOutOfPlace=e};a.prototype.setPersisted=function(e){if(!e&&this.isTransient()!==false){throw new Error("Not 'created persisted'")}this.bInactive=undefined;this.oCreatedPromise=undefined;this.oSyncCreatePromise=undefined};a.prototype.setProperty=function(t,i,n,o){var s=null,h=this.oModel,a=this;this.oBinding.checkSuspended();if(typeof i==="function"||i&&typeof i==="object"){throw new Error("Not a primitive value")}if(n!==null){e.checkGroupId(n);s=this.oBinding.lockGroup(n,true,true)}return Promise.resolve(this.doSetProperty(t,i,s,!o)).catch(function(e){if(s){s.unlock(true)}h.reportError("Failed to update path "+h.resolve(t,a),r,e);throw e})};a.prototype.setSelected=function(t){if(!this.oBinding?.getHeaderContext){throw new Error("Unsupported context: "+this)}if(t&&this.isDeleted()){throw new Error("Must not select a deleted entity: "+this)}const i=this.oBinding.getHeaderContext()===this&&this.oBinding._getAllExistingContexts().reduce((e,i)=>i.doSetSelected(t)||e,false);const n=this.doSetSelected(t);if(n&&this.mChangeListeners){e.fireChange(this.mChangeListeners,"@$ui5.context.isSelected",t)}if(n||i){this.oBinding.fireSelectionChanged(this)}};a.prototype.toString=function(){var e="";if(!this.oModel){e=";destroyed"}else if(this.isDeleted()){e=";deleted"}if(this.iIndex!==undefined){if(!e){switch(this.isTransient()){case false:e=";createdPersisted";break;case true:e=this.isInactive()?";inactive":";transient";break}if(this.isSelected()){e+=";selected"}}e="["+this.iIndex+e+"]"}else if(this.isSelected()){e+=";selected"}return this.sPath+e};a.prototype.updateAfterCreate=function(e,t){i.all(this.oModel.getDependentBindings(this).map(function(i){return i.updateAfterCreate(e,t)})).catch(this.oModel.getReporter())};a.prototype.withCache=function(e,t,n,r){if(this.iIndex===h){return i.resolve()}return this.oBinding.withCache(e,this.oModel.resolve(t,this),n,r)};s={create:function(e,t,i,n,r,o){return new a(e,t,i,n,r,0,o)},createNewContext:function(e,t,i){o+=1;return new a(e,t,i,undefined,undefined,o)}};Object.defineProperty(s,"VIRTUAL",{value:h});return s},false);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/ODataBinding", ["./lib/_Helper","sap/ui/base/SyncPromise","sap/ui/model/ChangeReason","sap/ui/model/odata/OperationMode","sap/ui/model/odata/v4/Context"],function(e,t,n,i,r){"use strict";var o=[n.Context,n.Change,n.Refresh,n.Sort,n.Filter],s=/\/\d|\(\$uid=/;function a(e,t){return o.indexOf(e)>o.indexOf(t)}function h(){this.mCacheByResourcePath=undefined;this.oCache=null;this.oCachePromise=t.resolve(null);this.mCacheQueryOptions=undefined;this.fnDeregisterChangeListener=undefined;this.oFetchCacheCallToken=undefined;this.mLateQueryOptions=undefined;this.sReducedPath=undefined;this.sResumeChangeReason=undefined}h.prototype._hasPendingChanges=function(e,t){return this.isResolved()&&(this.hasPendingChangesForPath("",e)||this.hasPendingChangesInDependents(e,t))};h.prototype._resetChanges=function(e){var t=[];this.checkSuspended();this.resetChangesForPath("",t);this.resetChangesInDependents(t,e);this.resetInvalidDataState();return Promise.all(t).then(function(){})};h.prototype.adjustPredicate=function(e,t){this.sReducedPath=this.sReducedPath.replace(e,t)};h.prototype.checkBindingParameters=function(t,n){var r=this;Object.keys(t).forEach(function(o){var s=t[o];if(!o.startsWith("$$")){return}if(!n.includes(o)){throw new Error("Unsupported binding parameter: "+o)}switch(o){case"$$aggregation":break;case"$$groupId":case"$$updateGroupId":e.checkGroupId(s,false,"Unsupported value for binding parameter '"+o+"': ");break;case"$$ignoreMessages":case"$$sharedRequest":if(s!==true&&s!==false){throw new Error("Unsupported value for binding parameter '"+o+"': "+s)}break;case"$$inheritExpandSelect":if(s!==true&&s!==false){throw new Error("Unsupported value for binding parameter "+"'$$inheritExpandSelect': "+s)}if(!r.oOperation){throw new Error("Unsupported binding parameter $$inheritExpandSelect: "+"binding is not an operation binding")}if(t.$expand){throw new Error("Must not set parameter $$inheritExpandSelect on a binding "+"which has a $expand binding parameter")}break;case"$$operationMode":if(s!==i.Server){throw new Error("Unsupported operation mode: "+s)}break;case"$$getKeepAliveContext":if(r.isRelative()&&!t.$$ownRequest){throw new Error("$$getKeepAliveContext requires $$ownRequest in a relative binding")}["$$aggregation","$$canonicalPath","$$sharedRequest"].forEach(function(n,i){if(n in t&&(i>0||e.isDataAggregation(t))){throw new Error("Cannot combine $$getKeepAliveContext and "+n)}});case"$$canonicalPath":case"$$clearSelectionOnFilter":case"$$noPatch":case"$$ownRequest":case"$$patchWithoutSideEffects":if(s!==true){throw new Error("Unsupported value for binding parameter '"+o+"': "+s)}break;case"$$separate":if(t.$$aggregation){throw new Error("Cannot combine $$aggregation and $$separate")}break;default:throw new Error("Unknown binding-specific parameter: "+o)}})};h.prototype.checkSameCache=function(e,t){var n;if(this.oCache!==e||t!==undefined&&this.oCache.iResetCount!==t){n=new Error(this+" is ignoring response from inactive cache: "+e);n.canceled=true;throw n}};h.prototype.checkSuspended=function(e){if(this.isRootBindingSuspended()&&(!e||this.isRoot()||this.getResumeChangeReason())){throw new Error("Must not call method when the binding's root binding is suspended: "+this)}};h.prototype.checkTransient=function(){if(this.isTransient()){throw new Error("Must not call method when the binding is part of a deep create: "+this)}};h.prototype.checkUpdate=function(e){if(arguments.length>1){throw new Error("Only the parameter bForceUpdate is supported")}this.checkUpdateInternal(e).catch(this.oModel.getReporter())};h.prototype.createAndSetCache=function(e,t,n,i,r,o){var s,a,h;this.mCacheQueryOptions=Object.assign({},this.oModel.mUriParameters,e);if(this.bRelative){s=this.mCacheByResourcePath&&this.mCacheByResourcePath[t];h=n.getGeneration?.()??0;if(s&&s.$generation>=h){s.setActive(true)}else{a=this.oModel.resolve(this.sPath,n).slice(1);s=this.doCreateCache(t,this.mCacheQueryOptions,n,a,i,r,o);if(!(this.mParameters&&this.mParameters.$$sharedRequest)){this.mCacheByResourcePath??={};this.mCacheByResourcePath[t]=s}s.$deepResourcePath=a;s.$generation=h}}else{s=this.doCreateCache(t,this.mCacheQueryOptions,undefined,undefined,i,r,o)}if(o&&o!==s){this.deregisterChangeListener();o.setActive(false)}if(this.mLateQueryOptions){s.setLateQueryOptions(this.mLateQueryOptions)}this.oCache=s;return s};h.prototype.deregisterChangeListener=function(){this.fnDeregisterChangeListener?.();this.fnDeregisterChangeListener=undefined};h.prototype.destroy=function(){this.mCacheByResourcePath=undefined;this.deregisterChangeListener();this.oCachePromise.then(function(e){e?.setActive(false)},function(){});this.oCache=null;this.oCachePromise=t.resolve(null);this.mCacheQueryOptions=undefined;this.mLateQueryOptions=undefined;this.oContext=undefined;this.oFetchCacheCallToken=undefined};h.prototype.getEventingParent=function(){return this.oModel};h.prototype.fetchCache=function(e,n,i,r,o,s){var a=this.oCache,h={oOldCache:a===undefined?this.oFetchCacheCallToken.oOldCache:a},u,c=this;if(!this.bRelative){e=undefined}if(!a&&i){if(a===undefined){throw new Error("Unsupported bKeepQueryOptions while oCachePromise is pending")}return}if(s&&!i){throw new Error("Unsupported bSync w/o bKeepQueryOptions")}this.oCache=undefined;this.oFetchCacheCallToken=h;if(i){this.oCachePromise=t.resolve(s||Promise.resolve()).then(function(){return c.createAndSetCache(c.mCacheQueryOptions,a.getResourcePath(),e,r,o,a)});return}u=[this.fetchOrGetQueryOptionsForOwnCache(e,n),this.oModel.oRequestor.ready()];this.mCacheQueryOptions=undefined;this.oCachePromise=t.all(u).then(function(t){var n=t[0].mQueryOptions;if(t[0].sReducedPath){c.sReducedPath=t[0].sReducedPath}if(!c.prepareDeepCreate(e,n)){return c.fetchResourcePath(e).then(function(t){if(c.oFetchCacheCallToken!==h){return c.oCachePromise.then(function(e){if(e===h.oOldCache){return e}const t=new Error("Cache discarded as a new cache has been created");t.canceled=true;throw t})}return c.oModel.waitForKeepAliveBinding(c).then(function(){c.oFetchCacheCallToken=undefined;return c.createAndSetCache(n,t,e,r,o,h.oOldCache)})})}h.oOldCache=undefined;if(a){a.setActive(false)}c.oCache=null;return null});this.oCachePromise.catch(this.oModel.getReporter())};h.prototype.fetchOrGetQueryOptionsForOwnCache=function(n,i){var r,o,s=this.oModel.resolve(this.sPath,n),a=this;function h(t,n,i){if(n&&t&&e.isEmptyObject(t)){t=undefined}return{mQueryOptions:t,sReducedPath:i||s}}function u(e,n){if(o instanceof t){if(!o.isFulfilled()){return o.then(function(t){return h(t,e,n)})}o=o.getResult()}return h(o,e,n)}if(this.oOperation||!s||this.isMeta()){return h()}o=this.doFetchOrGetQueryOptions(n);if(this.oModel.bAutoExpandSelect&&this.aChildCanUseCachePromises&&!e.isDataAggregation(this.mParameters)){o=t.all([o,Promise.resolve().then(function(){return t.all(a.aChildCanUseCachePromises)})]).then(function(e){a.aChildCanUseCachePromises=[];a.updateAggregatedQueryOptions(e[0]);return a.mAggregatedQueryOptions})}if(i||!this.bRelative||!n.fetchValue){return u()}if(this.oModel.bAutoExpandSelect){r=this.mParameters&&Object.keys(a.mParameters).some(function(e){return e[0]!=="$"||e[1]==="$"});if(r){return u()}return n.getBinding().fetchIfChildCanUseCache(n,a.sPath,o,!this.mParameters).then(function(e){if(e){o=undefined}else{o??={}}return u(false,e)})}if(this.mParameters&&!e.isEmptyObject(this.mParameters)){return u()}return u(true)};h.prototype.fetchResourcePath=function(n){var i,r,o,a=this;if(!this.bRelative){return t.resolve(this.sPath.slice(1))}n??=this.oContext;if(!n){return t.resolve()}r=n.getPath();i=n.fetchCanonicalPath&&(this.mParameters&&this.mParameters.$$canonicalPath||!this.isTransient()&&s.test(r));o=i?n.fetchCanonicalPath():t.resolve(r);return o.then(function(t){return e.buildPath(t,a.sPath).slice(1)})};h.prototype.fireDataReceived=function(e,t){this.fireEvent("dataReceived",e,false,!t)};h.prototype.fireDataRequested=function(e){this.fireEvent("dataRequested",undefined,false,!e)};h.prototype.getGroupId=function(){return this.sGroupId||this.bRelative&&this.oContext&&this.oContext.getGroupId&&this.oContext.getGroupId()||this.oModel.getGroupId()};h.prototype.getRelativePath=function(t){var n;if(t[0]==="/"){n=e.getRelativePath(t,this.getResolvedPath());if(n===undefined&&this.oReturnValueContext){n=e.getRelativePath(t,this.oReturnValueContext.getPath())}return n}return t};h.prototype.getResumeChangeReason=function(){var e=this.sResumeChangeReason;this.getDependentBindings().forEach(function(t){var n=t.getResumeChangeReason();if(n&&a(n,e)){e=n}});return e};h.prototype.getRootBinding=function(){if(this.bRelative){if(!this.oContext){return undefined}if(this.oContext.getBinding){return this.oContext.getBinding().getRootBinding()}}return this};h.prototype.getRootBindingResumePromise=function(){var e=this.getRootBinding();return e&&e.getResumePromise()||t.resolve()};h.prototype.getUpdateGroupId=function(){return this.sUpdateGroupId||this.bRelative&&this.oContext&&this.oContext.getUpdateGroupId&&this.oContext.getUpdateGroupId()||this.oModel.getUpdateGroupId()};h.prototype.hasPendingChanges=function(e){return this._hasPendingChanges(e)};h.prototype.hasPendingChangesForPath=function(e,t){return this.withCache(function(e,n,i){return e.hasPendingChangesForPath(n,t,t&&(i.isRoot()||i.mParameters.$$ownRequest))},e,true).unwrap()};h.prototype.hasPendingChangesInCaches=function(e){var t=this;if(!this.mCacheByResourcePath){return false}return Object.keys(this.mCacheByResourcePath).some(function(n){var i=t.mCacheByResourcePath[n];return i.$deepResourcePath.startsWith(e)&&i.hasPendingChangesForPath("")})};h.prototype.isInitial=function(){throw new Error("Unsupported operation: isInitial")};h.prototype.isRoot=function(){return!this.bRelative||this.oContext&&!this.oContext.getBinding};h.prototype.isRootBindingSuspended=function(){var e=this.getRootBinding();return e&&e.isSuspended()};h.prototype.isTransient=function(){return this.bRelative&&this.oContext?.getPath().includes("($uid=")};h.prototype.lockGroup=function(e,t,n,i){e??=n?this.getUpdateGroupId():this.getGroupId();return this.oModel.lockGroup(e,this,t,n,i)};h.prototype.prepareDeepCreate=function(e,t){if(e){if(e.iIndex===r.VIRTUAL){return true}if(e.getPath().includes("($uid=")){this.mCacheQueryOptions=t;return true}}return!t};h.prototype.ready=function(){return this.oCachePromise};h.prototype.refresh=function(e){if(typeof e==="boolean"){throw new Error("Unsupported parameter bForceUpdate")}this.requestRefresh(e).catch(this.oModel.getReporter())};h.prototype.refreshSuspended=function(e){if(e&&e!==this.getGroupId()){throw new Error(this+": Cannot refresh a suspended binding with group ID '"+e+"' (own group ID is '"+this.getGroupId()+"')")}this.setResumeChangeReason(n.Refresh)};h.prototype.removeCachesAndMessages=function(t,n){var i=this;if(!n&&this.oCache){this.oCache.removeMessages()}if(this.mCacheByResourcePath){Object.keys(this.mCacheByResourcePath).forEach(function(r){var o=i.mCacheByResourcePath[r],s=o.$deepResourcePath;if(e.hasPathPrefix(s,t)){if(!n){o.removeMessages()}delete i.mCacheByResourcePath[r]}})}};h.prototype.requestAbsoluteSideEffects=function(t,n){var i=[],r=e.getMetaPath(this.getResolvedPath());if(this.oCache===undefined){return undefined}n.some(function(t){var n=e.getRelativePath(t,r);if(n!==undefined){i.push(n)}else if(e.hasPathPrefix(r,t)){i=[""];return true}});if(i.length){if(this.requestSideEffects){return this.requestSideEffects(t,i)}return this.refreshInternal("",t,true,true)}};h.prototype.requestRefresh=function(t){if(!this.mParameters?.$$ownRequest&&!this.isRoot()){throw new Error("Refresh on this binding is not supported")}if(this.hasPendingChanges(true)){throw new Error("Cannot refresh due to pending changes")}e.checkGroupId(t);return Promise.resolve(this.refreshInternal("",t,true)).then(function(){})};h.prototype.resetChanges=function(){this.checkTransient();return this._resetChanges()};h.prototype.resetChangesForPath=function(e,t){t.push(this.withCache(function(e,t){e.resetChangesForPath(t)},e).unwrap())};h.prototype.resetInvalidDataState=function(){};h.prototype.setDeregisterChangeListener=function(e){this.fnDeregisterChangeListener=e};h.prototype.setResumeChangeReason=function(e){if(a(e,this.sResumeChangeReason)){this.sResumeChangeReason=e}};h.prototype.toString=function(){return this.getMetadata().getName()+": "+(this.bRelative?this.oContext+"|":"")+this.sPath};h.prototype.withCache=function(n,i="",r=false,o=false){var s=r?t.resolve(this.oCache):this.oCachePromise,a,h=this;return s.then(function(t){if(t){a=h.getRelativePath(i);if(a!==undefined){return n(t,a,h)}}else if(t===undefined){return undefined}else if(h.oOperation){return o?n(null,h.getRelativePath(i),h):undefined}if(h.bRelative&&h.oContext&&h.oContext.withCache){return h.oContext.withCache(n,i[0]==="/"?i:e.buildPath(h.sPath,i),r,o)}return undefined})};function u(e){if(this){h.apply(this,arguments)}else{Object.assign(e,h.prototype)}}["adjustPredicate","destroy","hasPendingChangesForPath"].forEach(function(e){u.prototype[e]=h.prototype[e]});return u},false);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/ODataContextBinding", ["./Context","./ODataParentBinding","./lib/_Cache","./lib/_GroupLock","./lib/_Helper","sap/ui/base/SyncPromise","sap/ui/model/Binding","sap/ui/model/ChangeReason","sap/ui/model/ContextBinding"],function(e,t,n,i,o,r,a,s,h){"use strict";var u="sap.ui.model.odata.v4.ODataContextBinding",d={AggregatedDataStateChange:true,change:true,dataReceived:true,dataRequested:true,DataStateChange:true,patchCompleted:true,patchSent:true},l=h.extend("sap.ui.model.odata.v4.ODataContextBinding",{constructor:c});function c(n,i,r,a){var s=i.indexOf("(...)"),u=this;h.call(this,n,i);t.call(this);if(i.endsWith("/")){throw new Error("Invalid path: "+i)}this.bHasFetchedExpandSelectProperties=false;this.oOperation=undefined;this.oParameterContext=null;this.oReturnValueContext=null;if(s>=0){if(s!==this.sPath.length-5){throw new Error("The path must not continue after a deferred operation: "+this.sPath)}this.oOperation={bAction:undefined,bAdditionalQueryOptionsForRVC:undefined,mChangeListeners:{},mParameters:{},mRefreshParameters:{}};if(!this.bRelative){this.oParameterContext=e.create(this.oModel,this,this.sPath+"/$Parameter")}}a=o.clone(a)||{};this.checkBindingParameters(a,["$$canonicalPath","$$groupId","$$inheritExpandSelect","$$ownRequest","$$patchWithoutSideEffects","$$updateGroupId"]);this.sGroupId=a.$$groupId;this.bInheritExpandSelect=a.$$inheritExpandSelect;this.sUpdateGroupId=a.$$updateGroupId;this.applyParameters(a);this.oElementContext=this.bRelative?null:e.createNewContext(this.oModel,this,i);if(!this.oOperation&&(!this.bRelative||r&&!r.fetchValue)){this.createReadGroupLock(this.getGroupId(),true)}this.setContext(r);n.bindingCreated(this);Promise.resolve().then(function(){u.bInitial=false})}t(l.prototype);l.prototype._invoke=function(e,t,n,i,a){var h=this.oModel.getMetaModel(),d,l,c=this.getResolvedPathWithReplacedTransientPredicates(),p=o.getMetaPath(c),f=this;function g(){f._fireChange({reason:s.Change});return f.refreshDependentBindings("",e.getGroupId(),true)}l=r.all([h.fetchObject(p+"/@$ui5.overload"),this.ready2Inherit()]).then(function([o]){var r,s,u;if(!o){d=h.getObject(p);if(!d||d.$kind!=="NavigationProperty"||!a){throw new Error("Unknown operation: "+c)}}else if(o.length!==1){throw new Error("Expected a single overload, but found "+o.length+" for "+c)}else{d=o[0]}if(f.bRelative&&f.oContext.getBinding){s=f.sPath.lastIndexOf("/");u=s>=0?f.sPath.slice(0,s):"";r=f.oContext.getValue.bind(f.oContext,u)}return f.createCacheAndRequest(e,c,d,t,r,n,i)}).then(function(e){return g().then(function(){return f.handleOperationResult(d,e,a)})},function(e){o.adjustTargetsInError(e,d,f.oParameterContext.getPath(),f.bRelative?f.oContext.getPath():undefined);return g().then(function(){throw e})}).catch(function(t){e.unlock(true);f.oModel.reportError("Failed to invoke "+c,u,t);throw t});return Promise.resolve(l)};l.prototype.addQueryOptionsForReturnValueContext=function(e,t){const n=o.getMetaPath(this.getResolvedPath()).split("/");if(!this.isReturnValueLikeBindingParameter(e)||!this.hasReturnValueContext()||n.length!==4){this.oOperation.bAdditionalQueryOptionsForRVC=false;return t}const i=this.oModel.getMetaModel();const r=i.getObject("/"+n[1]+"/$NavigationPropertyBinding/"+n[2]);const a=i.getObject("/"+n[1]+"/"+n[2]+"/$Partner");let s;if(r&&a){s={$expand:{}};s.$expand[a]={};o.selectKeyProperties(s.$expand[a],i.getObject("/"+r+"/"+a+"/"));if(t.$select){o.selectKeyProperties(s,i.getObject("/"+r+"/"))}t=o.clone(t);o.aggregateExpandSelect(t,s)}this.oOperation.bAdditionalQueryOptionsForRVC=!!s;return t};l.prototype.adjustPredicate=function(e,n){t.prototype.adjustPredicate.apply(this,arguments);if(this.mCacheQueryOptions){this.fetchCache(this.oContext,true)}if(this.oElementContext){this.oElementContext.adjustPredicate(e,n)}};l.prototype.applyParameters=function(e,t){this.mQueryOptions=this.oModel.buildQueryOptions(e,true);this.mParameters=e;if(this.isRootBindingSuspended()){if(!this.oOperation){this.sResumeChangeReason=s.Change}}else if(!this.oOperation){this.fetchCache(this.oContext);if(t){this.refreshInternal("",undefined,true).catch(this.oModel.getReporter())}}else if(this.oOperation.bAction===false){this.invoke().catch(this.oModel.getReporter())}};l.prototype.attachEvent=function(e,t,n,i){if(!(e in d)){throw new Error("Unsupported event '"+e+"': v4.ODataContextBinding#attachEvent")}return h.prototype.attachEvent.apply(this,arguments)};l.prototype.checkKeepAlive=function(){throw new Error("Unsupported "+this)};l.prototype.computeOperationQueryOptions=function(){return Object.assign({},this.oModel.mUriParameters,this.getQueryOptionsFromParameters())};l.prototype.createCacheAndRequest=function(e,t,i,a,s,h,u){var d=i.$kind==="Action",l,c=s,p=this.oModel,f=o.getMetaPath(t),g=t.slice(1),C=p.oRequestor,m=this;function x(e){if(m.isReturnValueLikeBindingParameter(i)){const t=m.getReturnValueContextPath(e);if(t){return t}if(m.oOperation.bAdditionalQueryOptionsForRVC===false&&o.getPrivateAnnotation(c,"predicate")===o.getPrivateAnnotation(e,"predicate")){return g.slice(0,g.lastIndexOf("/"))}}return g}function P(e){var t;o.adjustTargetsInError(e,i,m.oParameterContext.getPath(),m.bRelative?m.oContext.getPath():undefined);e.error.$ignoreTopLevel=true;t=u(o.extractMessages(e).map(function(e){return p.createUI5Message(e)}));if(!(t instanceof Promise)){throw new Error("Not a promise: "+t)}return t}if(u&&i.$kind!=="Action"){throw new Error("Not an action: "+t)}if(!d&&i.$kind!=="Function"&&i.$kind!=="NavigationProperty"){throw new Error("Not an operation: "+t)}if(d&&s){c=s()}if(h&&!(d&&i.$IsBound&&c!==null)){throw new Error("Not a bound action: "+t)}if(this.bInheritExpandSelect&&!this.isReturnValueLikeBindingParameter(i)){throw new Error("Must not set parameter $$inheritExpandSelect on this binding")}if(i.$kind!=="NavigationProperty"){f+="/@$ui5.overload/0/$ReturnType";if(i.$ReturnType&&!i.$ReturnType.$Type.startsWith("Edm.")){f+="/$Type"}}else if(!o.isEmptyObject(a)){throw new Error("Unsupported parameters for navigation property")}if(m.oReturnValueContext){m.oReturnValueContext.destroy();m.oReturnValueContext=null}this.oOperation.bAction=d;this.oOperation.mRefreshParameters=a;a=Object.assign({},a);this.mCacheQueryOptions=this.addQueryOptionsForReturnValueContext(i,this.computeOperationQueryOptions());t=C.getPathAndAddQueryOptions(t,i,a,this.mCacheQueryOptions,c);l=n.createSingle(C,t,this.mCacheQueryOptions,p.bAutoExpandSelect,p.bSharedRequests,undefined,d,f);this.oCache=l;this.oCachePromise=r.resolve(l);return d?l.post(e,a,c,h,u&&P,x):l.fetchValue(e,"",undefined,undefined,false,x)};l.prototype.delete=function(e,t,n,i,o,r){var a=this._findEmptyPathParentContext(this.oElementContext),h=a.getBinding(),u=h.getContext(),d=h.oReturnValueContext,l=this;function c(){r();a.oDeletePromise=null}if(!h.invoke){n.oDeletePromise=h.delete(e,t,a,n.getValue(),o,c);return n.oDeletePromise}h.oElementContext=null;if(d){h.oReturnValueContext=null}this._fireChange({reason:s.Remove});n.oDeletePromise=a.doDelete(e,t,"",null,this,function(e,t){if(t>0){c()}}).then(function(){a.destroy();if(d){d.destroy()}},function(e){c();if(!h.isRelative()||u===h.getContext()){h.oElementContext=a;if(d){h.oReturnValueContext=d}l._fireChange({reason:s.Add})}throw e});return n.oDeletePromise};l.prototype.destroy=function(){if(this.oElementContext){this.oElementContext.destroy();this.oElementContext=undefined}if(this.oParameterContext){this.oParameterContext.destroy();this.oParameterContext=undefined}if(this.oReturnValueContext){this.oReturnValueContext.destroy();this.oReturnValueContext=undefined}this.oModel.bindingDestroyed(this);this.oOperation=undefined;this.mParameters=undefined;this.mQueryOptions=undefined;t.prototype.destroy.call(this);h.prototype.destroy.call(this)};l.prototype.doCreateCache=function(e,t,i,o){return n.createSingle(this.oModel.oRequestor,e,t,this.oModel.bAutoExpandSelect,this.oModel.bSharedRequests,o)};l.prototype.doFetchExpandSelectProperties=function(){var e,t=this;if(this.bHasFetchedExpandSelectProperties||!this.oModel.bAutoExpandSelect||!this.mParameters.$expand&&!this.mParameters.$select){return}e=this.getResolvedPath();o.convertExpandSelectToPaths(this.oModel.buildQueryOptions(this.mParameters,true)).forEach(function(n){t.oContext.fetchValue(o.buildPath(e,n)).catch(t.oModel.getReporter())});this.bHasFetchedExpandSelectProperties=true};l.prototype.doFetchOrGetQueryOptions=function(e){return this.fetchResolvedQueryOptions(e)};l.prototype.doSetProperty=function(e,t,n){if(this.oOperation&&(e==="$Parameter"||e.startsWith("$Parameter/"))){o.updateAll(this.oOperation.mChangeListeners,"",this.oOperation.mParameters,o.makeUpdateData(e.split("/").slice(1),t));this.oOperation.bAction=undefined;if(n){n.unlock()}return r.resolve()}};l.prototype.doSuspend=function(){if(this.bInitial&&!this.oOperation){this.sResumeChangeReason=s.Change}};l.prototype.fetchValue=function(e,t,n){var a=n&&this.oCache!==undefined?r.resolve(this.oCache):this.oCachePromise,s=this;if(this.isRootBindingSuspended()){const e=new Error("Suspended binding provides no value");e.canceled="noDebugLog";throw e}return a.then(function(r){var a,h=false,d,l=s.getResolvedPath(),c=r||s.oOperation?s.getRelativePath(e):undefined,p;if(s.oOperation){if(c===undefined){return s.oContext.fetchValue(e,t,n)}p=c.split("/");if(p[0]==="$Parameter"){if(p.length===1){return undefined}o.registerChangeListener(s.oOperation,c.slice(11),t);const e=o.drillDown(s.oOperation.mParameters,p.slice(1));return e===undefined?null:e}}if(r&&c!==undefined){if(n){d=i.$cached}else{d=s.oReadGroupLock||s.lockGroup();s.oReadGroupLock=undefined}a=s.isRefreshWithoutBubbling();return s.resolveRefreshPromise(r.fetchValue(d,c,function(){h=true;s.fireDataRequested(a)},t)).then(function(e){s.checkSameCache(r);return e}).then(function(e){if(h){s.fireDataReceived({data:{}},a)}return e},function(e){d.unlock(true);if(h){s.oModel.reportError("Failed to read path "+l,u,e);s.fireDataReceived(e.canceled?{data:{}}:{error:e},a)}throw e})}if(!s.oOperation&&s.oContext){if(!n){s.doFetchExpandSelectProperties()}return s.oContext.fetchValue(e,t,n)}})};l.prototype.findContextForCanonicalPath=function(e){var t=this.oOperation?this.oReturnValueContext:this.oElementContext,n,i;if(t){n=t.getValue();if(n&&o.hasPrivateAnnotation(n,"predicate")){i=t.fetchCanonicalPath();i.caught();if(i.getResult()===e){return t}}}};l.prototype.getDependentBindings=function(){return this.oModel.getDependentBindings(this)};l.prototype.getParameterContext=function(){if(!this.oOperation){throw new Error("Not a deferred operation binding: "+this)}return this.oParameterContext};l.prototype.getQueryOptionsFromParameters=function(){var e,t=this.mQueryOptions;if(this.bInheritExpandSelect){e=this.oContext.getBinding().getInheritableQueryOptions();t=Object.assign({},t);if("$select"in e){t.$select&&=t.$select.slice();o.addToSelect(t,e.$select)}if("$expand"in e){t.$expand=e.$expand}}return t};l.prototype.getResolvedPathWithReplacedTransientPredicates=function(){var e="",t=this.getResolvedPath(),n,i=this;if(t&&t.includes("($uid=")){n=t.slice(1).split("/");t="";n.forEach(function(n){var r,a,s;e+="/"+n;s=n.indexOf("($uid=");if(s>=0){r=i.oContext.getValue(e);a=r&&o.getPrivateAnnotation(r,"predicate");if(!a){throw new Error("No key predicate known at "+e)}t+="/"+n.slice(0,s)+a}else{t+="/"+n}})}return t};l.prototype.getReturnValueContextPath=function(e){if(!this.hasReturnValueContext()){return undefined}const t=this.oContext.getPath().slice(1);const n=o.getPrivateAnnotation(e,"predicate");if(this.oOperation.bAdditionalQueryOptionsForRVC===false){const e=t.indexOf("(");return(e<0?t:t.slice(0,e))+n}const i=o.getMetaPath(t).split("/");const r=this.oModel.getMetaModel().getObject("/"+i[0]+"/"+i[1]+"/$Partner");const a=e[r];const s=a&&this.oModel.getKeyPredicate("/"+i[0],a);if(!(s&&n)){return undefined}return t.split("/").map((e,t)=>e.slice(0,e.indexOf("("))+(t?n:s)).join("/")};l.prototype.handleOperationResult=function(t,n,i){var a,s,h,u,d;if(this.isReturnValueLikeBindingParameter(t)){s=this.oContext.getValue();a=s&&o.getPrivateAnnotation(s,"predicate");h=o.getPrivateAnnotation(n,"predicate");if(h){if(a===h){this.oContext.patch(n)}u=this.getReturnValueContextPath(n);if(u){if(i){if(this.oOperation.bAdditionalQueryOptionsForRVC&&this.oContext.getPath().split("/")[1]!==u.split("/")[0]){throw new Error("Cannot replace due to changed key predicate"+" for navigation property in path")}this.oCache=null;this.oCachePromise=r.resolve(null);d=this.oContext.getPath().indexOf(u)===1?this.oContext:this.oContext.getBinding().doReplaceWith(this.oContext,n,h);d.setNewGeneration();return d}this.oReturnValueContext=e.createNewContext(this.oModel,this,"/"+u);this.oCache.setResourcePath(u);return this.oReturnValueContext}}}if(i){throw new Error("Cannot replace w/o return value context")}};l.prototype.hasReturnValueContext=function(){var e=o.getMetaPath(this.getResolvedPath()).split("/");if(e.length===4){return this.oOperation.bAdditionalQueryOptionsForRVC!==false}return e.length===3&&this.oModel.getMetaModel().getObject("/"+e[1]).$kind==="EntitySet"};l.prototype.initialize=function(){this.bInitial=false;if(this.isResolved()&&!this.isRootBindingSuspended()){this._fireChange({reason:s.Change})}};l.prototype.invoke=function(e,t,n,i){var r=this.getResolvedPath();this.checkSuspended();o.checkGroupId(e,false,true);if(!this.oOperation){throw new Error("The binding must be deferred: "+this.sPath)}if(this.bRelative){if(!r){throw new Error("Unresolved binding: "+this.sPath)}if(this.oContext.isTransient&&this.oContext.isTransient()){throw new Error("Invoke for transient context not allowed: "+r)}if(this.oContext.getPath().includes("(...)")){throw new Error("Nested deferred operation bindings not supported: "+r)}if(i){if(!this.oContext.getBinding){throw new Error("Cannot replace this parent context: "+this.oContext)}this.oContext.getBinding().checkKeepAlive(this.oContext,true)}}else if(i){throw new Error("Cannot replace when operation is not relative")}return this._invoke(this.lockGroup(e,true),o.publicClone(this.oOperation.mParameters,true),t,n,i)};l.prototype.execute=l.prototype.invoke;l.prototype.isReturnValueLikeBindingParameter=function(e){var t,n;if(!(this.bRelative&&this.oContext&&this.oContext.getBinding)){return false}if(e.$kind==="NavigationProperty"){if(e.$isCollection||this.sPath.includes("/")){return false}n=o.getMetaPath(this.oContext.getPath());if(n.lastIndexOf("/")>0){return false}t=this.oModel.getMetaModel().getObject(n);return t.$kind==="EntitySet"&&t.$Type===e.$Type&&t.$NavigationPropertyBinding&&t.$NavigationPropertyBinding[this.sPath.slice(0,-5)]===n.slice(1)}return e.$IsBound&&e.$ReturnType&&!e.$ReturnType.$isCollection&&e.$EntitySetPath&&!e.$EntitySetPath.includes("/")};l.prototype.ready2Inherit=function(){return this.bInheritExpandSelect&&this.bRelative&&this.oContext.getBinding?.().ready()||r.resolve()};l.prototype.refreshDependentBindings=function(e,t,n,i){return r.all(this.getDependentBindings().map(function(o){return o.refreshInternal(e,t,n,i)}))};l.prototype.refreshInternal=function(t,n,i,o){var a=this;if(this.oOperation&&this.oOperation.bAction!==false){return r.resolve()}this.bHasFetchedExpandSelectProperties=false;if(this.isRootBindingSuspended()){this.refreshSuspended(n);return this.refreshDependentBindings(t,n,i,o)}this.createReadGroupLock(n,this.isRoot());return this.oCachePromise.then(function(h){var u,d=a.oRefreshPromise,l=a.oReadGroupLock;if(!a.oElementContext){a.oElementContext=e.create(a.oModel,a,a.getResolvedPath());if(!h){a._fireChange({reason:s.Refresh})}}if(a.oOperation){a.oReadGroupLock=undefined;return a._invoke(l,a.oOperation.mRefreshParameters)}if(h&&!d){u=h.hasChangeListeners();a.removeCachesAndMessages(t);if(a.mLateQueryOptions){a.mAggregatedQueryOptions=a.mLateQueryOptions;a.mLateQueryOptions=undefined}a.fetchCache(a.oContext,false,false,n,o);if(u){d=a.createRefreshPromise(o)}else{l.unlock();a.oReadGroupLock=undefined}if(o&&d){d=d.catch(function(e){return a.fetchResourcePath(a.oContext).then(function(e){if(!a.bRelative||h.getResourcePath()===e){a.oCache=h;a.oCachePromise=r.resolve(h);h.setActive(true);return a.checkUpdateInternal()}}).then(function(){throw e})})}if(!i){a.fetchValue("").catch(a.oModel.getReporter())}}return r.all([d,a.refreshDependentBindings(t,n,i,o)])})};l.prototype.refreshReturnValueContext=function(e,t,i){var a=this.oCache,s=this.mCacheQueryOptions,h=this.oModel,u,d=this;if(this.oReturnValueContext!==e){return null}this.mCacheQueryOptions=this.computeOperationQueryOptions();if(this.mLateQueryOptions){this.mCacheQueryOptions=o.clone(this.mCacheQueryOptions);o.aggregateExpandSelect(this.mCacheQueryOptions,this.mLateQueryOptions)}this.oCache=n.createSingle(h.oRequestor,e.getPath().slice(1),this.mCacheQueryOptions,true,h.bSharedRequests);this.oCachePromise=r.resolve(this.oCache);this.createReadGroupLock(t,true);u=e.refreshDependentBindings("",t,true,i);if(i){u=u.catch(function(t){d.oCache=a;d.oCachePromise=r.resolve(a);d.mCacheQueryOptions=s;a.setActive(true);return e.checkUpdateInternal().then(function(){throw t})})}return u};l.prototype.requestObject=function(e){return this.oElementContext?this.oElementContext.requestObject(e):Promise.resolve()};l.prototype.requestSideEffects=function(e,t,n){var i=this.oModel,o=[],a=this;function s(e){return e.catch(function(e){i.reportError("Failed to request side effects",u,e);if(!e.canceled){throw e}})}if(t.indexOf("")<0){try{if(!this.oOperation||this.oReturnValueContext){o.push(this.oCache.requestSideEffects(this.lockGroup(e),t,n&&n.getPath().slice(1)))}this.visitSideEffects(e,t,n,o);return r.all(o.map(s)).then(function(){return a.refreshDependentListBindingsWithoutCache()})}catch(e){if(!e.message.startsWith("Unsupported collection-valued navigation property ")){throw e}}}return n&&this.refreshReturnValueContext(n,e,true)||this.refreshInternal("",e,true,true)};l.prototype.resumeInternal=function(e,t){var n=this.sResumeChangeReason,i=this;function o(){i.getDependentBindings().forEach(function(t){t.resumeInternal(e,!!n)})}this.sResumeChangeReason=undefined;if(this.oOperation){o();return}if(t||n){this.mAggregatedQueryOptions={};this.bAggregatedQueryOptionsInitial=true;this.mCanUseCachePromiseByChildPath={};this.removeCachesAndMessages("");this.fetchCache(this.oContext)}o();if(n){this._fireChange({reason:n})}};l.prototype.setContext=function(t){if(this.oContext!==t){if(this.bRelative&&(this.oContext||t)){this.checkSuspended(true);if(this.oElementContext){this.oElementContext.destroy();this.oElementContext=null}if(this.oReturnValueContext){this.oReturnValueContext.destroy();this.oReturnValueContext=null}if(this.oParameterContext){this.oParameterContext.destroy();this.oParameterContext=null}this.fetchCache(t);if(t){this.oElementContext=e.create(this.oModel,this,this.oModel.resolve(this.sPath,t));if(this.oOperation){this.oParameterContext=e.create(this.oModel,this,this.oModel.resolve(this.sPath+"/$Parameter",t))}}this.bHasFetchedExpandSelectProperties=false;a.prototype.setContext.call(this,t)}else{this.oContext=t}}};l.prototype.setParameter=function(e,t){var n;if(!this.oOperation){throw new Error("The binding must be deferred: "+this.sPath)}if(!e){throw new Error("Missing parameter name")}if(t===undefined){throw new Error("Missing value for parameter: "+e)}n=this.oOperation.mParameters[e];this.oOperation.mParameters[e]=t;o.informAll(this.oOperation.mChangeListeners,e,n,t);this.oOperation.bAction=undefined;return this};return l});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/ODataListBinding", ["./Context","./ODataParentBinding","./lib/_AggregationCache","./lib/_AggregationHelper","./lib/_Cache","./lib/_GroupLock","./lib/_Helper","sap/base/Log","sap/ui/base/SyncPromise","sap/ui/core/Messaging","sap/ui/model/Binding","sap/ui/model/ChangeReason","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/FilterProcessor","sap/ui/model/FilterType","sap/ui/model/ListBinding","sap/ui/model/Sorter","sap/ui/model/odata/OperationMode"],function(e,t,i,n,r,s,o,a,h,d,u,c,f,l,g,p,C,x,v){"use strict";var P="sap.ui.model.odata.v4.ODataListBinding",m=/All|Any|NotAll|NotAny/,y={AggregatedDataStateChange:true,change:true,createActivate:true,createCompleted:true,createSent:true,dataReceived:true,dataRequested:true,DataStateChange:true,patchCompleted:true,patchSent:true,refresh:true,selectionChanged:true,separateReceived:true},E=C.extend("sap.ui.model.odata.v4.ODataListBinding",{constructor:$});function $(i,n,r,s,a,h){C.call(this,i,n);t.call(this);if(n.endsWith("/")){throw new Error("Invalid path: "+n)}h=o.clone(h)||{};this.checkBindingParameters(h,["$$aggregation","$$canonicalPath","$$clearSelectionOnFilter","$$getKeepAliveContext","$$groupId","$$operationMode","$$ownRequest","$$patchWithoutSideEffects","$$separate","$$sharedRequest","$$updateGroupId"]);const d=o.toArray(a);if(h.$$aggregation&&d[0]===f.NONE){throw new Error("Cannot combine Filter.NONE with $$aggregation")}this.iActiveContexts=0;this.aApplicationFilters=d;this.sChangeReason=i.bAutoExpandSelect&&!o.isDataAggregation(h)?"AddVirtualContext":undefined;this.iCreatedContexts=0;this.iDeletedContexts=0;this.oDiff=undefined;this.aFilters=[];this.sGroupId=h.$$groupId;this.bHasAnalyticalInfo=false;this.oHeaderContext=this.bRelative?null:e.createNewContext(i,this,n);this.sOperationMode=h.$$operationMode||i.sOperationMode;this.mPreviousContextsByPath={};this.aPreviousData=null;this.bRefreshKeptElements=false;this.sResumeAction=undefined;this.bResetViaSideEffects=undefined;this.bSharedRequest="$$sharedRequest"in h?h.$$sharedRequest:i.bSharedRequests;this.aSorters=o.toArray(s);this.sUpdateGroupId=h.$$updateGroupId;if(!this.sOperationMode&&(this.aSorters.length||this.aApplicationFilters.length)){throw new Error("Unsupported operation mode: "+this.sOperationMode)}this.applyParameters(h);if(!this.bRelative||r&&!r.fetchValue){this.createReadGroupLock(this.getGroupId(),true)}this.setContext(r);i.bindingCreated(this)}t(E.prototype);E.prototype._checkDataStateMessages=function(e,t){if(t){e.setModelMessages(this.oModel.getMessagesByPath(t,true))}};E.prototype._getAllExistingContexts=function(e){let t=this.aContexts??[];if(e){t=t.slice(this.iCreatedContexts)}return t.filter(function(e){return e}).concat(Object.values(this.mPreviousContextsByPath).filter(function(t){const i=t.isEffectivelyKeptAlive();return e?i&&!t.isOutOfPlace():i}))};E.prototype.adjustPredicate=function(e,i,n){var r=this;function s(e,t){var i=r.aPreviousData?.indexOf(e);if(i>=0){r.aPreviousData[i]=t}}if(n){n.adjustPredicate(e,i,s)}else{t.prototype.adjustPredicate.apply(this,arguments);if(this.mCacheQueryOptions&&!this.oContext.getPath().includes("($uid=")){this.fetchCache(this.oContext,true)}this.oHeaderContext.adjustPredicate(e,i);this.aContexts.forEach(function(t){t.adjustPredicate(e,i,s)})}};E.prototype.applyParameters=function(e,t,i){var r,s=this.mParameters&&this.mParameters.$$aggregation,o=this.mQueryOptions&&this.mQueryOptions.$apply;if("$$getKeepAliveContext"in e&&"$apply"in e){throw new Error("Cannot combine $$getKeepAliveContext and $apply")}if("$$aggregation"in e){if("$apply"in e){throw new Error("Cannot combine $$aggregation and $apply")}if(!t){n.validateAggregationAndSetPath(e.$$aggregation,this.oModel.bAutoExpandSelect,this.oModel.oInterface.fetchMetadata,this.getResolvedPath())}r=n.buildApply(e.$$aggregation).$apply}const a=this.mParameters?.$$clearSelectionOnFilter&&(i?.includes("$filter")||i?.includes("$search")||e.$$aggregation?.search!==this.mParameters.$$aggregation?.search);this.mQueryOptions=this.oModel.buildQueryOptions(e,true);this.oQueryOptionsPromise=undefined;this.mParameters=e;if(r){this.mQueryOptions.$apply=r}if(t===""){if(this.mQueryOptions.$apply===o&&(!this.mParameters.$$aggregation||!s||this.isUnchangedParameter("$$aggregation",s))){return}t=this.bHasAnalyticalInfo?c.Change:c.Filter}if(i){this.setResetViaSideEffects(i.every(e=>e==="$orderby"||e==="$filter"))}if(this.isRootBindingSuspended()){this.setResumeChangeReason(t);return}if(a){this.oHeaderContext?.setSelected(false)}this.removeCachesAndMessages("");this.fetchCache(this.oContext);this.reset(t);this.oHeaderContext?.checkUpdate()};E.prototype.attachCreateActivate=function(e,t){return this.attachEvent("createActivate",e,t)};E.prototype.attachCreateCompleted=function(e,t){return this.attachEvent("createCompleted",e,t)};E.prototype.attachCreateSent=function(e,t){return this.attachEvent("createSent",e,t)};E.prototype.attachEvent=function(e,t,i,n){if(!(e in y)){throw new Error("Unsupported event '"+e+"': v4.ODataListBinding#attachEvent")}return C.prototype.attachEvent.apply(this,arguments)};E.prototype.attachSelectionChanged=function(e,t){return this.attachEvent("selectionChanged",e,t)};E.prototype.attachSeparateReceived=function(e,t){return this.attachEvent("separateReceived",e,t)};E.prototype.checkDeepCreate=function(){if(!this.oModel.bAutoExpandSelect){throw new Error("Deep create is only supported with autoExpandSelect")}if(E.isBelowAggregation(this.oContext)){throw new Error("Deep create is not supported with data aggregation")}if(!this.oContext.isTransient()){throw new Error("Unexpected ODataContextBinding in deep create")}if(this.sPath.includes("/")){throw new Error("Invalid path '"+this.sPath+"' in deep create")}};E.prototype.checkKeepAlive=function(e,t){if(this.isRelative()&&!this.mParameters.$$ownRequest){throw new Error("Missing $$ownRequest at "+this)}if(e===this.oHeaderContext){throw new Error("Unsupported header context "+e)}if(o.isDataAggregation(this.mParameters)){throw new Error("Unsupported $$aggregation at "+this)}if(this.bSharedRequest){throw new Error("Unsupported $$sharedRequest at "+this)}if(!t&&e&&e.getIndex()===undefined&&e.isKeepAlive()&&!e.isDeleted()&&e.hasPendingChanges()){throw new Error("Not allowed due to pending changes: "+e)}};E.prototype.collapse=function(e,t,i,n){this.checkSuspended();if(this.aContexts[e.iIndex]!==e){throw new Error("Not currently part of the hierarchy: "+e)}if(t&&!this.mParameters.$$aggregation?.hierarchyQualifier){throw new Error("Missing recursive hierarchy")}n??=this.oCache.collapse(o.getRelativePath(e.getPath(),this.oHeaderContext.getPath()),t?this.lockGroup():undefined,i);if(n>0){const t=this.aContexts;const r=e.getModelIndex();t.splice(r+1,n).forEach(e=>{if(!e.created()){this.mPreviousContextsByPath[e.getPath()]=e}});for(let e=r+1;e<t.length;e+=1){if(t[e]){t[e].iIndex=e}}this.iMaxLength-=n;if(!i){this._fireChange({reason:c.Change})}}};E.prototype.create=function(t,i,n,r){var s=this.mParameters.$$aggregation,a,d,u=s?.createInPlace,f=this.fetchResourcePath(),l,g,p=this.getUpdateGroupId(),C,x=this.getResolvedPath(),v="($uid="+o.uid()+")",m=x+v,y=this;if(!x){throw new Error("Binding is unresolved: "+this)}this.checkSuspended();if(o.isDataAggregation(this.mParameters)){throw new Error("Cannot create in "+this+" when using data aggregation")}if(this.isTransient()){this.checkDeepCreate();if(r){throw new Error("Must not create an inactive context in a deep create: "+this)}}n=!!n;if(n&&!(this.bLengthFinal||this.mParameters.$count)){throw new Error("Must know the final length to create at the end. Consider setting $count")}if(this.bFirstCreateAtEnd&&!n){throw new Error("Cannot create at the start after creation at end")}if(r){if(this.isRelative()&&!this.mParameters.$$ownRequest){throw new Error("Missing $$ownRequest at "+this)}p="$inactive."+p}else if(!s){this.iActiveContexts+=1}if(this.bFirstCreateAtEnd===undefined){this.bFirstCreateAtEnd=n}g=o.publicClone(t,true)||{};let E;if(s){if(!i){throw new Error("Missing bSkipRefresh")}if(arguments.length>2){throw new Error("Only the parameters oInitialData and bSkipRefresh are supported")}const e=t?.["@$ui5.node.parent"];if(e){a=this.aContexts.indexOf(e)+1;if(a<=0){throw new Error("Invalid parent context: "+e)}if(e.isExpanded()===false){throw new Error("Unsupported collapsed parent: "+e)}g["@$ui5.node.parent"]=e.getCanonicalPath().slice(1);E=this.oCache.isRefreshNeededAfterCreate(e.iIndex)}else{a=0}}else{this.iCreatedContexts+=1}C=this.lockGroup(p,true,true,function(){if(!y.aContexts.includes(d)){y.mPreviousContextsByPath[d.getPath()]=d;y.destroyPreviousContextsLater([d.getPath()]);return}d.doSetSelected(false,true);y.removeCreated(d);return Promise.resolve().then(function(){y._fireChange({reason:c.Remove})})});l=this.createInCache(C,f,x,v,g,this.bFirstCreateAtEnd!==n,function(e){y.oModel.reportError("POST on '"+f+"' failed; will be repeated automatically",P,e);y.fireEvent("createCompleted",{context:d,success:false})},function(){y.fireEvent("createSent",{context:d})}).then(function(e){var t,n,r;r=o.getPrivateAnnotation(e,"predicate");if(r){y.adjustPredicate(v,r,d);y.oModel.checkMessages()}y.fireEvent("createCompleted",{context:d,success:true});if(u){const t=o.getPrivateAnnotation(e,"rank");d.iIndex=t;if(t===undefined||E){d.destroy();return}d.setPersisted(true);y.insertContext(d,t)}t=o.getPrivateAnnotation(e,"deepCreate");o.deletePrivateAnnotation(e,"deepCreate");n=y.getGroupId();if(y.oModel.isApiGroup(n)){n="$auto"}return i||t?d.updateAfterCreate(i,n):y.refreshSingle(d,y.lockGroup(n))},function(e){C.unlock(true);throw e});if(E){l=h.all([l,this.refreshInternal("",p,false,true,true)])}const $=u?undefined:a??-this.iCreatedContexts;d=e.create(this.oModel,this,m,$,l,r);d.doSetSelected(this.oHeaderContext.isSelected());if(this.isTransient()){d.created().catch(this.oModel.getReporter())}if(u){return d}d.fetchValue().then(function(e){if(e){o.setPrivateAnnotation(e,"context",d);o.setPrivateAnnotation(e,"firstCreateAtEnd",y.bFirstCreateAtEnd)}});this.insertContext(d,a,n);return d};E.prototype.createContexts=function(t,i,n){var r=false,s,a,h=i.$count,d,u=this.bLengthFinal,c=this.oModel,f=this.getResolvedPath(),l,g=t>this.aContexts.length,p=this;function C(){var e=p.iMaxLength+p.iCreatedContexts;if(e>=p.aContexts.length){return}for(let t=e;t<p.aContexts.length;t+=1){if(p.aContexts[t]){p.aContexts[t].destroy()}}while(e>0&&!p.aContexts[e-1]){e-=1}p.aContexts.length=e;r=true}for(let n=0;n<i.length;n+=1){if(this.aContexts[t+n]===undefined&&i[n]){r=true;d=t+n-this.iCreatedContexts;l=o.getPrivateAnnotation(i[n],"predicate");a=f+(l||"/"+d);s=this.mPreviousContextsByPath[a];if(s&&(!s.created()||s.isEffectivelyKeptAlive()||this.mParameters.$$aggregation?.hierarchyQualifier)){delete this.mPreviousContextsByPath[a];s.iIndex=d;s.checkUpdate()}else if(o.hasPrivateAnnotation(i[n],"context")){s=o.getPrivateAnnotation(i[n],"context");if(s.getBinding()!==this){throw new Error("Cannot share created data between list bindings")}s.iIndex=d;a=s.getPath();if(this.mPreviousContextsByPath[a]===s){delete this.mPreviousContextsByPath[a]}}else{s=e.create(c,this,a,d);s.doSetSelected(this.oHeaderContext.isSelected())}this.aContexts[t+n]=s}}if(n){return r}this.destroyPreviousContextsLater(Object.keys(this.mPreviousContextsByPath));if(h!==undefined){this.bLengthFinal=true;this.iMaxLength=h-this.iActiveContexts;C()}else{if(!i.length){this.iMaxLength=t-this.iCreatedContexts;C()}else if(this.aContexts.length>this.iMaxLength+this.iCreatedContexts){this.iMaxLength=Infinity}if(!(g&&i.length===0)){this.bLengthFinal=this.aContexts.length===this.iMaxLength+this.iCreatedContexts}}if(this.bLengthFinal!==u){r=true}return r};E.prototype.createContextsForCachedData=function(e,t){if(this.bFirstCreateAtEnd){e+=this.iCreatedContexts}this.withCache((i,n)=>{const r=i.getElements(n,e,e+t);if(r){this.createContexts(e,r,true)}},"",true)};E.prototype.delete=function(t,i,n,r,s,a){var h=false,d=this;if(n.isDeleted()){return n.oDeletePromise}const u=n.isExpanded();if(u){this.collapse(n,false,true)}const f=n.iIndex<0;const l=n.iIndex===undefined?o.getRelativePath(n.getPath(),this.oHeaderContext.getPath()):String(n.getModelIndex());this.iDeletedContexts+=1;return n.doDelete(t,i,l,r,this,function(e,i){if(e!==undefined){if(i>0){delete d.mPreviousContextsByPath[n.getPath()];d.aContexts.splice(e,0,n);a()}else{d.mPreviousContextsByPath[n.getPath()]=n;d.aContexts.splice(e,1);n.iIndex=undefined;Promise.resolve().then(function(){d._fireChange({reason:c.Remove})})}if(f){d.iCreatedContexts+=i;d.iActiveContexts+=i}else{d.iMaxLength+=i}d.aContexts.forEach(function(e,t){e.iIndex=t-d.iCreatedContexts})}else if(i>0){h=true;a()}else if(d.bLengthFinal&&!s){d.oCache.requestCount(t&&!d.oModel.isApiGroup(t.getGroupId())?t.getUnlockedCopy():d.lockGroup("$auto")).then(function(e){var t=d.iMaxLength;d.iMaxLength=e-d.iActiveContexts;if(t!==d.iMaxLength){d._fireChange({reason:c.Remove})}})}}).then(function(){d.iDeletedContexts-=1;if(!d.iDeletedContexts&&!d.iCreatedContexts){d.bFirstCreateAtEnd=undefined}n.resetKeepAlive();n.iIndex=e.VIRTUAL;d.destroyPreviousContextsLater([n.getPath()])},function(e){d.iDeletedContexts-=1;a();if(h){d.oCache.reset(d.getKeepAlivePredicates());d.reset(c.Change)}else{if(u){d.expand(n,1,true).unwrap()}d._fireChange({reason:c.Add})}throw e})};E.prototype.destroy=function(){if(this.bHasAnalyticalInfo&&this.aContexts===undefined){return}this.aContexts.forEach(function(e){e.destroy()});this.destroyPreviousContexts();if(this.oHeaderContext){this.oHeaderContext.destroy()}this.oModel.bindingDestroyed(this);this.aApplicationFilters=undefined;this.aContexts=undefined;this.oDiff=undefined;this.aFilters=undefined;this.oHeaderContext=undefined;this.mParameters=undefined;this.mPreviousContextsByPath=undefined;this.aPreviousData=undefined;this.mQueryOptions=undefined;this.oQueryOptionsPromise=undefined;this.aSorters=undefined;t.prototype.destroy.call(this);C.prototype.destroy.call(this)};E.prototype.destroyLater=function(e){if(this.iCurrentEnd){this.mPreviousContextsByPath[e.getPath()]=e}else{e.destroy()}};E.prototype.destroyPreviousContexts=function(e){var t=this.mPreviousContextsByPath,i=this;if(t){(e||Object.keys(t)).forEach(function(n){var r=t[n];if(r){if(e&&(r.isEffectivelyKeptAlive()||r.isOutOfPlace()||r.oDeletePromise?.isPending())){r.iIndex=undefined}else{if(!r.isTransient()){r.destroy();if(r.iIndex===undefined&&i.oCache){i.oCache.removeKeptElement(o.getRelativePath(n,i.oHeaderContext.getPath()))}}delete t[n]}}})}};E.prototype.destroyPreviousContextsLater=function(e){if(e.length){this.oModel.addPrerenderingTask(this.destroyPreviousContexts.bind(this,e))}};E.prototype.detachCreateActivate=function(e,t){return this.detachEvent("createActivate",e,t)};E.prototype.detachCreateCompleted=function(e,t){return this.detachEvent("createCompleted",e,t)};E.prototype.detachCreateSent=function(e,t){return this.detachEvent("createSent",e,t)};E.prototype.detachSelectionChanged=function(e,t){return this.detachEvent("selectionChanged",e,t)};E.prototype.detachSeparateReceived=function(e,t){return this.detachEvent("separateReceived",e,t)};E.prototype.doCreateCache=function(e,t,n,r,s,o,a){var h,d,u,c=this.bResetViaSideEffects;this.bResetViaSideEffects=undefined;if(a&&a.getResourcePath()===e&&a.$deepResourcePath===r){d=this.getKeepAlivePredicates();if(this.iCreatedContexts||this.iDeletedContexts||d.length||this.mParameters.$$aggregation?.hierarchyQualifier&&a instanceof i){if(c&&this.mParameters.$$aggregation?.hierarchyQualifier){s=this.getGroupId();o=true;a.resetOutOfPlace()}a.reset(d,o?s:undefined,t,this.mParameters.$$aggregation,this.isGrouped());this.validateSelection(a,s);return a}}t=this.inheritQueryOptions(t,n);h=this.getCacheAndMoveKeepAliveContexts(e,t);if(h&&this.mParameters.$$aggregation){u={};d=this.getKeepAlivePredicates();d.forEach(function(e){u[e]=h.getValue(e)});h.setActive(false);h=undefined}h??=i.create(this.oModel.oRequestor,e,r,t,this.mParameters.$$aggregation,this.oModel.bAutoExpandSelect||"$$separate"in this.mParameters,this.bSharedRequest,this.isGrouped());h.setSeparate?.(this.mParameters.$$separate);if(u){d.forEach(function(e){h.addKeptElement(u[e])})}else if(this.bSharedRequest){h.registerChangeListener("",this)}return h};E.prototype.doFetchOrGetQueryOptions=function(e){var t=e&&o.getMetaPath(e.getPath()),i=this;if(!(this.oQueryOptionsPromise&&this.oQueryOptionsPromise.$metaPath===t)){this.oQueryOptionsPromise=this.fetchResolvedQueryOptions(e).then(function(t){return i.fetchFilter(e,t.$filter).then(function(e){return o.mergeQueryOptions(t,i.getOrderby(t.$orderby),e)})});this.oQueryOptionsPromise.$metaPath=t}return this.oQueryOptionsPromise};E.prototype.doReplaceWith=function(t,i,n){var r=t.getModelIndex(),s,o=t.fnOnBeforeDestroy,a,h=this.oHeaderContext.getPath()+n,d=this.mPreviousContextsByPath[h];if(d){if(d===t){return d}if(d.iIndex!==undefined){throw new Error("Unexpected index: "+d)}d.iIndex=t.iIndex;delete this.mPreviousContextsByPath[h]}else{d=e.create(this.oModel,this,h,t.iIndex);s=true}if(r===undefined){this.mPreviousContextsByPath[h]=d;this.oCache.addKeptElement(i)}else{t.iIndex=undefined;this.aContexts[r]=d;this.oCache.doReplaceWith(r,i)}if(t.isKeepAlive()){this.mPreviousContextsByPath[t.getPath()]=t;if(s){if(o){a=(o.$original||o).bind(null,d);a.$original=o}d.setKeepAlive(true,a)}}else{this.destroyLater(t)}this._fireChange({reason:c.Change});return d};E.prototype.doSetProperty=function(){};E.prototype.expand=function(e,t,i){this.checkSuspended();if(this.aContexts[e.iIndex]!==e){throw new Error("Not currently part of the hierarchy: "+e)}if(t>1&&!this.mParameters.$$aggregation?.hierarchyQualifier){throw new Error("Missing recursive hierarchy")}let n=false;const r=o.getRelativePath(e.getPath(),this.oHeaderContext.getPath());return this.oCache.expand(this.lockGroup(),r,t,()=>{n=true;this.fireDataRequested()}).then(t=>{if(t<0){return this.requestSideEffects(this.getGroupId(),[""])}if(t){this.insertGap(e.getModelIndex(),t);if(!i){this._fireChange({reason:c.Change})}}if(n){this.fireDataReceived({})}},e=>{if(n){this.fireDataReceived({error:e})}throw e})};E.prototype.fetchContexts=function(e,t,i,n,r,s){var o,a=this;if(this.bFirstCreateAtEnd){e+=this.iCreatedContexts}if(!n){n=this.oReadGroupLock||this.lockGroup();this.oReadGroupLock=undefined}o=this.fetchData(e,t,i,n,s);if(r){o=Promise.resolve(o)}return o.then(function(t){var i;if(!a.aContexts){i=new Error("Binding already destroyed");i.canceled=true;throw i}if(t){t.$checkStillValid?.();return a.createContexts(e,t.value)}},function(e){n.unlock(true);throw e})};E.prototype.fetchData=function(e,t,i,n,r){var s=this.oContext,o=this;return this.oCachePromise.then(function(a){var h;if(o.bRelative&&s!==o.oContext){return undefined}if(a){if(!a.hasSentRequest()&&o.isRelative()&&E.isBelowCreated(s)){h=s.getAndRemoveCollection(o.sPath);if(h){a.setPersistedCollection(h)}}return a.read(e,t,i,n,r,undefined,o.fireSeparateReceived.bind(o)).then(function(e){e.$checkStillValid=o.checkSameCache.bind(o,a,e["@$ui5.resetCount"]);return e})}n.unlock();return s.fetchValue(o.sReducedPath).then(function(i){var n;i??=[];n=i.$count;i=i.slice(e,e+t);i.$count=n;return{value:i}})})};E.prototype.fetchDownloadUrl=function(){var e=this.oModel.mUriParameters;this.checkTransient();if(!this.isResolved()){throw new Error("Binding is unresolved")}if(this.hasFilterNone()){return h.resolve(null)}const t=o.getMetaPath(this.getResolvedPath());const i={};for(const e in this.mChildPathsReducedToParent){const n=o.wrapChildQueryOptions(t,e,{},this.oModel.oInterface.fetchMetadata,true);o.aggregateExpandSelect(i,n)}return this.withCache(function(t,n){return t.getDownloadUrl(n,e,i)})};E.prototype.fetchFilter=function(e,t){let i;const r=this.oModel.getMetaModel();const s=r.getMetaContext(this.oModel.resolve(this.sPath,e));function a(e,t,n,r){var s,a,h,d;function u(e){return h?"tolower("+e+")":e}h=t==="Edm.String"&&e.isCaseSensitive()===false;a=r&&!i?.includes(e)?u(`$these/aggregate(${e.getPath()})`):u(decodeURIComponent(e.getPath()));d=u(o.formatLiteral(e.getValue1(),t));switch(e.getOperator()){case l.BT:s=a+" ge "+d+" and "+a+" le "+u(o.formatLiteral(e.getValue2(),t));break;case l.NB:s=c(a+" lt "+d+" or "+a+" gt "+u(o.formatLiteral(e.getValue2(),t)),n);break;case l.EQ:case l.GE:case l.GT:case l.LE:case l.LT:case l.NE:s=a+" "+e.getOperator().toLowerCase()+" "+d;break;case l.Contains:case l.EndsWith:case l.NotContains:case l.NotEndsWith:case l.NotStartsWith:case l.StartsWith:s=e.getOperator().toLowerCase().replace("not","not ")+"("+a+","+d+")";break;default:throw new Error("Unsupported operator: "+e.getOperator())}return s}function d(e,t,i,n){var o;if(!e){return h.resolve()}if(e.getFilters()){return h.all(e.getFilters().map(function(i){return d(i,t,e.isAnd(),n)})).then(function(t){return c(t.join(e.isAnd()?" and ":" or "),i&&!e.isAnd())})}o=r.resolve(u(e.getPath(),t),s);return r.fetchObject(o).then(function(r){var s,h,c;if(!r){throw new Error("Type cannot be determined, no metadata for path: "+o)}c=e.getOperator();if(m.test(c)){const i=c.startsWith("Not");c=c.replace("Not","");const n=(i?"not ":"")+e.getPath()+"/";s=e.getCondition();h=e.getVariable();if(c==="Any"&&!s){return n+"any()"}t=Object.create(t);t[h]=u(e.getPath(),t);return d(s,t).then(e=>n+c.toLowerCase()+"("+h+":"+e+")")}return a(e,r.$Type,i,n)})}function u(e,t){var i=e.split("/");i[0]=t[i[0]];return i[0]?i.join("/"):e}function c(e,t){return t?"("+e+")":e}const p=g.combineFilters(this.aFilters,this.aApplicationFilters);const C=o.isDataAggregation(this.mParameters)?r.fetchObject(s.getPath()+"/"):h.resolve();return C.then(e=>{const r=this.mParameters.$$aggregation;if(e){r.$leafLevelAggregated=!e.$Key?.every(e=>e in r.group||Object.keys(r.group).some(t=>r.group[t].additionally?.includes(e)))}if(!p){return[t]}if(p===f.NONE){return["false"]}const s=n.splitFilter(p,r);i=s[3];return h.all([d(s[0],{},t).then(e=>e&&t?e+" and ("+t+")":e||t),d(s[1],{}),d(s[2],{},undefined,true)])})};E.prototype.fetchOrGetParent=function(e,t){if(!this.mParameters.$$aggregation?.hierarchyQualifier){throw new Error("Missing recursive hierarchy")}if(this.aContexts[e.iIndex]!==e){throw new Error("Not currently part of a recursive hierarchy: "+e)}const i=this.oCache.getParentIndex(e.iIndex);if(i<0){return null}const n=e=>this.requestContexts(e,1).then(e=>e[0]);if(t){if(i===undefined){return this.oCache.fetchParentIndex(e.iIndex,this.lockGroup()).then(n)}return n(i)}return this.aContexts[i]};E.prototype.fetchOrGetSibling=function(e,t=+1,i=false){if(!this.mParameters.$$aggregation?.hierarchyQualifier){throw new Error("Missing recursive hierarchy")}if(t!==-1&&t!==+1){throw new Error("Unsupported offset: "+t)}if(e.isDeleted()||e.isTransient()||this.aContexts[e.iIndex]!==e){throw new Error("Unsupported context: "+e)}this.checkSuspended();let n;if(e.created()){if(t<0){return null}const r=e.getParent();if(r?.created()){return null}let s;let o;[n,s,o]=this.oCache.get1stInPlaceChildIndex(r?r.iIndex:-1);if(s){return i?this.requestContexts(n,1).then(e=>e[0]).then(e=>e.getProperty("@$ui5.node.level")===o?e:null):undefined}}else{n=this.oCache.getSiblingIndex(e.iIndex,t)}if(n<0){return null}if(n!==undefined){this.fetchContexts(n,1,0,s.$cached);return this.aContexts[n]}if(!i){return undefined}return this.oCache.requestSiblingIndex(e.iIndex,t,this.lockGroup()).then(e=>e<0?null:this.requestContexts(e,1).then(e=>e[0]))};E.prototype.fetchValue=function(e,t,i){var n=i&&this.oCache!==undefined?h.resolve(this.oCache):this.oCachePromise,r=this;return n.then(function(n){var o,a;if(n){o=i?s.$cached:r.lockGroup();a=r.getRelativePath(e);if(a!==undefined){return n.fetchValue(o,a,undefined,t)}}if(r.oContext){return r.oContext.fetchValue(e,t,i)}})};E.prototype.filter=function(e,t){var i=o.toArray(e);this.checkTransient();f.checkFilterNone(i);if(i[0]===f.NONE&&this.mParameters.$$aggregation){throw new Error("Cannot combine Filter.NONE with $$aggregation")}if(this.sOperationMode!==v.Server){throw new Error("Operation mode has to be sap.ui.model.odata.OperationMode.Server")}if(t===p.Control?o.deepEqual(i,this.aFilters):o.deepEqual(i,this.aApplicationFilters)){return this}if(this.hasPendingChanges(true)){throw new Error("Cannot filter due to pending changes")}if(t===p.Control){this.aFilters=i}else{this.aApplicationFilters=i}this.oQueryOptionsPromise=undefined;this.setResetViaSideEffects(true);if(this.isRootBindingSuspended()){this.setResumeChangeReason(c.Filter);return this}if(this.mParameters.$$clearSelectionOnFilter){this.oHeaderContext?.setSelected(false)}this.createReadGroupLock(this.getGroupId(),true);this.removeCachesAndMessages("");this.fetchCache(this.oContext);this.reset(c.Filter);this.oHeaderContext?.checkUpdate();return this};E.prototype.findContextForCanonicalPath=function(e){var t=Object.values(this.mPreviousContextsByPath).filter(function(e){return e.isEffectivelyKeptAlive()});function i(t){return t.find(function(t){var i;if(t){i=t.fetchCanonicalPath();i.caught();return i.getResult()===e}})}return i(t)||i(this.aContexts)};E.prototype.fireCreateActivate=function(e){if(this.fireEvent("createActivate",{context:e},true)){this.iActiveContexts+=1;return true}return false};E.prototype.fireSelectionChanged=function(e){this.fireEvent("selectionChanged",{context:e})};E.prototype.fireSeparateReceived=function(e,t,i,n){const r={property:e,start:t,length:i-t};if(n){r.messagesOnError=this.oModel.reportTransitionMessages(o.extractMessages(n),n.resourcePath,true)}const s=this.fireEvent("separateReceived",r,true);if(n&&s){d.updateMessages(undefined,r.messagesOnError)}};E.prototype.getAggregation=function(e){return o.clone(this.mParameters.$$aggregation,function(t,i){return t[0]==="$"&&!(e&&["$DistanceFromRoot","$DrillState","$NodeProperty"].includes(t))?undefined:i})};E.prototype.getAllCurrentContexts=function(){var e;this.withCache(function(t,i){e=t.getElements(i)},"",true);if(e&&this.createContexts(0,e,true)){this._fireChange({reason:c.Change})}return this._getAllExistingContexts()};E.prototype.getCacheAndMoveKeepAliveContexts=function(e,t){var i,n,r=this;if(!this.mParameters.$$getKeepAliveContext){return undefined}i=this.oModel.releaseKeepAliveBinding("/"+e);if(!i){return undefined}Object.keys(i.mParameters).concat(Object.keys(this.mParameters)).forEach(function(e){if((e[0]!=="$"||e==="$$patchWithoutSideEffects"||e==="$$updateGroupId")&&r.mParameters[e]!==i.mParameters[e]){throw new Error(r+": parameter does not match getKeepAliveContext: "+e)}});this.mLateQueryOptions=o.clone(t);o.aggregateExpandSelect(this.mLateQueryOptions,i.mLateQueryOptions);this.mPreviousContextsByPath=i.mPreviousContextsByPath;Object.values(this.mPreviousContextsByPath).forEach(function(e){e.oBinding=r});n=i.oCache;n.setQueryOptions(t);i.oCache=null;i.oCachePromise=h.resolve(null);i.mPreviousContextsByPath={};i.destroy();return n};E.prototype.getContexts=function(t=0,i,n,r){var s,o,h=false,d,u,f,l=!!this.sChangeReason,g=this.getResolvedPath(),p,C=this;a.debug(this+"#getContexts("+t+", "+i+", "+n+")",undefined,P);this.checkSuspended();if(t!==0&&this.bUseExtendedChangeDetection){throw new Error("Unsupported operation: v4.ODataListBinding#getContexts,"+" iStart must be 0 if extended change detection is enabled, but is "+t)}if(this.bUseExtendedChangeDetection){if(n!==undefined){throw new Error("Unsupported operation: v4.ODataListBinding#getContexts,"+" iMaximumPrefetchSize must not be set if extended change detection is"+" enabled")}if(r){throw new Error("Unsupported operation: v4.ODataListBinding#getContexts,"+" must not use bKeepCurrent if extended change detection is enabled")}}if(n&&r){throw new Error("Unsupported operation: v4.ODataListBinding#getContexts,"+" must not use both iMaximumPrefetchSize and bKeepCurrent")}if(!this.isResolved()){this.aPreviousData=null;return[]}s=this.sChangeReason||c.Change;this.sChangeReason=undefined;if(s==="AddVirtualContext"){this.oModel.addPrerenderingTask(function(){var e=C.bUseExtendedChangeDetection;if(C.aContexts&&!C.isRootBindingSuspended()){C.bUseExtendedChangeDetection=false;C.getContexts(t,i,n);C.bUseExtendedChangeDetection=e}C.oModel.addPrerenderingTask(function(){if(!C.isRootBindingSuspended()){C.sChangeReason="RemoveVirtualContext";C._fireChange({detailedReason:"RemoveVirtualContext",reason:c.Change});C.reset(c.Refresh)}})},true);p=e.create(this.oModel,this,g+"/"+e.VIRTUAL,e.VIRTUAL);C.mPreviousContextsByPath[p.getPath()]=p;return[p]}if(s==="RemoveVirtualContext"||this.oContext&&this.oContext.iIndex===e.VIRTUAL){return[]}i||=this.oModel.iSizeLimit;if(!n||n<0){n=0}if(!this.oDiff){u=this.isRefreshWithoutBubbling();f=this.fetchContexts(t,i,n,undefined,l,function(){if(d===undefined){d=true;C.fireDataRequested(u)}});if(!l&&f.isPending()){this.createContextsForCachedData(t,i)}this.resolveRefreshPromise(f).then(function(e){if(C.bUseExtendedChangeDetection){C.oDiff={aDiff:C.getDiff(i),iLength:i}}if(h){if(e||C.oDiff&&C.oDiff.aDiff?.length){C._fireChange({reason:s})}else{C.oDiff=undefined}}if(d){C.fireDataReceived({data:{}},u)}d=false},function(e){if(d){C.fireDataReceived(e.canceled?{data:{}}:{error:e},u)}throw e}).catch(function(e){C.oModel.reportError("Failed to get contexts for "+C.oModel.sServiceUrl+g.slice(1)+" with start index "+t+" and length "+i,P,e)});h=true}if(!r){this.iCurrentBegin=t;this.iCurrentEnd=t+i}o=this.getContextsInViewOrder(t,i);o.bExpectMore=this._isExpectingMoreContexts(o,t,i);if(this.bUseExtendedChangeDetection){if(this.oDiff&&i!==this.oDiff.iLength){throw new Error("Extended change detection protocol violation: Expected "+"getContexts(0,"+this.oDiff.iLength+"), but got getContexts(0,"+i+")")}o.dataRequested=!this.oDiff;o.diff=this.oDiff?this.oDiff.aDiff:[]}this.oDiff=undefined;return o};E.prototype.getContextsInViewOrder=function(e,t){var i,n,r;if(this.bFirstCreateAtEnd){i=[];n=Math.min(t,this.getLength()-e);for(r=0;r<n;r+=1){i[r]=this.aContexts[this.getModelIndex(e+r)]}}else{i=this.aContexts.slice(e,e+t)}return i};E.prototype.getCount=function(){return this.getHeaderContext()?.getProperty("$count")};E.prototype.getCurrentContexts=function(){var e,t=Math.min(this.iCurrentEnd,this.iMaxLength+this.iCreatedContexts)-this.iCurrentBegin;e=this.getContextsInViewOrder(this.iCurrentBegin,t);if(t<Infinity){while(e.length<t){e.push(undefined)}}return e};E.prototype.getDependentBindings=function(){var e=this;return this.oModel.getDependentBindings(this).filter(function(t){return t.oContext.isEffectivelyKeptAlive()||!(t.oContext.getPath()in e.mPreviousContextsByPath)})};E.prototype.getDiff=function(e){var t=this.aPreviousData,i=this;this.aPreviousData=this.getContextsInViewOrder(0,e).map(function(e){return i.getContextData(e)});return t?this.diffData(t,this.aPreviousData):null};E.prototype.getDistinctValues=function(e){throw new Error("Unsupported operation: v4.ODataListBinding#getDistinctValues")};E.prototype.getDownloadUrl=o.createGetMethod("fetchDownloadUrl",true);E.prototype.getEntryData=function(e){return o.publicClone(e.getValue(),false,true)};E.prototype.getEntryKey=function(e){return e.getPath()};E.prototype.getFilterInfo=function(e){var t=g.combineFilters(this.aFilters,this.aApplicationFilters),i=null,n;if(t){i=t.getAST(e)}if(this.mQueryOptions.$filter){n={expression:this.mQueryOptions.$filter,syntax:"OData "+this.oModel.getODataVersion(),type:"Custom"};if(i){i={left:i,op:"&&",right:n,type:"Logical"}}else{i=n}}return i};E.prototype.getGeneration=function(){return this.oHeaderContext.getGeneration(true)||t.prototype.getGeneration.call(this)};E.prototype.getHeaderContext=function(){return this.isResolved()?this.oHeaderContext:null};E.prototype.getKeepAliveContext=function(t,i,n){var r=this.mPreviousContextsByPath[t]||this.aContexts.find(function(e){return e&&e.getPath()===t}),s=o.getPredicateIndex(t),a=this.getResolvedPath();this.checkKeepAlive();this.checkSuspended();this.checkTransient();o.checkGroupId(n);if(!r){if(!a){throw new Error("Binding is unresolved: "+this)}if(t.slice(0,s)!==a){throw new Error(this+": Not a valid context path: "+t)}r=e.create(this.oModel,this,t);this.mPreviousContextsByPath[t]=r;this.oCachePromise.then(function(e){var i={};o.setPrivateAnnotation(i,"predicate",t.slice(s));e.addKeptElement(i);if(n){o.setPrivateAnnotation(i,"groupId",n)}});this.oModel.getMetaModel().requestObject(o.getMetaPath(a)+"/").then(function(e){return r.requestProperty(e.$Key.map(function(e){return typeof e==="object"?Object.values(e)[0]:e}))}).catch(this.oModel.getReporter())}r.setKeepAlive(true,r.fnOnBeforeDestroy,i);return r};E.prototype.getKeepAlivePredicates=function(){var e;if(!this.getHeaderContext()){return[]}e=this.getHeaderContext().getPath();return Object.values(this.mPreviousContextsByPath).concat(this.aContexts).filter(function(e){return e.isEffectivelyKeptAlive()}).map(function(t){return o.getRelativePath(t.getPath(),e)})};E.prototype.getLength=function(){if(this.bLengthFinal){return this.iMaxLength+this.iCreatedContexts}return this.aContexts.length?this.aContexts.length+10:0};E.prototype.getModelIndex=function(e){if(!this.bFirstCreateAtEnd){return e}if(!this.bLengthFinal){return this.aContexts.length-e-1}return e<this.getLength()-this.iCreatedContexts?e+this.iCreatedContexts:this.getLength()-e-1};E.prototype.getOrderby=function(e){var t=[],i=this;this.aSorters.forEach(function(e){if(e instanceof x){t.push(e.getPath()+(e.isDescending()?" desc":""))}else{throw new Error("Unsupported sorter: "+e+" - "+i)}});if(e){t.push(e)}return t.join(",")};E.prototype.getQueryOptions=function(e){var t={},i=this;if(e){throw new Error("Unsupported parameter value: bWithSystemQueryOptions: "+e)}Object.keys(this.mQueryOptions).forEach(function(e){if(e[0]!=="$"){t[e]=o.clone(i.mQueryOptions[e])}});return t};E.prototype.getQueryOptionsFromParameters=function(){return this.mQueryOptions};E.prototype.getSelectionCount=function(){return this.getHeaderContext()?.getProperty("$selectionCount")};E.prototype.hasFilterNone=function(){return this.aFilters[0]===f.NONE||this.aApplicationFilters[0]===f.NONE};E.prototype.hasPendingChangesForPath=function(e,i){if(this.oCache===undefined){return!i&&this.iActiveContexts>0}return t.prototype.hasPendingChangesForPath.apply(this,arguments)};E.prototype.inheritQueryOptions=function(e,t){var i;if(o.isEmptyObject(this.mParameters)){i=this.getQueryOptionsForPath("",t);if(e.$orderby&&i.$orderby){e.$orderby+=","+i.$orderby}if(e.$filter&&i.$filter){e.$filter="("+e.$filter+") and ("+i.$filter+")"}e=o.merge({},i,e);o.aggregateExpandSelect(e,i)}return e};E.prototype.initialize=function(){if(this.isResolved()){this.checkDataState();if(this.isRootBindingSuspended()){this.sResumeChangeReason=this.sChangeReason==="AddVirtualContext"?c.Change:c.Refresh}else if(this.sChangeReason==="AddVirtualContext"){this._fireChange({detailedReason:"AddVirtualContext",reason:c.Change})}else{this.sChangeReason=c.Refresh;this._fireRefresh({reason:c.Refresh})}}};E.prototype.insertContext=function(e,t,i){if(t!==undefined){o.insert(this.aContexts,t,e);for(let e=this.aContexts.length-1;e>t;e-=1){if(this.aContexts[e]){this.aContexts[e].iIndex+=1}}this.iMaxLength+=1}else if(this.bFirstCreateAtEnd!==i){this.aContexts.splice(this.iCreatedContexts-1,0,e);for(let e=this.iCreatedContexts-1;e>=0;e-=1){this.aContexts[e].iIndex=e-this.iCreatedContexts}}else{this.aContexts.unshift(e)}this._fireChange({reason:c.Add})};E.prototype.insertGap=function(e,t){const i=this.aContexts;if(e>=i.length){throw new Error("Array index out of bounds: "+e)}else if(e===i.length-1){i.length+=t}else{for(let n=i.length-1;n>e;n-=1){const e=i[n];if(e){e.iIndex+=t;i[n+t]=e;delete i[n]}}}this.iMaxLength+=t};E.prototype.isAncestorOf=function(e,t){if(!this.mParameters.$$aggregation?.hierarchyQualifier){throw new Error("Missing recursive hierarchy")}if(!t){return false}[e,t].forEach(e=>{if(this.aContexts[e.iIndex]!==e){throw new Error("Not currently part of a recursive hierarchy: "+e)}});return this.oCache.isAncestorOf(e.iIndex,t.iIndex)};E.prototype.isFirstCreateAtEnd=function(){return this.bFirstCreateAtEnd};E.prototype.isKeepAliveBindingFor=function(e){return this.mParameters.$$getKeepAliveContext&&this.getResolvedPath()===e&&(!this.isRootBindingSuspended()||this.aContexts.length||!o.isEmptyObject(this.mPreviousContextsByPath))};E.prototype.isLengthFinal=function(){return this.bLengthFinal};E.prototype.isUnchangedParameter=function(e,i){if(e==="$$aggregation"){if(!i){return this.mParameters.$$aggregation===i}i=o.clone(i);n.buildApply(i);return o.deepEqual(o.cloneNo$(this.mParameters.$$aggregation),o.cloneNo$(i))}return t.prototype.isUnchangedParameter.apply(this,arguments)};E.prototype.keepOnlyVisibleContexts=function(){const e=this.aContexts.slice(0,this.iCreatedContexts);const t=e.concat(this.getCurrentContexts().filter(t=>t&&!e.includes(t)));Object.keys(this.mPreviousContextsByPath).forEach(e=>{var i=this.mPreviousContextsByPath[e];if(i.isEffectivelyKeptAlive()){t.push(i)}});let i=0;function n(e,n,r){if(n.created()){t.push(n);i=e+r+1}else{delete this.aContexts[e+r];this.destroyLater(n)}}this.aContexts.slice(this.iCreatedContexts,this.iCurrentBegin).forEach(n.bind(this,this.iCreatedContexts));if(this.aContexts.length>this.iCurrentEnd&&this.iCurrentEnd>=this.iCreatedContexts){this.aContexts.slice(this.iCurrentEnd).forEach(n.bind(this,this.iCurrentEnd));this.aContexts.length=Math.max(i,this.iCurrentEnd)}return t.filter(e=>!e.getProperty("@$ui5.context.isTransient"))};E.prototype.move=function(e,t,i,n){const r=(e,t)=>{if(e>t){[e,t]=[t,e]}for(let i=e;i<=t;i+=1){if(this.aContexts[i]){this.aContexts[i].iIndex=i}}};if(!this.mParameters.$$aggregation?.hierarchyQualifier){throw new Error("Missing recursive hierarchy")}this.checkSuspended();const s=this.getUpdateGroupId();const a=this.lockGroup(s,true,true);const d=e.getCanonicalPath().slice(1);const u=t===null?null:t.getCanonicalPath().slice(1);const f=i===null?null:i?.getCanonicalPath().slice(1);const l=i===undefined?undefined:e.getPath().slice(1);const g=i?.isEffectivelyKeptAlive();const{promise:p,refresh:C}=this.oCache.move(a,d,u,f,l,g,n);if(C){return h.all([p,this.requestSideEffects(s,[""])]).then(([t])=>{const[r,s,o]=t();e.iIndex=r;if(g){i.iIndex=s}if(n){return o}})}return p.then(([i,n,s])=>{if(i>1){this.insertGap(t.getModelIndex(),i-1)}if(s){this.collapse(e,false,true,s)}const a=e.getModelIndex();this.aContexts.splice(a,1);o.insert(this.aContexts,n,e);r(a,n);if(s){this.expand(e,1).unwrap()}else{this._fireChange({reason:c.Change})}})};E.prototype.onChange=function(){var e,t=this;if(!this.oRefreshPromise){if(this.isRootBindingSuspended()){this.sResumeAction="onChange"}else{e=this.getDependentBindings();this.reset(c.Refresh);h.all(e.map(function(e){return e.refreshInternal("")})).then(function(){return t.oHeaderContext.checkUpdateInternal()}).catch(this.oModel.getReporter())}}};E.prototype.onKeepAliveChanged=function(e){if(!e.isDeleted()&&e.getPath()in this.mPreviousContextsByPath&&!e.isEffectivelyKeptAlive()){this.destroyPreviousContextsLater([e.getPath()])}};E.prototype.prepareDeepCreate=function(t,i){var n=this;if(!t){return!i}if(t.iIndex===e.VIRTUAL){return true}if(!t.getPath().includes("($uid=")){return!i}this.mCacheQueryOptions=i;if(!this.oModel.bAutoExpandSelect||E.isBelowAggregation(t)){return true}t.withCache(function(t,r){var s=t.addTransientCollection(r,i&&i.$select),a=n.getResolvedPath();n.aContexts=s.map(function(t,i){var r,h=o.getPrivateAnnotation(t,"transientPredicate"),d=o.getPrivateAnnotation(t,"promise");r=e.create(n.oModel,n,a+h,i-s.length,d,false,true);r.created().catch(n.oModel.getReporter());o.setPrivateAnnotation(t,"context",r);o.setPrivateAnnotation(t,"firstCreateAtEnd",false);o.deletePrivateAnnotation(t,"promise");return r});n.iCreatedContexts=n.iActiveContexts=n.aContexts.length;n.bFirstCreateAtEnd=false},this.sPath);return true};E.prototype.refreshInternal=function(e,t,i,n,r){var s=this;function o(i){return i.map(function(i){if(i.bIsBeingDestroyed||i.getContext().isEffectivelyKeptAlive()&&i.hasPendingChanges()){return}return i.refreshInternal(e,t,false,n,r)})}if(this.isRootBindingSuspended()){if(this.bSharedRequest){this.sResumeAction="resetCache"}else{this.refreshSuspended(t);this.bRefreshKeptElements=true}return h.all(o(s.getDependentBindings()))}this.createReadGroupLock(t,this.isRoot());return this.oCachePromise.then(function(i){var a=s.iActiveContexts,d=s.iCreatedContexts,u=s.aContexts.slice(0,d),f,l,g=s.oRefreshPromise;if(i&&!g){s.removeCachesAndMessages(e);if(s.bSharedRequest){g=s.createRefreshPromise();i.reset([])}else{s.fetchCache(s.oContext,false,true,t,n,r);l=s.refreshKeptElements(t,n);if(s.iCurrentEnd>0){g=s.createRefreshPromise(n).catch(function(e){if(!n||e.canceled){throw e}return s.fetchResourcePath(s.oContext).then(function(t){var n;if(!s.bRelative||i.getResourcePath()===t){if(s.oCache===i){i.restore(true)}else{i.setActive(true);s.oCache=i;s.oCachePromise=h.resolve(i)}s.iActiveContexts=a;s.iCreatedContexts=d;for(n=0;n<d;n+=1){u[n].iIndex=n-d;delete s.mPreviousContextsByPath[u[n].getPath()]}s.aContexts=u;s._fireChange({reason:c.Change})}throw e})}).finally(function(){if(i.restore){i.restore(false)}})}}}f=s.getDependentBindings();s.reset(c.Refresh,!i||(n?false:undefined),t);return h.all(o(f).concat(g,l)).then(function(){return s.oHeaderContext?.checkUpdateInternal()})})};E.prototype.refreshKeptElements=function(e,t){var i=this;return this.oCachePromise.then(function(n){return n.refreshKeptElements(i.lockGroup(e),function e(t,n){var r=n>=0?i.aContexts[n]:i.mPreviousContextsByPath[i.getResolvedPath()+t];r.resetKeepAlive();if(n>=0){i.removeCreated(r)}},t)}).catch(function(e){i.oModel.reportError("Failed to refresh kept-alive elements",P,e);throw e})};E.prototype.refreshSingle=function(e,t,i,n,r){var s=e.getPath(),a=s.slice(1),d=this;if(e===this.oHeaderContext){throw new Error("Unsupported header context: "+e)}if(i&&r){throw new Error("Unsupported: bAllowRemoval && bWithMessages")}return this.withCache(function(u,f,l){var g=false,p=false,C=e.getModelIndex(),x=o.getRelativePath(s,d.oHeaderContext.getPath()),v=[];function m(e){if(g){d.fireDataReceived(e)}}function y(){if(!n){g=true;d.fireDataRequested()}}function E(t){var i=e.getModelIndex(),n;if(e.iIndex<0){if(t){d.mPreviousContextsByPath[s]=e}else{e.resetKeepAlive();p=true}d.removeCreated(e)}else{if(i===undefined){delete d.mPreviousContextsByPath[s]}else{d.aContexts.splice(i,1);d.iMaxLength-=1;for(n=i;n<d.aContexts.length;n+=1){if(d.aContexts[n]){d.aContexts[n].iIndex-=1}}if(t){d.mPreviousContextsByPath[s]=e}}if(!t){p=true;e.doSetSelected(false,true);e.destroy()}}if(i!==undefined){d._fireChange({reason:c.Remove})}}if(C<0){throw new Error("Cannot refresh. Hint: Side-effects refresh in parallel? "+e)}v.push((i?u.refreshSingleWithRemove(t,f,C,x,e.isEffectivelyKeptAlive(),y,E):u.refreshSingle(t,f,C,x,e.isKeepAlive(),r,y)).then(function(){var r=[];m({data:{}});l.checkSameCache(u);if(!p){r.push(e.checkUpdateInternal());if(i){r.push(e.refreshDependentBindings(a,t.getGroupId(),false,n))}}return h.all(r)},function(e){m({error:e});throw e}).catch(function(i){t.unlock(true);d.oModel.reportError("Failed to refresh entity: "+e,P,i);if(!i.canceled){throw i}}));if(!i){v.push(e.refreshDependentBindings(a,t.getGroupId(),false,n))}return h.all(v)})};E.prototype.removeCreated=function(e){var t,i;if(this.mParameters.$$aggregation){this.iMaxLength-=1;t=this.aContexts.indexOf(e);for(i=this.aContexts.length-1;i>t;i-=1){if(this.aContexts[i]){this.aContexts[i].iIndex-=1}}}else{t=e.getModelIndex();this.iCreatedContexts-=1;if(!this.iCreatedContexts){this.bFirstCreateAtEnd=undefined}if(!e.isInactive()){this.iActiveContexts-=1}for(i=0;i<t;i+=1){this.aContexts[i].iIndex+=1}}this.aContexts.splice(t,1);e.iIndex=undefined;if(!e.isEffectivelyKeptAlive()){this.destroyLater(e)}};E.prototype.requestContexts=function(e=0,t,i){var n=this;if(!this.isResolved()){throw new Error("Unresolved binding: "+this.sPath)}this.checkSuspended();o.checkGroupId(i);t||=this.oModel.iSizeLimit;const r=i&&this.lockGroup(i,true);return Promise.resolve(this.fetchContexts(e,t,0,r)).then(function(i){if(i){n._fireChange({reason:c.Change})}return n.getContextsInViewOrder(e,t)},function(i){n.oModel.reportError("Failed to get contexts for "+n.oModel.sServiceUrl+n.getResolvedPath().slice(1)+" with start index "+e+" and length "+t,P,i);throw i})};E.prototype.requestDownloadUrl=o.createRequestMethod("fetchDownloadUrl");E.prototype.requestFilterForMessages=function(e){var t=this.oModel.getMetaModel(),i,n=this.oHeaderContext&&this.oHeaderContext.getPath(),r=this;this.checkTransient();if(!n){return Promise.resolve(null)}i=o.getMetaPath(n);return t.requestObject(i+"/").then(function(s){var a,h={},d=false;r.oModel.getMessagesByPath(n,true).filter(function(t){return!e||e(t)}).forEach(function(e){e.getTargets().forEach(function(e){var t=e.slice(n.length).split("/")[0];if(t){if(t.startsWith("($uid=")){d=true}else{h[t]=true}}})});a=Object.keys(h).map(function(e){return o.getFilterForPredicate(e,s,t,i)});if(a.length===0){return d?f.NONE:null}return a.length===1?a[0]:new f({filters:a})})};E.prototype.requestSelectedContexts=function(e){if(this.bSharedRequest){throw new Error("Unsupported $$sharedRequest at "+this)}if("$$aggregation"in this.mParameters){throw new Error("Unsupported $$aggregation at "+this)}this.checkSuspended();this.checkTransient();if(this.oHeaderContext.isSelected()){throw new Error('Unsupported "Select All": '+this.oHeaderContext)}if(this.hasPendingChanges()){throw new Error("Unsupported pending changes")}o.checkGroupId(e);const t={};const i=this.getResolvedPath().length;const n=this._getAllExistingContexts().filter(e=>e.isSelected()).map(e=>{t[e.getPath()]=e;return e.getPath().slice(i)});if(!n.length){return Promise.resolve([])}return this.oCache.requestFilteredOrderedPredicates(n,this.lockGroup(e)).then(e=>e.map(e=>t[this.oHeaderContext.getPath()+e]))};E.prototype.requestSideEffects=function(e,t,i){var r=this.oModel,s,a,d=i&&i!==this.oHeaderContext,u=this;function c(e){return e.catch(function(e){r.reportError("Failed to request side effects",P,e);if(!e.canceled){throw e}})}if(o.isDataAggregation(this.mParameters)){if(d){throw new Error("Must not request side effects when using data aggregation")}if(n.isAffected(this.mParameters.$$aggregation,this.aFilters.concat(this.aApplicationFilters),t)){return this.refreshInternal("",e,false,true)}return h.resolve()}if(!d&&this.oCache&&this.oCache.isDeletingInOtherGroup(e)){throw new Error("Must not request side effects when there is a pending delete in a"+" different batch group")}if(this.oCache&&this.oCache.getPendingRequestsPromise()){return h.resolve(this.oCache.getPendingRequestsPromise()).then(function(){return u.requestSideEffects(e,t,i)})}if(t.indexOf("")<0){s=o.getPredicates(d?[i]:this.keepOnlyVisibleContexts());if(s){a=this.oCache?[this.oCache.requestSideEffects(this.lockGroup(e),t,s,d,d)]:[];this.visitSideEffects(e,t,d?i:undefined,a);return h.all(a.map(c)).then(function(){return u.refreshDependentListBindingsWithoutCache()})}}if(d){r.withUnresolvedBindings("removeCachesAndMessages",i.getPath().slice(1));return this.refreshSingle(i,this.lockGroup(e),false,true,true)}if(this.iCurrentEnd===0){return h.resolve()}return this.refreshInternal("",e,false,true)};E.prototype.reset=function(e,t,i){var n=0,r=this.iCurrentEnd===0,s=i&&i!==this.getUpdateGroupId(),o,a=this;if(t===true){this.iActiveContexts=0;this.iCreatedContexts=0}if(this.aContexts){this.aContexts.slice(this.iCreatedContexts).forEach(function(e){a.mPreviousContextsByPath[e.getPath()]=e});for(o=0;o<this.iCreatedContexts;o+=1){const e=this.aContexts[o];if(t===false?s&&e.isTransient()||e.isInactive()!==undefined:e.isTransient()){this.aContexts[n]=e;n+=1}else{this.iActiveContexts-=1;this.mPreviousContextsByPath[e.getPath()]=e}}for(o=0;o<n;o+=1){this.aContexts[o].iIndex=o-n}this.aContexts.length=this.iCreatedContexts=n}else{this.aContexts=[]}if(!this.iCreatedContexts){this.bFirstCreateAtEnd=undefined}this.iCurrentBegin=this.iCurrentEnd=0;this.iMaxLength=Infinity;this.bLengthFinal=false;if(e&&!(r&&e===c.Change)&&this.isResolved()){this.sChangeReason=e;this._fireRefresh({reason:e})}};E.prototype.resetKeepAlive=function(){var e=this.mPreviousContextsByPath;Object.keys(e).forEach(function(t){e[t].resetKeepAlive()});this.aContexts.forEach(function(e){e.resetKeepAlive()})};E.prototype.restoreCreated=function(){var e=this;this.withCache(function(t,i){if(e.aContexts.length){return}t.getCreatedElements(i).forEach(function(t,i){e.aContexts[i]=o.getPrivateAnnotation(t,"context");e.bFirstCreateAtEnd=o.getPrivateAnnotation(t,"firstCreateAtEnd");e.iCreatedContexts+=1;if(!t["@$ui5.context.isInactive"]){e.iActiveContexts+=1}})}).catch(this.oModel.getReporter())};E.prototype.resumeInternal=function(e,t){var i=this.sResumeAction,n=this.sResumeChangeReason,r=t||i||n;this.sResumeAction=undefined;this.sResumeChangeReason=undefined;if(r){if(this.mParameters.$$clearSelectionOnFilter&&n===c.Filter){this.oHeaderContext?.setSelected(false)}this.removeCachesAndMessages("");if(i==="onChange"){this.onChange();return}if(i==="resetCache"){this.oCache.reset([]);return}this.reset();this.fetchCache(this.oContext,!t);if(this.bRefreshKeptElements){this.bRefreshKeptElements=false;this.refreshKeptElements(this.getGroupId())}}this.getDependentBindings().forEach(function(e){e.resumeInternal(!r,!!n&&!e.oContext.isEffectivelyKeptAlive())});if(this.sChangeReason==="AddVirtualContext"){this._fireChange({detailedReason:"AddVirtualContext",reason:n})}else if(n){this._fireRefresh({reason:n})}else{this.removeReadGroupLock()}this.oHeaderContext.checkUpdate()};E.prototype.setAggregation=function(e){var t;function i(e){return e&&!!e.hierarchyQualifier}this.checkTransient();if(this.isUnchangedParameter("$$aggregation",e)){return}if(this.hasFilterNone()){throw new Error("Cannot combine Filter.NONE with $$aggregation")}if(this.hasPendingChanges()){throw new Error("Cannot set $$aggregation due to pending changes")}if(i(this.mParameters.$$aggregation)!==i(e)&&this.getKeepAlivePredicates().length){throw new Error("Cannot set $$aggregation due to a kept-alive context")}t=Object.assign({},this.mParameters);if(e===undefined){delete t.$$aggregation}else{t.$$aggregation=o.clone(e)}this.applyParameters(t,"")};E.prototype.setContext=function(t){var i;if(this.oContext!==t){if(this.bRelative){this.checkSuspended(true);this.reset(undefined,true);this.resetKeepAlive();this.fetchCache(t);if(t){this.restoreCreated();i=this.oModel.resolve(this.sPath,t);if(this.oHeaderContext&&this.oHeaderContext.getPath()!==i){this.oHeaderContext.doSetSelected(false);this.mPreviousContextsByPath[this.oHeaderContext.getPath()]=this.oHeaderContext;this.oHeaderContext=null}this.oHeaderContext??=e.create(this.oModel,this,i);if(this.mParameters.$$aggregation){n.setPath(this.mParameters.$$aggregation,i)}else if(!o.isEmptyObject(this.mChildPathsReducedToParent)&&this.oModel.bAutoExpandSelect){this.mCanUseCachePromiseByChildPath={};this.sChangeReason="AddVirtualContext"}if(t.getBinding&&t.getBinding().isRootBindingSuspended()){this.oContext=t;this.setResumeChangeReason(c.Context);return}}u.prototype.setContext.call(this,t,{detailedReason:this.sChangeReason})}else{this.oContext=t}}};E.prototype.setResetViaSideEffects=function(e){if(!e){this.bResetViaSideEffects=false}else if(this.bResetViaSideEffects===undefined){this.bResetViaSideEffects=true}};E.prototype.sort=function(e){var t=o.toArray(e);this.checkTransient();if(this.sOperationMode!==v.Server){throw new Error("Operation mode has to be sap.ui.model.odata.OperationMode.Server")}if(o.deepEqual(t,this.aSorters)){return this}if(this.hasPendingChanges(true)){throw new Error("Cannot sort due to pending changes")}this.aSorters=t;this.oQueryOptionsPromise=undefined;this.setResetViaSideEffects(true);if(this.isRootBindingSuspended()){this.setResumeChangeReason(c.Sort);return this}this.createReadGroupLock(this.getGroupId(),true);this.removeCachesAndMessages("");this.fetchCache(this.oContext);this.reset(c.Sort);if(this.oHeaderContext){this.oHeaderContext.checkUpdate()}return this};E.prototype.updateAfterCreate=function(e,i){var n,r,a=this;if(this.iCreatedContexts){if(e){this.reset(c.Change,true)}else{this.reset(undefined,true);r=this.fetchContexts(0,Infinity,0,s.$cached).then(function(){a.iCurrentEnd=a.aContexts.length;return a.requestSideEffects(i,o.getMissingPropertyPaths(a.fetchValue("",null,true).getResult(),a.mAggregatedQueryOptions))}).then(function(){a._fireChange({reason:c.Change})})}n=h.all([r,t.prototype.updateAfterCreate.apply(this,arguments)])}else{n=this.refreshInternal("",i)}return n};E.prototype.updateAnalyticalInfo=function(e){var t={aggregate:{},group:{},search:this.mParameters.$$aggregation&&this.mParameters.$$aggregation.search},i=false,n=this;e.forEach(function(e){var n={};if("total"in e){if("grouped"in e){throw new Error("Both dimension and measure: "+e.name)}if(e.as){n.name=e.name;t.aggregate[e.as]=n}else{t.aggregate[e.name]=n}if(e.min){n.min=true;i=true}if(e.max){n.max=true;i=true}if(e.with){n.with=e.with}}else if(!("grouped"in e)||e.inResult||e.visible){t.group[e.name]=n}});this.bHasAnalyticalInfo=true;this.setAggregation(t);if(i){return{measureRangePromise:Promise.resolve(this.getRootBindingResumePromise().then(function(){return n.oCachePromise}).then(function(e){return e.getMeasureRangePromise()}))}}};E.prototype.validateSelection=function(e,t){if(!this.mParameters.$$clearSelectionOnFilter||o.isDataAggregation(this.mParameters)||this.oHeaderContext.isSelected()){return}const i=this._getAllExistingContexts(true).filter(e=>e.isSelected());if(!i.length){return}const n=this.getResolvedPath().length;const r=i.map(e=>e.getPath().slice(n));e.requestFilteredOrderedPredicates(r,this.lockGroup(t),true).then(e=>{const t=new Set(e);i.forEach(e=>{if(!t.has(e.getPath().slice(n))){e.setSelected(false)}})},e=>{this.oModel.reportError("Failed to validate selection",P,e)})};E.isBelowAggregation=function(e){return!!e?.getBinding?.().getAggregation?.()};E.isBelowCreated=function(e){var t;if(!(e&&e.getBinding)){return false}if(e.isTransient()===false){return true}t=e.getBinding();return t&&t.isRelative()&&E.isBelowCreated(t.getContext())};return E});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/ODataMetaModel", ["./AnnotationHelper","./ValueListType","./lib/_Helper","sap/base/assert","sap/base/Log","sap/base/util/JSTokenizer","sap/base/util/ObjectPath","sap/ui/base/ManagedObject","sap/ui/base/SyncPromise","sap/ui/model/BindingMode","sap/ui/model/ChangeReason","sap/ui/model/ClientListBinding","sap/ui/model/Context","sap/ui/model/ContextBinding","sap/ui/model/MetaModel","sap/ui/model/PropertyBinding","sap/ui/model/odata/OperationMode","sap/ui/model/odata/type/Boolean","sap/ui/model/odata/type/Byte","sap/ui/model/odata/type/Date","sap/ui/model/odata/type/DateTimeOffset","sap/ui/model/odata/type/Decimal","sap/ui/model/odata/type/Double","sap/ui/model/odata/type/Guid","sap/ui/model/odata/type/Int16","sap/ui/model/odata/type/Int32","sap/ui/model/odata/type/Int64","sap/ui/model/odata/type/Raw","sap/ui/model/odata/type/SByte","sap/ui/model/odata/type/Single","sap/ui/model/odata/type/Stream","sap/ui/model/odata/type/String","sap/ui/model/odata/type/TimeOfDay","sap/ui/thirdparty/URI"],function(e,t,n,i,r,o,a,s,u,l,f,c,d,p,h,y,g,m,$,v,M,b,O,C,P,E,A,w,S,U,x,T,j,L){"use strict";var R=s.extend("sap.ui.model.odata.v4._any",{metadata:{properties:{any:"any"}}}),D,I={},V=Object.freeze({$kind:"Property",$Type:"Edm.Int64","@$ui5.$count":true}),k=r.Level.DEBUG,q=Object.freeze({$kind:"Property",$Type:"Edm.Untyped"}),N={$kind:"ComplexType",$OpenType:true,bbox:{$kind:"Property",$Type:"Edm.Double",$isCollection:true},type:{$kind:"Property",$Nullable:false,$Type:"Edm.String"}},B={...N,coordinates:{$kind:"Property",$Nullable:false,$Type:"Edm.Double",$isCollection:true}},_={"Edm.Geography":{...N,$Abstract:true},"Edm.GeographyLineString":B,"Edm.GeographyMultiLineString":B,"Edm.GeographyMultiPoint":B,"Edm.GeographyMultiPolygon":B,"Edm.GeographyPoint":B,"Edm.GeographyPolygon":B},F=["$count","$selectionCount","@$ui5.node.groupLevelCount","@$ui5.node.level"],G,W=/\$\(/g,z=/^-?\d+$/,K="sap.ui.model.odata.v4.ODataMetaModel",H=/\(.*\)$/,Q=new w,J=/\$\)/g,X={messageChange:true},Y={"Edm.Boolean":{Type:m},"Edm.Byte":{Type:$},"Edm.Date":{Type:v},"Edm.DateTimeOffset":{constraints:{$Precision:"precision"},Type:M},"Edm.Decimal":{constraints:{"@Org.OData.Validation.V1.Minimum/$Decimal":"minimum","@Org.OData.Validation.V1.Minimum@Org.OData.Validation.V1.Exclusive":"minimumExclusive","@Org.OData.Validation.V1.Maximum/$Decimal":"maximum","@Org.OData.Validation.V1.Maximum@Org.OData.Validation.V1.Exclusive":"maximumExclusive",$Precision:"precision",$Scale:"scale"},Type:b},"Edm.Double":{Type:O},"Edm.Guid":{Type:C},"Edm.Int16":{Type:P},"Edm.Int32":{Type:E},"Edm.Int64":{Type:A},"Edm.SByte":{Type:S},"Edm.Single":{Type:U},"Edm.Stream":{Type:x},"Edm.String":{constraints:{"@com.sap.vocabularies.Common.v1.IsDigitSequence":"isDigitSequence",$MaxLength:"maxLength"},Type:T},"Edm.TimeOfDay":{constraints:{$Precision:"precision"},Type:j}},Z={},ee="@com.sap.vocabularies.Common.v1.ValueList",te="@com.sap.vocabularies.Common.v1.ValueListMapping",ne="@com.sap.vocabularies.Common.v1.ValueListReferences",ie="@com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers",re="@com.sap.vocabularies.Common.v1.ValueListWithFixedValues",oe=r.Level.WARNING,ae,se=h.extend("sap.ui.model.odata.v4.ODataMetaModel",{constructor:he}),ue,le;function fe(e,t){if(e===t){return""}if(e.startsWith(t)&&e[t.length]==="#"&&!e.includes("@",t.length)){return e.slice(t.length+1)}}function ce(e){var t=fe(e,te);return t!==undefined?t:fe(e,ee)}function de(e,t){return t.some(function(t){return e==="$ReturnType"?t.$ReturnType:t.$Parameter&&t.$Parameter.some(function(t){return t.$Name===e})})}function pe(e){return e.slice(0,e.lastIndexOf(".")+1)}ae=p.extend("sap.ui.model.odata.v4.ODataMetaContextBinding",{constructor:function(e,t,n){i(!n||n.getModel()===e,"oContext must belong to this model");p.call(this,e,t,n)},initialize:function(){var e=this.oModel.createBindingContext(this.sPath,this.oContext);this.bInitial=false;if(e!==this.oElementContext){this.oElementContext=e;this._fireChange()}},setContext:function(e){i(!e||e.getModel()===this.oModel,"oContext must belong to this model");if(e!==this.oContext){this.oContext=e;if(!this.bInitial){this.initialize()}}}});ue=c.extend("sap.ui.model.odata.v4.ODataMetaListBinding",{constructor:function(){c.apply(this,arguments)},_fireFilter:function(){},_fireSort:function(){},checkUpdate:function(e){var t=this.oList.length;this.update();if(e||this.oList.length!==t){this._fireChange({reason:f.Change})}},fetchContexts:function(){var e,t=this.getResolvedPath(),n=this;if(!t){return u.resolve([])}e=t.endsWith("@");if(!e&&!t.endsWith("/")){t+="/"}return this.oModel.fetchObject(t).then(function(i){if(!i){return[]}if(e){t=t.slice(0,-1)}return Object.keys(i).filter(function(t){return t[0]!=="$"&&e!==(t[0]!=="@")}).map(function(e){return new d(n.oModel,t+e)})})},getContexts:function(e,t){this.iCurrentStart=e||0;this.iCurrentLength=Math.min(t||Infinity,this.iLength-this.iCurrentStart);return this.getCurrentContexts()},getCurrentContexts:function(){var e=[],t,n=this.iCurrentStart+this.iCurrentLength;for(t=this.iCurrentStart;t<n;t+=1){e.push(this.oList[this.aIndices[t]])}if(this.oList.dataRequested){e.dataRequested=true}return e},setContexts:function(e){this.oList=e;this.updateIndices();this.applyFilter();this.applySort();this.iLength=this._getLength()},update:function(){var e=[],t=this.fetchContexts(),n=this;if(t.isFulfilled()){e=t.getResult()}else{t.then(function(e){n.setContexts(e);n._fireChange({reason:f.Change})});e.dataRequested=true}this.setContexts(e)}});le=y.extend("sap.ui.model.odata.v4.ODataMetaPropertyBinding",{constructor:function(){y.apply(this,arguments);this.vValue=undefined},checkUpdate:function(e,t){var n,i=this;function r(n){if(e||n!==i.vValue){i.vValue=n;i._fireChange({reason:t||f.Change})}return n}n=this.oModel.fetchObject(this.sPath,this.oContext,this.mParameters).then(r);if(this.mParameters&&this.mParameters.$$valueAsPromise&&n.isPending()){r(n.unwrap())}else if(n.isRejected()){n.unwrap()}},getValue:function(){return this.vValue},setContext:function(e){if(this.oContext!==e){this.oContext=e;if(this.bRelative){this.checkUpdate(false,f.Context)}}},setValue:function(){throw new Error("Unsupported operation: ODataMetaPropertyBinding#setValue")}});function he(e,t,n,i,r,o){h.call(this);this.aAnnotationUris=n&&!Array.isArray(n)?[n]:n;this.sDefaultBindingMode=l.OneTime;this.mETags={};this.sForbiddenSchema=undefined;this.sLanguage=o;this.oLastModified=new Date(0);this.oMetadataPromise=null;this.oMetaModelForAnnotations=null;this.oModel=i;this.mMetadataUrl2Promise={};this.oRequestor=e;this.mSchema2MetadataUrl={};this.mSharedModelByUrl={};this.mSupportedBindingModes={OneTime:true,OneWay:true};this.bSupportReferences=r!==false;this.mUnsupportedFilterOperators={All:true,Any:true,NotAll:true,NotAny:true};this.sUrl=t}se.prototype.$$valueAsPromise=true;se.prototype._addUrlForSchema=function(e,t,n){var i,r=this.mSchema2MetadataUrl[e];if(!r){r=this.mSchema2MetadataUrl[e]={};r[t]=false}else if(!(t in r)){i=Object.keys(r)[0];if(r[i]){this._reportAndThrowError("A schema cannot span more than one document: "+e+" - expected reference URI "+i+" but instead saw "+t,n)}r[t]=false}};se.prototype._changeAnnotations=function(e){if(this.oMetaModelForAnnotations){Object.keys(e).forEach(t=>{if(e[t].$kind==="Schema"){this._doMergeAnnotations({$Annotations:this.oMetaModelForAnnotations._getAnnotationsForSchema(t)},e.$Annotations,true)}})}this.aAnnotationChanges?.forEach(({path:t,value:n})=>{const i=t.indexOf("@");const r=this.getObject(t.slice(0,i)+"@$ui5.target");if(r){e.$Annotations[r]??={};e.$Annotations[r][t.slice(i)]=n}})};se.prototype._copyAnnotations=function(e){if(this.aAnnotationUris){throw new Error("Must not copy annotations when there are local annotation files")}this.oMetaModelForAnnotations=e};se.prototype._doMergeAnnotations=function(e,t,n){let i=false;function r(e,t){for(const r in t){if(n||!(r in e)){e[r]=t[r];i=true}}}for(const n in e.$Annotations){t[n]??={};r(t[n],e.$Annotations[n])}delete e.$Annotations;return i};se.prototype._getAnnotationsForSchema=function(e){const t={};const n=this.fetchEntityContainer().getResult();Object.keys(n.$Annotations).forEach(i=>{if(i.startsWith(e)){t[i]=n.$Annotations[i]}});return t};se.prototype._getOrFetchSchema=function(e,t,n){var i,r,o,a,s=this;function l(i){if(!(t in i)){n(oe,r," does not contain ",t);return}n(k,"Including ",t," from ",r);let o=false;for(const n in i){if(n[0]!=="$"&&pe(n)===t){e[n]=i[n];if(s._doMergeAnnotations(e[n],e.$Annotations)){o=true}}}if(o){s._changeAnnotations(e)}}if(t in e){return e[t]}a=this.mSchema2MetadataUrl[t];if(a){o=Object.keys(a);if(o.length>1){this._reportAndThrowError("A schema cannot span more than one document: "+"schema is referenced by following URLs: "+o.join(", "),t)}r=o[0];a[r]=true;n(k,"Namespace ",t," found in $Include of ",r);i=this.mMetadataUrl2Promise[r];if(!i){n(k,"Reading ",r);i=this.mMetadataUrl2Promise[r]=u.resolve(this.oRequestor.read(r)).then(this.validate.bind(this,r))}i=i.then(l);if(t in e){return e[t]}e[t]=i;return i}};se.prototype._mergeAnnotations=function(e,t){var n=this;this.validate(this.sUrl,e);e.$Annotations={};Object.keys(e).forEach(function(t){if(e[t].$kind==="Schema"){n._addUrlForSchema(t,n.sUrl);n._doMergeAnnotations(e[t],e.$Annotations)}});t.forEach(function(t,i){var r,o;n.validate(n.aAnnotationUris[i],t);for(o in t){if(o[0]!=="$"){if(o in e){n._reportAndThrowError("A schema cannot span more than one document: "+o,n.aAnnotationUris[i])}r=t[o];e[o]=r;if(r.$kind==="Schema"){n._addUrlForSchema(o,n.aAnnotationUris[i]);n._doMergeAnnotations(r,e.$Annotations,true)}}}})};se.prototype._reportAndThrowError=function(e,t){var n=new Error(t+": "+e);this.oModel.reportError(e,K,n);throw n};se.prototype._setForbiddenSchema=function(e){this.sForbiddenSchema=e};se.prototype.attachEvent=function(e,t,n,i){if(!(e in X)){throw new Error("Unsupported event '"+e+"': v4.ODataMetaModel#attachEvent")}return h.prototype.attachEvent.apply(this,arguments)};se.prototype.bindContext=function(e,t){return new ae(this,e,t)};se.prototype.bindList=function(e,t,n,i){return new ue(this,e,t,n,i)};se.prototype.bindProperty=function(e,t,n){return new le(this,e,t,n)};se.prototype.bindTree=function(e,t,n,i,r){throw new Error("Unsupported operation: v4.ODataMetaModel#bindTree")};se.prototype.destroy=function(){this.oMetaModelForAnnotations=undefined;Object.values(this.mSharedModelByUrl).forEach(e=>e.destroy());this.mSharedModelByUrl=undefined;h.prototype.destroy.apply(this)};se.prototype.fetchCanonicalPath=function(e){return this.fetchUpdateData("",e).then(function(t){if(!t.editUrl){throw new Error(e.getPath()+": No canonical path for transient entity")}if(t.propertyPath){throw new Error("Context "+e.getPath()+" does not point to an entity. It should be "+t.entityPath)}return"/"+t.editUrl})};se.prototype.fetchData=function(){return this.fetchEntityContainer().then(function(e){return JSON.parse(JSON.stringify(e))})};se.prototype.fetchEntityContainer=function(e){var t,n=this;if(!this.oMetadataPromise){t=[u.resolve(this.oRequestor.read(this.sUrl,false,e))];if(this.aAnnotationUris){this.aAnnotationUris.forEach(function(i){t.push(u.resolve(n.oRequestor.read(i,true,e)))})}if(!e){t.push(this.oModel._requestAnnotationChanges());this.oMetadataPromise=u.all(t).then(function(e){var t=Object.assign(e[0],_);n.aAnnotationChanges=e.pop();n._mergeAnnotations(t,e.slice(1));return t});this.oMetadataPromise.then(e=>this._changeAnnotations(e),()=>{})}}return this.oMetadataPromise};se.prototype.fetchObject=function(e,t,n){var i=this.resolve(e,t),s=this;if(!i){r.error("Invalid relative path w/o context",e,K);return u.resolve(null)}return this.fetchEntityContainer().then(function(l){var f,c,p,h,y,g,m,$,v,M,b;function O(e,t,n=""){var i,r,o,a,s="";if(t){r=t.indexOf("@@");if(r>0){t=t.slice(0,r)}}else{t=e}if(f){$=a=b.filter(E);if(a.length!==1){return A(oe,"Expected a single overload, but found ",a.length)}if(f!==Z){s=a[0].$Parameter[0].$isCollection?"Collection("+f+")":f}o=M+"("+s+")"+n;if(l.$Annotations[o]){if(t==="@"){b=l.$Annotations[o];i=l.$Annotations[M+n];if(i){b=Object.assign({},i,b)}return false}if(t in l.$Annotations[o]){M=o;b=l;return true}}}M+=n;b=l;return true}function C(e,t){var i,r,u,l=e.indexOf("@",2);if(l>-1){return A(oe,"Unsupported path after ",e.slice(0,l))}e=e.slice(2);u=e.indexOf("(");if(u>0){if(!e.endsWith(")")){return A(oe,"Expected ')' instead of '",e.slice(-1),"'")}try{r=o.parseJS("["+e.slice(u+1,-1).replace(W,"{").replace(J,"}")+"]")}catch(e){return A(oe,e.message,": ",e.text.slice(1,e.at),"<--",e.text.slice(e.at,-1))}e=e.slice(0,u)}i=e[0]==="."?a.get(e.slice(1),n.scope):n&&a.get(e,n.scope)||(e==="requestCurrencyCodes"||e==="requestUnitsOfMeasure"?s[e].bind(s):a.get(e));if(typeof i!=="function"){return A(oe,e," is not a function but: "+i)}try{b=i(b,{$$valueAsPromise:n&&n.$$valueAsPromise,arguments:r,context:new d(s,t),schemaChildName:v,overload:$.length===1?$[0]:undefined})}catch(t){A(oe,"Error calling ",e,": ",t)}return true}function P(e,t){var n;if(e==="$ReturnType"){if(t.$ReturnType){b=t.$ReturnType;return true}}else if(e&&t.$Parameter){n=t.$Parameter.filter(function(t){return t.$Name===e});if(n.length){b=n[0];return true}}return false}function E(e){return!e.$IsBound&&f===Z||e.$IsBound&&f===e.$Parameter[0].$Type}function A(e){var t;if(r.isLoggable(e,K)){t=Array.isArray(h)?h.join("/"):h;r[e===k?"debug":"warning"](Array.prototype.slice.call(arguments,1).join("")+(t?" at /"+t:""),i,K)}if(e===oe){b=undefined}return false}function w(e,t){var n;function r(){h??=M&&t&&M+"/"+t;return A.apply(this,arguments)}f=b&&b.$Type||f;if(s.bSupportReferences&&!(e in l)){if(i.endsWith("@$ui5.target")){b=undefined;return false}n=pe(e);if(n===s.sForbiddenSchema){return r(oe,"Must not access schema '",n,"' from meta model for ",s.sUrl)}b=s._getOrFetchSchema(l,n,r)}if(e in l){M=y=v=e;b=$=l[v];if(!u.isThenable(b)){m=b.$OpenType;return true}}if(u.isThenable(b)&&b.isPending()){return r(k,"Waiting for ",n)}return r(oe,"Unknown qualified name ",e)}function S(e,t,n){var i,r,o;function a(i){b=i;if(b===undefined){A(oe,"Unsupported path before ",e)}else if(t+1<n.length){A(oe,"Unsupported path after ",e)}return false}if(e==="$Annotations"){return A(oe,"Invalid segment: $Annotations")}e=e.replaceAll("%2F","/");if(t&&typeof b==="object"&&e in b){if(e[0]==="$"||z.test(e)){g=false}}else{i=e.indexOf("@@");if(i<0){if(e.endsWith("@sapui.name")){i=e.length-11}else{i=e.indexOf("@")}}if(i>0){if(!S(e.slice(0,i),t,n)){return false}e=e.slice(i);o=true;if(b&&(b.$kind==="EntitySet"||b.$kind==="Singleton")){c=b}}if(typeof b==="string"&&!(o&&(e==="@sapui.name"||e[1]==="@"))&&!(g&&$&&$.$kind==="EnumType")&&!U(b,n.slice(0,t))){return false}if(g){if(e==="$count"){return a(b.$kind==="EntitySet"||b.$isCollection&&(b.$kind==="NavigationProperty"||b.$kind==="Property")?V:undefined)}if(e[0]==="$"&&e!=="$Parameter"&&e!=="$ReturnType"||z.test(e)){g=false}else{r=typeof b==="object";if(o){}else if(e[0]!=="@"&&e.includes(".",1)){return w(e)}else if(r&&"$Type"in b){if(m&&b.$Type==="Edm.Untyped"){y=undefined}else if(!w(b.$Type,"$Type")){return false}}else if(r&&"$Action"in b){if(!w(b.$Action,"$Action")){return false}f=Z}else if(r&&"$Function"in b){if(!w(b.$Function,"$Function")){return false}f=Z}else if(!t){M=y=v??=l.$EntityContainer;b=$??=l[v];if(Array.isArray(b)){if(f){b=b.filter(E)}if(P(e,b[0])){return true}}if(e&&e[0]!=="@"&&!(e in $)){return A(oe,"Unknown child ",e," of ",v)}}if(Array.isArray(b)){if(e==="$Parameter"){return true}if(e.startsWith("@$ui5.overload@")){e=e.slice(14);o=true}if(o){if(e[1]!=="@"&&!O(e)){return false}}else{if(e!==n[t]&&n[t][e.length+1]!=="@"&&de(e,b)){y=e;return O(e,n[t].slice(e.length),"/"+y)}if(f){b=b.filter(E)}if(e==="@$ui5.overload"){return true}if(b.length!==1){return A(oe,"Expected a single overload, but found "+b.length)}if(P(e,b[0])){return true}b=b[0].$ReturnType;M+="/0/$ReturnType";if(b){if(e==="value"&&!(l[b.$Type]&&l[b.$Type].value)){y=undefined;return true}if(!w(b.$Type,"$Type")){return false}}if(!e){return true}}}}}if(!e){return t+1>=n.length||A(oe,"Invalid empty segment")}if(e[0]==="@"){if(e==="@sapui.name"){if(y===undefined&&o&&t&&n[t-1]==="$NavigationPropertyBinding"){y=b}return a(y)}if(e==="@$ui5.target"){return a(M)}if(e[1]==="@"){if(t+1<n.length){return A(oe,"Unsupported path after ",e)}return C(e,[""].concat(n.slice(0,t),n[t].slice(0,i)).join("/"))}}if(g&&e[0]==="@"){f=b&&b.$Type||f;b=l.$Annotations[M]||{};g=false}else if(e==="$"&&t+1<n.length){return A(oe,"Unsupported path after $")}else if(!b||typeof b!=="object"){b=undefined;return!p&&A(k,"Invalid segment: ",e)}}if(e!=="@"&&e!=="$"){if(e[0]==="@"){p=true}y=g||e[0]==="@"?e:undefined;M=g?M+"/"+e:undefined;b=g&&m&&!(e in b)?q:b[e]}return true}function U(e,t){var n;if(h){return A(oe,"Invalid recursion")}h=t;p=false;g=true;b=l;if(e[0]==="/"){c=undefined;e=e.slice(1)}else if(c){if(!e){b=c;c=h=undefined;return true}v=c.$Type;c=$=undefined}n=e.split("/").every(S);h=undefined;return n}if(!U(i)&&u.isThenable(b)){b=b.then(function(){return s.fetchObject(e,t,n)})}return b})};se.prototype.fetchUI5Type=function(e,t){const i=e.slice(e.lastIndexOf("/")+1);if(i[0]==="$"||i[0]==="@"){if(F.includes(i)){G??=new A;return u.resolve(G)}if(i.startsWith("@$ui5.context.is")||i.startsWith("@$ui5.node.is")){D??=new m;return u.resolve(D)}}const o=this.getMetaContext(e);return this.fetchObject(undefined,o).catch(this.oModel.getReporter()).then(a=>{var s=Q,u;if(!a){r.warning("No metadata for path '"+e+"', using "+s.getName(),undefined,K);return s}if(t){if(n.isEmptyObject(t)){t=undefined}else if("parseKeepsEmptyString"in t&&a.$Type!=="Edm.String"){if(Object.keys(t).length===1){t=undefined}else{t=Object.assign({},t);delete t.parseKeepsEmptyString}}}if(!t&&a["$ui5.type"]){return a["$ui5.type"]}if(a.$isCollection&&!z.test(i)){r.warning("Unsupported collection type, using "+s.getName(),e,K)}else{u=Y[a.$Type];if(u){s=new u.Type(t,this.getConstraints(a,o.getPath()))}else{r.warning("Unsupported type '"+a.$Type+"', using "+s.getName(),e,K)}}if(!t){a["$ui5.type"]=s}return s})};se.prototype.fetchUpdateData=function(e,t,i){var r=t.getModel(),o=r.resolve(e,t),a=this;function s(e){var t=new Error(o+": "+e);if(i!==undefined){r.reportError(e,K,t)}throw t}return this.fetchObject(n.getMetaPath(o)).then(function(){return a.fetchEntityContainer()}).then(function(r){var a,l=r[r.$EntityContainer],f,c,d,p,h=false,y,g,m,$=false,v,M=false;function b(e){var t=e.indexOf("(");return t>=0?e.slice(t):""}function O(e){a.push({path:y,prefix:e})}function C(e){var t=e.indexOf("(");return t>=0?e.slice(0,t):e}m=o.slice(1).split("/");p=m.shift();y="/"+p;f=y;d=decodeURIComponent(C(p));c=l[d];if(!c){s("Not an entity set: "+d)}v=r[c.$Type];e="";g="";a=[p];$=p.includes("($uid=");m.forEach(function(t){var i,o;y+="/"+t;if(z.test(t)){O(a.pop());f+="/"+t}else{o=decodeURIComponent(C(t));g=n.buildPath(g,o);i=h?{}:v[o];if(!i){if(o.includes("@")||v.$OpenType){if(o.includes("@$ui5.")&&o!=="@$ui5.context.isSelected"){s("Read-only path must not be updated")}h=true;i={}}else{s("Not a (navigation) property: "+o)}}v=r[i.$Type];if(t.includes("($uid=")){f=y;e="";$=true}else if(!$&&i.$kind==="NavigationProperty"){if(c.$NavigationPropertyBinding&&g in c.$NavigationPropertyBinding){d=c.$NavigationPropertyBinding[g];c=l[d];g="";a=[encodeURIComponent(d)+b(t)];if(!i.$isCollection){O(a.pop())}}else{a.push(t)}f=y;e=""}else{e=n.buildPath(e,t)}}});if($||i){return u.resolve({editUrl:undefined,entityPath:f,propertyPath:e})}return u.all(a.map(function(e,r){if(typeof e==="string"){return e}return t.fetchValue(e.path).then(function(t){var o;if(i!==undefined&&r===a.length-1&&(t===null||t&&n.hasPrivateAnnotation(t,"upsert"))){M=true;return undefined}if(!t){s("No instance to calculate key predicate at "+e.path)}o=n.getPrivateAnnotation(t,"predicate");if(!o){s("No key predicate known at "+e.path)}return e.prefix+o},function(t){s(t.message+" at "+e.path)})})).then(function(t){return{editUrl:M?f.slice(1):t.join("/"),entityPath:f,propertyPath:e}})})};se.prototype.fetchValueListMappings=function(e,t,i,r){var o=this,a=e.getMetaModel();function s(){var e=r[0],n="";if(r.length!==1){throw new Error("Expected a single overload, but found "+r.length)}if(e.$IsBound){n=e.$Parameter[0].$isCollection?"Collection("+e.$Parameter[0].$Type+")":e.$Parameter[0].$Type}return t+"("+n+")"}return a.fetchEntityContainer().then(function(r){var u,l=r.$Annotations,f,c=n.namespace(t),d={},p=o===a,h,y;if(i.$Name){f=s()+"/"+i.$Name;y=t+"/"+i.$Name}h=Object.keys(l).filter(function(t){if(n.namespace(t)===c){if(f?t===f||t===y:o.getObject("/"+t)===i){return true}if(p||y&&n.getMetaPath(t)===y){return false}throw new Error("Unexpected annotation target '"+t+"' with namespace of data service in "+e.sServiceUrl)}return false});if(!h.length){throw new Error("No annotation '"+ee.slice(1)+"' in "+e.sServiceUrl)}if(h.length===1){u=l[h[0]]}else{u=Object.assign({},l[y],l[f])}Object.keys(u).forEach(function(t){var n=ce(t);if(n!==undefined){d[n]=u[t];["CollectionRoot","SearchSupported"].forEach(function(n){if(n in u[t]){throw new Error("Property '"+n+"' is not allowed in annotation '"+t.slice(1)+"' for target '"+h[0]+"' in "+e.sServiceUrl)}})}else if(!p){throw new Error("Unexpected annotation '"+t.slice(1)+"' for target '"+h[0]+"' with namespace of data service in "+e.sServiceUrl)}});return d})};se.prototype.fetchValueListType=function(e){var n=this.getMetaContext(e),i=this;return this.fetchObject(undefined,n).then(function(r){var o,a;if(!r){throw new Error("No metadata for "+e)}o=i.getObject("@",n);if(o[re]){return t.Fixed}for(a in o){if(fe(a,ne)!==undefined||fe(a,te)!==undefined){return t.Standard}if(fe(a,ee)!==undefined){return o[a].SearchSupported===false?t.Fixed:t.Standard}}return t.None})};se.prototype.filterValueListRelevantQualifiers=function(e,t,n,i){return this.requestValue4Annotation(t,n,i).then(function(t){var n={};t.forEach(function(t){if(t in e){n[t]=e[t]}});return n})};se.prototype.getAbsoluteServiceUrl=function(e){var t=new L(this.sUrl).absoluteTo(document.baseURI).pathname().toString();return new L(e).absoluteTo(t).filename("").toString()};se.prototype.getAllPathReductions=function(e,t,i,r){var o=t.split("/").length,a,s={},u=e.split("/"),l=this;function f(e,t,a,u){var c,d,p;function h(n){if(!i){f(e,t,p-1,true)}if(u){t=t.slice();e=e.slice()}t.splice(p,n);e.splice(p,n);if(!i){s[e.join("/")]=true}}for(p=a;p>=o;p-=1){c=z.test(e[p+1])?p+2:p+1;if(c<e.length&&t[p].$Partner===e[c]&&!t[c].$isCollection&&t[c].$Partner===e[p].replace(H,"")){h(c-p+1)}else if(Array.isArray(t[p])&&e[p+1]==="$Parameter"){d=l.getObject(n.getMetaPath(e.slice(0,p+1).join("/")+"/@$ui5.overload"));if(d.length===1&&d[0].$Parameter[0].$Name===e[p+2]){h(3)}}else if(r&&t[p].$isCollection){break}}}a=u.map(function(e,t){return t<o||e[0]==="#"||e[0]==="@"||z.test(e)||e==="$Parameter"?{}:l.getObject(n.getMetaPath(u.slice(0,t+1).join("/")))||{}});s[e]=true;if(!(r&&a[u.length-1].$isCollection)){f(u,a,u.length-2)}return i?u.join("/"):Object.keys(s)};se.prototype.getConstraints=function(e,t){var n,i,r,o=Y[e.$Type];function a(e,t){if(t!==undefined){i??={};i[e]=t}}if(o){r=o.constraints;for(n in r){a(r[n],n[0]==="@"?this.getObject(t+n):e[n])}if(e.$Nullable===false){a("nullable",false)}if(e.$Type==="Edm.DateTimeOffset"){a("V4",true)}}return i};se.prototype.getData=n.createGetMethod("fetchData");se.prototype.getETags=function(){return this.mETags};se.prototype.getLastModified=function(){return this.oLastModified};se.prototype.getMetaContext=function(e){return new d(this,n.getMetaPath(e))};se.prototype.getMetaPath=function(e){return n.getMetaPath(e)};se.prototype.getObject=n.createGetMethod("fetchObject");se.prototype.getOrCreateSharedModel=function(e,t,n,i){e=this.getAbsoluteServiceUrl(e);const r=!!n+e;let o=this.mSharedModelByUrl;if(!t){o??={}}let a=o[r];if(!a){a=new this.oModel.constructor({autoExpandSelect:n,groupId:t?undefined:"$direct",httpHeaders:this.oModel.getHttpHeaders(),metadataUrlParams:this.sLanguage&&{"sap-language":this.sLanguage},operationMode:g.Server,serviceUrl:e,sharedRequests:true});if(t){a.getMetaModel()._copyAnnotations(this.oMetaModelForAnnotations??this)}if(i){a.getMetaModel()._setForbiddenSchema(pe(i))}a.setRetryAfterHandler(e=>this.oModel.getOrCreateRetryAfterPromise(e));o[r]=a}return a};se.prototype.getOriginalProperty=function(){throw new Error("Unsupported operation: v4.ODataMetaModel#getOriginalProperty")};se.prototype.getProperty=se.prototype.getObject;se.prototype.getReducedPath=function(e,t){return this.getAllPathReductions(e,t,true,true)};se.prototype.getUI5Type=n.createGetMethod("fetchUI5Type",true);se.prototype.getUnitOrCurrencyPath=function(e){var t=this.getObject("@",this.getMetaContext(e)),n=t&&(t["@Org.OData.Measures.V1.Unit"]||t["@Org.OData.Measures.V1.ISOCurrency"]);return n&&n.$Path};se.prototype.getValueListType=n.createGetMethod("fetchValueListType",true);se.prototype.isAddressViaNavigationPath=function(){return this.getObject("/@com.sap.vocabularies.Common.v1.AddressViaNavigationPath")};se.prototype.isList=function(){throw new Error("Unsupported operation: v4.ODataMetaModel#isList")};se.prototype.refresh=function(){throw new Error("Unsupported operation: v4.ODataMetaModel#refresh")};se.prototype.requestCodeList=function(e,t,i){var o=this.fetchEntityContainer().getResult(),a=o[o.$EntityContainer],s=this;if(i&&i.context){if(i.context.getModel()!==this||i.context.getPath()!=="/"){throw new Error("Unsupported context: "+i.context)}}if(t!==undefined&&t!==a){throw new Error("Unsupported raw value: "+t)}return this.requestObject("/@com.sap.vocabularies.CodeList.v1."+e).then(function(e){var t,i,o,a,u,l;if(!e){return null}l=s.getAbsoluteServiceUrl(n.setLanguage(e.Url,s.sLanguage));t=e.CollectionPath+"#"+l;a=I[t];if(a){return a}const f=!s.mSharedModelByUrl;o=s.getOrCreateSharedModel(l);i=o.getMetaModel();u="/"+e.CollectionPath+"/";a=i.requestObject(u).then(function(t){var n=u+"@Org.OData.Core.V1.AlternateKeys",a=i.getObject(n),s,l=$(t.$Key),c=u+l+"@com.sap.vocabularies.Common.v1.",d,p,h=u+l+"@com.sap.vocabularies.CodeList.v1.StandardCode/$Path",y,g;function m(t,n){var i=n.getProperty(l),o={Text:n.getProperty(g),UnitSpecificScale:n.getProperty(p)};if(y){o.StandardCode=n.getProperty(y)}if(o.UnitSpecificScale===null){r.error("Ignoring customizing w/o unit-specific scale for code "+i+" from "+e.CollectionPath,e.Url,K)}else{t[i]=o}return t}function $(e){var t;if(e&&e.length===1){t=e[0]}else{throw new Error("Single key expected: "+u)}return typeof t==="string"?t:t[Object.keys(t)[0]]}if(a){if(a.length!==1){throw new Error("Single alternative expected: "+n)}else if(a[0].Key.length!==1){throw new Error("Single key expected: "+n+"/0/Key")}l=a[0].Key[0].Name.$PropertyPath}p=i.getObject(c+"UnitSpecificScale/$Path");g=i.getObject(c+"Text/$Path");d=[l,p,g];y=i.getObject(h);if(y){d.push(y)}s=o.bindList("/"+e.CollectionPath,null,null,null,{$select:d});return s.requestContexts(0,Infinity).then(function(t){if(!t.length){r.error("Customizing empty for ",o.sServiceUrl+e.CollectionPath,K)}return t.reduce(m,{})}).finally(function(){s.destroy();if(f){o.destroy()}})});I[t]=a;return a})};se.prototype.requestCurrencyCodes=function(e,t){return this.requestCodeList("CurrencyCodes",e,t)};se.prototype.requestData=n.createRequestMethod("fetchData");se.prototype.requestObject=n.createRequestMethod("fetchObject");se.prototype.requestUI5Type=n.createRequestMethod("fetchUI5Type");se.prototype.requestUnitsOfMeasure=function(e,t){return this.requestCodeList("UnitsOfMeasure",e,t)};se.prototype.requestValue4Annotation=function(t,i,r){let o;let a;const s=n.getMetaPath(r.getPath());const u=i.indexOf("/",s.length+1);if(u>0){const e=this.getObject(i.slice(0,u));if(!e.$isCollection){a=i.slice(s.length+1,u+1)}else if(e.$Partner){o={$IsBound:true,$Parameter:[{$Name:e.$Partner}]}}}const l=new R({any:e.value(t,{context:this.createBindingContext(i),overload:o,prefix:a}),bindingContexts:r,models:r.getModel()});const f=l.getBinding("any");let c;if(f){if(f.getBindings){c=Promise.all(f.getBindings().map(function(e){return e.requestValue()}))}else{c=f.requestValue()}}else{c=Promise.resolve()}return c.then(function(){return l.getAny()})};se.prototype.requestValueListInfo=function(e,t,i){var r=n.getMetaPath(e),o=r.slice(0,r.lastIndexOf("/")).replace("/$Parameter",""),a=o.slice(o.lastIndexOf("/")+1),s=this;if(!a.includes(".")){a=undefined}return Promise.all([a||this.requestObject(o+"/@sapui.name"),this.requestObject(r),this.requestObject(r+"@"),this.requestObject(r+re),this.requestObject(o+"/@$ui5.overload")]).then(function([o,a,u,l,f]){var c={},d={};function p(i,r,a,u){if("CollectionRoot"in i){u=s.getOrCreateSharedModel(i.CollectionRoot,true,t,o);if(d[r]&&d[r].$model===u){c[r]=undefined}}if(c[r]){throw new Error("Annotations '"+ee.slice(1)+"' with identical qualifier '"+r+"' for property "+e+" in "+c[r]+" and "+a)}c[r]=a;i=n.clone(i);i.$model=u;delete i.CollectionRoot;delete i.SearchSupported;d[r]=i}if(!a){throw new Error("No metadata for "+e)}return Promise.all(Object.keys(u).filter(function(e){return fe(e,ne)!==undefined}).map(function(e){var n=u[e];return Promise.all(n.map(function(e){var n=s.getOrCreateSharedModel(e,true,t,o);return s.fetchValueListMappings(n,o,a,f).then(function(e){return{valueListMappingByQualifier:e,$model:n}})})).then(function(e){n.forEach(function(t,n){var i=e[n].valueListMappingByQualifier;Object.keys(i).forEach(function(r){p(i[r],r,t,e[n].$model)})})})})).then(function(){var t=u[ie];Object.keys(u).filter(function(e){return ce(e)!==undefined}).forEach(function(e){p(u[e],ce(e),s.sUrl,s.oModel)});if(n.isEmptyObject(d)){throw new Error("No annotation '"+ne.slice(1)+"' for "+e)}return t&&i&&i.getBinding?s.filterValueListRelevantQualifiers(d,t,r+ie,i):d}).then(function(t){var n,i;if(l){n=Object.keys(t);if(n.length!==1){throw new Error("Annotation '"+re.slice(1)+"' but not exactly one '"+ee.slice(1)+"' for property "+e)}i=t[n[0]];i.$qualifier=n[0];return{"":i}}return t})})};se.prototype.requestValueListType=n.createRequestMethod("fetchValueListType");se.prototype.resolve=function(e,t){var n,i;if(!e){return t?t.getPath():undefined}i=e[0];if(i==="/"){return e}if(!t){return undefined}if(i==="."){if(e[1]!=="/"){throw new Error("Unsupported relative path: "+e)}e=e.slice(2)}n=t.getPath();return i==="@"||n.endsWith("/")?n+e:n+"/"+e};se.prototype.setLegacySyntax=function(){throw new Error("Unsupported operation: v4.ODataMetaModel#setLegacySyntax")};se.prototype.toString=function(){return K+": "+this.sUrl};se.prototype.validate=function(e,t){var n,i,r,o,a,s;if(!this.bSupportReferences){return t}for(a in t.$Reference){o=t.$Reference[a];a=new L(a).absoluteTo(this.sUrl).toString();if("$IncludeAnnotations"in o){this._reportAndThrowError("Unsupported IncludeAnnotations",e)}for(s in o.$Include){r=o.$Include[s];if(r in t){this._reportAndThrowError("A schema cannot span more than one document: "+r+" - is both included and defined",e)}this._addUrlForSchema(r,a,e)}}i=t.$LastModified?new Date(t.$LastModified):null;this.mETags[e]=t.$ETag?t.$ETag:i;n=t.$Date?new Date(t.$Date):new Date;i??=n;if(this.oLastModified<i){this.oLastModified=i}delete t.$Date;delete t.$ETag;delete t.$LastModified;return t};se.clearCodeListsCache=function(){I={}};Object.keys(_).forEach(e=>{const t=e.replace("Geography","Geometry");_[t]=_[e]});return se});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/ODataModel", ["./ODataContextBinding","./ODataListBinding","./ODataMetaModel","./ODataPropertyBinding","./SubmitMode","./lib/_GroupLock","./lib/_Helper","./lib/_MetadataRequestor","./lib/_Parser","./lib/_Requestor","sap/base/assert","sap/base/Log","sap/base/i18n/Localization","sap/ui/base/SyncPromise","sap/ui/core/Messaging","sap/ui/core/Rendering","sap/ui/core/Supportability","sap/ui/core/cache/CacheManager","sap/ui/core/message/Message","sap/ui/core/message/MessageType","sap/ui/model/BindingMode","sap/ui/model/Context","sap/ui/model/Model","sap/ui/model/odata/OperationMode","sap/ui/thirdparty/URI"],function(e,t,r,i,o,n,s,a,u,p,d,h,c,f,l,g,y,m,v,w,E,b,P,M,R){"use strict";const A=false;var C=["apply","compute","count","expand","filter","format","id","index","levels","orderby","schemaversion","search","select","skip","top"],B="sap.ui.model.odata.v4.ODataModel",q=["$count","$expand","$filter","$levels","$orderby","$search","$select"],O=["$$groupId","$$patchWithoutSideEffects","$$updateGroupId"],I=[undefined,w.Success,w.Information,w.Warning,w.Error],$={dataReceived:true,dataRequested:true,messageChange:true,propertyChange:true,sessionTimeout:true},k={annotationURI:true,autoExpandSelect:true,earlyRequests:true,groupId:true,groupProperties:true,httpHeaders:true,ignoreAnnotationsFromMetadata:true,metadataUrlParams:true,odataVersion:true,operationMode:true,serviceUrl:true,sharedRequests:true,supportReferences:true,synchronizationMode:true,updateGroupId:true,withCredentials:true},D=["$apply","$count","$expand","$filter","$orderby","$search","$select"],T=/^[ -~]+$/,G=P.extend("sap.ui.model.odata.v4.ODataModel",{constructor:x,metadata:{final:A}});function x(e={}){var t,i=c.getLanguageTag().toString(),n,u,d,h,f,g,m=this;P.call(this);if("synchronizationMode"in e&&e.synchronizationMode!=="None"){throw new Error("Synchronization mode must be 'None'")}n=e.odataVersion||"4.0";this.sODataVersion=n;if(n!=="4.0"&&n!=="2.0"){throw new Error("Unsupported value for parameter odataVersion: "+n)}for(u in e){if(!(u in k)){throw new Error("Unsupported parameter: "+u)}}h=e.serviceUrl;if(!h){throw new Error("Missing service root URL")}f=new R(h);if(f.path()[f.path().length-1]!=="/"){throw new Error("Service root URL must end with '/'")}if(e.operationMode&&e.operationMode!==M.Server){throw new Error("Unsupported operation mode: "+e.operationMode)}this.sOperationMode=e.operationMode;g=this.buildQueryOptions(f.query(true),false,true);this.mUriParameters=g;if(y.isStatisticsEnabled()){g=Object.assign({"sap-statistics":true},g)}this.sServiceUrl=f.query("").toString();this.sGroupId=e.groupId;if(this.sGroupId===undefined){this.sGroupId="$auto"}if(this.sGroupId!=="$auto"&&this.sGroupId!=="$direct"){throw new Error("Group ID must be '$auto' or '$direct'")}s.checkGroupId(e.updateGroupId,false,false,"Invalid update group ID: ");this.sUpdateGroupId=e.updateGroupId||this.getGroupId();this.mGroupProperties={};for(const r in e.groupProperties){s.checkGroupId(r,true);t=e.groupProperties[r];if(typeof t!=="object"||Object.keys(t).length!==1||!(t.submit in o)){throw new Error("Group '"+r+"' has invalid properties: '"+t+"'")}}this.mGroupProperties=s.clone(e.groupProperties)||{};this.mGroupProperties.$auto={submit:o.Auto};this.mGroupProperties.$direct={submit:o.Direct};if(e.autoExpandSelect!==undefined&&typeof e.autoExpandSelect!=="boolean"){throw new Error("Value for autoExpandSelect must be true or false")}this.bAutoExpandSelect=e.autoExpandSelect===true;if("sharedRequests"in e&&e.sharedRequests!==true){throw new Error("Value for sharedRequests must be true")}this.bSharedRequests=e.sharedRequests===true;this.bIgnoreETag=false;if("ignoreAnnotationsFromMetadata"in e&&e.ignoreAnnotationsFromMetadata!==true){throw new Error("Value for ignoreAnnotationsFromMetadata must be true")}this.mHeaders={"Accept-Language":i};this.mMetadataHeaders={"Accept-Language":i};d=Object.assign({},g,e.metadataUrlParams);const v=this.getOrCreateRetryAfterPromise.bind(this);this.oMetaModel=new r(a.create(this.mMetadataHeaders,n,e.ignoreAnnotationsFromMetadata,d,e.withCredentials,v),this.sServiceUrl+"$metadata",e.annotationURI,this,e.supportReferences,d["sap-language"]);this.oInterface={fetchEntityContainer:this.oMetaModel.fetchEntityContainer.bind(this.oMetaModel),fetchMetadata:this.oMetaModel.fetchObject.bind(this.oMetaModel),fireDataReceived:this.fireDataReceived.bind(this),fireDataRequested:this.fireDataRequested.bind(this),fireSessionTimeout:function(){m.fireEvent("sessionTimeout")},getGroupProperty:this.getGroupProperty.bind(this),getMessagesByPath:this.getMessagesByPath.bind(this),getOptimisticBatchEnabler:this.getOptimisticBatchEnabler.bind(this),getOrCreateRetryAfterPromise:v,getReporter:this.getReporter.bind(this),isIgnoreETag:function(){return m.bIgnoreETag},onCreateGroup:function(e){if(m.isAutoGroup(e)){m.addPrerenderingTask(m._submitBatch.bind(m,e,true))}},onHttpResponse:function(e){const t=m.fnHttpListener;t?.({responseHeaders:e})},reportError:this.reportError.bind(this),reportStateMessages:this.reportStateMessages.bind(this),reportTransitionMessages:this.reportTransitionMessages.bind(this),updateMessages:function(e,t){l.updateMessages(e,t)}};this.oRequestor=p.create(this.sServiceUrl,this.oInterface,this.mHeaders,g,n,e.withCredentials);this.changeHttpHeaders(e.httpHeaders);this.bEarlyRequests=e.earlyRequests;if(this.bEarlyRequests){this.oMetaModel.fetchEntityContainer(true);this.initializeSecurityToken();this.oRequestor.sendOptimisticBatch()}this.aAllBindings=[];this.oAnnotationChangePromise=null;this.mKeepAliveBindingsByPath={};this.mSupportedBindingModes={OneTime:true,OneWay:true};if(e.sharedRequests){this.sDefaultBindingMode=E.OneWay}else{this.sDefaultBindingMode=E.TwoWay;this.mSupportedBindingModes.TwoWay=true}this.aPrerenderingTasks=null;this.fnHttpListener=null;this.fnOptimisticBatchEnabler=null;this.mPath2DataReceivedError={};this.mPath2DataRequestedCount={};this.fnRetryAfter=null;this.oRetryAfterPromise=null}G.prototype._requestAnnotationChanges=function(){this.oAnnotationChangePromise??=f.resolve();return this.oAnnotationChangePromise};G.prototype._submitBatch=function(e,t){var r=this;return this.oRequestor.submitBatch(e).catch(function(e){r.reportError("$batch failed",B,e);if(!t){throw e}})};G.prototype.addPrerenderingTask=function(e,t){var r,i,o=this;function n(e){clearTimeout(i);while(e.length){e.shift()()}if(o.aPrerenderingTasks===e){o.aPrerenderingTasks=null}}if(!this.aPrerenderingTasks){this.aPrerenderingTasks=[];r=n.bind(null,this.aPrerenderingTasks);g.addPrerenderingTask(r);i=setTimeout(function(){i=setTimeout(r,0)},0)}if(t){this.aPrerenderingTasks.unshift(e)}else{this.aPrerenderingTasks.push(e)}};G.prototype.attachDataReceived=function(e,t){return this.attachEvent("dataReceived",e,t)};G.prototype.attachDataRequested=function(e,t){return this.attachEvent("dataRequested",e,t)};G.prototype.attachEvent=function(e,t,r,i){if(!(e in $)){throw new Error("Unsupported event '"+e+"': v4.ODataModel#attachEvent")}return P.prototype.attachEvent.apply(this,arguments)};G.prototype.attachSessionTimeout=function(e,t){return this.attachEvent("sessionTimeout",e,t)};G.prototype.bindContext=function(t,r,i){return new e(this,t,r,i)};G.prototype.bindingCreated=function(e){this.aAllBindings.push(e)};G.prototype.bindingDestroyed=function(e){var t=this.aAllBindings.indexOf(e);if(t<0){throw new Error("Unknown "+e)}this.aAllBindings.splice(t,1)};G.prototype.bindList=function(e,r,i,o,n){return new t(this,e,r,i,o,n)};G.prototype.bindProperty=function(e,t,r){return new i(this,e,t,r)};G.prototype.bindTree=function(e,t,r,i,o){throw new Error("Unsupported operation: v4.ODataModel#bindTree")};G.prototype.buildQueryOptions=function(e,t,r){var i,o=Object.assign({},e);function n(e,r,i){var o,a,p,d=e[r];if(!t||!i.includes(r)){throw new Error("System query option "+r+" is not supported")}if((r==="$expand"||r==="$select")&&typeof d==="string"){d=u.parseSystemQueryOption(r+"="+d)[r];e[r]=d}if(r==="$expand"){d=e[r]=s.clone(d);for(p in d){a=d[p];if(a===null||typeof a!=="object"){a=d[p]={}}for(o in a){n(a,o,q)}}}else if(r==="$count"){if(typeof d==="boolean"){if(!d){delete e.$count}}else{switch(typeof d==="string"&&d.toLowerCase()){case"false":delete e.$count;break;case"true":e.$count=true;break;default:throw new Error("Invalid value for $count: "+d)}}}}if(e){for(i in e){if(C.includes(i.toLowerCase())){h.warning("[FUTURE FATAL] Custom query option "+i+" will not be supported with OData 4.01, see"+" https://sdk.openui5.org/topic/cda632b01c1e4a988ccecab759d19380",undefined,B)}if(i.startsWith("$$")){delete o[i]}else if(i[0]==="@"){throw new Error("Parameter "+i+" is not supported")}else if(i[0]==="$"){n(o,i,D)}else if(!r&&i.startsWith("sap-")&&!i.startsWith("sap-valid-")){throw new Error("Custom query option "+i+" is not supported")}}}return o};G.prototype.changeHttpHeaders=function(e){var t,r,i={},o,n;this.oRequestor.checkHeaderNames(e);for(n in e){r=n.toLowerCase();o=e[n];if(i[r]){throw new Error("Duplicate header "+n)}else if(!(typeof o==="string"&&T.test(o)||o===undefined)){throw new Error("Unsupported value for header '"+n+"': "+o)}else{if(r==="x-csrf-token"){n="X-CSRF-Token"}i[r]={key:n,value:o}}}this.oRequestor.checkForOpenRequests();for(n in this.mHeaders){r=n.toLowerCase();t=i[r];if(t){delete this.mHeaders[n];delete this.mMetadataHeaders[n];if(t.value!==undefined){this.mHeaders[t.key]=t.value;this.mMetadataHeaders[t.key]=t.value}delete i[r]}}for(n in i){t=i[n];if(t.value!==undefined){this.mHeaders[t.key]=t.value;if(n!=="x-csrf-token"){this.mMetadataHeaders[t.key]=t.value}}}};G.prototype.checkBatchGroupId=function(e){s.checkGroupId(e);if(this.isDirectGroup(e)){throw new Error("Group ID does not use batch requests: "+e)}};G.prototype.clearSessionContext=function(){this.oRequestor.clearSessionContext()};G.prototype.createBindingContext=function(e,t){var r,i,o,n;function s(e){var t=e.indexOf("."),r=e.indexOf("/");return t>0&&(r<0||t<r)}if(arguments.length>2){throw new Error("Only the parameters sPath and oContext are supported")}if(t&&t.getBinding){throw new Error("Unsupported type: oContext must be of type sap.ui.model.Context, "+"but was sap.ui.model.odata.v4.Context")}o=this.resolve(e,t);if(o===undefined){throw new Error("Cannot create binding context from relative path '"+e+"' without context")}n=o.indexOf("#");if(n>=0){r=o.slice(0,n);let e=o.slice(n+1);if(e[0]==="#"){e=e.slice(1)}else if(r.length>1&&e[0]!=="@"&&s(e)){return new b(this,o)}if(e[0]==="/"){e="."+e}i=this.oMetaModel.getMetaContext(r);return this.oMetaModel.createBindingContext(e,i)}return new b(this,o)};G.prototype.createUI5Message=function(e,t,r,i=e){var o=typeof e.target==="string",n=e.longtextUrl,a,u=this;function p(e){return u.normalizeMessageTarget(e[0]==="/"?e:s.buildPath("/"+t,r,e))}if(o){t&&=t.split("?")[0];a=[p(e.target)];if(e.additionalTargets){e.additionalTargets.forEach(function(e){a.push(p(e))})}}if(n&&t){n=s.makeAbsolute(n,this.sServiceUrl+t)}return new v({code:e.code,descriptionUrl:n||undefined,message:e.message,persistent:!o||e.transition,processor:this,target:o?a:"",technical:e.technical,technicalDetails:s.createTechnicalDetails(i),type:I[e.numericSeverity]||w.None})};G.prototype.delete=function(e,t,r){var i,o,n=this;if(typeof e==="string"){if(e[0]!=="/"){throw new Error("Invalid path: "+e)}i=true;o=Promise.resolve([e,"*"])}else{o=Promise.all([e.fetchCanonicalPath(),e.fetchValue("@odata.etag",null,true)])}s.checkGroupId(t,false,true);t??=this.getUpdateGroupId();if(this.isApiGroup(t)){throw new Error("Illegal update group ID: "+t)}return o.then(function(o){return n.oRequestor.request("DELETE",o[0].slice(1)+s.buildQuery(n.mUriParameters),n.lockGroup(t,n,true,true),{"If-Match":o[1]}).catch(function(e){if(r||!(e.status===404||i&&e.status===412)){n.reportError("Failed to delete "+o[0],B,e);throw e}}).then(function(){if(i){n.aAllBindings.forEach(function(t){t.onDelete(e)})}})})};G.prototype.destroy=function(){this.oMetaModel.destroy();this.oRequestor.destroy();this.mHeaders=undefined;this.mMetadataHeaders=undefined;this.oRetryAfterPromise=undefined;return P.prototype.destroy.apply(this,arguments)};G.prototype.destroyBindingContext=function(){throw new Error("Unsupported operation: v4.ODataModel#destroyBindingContext")};G.prototype.detachDataReceived=function(e,t){return this.detachEvent("dataReceived",e,t)};G.prototype.detachDataRequested=function(e,t){return this.detachEvent("dataRequested",e,t)};G.prototype.detachSessionTimeout=function(e,t){return this.detachEvent("sessionTimeout",e,t)};G.prototype.fetchKeyPredicate=function(e,t){var r={};return this.oRequestor.fetchType(r,e).then(function(){return s.getKeyPredicate(t,e,r)})};G.prototype.filterMatchingMessages=function(e,t){return s.hasPathPrefix(e,t)?this.mMessages[e]:[]};G.prototype.fireDataReceived=function(e,t){if(!(t in this.mPath2DataRequestedCount)){throw new Error("Received more data than requested")}this.mPath2DataRequestedCount[t]-=1;this.mPath2DataReceivedError[t]??=e;if(this.mPath2DataRequestedCount[t]===0){this.fireEvent("dataReceived",this.mPath2DataReceivedError[t]?{error:this.mPath2DataReceivedError[t],path:t}:{data:{},path:t});delete this.mPath2DataReceivedError[t];delete this.mPath2DataRequestedCount[t]}};G.prototype.fireDataRequested=function(e){if(e in this.mPath2DataRequestedCount){this.mPath2DataRequestedCount[e]+=1}else{this.mPath2DataRequestedCount[e]=1;this.fireEvent("dataRequested",{path:e})}};G.prototype.getAllBindings=function(){return this.aAllBindings.slice()};G.prototype.getContext=function(){throw new Error("Unsupported operation: v4.ODataModel#getContext")};G.prototype.getDependentBindings=function(e){return this.aAllBindings.filter(function(t){var r=t.getContext();return t.isRelative()&&(r===e||r&&r.getBinding&&r.getBinding()===e)})};G.prototype.getGroupId=function(){return this.sGroupId};G.prototype.getGroupProperty=function(e,t){switch(t){case"submit":if(e.startsWith("$auto.")){return o.Auto}if(e==="$single"){return"Single"}return this.mGroupProperties[e]?this.mGroupProperties[e].submit:o.API;default:throw new Error("Unsupported group property: '"+t+"'")}};G.prototype.getHttpHeaders=function(e){var t=Object.assign({},this.mHeaders);if(!e){delete t["SAP-ContextId"]}if(t["X-CSRF-Token"]===null){delete t["X-CSRF-Token"]}return t};G.prototype.getKeepAliveContext=function(e,t,r={}){var i,o,n;if(!this.bAutoExpandSelect){throw new Error("Missing parameter autoExpandSelect")}if(e[0]!=="/"){throw new Error("Not a list context path to an entity: "+e)}Object.keys(r).forEach(function(e){if(e.startsWith("sap-")&&!e.startsWith("sap-valid-")||e[0]==="$"&&!O.includes(e)){throw new Error("Invalid parameter: "+e)}});n=e.slice(0,s.getPredicateIndex(e));i=this.mKeepAliveBindingsByPath[n];if(!i){o=this.aAllBindings.filter(function(e){if(e.mParameters&&e.mParameters.$$getKeepAliveContext){e.removeCachesAndMessages(n.slice(1),true)}return e.isKeepAliveBindingFor&&e.isKeepAliveBindingFor(n)});if(o.length>1){throw new Error("Multiple bindings with $$getKeepAliveContext for: "+e)}i=o[0];if(!i){i=this.bindList(n,undefined,undefined,undefined,r);this.mKeepAliveBindingsByPath[n]=i}}return i.getKeepAliveContext(e,t,r.$$groupId)};G.prototype.getKeyPredicate=s.createGetMethod("fetchKeyPredicate",true);G.prototype.getMessages=function(e){return this.getMessagesByPath(e.getPath(),true).sort(v.compare)};G.prototype.getMetaModel=function(){return this.oMetaModel};G.prototype.getObject=function(){throw new Error("Unsupported operation: v4.ODataModel#getObject")};G.prototype.getODataVersion=function(){return this.sODataVersion};G.prototype.getOptimisticBatchEnabler=function(){return this.fnOptimisticBatchEnabler};G.prototype.getOrCreateRetryAfterPromise=function(e){if(!this.oRetryAfterPromise&&this.fnRetryAfter&&e){this.oRetryAfterPromise=this.fnRetryAfter(e);this.oRetryAfterPromise.finally(()=>{this.oRetryAfterPromise=null}).catch(()=>{});this.oRetryAfterPromise.catch(t=>{if(t===e){this.reportError(t.message,B,t)}else{t.$reported=true}})}return this.oRetryAfterPromise};G.prototype.getOriginalProperty=function(){throw new Error("Unsupported operation: v4.ODataModel#getOriginalProperty")};G.prototype.getProperty=function(){throw new Error("Unsupported operation: v4.ODataModel#getProperty")};G.prototype.getReporter=function(){var e=this;return function(t){if(!t.$reported){e.reportError(t.message,B,t)}}};G.prototype.getServiceUrl=function(){return this.sServiceUrl};G.prototype.getUpdateGroupId=function(){return this.sUpdateGroupId};G.prototype.hasPendingChanges=function(e){if(e!==undefined){this.checkBatchGroupId(e);if(this.isAutoGroup(e)&&this.oRequestor.hasPendingChanges("$parked."+e)){return true}}return this.oRequestor.hasPendingChanges(e)};G.prototype.initializeSecurityToken=function(){this.oRequestor.refreshSecurityToken()};G.prototype.isApiGroup=function(e){return this.getGroupProperty(e,"submit")===o.API};G.prototype.isAutoGroup=function(e){return this.getGroupProperty(e,"submit")===o.Auto};G.prototype.isDirectGroup=function(e){return this.getGroupProperty(e,"submit")===o.Direct};G.prototype.isList=function(){throw new Error("Unsupported operation: v4.ODataModel#isList")};G.prototype.lock=function(e){var t;if(!this.isAutoGroup(e)){throw new Error("Group ID does not use automatic batch requests: "+e)}t=this.lockGroup(e,this,true);return{isLocked:function(){return t.isLocked()},unlock:function(){t.unlock()}}};G.prototype.lockGroup=function(e,t,r,i,o){return this.oRequestor.lockGroup(e,t,r,i,o)};G.prototype.normalizeMessageTarget=function(e){var t,r,i="",o=this;if(e.includes("$uid=")){return e}t=e.split("/").map(function(e){var t,n=e.indexOf("("),a,p,d;function h(e){if(e in p){return encodeURIComponent(decodeURIComponent(p[e]))}r=true}if(n<0){i=s.buildPath(i,e);return e}t=e.slice(0,n);i=s.buildPath(i,t);p=u.parseKeyPredicate(e.slice(n));if(""in p){return t+"("+h("")+")"}d=o.oMetaModel.getObject("/"+i+"/");if(!(d&&d.$Key)){r=true;return e}a=d.$Key.map(function(e){var t=h(e);return d.$Key.length>1?e+"="+t:t});return t+"("+a.join(",")+")"}).join("/");return r?e:t};G.prototype.refresh=function(e){if(typeof e==="boolean"){throw new Error("Unsupported parameter bForceUpdate")}s.checkGroupId(e);this.getBindings().forEach(function(t){if(t.isRoot()){t.refresh(t.isSuspended()?undefined:e)}})};G.prototype.releaseKeepAliveBinding=function(e){var t=this.mKeepAliveBindingsByPath[e];if(t){delete this.mKeepAliveBindingsByPath[e];return t}};G.prototype.reportError=function(e,t,r){var i;if(r.canceled==="noDebugLog"){return}i=r.stack.includes(r.message)?r.stack:r.message+"\n"+r.stack;if(r.canceled){h.debug(e,i,t);return}h.error(e,i,t);if(r.$reported){return}r.$reported=true;this.reportTransitionMessages(s.extractMessages(r),r.resourcePath)};G.prototype.reportStateMessages=function(e,t,r){var i="/"+e,o=[],n=[],a=this;Object.keys(t).forEach(function(r){t[r].forEach(function(t){o.push(a.createUI5Message(t,e,r))})});(r||[""]).forEach(function(e){var t=s.buildPath(i,e);Object.keys(a.mMessages).forEach(function(e){if(e===t||e.startsWith(t+"/")||e.startsWith(t+"(")){n=n.concat(a.mMessages[e].filter(function(e){return!e.persistent}))}})});if(o.length||n.length){l.updateMessages(n,o)}};G.prototype.reportTransitionMessages=function(e,t,r,i){var o,n;if(!e.length){return}if(t){const e=this.getMetaModel();o="/"+t.split("?")[0];const r=s.getMetaPath(o);const i=e.getObject(r);if(Array.isArray(i)){n=e.getObject(r+"/@$ui5.overload/0");o=o.slice(0,o.lastIndexOf("/"))}}const a=e.map(e=>{const r=e;if(n){e=s.clone(e);s.adjustTargets(e,n,undefined,o,i)}e.transition=true;return this.createUI5Message(e,t,undefined,r)});if(!r){l.updateMessages(undefined,a)}return a};G.prototype.requestCanonicalPath=function(e){d(e.getModel()===this,"oEntityContext must belong to this model");return e.requestCanonicalPath()};G.prototype.requestKeyPredicate=s.createRequestMethod("fetchKeyPredicate");G.prototype.requestSideEffects=function(e,t){if(!t.length){return undefined}return f.all(this.aAllBindings.filter(function(e){return e.isRoot()}).map(function(r){return r.requestAbsoluteSideEffects(e,t)}))};G.prototype.resetChanges=function(e){e??=this.sUpdateGroupId;this.checkBatchGroupId(e);if(this.isAutoGroup(e)){this.oRequestor.cancelChanges("$parked."+e);this.oRequestor.cancelChanges("$inactive."+e,true)}this.oRequestor.cancelChanges(e);this.aAllBindings.forEach(function(t){if(e===t.getUpdateGroupId()){t.resetInvalidDataState()}})};G.prototype.resolve=function(e,t){var r;if(e&&e[0]==="/"){r=e}else if(t){r=t.getPath();if(e){if(!r.endsWith("/")){r+="/"}r+=e}}if(r&&r!=="/"&&r[r.length-1]==="/"&&!r.includes("#")){r=r.slice(0,r.length-1)}return r};G.prototype.setAnnotationChangePromise=function(e){if(this.oAnnotationChangePromise){throw Error("Too late")}this.oAnnotationChangePromise=e};G.prototype.setContinueOnError=function(e){this.checkBatchGroupId(e);this.oRequestor.setContinueOnError(e)};G.prototype.setHttpListener=function(e){this.fnHttpListener=e};G.prototype.setIgnoreETag=function(e){this.bIgnoreETag=e};G.prototype.setLegacySyntax=function(){throw new Error("Unsupported operation: v4.ODataModel#setLegacySyntax")};G.prototype.setOptimisticBatchEnabler=function(e){if(!this.bEarlyRequests){throw new Error("The earlyRequests model parameter is not set")}if(this.oRequestor.isBatchSent()){throw new Error("The setter is called after a non-optimistic batch is sent")}if(typeof e!=="function"){throw new Error("The given fnOptimisticBatchEnabler parameter is not a function")}if(this.fnOptimisticBatchEnabler){throw new Error("The setter is called more than once")}this.fnOptimisticBatchEnabler=e};G.prototype.setRetryAfterHandler=function(e){this.fnRetryAfter=e};G.prototype.submitBatch=function(e){var t=this;this.checkBatchGroupId(e);if(this.isAutoGroup(e)){this.oRequestor.relocateAll("$parked."+e,e)}this.oRequestor.addChangeSet(e);return new Promise(function(r){t.addPrerenderingTask(function(){r(t._submitBatch(e))})})};G.prototype.toString=function(){return B+": "+this.sServiceUrl};G.prototype.waitForKeepAliveBinding=function(e){if(e.mParameters?.$$getKeepAliveContext){const t=this.mKeepAliveBindingsByPath[e.getResolvedPath()];if(t){return t.ready()}}return f.resolve()};G.prototype.withUnresolvedBindings=function(e,t){return this.aAllBindings.filter(function(e){return!e.isResolved()}).some(function(r){return r[e](t)})};G.cleanUpOptimisticBatch=function(e){return m.delWithFilters({olderThan:e,prefix:"sap.ui.model.odata.v4.optimisticBatch:"})};(()=>{const e=G.extend;G.extend=function(){h.error("[FUTURE FATAL] sap.ui.model.odata.v4.ODataModel must not be extended");return e.apply(this,arguments)}})();return G});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/ODataParentBinding", ["./Context","./ODataBinding","./lib/_Helper","sap/base/Log","sap/ui/base/SyncPromise","sap/ui/model/ChangeReason"],function(e,t,n,r,i,o){"use strict";function s(){t.call(this);this.mAggregatedQueryOptions={};this.bAggregatedQueryOptionsInitial=true;this.mCanUseCachePromiseByChildPath={};this.aChildCanUseCachePromises=[];this.mChildPathsReducedToParent={};this.iPatchCounter=0;this.bPatchSuccess=true;this.oReadGroupLock=undefined;this.oRefreshPromise=null;this.oResumePromise=undefined}t(s.prototype);var a="sap.ui.model.odata.v4.ODataParentBinding";s.prototype._findEmptyPathParentContext=function(e){if(this.sPath===""&&this.oContext.getBinding){return this.oContext.getBinding()._findEmptyPathParentContext(this.oContext)}return e};s.prototype._resume=function(e){var t=this;function n(){t.bSuspended=false;if(t.oResumePromise){t.resumeInternal(true);t.oResumePromise.$resolve();t.oResumePromise=undefined}}if(this.oOperation){throw new Error("Cannot resume an operation binding: "+this)}if(!this.isRoot()){throw new Error("Cannot resume a relative binding: "+this)}if(!this.bSuspended){throw new Error("Cannot resume a not suspended binding: "+this)}if(e){this.createReadGroupLock(this.getGroupId(),true,1);this.oModel.addPrerenderingTask(n)}else{this.createReadGroupLock(this.getGroupId(),true);n()}};s.prototype.aggregateQueryOptions=function(e,t,r,i){var o=n.clone(r&&this.mLateQueryOptions||this.mAggregatedQueryOptions),s=this;function a(e,t,n,o,h){function u(i){var o=!e.$expand[i],h=n+"/"+i;if(o){e.$expand[i]={};if(r&&s.oModel.getMetaModel().fetchObject(h).getResult().$isCollection){return false}}return a(e.$expand[i],t.$expand[i],h,true,o)}function c(t){if(!e.$select.includes(t)){e.$select.push(t)}return true}return(i||!o||Object.keys(e).every(function(e){return e in t||e==="$count"||e==="$expand"||e==="$select"||e==="$top"}))&&Object.keys(t).every(function(n){switch(n){case"$count":if(t.$top===0&&e.$select){return true}if(t.$count){e.$count=true}return true;case"$expand":e.$expand??={};return Object.keys(t.$expand).every(u);case"$select":e.$select??=[];if(e.$top===0){delete e.$count;delete e.$top}return t.$select.every(c);case"$top":if(t.$top!==0||!t.$count){return false}if(!e.$select){e.$top=0}return true;default:if(h){e[n]=t[n];return true}return t[n]===e[n]}})}if(a(o,e,t)){if(r){this.mLateQueryOptions=o}else{this.mAggregatedQueryOptions=o;if(this.mLateQueryOptions){a(this.mLateQueryOptions,e)}}return true}return false};s.prototype.attachPatchCompleted=function(e,t){return this.attachEvent("patchCompleted",e,t)};s.prototype.attachPatchSent=function(e,t){return this.attachEvent("patchSent",e,t)};s.prototype.changeParameters=function(e){var t=Object.assign({},this.mParameters),r,i=[],s,a=this;function h(n){if(a.oModel.bAutoExpandSelect&&(n==="$expand"||n==="$select")){throw new Error("Cannot change "+n+" parameter in auto-$expand/$select mode: "+JSON.stringify(e[n])+" !== "+JSON.stringify(t[n]))}if(n==="$filter"||n==="$search"){r=o.Filter}else if(n==="$orderby"&&r!==o.Filter){r=o.Sort}else{r??=o.Change}i.push(s)}this.checkTransient();if(!e){throw new Error("Missing map of binding parameters")}for(s in e){if(s.startsWith("$$")){if(this.isUnchangedParameter(s,e[s])){continue}throw new Error("Unsupported parameter: "+s)}if(e[s]===undefined&&t[s]!==undefined){h(s);delete t[s]}else if(t[s]!==e[s]){h(s);if(typeof e[s]==="object"){t[s]=n.clone(e[s])}else{t[s]=e[s]}}}if(r){if(this.hasPendingChanges(true)){throw new Error("Cannot change parameters due to pending changes")}this.applyParameters(t,r,i)}};s.prototype.checkUpdateInternal=function(e){var t=this;function n(){return i.all(t.getDependentBindings().map(function(e){return e.checkUpdateInternal()}))}if(e!==undefined){throw new Error("Unsupported operation: "+a+"#checkUpdateInternal must not"+" be called with parameters")}return this.oCachePromise.then(function(e){if(e&&t.bRelative){return t.fetchResourcePath(t.oContext).then(function(r){if(e.getResourcePath()===r){return n()}return t.refreshInternal("")})}return n()})};s.prototype.createInCache=function(e,t,r,i,o,s,a,h){var u=this;return this.oCachePromise.then(function(c){var d;if(c){d=n.getRelativePath(r,u.getResolvedPath());return c.create(e,t,d,i,o,s,a,h).then(function(e){if(u.mCacheByResourcePath){delete u.mCacheByResourcePath[c.getResourcePath()]}return e})}return u.oContext.getBinding().createInCache(e,t,r,i,o,s,a,h)})};s.prototype.createReadGroupLock=function(e,t,n){var i,o=this;function s(){o.oModel.addPrerenderingTask(function(){if(o.oReadGroupLock===i){n-=1;if(n>0){Promise.resolve().then(s)}else{r.debug("Timeout: unlocked "+i,null,a);o.removeReadGroupLock()}}})}this.removeReadGroupLock();this.oReadGroupLock=i=this.lockGroup(e,t);if(t){n=2+(n||0);s()}};s.prototype.createRefreshPromise=function(e){var t,n;t=new Promise(function(e){n=e});t.$preventBubbling=e;t.$resolve=n;this.oRefreshPromise=t;return t};s.prototype.deleteFromCache=function(e,t,n,r,i){return this.withCache(function(n,o){return n._delete(e,t,o,r,i)},n,true)};s.prototype.destroy=function(){this.mAggregatedQueryOptions=undefined;this.aChildCanUseCachePromises=[];this.mChildPathsReducedToParent={};this.removeReadGroupLock();this.oRefreshPromise=undefined;this.oResumePromise=undefined;this.mCanUseCachePromiseByChildPath=undefined;t.prototype.destroy.call(this)};s.prototype.detachPatchCompleted=function(e,t){return this.detachEvent("patchCompleted",e,t)};s.prototype.detachPatchSent=function(e,t){return this.detachEvent("patchSent",e,t)};s.prototype.doSuspend=function(){};s.prototype.fetchIfChildCanUseCache=function(t,o,s,h){var u=this.getBaseForPathReduction(),c,d,p,f=t.getPath().includes("(...)"),l=t.getIndex(),g=o[0]==="#",P=this.oModel.getMetaModel(),m=this.oContext,y,C=this.oModel.resolve(o,t),v=this;function R(){if(g){return P.fetchObject(c+"/")}return n.fetchPropertyAndType(v.oModel.oInterface.fetchMetadata,$(C))}function $(e){var t;e=n.getMetaPath(e);t=e.indexOf("@");return t>0?e.slice(0,t):e}if(f&&!C.includes("/$Parameter/")||this.isRootBindingSuspended()||n.isDataAggregation(this.mParameters)){return i.resolve(C)}p=this.mCanUseCachePromiseByChildPath[o];if(h&&this.oCache!==null&&p){return p.then(function(e){if(!e){return undefined}if(!o.includes("/")||n.getMetaPath(e)===n.getMetaPath(C)){return C}return P.getReducedPath(C,u)})}d=this.oCachePromise.isRejected()||l!==undefined&&l!==e.VIRTUAL||t.isEffectivelyKeptAlive()||this.oCache===null||this.oCache&&this.oCache.hasSentRequest();c=n.getMetaPath(t.getPath());y=[this.doFetchOrGetQueryOptions(m),R(),s];p=i.all(y).then(function(e){var i=e[2]||{},s,p,l=e[0],y=e[1],R,O;if(Array.isArray(y)){return undefined}O=P.getReducedPath(C,u);R=n.getRelativePath($(O),c);if(R===undefined){v.mChildPathsReducedToParent[o]=true;return m.getBinding().fetchIfChildCanUseCache(m,n.getRelativePath(C,m.getPath()),i,h)}if(y?.["@$ui5.$count"]&&t!==t.getBinding().getHeaderContext?.()&&!l.$expand?.[o.slice(0,-7)]){s={$expand:{[o.slice(0,-7)]:{$count:true,$top:0}}}}else if(f||R==="$count"||R.endsWith("/$count")||R==="$selectionCount"){return O}if(v.bAggregatedQueryOptionsInitial){v.mAggregatedQueryOptions=n.clone(l);v.selectKeyProperties(v.mAggregatedQueryOptions,c);v.bAggregatedQueryOptionsInitial=false}if(g){p={$select:[R.slice(1)]};return v.aggregateQueryOptions(p,c,d,h)?O:undefined}if(R===""||y&&(y.$kind==="Property"||y.$kind==="NavigationProperty")){p=s??n.wrapChildQueryOptions(c,R,i,v.oModel.oInterface.fetchMetadata);if(p){return v.aggregateQueryOptions(p,c,d,h)?O:undefined}return undefined}if(R==="value"){return v.aggregateQueryOptions(i,c,d,h)?O:undefined}r.error("Failed to enhance query options for auto-$expand/$select as the path '"+C+"' does not point to a property",JSON.stringify(y),a);return undefined}).then(function(e){if(v.mLateQueryOptions&&!v.isTransient()){if(v.oCache){v.oCache.setLateQueryOptions(v.mLateQueryOptions)}else if(v.oCache===null){return m.getBinding().fetchIfChildCanUseCache(m,v.sPath,v.mLateQueryOptions).then(function(t){return t&&e})}}return e});if(h&&this.oCache!==null&&!t.getPath().includes("($uid=")){this.mCanUseCachePromiseByChildPath[o]=p}this.aChildCanUseCachePromises.push(p);const O=d?p:i.all([this.oCachePromise,p]).then(function(e){var r=e[0];if(r&&!r.hasSentRequest()&&!v.oOperation){if(v.bSharedRequest){r.setActive(false);r=v.createAndSetCache(v.mAggregatedQueryOptions,r.getResourcePath(),t)}else{r.setQueryOptions(n.merge({},v.oModel.mUriParameters,v.mAggregatedQueryOptions))}}return r});O.catch(function(e){v.oModel.reportError(v+": Failed to enhance query options for "+"auto-$expand/$select for child "+o,a,e)});if(!d){this.oCachePromise=O}return p};s.prototype.fetchResolvedQueryOptions=function(e){var t,r,o,s=this.oModel,a=this.getQueryOptionsFromParameters(),h=this;if(!(s.bAutoExpandSelect&&a.$select)){return i.resolve(a)}t=s.oInterface.fetchMetadata;o=n.getMetaPath(s.resolve(this.sPath,e));r=Object.assign({},n.clone(a),{$select:[]});return i.all(a.$select.map(function(e){var i=o+"/"+e;if(i.endsWith(".*")){i=i.slice(0,-1)}return n.fetchPropertyAndType(t,i).then(function(s){if(!s&&!i.endsWith("/*")){throw new Error("Invalid (navigation) property '"+e+"' in $select of "+h)}const a=n.wrapChildQueryOptions(o,e,{},t);if(a){n.aggregateExpandSelect(r,a)}else{n.addToSelect(r,[e])}})})).then(function(){return r})};s.prototype.firePatchCompleted=function(e){if(this.iPatchCounter===0){throw new Error("Completed more PATCH requests than sent")}this.iPatchCounter-=1;this.bPatchSuccess&&=e;if(this.iPatchCounter===0){this.fireEvent("patchCompleted",{success:this.bPatchSuccess});this.bPatchSuccess=true}};s.prototype.firePatchSent=function(){this.iPatchCounter+=1;if(this.iPatchCounter===1){this.fireEvent("patchSent")}};s.prototype.getBaseForPathReduction=function(){var e,t;if(!this.isRoot()){e=this.oContext.getBinding();t=e.getUpdateGroupId();if(t===this.getUpdateGroupId()||!this.oModel.isApiGroup(t)){return e.getBaseForPathReduction()}}return this.getResolvedPath()};s.prototype.getGeneration=function(){return this.bRelative&&this.oContext?.getGeneration?.()||0};s.prototype.getInheritableQueryOptions=function(){if(this.mLateQueryOptions){return n.merge({},this.mCacheQueryOptions,this.mLateQueryOptions)}return this.mCacheQueryOptions||n.getQueryOptionsForPath(this.oContext.getBinding().getInheritableQueryOptions(),this.sPath)};s.prototype.getQueryOptionsForPath=function(e,t){if(!n.isEmptyObject(this.mParameters)){return n.getQueryOptionsForPath(this.getQueryOptionsFromParameters(),e)}t??=this.oContext;if(!this.bRelative||!t.getQueryOptionsForPath){return{}}return t.getQueryOptionsForPath(n.buildPath(this.sPath,e))};s.prototype.getResumePromise=function(){return this.oResumePromise};s.prototype.hasPendingChangesInDependents=function(e,t){return this.getDependentBindings().some(function(n){var r=n.oCache,i,o=e;if(o){if(n.oContext.isEffectivelyKeptAlive()){return false}if(n.oContext.getIndex()!==undefined){o=false}}if(r!==undefined){if(r&&r.hasPendingChangesForPath("",false,o&&n.mParameters&&n.mParameters.$$ownRequest)){return true}}else if(n.hasPendingChangesForPath("")){return true}if(n.mCacheByResourcePath){i=Object.keys(n.mCacheByResourcePath).some(function(e){var i=n.mCacheByResourcePath[e];return(!t||e.startsWith(t.slice(1)))&&i!==r&&i.hasPendingChangesForPath("")});if(i){return true}}return n.hasPendingChangesInDependents(o,t)})||this.oModel.withUnresolvedBindings("hasPendingChangesInCaches",this.getResolvedPath().slice(1))};s.prototype.isMeta=function(){return false};s.prototype.isPatchWithoutSideEffects=function(){return this.mParameters.$$patchWithoutSideEffects||!this.isRoot()&&this.oContext&&this.oContext.getBinding().isPatchWithoutSideEffects()};s.prototype.isRefreshWithoutBubbling=function(){return this.oRefreshPromise&&this.oRefreshPromise.$preventBubbling};s.prototype.isUnchangedParameter=function(e,t){return this.mParameters[e]===t};s.prototype.onDelete=function(e){var t=this.findContextForCanonicalPath(e);if(t){this.resetChangesForPath(this.getRelativePath(t.getPath()),[]);this.oModel.getDependentBindings(t).forEach(function(e){e.resetChanges()});this.delete(null,e.slice(1),t)}};s.prototype.refreshDependentListBindingsWithoutCache=function(){return i.all(this.getDependentBindings().map(function(e){if(e.filter&&e.oCache===null){return e.refreshInternal("")}if(e.refreshDependentListBindingsWithoutCache){return e.refreshDependentListBindingsWithoutCache()}}))};s.prototype.removeReadGroupLock=function(){if(this.oReadGroupLock){this.oReadGroupLock.unlock(true);this.oReadGroupLock=undefined}};s.prototype.resetChangesInDependents=function(e,t){this.getDependentBindings().forEach(function(n){e.push(n.oCachePromise.then(function(e){if(e){e.resetChangesForPath("")}n.resetInvalidDataState()}).unwrap());if(n.mCacheByResourcePath){Object.keys(n.mCacheByResourcePath).forEach(function(e){if(!t||e.startsWith(t.slice(1))){n.mCacheByResourcePath[e].resetChangesForPath("")}})}n.resetChangesInDependents(e,t)})};s.prototype.resolveRefreshPromise=function(e){if(this.oRefreshPromise){this.oRefreshPromise.$resolve(e.catch(function(e){if(!e.canceled){throw e}}));this.oRefreshPromise=null}return e};s.prototype.resume=function(){this._resume(false)};s.prototype.resumeAsync=function(){this._resume(true);return Promise.resolve(this.oResumePromise)};s.prototype.selectKeyProperties=function(e,t){n.selectKeyProperties(e,this.oModel.getMetaModel().getObject(t+"/"))};s.prototype.suspend=function(){var e;if(this.oOperation){throw new Error("Cannot suspend an operation binding: "+this)}if(!this.isRoot()){throw new Error("Cannot suspend a relative binding: "+this)}if(this.bSuspended){throw new Error("Cannot suspend a suspended binding: "+this)}if(this.hasPendingChanges(true)){throw new Error("Cannot suspend a binding with pending changes: "+this)}this.bSuspended=true;this.oResumePromise=new i(function(t){e=t});this.oResumePromise.$resolve=e;this.removeReadGroupLock();this.doSuspend()};s.prototype.updateAfterCreate=function(e,t){return i.all(this.getDependentBindings().map(function(n){return n.updateAfterCreate(e,t)}))};s.prototype.updateAggregatedQueryOptions=function(e){var t=this.mAggregatedQueryOptions,n=Object.keys(e),r=this;if(t){n=n.concat(Object.keys(t));n.forEach(function(n){if(r.bAggregatedQueryOptionsInitial||n!=="$select"&&n!=="$expand"){if(e[n]===undefined){delete t[n]}else{t[n]=e[n]}}});if(t.$select&&!t.$select.length){t.$select=[Object.keys(t.$expand)[0]]}}};s.prototype.visitSideEffects=function(e,t,r,i,o){var s=r?this.oModel.getDependentBindings(r):this.getDependentBindings();s.forEach(function(r){var s=n.buildPath(o,r.oOperation?"":n.getMetaPath(r.getPath())),a;if(r.oCache){a=n.stripPathPrefix(s,t);if(a.length){i.push(r.requestSideEffects(e,a))}}else{r.visitSideEffects(e,t,null,i,s)}})};function h(e){if(this){s.apply(this,arguments)}else{Object.assign(e,s.prototype)}}["adjustPredicate","destroy","getGeneration","hasPendingChangesForPath","isUnchangedParameter","updateAfterCreate"].forEach(function(e){h.prototype[e]=s.prototype[e]});return h},false);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/ODataPropertyBinding", ["./Context","./ODataBinding","./lib/_Cache","./lib/_Helper","sap/base/Log","sap/ui/base/SyncPromise","sap/ui/model/BindingMode","sap/ui/model/ChangeReason","sap/ui/model/PropertyBinding"],function(e,t,o,n,i,s,r,a,h){"use strict";var d="sap.ui.model.odata.v4.ODataPropertyBinding",u=Object.freeze([]),p={AggregatedDataStateChange:true,change:true,dataReceived:true,dataRequested:true,DataStateChange:true},c="/"+e.VIRTUAL,l=h.extend("sap.ui.model.odata.v4.ODataPropertyBinding",{constructor:f});function f(e,o,i,s){h.call(this,e,o);t.call(this);if(o.endsWith("/")){throw new Error("Invalid path: "+o)}this.mScope=undefined;if(s){if(typeof s.scope==="object"){this.mScope=s.scope;s={...s};delete s.scope}this.checkBindingParameters(s,["$$groupId","$$ignoreMessages","$$noPatch"]);this.sGroupId=s.$$groupId;this.bNoPatch=s.$$noPatch;this.setIgnoreMessages(s.$$ignoreMessages)}else{this.sGroupId=undefined;this.bNoPatch=false}if(this.sPath==="@$ui5.context.isSelected"){this.bNoPatch=true}this.oCheckUpdateCallToken=undefined;this.oContext=i;this.bHasDeclaredType=undefined;this.bInitial=true;this.mQueryOptions=this.oModel.buildQueryOptions(n.clone(s),o.endsWith("$count"));this.vValue=undefined;this.fetchCache(i);e.bindingCreated(this)}t(l.prototype);l.prototype.attachEvent=function(e,t,o,n){if(!(e in p)){throw new Error("Unsupported event '"+e+"': v4.ODataPropertyBinding#attachEvent")}return h.prototype.attachEvent.apply(this,arguments)};l.prototype.checkUpdateInternal=function(e,t,o,h,u){var p=false,l=this.sPath.indexOf("##"),f=l>=0,g=this.oModel.getMetaModel(),y={data:{}},C=this.getResolvedPath(),v={forceUpdate:C&&(e||e===undefined&&this.getDataState().getControlMessages().length>0||this.oCheckUpdateCallToken&&this.oCheckUpdateCallToken.forceUpdate)},P=this.oType,R=this;this.oCheckUpdateCallToken=v;if(!P&&C&&this.sInternalType!=="any"&&!f&&!C.includes(c)){P=g.fetchUI5Type(this.sReducedPath||C)}if(u===undefined){u=this.oCachePromise.then(function(e){var t,n;if(e){return e.fetchValue(R.lockGroup(o||R.getGroupId()),undefined,function(){p=true;R.fireDataRequested(h)},R).then(function(t){R.checkSameCache(e);return t})}if(!R.isResolved()){return undefined}if(C.includes(c)){v.forceUpdate=false}if(!f){return R.oContext.fetchValue(R.sReducedPath,R)}t=R.sPath.slice(0,l);n=R.sPath.slice(l+2);if(n[0]==="/"){n="."+n}return g.fetchObject(n,g.getMetaContext(R.oModel.resolve(t,R.oContext)),R.mScope&&{scope:R.mScope})}).then(function(e){if(!e||typeof e!=="object"){return e}if(R.sInternalType==="any"&&(R.getBindingMode()===r.OneTime||!f&&(R.getBindingMode()===r.OneWay||R.sPath[R.sPath.lastIndexOf("/")+1]==="#"))){if(f){return e}else if(R.bRelative){return n.publicClone(e)}}i.error("Accessed value is not primitive",C,d)},function(e){R.oModel.reportError("Failed to read path "+C,d,e);if(e.canceled){v.forceUpdate=false;return R.vValue}y={error:e}});if(e&&u.isFulfilled()){if(P&&P.isFulfilled&&P.isFulfilled()){this.doSetType(P.getResult())}this.vValue=u.getResult()}u=Promise.resolve(u)}else if(u&&typeof u==="object"){u=n.publicClone(u)}return s.all([u,P]).then(function(e){var o=e[1],n=e[0];if(v===R.oCheckUpdateCallToken){R.oCheckUpdateCallToken=undefined;R.doSetType(o);if(v.forceUpdate||R.vValue!==n){R.bInitial=false;R.vValue=n;R._fireChange({reason:t||a.Change})}R.checkDataState()}if(p){R.fireDataReceived(y,h)}if(y.error){throw y.error}})};l.prototype.destroy=function(){this.oModel.bindingDestroyed(this);this.oCheckUpdateCallToken=undefined;this.mQueryOptions=undefined;this.mScope=undefined;this.vValue=undefined;t.prototype.destroy.call(this);h.prototype.destroy.apply(this,arguments)};l.prototype.doCreateCache=function(e,t){return o.createProperty(this.oModel.oRequestor,e,t)};l.prototype.doFetchOrGetQueryOptions=function(){return this.isRoot()?this.mQueryOptions:undefined};l.prototype.doSetType=function(e){h.prototype.setType.call(this,e,this.sInternalType)};l.prototype.getDependentBindings=function(){return u};l.prototype.getResumePromise=function(){};l.prototype.getValue=function(){return this.vValue};l.prototype.getValueListType=function(){var e=this.getResolvedPath();if(!e){throw new Error(this+" is unresolved")}return this.getModel().getMetaModel().getValueListType(e)};l.prototype.hasPendingChangesInDependents=function(){return false};l.prototype.initialize=function(){if(this.isResolved()){if(this.isRootBindingSuspended()){this.sResumeChangeReason=a.Change}else{this.checkUpdate(true)}}};l.prototype.isMeta=function(){return this.sPath.includes("##")};l.prototype.onChange=function(e,t){this.checkUpdateInternal(t,undefined,undefined,false,e).catch(this.oModel.getReporter())};l.prototype.onDelete=function(){};l.prototype.refreshInternal=function(e,t,o,n){var i=this;if(this.isRootBindingSuspended()){this.refreshSuspended(t);return s.resolve()}return this.oCachePromise.then(function(){if(i.oCache&&i.oCache.reset){i.oCache.reset()}else{i.fetchCache(i.oContext,false,true,t,n)}if(o){return i.checkUpdateInternal(undefined,a.Refresh,t,n)}})};l.prototype.requestValue=function(){var e=this;return Promise.resolve(this.checkUpdateInternal(false).then(function(){return e.getValue()}))};l.prototype.requestValueListInfo=function(e){var t=this.getResolvedPath();if(!t){throw new Error(this+" is unresolved")}return this.getModel().getMetaModel().requestValueListInfo(t,e,this.oContext)};l.prototype.requestValueListType=function(){var e=this.getResolvedPath();if(!e){throw new Error(this+" is unresolved")}return this.getModel().getMetaModel().requestValueListType(e)};l.prototype.resetChangesInDependents=function(){};l.prototype.resetInvalidDataState=function(){if(this.getDataState().isControlDirty()){this._fireChange({reason:a.Change})}};l.prototype.resume=function(){throw new Error("Unsupported operation: resume")};l.prototype.resumeInternal=function(e,t){var o=this.sResumeChangeReason;this.sResumeChangeReason=undefined;this.fetchCache(this.oContext);if(e){this.checkUpdateInternal(t?undefined:false,o).catch(this.oModel.getReporter())}};l.prototype.setContext=function(e){if(this.oContext!==e){if(this.bRelative){this.checkSuspended(true);this.deregisterChangeListener();if(e){if(this.oType&&!this.bHasDeclaredType&&n.getMetaPath(this.oModel.resolve(this.sPath,e))!==n.getMetaPath(this.sReducedPath)){this.doSetType(undefined)}this.sReducedPath=undefined}}this.oContext=e;this.sResumeChangeReason=undefined;if(this.bRelative){this.fetchCache(this.oContext);this.checkUpdateInternal(this.bInitial||undefined,a.Context).catch(this.oModel.getReporter())}}};l.prototype.setType=function(e,t){var o=this.oType;this.bHasDeclaredType=!!e;if(e&&e.getName()==="sap.ui.model.odata.type.DateTimeOffset"){e.setV4()}h.prototype.setType.apply(this,arguments);if(!this.bInitial&&o!==e){this._fireChange({reason:a.Change})}};l.prototype.setValue=function(e,t){var o,i,s=this.getResolvedPath(),r=this;function h(e){r.oModel.reportError("Failed to update path "+s,d,e);return e}this.checkSuspended();if(this.bNoPatch&&t){throw h(new Error("Must not specify a group ID ("+t+") with $$noPatch"))}n.checkGroupId(t);if(typeof e==="function"||e&&typeof e==="object"){throw h(new Error("Not a primitive value"))}if(!this.bNoPatch&&this.vValue===undefined){throw h(new Error("Must not change a property before it has been read"))}if(this.vValue!==e){if(this.oCache){h(new Error("Cannot set value on this binding as it is not relative"+" to a sap.ui.model.odata.v4.Context"));return}o=this.bNoPatch?null:this.lockGroup(t,true,true);i=this.oContext.doSetProperty(this.sPath,e,o);i.catch(function(e){if(o){o.unlock(true)}h(e)});if(!i.isRejected()&&r.oModel.hasListeners("propertyChange")){r.oModel.firePropertyChange({context:r.oContext,path:r.sPath,promise:i.isPending()?i.getResult():undefined,reason:a.Binding,resolvedPath:s,value:e})}}};l.prototype.supportsIgnoreMessages=function(){return true};l.prototype.suspend=function(){throw new Error("Unsupported operation: suspend")};l.prototype.updateAfterCreate=function(){return this.checkUpdateInternal()};l.prototype.visitSideEffects=function(){};return l});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/SubmitMode", function(){"use strict";var t={API:"API",Auto:"Auto",Direct:"Direct"};return t},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/ValueListType", function(){"use strict";var e={None:"None",Fixed:"Fixed",Standard:"Standard"};return e},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/_AnnotationHelperExpression", ["../_AnnotationHelperBasics","sap/base/Log","sap/ui/base/BindingInfo","sap/ui/base/BindingParser","sap/ui/base/SyncPromise","sap/ui/performance/Measurement"],function(e,t,n,r,a,i){"use strict";var s="sap.ui.model.odata.v4.AnnotationHelper",u=[s],o=s+"/getExpression",l=/^{@i18n>[^\\{}:]+}$/,c={And:"&&",Eq:"===",Ge:">=",Gt:">",Le:"<=",Lt:"<",Ne:"!==",Not:"!",Or:"||"},p=false,f={"Edm.Boolean":"boolean","Edm.Byte":"number","Edm.Date":"Date","Edm.DateTimeOffset":"DateTimeOffset","Edm.Decimal":"Decimal","Edm.Double":"number","Edm.Guid":"string","Edm.Int16":"number","Edm.Int32":"number","Edm.Int64":"Decimal","Edm.SByte":"number","Edm.Single":"number","Edm.String":"string","Edm.TimeOfDay":"TimeOfDay"},m={Bool:"Edm.Boolean",Float:"Edm.Double",Date:"Edm.Date",DateTimeOffset:"Edm.DateTimeOffset",Decimal:"Edm.Decimal",Guid:"Edm.Guid",Int:"Edm.Int64",Int32:"Edm.Int32",String:"Edm.String",TimeOfDay:"Edm.TimeOfDay"},d={boolean:false,Date:false,DateTimeOffset:true,Decimal:true,number:false,string:false,TimeOfDay:false},y;function g(e,t){return a.resolve().then(function(){h(e,t)})}function h(t,n){e.error(t,n,s)}y={adjustOperands:function(e,t){if(e.result!=="constant"&&e.category==="number"&&t.result==="constant"&&t.type==="Edm.Int64"){t.category="number"}if(e.result!=="constant"&&e.category==="Decimal"&&t.result==="constant"&&t.type==="Edm.Int32"){t.category="Decimal";t.type=e.type}},apply:function(t,n){var r=e.descend(t,"$Function","string");switch(r.value){case"odata.concat":return y.concat(n);case"odata.fillUriTemplate":return y.fillUriTemplate(n);case"odata.uriEncode":return y.uriEncode(n);default:return g(r,"unknown function: "+r.value)}},collection:function(t){var n;e.expectType(t,"array");n=t.value.map(function(n,r){return y.expression(e.descend(t,r,true),true)});return a.all(n).then(function(t){t=t.map(function(t){return e.resultToString(t,true,false,true)});return{result:"expression",value:"odata.collection(["+t.join(",")+"])"}})},concat:function(t){var n;e.expectType(t,"array");n=t.value.map(function(e,n){return y.parameter(t,n)});return a.all(n).then(function(n){var r,a,i;r=t.asExpression||n.some(function(e){return e.result==="expression"});a=n.filter(function(e){return e.type!=="edm:Null"}).map(function(n){if(r){y.wrapExpression(n)}return e.resultToString(n,r,t.complexBinding)});i=r?{result:"expression",value:a.join("+")}:{result:"composite",value:a.join("")};i.type="Edm.String";return i})},conditional:function(t,n){var r=t.complexBinding,i=r?Object.assign({},t,{complexBinding:false}):t;function s(t,n,r){return e.resultToString(y.wrapExpression(t),true,n,r)}return a.all([y.parameter(i,0,"Edm.Boolean"),y.parameter(t,1),n&&t.value.length===2?{result:"constant",type:"edm:Null",value:undefined}:y.parameter(t,2)]).then(function(e){var n=e[0],a=e[1],i=e[2],u=a.type;if(a.type==="edm:Null"){u=i.type}else if(i.type!=="edm:Null"&&a.type!==i.type){h(t,"Expected same type for second and third parameter, types are '"+a.type+"' and '"+i.type+"'")}return{result:"expression",type:u,value:s(n,false,true)+"?"+s(a,r)+":"+s(i,r)}})},constant:function(e,t){var n=e.value;if(t==="String"){if(l.test(n)){return{ignoreTypeInPath:true,result:"binding",type:"Edm.String",value:n.slice(1,-1)}}}return{result:"constant",type:m[t],value:n}},expression:function(t,n){var r=t.value,i=t,s;if(r===null){s="Null"}else if(typeof r==="boolean"){s="Bool"}else if(typeof r==="number"){s=isFinite(r)&&Math.floor(r)===r?"Int32":"Float"}else if(typeof r==="string"){s="String"}else if(Array.isArray(r)){return y.collection(t)}else{e.expectType(t,"object");if(r.$kind==="Property"){t.value=t.model.getObject(t.path+"@sapui.name");return y.path(t)}["$And","$Apply","$Date","$DateTimeOffset","$Decimal","$Float","$Eq","$Ge","$Gt","$Guid","$If","$Int","$Le","$Lt","$Name","$Ne","$Not","$Null","$Or","$Path","$PropertyPath","$TimeOfDay","$LabeledElement"].forEach(function(n){if(n in r){s=n.slice(1);i=e.descend(t,n)}})}switch(s){case"Apply":return y.apply(t,i);case"If":return y.conditional(i,n);case"Name":case"Path":case"PropertyPath":return y.path(i);case"Date":case"DateTimeOffset":case"Decimal":case"Guid":case"Int":case"String":case"TimeOfDay":e.expectType(i,"string");case"Bool":case"Float":case"Int32":return a.resolve(y.constant(i,s));case"And":case"Eq":case"Ge":case"Gt":case"Le":case"Lt":case"Ne":case"Or":return y.operator(i,s);case"Not":return y.not(i);case"Null":return a.resolve({result:"constant",type:"edm:Null",value:null});default:return g(t,"Unsupported OData expression")}},fetchCurrencyOrUnit:function(t,n,r,a){var i="sap.ui.model.odata.type.Unit",s="@@requestUnitsOfMeasure",u=t.model,o=t.path+"@Org.OData.Measures.V1.Unit/$Path",l=u.getObject(o);function c(n,r,a){return e.resultToString(y.pathResult(t,r,a,n),false,true)}if(!l){i="sap.ui.model.odata.type.Currency";s="@@requestCurrencyCodes";o=t.path+"@Org.OData.Measures.V1.ISOCurrency/$Path";l=u.getObject(o)}if(!l){return undefined}return u.fetchObject(o+"/$").then(function(e){var p=u.getObject(t.path+"@com.sap.vocabularies.UI.v1.DoNotCheckScaleOfMeasuredQuantity")?",constraints:{'skipDecimalsValidation':true}":"";return{result:"composite",type:i,value:(f[r]==="number"?"{formatOptions:{parseAsString:false},":"{")+"mode:'TwoWay',parts:["+c(a,r,n)+","+c(u.getConstraints(e,o),e.$Type,l)+",{mode:'OneTime',path:'/##"+s+"',targetType:'any'}"+"],type:'"+i+"'"+p+"}"}})},fetchDateTimeWithTimezone:function(t,n,r){var a=t.model,i=t.path+"@com.sap.vocabularies.Common.v1.Timezone/$Path",s=a.getObject(i);function u(n,r,a){return e.resultToString(y.pathResult(t,r,a,n),false,true)}if(!s){return undefined}return a.fetchObject(i+"/$").then(function(e){return{result:"composite",type:"sap.ui.model.odata.type.DateTimeWithTimezone",value:"{mode:'TwoWay',parts:["+u(r,"Edm.DateTimeOffset",n)+","+u(a.getConstraints(e,i),e.$Type,s)+"],type:'sap.ui.model.odata.type.DateTimeWithTimezone'}"}})},fillUriTemplate:function(t){var n=[],r,i;t.complexBinding=false;r=[y.parameter(t,0,"Edm.String")];for(i=1;i<t.value.length;i+=1){n[i]=e.descend(t,i,"object");r.push(y.expression(e.descend(n[i],"$LabeledElement",true)))}return a.all(r).then(function(r){var a,s=[],u="";s.push("odata.fillUriTemplate(",e.resultToString(r[0],true,false,true),",{");for(i=1;i<t.value.length;i+=1){a=e.property(n[i],"$Name","string");s.push(u,e.toJSON(a),":",e.resultToString(r[i],true,false,true));u=","}s.push("})");return{result:"expression",type:"Edm.String",value:s.join("")}})},formatOperand:function(t,n){if(t.result==="constant"){switch(t.category){case"boolean":case"number":return String(t.value)}}if(n){y.wrapExpression(t)}return e.resultToString(t,true,false,true)},getExpression:function(a){if(a.value===undefined){return undefined}i.average(o,"",u);if(!p&&n.parse===r.simpleParser){t.warning("Complex binding syntax not active",null,s);p=true}return y.expression(a).then(function(t){return e.resultToString(t,false,a.complexBinding)},function(t){if(t instanceof SyntaxError){return"Unsupported: "+r.complexParser.escape(e.toErrorString(a.value))}throw t}).finally(function(){i.end(o)}).unwrap()},not:function(t){t.asExpression=true;t.complexBinding=false;return y.expression(t).then(function(t){return{result:"expression",type:"Edm.Boolean",value:"!"+e.resultToString(y.wrapExpression(t),true,false,true)}})},operator:function(e,t){var n=t==="And"||t==="Or"?"Edm.Boolean":undefined;e.complexBinding=false;return a.all([y.parameter(e,0,n),y.parameter(e,1,n)]).then(function(n){var r,a=n[0],i=n[1],s="",u,o;if(a.type!=="edm:Null"&&i.type!=="edm:Null"){a.category=f[a.type];i.category=f[i.type];y.adjustOperands(a,i);y.adjustOperands(i,a);if(a.category!==i.category){h(e,"Expected two comparable parameters but instead saw "+a.type+" and "+i.type)}switch(a.category){case"Decimal":s=",'Decimal'";break;case"DateTimeOffset":s=",'DateTime'";break}r=d[a.category]}u=y.formatOperand(a,!r);o=y.formatOperand(i,!r);return{result:"expression",type:"Edm.Boolean",value:r?"odata.compare("+u+","+o+s+")"+c[t]+"0":u+c[t]+o}})},parameter:function(t,n,r){var a=e.descend(t,n,true);return y.expression(a).then(function(e){if(r&&r!==e.type){h(a,"Expected "+r+" but instead saw "+e.type)}return e})},path:function(t){var n=t.ignoreAsPrefix,r=t.model,i,s=t.value;if(n&&s.startsWith(n)){s=s.slice(n.length)}e.expectType(t,"string");i=r.fetchObject(t.path+"/$");if(i.isPending()&&!t.$$valueAsPromise){i.caught();i=a.resolve()}return i.then(function(e){var n,a,i=e&&e.$Type;if(e&&t.complexBinding){a=r.getConstraints(e,t.path);n=i==="Edm.DateTimeOffset"?y.fetchDateTimeWithTimezone(t,s,a):y.fetchCurrencyOrUnit(t,s,i,a)}return n||y.pathResult(t,i,s,a)})},pathResult:function(e,t,n,r){return{constraints:r,formatOptions:t==="Edm.String"?Object.assign({parseKeepsEmptyString:true},e.formatOptions):e.formatOptions,parameters:e.parameters,result:"binding",type:t,value:e.prefix+n}},uriEncode:function(t){return y.parameter(t,0).then(function(t){return{result:"expression",type:"Edm.String",value:t.type==="Edm.String"?"odata.uriEncode("+e.resultToString(t,true,false,true)+","+e.toJSON(t.type)+")":"String("+e.resultToString(t,true,false,true)+")"}})},wrapExpression:function(e){if(e.result==="expression"){e.value="("+e.value+")"}return e}};return y},false);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/lib/_AggregationCache", ["./_AggregationHelper","./_Cache","./_ConcatHelper","./_GroupLock","./_Helper","./_MinMaxHelper","./_TreeState","sap/base/Log","sap/ui/base/SyncPromise","sap/ui/model/odata/ODataUtils"],function(e,t,n,i,o,r,s,a,l,u){"use strict";function d(e,n,i,r,a){t.call(this,e,n,r,true);this.aElements=[];this.aElements.$byPredicate={};this.aElements.$count=undefined;this.aElements.$created=0;this.iResetCount=0;this.bUnifiedCache=i.expandTo>=Number.MAX_SAFE_INTEGER||!!i.createInPlace;this.doReset(i,a);this.addKeptElement=this.oFirstLevel.addKeptElement;this.removeKeptElement=this.oFirstLevel.removeKeptElement;this.requestSideEffects=this.oFirstLevel.requestSideEffects;this.oTreeState=new s(i.$NodeProperty,e=>o.getKeyFilter(e,this.sMetaPath,this.getTypes()))}d.prototype=Object.create(t.prototype);d.prototype.addTransientCollection=null;d.prototype._delete=function(e,n,i,r,s){let a=parseInt(i);if(isNaN(a)){throw new Error(`Unsupported kept-alive entity: ${this.sResourcePath}${i}`)}const u=this.aElements[a];const d=o.getPrivateAnnotation(u,"predicate");if(u["@$ui5.node.isExpanded"]){throw new Error(`Unsupported expanded node: ${this.sResourcePath}${d}`)}const h=o.getPrivateAnnotation(u,"parent");if(u["@$ui5.context.isTransient"]){return h._delete(e,n,o.getPrivateAnnotation(u,"transientPredicate"))}if(this.oCountPromise){this.createCountPromise()}return l.all([this.oRequestor.request("DELETE",n,e,{"If-Match":u}),this.readCount(e)]).then(()=>{this.oTreeState.delete(u);if(this.aElements.$count===undefined){return}a=t.getElementIndex(this.aElements,d,a);const e=h.removeElement(o.getPrivateAnnotation(u,"rank",0),d);const n=o.getPrivateAnnotation(u,"descendants",0);for(let t=0;t<n;t+=1){h.removeElement(e)}const i=n+1;if(h===this.oFirstLevel){this.adjustDescendantCount(u,a,-i)}else if(!h.getValue("$count")){this.makeLeaf(this.aElements[a-1])}this.shiftRank(a,-i);this.removeElement(a,d);s(a,-1)})};d.prototype.addElements=function(t,n,i,r){var s=this.aElements,a=this.oAggregation.$NodeProperty,u=this;function d(t,d){var h=s[n+d],c,f=o.getPrivateAnnotation(t,"predicate"),g=o.getPrivateAnnotation(t,"transientPredicate");if(h){if(h===t){return}e.beforeOverwritePlaceholder(h,t,i,r===undefined?undefined:r+d,a)}else if(n+d>=s.length){throw new Error("Array index out of bounds: "+(n+d))}c=s.$byPredicate[f];if(c&&c!==t&&!(c instanceof l)){if(s.includes(c)){const e=i.fixDuplicatePredicate(t,f);if(e){f=e;c=t}else{throw new Error("Duplicate key predicate: "+f)}}if(!c["@odata.etag"]||t["@odata.etag"]===c["@odata.etag"]){o.updateNonExisting(t,c)}else if(u.hasPendingChangesForPath(f)){throw new Error("Modified on client and on server: "+u.sResourcePath+f)}else{o.copySelected(c,t)}}if(f){s.$byPredicate[f]=t}if(g){s.$byPredicate[g]=t}s[n+d]=t;if(i){o.setPrivateAnnotation(t,"parent",i)}if(g){r-=1}else{o.setPrivateAnnotation(t,"rank",r+d)}}if(n<0){throw new Error("Illegal offset: "+n)}if(Array.isArray(t)){t.forEach(d)}else{d(t,0)}};d.prototype.adjustDescendantCount=function(e,t,n){let i=e["@$ui5.node.level"];let r=false;for(let e=t-1;e>=0&&i>1;e-=1){const s=this.aElements[e];const a=s["@$ui5.node.level"];if(a===0){r=true}else if(a<i){if(!r||this.isAncestorOf(e,t)){const i=o.getPrivateAnnotation(s,"descendants",0)+n;o.setPrivateAnnotation(s,"descendants",i);if(i===0){this.makeLeaf(s)}else if(i===n){o.updateAll(this.mChangeListeners,o.getPrivateAnnotation(s,"predicate"),s,{"@$ui5.node.isExpanded":true})}t=e;r=false}i=a}}};d.prototype.beforeRequestSideEffects=function(e){if(!this.oAggregation.hierarchyQualifier){throw new Error("Missing recursive hierarchy")}delete e.$apply;if(!e.$select.includes(this.oAggregation.$NodeProperty)){e.$select.push(this.oAggregation.$NodeProperty)}};d.prototype.beforeUpdateSelected=function(t,n){e.checkNodeProperty(this.aElements.$byPredicate[t],n,this.oAggregation.$NodeProperty,true)};d.prototype.collapse=function(t,n,i,r){const s=this.getValue(t);const a=e.getCollapsedObject(s);o.updateAll(i?{}:this.mChangeListeners,t,s,a);const l=!!n;this.oTreeState.collapse(s,l,r);const u=this.aElements;const d=u.indexOf(s);let h=this.countDescendants(s,d);if(this.oAggregation.subtotalsAtBottomOnly!==undefined&&Object.keys(a).length>1){h+=1}let c=h;for(let e=d+1;e<d+1+c;e+=1){const t=u[e];if(o.hasPrivateAnnotation(t,"placeholder")){continue}if(l&&t["@$ui5.node.isExpanded"]){c-=this.collapse(o.getPrivateAnnotation(t,"predicate"),n,i,true)}if(!this.isSelectionDifferent(t)){delete u.$byPredicate[o.getPrivateAnnotation(t,"predicate")];delete u.$byPredicate[o.getPrivateAnnotation(t,"transientPredicate")]}}const f=u.splice(d+1,c);const g=s["@$ui5.node.level"];if(!l||!this.bUnifiedCache&&g>=this.oAggregation.expandTo){f.$level=g;f.$rank=o.getPrivateAnnotation(s,"rank");o.setPrivateAnnotation(s,"spliced",f)}u.$count-=c;if(l&&!r){this.validateAndDeleteExpandInfo(n,s)}return h};d.prototype.countDescendants=function(e,t){var n;const i=e["@$ui5.node.level"];const r=this.bUnifiedCache?Infinity:this.oAggregation.expandTo;let s=o.getPrivateAnnotation(e,"descendants");for(n=t+1;n<this.aElements.length;n+=1){const e=this.aElements[n];const t=e["@$ui5.node.level"];const a=t===0&&o.hasPrivateAnnotation(e,"placeholder");if(!a&&t<=i){break}if(t<=r&&o.hasPrivateAnnotation(e,"rank")){if(!s){break}s-=1;if(e["@$ui5.node.isExpanded"]===false){s-=o.getPrivateAnnotation(e,"descendants",0)}}}return n-(t+1)};d.prototype.create=function(e,t,n,i,r,s,a,l){if(s){throw new Error("Unsupported bAtEndOfCreated")}const u=r["@$ui5.node.parent"];delete r["@$ui5.node.parent"];const d=u?.slice(u.indexOf("("));const h=this.aElements;const c=h.$byPredicate[d];if(c?.["@$ui5.node.isExpanded"]===false){throw new Error("Unsupported collapsed parent: "+u)}const f=c?c["@$ui5.node.level"]+1:1;let g=f>this.oAggregation.expandTo&&!this.oAggregation.createInPlace?o.getPrivateAnnotation(c,"cache"):this.oFirstLevel;if(!g){g=this.createGroupLevelCache(c);g.setEmpty();o.setPrivateAnnotation(c,"cache",g)}o.addByPath(this.mPostRequests,i,r);const p=h.indexOf(c)+1;if(this.oCountPromise){const t=l;this.createCountPromise(true);l=()=>{this.readCount(e)?.catch(this.oRequestor.getModelInterface().getReporter());t()}}const P=g.create(e,t,n,i,r,s,a,l,()=>{o.removeByPath(this.mPostRequests,i,r);this.oCountPromise?.$restore();if(this.oAggregation.createInPlace){return}h.$count-=1;delete h.$byPredicate[i];h.splice(p,1)});if(u){o.getPrivateAnnotation(r,"postBody")[this.oAggregation.$ParentNavigationProperty+"@odata.bind"]=o.makeRelativeUrl("/"+u,"/"+this.sResourcePath)}const m=c&&c["@$ui5.node.isExpanded"]===undefined;const v=m&&c?.["@$ui5.node.level"]>=this.oAggregation.expandTo;if(v){this.oTreeState.expand(c)}const $=(e,t)=>{if(m){o.updateAll(this.mChangeListeners,d,c,{"@$ui5.node.isExpanded":true})}r["@$ui5.node.level"]=f;h.splice(e,0,null);this.addElements(r,e,g,t);h.$count+=1};const y=(e,t)=>{g.removeElement(0);o.deletePrivateAnnotation(r,"transientPredicate");delete h.$byPredicate[i];if(t!==undefined){this.adjustDescendantCount(r,e,+1);g.restoreElement(t,r);o.setPrivateAnnotation(r,"rank",t);this.shiftRank(e,+1)}};if(this.oAggregation.createInPlace){return P.then(async()=>{o.removeByPath(this.mPostRequests,i,r);delete r["@$ui5.context.isTransient"];const[t]=await Promise.all([this.requestRank(r,e),this.requestNodeProperty(r,e)]);if(v){o.setPrivateAnnotation(r,"rank",t)}else if(t===undefined){g.removeElement(0)}else{$(t,t);y(t,t)}return r})}$(p,undefined);return P.then(async()=>{o.removeByPath(this.mPostRequests,i,r);h.$byPredicate[o.getPrivateAnnotation(r,"predicate")]=r;r["@$ui5.node.level"]=f;this.oTreeState.setOutOfPlace(r,c);if(g===this.oFirstLevel&&this.oAggregation.expandTo>1){const[t]=await Promise.all([this.requestRank(r,e),this.requestNodeProperty(r,e,true)]);y(p,t)}else{await this.requestNodeProperty(r,e,true)}return r})};d.prototype.createCountPromise=function(e){const t=this.oCountPromise;if(t?.isPending()){return}let n;this.oCountPromise=new l(e=>{n=t=>{delete this.oCountPromise?.$old;e(t)}});this.oCountPromise.$resolve=n;this.oCountPromise.$restore=()=>{n(t)};this.oCountPromise.$old=t;this.oCountPromise.$retryIfFailed=e};d.prototype.createGroupLevelCache=function(n,i){var r=this.oAggregation,s=n?n["@$ui5.node.level"]+1:1,a,l,u,h,c,f,g;if(r.hierarchyQualifier){f=Object.assign({},this.mQueryOptions)}else{a=e.getAllProperties(r);h=s>r.groupLevels.length;u=h?r.groupLevels.concat(Object.keys(r.group).sort()):r.groupLevels.slice(0,s);f=e.filterOrderby(this.mQueryOptions,r,s);g=!h&&Object.keys(r.aggregate).some(function(e){return r.aggregate[e].subtotals})}if(n){c=o.getPrivateAnnotation(n,"filter")||o.getKeyFilter(n,this.sMetaPath,this.getTypes());f.$$filterBeforeAggregate=c+(f.$$filterBeforeAggregate?" and ("+f.$$filterBeforeAggregate+")":"")}if(!i){delete f.$count;f=e.buildApply(r,f,s)}f.$count=true;l=t.create(this.oRequestor,this.sResourcePath,f,true);l.calculateKeyPredicate=r.hierarchyQualifier?d.calculateKeyPredicateRH.bind(null,n,r):d.calculateKeyPredicate.bind(null,n,u,a,h,g);if(c){l.$parentFilter=c}if(!r.hierarchyQualifier){l.fixDuplicatePredicate=d.fixDuplicatePredicate.bind(l)}return l};d.prototype.doReset=function(t,i){this.oAggregation=t;this.sToString=this.getDownloadUrl("");const o=[];if(this.mQueryOptions.$count){if(t.hierarchyQualifier){this.createCountPromise()}else if(t.groupLevels.length){this.setQueryOptions({...this.mQueryOptions,$$leaves:true});this.oCountPromise=new l(function(e){o.push(t=>{e(parseInt(t.UI5__leaves))})})}else{this.oCountPromise=undefined}}else{this.oCountPromise=undefined}this.oGrandTotalPromise=i?new l(n=>{o.push(i=>{e.handleGrandTotal(t,i);n(i)})}):undefined;const r=o.length>0;this.oFirstLevel=this.createGroupLevelCache(null,r);if(r){o.push(function(){});n.enhanceCache(this.oFirstLevel,t,o)}};d.prototype.expand=function(t,n,r,s){var a,u=typeof n==="string"?this.getValue(n):n,d=o.getPrivateAnnotation(u,"spliced"),h=this;if(n!==u){o.updateAll(this.mChangeListeners,n,u,e.getOrCreateExpandedObject(this.oAggregation,u));this.oTreeState.expand(u,r)}if(r>=Number.MAX_SAFE_INTEGER){return l.resolve(this.validateAndDeleteExpandInfo(t,u)).then(()=>-1)}if(d){o.deletePrivateAnnotation(u,"spliced");const e=this.aElements;const t=e.indexOf(u)+1;this.aElements=e.concat(d,e.splice(t));this.aElements.$byPredicate=e.$byPredicate;a=d.length;this.aElements.$count=e.$count+a;o.copySelected(e,this.aElements);const n=u["@$ui5.node.level"]-d.$level;const r=o.getPrivateAnnotation(u,"rank")-d.$rank;d.forEach(function(e){var t=o.getPrivateAnnotation(e,"predicate");if(e["@$ui5.node.level"]){e["@$ui5.node.level"]+=n}if(o.getPrivateAnnotation(e,"parent")===h.oFirstLevel){const t=o.getPrivateAnnotation(e,"rank");if(t!==undefined){o.setPrivateAnnotation(e,"rank",t+r)}}if(!o.hasPrivateAnnotation(e,"placeholder")){if(d.$stale&&!h.isSelectionDifferent(e)){h.turnIntoPlaceholder(e,t)}else{h.aElements.$byPredicate[t]=e;const n=o.getPrivateAnnotation(e,"transientPredicate");if(n){h.aElements.$byPredicate[n]=e}if(o.hasPrivateAnnotation(e,"expanding")){o.deletePrivateAnnotation(e,"expanding");a+=h.expand(i.$cached,e).getResult()}}}});return l.resolve(a)}if(this.bUnifiedCache||r>1||u["@$ui5.node.level"]<this.oAggregation.expandTo){return l.resolve(-1)}let c=o.getPrivateAnnotation(u,"cache");if(!c){c=this.createGroupLevelCache(u);o.setPrivateAnnotation(u,"cache",c)}return c.read(0,this.iReadLength,0,t,s).then(function(t){var i=h.aElements.indexOf(u)+1,r=u["@$ui5.node.level"],s=e.getCollapsedObject(u),l=h.oAggregation.subtotalsAtBottomOnly!==undefined&&Object.keys(s).length>1,d;if(!u["@$ui5.node.isExpanded"]){o.deletePrivateAnnotation(u,"spliced");return 0}if(!i){o.setPrivateAnnotation(u,"expanding",true);return 0}a=t.value.$count;if(o.hasPrivateAnnotation(u,"groupLevelCount")&&o.getPrivateAnnotation(u,"groupLevelCount")!==a){throw new Error("Unexpected structural change: groupLevelCount")}o.setPrivateAnnotation(u,"groupLevelCount",a);o.updateAll(h.mChangeListeners,n,u,{"@$ui5.node.groupLevelCount":a});if(l){a+=1}if(i===h.aElements.length){h.aElements.length+=a}else{for(d=h.aElements.length-1;d>=i;d-=1){h.aElements[d+a]=h.aElements[d];delete h.aElements[d]}}h.addElements(t.value,i,c,0);for(d=i+t.value.length;d<i+t.value.$count;d+=1){h.aElements[d]=e.createPlaceholder(r+1,d-i,c)}if(l){s=Object.assign({},s);e.setAnnotations(s,undefined,true,r,e.getAllProperties(h.oAggregation));o.setPrivateAnnotation(s,"predicate",o.getPrivateAnnotation(u,"predicate").slice(0,-1)+",$isTotal=true)");h.addElements(s,i+a-1)}h.aElements.$count+=a;return a},function(t){o.updateAll(h.mChangeListeners,n,u,e.getCollapsedObject(u));h.oTreeState.collapse(u);throw t})};d.prototype.fetchParentIndex=function(e,t){const n=this.aElements[e]["@$ui5.node.level"];for(let t=e-1;t>=0;t-=1){const i=this.aElements[t]["@$ui5.node.level"];if(i===0){break}if(i===n){e=t}}const i=this.aElements[e];let r=o.getPrivateAnnotation(i,"parentIndexPromise");if(r){return r}const s=o.getKeyFilter(i,this.sMetaPath,this.getTypes());const a=Object.assign({},this.mQueryOptions);a.$apply="ancestors($root"+this.oAggregation.$path+","+this.oAggregation.hierarchyQualifier+","+this.oAggregation.$NodeProperty+",filter("+s+"),1)";const u=this.sResourcePath+this.oRequestor.buildQueryString(null,a);r=this.oRequestor.request("GET",u,t).then(async e=>{const n=e.value[0];const i=this.aElements.$byPredicate[o.getKeyPredicate(n,this.sMetaPath,this.getTypes())];if(i&&o.getPrivateAnnotation(i,"rank")!==undefined){return this.aElements.indexOf(i)}o.setPrivateAnnotation(n,"parent",this.oFirstLevel);const r=[this.oAggregation.$DistanceFromRoot,this.oAggregation.$DrillState,this.oAggregation.$LimitedDescendantCount];const[s]=await Promise.all([this.requestRank(n,t),this.requestProperties(n,r,t,true),this.requestNodeProperty(n,t,false)]);this.oFirstLevel.calculateKeyPredicate(n,this.getTypes(),this.sMetaPath);const a=this.findIndex(s);if(o.hasPrivateAnnotation(this.aElements[a],"placeholder")){this.insertNode(n,s,a)}return a}).finally(()=>{o.deletePrivateAnnotation(i,"parentIndexPromise")});r=l.resolve(r);o.setPrivateAnnotation(i,"parentIndexPromise",r);return r};d.prototype.fetchValue=function(e,t,n,o){var r=this;if(t==="$count"){if(this.oCountPromise){if(this.oAggregation.hierarchyQualifier){this.registerChangeListener("./$count",o)}if(e===i.$cached&&this.oCountPromise.$old){return this.oCountPromise.$old}return this.oCountPromise}if(this.oAggregation.hierarchyQualifier||this.oAggregation.groupLevels.length){a.error("Failed to drill-down into $count, invalid segment: $count",this.toString(),"sap.ui.model.odata.v4.lib._Cache");return l.resolve()}return this.oFirstLevel.fetchValue(e,t,n,o)}return l.resolve(this.aElements.$byPredicate[t.split("/")[0]]).then(function(){r.registerChangeListener(t,o);return r.drillDown(r.aElements,t,e)})};d.prototype.findIndex=function(e,t=this.oFirstLevel){return this.aElements.findIndex(n=>o.getPrivateAnnotation(n,"rank")===e&&o.getPrivateAnnotation(n,"parent")===t)};d.prototype.get1stInPlaceChildIndex=function(e){let t=e+1;while(this.aElements[t]?.["@$ui5.context.isTransient"]!==undefined){t+=1}const n=this.aElements[t];if(!n){return[-1]}const i=n["@$ui5.node.level"];const r=e>=0?this.aElements[e]["@$ui5.node.level"]+1:1;const s=o.hasPrivateAnnotation(n,"placeholder");return i===r||i===0?[t,s,r]:[-1]};d.prototype.getCreatedElements=function(e){return[]};d.prototype.getDownloadQueryOptions=function(t){if(this.oAggregation.hierarchyQualifier){if("$count"in t){t=Object.assign({},t);delete t.$count}}else{t=e.filterOrderby(t,this.oAggregation)}return e.buildApply(this.oAggregation,t,0,true)};d.prototype.getElements=function(e,t,n){if(e){throw new Error("Unsupported path: "+e)}const i=this.aElements.slice(t,n).map(e=>o.hasPrivateAnnotation(e,"placeholder")?undefined:e);i.$count=this.aElements.$count;return i};d.prototype.getInsertIndex=function(e){var t;for(t=0;t<this.aElements.length;t+=1){const n=this.aElements[t];if(o.getPrivateAnnotation(n,"rank")>e&&!this.oTreeState.isOutOfPlace(o.getPrivateAnnotation(n,"predicate"))){return t}}return t};d.prototype.getParentIndex=function(e){const t=this.aElements[e]["@$ui5.node.level"];if(t<=1){return-1}let n=false;for(let i=e;i>=0;i-=1){const o=this.aElements[i];const r=o["@$ui5.node.level"];if(r===0){n=true}else if(r<t){if(r===t-1&&(!n||this.isAncestorOf(i,e))){return i}break}}};d.prototype.getSiblingIndex=function(t,n,i){const r=this.aElements[t];const s=o.getPrivateAnnotation(r,"parent");const a=s!==this.oFirstLevel||this.oAggregation.expandTo===1&&!this.oAggregation.$ExpandLevels;const l=o.getPrivateAnnotation(r,"rank");let u=l+n;if(n<0){if(!a){u=e.findPreviousSiblingIndex(s.aElements,l)}if(u<0){return-1}}else{u+=o.getPrivateAnnotation(r,"descendants",0);if(u>=s.aElements.$count||s.aElements[u]?.["@$ui5.node.level"]<r["@$ui5.node.level"]){return-1}}if(u>=0){const e=this.findIndex(u,s);if(e<0){return-1}const t=this.aElements[e];if(a&&i||!o.hasPrivateAnnotation(t,"placeholder")){if(t["@$ui5.context.isTransient"]!==undefined){return this.getSiblingIndex(e,n,i)}return e}}};d.prototype.getQueryOptions4Single=function(e){if(e!==""){throw new Error("Unsupported path: "+e)}const t=o.clone({...this.mQueryOptions,...this.mLateExpandSelect});const n=t.$select.indexOf(this.oAggregation.$NodeProperty);if(n>=0){t.$select.splice(n,1)}return t};d.prototype.getValue=function(e){var t;t=this.fetchValue(i.$cached,e);if(t.isFulfilled()){return t.getResult()}t.caught()};d.prototype.handleOutOfPlaceNodes=function([e,...t]){if(!e){return}const n=e=>o.getKeyPredicate(e,this.sMetaPath,this.getTypes());const i=e=>parseInt(o.drillDown(e,this.oAggregation.$LimitedRank));const r={};e.value.forEach(e=>{r[n(e)]=e});const s=new Set(this.oTreeState.getOutOfPlacePredicates());t.forEach(e=>{e.value.forEach(e=>{const t=n(e);s.delete(t);if(this.aElements.$byPredicate[t]){return}const a=this.oTreeState.getOutOfPlace(t).parentPredicate;const l=r[a];if(l){const e=o.drillDown(l,this.oAggregation.$DrillState);if(e==="collapsed"){return}}else if(a){return}o.merge(e,r[t]);this.oFirstLevel.calculateKeyPredicate(e,this.getTypes(),this.sMetaPath);const u=i(e);o.deleteProperty(e,this.oAggregation.$LimitedRank);this.insertNode(e,u)})});s.forEach(e=>this.oTreeState.deleteOutOfPlace(e));this.oTreeState.getOutOfPlaceGroupedByParent().forEach(e=>{const t=r[e.parentPredicate];this.moveOutOfPlaceNodes(t&&i(t),e.nodePredicates)})};d.prototype.insertNode=function(e,t,n=t){this.addElements(e,n,this.oFirstLevel,t);this.oFirstLevel.removeElement(t);this.oFirstLevel.restoreElement(t,e)};d.prototype.isAncestorOf=function(e,t){if(t===e){return true}if(t<e||!this.aElements[e]["@$ui5.node.isExpanded"]||this.aElements[e]["@$ui5.node.level"]>=this.aElements[t]["@$ui5.node.level"]){return false}return t<=e+this.countDescendants(this.aElements[e],e)};d.prototype.isDeletingInOtherGroup=function(e){return false};d.prototype.isRefreshNeededAfterCreate=function(e){const t=this.aElements[e];return this.oAggregation.createInPlace&&t["@$ui5.node.isExpanded"]===undefined&&t["@$ui5.node.level"]>=this.oAggregation.expandTo};d.prototype.isSelectionDifferent=function(e){return(e["@$ui5.context.isSelected"]??false)!==(this.aElements["@$ui5.context.isSelected"]??false)};d.prototype.keepOnlyGivenElements=function(t){var n={},i=this;t.forEach(function(e){n[e]=true});return Object.values(this.aElements.$byPredicate).filter(function(t){var r=o.getPrivateAnnotation(t,"predicate");if(!r){return}if(n[r]){e.markSplicedStale(t);n[r]=false;return true}if(!(r in n)){i.turnIntoPlaceholder(t,r)}})};d.prototype.makeLeaf=function(e){o.updateAll(this.mChangeListeners,o.getPrivateAnnotation(e,"predicate"),e,{"@$ui5.node.isExpanded":undefined});delete e["@$ui5.node.isExpanded"];o.deletePrivateAnnotation(e,"descendants")};d.prototype.move=function(e,t,n,r,s,a,u){let d=!this.bUnifiedCache;const h=t.slice(t.indexOf("("));const c=this.aElements.$byPredicate[h];if(!u&&this.oTreeState.isOutOfPlace(h)){this.oTreeState.deleteOutOfPlace(h);delete c["@$ui5.context.isTransient"];d=true}const f=n?.slice(n.indexOf("("));const g=this.aElements.$byPredicate[f];if(this.oTreeState.isOutOfPlace(f)){this.oTreeState.deleteOutOfPlace(f,true);d=true}if(g?.["@$ui5.node.isExpanded"]===false||g?.["@$ui5.node.level"]>=this.oAggregation.expandTo&&!g["@$ui5.node.isExpanded"]){this.oTreeState.expand(g);if(!o.hasPrivateAnnotation(g,"spliced")){d=true}}let p;const P=()=>{if(r!==undefined){d=true;const t=r?.slice(r.indexOf("("));p=this.aElements.$byPredicate[t];let n=null;if(p){this.oTreeState.deleteOutOfPlace(t);const e=this.oAggregation.$fetchMetadata(o.getMetaPath("/"+s+"/"+this.oAggregation.$Actions.ChangeNextSiblingAction+"/NextSibling/")).getResult();const i=Object.keys(e).filter(e=>e[0]!=="$");n=i.reduce((e,t)=>{e[t]=p[t];return e},{})}const i=(u?"$-2":s)+"/"+this.oAggregation.$Actions.ChangeNextSiblingAction;return this.oRequestor.request("POST",i,e.getUnlockedCopy(),{"If-Match":c,Prefer:"return=minimal"},{NextSibling:n})}};let m;if(u){d=true;const n={$select:[]};o.selectKeyProperties(n,this.getTypes()[this.sMetaPath]);const i=t+"/"+this.oAggregation.$Actions.CopyAction+this.oRequestor.buildQueryString(this.sMetaPath,n,false,true);m=this.oRequestor.request("POST",i,e.getUnlockedCopy(),{"If-Match":c},{});t="$-1"}let v=l.all([this.oRequestor.request("PATCH",t,e,{"If-Match":c,Prefer:"return=minimal"},{[this.oAggregation.$ParentNavigationProperty+"@odata.bind"]:n},null,function e(){}),P(),this.requestRank(c,e,d),a&&this.requestRank(p,e,true),m]);if(d){v=v.then(([,,t,n,i])=>()=>{let o;if(u){o=this.requestRank(i,e,true).then(e=>this.findIndex(e))}return[t===undefined?undefined:this.findIndex(t),a&&this.findIndex(n),o]})}else{v=v.then(([e,,t])=>{const n=c["@$ui5.node.isExpanded"]?this.collapse(h):undefined;let r=1;switch(g?g["@$ui5.node.isExpanded"]:true){case false:r=this.expand(i.$cached,f).unwrap()+1;case true:break;default:o.updateAll(this.mChangeListeners,f,g,{"@$ui5.node.isExpanded":true})}const s=this.aElements.indexOf(c);const a=o.getPrivateAnnotation(c,"descendants",0)+1;this.adjustDescendantCount(c,s,-a);this.aElements.splice(s,1);const l=o.getPrivateAnnotation(c,"rank");this.shiftRankForMove(l,a,t);this.oFirstLevel.move(l,t,a);o.updateExisting(this.mChangeListeners,h,c,{"@odata.etag":e["@odata.etag"],"@$ui5.context.isTransient":undefined,"@$ui5.node.level":g?g["@$ui5.node.level"]+1:1});o.deletePrivateAnnotation(c,"rank");const u=this.getInsertIndex(t);this.aElements.splice(u,0,c);this.adjustDescendantCount(c,u,+a);o.setPrivateAnnotation(c,"rank",t);return[r,u,n]})}return{promise:v,refresh:d}};d.prototype.moveOutOfPlaceNodes=function(e,t){const n=e===undefined?-1:this.findIndex(e);t.forEach(e=>{const t=this.aElements.$byPredicate[e];if(t){this.oTreeState.stillOutOfPlace(t,e);const o=t["@$ui5.node.isExpanded"];if(o){this.collapse(e)}const r=this.aElements.indexOf(t);this.aElements.splice(r,1);this.aElements.splice(n+1,0,t);if(o){this.expand(i.$cached,e)}}})};d.prototype.read=function(e,t,n,i,r){var s,a=e,d=t,h,c,f=this.oGrandTotalPromise&&this.oAggregation.grandTotalAtBottomOnly!==true,g=[],p,P=this;function m(e,t){g.push(P.readGap(h,e,t,i.getUnlockedCopy(),r))}if(f&&!e&&t===1){if(n!==0){throw new Error("Unsupported prefetch length: "+n)}i.unlock();return this.oGrandTotalPromise.then(function(e){return{value:[e]}})}if(this.aElements.$count===undefined){this.iReadLength=t+n;if(f){if(a){a-=1}else{d-=1}}g.push(this.readCount(i),this.readFirst(a,d,n,i,r))}else{const r=u._getReadRange(this.aElements,e,t,n,e=>{switch(o.getPrivateAnnotation(e,"placeholder")){case true:return o.getPrivateAnnotation(e,"parent").isMissing(o.getPrivateAnnotation(e,"rank"));case 1:return!(this.aElements.$byPredicate[o.getPrivateAnnotation(e,"predicate")]instanceof l);default:return false}});const a=Math.min(r.start+r.length,this.aElements.length);for(p=r.start;p<a;p+=1){const e=this.aElements[p];s=o.hasPrivateAnnotation(e,"placeholder")?o.getPrivateAnnotation(e,"parent"):undefined;if(s!==h){if(c!==undefined){m(c,p);h=c=undefined}if(s){c=p;h=s}}else if(c!==undefined&&o.getPrivateAnnotation(e,"rank")!==o.getPrivateAnnotation(this.aElements[p-1],"rank")+1){m(c,p);c=p}}if(c!==undefined){m(c,p)}i.unlock()}return l.all(g).then(function(){var n=P.aElements.slice(e,e+t).map(function(e){return o.hasPrivateAnnotation(e,"placeholder")?undefined:e});n.$count=P.aElements.$count;return{"@$ui5.resetCount":P.iResetCount,value:n}})};d.prototype.readCount=function(e){var t,n=this.oCountPromise&&this.oCountPromise.$resolve,i;if(n){delete this.oCountPromise.$resolve;t=Object.assign({},this.mQueryOptions);delete t.$apply;delete t.$count;delete t.$expand;delete t.$orderby;if(this.oAggregation.search){t.$search=this.oAggregation.search}delete t.$select;i=this.sResourcePath+"/$count"+this.oRequestor.buildQueryString(null,t);return this.oRequestor.request("GET",i,e.getUnlockedCopy()).then(e=>{n(e);o.fireChange(this.mChangeListeners,"./$count",e)}).catch(e=>{if(e.cause&&this.oCountPromise.$retryIfFailed){this.oCountPromise.$resolve=n}else{this.oCountPromise.$restore()}throw e})}};d.prototype.readFirst=function(t,n,r,s,a){var u=this;n+=r;const d=this.oTreeState.getOutOfPlaceCount();r=Math.max(r,d);if(t>r){n+=r;t-=r}else{n+=t;t=0}const h=this.iResetCount;const c=this.oFirstLevel.bSentRequest;if(c&&d){s=i.$cached}return l.all([this.oFirstLevel.read(t,n,0,s,a),...c?[]:this.requestOutOfPlaceNodes(s)]).then(function([n,...i]){if(h!==u.iResetCount){return}if(c&&d){return}var r,s,a=0,l;u.aElements.length=u.aElements.$count=n.value.$count;if(u.aElements.length&&u.oGrandTotalPromise){u.aElements.$count+=1;u.aElements.length+=1;r=u.oGrandTotalPromise.getResult();switch(u.oAggregation.grandTotalAtBottomOnly){case false:a=1;u.aElements.$count+=1;u.aElements.length+=1;u.addElements(r,0);s=o.getPrivateAnnotation(r,"copy");u.addElements(s,u.aElements.length-1);break;case true:u.addElements(r,u.aElements.length-1);break;default:a=1;u.addElements(r,0)}}u.addElements(n.value,t+a,u.oFirstLevel,t);for(l=0;l<u.aElements.$count;l+=1){u.aElements[l]??=e.createPlaceholder(u.oAggregation.expandTo>1||u.bUnifiedCache?0:1,l-a,u.oFirstLevel)}u.handleOutOfPlaceNodes(i)})};d.prototype.readGap=function(e,t,n,i,r){const s=this.aElements[t];const a=o.getPrivateAnnotation(s,"rank");if(a===undefined){if(n-t!==1){throw new Error("Not just a single created persisted")}const a=o.getPrivateAnnotation(s,"predicate");const l=e.refreshSingle(i,"",-1,a,true,false,r).then(n=>{o.inheritPathValue(this.oAggregation.$NodeProperty.split("/"),s,n,true);this.addElements(n,t,e)});this.aElements.$byPredicate[a]=l;return l}let l=e.getQueryOptions();if(l.$count){l={...l};delete l.$count;e.setQueryOptions(l,true)}const u=e.read(a,n-t,0,i,r,true).then(n=>{var i=false,o;if(s!==this.aElements[t]&&n.value[0]!==this.aElements[t]){i=true;t=this.aElements.indexOf(s);if(t<0){t=this.aElements.indexOf(n.value[0]);if(t<0){o=new Error("Collapse before read has finished");o.canceled=true;throw o}}}this.addElements(n.value,t,e,a);if(i){o=new Error("Collapse or expand before read has finished");o.canceled=true;throw o}});if(u.isPending()){for(let e=t;e<n;e+=1){const t=o.getPrivateAnnotation(this.aElements[e],"predicate");if(t){this.aElements.$byPredicate[t]=u}}}return u};d.prototype.refreshKeptElements=function(e,t,n,i){if(!this.oAggregation.hierarchyQualifier){return}const o=this.oFirstLevel.refreshKeptElements;return o.call(this,e,t,n,true)};d.prototype.replaceElement=function(e,t,n,i,r,s,a){this.visitResponse(i,r,o.getMetaPath(o.buildPath(this.sMetaPath,s)),s+n,undefined,a);o.updateAll({},"",e.$byPredicate[n],i)};d.prototype.requestFilteredOrderedPredicates=async function(t,n,i){if(!i){throw new Error("Not implemented")}let r={...this.mQueryOptions};delete r.$count;delete r.$expand;delete r.$orderby;r=e.buildApply4Hierarchy(this.oAggregation,r,true);r.$select=[];const s=this.getTypes();o.selectKeyProperties(r,s[this.sMetaPath]);const a=t.map(e=>o.getKeyFilter(this.aElements.$byPredicate[e],this.sMetaPath,s));r.$top=a.length;r.$filter=a.join(" or ");const l=this.sResourcePath+this.oRequestor.buildQueryString(this.sMetaPath,r,false,true,true);const u=await this.oRequestor.request("GET",l,n);return u.value.map(e=>{this.calculateKeyPredicate(e,s,this.sMetaPath);return o.getPrivateAnnotation(e,"predicate")})};d.prototype.requestNodeProperty=async function(e,t,n){if(o.drillDown(e,this.oAggregation.$NodeProperty)!==undefined){return}await this.requestProperties(e,[this.oAggregation.$NodeProperty],t,true,n)};d.prototype.requestOutOfPlaceNodes=function(t){const n=this.oTreeState.getOutOfPlaceGroupedByParent();if(!n.length){return[]}const i=[];const o=e=>{const n=this.sResourcePath+this.oRequestor.buildQueryString(this.sMetaPath,e,false,true);i.push(this.oRequestor.request("GET",n,t.getUnlockedCopy()))};let r=e.getQueryOptionsForOutOfPlaceNodesRank(n,this.oAggregation,this.oFirstLevel.getQueryOptions());o(r);n.forEach(t=>{r=e.getQueryOptionsForOutOfPlaceNodesData(t,this.oAggregation,this.mQueryOptions);o(r)});return i};d.prototype.requestProperties=async function(t,n,i,r,s,a){function l(e){e={...e};delete e.$count;delete e.$expand;delete e.$select;return e}let u;if(a){const t={...this.oAggregation,$ExpandLevels:this.oTreeState.getExpandLevels()};u=l(e.buildApply4Hierarchy(t,this.mQueryOptions))}else{const n=o.getPrivateAnnotation(t,"parent",this.oFirstLevel);u=s?e.dropFilter(this.oAggregation,this.mQueryOptions,n.$parentFilter):l(n.getQueryOptions())}u.$filter=o.getKeyFilter(t,this.sMetaPath,this.getTypes());const d=this.sResourcePath+this.oRequestor.buildQueryString(this.sMetaPath,u,false,true);const h=await this.oRequestor.request("GET",d,i.getUnlockedCopy(),undefined,undefined,undefined,undefined,this.sMetaPath,undefined,false,{$select:n},this);const c=h.value[0];if(r&&c){n.forEach(e=>{o.inheritPathValue(e.split("/"),c,t,true)})}else{return c}};d.prototype.requestRank=async function(e,t,n){const i=await this.requestProperties(e,[this.oAggregation.$LimitedRank],t,false,false,n);return i&&parseInt(o.drillDown(i,this.oAggregation.$LimitedRank))};d.prototype.requestSiblingIndex=async function(e,t,n){const i=this.getSiblingIndex(e,t,true);if(i!==undefined){return i}const r=this.aElements[e];const s={...this.oFirstLevel.mQueryOptions,$filter:this.oAggregation.$LimitedRank+(t<0?" lt ":" gt ")+o.getPrivateAnnotation(r,"rank")+" and "+this.oAggregation.$DistanceFromRoot+" lt "+r["@$ui5.node.level"],$top:1};if(t<0){s.$orderby=this.oAggregation.$LimitedRank+" desc"}s.$select=[...s.$select,this.oAggregation.$LimitedRank];delete s.$count;const a=this.sResourcePath+this.oRequestor.buildQueryString("",s,false,true,true);const l=await this.oRequestor.request("GET",a,n);const u=l.value[0];this.oFirstLevel.calculateKeyPredicate(u,this.getTypes(),this.sMetaPath);const d=parseInt(o.drillDown(u,this.oAggregation.$LimitedRank));o.deleteProperty(u,this.oAggregation.$LimitedRank);if(o.hasPrivateAnnotation(this.aElements[d],"placeholder")){this.insertNode(u,d)}return u["@$ui5.node.level"]===r["@$ui5.node.level"]?d:-1};d.prototype.reset=function(t,n,i,r,s){if(s){throw new Error("Unsupported grouping via sorter")}t.forEach(e=>{var t=this.aElements.$byPredicate[e];if(o.hasPrivateAnnotation(t,"placeholder")){throw new Error("Unexpected placeholder")}delete t["@$ui5.node.isExpanded"];delete t["@$ui5.node.level"];delete t["@$ui5._"];o.setPrivateAnnotation(t,"predicate",e)});const a=this.oFirstLevel.reset;a.call(this,t,n,i);if(n){this.oBackup.oCountPromise=this.oCountPromise;this.oBackup.oFirstLevel=this.oFirstLevel;this.oBackup.oGrandTotalPromise=this.oGrandTotalPromise;this.oBackup.bUnifiedCache=this.bUnifiedCache;this.bUnifiedCache=true}else{this.oTreeState.reset()}r=Object.assign({},r);r.$ExpandLevels=this.oTreeState.getExpandLevels();this.doReset(r,e.hasGrandTotal(r.aggregate))};d.prototype.resetOutOfPlace=function(){this.oTreeState.resetOutOfPlace()};d.prototype.restore=function(e){if(e){this.oCountPromise=this.oBackup.oCountPromise;this.oFirstLevel=this.oBackup.oFirstLevel;this.oGrandTotalPromise=this.oBackup.oGrandTotalPromise;this.bUnifiedCache=this.oBackup.bUnifiedCache}const t=this.oFirstLevel.restore;t.call(this,e)};d.prototype.shiftRank=function(e,t){const n=this.aElements[e];const i=o.getPrivateAnnotation(n,"rank");if(i===undefined){return}const r=o.getPrivateAnnotation(n,"parent");if(r===this.oFirstLevel){e=-1}for(let s=e+1;s<this.aElements.length;s+=1){const e=this.aElements[s];if(e===n){continue}if(o.getPrivateAnnotation(e,"parent")===r){const n=o.getPrivateAnnotation(e,"rank");if(n>=i){o.setPrivateAnnotation(e,"rank",n+t)}}if(r!==this.oFirstLevel&&e["@$ui5.node.level"]<n["@$ui5.node.level"]){break}}};d.prototype.shiftRankForMove=function(e,t,n){if(e<n){this.aElements.forEach(i=>{const r=o.getPrivateAnnotation(i,"rank");if(e+t<=r&&r<n+t){o.setPrivateAnnotation(i,"rank",r-t)}})}else if(n<e){this.aElements.forEach(i=>{const r=o.getPrivateAnnotation(i,"rank");if(n<=r&&r<e){o.setPrivateAnnotation(i,"rank",r+t)}})}};d.prototype.toString=function(){return this.sToString};d.prototype.turnIntoPlaceholder=function(t,n){if(o.hasPrivateAnnotation(t,"placeholder")){return}o.setPrivateAnnotation(t,"placeholder",1);e.markSplicedStale(t);delete this.aElements.$byPredicate[n];const i=o.getPrivateAnnotation(t,"rank");if(i!==undefined){o.getPrivateAnnotation(t,"parent").drop(i,n,true)}};d.prototype.validateAndDeleteExpandInfo=async function(t,n){const i=this.oTreeState.getExpandFilters(e=>{const t=this.aElements.$byPredicate[e];return!this.aElements.includes(t)});if(!i.length){return}const r=this.getTypes();let s={...this.mQueryOptions};s.$$filterBeforeAggregate=o.getKeyFilter(n,this.sMetaPath,r);delete s.$count;delete s.$expand;delete s.$orderby;s=e.buildApply4Hierarchy(this.oAggregation,s,true);s.$filter=i.sort().join(" or ");s.$select=[];o.selectKeyProperties(s,r[this.sMetaPath]);s.$top=i.length;const a=this.sResourcePath+this.oRequestor.buildQueryString(this.sMetaPath,s,false,true,true);const l=await this.oRequestor.request("GET",a,this.oRequestor.getUnlockedAutoCopy(t));l.value.forEach(e=>{this.calculateKeyPredicate(e,r,this.sMetaPath);this.oTreeState.deleteExpandInfo(e)})};d.calculateKeyPredicate=function(t,n,i,r,s,a,l,u){var d;if(!(u in l)){return undefined}if(t){i.forEach(function(e){if(Array.isArray(e)){o.inheritPathValue(e,t,a)}else if(!(e in a)){if(t[e+"@$ui5.noData"]){a[e+"@$ui5.noData"]=true}a[e]=t[e]}})}d=r&&o.getKeyPredicate(a,u,l)||o.getKeyPredicate(a,u,l,n,true);o.setPrivateAnnotation(a,"predicate",d);if(!r){o.setPrivateAnnotation(a,"filter",o.getKeyFilter(a,u,l,n))}e.setAnnotations(a,r?undefined:false,s,t?t["@$ui5.node.level"]+1:1,t?null:i);return d};d.calculateKeyPredicateRH=function(t,n,i,r,s){var a,l,u=1,d,h;if(!(s in r)){return undefined}h=o.getKeyPredicate(i,s,r);o.setPrivateAnnotation(i,"predicate",h);if(s!==n.$metaPath){return h}switch(o.drillDown(i,n.$DrillState)){case"expanded":l=true;break;case"collapsed":l=false;break;default:}o.deleteProperty(i,n.$DrillState);if(t){u=t["@$ui5.node.level"]+1}else{a=o.drillDown(i,n.$DistanceFromRoot);if(a){o.deleteProperty(i,n.$DistanceFromRoot);u=parseInt(a)+1}}e.setAnnotations(i,l,undefined,u);if(n.$LimitedDescendantCount){d=o.drillDown(i,n.$LimitedDescendantCount);if(d){o.deleteProperty(i,n.$LimitedDescendantCount);if(d!=="0"){o.setPrivateAnnotation(i,"descendants",parseInt(d))}}}return h};d.create=function(n,i,o,s,a,l,u,h){var c,f;function g(){if("$expand"in s){throw new Error("Unsupported system query option: $expand")}if("$select"in s){throw new Error("Unsupported system query option: $select")}}if(a){c=e.hasGrandTotal(a.aggregate);f=a.groupLevels&&!!a.groupLevels.length;if(e.hasMinOrMax(a.aggregate)){if(c){throw new Error("Unsupported grand totals together with min/max")}if(f){throw new Error("Unsupported group levels together with min/max")}if(a.hierarchyQualifier){throw new Error("Unsupported recursive hierarchy together with min/max")}if(u){throw new Error("Unsupported $$sharedRequest together with min/max")}g();return r.createCache(n,i,a,s)}if(s.$filter&&(c&&!a["grandTotal like 1.84"]||f)){throw new Error("Unsupported system query option: $filter")}if(c||f||a.hierarchyQualifier){if(s.$search){throw new Error("Unsupported system query option: $search")}if(!a.hierarchyQualifier){g()}if(h){throw new Error("Unsupported grouping via sorter")}if(u){throw new Error("Unsupported $$sharedRequest")}return new d(n,i,a,s,c)}}if("$$filterOnAggregate"in s){throw new Error("Unsupported $$filterOnAggregate")}if(s.$$filterBeforeAggregate){s={...s,$apply:"filter("+s.$$filterBeforeAggregate+")/"+s.$apply};delete s.$$filterBeforeAggregate}return t.create(n,i,s,l,o,u)};d.fixDuplicatePredicate=function(e,t){if(t==="('')"||t.includes("=''")){a.warning("Duplicate key predicate: "+t,this.toString(),"sap.ui.model.odata.v4.lib._AggregationCache");const n=t.slice(0,-1)+",$duplicate="+o.uid()+")";o.setPrivateAnnotation(e,"predicate",n);if(this.aElements.$byPredicate[t]===e){delete this.aElements.$byPredicate[t];this.aElements.$byPredicate[n]=e}return n}};return d},false);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/lib/_AggregationHelper", ["./_Helper","./_Parser","sap/ui/model/Filter"],function(e,t,r){"use strict";var n=/,|%2C|%2c/,i={aggregate:{"*":{grandTotal:"boolean",max:"boolean",min:"boolean",name:"string",subtotals:"boolean",unit:"string",with:"string"}},"grandTotal like 1.84":"boolean",grandTotalAtBottomOnly:"boolean",group:{"*":{additionally:["string"]}},groupLevels:["string"],search:"string",subtotalsAtBottomOnly:"boolean"},a=Object.freeze({"@$ui5.node.isExpanded":false}),o=Object.freeze({"@$ui5.node.isExpanded":true}),l=new RegExp("^("+t.sODataIdentifier+"(?:/"+t.sODataIdentifier+")*"+")(?:"+t.sWhitespace+"+(?:asc|desc))?$"),s={createInPlace:true,expandTo:/^[1-9]\d*$/,hierarchyQualifier:"string",search:"string"},u="com.sap.vocabularies.Hierarchy.v1.",f;function c(e,t,r,n,i,a,o){var l=e.aggregate[i],s=l.name||i,u=l.unit,f=l.with;if(n){if(f==="average"||f==="countdistinct"){throw new Error("Cannot aggregate totals with '"+f+"'")}s=i;i="UI5grand__"+i}if(f){s+=" with "+f+" as "+i}else if(l.name){s+=" as "+i}r.push(s);if(u&&!r.includes(u)&&!o.includes(u,a+1)&&!t.includes(u)){r.push(u)}}function g(e){var t=[];if(e.$skip){t.push("skip("+e.$skip+")")}delete e.$skip;if(e.$top<Infinity){t.push("top("+e.$top+")")}delete e.$top;return t.join("/")}f={beforeOverwritePlaceholder:function(t,r,n,i,a){var o=e.getPrivateAnnotation(t,"parent");if(!e.hasPrivateAnnotation(t,"placeholder")){throw new Error("Unexpected element")}if(o!==n||e.getPrivateAnnotation(t,"rank")!==i||t["@$ui5.node.level"]!==r["@$ui5.node.level"]&&t["@$ui5.node.level"]!==0){throw new Error("Wrong placeholder")}["descendants","predicate"].forEach(function(n){if(e.hasPrivateAnnotation(t,n)&&e.getPrivateAnnotation(t,n)!==e.getPrivateAnnotation(r,n)){throw new Error("Unexpected structural change: "+n)}});if(a){f.checkNodeProperty(t,r,a)}e.copyPrivateAnnotation(t,"cache",r);e.copyPrivateAnnotation(t,"context",r);e.copyPrivateAnnotation(t,"spliced",r);if("@$ui5.context.isTransient"in t){r["@$ui5.context.isTransient"]=false}if(e.getPrivateAnnotation(t,"placeholder")===1){if(t["@$ui5.node.isExpanded"]===undefined!==(r["@$ui5.node.isExpanded"]===undefined)){throw new Error("Not a leaf anymore (or vice versa)")}if(t["@$ui5.node.isExpanded"]!==undefined){r["@$ui5.node.isExpanded"]=t["@$ui5.node.isExpanded"]}}},buildApply:function(e,t,r,n,i){var a,o="",l=[],s=e["grandTotal like 1.84"],u,d,p,h=[],$,y,v=[];function b(t,r){var n,a=e.aggregate[t];if(a[r]){n="UI5"+r+"__"+t;h.push(t+" with "+r+" as "+n);if(i){i[n]={measure:t,method:r}}}}if(e.hierarchyQualifier){return f.buildApply4Hierarchy(e,t,!r)}t=Object.assign({},t);e.groupLevels??=[];e.group??={};e.groupLevels.forEach(function(t){e.group[t]??={}});y=Object.keys(e.group).sort();if(y.length===e.groupLevels.length){e.groupLevels.pop()}d=!r||r>e.groupLevels.length;u=d?y.filter(function(t){return!e.groupLevels.includes(t)}):[e.groupLevels[r-1]];if(!r){u=e.groupLevels.concat(u)}e.aggregate??={};a=Object.keys(e.aggregate).sort();if(r===1&&!n){a.filter(function(t){return e.aggregate[t].grandTotal}).forEach(c.bind(null,e,[],l,s))}if(!n){a.forEach(function(e){b(e,"min");b(e,"max")})}a.filter(function(t){return d||e.aggregate[t].subtotals}).forEach(c.bind(null,e,u,v,false));if(v.length){o="aggregate("+v.join(",")+")"}if(u.length){u.forEach(function(t){var r=e.group[t].additionally;if(r){u.push.apply(u,r)}});o="groupby(("+u.join(",")+(o?"),"+o+")":"))")}if(n){delete t.$count}else if(t.$count){h.push("$count as UI5__count");delete t.$count}if(t.$filter){o+="/filter("+t.$filter+")";delete t.$filter}if(t.$orderby){o+="/orderby("+t.$orderby+")";delete t.$orderby}$=g(t);if(s&&l.length){if(e.groupLevels.length){throw new Error("Cannot combine visual grouping with grand total")}o+="/concat(aggregate("+l.join(",")+"),aggregate("+h.join(",")+"),"+($||"identity")+")"}else{if(h.length){o+="/concat(aggregate("+h.join(",")+"),"+($||"identity")+")"}else if($){o+="/"+$}if(r===1&&t.$$leaves&&!n){p="groupby(("+y.join(",")+"))/aggregate($count as UI5__leaves)"}delete t.$$leaves;if(l.length){o="concat("+(p?p+",":"")+"aggregate("+l.join(",")+"),"+o+")"}else if(p){o="concat("+p+","+o+")"}}if(t.$$filterOnAggregate){o="groupby(("+y.join(",")+"),filter("+t.$$filterOnAggregate+"))/"+o;delete t.$$filterOnAggregate}if(e.search){o="search("+e.search+")/"+o}if(t.$$filterBeforeAggregate){o="filter("+t.$$filterBeforeAggregate+")/"+o;delete t.$$filterBeforeAggregate}if(o){t.$apply=o}return t},buildApply4Hierarchy:function(e,t,r){let n;function i(r){if(t.$select){let i=e["$"+r];if(!i){n??=e.$fetchMetadata(e.$metaPath+"/@"+u+"RecursiveHierarchy#"+e.hierarchyQualifier).getResult();i=e["$"+r]=n[r+"Property"]?.$PropertyPath??n[r]?.$Path}t.$select.push(i)}}let a=e.$NodeProperty;if(!a){a="???";if(t){const t=e.$fetchMetadata(e.$metaPath+"/@Org.OData.Aggregation.V1.RecursiveHierarchy#"+e.hierarchyQualifier);if(t.isFulfilled()){a=e.$NodeProperty=t.getResult().NodeProperty.$PropertyPath;e.$ParentNavigationProperty=t.getResult().ParentNavigationProperty.$NavigationPropertyPath}}}t=Object.assign({},t);if(t.$select){t.$select=t.$select.slice();if(!t.$select.includes(a)){t.$select.push(a)}e.$Actions??=e.$fetchMetadata(e.$metaPath+"/@"+u+"RecursiveHierarchyActions#"+e.hierarchyQualifier).getResult()}let o="";if(t.$filter||e.search){let r="";if(t.$filter){o="filter("+t.$filter;r=")/";delete t.$filter}if(e.search){o+=r+"search("+e.search}o="ancestors($root"+e.$path+","+e.hierarchyQualifier+","+a+","+o+"),keep start)/"}if(t.$$filterBeforeAggregate){o+="descendants($root"+e.$path+","+e.hierarchyQualifier+","+a+",filter("+t.$$filterBeforeAggregate+(r?"))":"),1)");delete t.$$filterBeforeAggregate;if(t.$orderby){o+="/orderby("+t.$orderby+")";delete t.$orderby}}else{if(t.$orderby){o+="orderby("+t.$orderby+")/";delete t.$orderby}e.expandTo??=1;if(e.expandTo>Number.MAX_SAFE_INTEGER){e.expandTo=Number.MAX_SAFE_INTEGER}const n=!r&&e.$ExpandLevels;o+=u+"TopLevels(HierarchyNodes=$root"+(e.$path||"")+",HierarchyQualifier='"+e.hierarchyQualifier+"',NodeProperty='"+a+"'"+(r||e.expandTo>=Number.MAX_SAFE_INTEGER?"":",Levels="+e.expandTo)+(n?",ExpandLevels="+n:"")+")";if(r){i("DistanceFromRoot")}else if(e.expandTo>1||n){i("DistanceFromRoot");i("LimitedDescendantCount")}}i("DrillState");if(n&&!e.$LimitedRank){e.$LimitedRank=n.LimitedRank?.$Path??e.$DrillState.slice(0,e.$DrillState.lastIndexOf("/")+1)+"LimitedRank"}t.$apply=o;return t},checkNodeProperty:function(t,r,n,i){var a=e.drillDown(r,n),o=e.drillDown(t,n);if((i||o!==undefined)&&a!==undefined&&o!==a){throw new Error("Unexpected structural change: "+n+" from "+JSON.stringify(o)+" to "+JSON.stringify(a))}},checkTypeof:function(e,t,r){if(Array.isArray(t)){if(!Array.isArray(e)){throw new Error("Not an array value for '"+r+"'")}e.forEach(function(e,n){f.checkTypeof(e,t[0],r+"/"+n)})}else if(t instanceof RegExp){if(!t.test(e)){throw new Error("Not a matching value for '"+r+"'")}}else if(typeof t==="object"){const n="*"in t;if(typeof e!=="object"||!e||Array.isArray(e)){throw new Error("Not an object value for '"+r+"'")}Object.keys(e).forEach(function(i){if(!n&&!(i in t)){throw new Error("Unsupported property: '"+r+"/"+i+"'")}f.checkTypeof(e[i],t[n?"*":i],r+"/"+i)})}else if(t===true){if(e!==true){throw new Error("Not a true value for '"+r+"'")}}else if(typeof e!==t){throw new Error("Not a "+t+" value for '"+r+"'")}},createPlaceholder:function(t,r,n){var i={"@$ui5.node.level":t};e.setPrivateAnnotation(i,"parent",n);e.setPrivateAnnotation(i,"placeholder",true);e.setPrivateAnnotation(i,"rank",r);return i},dropFilter:function(e,t,r){e={...e};delete e.search;t={...t};delete t.$count;delete t.$expand;delete t.$filter;delete t.$orderby;delete t.$select;if(r){t.$$filterBeforeAggregate=r}else{delete t.$$filterBeforeAggregate}return f.buildApply4Hierarchy(e,t)},extractSubtotals:function(e,t,r,n){var i=t["@$ui5.node.level"];Object.keys(e.aggregate).forEach(function(a){var o=e.aggregate[a],l,s=o.unit;if(!o.subtotals){return}r[a]=t[a];if(n){n[a]=null}if(s){r[s]=t[s];if(n){l=e.groupLevels.indexOf(s);if(l<0||l>=i){n[s]=null}}}})},filterOrderby:function(e,t,r){var n=f.getFilteredOrderby(e.$orderby,t,r);e=Object.assign({},e);if(n){e.$orderby=n}else{delete e.$orderby}return e},findPreviousSiblingIndex:function(t,r){let n;const i=t[r]["@$ui5.node.level"];for(let a=r-1;a>=0;a-=1){const o=t[a];if(!o){n=true;continue}if(o["@$ui5.node.level"]<i){break}if(o["@$ui5.node.level"]>i){continue}if(a+e.getPrivateAnnotation(o,"descendants",0)===r-1){return a}break}return n?undefined:-1},getAllProperties:function(e){var t=Object.keys(e.aggregate),r=Object.keys(e.group),n=t.concat(r);t.forEach(function(t){var r=e.aggregate[t].unit;if(r){n.push(r)}});r.forEach(function(t){e.group[t].additionally?.forEach(function(e){n.push(e.includes("/")?e.split("/"):e)})});return n},getCollapsedObject:function(t){return e.getPrivateAnnotation(t,"collapsed",a)},getFilteredOrderby:function(e,t,r){var i=!r||r>t.groupLevels.length;function a(e){return Object.keys(t.aggregate).some(function(r){var n=t.aggregate[r];return n.subtotals&&e===n.unit})}function o(e){if(e in t.group&&(!r||!t.groupLevels.includes(e))){return true}return Object.keys(t.aggregate).some(function(r){return e===t.aggregate[r].unit})||Object.keys(t.group).some(function(n){return(!r||!t.groupLevels.includes(n))&&s(e,n)})}function s(e,r){return e===r||t.group[r].additionally?.includes(e)}if(e){return e.split(n).filter(function(e){var n=l.exec(e),u;if(n){u=n[1];return u in t.aggregate&&(i||t.aggregate[u].subtotals)||i&&o(u)||!i&&(s(u,t.groupLevels[r-1])||a(u))}return true}).join(",")}},getOrCreateExpandedObject:function(t,r){var n,i;if(t.subtotalsAtBottomOnly===undefined){return o}i=e.getPrivateAnnotation(r,"expanded");if(!i){n={"@$ui5.node.isExpanded":false};e.setPrivateAnnotation(r,"collapsed",n);i={"@$ui5.node.isExpanded":true};e.setPrivateAnnotation(r,"expanded",i);f.extractSubtotals(t,r,n,t.subtotalsAtBottomOnly?i:null)}return i},getQueryOptionsForOutOfPlaceNodesData:function(e,t,r){t=Object.assign({},t);t.expandTo=1;delete t.search;delete t.$ExpandLevels;r=Object.assign({},r);if(e.parentFilter){r.$$filterBeforeAggregate=e.parentFilter}delete r.$count;delete r.$filter;delete r.$orderby;r=f.buildApply(t,r,1);const n=e.nodeFilters.slice().sort();r.$filter=n.join(" or ");r.$top=n.length;const i=r.$select.indexOf(t.$DrillState);if(i>=0){r.$select.splice(i,1)}return r},getQueryOptionsForOutOfPlaceNodesRank:function(t,r,n){const i=new Set;t.forEach(function(e){if(e.parentFilter){i.add(e.parentFilter)}e.nodeFilters.forEach(function(e){i.add(e)})});const a=[r.$DistanceFromRoot,r.$DrillState,r.$LimitedRank];if(r.$LimitedDescendantCount){a.push(r.$LimitedDescendantCount)}n=Object.assign({},n,{$filter:[...i].sort().join(" or "),$select:a,$top:i.size});delete n.$count;delete n.$orderby;e.selectKeyProperties(n,r.$fetchMetadata(r.$metaPath+"/").getResult());return n},handleGrandTotal:function(t,r){if(t["grandTotal like 1.84"]){f.removeUI5grand__(r)}f.setAnnotations(r,true,true,0,f.getAllProperties(t));if(t.grandTotalAtBottomOnly===false){const t=Object.assign({},r,{"@$ui5.node.isExpanded":undefined});e.setPrivateAnnotation(r,"copy",t);e.setPrivateAnnotation(t,"predicate","($isTotal=true)")}e.setPrivateAnnotation(r,"predicate","()")},hasGrandTotal:function(e){return e&&Object.keys(e).some(function(t){return e[t].grandTotal})},hasMinOrMax:function(e){return e&&Object.keys(e).some(function(t){var r=e[t];return r.min||r.max})},isAffected:function(t,r,n){return n.some(function(n){function i(t){return e.hasPathPrefix(t,n.endsWith("/*")?n.slice(0,-2):n)||e.hasPathPrefix(n,t)}function a(e){return e.some(function(e){return e.getFilters()?a(e.getFilters()):i(e.getPath())})}return n===""||n==="*"||a(r)||Object.keys(t.aggregate).some(e=>{const r=t.aggregate[e];return i(r.name||e)||r.unit&&i(r.unit)})||Object.keys(t.group).some(e=>i(e)||t.group[e].additionally?.some(e=>i(e)))})},markSplicedStale:function(t){var r=e.getPrivateAnnotation(t,"spliced");if(r){r.$stale=true}},removeUI5grand__:function(e){Object.keys(e).forEach(function(t){if(t.startsWith("UI5grand__")){e[t.slice(10)]=e[t];delete e[t]}})},setAnnotations:function(t,r,n,i,a){e.setAnnotation(t,"@$ui5.node.isExpanded",r);e.setAnnotation(t,"@$ui5.node.isTotal",n);t["@$ui5.node.level"]=i;if(a){a.forEach(function(r){if(Array.isArray(r)){e.createMissing(t,r)}else if(!(r in t)){t[r]=undefined;t[r+"@$ui5.noData"]=true}})}},setPath:function(t,r){t.$metaPath=r&&e.getMetaPath(r);t.$path=r},splitFilter:function(e,t){var n=[],i=[],a=[];function o(e){return e.getFilters()?e.getFilters().some(o):e.getPath()in t.aggregate}function l(e){return Object.keys(t.aggregate).some(r=>t.aggregate[r].unit===e)}function s(e){if(e.getFilters()&&e.isAnd()){e.getFilters().forEach(s)}else if(e.getPath()&&l(e.getPath())){n.push(e);i.push(e);a.push(e)}else{(o(e)?a:n).push(e)}}function u(e){return e.length>1?new r(e,true):e[0]}if(!t?.aggregate){return[e]}if(!t.$leafLevelAggregated){return[undefined,e]}s(e);let c=[u(a),u(n)];if(t.groupLevels.length||!t["grandTotal like 1.84"]&&f.hasGrandTotal(t.aggregate)){c=[undefined,c[1],c[0],i]}return c},validateAggregation:function(e,t){if(e.hierarchyQualifier&&!t){throw new Error("Missing parameter autoExpandSelect at model")}f.checkTypeof(e,e.hierarchyQualifier?s:i,"$$aggregation")},validateAggregationAndSetPath:function(e,t,r,n){f.validateAggregation(e,t);e.$fetchMetadata=r;f.setPath(e,n)}};return f},false);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/lib/_Cache", ["./_GroupLock","./_Helper","./_Requestor","sap/base/Log","sap/ui/base/SyncPromise","sap/ui/model/odata/ODataUtils"],function(e,t,i,n,s,r){"use strict";var a="sap.ui.model.odata.v4.lib._Cache",o=/\(\$uid=[-\w]+\)$/,u=/^\$inactive\./,h="@com.sap.vocabularies.Common.v1.Messages",c=/^-?\d+$/,l=/^([^(]*)(\(.*\))$/;function d(e,t){return t===""||e===t||e.startsWith(t+"/")}function f(e,t,i,n,s,r){this.iActiveUsages=1;this.mChangeListeners={};this.mChangeRequests={};this.sOriginalResourcePath=s||t;this.iInactiveSince=Infinity;this.mEditUrl2PatchPromise={};this.oPendingRequestsPromise=null;this.mPostRequests={};this.sReportedMessagesPath=undefined;this.oRequestor=e;this.bSentRequest=false;this.bSortExpandSelect=n;this.setResourcePath(t);this.setQueryOptions(i);this.bSharedRequest=r}f.prototype._delete=function(i,n,r,a,o){var u=r.split("/"),h=u.pop(),l=u.join("/"),d=this;this.checkSharedRequest();return this.fetchValue(e.$cached,l).then(function(e){var r,u=h?e[h]||e.$byPredicate[h]:e,f,p,g,P=c.test(h)?Number(h):undefined,m=t.getPrivateAnnotation(u,"predicate"),y=t.buildPath(l,Array.isArray(e)?m:h),$=d.oRequestor.getModelInterface(),v,R=t.getPrivateAnnotation(u,"transient"),E=t.getPrivateAnnotation(u,"transientPredicate");function q(){t.removeByPath(d.mChangeRequests,y,v);if(p.length){$.updateMessages(undefined,p)}delete u["@$ui5.context.isDeleted"];if(Array.isArray(e)){P=r.index;const t=e.$deleted.indexOf(r);if(P!==undefined){d.restoreElement(P,u,t,e,l)}e.$deleted.splice(t,1)}if(d.iActiveUsages){o(P,1)}else if(P===undefined&&d.reset){d.reset([])}}if(R){if(typeof R!=="string"){throw new Error("No 'delete' allowed while waiting for server response")}if(e.$postBodyCollection){e.$postBodyCollection.splice(P,1);d.removeElement(P,E,e,l);o(P,-1);const i=new Error("Deleted from deep create");i.canceled=true;t.getPrivateAnnotation(u,"reject")(i);t.cancelNestedCreates(u,"Deleted from deep create")}else{d.oRequestor.removePost(R,u)}return undefined}p=$.getMessagesByPath(t.buildPath("/",d.sResourcePath,y),true);$.updateMessages(p);u["@$ui5.context.isDeleted"]=true;if(Array.isArray(e)){r=d.addDeleted(e,P,m,i,!!E);d.removeElement(P,m,e,l)}o(P,-1);if(i){f=i.getGroupId();d.oRequestor.relocateAll("$parked."+f,f,u)}g={"If-Match":a||u};n+=d.oRequestor.buildQueryString(d.sMetaPath,d.mQueryOptions,true);v=i?d.oRequestor.request("DELETE",n,i,g,undefined,undefined,q,undefined,t.buildPath(d.sOriginalResourcePath,y)):s.resolve();t.addByPath(d.mChangeRequests,y,v);return v.catch(function(e){if(e.status!==404){throw e}}).then(function(){t.removeByPath(d.mChangeRequests,y,v);if(Array.isArray(e)){e.$deleted.splice(e.$deleted.indexOf(r),1);delete e.$byPredicate[m];delete e.$byPredicate[E]}else if(h){t.updateExisting(d.mChangeListeners,l,e,t.makeUpdateData([h],null))}else{u["$ui5.deleted"]=true}},function(e){if(!e.canceled){p=p.filter(function(e){return!e.persistent});q()}throw e})})};f.prototype.addDeleted=function(e,t,i,n,s){var r={created:s,groupId:n&&n.getGroupId(),predicate:i,index:t},a;e.$deleted??=[];if(t===undefined){e.$deleted.unshift(r)}else{for(a=0;a<e.$deleted.length;a+=1){if(t<e.$deleted[a].index){break}}e.$deleted.splice(a,0,r)}return r};f.prototype.addPendingRequest=function(){var e;if(!this.oPendingRequestsPromise){this.oPendingRequestsPromise=new s(function(t){e=t});this.oPendingRequestsPromise.$count=0;this.oPendingRequestsPromise.$resolve=e}this.oPendingRequestsPromise.$count+=1};f.prototype.addTransientCollection=function(e,i){var n,s=e.split("/"),r=s.pop(),a=this.getValue(s.join("/")),o=t.getPrivateAnnotation(a,"postBody"),u,h=e.indexOf(")",e.indexOf("($uid="))+1,c=this.getValue(e.slice(0,h)),l=t.getPrivateAnnotation(c,"select",{}),d=this;function f(){n.$postBodyCollection=o[r]=u}this.checkSharedRequest();n=a[r]??=[];n.$count=n.$created=n.length;n.$byPredicate={};u=o[r]||[];if(n.length){f()}else{n.$postBodyCollection=f}l[t.getMetaPath(e.slice(h+1))]=i;t.setPrivateAnnotation(c,"select",l);n.forEach(function(e,i){var s="($uid="+t.uid()+")";e["@$ui5.context.isTransient"]=true;t.setPrivateAnnotation(e,"postBody",u[i]);t.setPrivateAnnotation(e,"transient",t.getPrivateAnnotation(a,"transient"));t.setPrivateAnnotation(e,"transientPredicate",s);t.setPrivateAnnotation(e,"promise",t.addPromise(e));n.$byPredicate[s]=e});this.fetchTypes().then(function(i){d.oRequestor.fetchType(i,d.sMetaPath+"/"+t.getMetaPath(e))});return n};f.prototype.adjustIndexes=function(e,t,i,n,s,r){if(i===undefined){return}if(!e&&this.aReadRequests){this.aReadRequests.forEach(function(e){if(e.iStart>=i){e.iStart+=n;e.iEnd+=n}})}(t.$deleted||[]).forEach(function(e,t){if(i<e.index||s<t||r&&(i===0||!e.created)){e.index+=n}})};f.prototype.calculateKeyPredicate=function(e,i,n){var s,r=i[n];if(r&&r.$Key){s=t.getKeyPredicate(e,n,i);if(s){t.setPrivateAnnotation(e,"predicate",s)}}return s};f.prototype.checkSharedRequest=function(){if(this.bSharedRequest){throw new Error(this+" is read-only")}};f.prototype.create=function(e,i,n,r,a,o,h,c,l){var d=this.getValue(n),f=e.getGroupId(),p,g,P=this;function m(s){var o=a["@$ui5.context.isInactive"],u=d.indexOf(a);if(s&&o){if(o===1){t.resetInactiveEntity(P.mChangeListeners,r,a)}return true}t.cancelNestedCreates(a,"Deep create of "+i.getResult()+" canceled; group: "+e.getGroupId());t.removeByPath(P.mPostRequests,n,a);d.splice(u,1);d.$created-=1;if(!a["@$ui5.context.isInactive"]){if(!n){P.iActiveElements-=1}t.addToCount(P.mChangeListeners,n,d,-1)}delete d.$byPredicate[r];P.adjustIndexes(n,d,u,-1);if(l){l()}e.cancel()}function y(){P.addPendingRequest();t.setPrivateAnnotation(a,"transient",new Promise(function(e){g=e}));c()}function $(e,i){t.setPrivateAnnotation(a,"transient",f);t.addByPath(P.mPostRequests,n,a);return s.all([P.oRequestor.request("POST",e,i,null,p,y,m,undefined,t.buildPath(P.sResourcePath,n,r)),P.fetchTypes()]).then(function([i,s]){var o,u,h;t.deletePrivateAnnotation(a,"postBody");t.deletePrivateAnnotation(a,"transient");i["@$ui5.context.isTransient"]=false;t.removeByPath(P.mPostRequests,n,a);P.visitResponse(i,s,t.getMetaPath(t.buildPath(P.sMetaPath,n)),n+r,undefined,true);o=t.getPrivateAnnotation(i,"predicate");if(o){t.setPrivateAnnotation(a,"predicate",o);if(r in d.$byPredicate){d.$byPredicate[o]=a;t.updateTransientPaths(P.mChangeListeners,r,o)}}t.cancelNestedCreates(a,"Deep create of "+e+" succeeded. Do not use this promise.");u=t.buildPath(n,o||r);const c=t.updateNestedCreates(P.mChangeListeners,P.mQueryOptions,u,a,i,t.getPrivateAnnotation(a,"select"));if(!c){h=t.getQueryOptionsForPath(P.mLateExpandSelect||P.mQueryOptions,n).$select}t.updateSelected(P.mChangeListeners,u,a,i,h,undefined,true);t.setPrivateAnnotation(a,"deepCreate",c);t.deletePrivateAnnotation(a,"select");P.removePendingRequest();g(true);return a},function(t){var i;if(t.canceled){throw t}if(g){P.removePendingRequest();g()}if(P.fetchTypes().isRejected()){h(t);throw t}f=f.replace(u,"");f=P.oRequestor.getGroupSubmitMode(f)==="API"?f:"$parked."+f;i=$(e,P.oRequestor.lockGroup(f,P,true,true));h(t);return i})}this.checkSharedRequest();if(!Array.isArray(d)){throw new Error("Create is only supported for collections; '"+n+"' does not reference a collection")}p=t.clone(a);t.setPrivateAnnotation(a,"postBody",p);t.setPrivateAnnotation(a,"transientPredicate",r);a["@$ui5.context.isTransient"]=true;if(f.startsWith("$inactive.")){t.setPrivateAnnotation(a,"initialData",t.publicClone(a,true));a["@$ui5.context.isInactive"]=true}else{if(!n){this.iActiveElements+=1}t.addToCount(this.mChangeListeners,n,d,1)}if(o){d.splice(d.$created,0,a)}else{d.unshift(a)}d.$created+=1;d.$byPredicate??={};d.$byPredicate[r]=a;P.adjustIndexes(n,d,0,1,0,true);if(d.$postBodyCollection){if(typeof d.$postBodyCollection==="function"){d.$postBodyCollection()}t.setPrivateAnnotation(a,"transient",f);if(o){d.$postBodyCollection.push(p)}else{d.$postBodyCollection.unshift(p)}e.unlock();return t.addPromise(a)}return i.then(function(t){t+=P.oRequestor.buildQueryString(P.sMetaPath,P.mQueryOptions,true);return $(t,e)})};f.prototype.drillDown=function(i,r,o,u){var h=s.resolve(i),c,d,p=false,g,P=false,m=this;function y(e,t){t||=e[0]==="("&&e.at(-1)===")";n[t?"info":"error"]("Failed to drill-down into "+r+", invalid segment: "+e,m.toString(),a);return undefined}function $(e,n,s,r){var a,u,h=g.slice(0,s).join("/"),l=t.getMetaPath(h),f;if(Array.isArray(e)){return y(n,n==="0")}if(p){return y(n,true)}if(n.includes("@")){u=n.split("@")[0];l=t.getMetaPath(h.split("@")[0]);if(P||u in e||e[u+"@$ui5.noData"]||t.isSelected(l,m.mQueryOptions)){return y(n,true)}}const $=m.mSeparateProperty2ReadRequests?.[n];if($){const t=m.aElements.indexOf(e);const i=$.find(e=>t>=e.start&&t<e.end);if(i){return i.promise}}a=e[t.getAnnotationKey(e,".Permissions",n)];if(a===0||a==="None"){return undefined}return m.oRequestor.getModelInterface().fetchMetadata(m.sMetaPath+"/"+l).then(function(s){var a=false;if(!s){return y(n)}if(s.$Type==="Edm.Stream"&&!u){f=e[n+"@odata.mediaReadLink"]||e[n+"@mediaReadLink"];if(f){return f}if(e[n+"@$ui5.noData"]||t.isSelected(l,m.mQueryOptions)){return t.buildPath(m.oRequestor.getServiceUrl()+m.sResourcePath,h)}}if(!r&&e[n+"@$ui5.noData"]){return undefined}if(!P){if(!c&&!Array.isArray(i)){c=i;d=0}if(c&&!r){a=m.fetchLateProperty(o,c,g.slice(0,d).join("/"),g.slice(d).join("/"))}return typeof a==="boolean"?y(n,a):a}if(s.$kind==="NavigationProperty"){return null}if(!s.$Type.startsWith("Edm.")){return{}}if("$DefaultValue"in s){return s.$Type==="Edm.String"?s.$DefaultValue:t.parseLiteral(s.$DefaultValue,s.$Type,h)}return null})}if(!r){return h}g=r.split("/");return g.reduce(function(i,n,r){return i.then(function i(a,h){var v,R,E;if(a===undefined){return undefined}if(n==="$count"){return Array.isArray(a)?a.$count:y(n)}if(a===null){P=true;return $({},n,r+1)}if(typeof a!=="object"||n==="@$ui5._"||Array.isArray(a)&&(n[0]==="$"||n==="length")){return y(n)}if(t.hasPrivateAnnotation(a,"predicate")){c=a;d=r}E=a;P||=a["@$ui5.context.isTransient"];R=l.exec(n);if(R){if(R[1]){a=a[R[1]]}a&&=a.$byPredicate&&a.$byPredicate[R[2]]}else{v=f.from$skip(n,a);if(u&&v===n&&(a[n]===undefined||a[n]===null)){a[n]={}}a=a[v]}if(g.length===1&&o!==e.$cached&&m.mSeparateProperty2ReadRequests){const e=m.aElements.indexOf(a);const t=[];for(const i in m.mSeparateProperty2ReadRequests){const n=m.mSeparateProperty2ReadRequests[i].find(t=>e>=t.start&&e<t.end);if(n){t.push(n.promise)}}if(t.length){return Promise.all(t).then(function(){return i(E)})}}if(a===undefined&&n[0]!=="#"&&n[0]!=="@"){a=$(E,n,r+1,h);if(a instanceof s&&a.isPending()){return a.then(function(){return i(E,true)})}}if(n.includes("@")){p=true}return a})},h)};f.prototype.fetchLateProperty=function(e,i,n,s){var r=false,a,o,u,h=s.indexOf("@"),c,l,d,f,p=t.getMetaPath(n),g=this.getTypes(),P,m=this;function y(){r=true;m.oRequestor.getModelInterface().fireDataRequested("/"+o)}function $(e,i){var n=t.buildPath(a,i),s=g[n],r;s??=m.oRequestor.fetchType(g,n).getResult();if(i){(s.$Key||[]).forEach(function(e){if(typeof e==="object"){e=e[Object.keys(e)[0]]}P.push(t.buildPath(i,e))})}if(e.$expand){r=Object.keys(e.$expand)[0];$(e.$expand[r],t.buildPath(i,r))}}if(!(this.mLateExpandSelect||this.mQueryOptions&&this.mQueryOptions.$select)){return false}if(h>=0){if(s.startsWith("@$ui5.",h)){return true}s=s.slice(0,h)}P=[s];a=t.buildPath(this.sMetaPath,p);d=this.mLateExpandSelect||{$select:this.mQueryOptions.$select,$expand:this.mQueryOptions.$expand};d=t.intersectQueryOptions(t.getQueryOptionsForPath(d,n),[s],this.oRequestor.getModelInterface().fetchMetadata,a);if(!d){return false}$(d);o=t.buildPath(this.sResourcePath,n);f=o+this.oRequestor.buildQueryString(a,d,false,true);l=this.mPropertyRequestByPath[f];if(!l){c=o+this.oRequestor.buildQueryString(a,this.mQueryOptions,true);u=t.getPrivateAnnotation(i,"groupId");l=this.oRequestor.request("GET",c,u?this.oRequestor.lockGroup(u,this):e.getUnlockedCopy(),undefined,undefined,y,undefined,a,undefined,false,d).then(function(e){m.visitResponse(e,g,a,n);return e});this.mPropertyRequestByPath[f]=l}return l.then(function(e){var s=t.getPrivateAnnotation(e,"predicate"),a=t.getPrivateAnnotation(i,"predicate");if(a&&s&&a!==s){throw new Error("GET "+f+": Key predicate changed from "+a+" to "+s)}if(i["@odata.etag"]&&e["@odata.etag"]!==i["@odata.etag"]){throw new Error("GET "+f+": ETag changed")}t.updateSelected(m.mChangeListeners,n,i,e,P);if(r){r=false;m.oRequestor.getModelInterface().fireDataReceived(undefined,"/"+o)}}).catch(function(e){if(r){m.oRequestor.getModelInterface().fireDataReceived(e,"/"+o)}throw e}).finally(function(){delete m.mPropertyRequestByPath[f]})};f.prototype.fetchTypes=function(){var e,t,i=this;function n(s,r){if(r&&r.$expand){Object.keys(r.$expand).forEach(function(a){var o=s;a.split("/").forEach(function(n){o+="/"+n;e.push(i.oRequestor.fetchType(t,o))});n(o,r.$expand[a])})}}if(!this.oTypePromise){e=[];t={};e.push(this.oRequestor.fetchType(t,this.sMetaPath));n(this.sMetaPath,this.mQueryOptions);this.oTypePromise=s.all(e).then(function(){return t})}return this.oTypePromise};f.prototype.getAndRemoveCollection=function(t){var i=t.split("/"),n=i.pop(),s=this.fetchValue(e.$cached,i.join("/")).getResult(),r=s[n];this.checkSharedRequest();if(r){if(!Array.isArray(r)){throw new Error(`${t} must point to a collection`)}if(!r.$transfer){return undefined}delete r.$transfer}delete s[n];return r};f.prototype.getCreatedElements=function(e){var t=this.getValue(e);return t?t.slice(0,t.$created):[]};f.prototype.getDownloadQueryOptions=function(e){return e};f.prototype.getDownloadUrl=function(e,i,n){var s=this.mQueryOptions;if(e){s=t.getQueryOptionsForPath(s,e);s=t.merge({},i,s)}s=t.merge({},s,n);return this.oRequestor.getServiceUrl()+t.buildPath(this.sResourcePath,e)+this.oRequestor.buildQueryString(t.buildPath(this.sMetaPath,t.getMetaPath(e)),this.getDownloadQueryOptions(s),false,true,!t.isEmptyObject(n))};f.prototype.getElements=function(e,t,i){const n=this.getValue(e);if(!n){return undefined}const r=n.slice(t,i).map(e=>e instanceof s?undefined:e);r.$count=n.$count;return r};f.prototype.getPendingRequestsPromise=function(){return this.oPendingRequestsPromise&&this.oPendingRequestsPromise.getResult()};f.prototype.getQueryOptions=function(){return this.mQueryOptions};f.prototype.getQueryOptions4Single=function(e){return t.clone(t.getQueryOptionsForPath(this.mQueryOptions,e))};f.prototype.getResourcePath=function(){return this.sResourcePath};f.prototype.getTypes=function(){return this.fetchTypes().getResult()};f.prototype.getValue=function(e){throw new Error("Unsupported operation")};f.prototype.hasChangeListeners=function(){return!t.isEmptyObject(this.mChangeListeners)};f.prototype.hasPendingChangesForPath=function(e,i,n){var s=this;return Object.keys(this.mChangeRequests).some(function(n){return t.hasPathPrefix(n,e)&&!(i&&s.mChangeRequests[n].every(function(e){return!e.$isKeepAlive||e.$isKeepAlive()}))})||Object.keys(this.mPostRequests).some(function(i){return n&&!i?false:t.hasPathPrefix(i,e)&&s.mPostRequests[i].some(function(e){return e["@$ui5.context.isInactive"]!==true})})};f.prototype.hasSentRequest=function(){return this.bSentRequest};f.prototype.patch=function(i,n){var s=this;this.checkSharedRequest();return this.fetchValue(e.$cached,i).then(function(e){t.updateExisting(s.mChangeListeners,i,e,n);return e})};f.prototype.refreshSingle=function(i,n,r,a,o,u,h){var c=false,l=this;this.checkSharedRequest();return this.fetchValue(e.$cached,n).then(function(e){var d=u&&n===""&&l.oRequestor.getModelInterface().fetchMetadata(l.sMetaPath+"/@com.sap.vocabularies.Common.v1.Messages/$Path").getResult(),f=l.getQueryOptions4Single(n),p;if(r>=0){a=t.getPrivateAnnotation(e[r],"predicate")}if(!a){throw new Error("No key predicate known")}p=t.buildPath(l.sResourcePath,n,a);if(o&&l.mLateExpandSelect){t.aggregateExpandSelect(f,l.mLateExpandSelect)}if(d&&f.$select&&!f.$select.includes(d)){f.$select.push(d);c=true}const g=t.extractMergeableQueryOptions(f);g.$$sortIfMerged=true;p+=l.oRequestor.buildQueryString(l.sMetaPath,f,true,l.bSortExpandSelect);l.bSentRequest=true;return s.all([l.oRequestor.request("GET",p,i,undefined,undefined,h,undefined,undefined,undefined,undefined,g),l.fetchTypes()]).then(function(t){var i=t[0];l.replaceElement(e,r,a,i,t[1],n,c);return i})})};f.prototype.refreshSingleWithRemove=function(i,n,r,a,o,u,h){var c=this;this.checkSharedRequest();return s.all([this.fetchValue(e.$cached,n),this.fetchTypes()]).then(function(e){var l=e[0],d,f,p={},g,P,m=t.clone(t.getQueryOptionsForPath(c.mQueryOptions,n)),y,$=t.buildPath(c.sResourcePath,n),v=[],R=e[1];if(r!==undefined){d=l[r];a=t.getPrivateAnnotation(d,"predicate");if(!a){throw new Error("No key predicate known")}}else{d=l.$byPredicate[a]}P=t.getKeyFilter(d,c.sMetaPath,R);f=(m.$filter?"("+m.$filter+") and ":"")+P;delete m.$count;delete m.$orderby;c.bSentRequest=true;if(o){if(c.mLateExpandSelect){t.aggregateExpandSelect(m,c.mLateExpandSelect)}p=Object.assign({},m);p.$filter=f;m.$filter=P;delete m.$search;y=$+c.oRequestor.buildQueryString(c.sMetaPath,m,false,c.bSortExpandSelect);v.push(c.oRequestor.request("GET",y,i,undefined,undefined,u));if(r!==undefined&&(P!==f||p.$search)){delete p.$select;delete p.$expand;p.$count=true;p.$top=0;g=$+c.oRequestor.buildQueryString(c.sMetaPath,p);v.push(c.oRequestor.request("GET",g,i.getUnlockedCopy()))}}else{m.$filter=f;y=$+c.oRequestor.buildQueryString(c.sMetaPath,m,false,c.bSortExpandSelect);v.push(c.oRequestor.request("GET",y,i,undefined,undefined,u))}return s.all(v).then(function(e){var i=e[0].value,s=e[1]&&e[1]["@odata.count"]==="0";if(i.length>1){throw new Error("Unexpected server response, more than one entity returned.")}else if(i.length===0){c.removeElement(r,a,l,n);c.oRequestor.getModelInterface().reportStateMessages(c.sResourcePath,{},[n+a]);h(false)}else if(s){const e=l.$byPredicate[a];t.copySelected(e,i[0]);if("@$ui5.context.isTransient"in e){i[0]["@$ui5.context.isTransient"]=false}c.removeElement(r,a,l,n);c.replaceElement(l,undefined,a,i[0],R,n);h(true)}else{c.replaceElement(l,r,a,i[0],R,n)}})})};f.prototype.registerChangeListener=function(e,i){if(!(this.bSharedRequest&&e)){t.registerChangeListener(this,e,i)}};f.prototype.removeElement=function(e,i,n=this.aElements,s=""){const r=i?n.$byPredicate[i]:n[e];if(!i){i=r&&t.getPrivateAnnotation(r,"predicate")}else if(e!==undefined){e=f.getElementIndex(n,i,e)}if(r&&!r["@$ui5.context.isDeleted"]){delete n.$byPredicate[i];delete n.$byPredicate[t.getPrivateAnnotation(r,"transientPredicate")]}if(e>=0){n.splice(e,1);t.addToCount(this.mChangeListeners,s,n,-1);if(e<n.$created){n.$created-=1;if(!s){this.iActiveElements-=1}}else if(!s){this.iLimit-=1}this.adjustIndexes(s,n,e,-1)}return e};f.prototype.removeMessages=function(){if(this.sReportedMessagesPath){this.oRequestor.getModelInterface().reportStateMessages(this.sReportedMessagesPath,{});this.sReportedMessagesPath=undefined}};f.prototype.removePendingRequest=function(){if(this.oPendingRequestsPromise){this.oPendingRequestsPromise.$count-=1;if(!this.oPendingRequestsPromise.$count){this.oPendingRequestsPromise.$resolve();this.oPendingRequestsPromise=null}}};f.prototype.replaceElement=function(e,i,n,s,r,a,o){var u,h;if(i===undefined){u=e.$byPredicate[n];e.$byPredicate[n]=s}else{i=f.getElementIndex(e,n,i);u=e[i];e[i]=e.$byPredicate[n]=s;h=t.getPrivateAnnotation(u,"transientPredicate");if(h){if("@$ui5.context.isInactive"in u){s["@$ui5.context.isInactive"]=false}s["@$ui5.context.isTransient"]=false;e.$byPredicate[h]=s;t.setPrivateAnnotation(s,"transientPredicate",h)}}if(u){t.copySelected(u,s)}t.restoreUpdatingProperties(u,s);this.visitResponse(s,r,t.getMetaPath(t.buildPath(this.sMetaPath,a)),a+n,undefined,o)};f.prototype.requestCount=function(e){var i,n,s,r=this;if(this.mQueryOptions&&this.mQueryOptions.$count){n=Object.assign({},this.mQueryOptions);delete n.$expand;delete n.$orderby;delete n.$select;i=this.getExclusiveFilter();if(i){n.$filter=n.$filter?"("+n.$filter+") and "+i:i}n.$top=0;s=this.sResourcePath+this.oRequestor.buildQueryString(this.sMetaPath,n);return this.oRequestor.request("GET",s,e.getUnlockedCopy()).catch(function(t){if(t.cause&&t.cause.status===404){return r.oRequestor.request("GET",s,e.getUnlockedCopy())}throw t}).then(function(e){var i=parseInt(e["@odata.count"])+r.iActiveElements;t.setCount(r.mChangeListeners,"",r.aElements,i);r.iLimit=i;return i})}return Promise.resolve(r.iLimit)};f.prototype.resetChangesForPath=function(e){var i=this;this.checkSharedRequest();Object.keys(this.mChangeRequests).reverse().forEach(function(n){var s,r;if(t.hasPathPrefix(n,e)){s=i.mChangeRequests[n];for(r=s.length-1;r>=0;r-=1){i.oRequestor.removeChangeRequest(s[r])}delete i.mChangeRequests[n]}});Object.keys(this.mPostRequests).forEach(function(n){var s=i.mPostRequests[n],r,a,o;if(e.startsWith("($uid=")){s.forEach(function(n){a=t.getPrivateAnnotation(n,"transientPredicate");if(a===e&&n["@$ui5.context.isInactive"]===1){t.resetInactiveEntity(i.mChangeListeners,a,n)}})}else if(d(n,e)){for(o=s.length-1;o>=0;o-=1){r=t.getPrivateAnnotation(s[o],"transient");if(r.startsWith("$inactive.")){t.resetInactiveEntity(i.mChangeListeners,t.getPrivateAnnotation(s[o],"transientPredicate"),s[o])}else{i.oRequestor.removePost(r,s[o])}}}})};f.prototype.restoreElement=function(e,i,n,s=this.aElements,r=""){this.adjustIndexes(r,s,e,1,n);const a=t.getPrivateAnnotation(i,"transientPredicate");if(a){s.$created+=1;if(!r){this.iActiveElements+=1}}else if(!r){this.iLimit+=1}t.addToCount(this.mChangeListeners,r,s,1);t.insert(s,e,i);s.$byPredicate[t.getPrivateAnnotation(i,"predicate")]=i};f.prototype.setActive=function(e){if(e){this.iActiveUsages+=1;this.iInactiveSince=Infinity}else{this.iActiveUsages-=1;if(!this.iActiveUsages){this.iInactiveSince=Date.now();this.mChangeListeners={}}}};f.prototype.setLateQueryOptions=function(e){if(e){this.mLateExpandSelect={$select:e.$select,$expand:e.$expand}}else{this.mLateExpandSelect=null}};f.prototype.setProperty=function(i,n,s,r){var a=this;this.checkSharedRequest();return this.fetchValue(e.$cached,s,null,null,true).then(function(e){t.updateAll(a.mChangeListeners,s,e,t.makeUpdateData(i.split("/"),n,r))})};f.prototype.setQueryOptions=function(e={},t=false){this.checkSharedRequest();if(this.bSentRequest&&!t){throw new Error("Cannot set query options: Cache has already sent a request")}this.mQueryOptions=e;this.sQueryString=this.oRequestor.buildQueryString(this.sMetaPath,e,false,this.bSortExpandSelect)};f.prototype.setResourcePath=function(e){this.checkSharedRequest();this.sResourcePath=e;this.sMetaPath=t.getMetaPath("/"+e);this.oTypePromise=undefined;this.mLateExpandSelect=null;this.mPropertyRequestByPath={}};f.prototype.toString=function(){return this.oRequestor.getServiceUrl()+this.sResourcePath+this.sQueryString};f.prototype.update=function(i,r,o,u,h,c,l,d,f,p,g){var P,m=r.split("/"),y,$=this;this.checkSharedRequest();try{P=this.fetchValue(e.$cached,c)}catch(e){if(!e.$cached||this.oPromise!==null){throw e}P=this.oPromise=s.resolve({"@odata.etag":"*"})}const v=P.then(function(e){var P=t.buildPath(c,r),v=i.getGroupId(),R,E,q,b=t.makeUpdateData(m,o);function S(n,r){var a={"If-Match":e},o,l,m;function A(e){if(arguments.length===0){m=true;return E}if(E){t.updateNonExisting(E,e)}}function C(){t.removeByPath($.mChangeRequests,P,o);if(y){t.updateAll($.mChangeListeners,q,$.getValue(q),{[R]:null});g?.()}else{t.updateAll($.mChangeListeners,c,e,E)}}function x(){if(y&&$.iActiveUsages){$.refreshSingleNoCollection(i,c).catch($.oRequestor.getModelInterface().getReporter())}l=$.oRequestor.lockGroup(v,$,true);f()}if(y){a["If-None-Match"]="*";d=true}if(d){a.Prefer="return=minimal"}o=$.oRequestor.request("PATCH",h,n,a,b,x,C,undefined,t.buildPath($.sOriginalResourcePath,c),r,undefined,undefined,A);o.$isKeepAlive=p;t.addByPath($.mChangeRequests,P,o);return s.all([o,$.fetchTypes()]).then(function([i,n]){t.removeByPath($.mChangeRequests,P,o);if(m){return}if(!d){$.visitResponse(i,n,t.getMetaPath(t.buildPath($.sMetaPath,c)),c)}t.updateExisting($.mChangeListeners,c,e,d?{"@odata.etag":i["@odata.etag"]}:i);if(y){t.updateAll($.mChangeListeners,c,e,{"@$ui5.context.isTransient":false});t.deletePrivateAnnotation(e,"upsert")}},function(i){var n=v;if(!u&&!i.canceled){C();throw i}t.removeByPath($.mChangeRequests,P,o);if(i.canceled){throw i}l.unlock();l=undefined;u(i);if(m){return $.mEditUrl2PatchPromise[h]}switch($.oRequestor.getGroupSubmitMode(v)){case"API":break;case"Auto":if(!$.oRequestor.hasChanges(v,e)){n="$parked."+v}break;default:throw i}$.mEditUrl2PatchPromise[h]=S($.oRequestor.lockGroup(n,$,true,true),true);return $.mEditUrl2PatchPromise[h]}).finally(function(){if(l){l.unlock()}delete $.mEditUrl2PatchPromise[h]})}function A(i){t.updateAll($.mChangeListeners,c,e,b);if(l){l=t.buildPath(m.slice(0,-1).join("/"),l);const e=l.split("/");l=t.buildPath(c,l);const s=$.getValue(l);if(s===undefined){n.debug("Missing value for unit of measure "+l+" when updating "+P,$.toString(),a)}else{t.merge(i,t.makeUpdateData(e,s))}}}y=e===null;if(y){const i=c.split("/");R=i.pop();q=i.join("/");e={"@$ui5.context.isTransient":true};t.setPrivateAnnotation(e,"upsert",true);$.getValue(q)[R]=e;t.fireChanges($.mChangeListeners,c,e,false);A(b)}else{if(!e){throw new Error("Cannot update '"+r+"': '"+c+"' does not exist")}t.deleteUpdating(r,e);let n;let s=t.getPrivateAnnotation(e,"transient");if(s){if(typeof s!=="string"){throw new Error("No 'update' allowed while waiting for server response")}if(s.startsWith("$parked.")||s.startsWith("$inactive.")){n=s;s=s.slice(s.indexOf(".")+1)}if(s!==v){throw new Error("The entity will be created via group '"+s+"'. Cannot patch via group '"+v+"'")}}E=t.makeUpdateData(m,t.drillDown(e,m));const a=t.getPrivateAnnotation(e,"postBody");if(a){t.updateAll({},c,a,b)}A(s?a:b);if(s){if(n&&!e["@$ui5.context.isInactive"]){t.setPrivateAnnotation(e,"transient",s);$.oRequestor.relocate(n,a,s)}i.unlock();return Promise.resolve()}$.oRequestor.relocateAll("$parked."+v,v,e)}h+=$.oRequestor.buildQueryString($.sMetaPath,$.mQueryOptions,true);return S(i)});if(y){g?.(v)}return v};f.prototype.visitResponse=function(e,i,n,s,r,a){var u,c=false,l={},d=this.oRequestor.getServiceUrl()+this.sResourcePath,f=this;function p(e,i,n){c=true;if(e&&e.length){f.checkSharedRequest();l[i]=e;e.forEach(function(e){e.longtextUrl&&=t.makeAbsolute(e.longtextUrl,n)})}}function g(e,i){return i?t.makeAbsolute(i,e):e}function P(e,i,n,s){var a={},o,h,c,l;for(l=0;l<e.length;l+=1){h=e[l];o=n===""?r+l:l;if(h&&typeof h==="object"){m(h,i,n,s,o);c=t.getPrivateAnnotation(h,"predicate");if(!n){u.push(c||""+o)}if(c){a[c]=h;e.$byPredicate=a}}}}function m(e,n,r,a,c){var l,d,y=i[n],$=y&&y[h]&&y[h].$Path,v;a=g(a,e["@odata.context"]);d=f.calculateKeyPredicate(e,i,n);if(c!==undefined){r=t.buildPath(r,d||c)}else if(d){l=o.exec(r);if(l){r=r.slice(0,-l[0].length)+d}}if(s&&!u){u=[r]}if($){v=t.drillDown(e,$.split("/"));if(v!==undefined){p(v,r,a)}}Object.keys(e).forEach(function(i){var s,o=n+"/"+i,u=e[i],h=t.buildPath(r,i);if(i.endsWith("@odata.mediaReadLink")||i.endsWith("@mediaReadLink")){e[i]=t.makeAbsolute(u,a)}if(i===$||i.includes("@")){return}if(Array.isArray(u)){u.$created=0;s=e[i+"@odata.count"];if(s){u.$count=parseInt(s)}else if(!e[i+"@odata.nextLink"]){u.$count=u.length}else{u.$count=undefined}P(u,o,h,g(a,e[i+"@odata.context"]))}else if(u&&typeof u==="object"){m(u,o,h,a)}})}if(r!==undefined){u=[];P(e.value,n||this.sMetaPath,"",g(d,e["@odata.context"]))}else if(e&&typeof e==="object"){m(e,n||this.sMetaPath,s||"",d)}if(c&&!this.bSharedRequest){if(!a){this.sReportedMessagesPath=this.sOriginalResourcePath}this.oRequestor.getModelInterface().reportStateMessages(this.sOriginalResourcePath,l,u)}};function p(e,t,i,n,s,r){f.call(this,e,t,i,n,s,r);this.iActiveElements=0;this.oBackup=null;this.sContext=undefined;this.aElements=[];this.aElements.$byPredicate={};this.aElements.$count=undefined;this.aElements.$created=0;this.aElements.$tail=undefined;this.iLimit=Infinity;this.aReadRequests=[];this.iResetCount=0;this.aSeparateProperties=[];this.mSeparateProperty2ReadRequests={};this.bServerDrivenPaging=false;this.oSyncPromiseAll=undefined}p.prototype=Object.create(f.prototype);p.prototype.addKeptElement=function(e){this.checkSharedRequest();this.aElements.$byPredicate[t.getPrivateAnnotation(e,"predicate")]=e};p.prototype.checkRange=function(e,t,i){var n;if(e!==this.aElements.$tail){i=Math.min(i,this.aElements.length);for(n=t;n<i;n+=1){if(this.aElements[n]!==e){throw new Error("Found data at an index being read from the back end")}}}};p.prototype.doReplaceWith=function(e,i){var n=this.aElements[e];this.checkSharedRequest();if(n&&t.hasPrivateAnnotation(n,"transientPredicate")&&!t.hasPrivateAnnotation(i,"transientPredicate")){t.setPrivateAnnotation(i,"transientPredicate",t.getPrivateAnnotation(i,"predicate"))}this.aElements[e]=i;this.addKeptElement(i)};p.prototype.drop=function(e,i,n){if(n){e+=this.aElements.$created}const s=this.aElements[e];if(s["@$ui5.context.isTransient"]){throw new Error("Must not drop a transient element")}delete this.aElements[e];delete this.aElements.$byPredicate[i];const r=t.getPrivateAnnotation(s,"transientPredicate");if(r){this.aElements.$created-=1;this.iActiveElements-=1;this.iLimit+=1;delete this.aElements.$byPredicate[r]}};p.prototype.fetchValue=function(t,i,n,r,a){var o,u=i.split("/")[0],h,c=this;t.unlock();c.registerChangeListener(i,r);if(this.aElements.$byPredicate[u]){h=s.resolve()}else if((t===e.$cached||u!=="$count")&&this.aElements[u]!==undefined){h=s.resolve(this.aElements[u])}else{if(!this.oSyncPromiseAll){o=this.aElements.$tail?this.aElements.concat(this.aElements.$tail):this.aElements;this.oSyncPromiseAll=s.all(o)}h=this.oSyncPromiseAll}return h.then(function(){return c.drillDown(c.aElements,i,t,a)})};p.prototype.fill=function(e,t,i){var n;if(!this.aElements.$count&&i>this.aElements.length&&i-t>1024){if(this.aElements.$tail&&e){throw new Error("Cannot fill from "+t+" to "+i+", $tail already in use, # of elements is "+this.aElements.length)}this.aElements.$tail=e;i=this.aElements.length}for(n=t;n<i;n+=1){this.aElements[n]=e}this.oSyncPromiseAll=undefined};p.prototype.fixDuplicatePredicate=function(e,t){};p.prototype.getExclusiveFilter=function(){var e=[],i,n,s=this;function r(n){var r;i??=s.getTypes();r=t.getKeyFilter(n,s.sMetaPath,i);if(r){e.push(r)}}for(n=0;n<this.aElements.$created;n+=1){const e=this.aElements[n];if(!e["@$ui5.context.isTransient"]){r(e)}}(this.aElements.$deleted||[]).forEach(function(e){r(s.aElements.$byPredicate[e.predicate])});return e.length?"not ("+e.sort().join(" or ")+")":undefined};p.prototype.getQueryString=function(e){var i=this.getExclusiveFilter(),n=Object.assign({},this.mQueryOptions),s=this.sQueryString,r,a;if(this.aSeparateProperties.length){if(e){delete n.$count;n.$expand={[e]:n.$expand[e]};n.$select=[];t.selectKeyProperties(n,this.getTypes()[this.sMetaPath])}else{n.$expand={...n.$expand};this.aSeparateProperties.forEach(e=>{delete n.$expand[e]});if(t.isEmptyObject(n.$expand)){delete n.$expand}}a=true;r=true}if(i){if(n.$filter){r=true}else{s+=(s?"&":"?")+"$filter="+t.encode(i,false)}n.$filter=n.$filter?"("+n.$filter+") and "+i:i}if(r){s=this.oRequestor.buildQueryString(this.sMetaPath,n,false,this.bSortExpandSelect,a)}return s};p.prototype.getResourcePathWithQuery=function(e,t,i){var n=this.aElements.$created,s=this.getQueryString(i),r=s?"&":"?",a=t-e,o=this.sResourcePath+s;if(e<n){throw new Error("Must not request created element")}e-=n;if(e>0||a<Infinity){o+=r+"$skip="+e}if(a<Infinity){o+="&$top="+a}return o};p.prototype.getValue=function(t){var i;if(!t){return this.aElements}i=this.fetchValue(e.$cached,t);if(i.isFulfilled()){return i.getResult()}i.caught()};p.prototype.handleCount=function(e,i,n,s,r,a){var o=r["@odata.count"],u=this.aElements.$created,h,c=-1,l=this.aElements.$count,d,f=r.value.length,p;s-=a;f-=a;if(o){h=parseInt(o)-a;if(a===i||n===u&&f===h){this.iLimit=c=h}else{d=this.requestCount(this.oRequestor.getUnlockedAutoCopy(e))}}if(r["@odata.nextLink"]){this.bServerDrivenPaging=true;if(s<this.aElements.length){for(p=n+f;p<s;p+=1){delete this.aElements[p]}}else{this.aElements.length=n+f}}else if(f<s-n){if(c===-1){c=l&&l-this.iActiveElements}c=Math.min(c!==undefined?c:Infinity,n-u+f);this.aElements.length=u+c;this.iLimit=c;if(!o&&c>0&&!this.aElements[c-1]){c=undefined}}if(c!==-1){t.setCount(this.mChangeListeners,"",this.aElements,c!==undefined?c+this.iActiveElements:undefined)}return d};p.prototype.handleResponse=function(e,i,n){var s,r=this.aElements,a=r.$created,o,u=0,h,c=e.value.length,l;this.sContext=e["@odata.context"];this.visitResponse(e,n,undefined,undefined,i);for(l=0;l<c;l+=1){s=e.value[l];h=t.getPrivateAnnotation(s,"predicate");if(h){o=r.$byPredicate[h];if(o){if(a&&r.lastIndexOf(o,a-1)>=0){u+=1;r[i+c-u]=undefined;continue}const e=r.indexOf(o);if(e>=0&&e!==i+l-u){const t=this.fixDuplicatePredicate(s,h);if(t){h=t;o=s}else if(e<i||e>=i+c){o=s}else{throw new Error("Duplicate key predicate: "+h)}}if(!o["@odata.etag"]||s["@odata.etag"]===o["@odata.etag"]){t.updateNonExisting(o,s);s=o}else if(this.hasPendingChangesForPath(h)){throw new Error("Modified on client and on server: "+this.sResourcePath+h)}}r.$byPredicate[h]=s}r[i+l-u]=s}return u};p.prototype.isDeletingInOtherGroup=function(e){return Object.values(this.aElements.$deleted||{}).some(function(t){return t.groupId!==e})};p.prototype.isMissing=function(e){return this.aElements[e]===undefined&&!(this.$tail&&this.aReadRequests.some(t=>t.iStart<=e&&e<t.iEnd))};p.prototype.keepOnlyGivenElements=function(e){var i,n=-1,s={},r=this;e.forEach(function(e){s[e]=true});i=this.aElements.filter(function(e,i){var a;if(!e){return false}if(t.hasPrivateAnnotation(e,"transient")){n=i;return false}a=t.getPrivateAnnotation(e,"predicate");if(s[a]){n=i;delete s[a];return true}r.drop(i,a);return false});this.aElements.length=n+1;Object.keys(s).forEach(function(e){i.push(r.aElements.$byPredicate[e])});return i};p.prototype.move=function(e,t,i){const n=this.aElements;function s(e,t){while(e<t){const i=n[e];n[e]=n[t];n[t]=i;e+=1;t-=1}}function r(e,t,i){s(e,t-1);s(t,i-1);s(e,i-1)}if(i>0){if(e<t){r(e,e+i,t+i)}else if(e>t){r(t,e,e+i)}}};p.prototype.read=function(e,i,n,a,o,u,h){var c=0,l,d,f,p=this.oPendingRequestsPromise||this.aElements.$tail,g,P=0,m,y=this;if(e<0){throw new Error("Illegal index "+e+", must be >= 0")}if(i<0){throw new Error("Illegal length "+i+", must be >= 0")}if(p){return p.then(function(){return y.read(e,i,n,a,o,u,h)})}if(u){e+=this.aElements.$created}for(m=0;m<this.aElements.$created;m+=1){l=this.aElements[m];if(t.getPrivateAnnotation(l,"transient")===a.getGroupId()){P+=1}if(y.oBackup&&!l["@$ui5.context.isTransient"]){c+=1}}g=r._getReadIntervals(this.aElements,e,i,this.bServerDrivenPaging?0:Math.max(n,P,c),this.aElements.$created+this.iLimit);if(P&&(g.length>1||g.length&&g[0].start>this.aElements.$created)){a.unlock();return this.oRequestor.waitForBatchResponseReceived(a.getGroupId()).then(function(){return y.read(e,i,n,y.oRequestor.getUnlockedAutoCopy(a),o)})}g.forEach(function(e){y.requestElements(e.start,e.end,a.getUnlockedCopy(),P,o,h);o=undefined});a.unlock();f=e+i+n;d=this.aElements.slice(Math.max(0,e-n),f);if(this.aElements.$tail){d.push(this.aElements.$tail)}return s.all(d).then(function(){var t=y.aElements.slice(e,e+i);t.$count=y.aElements.$count;return{"@$ui5.resetCount":y.iResetCount,"@odata.context":y.sContext,value:t}})};p.prototype.refreshKeptElements=function(e,i,n,s){var r=this,a=Object.keys(this.aElements.$byPredicate).filter(h).sort(),o;function u(){var e,i=t.clone(r.mQueryOptions);if(r.mLateExpandSelect){t.aggregateExpandSelect(i,r.mLateExpandSelect)}if(s){delete i.$apply}delete i.$count;delete i.$orderby;delete i.$search;e=a.map(function(e){return t.getKeyFilter(r.aElements.$byPredicate[e],r.sMetaPath,o)});i.$filter=e.join(" or ");if(e.length>1){i.$top=e.length}return r.sResourcePath+r.oRequestor.buildQueryString(r.sMetaPath,i,false,true)}function h(e){var i=r.aElements.$byPredicate[e];return t.getPrivateAnnotation(i,"predicate")===e&&Object.keys(i).length>1&&!i["@$ui5.context.isDeleted"]&&!r.hasPendingChangesForPath(e,n)}this.checkSharedRequest();if(a.length===0){return undefined}o=this.getTypes();return this.oRequestor.request("GET",u(),e).then(function(e){var n;r.visitResponse(e,o,undefined,undefined,0);n=e.value.$byPredicate||{};a.forEach(function(e){var s,a;if(e in n){t.updateAll(r.mChangeListeners,e,r.aElements.$byPredicate[e],n[e])}else{s=r.aElements.$byPredicate[e];if(t.hasPrivateAnnotation(s,"transientPredicate")){a=r.removeElement(-1,e)}else{delete r.aElements.$byPredicate[e]}i(e,a)}})})};p.prototype.refreshSingleNoCollection=function(e,i){return this.requestSideEffects(e.getUnlockedCopy(),[t.getMetaPath(i)],[i.split("/")[0]],true)};p.prototype.removeKeptElement=function(e){this.checkSharedRequest();delete this.aElements.$byPredicate[e]};p.prototype.requestElements=function(e,t,i,n,r,a){var o,u={iEnd:t,bObsolete:false,iStart:e},h=this;this.aReadRequests.push(u);this.bSentRequest=true;o=s.all([this.mQueryOptions.$filter==="false"?Promise.resolve({"@odata.count":"0",value:[]}):this.oRequestor.request("GET",this.getResourcePathWithQuery(e,t),i,undefined,undefined,r),this.fetchTypes()]).then(function(e){var t;if(u.bObsolete){const e=new Error("Request is obsolete");e.canceled=true;throw e}h.checkRange(o,u.iStart,u.iEnd);if(h.aElements.$tail===o){h.aElements.$tail=undefined}t=h.handleResponse(e[0],u.iStart,e[1]);return h.handleCount(i,n,u.iStart,u.iEnd,e[0],t)},function(e){if(!e.canceled&&!u.bObsolete){h.checkRange(o,u.iStart,u.iEnd);h.fill(undefined,u.iStart,u.iEnd)}throw e}).finally(function(){h.aReadRequests.splice(h.aReadRequests.indexOf(u),1)});this.requestSeparateProperties(e,t,o,a);this.fill(o,e,t);return o};p.prototype.requestFilteredOrderedPredicates=async function(e,i,n){this.checkSharedRequest();const s=this.getTypes();const r=e.map(e=>t.getKeyFilter(this.aElements.$byPredicate[e],this.sMetaPath,s));const a={...this.mQueryOptions};delete a.$count;a.$filter=a.$filter?`${a.$filter} and (${r.join(" or ")})`:r.join(" or ");a.$top=r.length;if(n){delete a.$expand;delete a.$orderby;a.$select=[];t.selectKeyProperties(a,s[this.sMetaPath])}const o=this.sResourcePath+this.oRequestor.buildQueryString(this.sMetaPath,a,false,true,true);const u=await this.oRequestor.request("GET",o,i);this.visitResponse(u,s,undefined,undefined,0);return u.value.map(e=>{const i=t.getPrivateAnnotation(e,"predicate");if(!n){const n=this.aElements.$byPredicate[i];t.copySelected(n,e);this.aElements.$byPredicate[i]=e;this.aElements[this.aElements.indexOf(n)]=e;t.fireChanges(this.mChangeListeners,i,n,true);t.fireChanges(this.mChangeListeners,i,e)}return i})};p.prototype.requestSeparateProperties=async function(e,i,r,o){if(!this.aSeparateProperties.length){return}const u=await this.fetchTypes();this.aSeparateProperties.forEach(async h=>{let c;let l;const d={start:e,end:i,promise:new s(function(e,t){c=e;l=function(e){const i=new Error("$$separate: canceled "+h,{cause:e});i.canceled=true;t(i)}})};d.promise.catch(()=>{});try{this.mSeparateProperty2ReadRequests[h].push(d);const s=this.getResourcePathWithQuery(e,i,h);const f=await this.oRequestor.request("GET",s,this.oRequestor.lockGroup("$single",this));let p;await r.catch(e=>{p=e});const g=this.mSeparateProperty2ReadRequests[h].indexOf(d);if(g<0){l();return}this.mSeparateProperty2ReadRequests[h].splice(g,1);if(p){l(p);return}this.visitResponse(f,u,undefined,undefined,e);for(const e of f.value){const i=t.getPrivateAnnotation(e,"predicate");const r=this.aElements.$byPredicate[i];if(r){if(r["@odata.etag"]===e["@odata.etag"]){if(r[h]?.["@odata.etag"]!==e[h]?.["@odata.etag"]){delete r[h]}t.updateSelected(this.mChangeListeners,i,r,e,[h])}else{n.error(`ETag changed: ${this.sResourcePath+i}`,s,a)}}}c();o(h,e,i)}catch(t){l(t);o(h,e,i,t)}})};p.prototype.requestSideEffects=function(e,i,n,r,a){var o,u,h,c,l,d=this.getTypes(),f=this;function p(e,n=t.getPrivateAnnotation(e,"predicate")){f.beforeUpdateSelected?.(n,e);t.updateSelected(f.mChangeListeners,n,f.aElements.$byPredicate[n],e,i,function e(s){s=s.slice(n.length+1);return!i.some(function(e){return t.getRelativePath(s,e)!==undefined})})}this.checkSharedRequest();h=t.intersectQueryOptions(Object.assign({},this.mQueryOptions,this.mLateExpandSelect),i,this.oRequestor.getModelInterface().fetchMetadata,this.sMetaPath,"",a);if(!h){return s.resolve()}this.beforeRequestSideEffects?.(h);delete h.$count;delete h.$orderby;delete h.$search;if(r){delete h.$filter}else{o=this.keepOnlyGivenElements(n);if(!o.length){return s.resolve()}h.$filter=o.map(function(e){return t.getKeyFilter(e,f.sMetaPath,d)}).sort().join(" or ");if(o.length>1){h.$top=o.length}t.selectKeyProperties(h,d[this.sMetaPath])}u=t.extractMergeableQueryOptions(h);c=this.sResourcePath+(r?n[0]:"")+this.oRequestor.buildQueryString(this.sMetaPath,h,false,true);return this.oRequestor.request("GET",c,e,undefined,undefined,undefined,undefined,this.sMetaPath,undefined,false,u,this,function(e){if(arguments.length){i=i.concat(e)}else{l=true;return i}}).then(function(e){if(l){return}if(r){f.visitResponse(e,d,undefined,n[0],undefined,true);p(e,n[0])}else{if(e.value.length!==o.length){throw new Error("Expected "+o.length+" row(s), but instead saw "+e.value.length)}f.visitResponse(e,d,undefined,"",NaN,true);for(let t=0,i=e.value.length;t<i;t+=1){p(e.value[t])}}})};p.prototype.reset=function(e,i,n,s,r){var a=this.aElements.$byPredicate,o=this.mChangeListeners,u=0,h,c,l,d=this;if(i){this.checkSharedRequest();this.oBackup={iActiveElements:this.iActiveElements,mChangeListeners:this.mChangeListeners,sContext:this.sContext,aElements:this.aElements.slice(),$byPredicate:a,$count:this.aElements.$count,$created:this.aElements.$created,iLimit:this.iLimit}}this.iResetCount+=1;if(n){this.setQueryOptions(n,true)}for(l=0;l<this.aElements.$created;l+=1){h=this.aElements[l];c=t.getPrivateAnnotation(h,"transient");if(i?"@$ui5.context.isInactive"in h||c&&c!==i:c){e.push(t.getPrivateAnnotation(h,"predicate")||t.getPrivateAnnotation(h,"transientPredicate"));this.aElements[u]=h;u+=1}else{this.iActiveElements-=1}}Object.keys(a).forEach(function(t){if("@$ui5.context.isDeleted"in a[t]){e.push(t)}});this.mChangeListeners={};this.sContext=undefined;this.aElements.length=this.aElements.$created=u;this.aElements.$byPredicate={};this.aElements.$count=undefined;this.iLimit=Infinity;Object.keys(o).forEach(function(t){if(t==="$count"||e.includes(t.split("/")[0])){d.mChangeListeners[t]=o[t]}});e.forEach(function(e){d.aElements.$byPredicate[e]=a[e]});this.aReadRequests?.forEach(e=>{e.bObsolete=true});for(const e in this.mSeparateProperty2ReadRequests){this.mSeparateProperty2ReadRequests[e]=[]}if(o[""]){this.mChangeListeners[""]=o[""];t.fireChange(this.mChangeListeners,"")}Object.values(this.aElements.$deleted||{}).forEach(function(e){e.index=undefined})};p.prototype.restore=function(e){if(e){this.checkSharedRequest();this.iActiveElements=this.oBackup.iActiveElements;this.mChangeListeners=this.oBackup.mChangeListeners;this.sContext=this.oBackup.sContext;this.aElements.length=this.oBackup.aElements.length;this.oBackup.aElements.forEach(function(e,t){this[t]=e},this.aElements);this.aElements.$byPredicate=this.oBackup.$byPredicate;this.aElements.$count=this.oBackup.$count;this.aElements.$created=this.oBackup.$created;this.iLimit=this.oBackup.iLimit;this.iResetCount-=1}this.oBackup=null};p.prototype.setEmpty=function(){if(this.iLimit!==Infinity||this.aElements.$count!==undefined||this.aElements.length){throw new Error("Unsupported")}this.iLimit=this.aElements.$count=0};p.prototype.setInactive=function(e,i){const n=this.getValue(e);t.updateAll(this.mChangeListeners,e,n,{"@$ui5.context.isInactive":i});if(!i){t.deletePrivateAnnotation(n,"initialData");this.iActiveElements+=1;t.addToCount(this.mChangeListeners,"",this.aElements,1)}};p.prototype.setPersistedCollection=function(e){this.aElements=e;this.iActiveElements=e.$created;this.iLimit=e.length};p.prototype.setSeparate=function(e=[]){this.aSeparateProperties=e;this.aSeparateProperties.forEach(e=>{this.mSeparateProperty2ReadRequests[e]=[]})};function g(e,t,i){f.call(this,e,t,i);this.oPromise=null}g.prototype=Object.create(f.prototype);g.prototype._delete=function(){throw new Error("Unsupported")};g.prototype.create=function(){throw new Error("Unsupported")};g.prototype.fetchValue=function(e,t,i,n,r){var a=this;if(r){throw new Error("Unsupported argument: bCreateOnDemand")}if(this.oPromise){e.unlock()}else{this.bSentRequest=true;this.oPromise=s.resolve(this.oRequestor.request("GET",this.sResourcePath+this.sQueryString,e,undefined,undefined,i,undefined,this.sMetaPath))}a.registerChangeListener("",n);return this.oPromise.then(function(e){return e&&typeof e==="object"?e.value:e})};g.prototype.update=function(){throw new Error("Unsupported")};function P(e,t,i,n,r,a,o,u,h){f.call(this,e,t,i,n,a,r);this.sMetaPath=u||this.sMetaPath;this.bPost=o;this.bPosting=false;if(h){this.oPromise=s.resolve({})}else{this.oPromise=null}}P.prototype=Object.create(f.prototype);P.prototype.buildOriginalResourcePath=function(e,t,i){if(i){this.calculateKeyPredicate(e,t,this.sMetaPath);this.sOriginalResourcePath=i(e)}};P.prototype.fetchValue=function(e,t,i,n,r,a){var o=this.sResourcePath+this.sQueryString,u=this;this.registerChangeListener(t,n);if(this.oPromise){e.unlock()}else{if(this.bPost){throw new Error("Cannot fetch a value before the POST request")}this.oPromise=s.all([this.oRequestor.request("GET",o,e,undefined,undefined,i,undefined,this.sMetaPath),this.fetchTypes()]).then(function(e){u.buildOriginalResourcePath(e[0],e[1],a);u.visitResponse(e[0],e[1]);return e[0]});this.bSentRequest=true}return this.oPromise.then(function(i){if(i&&i["$ui5.deleted"]){throw new Error("Cannot read a deleted entity")}return u.drillDown(i,t,e,r)})};P.prototype.getValue=function(t){var i;if(this.oPromise&&this.oPromise.isFulfilled()){i=this.drillDown(this.oPromise.getResult(),t,e.$cached);if(i.isFulfilled()){return i.getResult()}i.caught()}};P.prototype.post=function(e,i,n,r,a,o){var u,h={},c="POST",l,d=this;function f(){l=d.oRequestor.lockGroup(u,d,true)}function p(e){d.bPosting=true;return s.all([d.oRequestor.request(c,d.sResourcePath+d.sQueryString,e,h,i,n&&u!=="$single"&&f,undefined,undefined,"R#V#C"),d.fetchTypes()]).then(function(e){d.buildOriginalResourcePath(e[0],e[1],o);const i=t.getPrivateAnnotation(e[0],"headerMessages");if(i){d.oRequestor.getModelInterface().reportTransitionMessages(i,d.sResourcePath,false,d.sOriginalResourcePath);t.deletePrivateAnnotation(e[0],"headerMessages")}d.visitResponse(e[0],e[1]);if(d.mQueryOptions&&d.mQueryOptions.$select){t.updateSelected({},"",e[0],e[0],d.mQueryOptions.$select)}d.bPosting=false;if(l){l.unlock()}return e[0]},function(t){d.bPosting=false;if(l){l.unlock();l=undefined}if(a&&t.strictHandlingFailed){return a(t).then(function(i){var n;if(i){delete h["Prefer"];return p(e.getUnlockedCopy(!t.decomposed))}n=Error("Action canceled due to strict handling");n.canceled=true;throw n})}throw t})}this.checkSharedRequest();if(!this.bPost){throw new Error("POST request not allowed")}if(this.bPosting){throw new Error("Parallel POST requests not allowed")}if(n){u=e.getGroupId();this.oRequestor.relocateAll("$parked."+u,u,n)}if(i){c=i["X-HTTP-Method"]||c;delete i["X-HTTP-Method"];if(this.oRequestor.isActionBodyOptional()&&t.isEmptyObject(i)){i=undefined}}if(r&&n&&!("@odata.etag"in n)&&!t.isEmptyObject(t.publicClone(n))){r=false}if(r||n){h["If-Match"]=r?"*":n}if(a){h["Prefer"]="handling=strict"}this.bSentRequest=true;this.oPromise=p(e);return this.oPromise};P.prototype.refreshSingleNoCollection=function(e,i){return this.requestSideEffects(e.getUnlockedCopy(),[t.getMetaPath(i)])};P.prototype.requestSideEffects=function(i,n,r){var a,o,u,h,c=this;this.checkSharedRequest();o=this.oPromise&&t.intersectQueryOptions(Object.assign({},this.mQueryOptions,this.mLateExpandSelect),n,this.oRequestor.getModelInterface().fetchMetadata,this.sMetaPath);if(!o){return s.resolve()}if(this.oPromise.isRejected()){throw new Error(this+": Cannot call requestSideEffects, cache is broken: "+this.oPromise.getResult().message)}a=t.extractMergeableQueryOptions(o);r=(r||this.sResourcePath)+this.oRequestor.buildQueryString(this.sMetaPath,o,false,true);u=s.all([this.oRequestor.request("GET",r,i,undefined,undefined,undefined,undefined,this.sMetaPath,undefined,false,a,this,function(e){if(arguments.length){n=n.concat(e)}else{h=true;return n}}),this.fetchTypes(),this.fetchValue(e.$cached,"")]).then(function(e){return e}).then(function(e){var i=e[0],s=e[2];if(h){return}t.setPrivateAnnotation(i,"predicate",t.getPrivateAnnotation(s,"predicate"));c.visitResponse(i,e[1]);t.updateSelected(c.mChangeListeners,"",s,i,n,function(e){return!n.some(function(i){return t.getRelativePath(e,i)!==undefined})})});return u};P.prototype.resetProperty=function(e){var t=this.oPromise.getResult();if(t){e.split("/").some(function(e){delete t["@odata.etag"];if(typeof t[e]==="object"){t=t[e];return false}delete t[e];return true})}};function m(e,t,i){var n=t.split("/"),s=n[0],r=s+JSON.stringify(i),a;g.call(this,e,t,{});a=e.$mSingletonCacheByPath??={};this.oSingleton=a[r]??=new P(e,s,i,undefined,undefined,undefined,undefined,undefined,true);this.sRelativePath=t.split(s+"/")[1]}m.prototype=Object.create(g.prototype);m.prototype.fetchValue=function(e,i,n,s,r){var a=this.oSingleton.sResourcePath+"/"+this.sRelativePath,o,u=this.oMetadataPromise||this.oRequestor.getModelInterface().fetchMetadata("/"+t.getMetaPath(a)),h=this;return u.then(function(){if(!h.oMetadataPromise){o=h.oSingleton.mLateExpandSelect||{};t.aggregateExpandSelect(o,t.wrapChildQueryOptions("/"+h.oSingleton.sResourcePath,h.sRelativePath,{},h.oRequestor.getModelInterface().fetchMetadata));h.oSingleton.setLateQueryOptions(o)}h.oMetadataPromise=u;return h.oSingleton.fetchValue(e,h.sRelativePath,n,s,r)})};m.prototype.reset=function(){this.oSingleton.resetProperty(this.sRelativePath)};f.create=function(e,i,n,s,r,a){var o,u,h,c,l;if(a){h=i+e.buildQueryString(t.getMetaPath("/"+i),n,false,s);l=e.$mSharedCollectionCacheByPath??={};c=l[h];if(c){c.setActive(true)}else{u=Object.keys(l);o=u.length;if(o>100){u.filter(function(e){return!l[e].iActiveUsages}).sort(function(e,t){return l[e].iInactiveSince-l[t].iInactiveSince}).every(function(e){delete l[e];o-=1;return o>100})}c=l[h]=new p(e,i,n,s,r,a)}return c}return new p(e,i,n,s,r,a)};f.createProperty=function(e,t,i){if(t.includes("(")||t.endsWith("/$count")){return new g(e,t,i)}return new m(e,t,i)};f.createSingle=function(e,t,i,n,s,r,a,o){return new P(e,t,i,n,s,r,a,o)};f.from$skip=function(e,t){return c.test(e)?(t.$created||0)+Number(e):e};f.getElementIndex=function(e,i,n){var s=e[n];if(!s||t.getPrivateAnnotation(s,"predicate")!==i){n=e.indexOf(e.$byPredicate[i])}return n};return f},false);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/lib/_ConcatHelper", ["./_AggregationHelper"],function(e){"use strict";return{enhanceCache:function(t,n,s,i){var u;t.getResourcePathWithQuery=function(t,s){var a=e.buildApply(n,Object.assign({},this.mQueryOptions,{$skip:t,$top:s-t}),1,u,i);u=true;return this.sResourcePath+this.oRequestor.buildQueryString(this.sMetaPath,a,false,true)};t.handleResponse=function(e){s.forEach(function(t){var n;if(t){n=e.value.shift();if("UI5__count"in n){e["@odata.count"]=n.UI5__count}t(n)}});delete this.handleResponse;return this.handleResponse.apply(this,arguments)}}}},false);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/lib/_GroupLock", ["sap/ui/base/SyncPromise"],function(i){"use strict";function e(i,e,o,t,n,r){if(!e){throw new Error("Missing owner")}if(t&&!o){throw new Error("A modifying group lock has to be locked")}this.fnCancel=r;this.bCanceled=false;this.sGroupId=i;this.bLocked=!!o;this.bModifying=!!t;this.oOwner=e;this.oPromise=null;this.iSerialNumber=n===undefined?Infinity:n}e.prototype.cancel=function(){if(!this.bCanceled){this.bCanceled=true;if(this.fnCancel){this.fnCancel()}this.unlock(true)}};e.prototype.getGroupId=function(){return this.sGroupId};e.prototype.getOwner=function(){return this.oOwner};e.prototype.getSerialNumber=function(){return this.iSerialNumber};e.prototype.getUnlockedCopy=function(i){return new e(this.sGroupId,this.oOwner,false,false,i?NaN:this.iSerialNumber)};e.prototype.isCanceled=function(){return this.bCanceled};e.prototype.isLocked=function(){return this.bLocked};e.prototype.isModifying=function(){return this.bModifying};e.prototype.toString=function(){return"sap.ui.model.odata.v4.lib._GroupLock(group="+this.sGroupId+", owner="+this.oOwner+(this.isLocked()?", locked":"")+(this.isModifying()?", modifying":"")+(this.iSerialNumber!==Infinity?", serialNumber="+this.iSerialNumber:"")+")"};e.prototype.unlock=function(i){if(this.bLocked===undefined&&!i){throw new Error("GroupLock unlocked twice")}this.bLocked=undefined;if(this.oPromise){this.oPromise.$resolve()}};e.prototype.waitFor=function(e){var o;if(this.bLocked&&this.sGroupId===e){if(!this.oPromise){this.oPromise=new i(function(i){o=i});this.oPromise.$resolve=o}return this.oPromise}};e.$cached=new e("$cached","sap.ui.model.odata.v4.lib._GroupLock");e.$cached.unlock=function(){};return e},false);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/lib/_MetadataConverter", ["./_Helper","sap/base/Log","sap/ui/performance/Measurement"],function(e,t,o){"use strict";var s="sap.ui.model.odata.v4.lib._MetadataConverter";function r(){this.aliases={};this.oAnnotatable=null;this.entityContainer=null;this.entitySet=null;this.namespace=null;this.oOperation=null;this.reference=null;this.schema=null;this.type=null;this.result=null;this.url=null;this.xmlns=null}r.prototype.rCollection=/^Collection\((.*)\)$/;r.prototype.sEdmNamespace="http://docs.oasis-open.org/odata/ns/edm";r.prototype.sEdmxNamespace="http://docs.oasis-open.org/odata/ns/edmx";r.prototype.addToResult=function(e,o){if(e in this.result){t.warning("Duplicate qualified name "+e,undefined,s)}this.result[e]=o};r.prototype.annotatable=function(t,o,s){var r,n,a;if(typeof t==="string"){r=this.oAnnotatable;if(r){t=e.buildPath(r.path,t)}a=t;n=this.schema.$Annotations;if(n&&n[t]){t=n[t]}}this.oAnnotatable={parent:this.oAnnotatable,path:a,prefix:o||"",qualifiedName:undefined,qualifier:s,target:t}};r.prototype.convertXMLMetadata=function(e,t,s){var r;o.average("convertXMLMetadata","","sap.ui.model.odata.v4.lib._V4MetadataConverter");r=e.documentElement;if(r.localName!=="Edmx"||r.namespaceURI!==this.sRootNamespace){throw new Error(t+": expected <Edmx> in namespace '"+this.sRootNamespace+"'")}this.result={};this.url=t;this.bIgnoreAnnotations=s;this.traverse(r,this.oAliasConfig);this.traverse(r,this.oFullConfig,true);this.finalize();o.end("convertXMLMetadata");return this.result};r.prototype.getAnnotationValue=function(t,o){var s,r,n;switch(t){case"AnnotationPath":case"AnyPropertyPath":case"ModelElementPath":case"NavigationPropertyPath":case"Path":case"PropertyPath":o=this.resolveAliasInPath(o);case"Binary":case"Date":case"DateTimeOffset":case"Decimal":case"Duration":case"Guid":case"TimeOfDay":case"UrlRef":s={};s["$"+t]=o;return s;case"Bool":return o==="true";case"EnumMember":r=o.trim().replace(/ +/g," ").split(" ");for(n=0;n<r.length;n+=1){r[n]=this.resolveAliasInPath(r[n])}return{$EnumMember:r.join(" ")};case"Float":if(o==="NaN"||o==="INF"||o==="-INF"){return{$Float:o}}return parseFloat(o);case"Int":s=parseInt(o);return e.isSafeInteger(s)?s:{$Int:o};case"String":return o;default:return undefined}};r.prototype.getInlineAnnotationValue=function(e){var t,o=e.attributes,s,r;for(r=o.length-1;r>=0;r-=1){t=o.item(r);s=this.getAnnotationValue(t.name,t.value);if(s!==undefined){return s}}return true};r.prototype.getOrCreateArray=function(e,t){var o=e[t];o??=e[t]=[];return o};r.prototype.getOrCreateObject=function(e,t){var o=e[t];o??=e[t]={};return o};r.prototype.postProcessAnnotation=function(e,t){var o=this.oAnnotatable.parent;if(!this.bIgnoreAnnotations){o.target[o.qualifiedName]=t.length?t[0]:this.getInlineAnnotationValue(e)}};r.prototype.postProcessApply=function(e,t){var o=this.oAnnotatable.target;o.$Apply=t;o.$Function=this.resolveAlias(e.getAttribute("Function"));return o};r.prototype.postProcessCastOrIsOf=function(e,t){var o=e.localName,s=this.oAnnotatable.target;s["$"+o]=t[0];this.processTypedCollection(e.getAttribute("Type"),s);this.processFacetAttributes(e,s);return s};r.prototype.postProcessCollection=function(e,t){return t};r.prototype.postProcessLabeledElement=function(e,t){var o=this.oAnnotatable.target;o.$LabeledElement=t.length?t[0]:this.getInlineAnnotationValue(e);o.$Name=e.getAttribute("Name");return o};r.prototype.postProcessLabeledElementReference=function(e,t){return{$LabeledElementReference:this.resolveAlias(e.textContent)}};r.prototype.postProcessLeaf=function(e,t){return this.getAnnotationValue(e.localName,e.textContent)};r.prototype.postProcessNeg=function(e,t){var o=this.oAnnotatable.target;o.$Neg=t[0];return o};r.prototype.postProcessNot=function(e,t){var o=this.oAnnotatable.target;o.$Not=t[0];return o};r.prototype.postProcessNull=function(e,t){var o=this.oAnnotatable,s=null;if(o.qualifiedName){s=o.target;s.$Null=null}return s};r.prototype.postProcessOperation=function(e,t){var o=this.oAnnotatable.target;o["$"+e.localName]=t;return o};r.prototype.postProcessPropertyValue=function(e,t){return{property:e.getAttribute("Property"),value:t.length?t[0]:this.getInlineAnnotationValue(e)}};r.prototype.postProcessRecord=function(e,t){var o,s=this.oAnnotatable.target,r=e.getAttribute("Type"),n;if(r){s.$Type=this.resolveAlias(r)}for(n=0;n<t.length;n+=1){o=t[n];s[o.property]=o.value}return s};r.prototype.postProcessUrlRef=function(e,t){return{$UrlRef:t[0]}};r.prototype.processAlias=function(e){var t=e.getAttribute("Alias");if(t){this.aliases[t]=e.getAttribute("Namespace")+"."}};r.prototype.processAnnotatableExpression=function(e){this.annotatable({})};r.prototype.processAnnotation=function(e){var t=this.oAnnotatable,o,s=t.prefix+"@"+this.resolveAlias(e.getAttribute("Term")),r=t.qualifier||e.getAttribute("Qualifier");if(r){s+="#"+r}if(typeof t.target==="string"){o=this.getOrCreateObject(this.schema,"$Annotations");if(this.bIgnoreAnnotations){return}t.target=o[t.target]={}}t.qualifiedName=s;this.annotatable(t.target,s)};r.prototype.processAnnotations=function(e){this.annotatable(this.resolveAliasInPath(e.getAttribute("Target"),true),undefined,e.getAttribute("Qualifier"))};r.prototype.processAttributes=function(e,t,o){var s,r;for(s in o){r=o[s](e.getAttribute(s));if(r!==undefined&&r!==null){t["$"+s]=r}}};r.prototype.processInclude=function(e){var t=this.getOrCreateArray(this.reference,"$Include");t.push(e.getAttribute("Namespace")+".")};r.prototype.processIncludeAnnotations=function(e){var t=this.reference,o={$TermNamespace:e.getAttribute("TermNamespace")+"."},s=this.getOrCreateArray(t,"$IncludeAnnotations");this.processAttributes(e,o,{TargetNamespace:function e(t){return t?t+".":t},Qualifier:this.setValue});s.push(o)};r.prototype.processPropertyValue=function(e){this.annotatable(this.oAnnotatable.target,e.getAttribute("Property"))};r.prototype.processReference=function(e){var t=this.getOrCreateObject(this.result,"$Reference");this.reference=t[e.getAttribute("Uri")]={};this.annotatable(this.reference)};r.prototype.resolveAlias=function(e){var t=e?e.indexOf("."):-1,o;if(t>=0&&!e.includes(".",t+1)){o=this.aliases[e.slice(0,t)];if(o){return o+e.slice(t+1)}}return e};r.prototype.resolveAliasInParentheses=function(e,t){var o=e?t.indexOf("("):-1;if(o>=0){return this.resolveAlias(t.slice(0,o))+"("+t.slice(o+1,-1).split(",").map(this.resolveAliasInParentheses.bind(this,e)).join(",")+")"}return this.resolveAlias(t)};r.prototype.resolveAliasInPath=function(e,t){var o,s="";if(!e.includes(".")){return e}o=e.indexOf("@");if(o>=0){s="@"+this.resolveAlias(e.slice(o+1));e=e.slice(0,o)}return e.split("/").map(this.resolveAliasInParentheses.bind(this,t)).join("/")+s};r.prototype.setIfFalse=function(e){return e==="false"?false:undefined};r.prototype.setIfTrue=function(e){return e==="true"?true:undefined};r.prototype.setNumber=function(e){return e?parseInt(e):undefined};r.prototype.setValue=function(e){return e};r.prototype.traverse=function(e,t,o){var s=this.oAnnotatable,r,n=e.childNodes,a,i,p,c,l=this.xmlns,u,f=[],_=t.__xmlns||this.xmlns,h,P;if(_&&_!==e.namespaceURI){return undefined}this.xmlns=_;if(o){this.processElement(e,t.__processor)}else if(t.__processor){t.__processor.call(this,e)}for(h=0;h<n.length;h+=1){a=n.item(h);if(a.nodeType===1){c=a.localName;r=t[c];if(!r&&t.__include){p=t.__include;for(P=0;P<p.length;P+=1){r=p[P][c];if(r){break}}}if(r){i=this.traverse(a,r,o);if(i!==undefined&&t.__postProcessor){f.push(i)}}}}if(t.__postProcessor){u=t.__postProcessor.call(this,e,f)}this.oAnnotatable=s;this.xmlns=l;return u};(function(e){var t,o,s,r,n;s={AnnotationPath:{__postProcessor:e.postProcessLeaf},AnyPropertyPath:{__postProcessor:e.postProcessLeaf},Binary:{__postProcessor:e.postProcessLeaf},Bool:{__postProcessor:e.postProcessLeaf},Date:{__postProcessor:e.postProcessLeaf},DateTimeOffset:{__postProcessor:e.postProcessLeaf},Decimal:{__postProcessor:e.postProcessLeaf},Duration:{__postProcessor:e.postProcessLeaf},EnumMember:{__postProcessor:e.postProcessLeaf},Float:{__postProcessor:e.postProcessLeaf},Guid:{__postProcessor:e.postProcessLeaf},Int:{__postProcessor:e.postProcessLeaf},LabeledElementReference:{__postProcessor:e.postProcessLabeledElementReference},ModelElementPath:{__postProcessor:e.postProcessLeaf},NavigationPropertyPath:{__postProcessor:e.postProcessLeaf},Path:{__postProcessor:e.postProcessLeaf},PropertyPath:{__postProcessor:e.postProcessLeaf},String:{__postProcessor:e.postProcessLeaf},TimeOfDay:{__postProcessor:e.postProcessLeaf}};r=[s];e.oAnnotationConfig={Annotation:{__xmlns:e.sEdmNamespace,__processor:e.processAnnotation,__postProcessor:e.postProcessAnnotation,__include:r}};t=[s,e.oAnnotationConfig];n={__processor:e.processAnnotatableExpression,__postProcessor:e.postProcessOperation,__include:t};o={Add:n,And:n,Apply:{__processor:e.processAnnotatableExpression,__postProcessor:e.postProcessApply,__include:t},Cast:{__processor:e.processAnnotatableExpression,__postProcessor:e.postProcessCastOrIsOf,__include:t},Collection:{__postProcessor:e.postProcessCollection,__include:r},Div:n,DivBy:n,Eq:n,Ge:n,Gt:n,Has:n,If:n,In:n,IsOf:{__processor:e.processAnnotatableExpression,__postProcessor:e.postProcessCastOrIsOf,__include:t},LabeledElement:{__processor:e.processAnnotatableExpression,__postProcessor:e.postProcessLabeledElement,__include:t},Le:n,Lt:n,Mod:n,Mul:n,Ne:n,Neg:{__processor:e.processAnnotatableExpression,__postProcessor:e.postProcessNeg,__include:t},Not:{__processor:e.processAnnotatableExpression,__postProcessor:e.postProcessNot,__include:t},Null:{__processor:e.processAnnotatableExpression,__postProcessor:e.postProcessNull,__include:[e.oAnnotationConfig]},Or:n,Record:{__processor:e.processAnnotatableExpression,__postProcessor:e.postProcessRecord,__include:[e.oAnnotationConfig],PropertyValue:{__processor:e.processPropertyValue,__postProcessor:e.postProcessPropertyValue,__include:t}},Sub:n,UrlRef:{__postProcessor:e.postProcessUrlRef,__include:r}};e.oAnnotationsConfig={Annotations:{__processor:e.processAnnotations,__include:[e.oAnnotationConfig]}};r.push(o);t.push(o);e.oAnnotationConfig.Annotation.Annotation=e.oAnnotationConfig.Annotation;e.oReferenceInclude={Reference:{__xmlns:e.sEdmxNamespace,__processor:e.processReference,__include:[e.oAnnotationConfig],Include:{__processor:e.processInclude},IncludeAnnotations:{__processor:e.processIncludeAnnotations}}}})(r.prototype);return r},false);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/lib/_MetadataRequestor", ["./_Helper","./_V2MetadataConverter","./_V4MetadataConverter","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,a,r,jQuery){"use strict";return{create:function(n,i,s,o,d,u){var f={},c=e.buildQuery(o);return{read:function(l,p,h){var M;function g(e){var r=i==="4.0"||p?a:t,n=e.$XML,o=s&&!p;delete e.$XML;return Object.assign((new r).convertXMLMetadata(n,l,o),e)}if(l in f){if(h){throw new Error("Must not prefetch twice: "+l)}M=f[l].then(g);delete f[l]}else{M=new Promise(function(t,a){function i(){const s={method:"GET",headers:n};if(d){s.xhrFields={withCredentials:true}}jQuery.ajax(p?l:l+c,s).then(function(e,a,r){var n=r.getResponseHeader("Date"),i=r.getResponseHeader("ETag"),s={$XML:e},o=r.getResponseHeader("Last-Modified");if(n){s.$Date=n}if(i){s.$ETag=i}if(o){s.$LastModified=o}t(s)},function(t){var n=e.createError(t,"Could not load metadata");if(t.status===503&&t.getResponseHeader("Retry-After")&&u(n)){u().then(i,a)}else{r.error("GET "+l,n.message,"sap.ui.model.odata.v4.lib._MetadataRequestor");a(n)}})}const s=u();if(s){s.then(i,a)}else{i()}if(!p&&o&&"sap-context-token"in o){delete o["sap-context-token"];c=e.buildQuery(o)}});if(h){f[l]=M}else{M=M.then(g)}}return M}}}}},false);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/lib/_MinMaxHelper", ["./_Cache","./_ConcatHelper"],function(e,n){"use strict";return{createCache:function(r,t,u,a){var c={},i,o,f=new Promise(function(e){o=e});function s(e){var n,r={};function t(e){r[e]??={};return r[e]}for(n in c){t(c[n].measure)[c[n].method]=e[n]}o(r)}i=e.create(r,t,a,true);n.enhanceCache(i,u,[s],c);i.getMeasureRangePromise=function(){return f};return i}}},false);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/lib/_Requestor", ["./_Batch","./_GroupLock","./_Helper","./_V2Requestor","sap/base/Log","sap/ui/base/SyncPromise","sap/ui/core/cache/CacheManager","sap/ui/security/Security","sap/ui/thirdparty/jquery"],function(e,t,r,n,o,i,s,a,jQuery){"use strict";var u={Accept:"multipart/mixed"},c="sap.ui.model.odata.v4.optimisticBatch:",h="sap.ui.model.odata.v4.lib._Requestor",f="@com.sap.vocabularies.Common.v1.Messages",p=/(\$\w+)=~/g,d=/^\d+$/;function l(e){var t=Object.assign({},e);delete t["X-CSRF-Token"];return t}function m(e){var t;e=e.toLowerCase();for(t in this.headers){if(t.toLowerCase()===e){return this.headers[t]}}}function g(e,t,n,o,i){this.mBatchQueue={};this.bBatchSent=false;this.mHeaders=t||{};this.aLockedGroupLocks=[];this.oModelInterface=o;this.oOptimisticBatch=null;this.sQueryParams=r.buildQuery(n);this.mRunningChangeRequests={};this.iSessionTimer=0;this.iSerialNumber=0;this.sServiceUrl=e;this.vStatistics=n&&n["sap-statistics"];this.bWithCredentials=i;this.processSecurityTokenHandlers()}g.prototype.mFinalHeaders={"Content-Type":"application/json;charset=UTF-8;IEEE754Compatible=true"};g.prototype.mPredefinedPartHeaders={Accept:"application/json;odata.metadata=minimal;IEEE754Compatible=true"};g.prototype.mPredefinedRequestHeaders={Accept:"application/json;odata.metadata=minimal;IEEE754Compatible=true","OData-MaxVersion":"4.0","OData-Version":"4.0","X-CSRF-Token":"Fetch"};g.prototype.mReservedHeaders={accept:true,"accept-charset":true,"content-encoding":true,"content-id":true,"content-language":true,"content-length":true,"content-transfer-encoding":true,"content-type":true,"if-match":true,"if-none-match":true,isolation:true,"odata-isolation":true,"odata-maxversion":true,"odata-version":true,prefer:true,"sap-contextid":true};g.prototype.addChangeSet=function(e){var t=[],r=this.getOrCreateBatchQueue(e,true);t.iSerialNumber=this.getSerialNumber();r.iChangeSet+=1;r.splice(r.iChangeSet,0,t)};g.prototype.addChangeToGroup=function(e,t){var r;if(this.getGroupSubmitMode(t)==="Direct"){e.$resolve(this.request(e.method,e.url,this.lockGroup(t,this,true,true),e.headers,e.body,e.$submit,e.$cancel))}else{r=this.getOrCreateBatchQueue(t);r[r.iChangeSet].push(e)}};g.prototype.addQueryString=function(e,t,n,o){var i;n=this.convertQueryOptions(t,n,false,true);e=e.replace(p,function(e,t){var o=n[t];delete n[t];return r.encodePair(t,o)});i=r.buildQuery(n,o);if(!i){return e}return e+(e.includes("?")?"&"+i.slice(1):i)};g.prototype.batchRequestSent=function(e,t,r){var n,o;if(r){if(!(e in this.mRunningChangeRequests)){this.mRunningChangeRequests[e]=[]}n=new i(function(e){o=e});n.$resolve=o;n.$requests=t;this.mRunningChangeRequests[e].push(n)}};g.prototype.batchResponseReceived=function(e,t,r){var n;if(r){n=this.mRunningChangeRequests[e].filter(function(e){if(e.$requests===t){e.$resolve();return false}return true});if(n.length){this.mRunningChangeRequests[e]=n}else{delete this.mRunningChangeRequests[e]}}};g.prototype.buildQueryString=function(e,t,n,o,i){return r.buildQuery(this.convertQueryOptions(e,t,n,o),i)};g.prototype.cancelChanges=function(e,t){if(this.mRunningChangeRequests[e]){throw new Error("Cannot cancel the changes for group '"+e+"', the batch request is running")}this.cancelChangesByFilter(function(){return true},e,t);this.cancelGroupLocks(e)};g.prototype.cancelChangesByFilter=function(e,t,r){var n=false,o=this;function i(t){var i=o.mBatchQueue[t],s,a,u,c,h;for(h=i.length-1;h>=0;h-=1){if(Array.isArray(i[h])){a=i[h];for(c=a.length-1;c>=0;c-=1){s=a[c];if(s.$cancel&&e(s)){if(!s.$cancel(r)){u=new Error("Request canceled: "+s.method+" "+s.url+"; group: "+t);u.canceled=true;s.$reject(u);a.splice(c,1);n=true}}}}}}if(t){if(this.mBatchQueue[t]){i(t)}}else{for(t in this.mBatchQueue){i(t)}}return n};g.prototype.cancelGroupLocks=function(e){this.aLockedGroupLocks.forEach(function(t){if((!e||e===t.getGroupId())&&t.isModifying()&&t.isLocked()){t.cancel()}})};g.prototype.checkConflictingStrictRequest=function(e,t,r){function n(e){return e.filter(i).length>1}function o(e,t){return r!==t&&e.some(i)}function i(e){return e.headers.Prefer?.includes("handling=strict")}const s="Each request with strict handling must belong to its own change set due"+' to the "odata.continue-on-error" preference';const a=t.slice(0,t.iChangeSet+1);if(e===null){if(a.some(n)){throw new Error(s)}}else if(t.bContinueOnError){if(a[r].length&&(i(e)||i(a[r][0]))){throw new Error(s)}}else if(i(e)&&a.some(o)){throw new Error("All requests with strict handling must belong to the same change set")}};g.prototype.checkForOpenRequests=function(){var e=this;if(!r.isEmptyObject(this.mRunningChangeRequests)||Object.keys(this.mBatchQueue).some(function(t){return e.mBatchQueue[t].some(function(e){return Array.isArray(e)?e.length:true})})||this.aLockedGroupLocks.some(function(e){return e.isLocked()})){throw new Error("Unexpected open requests")}};g.prototype.checkHeaderNames=function(e){var t;for(t in e){if(this.mReservedHeaders[t.toLowerCase()]){throw new Error("Unsupported header: "+t)}}};g.prototype.cleanUpChangeSets=function(e){var t,n=false,o;function i(e){if(!s(e)){if(e.method==="DELETE"&&e.headers["If-Match"]&&e.headers["If-Match"]["@odata.etag"]&&t.find(function(t){return t.headers["If-Match"]===e.headers["If-Match"]})){e.headers["If-Match"]={"@odata.etag":"*"}}t.push(e)}}function s(e){if(e.method!=="PATCH"){return false}return t.some(function(t){if(t.method==="PATCH"&&t.headers["If-Match"]===e.headers["If-Match"]){r.merge(t.body,e.body);e.$resolve(t.$promise);t.$mergeRequests(e.$mergeRequests());return true}})}for(o=e.iChangeSet;o>=0;o-=1){t=[];e[o].forEach(i);if(t.length===0){e.splice(o,1)}else if(t.length===1&&this.isChangeSetOptional()){e[o]=t[0]}else{e[o]=t}n||=t.length>0}return n};g.prototype.clearSessionContext=function(e){if(e){this.oModelInterface.fireSessionTimeout()}delete this.mHeaders["SAP-ContextId"];if(this.iSessionTimer){clearInterval(this.iSessionTimer);this.iSessionTimer=0}};g.prototype.convertExpand=function(e,t){var r,n=[],o=this;if(!e||typeof e!=="object"){throw new Error("$expand must be a valid object")}r=Object.keys(e);if(t){r=r.sort()}r.forEach(function(r){var i=e[r];if(i&&typeof i==="object"){n.push(o.convertExpandOptions(r,i,t))}else{n.push(r)}});return n.join(",")};g.prototype.convertExpandOptions=function(e,t,r){var n=[];this.doConvertSystemQueryOptions(undefined,t,function(e,t){n.push(e+"="+t)},undefined,r);return n.length?e+"("+n.join(";")+")":e};g.prototype.convertQueryOptions=function(e,t,r,n){var o={};if(!t){return undefined}this.doConvertSystemQueryOptions(e,t,function(e,t){o[e]=t},r,n);return o};g.prototype.convertResourcePath=function(e){return e};g.prototype.destroy=function(){this.clearSessionContext()};g.prototype.doCheckVersionHeader=function(e,t,r){var n=e("OData-Version"),o=!n&&e("DataServiceVersion");if(o){throw new Error("Expected 'OData-Version' header with value '4.0' but received"+" 'DataServiceVersion' header with value '"+o+"' in response for "+this.sServiceUrl+t)}if(n==="4.0"||!n&&r){return}throw new Error("Expected 'OData-Version' header with value '4.0' but received value '"+n+"' in response for "+this.sServiceUrl+t)};g.prototype.doConvertResponse=function(e,t){return e};g.prototype.doConvertSystemQueryOptions=function(e,t,n,o,i){var s=this;Object.keys(t).forEach(function(e){var a=t[e];if(o&&e[0]==="$"){return}switch(e){case"$expand":if(a!=="~"){a=s.convertExpand(a,i)}break;case"$select":if(Array.isArray(a)){if(i){a=a.slice().sort();for(let e=1;e<a.length;){if(r.hasPathPrefix(a[e],a[e-1])){a.splice(e,1)}else{e+=1}}}a=a.join(",")}break;default:}n(e,a)})};g.prototype.fetchType=function(e,t){var r=this;if(t in e){return i.resolve(e[t])}return this.fetchTypeForPath(t).then(function(n){var o,s=[];if(n){o=r.getModelInterface().fetchMetadata(t+"/"+f).getResult();if(o){n=Object.create(n);n[f]=o}e[t]=n;(n.$Key||[]).forEach(function(n){if(typeof n==="object"){n=n[Object.keys(n)[0]];s.push(r.fetchType(e,t+"/"+n.slice(0,n.lastIndexOf("/"))))}});return i.all(s).then(function(){return n})}})};g.prototype.fetchTypeForPath=function(e){return this.oModelInterface.fetchMetadata(e+"/")};g.prototype.formatPropertyAsLiteral=function(e,t){return r.formatLiteral(e,t.$Type)};g.prototype.getGroupSubmitMode=function(e){return this.oModelInterface.getGroupProperty(e,"submit")};g.prototype.getModelInterface=function(){return this.oModelInterface};g.prototype.getOrCreateBatchQueue=function(e,t){var r,n=this.mBatchQueue[e];if(!n){r=[];r.iSerialNumber=0;n=this.mBatchQueue[e]=[r];n.iChangeSet=0;if(!t){this.oModelInterface.onCreateGroup(e)}}return n};g.prototype.getPathAndAddQueryOptions=function(e,t,r){var n=[],o,i={},s=this;e=e.slice(1,-5);if(t.$Parameter){t.$Parameter.forEach(function(e){i[e.$Name]=e})}if(t.$kind==="Function"){for(o in r){const e=i[o];if(e){if(e.$isCollection){throw new Error("Unsupported collection-valued parameter: "+o)}n.push(encodeURIComponent(o)+"="+encodeURIComponent(s.formatPropertyAsLiteral(r[o],e)))}}e+="("+n.join(",")+")"}else{for(o in r){if(!(o in i)){delete r[o]}}}return e};g.prototype.getSerialNumber=function(){this.iSerialNumber+=1;return this.iSerialNumber};g.prototype.getServiceUrl=function(){return this.sServiceUrl};g.prototype.getUnlockedAutoCopy=function(e){if(this.getGroupSubmitMode(e.getGroupId())!=="API"){return e.getUnlockedCopy()}return this.lockGroup("$auto",e.getOwner())};g.prototype.hasChanges=function(e,t){var r=this.mBatchQueue[e];if(r){return r.some(function(e){return Array.isArray(e)&&e.some(function(e){return e.headers["If-Match"]===t})})}return false};g.prototype.hasOnlyPatchesWithoutSideEffects=function(e){return this.getGroupSubmitMode(e)==="Auto"&&!!this.mBatchQueue[e]&&this.mBatchQueue[e].every(function(e){return Array.isArray(e)&&e.every(function(e){return e.method==="PATCH"&&e.headers.Prefer==="return=minimal"})})};g.prototype.hasPendingChanges=function(e){var t=this;function r(t){if(!e){return Object.keys(t)}return e in t?[e]:[]}return r(this.mRunningChangeRequests).length>0||this.aLockedGroupLocks.some(function(t){var r=t.getGroupId();return(e===undefined||r===e)&&t.isModifying()&&t.isLocked()&&!r.startsWith("$inactive.")})||r(this.mBatchQueue).some(function(e){return!e.startsWith("$inactive.")&&t.mBatchQueue[e].some(function(e){return Array.isArray(e)&&e.some(function(e){return e.$cancel})})})};g.prototype.isActionBodyOptional=function(){return false};g.prototype.isBatchSent=function(){return this.bBatchSent};g.prototype.isChangeSetOptional=function(){return true};g.prototype.lockGroup=function(e,r,n,o,i){var s;s=new t(e,r,n,o,this.getSerialNumber(),i);if(n){this.aLockedGroupLocks.push(s)}return s};g.prototype.mergeGetRequests=function(e){var t=[],n=this;function o(e){return e.$queryOptions&&t.some(function(t){if(t.$queryOptions&&e.url===t.url&&e.$owner===t.$owner){t.$queryOptions=r.clone(t.$queryOptions);r.aggregateExpandSelect(t.$queryOptions,e.$queryOptions);e.$resolve(t.$promise);if(t.$mergeRequests&&e.$mergeRequests){t.$mergeRequests(e.$mergeRequests())}t.$sortSystemQueryOptions||=t.$queryOptions.$$sortIfMerged||e.$queryOptions.$$sortIfMerged;return true}return false})}e.forEach(function(e){if(!o(e)){t.push(e)}});t.forEach(function(e){var t=e.$queryOptions;if(t){if(t.$expand&&t.$select?.length===0){t.$select=Object.keys(t.$expand).sort().slice(0,1)}e.url=n.addQueryString(e.url,e.$metaPath,t,e.$sortSystemQueryOptions)}});t.iChangeSet=e.iChangeSet;if(e.bContinueOnError){t.bContinueOnError=true}return t};g.prototype.processBatch=function(e){var t,n=this.mBatchQueue[e]||[],o=this;function i(e){if(Array.isArray(e)){e.forEach(i)}else if(e.$submit){e.$submit()}}function s(e,t){if(Array.isArray(t)){t.forEach(s.bind(null,e))}else{t.$reject(e)}}function a(e,t){var n;e.forEach(function(e,i){var u,c,h=t[i];if(Array.isArray(h)){a(e,h)}else if(!h){const t=new Error("HTTP request was not processed because the previous request failed");t.cause=n;t.$reported=true;s(t,e)}else if(h.status>=400){o.oModelInterface.onHttpResponse(h.headers);h.getResponseHeader=m;n=r.createError(h,"Communication error",e.url?o.sServiceUrl+e.url:undefined,e.$resourcePath);if(Array.isArray(e)){r.decomposeError(n,e,o.sServiceUrl).forEach(function(t,r){e[r].$reject(t)})}else{e.$reject(n)}}else{o.oModelInterface.onHttpResponse(h.headers);if(h.responseText){try{o.doCheckVersionHeader(m.bind(h),e.url,true);c=o.doConvertResponse(JSON.parse(h.responseText),e.$metaPath)}catch(t){e.$reject(t);return}}else{c=e.method==="GET"?null:{}}o.reportHeaderMessages(e.$resourcePath,m.call(h,"sap-messages"),c);u=m.call(h,"ETag");if(u){c["@odata.etag"]=u}e.$resolve(c)}})}i(n);delete this.mBatchQueue[e];t=this.cleanUpChangeSets(n);if(n.length===0){return Promise.resolve()}this.bBatchSent=true;n=this.mergeGetRequests(n);this.batchRequestSent(e,n,t);return this.sendBatch(n,e,t).then(function(e){a(n,e)}).catch(function(e){var t=new Error("HTTP request was not processed because $batch failed");t.cause=e;t.$reported=true;s(t,n);throw e}).finally(function(){o.batchResponseReceived(e,n,t)})};g.prototype.processOptimisticBatch=function(e,t){var r,n,i=this.oOptimisticBatch,a,u=this;if(!i){return}a=this.oModelInterface.getOptimisticBatchEnabler();n=i.key;this.oOptimisticBatch=null;if(i.result){if(g.matchesOptimisticBatch(e,t,i.firstBatch.requests,i.firstBatch.groupId)){if(a){Promise.resolve(a(n)).then(async e=>{if(!e){await s.del(c+n);o.info("optimistic batch: disabled, batch payload deleted",n,h)}}).catch(u.oModelInterface.getReporter())}o.info("optimistic batch: success, response consumed",n,h);return i.result}o.warning("optimistic batch: mismatch, response skipped",n,h);s.del(c+n).catch(this.oModelInterface.getReporter())}if(a){r=e.some(function(e){return Array.isArray(e)||e.method!=="GET"});if(r){o.warning("optimistic batch: modifying batch not supported",n,h);return}Promise.resolve(a(n)).then(function(r){if(r){return s.set(c+n,{groupId:t,requests:e.map(function(e){return{headers:l(e.headers),method:"GET",url:e.url}})}).then(function(){o.info("optimistic batch: enabled, batch payload saved",n,h)})}o.info("optimistic batch: disabled",n,h)}).catch(u.oModelInterface.getReporter())}};g.prototype.processSecurityTokenHandlers=function(){var e=this;this.oSecurityTokenPromise=null;a.getSecurityTokenHandlers().some(function(t){var r=t(e.sServiceUrl);if(r!==undefined){e.oSecurityTokenPromise=r.then(function(t){e.checkHeaderNames(t);Object.assign(e.mHeaders,{"X-CSRF-Token":undefined},t);e.oSecurityTokenPromise=null}).catch(function(e){o.error("An error occurred within security token handler: "+t,e,h);throw e});return true}})};g.prototype.ready=function(){return i.resolve()};g.prototype.refreshSecurityToken=function(e){var t=this;if(!this.oSecurityTokenPromise){if(e!==this.mHeaders["X-CSRF-Token"]){return Promise.resolve()}this.oSecurityTokenPromise=new Promise(function(n,o){const i={method:"HEAD",headers:Object.assign({},t.mHeaders,{"X-CSRF-Token":"Fetch"})};if(t.bWithCredentials){i.xhrFields={withCredentials:true}}jQuery.ajax(t.sServiceUrl+t.sQueryParams,i).then(function(e,o,i){var s=i.getResponseHeader("X-CSRF-Token");if(s){t.mHeaders["X-CSRF-Token"]=s}else{delete t.mHeaders["X-CSRF-Token"]}t.oSecurityTokenPromise=null;t.oModelInterface.onHttpResponse(r.parseRawHeaders(i.getAllResponseHeaders()));n()},function(i){t.oSecurityTokenPromise=null;if(!e||i.status===503&&i.getResponseHeader("Retry-After")){n()}else{o(r.createError(i,"Could not refresh security token"))}})})}return this.oSecurityTokenPromise};g.prototype.relocate=function(e,t,r){var n=this.mBatchQueue[e],o=this,i=n&&n[0].some(function(e,i){if(e.body===t){o.addChangeToGroup(e,r);n[0].splice(i,1);return true}});if(!i){throw new Error("Request not found in group '"+e+"'")}};g.prototype.relocateAll=function(e,t,r){var n=0,o=this.mBatchQueue[e],i=this;if(o){o[0].slice().forEach(function(e){if(!r||e.headers["If-Match"]===r){i.addChangeToGroup(e,t);o[0].splice(n,1)}else{n+=1}})}};g.prototype.removeChangeRequest=function(e){var t=this.cancelChangesByFilter(function(t){return t.$promise===e});if(!t){throw new Error("Cannot reset the changes, the batch request is running")}};g.prototype.removePost=function(e,t){var n=r.getPrivateAnnotation(t,"postBody"),o=this.cancelChangesByFilter(function(e){return e.body===n},e);if(!o){throw new Error("Cannot reset the changes, the batch request is running")}};g.prototype.reportHeaderMessages=function(e,t,n){if(t){const o=JSON.parse(t);if(e==="R#V#C"){r.setPrivateAnnotation(n,"headerMessages",o)}else{this.oModelInterface.reportTransitionMessages(o,e)}}};g.prototype.request=function(e,t,r,n,o,i,s,a,u,c,h,f,p){var d,l,m=r&&r.getGroupId()||"$direct",g,y=Infinity,S,v=this;if(m==="$cached"){l=new Error("Unexpected request: "+e+" "+t);l.$cached=true;throw l}if(r&&r.isCanceled()){if(s){s()}l=new Error("Request already canceled");l.canceled=true;return Promise.reject(l)}if(r){r.unlock();y=r.getSerialNumber()}t=this.convertResourcePath(t);u??=t;if(this.getGroupSubmitMode(m)!=="Direct"){if(m==="$single"&&this.mBatchQueue[m]){throw new Error("Cannot add new request to already existing $single queue")}g=new Promise(function(r,l){var g=v.getOrCreateBatchQueue(m);S={method:e,url:t,headers:Object.assign({},v.mPredefinedPartHeaders,v.mHeaders,n,v.mFinalHeaders),body:o,$cancel:s,$mergeRequests:p,$metaPath:a,$owner:f,$queryOptions:h,$reject:l,$resolve:r,$resourcePath:u,$submit:i};if(e==="GET"){g.push(S)}else if(c){g[0].unshift(S)}else{if(!y&&g[g.iChangeSet].length){v.addChangeSet(m)}d=g.iChangeSet;while(g[d].iSerialNumber>y){d-=1}v.checkConflictingStrictRequest(S,g,d);g[d].push(S);if(!y){v.addChangeSet(m)}}if(m==="$single"){v.submitBatch("$single").catch(v.oModelInterface.getReporter())}});S.$promise=g;return g}if(this.vStatistics!==undefined){h=Object.assign({"sap-statistics":this.vStatistics},h)}if(h){t=v.addQueryString(t,a,h)}if(i){i()}return this.sendRequest(e,t,Object.assign({},n,this.mFinalHeaders,e==="GET"?{"sap-cancel-on-close":"true"}:undefined),JSON.stringify(o),u==="R#V#C"?t:u).then(function(e){const t=v.doConvertResponse(typeof e.body==="string"?JSON.parse(e.body):e.body,a);v.reportHeaderMessages(u,e.messages,t);return t})};g.prototype.sendBatch=function(t,r,n){var o=e.serializeBatchRequest(t,this.getGroupSubmitMode(r)==="Auto"?"Group ID: "+r:"Group ID (API): "+r,this.oModelInterface.isIgnoreETag());return this.processOptimisticBatch(t,r)||this.sendRequest("POST","$batch"+this.sQueryParams,Object.assign(o.headers,u,n?undefined:{"sap-cancel-on-close":"true"},t.bContinueOnError?{Prefer:"odata.continue-on-error"}:undefined),o.body).then(function(t){if(t.messages!==null){throw new Error("Unexpected 'sap-messages' response header for batch request")}return e.deserializeBatchResponse(t.contentType,t.body)})};g.prototype.sendOptimisticBatch=function(){var e=window.location.href,t=this;s.get(c+e).then(function(r){var n={key:e};if(r){if(t.isBatchSent()){o.error("optimistic batch: #sendBatch called before optimistic batch "+"payload could be read",undefined,h);return}n.firstBatch=r;n.result=t.sendBatch(r.requests,r.groupId);o.info("optimistic batch: sent ",e,h)}t.oOptimisticBatch=n}).catch(this.oModelInterface.getReporter())};g.prototype.sendRequest=function(e,t,n,i,s){var a=this.sServiceUrl+t,u=this;return new Promise(function(c,f){function p(d){const l={contentType:n&&n["Content-Type"],data:i,headers:Object.assign({},u.mPredefinedRequestHeaders,u.mHeaders,r.resolveIfMatchHeader(n,u.oModelInterface.isIgnoreETag())),method:e};var m=u.mHeaders["X-CSRF-Token"];if(u.bWithCredentials){l.xhrFields={withCredentials:true}}jQuery.ajax(a,l).then(function(n,o,i){var s=i.getResponseHeader("ETag"),a=i.getResponseHeader("X-CSRF-Token");u.oModelInterface.onHttpResponse(r.parseRawHeaders(i.getAllResponseHeaders()));try{u.doCheckVersionHeader(i.getResponseHeader,t,!n)}catch(e){f(e);return}if(a){u.mHeaders["X-CSRF-Token"]=a}u.setSessionContext(i.getResponseHeader("SAP-ContextId"),i.getResponseHeader("SAP-Http-Session-Timeout"));n||=e==="GET"?null:{};if(s&&typeof n==="object"){n["@odata.etag"]=s}c({body:n,contentType:i.getResponseHeader("Content-Type"),messages:i.getResponseHeader("sap-messages"),resourcePath:t})},function(e){var t=e.getResponseHeader("SAP-ContextId"),n=e.getResponseHeader("X-CSRF-Token"),i;if(!d&&e.status===403&&n&&n.toLowerCase()==="required"){u.refreshSecurityToken(m).then(function(){p(true)},f)}else if(e.status===503&&e.getResponseHeader("Retry-After")&&u.oModelInterface.getOrCreateRetryAfterPromise(r.createError(e,""))){u.oModelInterface.getOrCreateRetryAfterPromise().then(p,f)}else{i="Communication error";if(t){u.setSessionContext(t,e.getResponseHeader("SAP-Http-Session-Timeout"))}else if(u.mHeaders["SAP-ContextId"]){i="Session not found on server";o.error(i,undefined,h);u.clearSessionContext(true)}f(r.createError(e,i,a,s))}})}const d=u.oModelInterface.getOrCreateRetryAfterPromise();if(d){d.then(p,f)}else if(u.oSecurityTokenPromise&&e!=="GET"){u.oSecurityTokenPromise.then(p)}else{p()}})};g.prototype.setContinueOnError=function(e){const t=this.getOrCreateBatchQueue(e);this.checkConflictingStrictRequest(null,t);t.bContinueOnError=true};g.prototype.setSessionContext=function(e,t){var r=d.test(t)?parseInt(t):0,n=Date.now()+30*60*1e3,i=this;this.clearSessionContext();if(e){this.mHeaders["SAP-ContextId"]=e;if(r>=60){this.iSessionTimer=setInterval(function(){if(Date.now()>=n){i.clearSessionContext(true);return}const e={method:"HEAD",headers:{"SAP-ContextId":i.mHeaders["SAP-ContextId"]}};if(i.bWithCredentials){e.xhrFields={withCredentials:true}}jQuery.ajax(i.sServiceUrl+i.sQueryParams,e).fail(function(e){if(e.getResponseHeader("SAP-Err-Id")==="ICMENOSESSION"){o.error("Session not found on server",undefined,h);i.clearSessionContext(true)}})},(r-5)*1e3)}else if(t!==null){o.warning("Unsupported SAP-Http-Session-Timeout header",t,h)}}};g.prototype.submitBatch=function(e){var t,r,n=this;r=i.all(this.aLockedGroupLocks.map(function(t){return t.waitFor(e)}));t=r.isPending();if(t){o.info("submitBatch('"+e+"') is waiting for locks",null,h)}return r.then(function(){if(n.hasOnlyPatchesWithoutSideEffects(e)){t=true;o.info("submitBatch('"+e+"') is waiting for potential side effect requests",null,h);return new Promise(function(e){setTimeout(function(){e()},0)})}}).then(function(){if(t){o.info("submitBatch('"+e+"') continues",null,h)}n.aLockedGroupLocks=n.aLockedGroupLocks.filter(function(e){return e.isLocked()});return n.processBatch(e)})};g.prototype.waitForBatchResponseReceived=function(e){return i.resolve(this.mBatchQueue[e][0][0].$promise)};g.prototype.waitForRunningChangeRequests=function(e){var t=this.mRunningChangeRequests[e];if(t){return t.length>1?i.all(t):t[0]}return i.resolve()};g.matchesOptimisticBatch=function(e,t,n,o){return t===o&&e.length===n.length&&e.every(function(e,t){return e.url===n[t].url&&r.deepEqual(l(e.headers),n[t].headers)})};g.create=function(e,t,r,o,i,s){var a=new g(e,r,o,t,s);if(i==="2.0"){n(a)}return a};return g},false);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/lib/_TreeState", ["./_Helper"],function(e){"use strict";class t{mPredicate2ExpandInfo={};mPredicate2OutOfPlace={};constructor(e,t){this.fnGetKeyFilter=t;this.sNodeProperty=e}collapse(t,i,a){if(!this.sNodeProperty){return}const r=e.getPrivateAnnotation(t,"predicate");const n=this.mPredicate2ExpandInfo[r];if(a||n&&n.levels!==0){delete this.mPredicate2ExpandInfo[r]}else{this.mPredicate2ExpandInfo[r]={collapseAll:i,filter:this.fnGetKeyFilter(t),levels:0,nodeId:e.drillDown(t,this.sNodeProperty)}}}delete(t){if(!this.sNodeProperty){return}const i=e.getPrivateAnnotation(t,"predicate");delete this.mPredicate2ExpandInfo[i];this.deleteOutOfPlace(i);e.getPrivateAnnotation(t,"spliced",[]).forEach(e=>{this.delete(e)})}deleteExpandInfo(t){delete this.mPredicate2ExpandInfo[e.getPrivateAnnotation(t,"predicate")];e.getPrivateAnnotation(t,"spliced",[]).forEach(e=>{this.deleteExpandInfo(e)})}deleteOutOfPlace(e,t){if(!this.isOutOfPlace(e)){return}if(t){for(;;){const t=this.mPredicate2OutOfPlace[e].parentPredicate;if(!this.isOutOfPlace(t)){break}e=t}}this.mPredicate2OutOfPlace[e].context.setOutOfPlace(false);delete this.mPredicate2OutOfPlace[e];Object.values(this.mPredicate2OutOfPlace).forEach(t=>{if(t.parentPredicate===e){this.deleteOutOfPlace(t.nodePredicate)}})}expand(t,i=1){if(!this.sNodeProperty){return}if(i>=Number.MAX_SAFE_INTEGER){i=null;this.deleteExpandInfo(t)}const a=e.getPrivateAnnotation(t,"predicate");const r=this.mPredicate2ExpandInfo[a];if(r&&!r.levels&&!r.collapseAll){delete this.mPredicate2ExpandInfo[a]}else{this.mPredicate2ExpandInfo[a]={filter:this.fnGetKeyFilter(t),levels:i,nodeId:e.drillDown(t,this.sNodeProperty)}}}getExpandFilters(e){return Object.keys(this.mPredicate2ExpandInfo).filter(e).map(e=>this.mPredicate2ExpandInfo[e].filter)}getExpandLevels(){const e=Object.values(this.mPredicate2ExpandInfo);return e.length?JSON.stringify(e.map(e=>({NodeID:e.nodeId,Levels:e.levels}))):undefined}getOutOfPlace(e){return this.mPredicate2OutOfPlace[e]}getOutOfPlaceCount(){return this.getOutOfPlacePredicates().length}getOutOfPlaceGroupedByParent(){const e={};for(const t of Object.values(this.mPredicate2OutOfPlace)){const i=t.parentPredicate;const a=e[i]??={nodeFilters:[],nodePredicates:[],parentFilter:t.parentFilter,parentPredicate:i};a.nodeFilters.push(t.nodeFilter);a.nodePredicates.push(t.nodePredicate)}return Object.values(e)}getOutOfPlacePredicates(){return Object.keys(this.mPredicate2OutOfPlace)}isOutOfPlace(e){return e in this.mPredicate2OutOfPlace}reset(){this.mPredicate2ExpandInfo={};this.resetOutOfPlace()}resetOutOfPlace(){this.getOutOfPlacePredicates().forEach(e=>this.deleteOutOfPlace(e))}setOutOfPlace(t,i){if(t["@$ui5.context.isTransient"]!==false){throw new Error("Not 'created persisted'")}const a={context:e.getPrivateAnnotation(t,"context"),nodeFilter:this.fnGetKeyFilter(t),nodePredicate:e.getPrivateAnnotation(t,"predicate")};a.context.setOutOfPlace(true);if(i){a.parentFilter=this.fnGetKeyFilter(i);a.parentPredicate=e.getPrivateAnnotation(i,"predicate")}this.mPredicate2OutOfPlace[a.nodePredicate]=a}stillOutOfPlace(t,i){t["@$ui5.context.isTransient"]=false;e.setPrivateAnnotation(t,"context",this.mPredicate2OutOfPlace[i].context)}}return t});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/lib/_V2MetadataConverter", ["./_Helper","./_MetadataConverter","sap/base/Log"],function(t,e,a){"use strict";var o="sap.ui.model.odata.v4.lib._V2MetadataConverter",n=/^(?:DELETE|GET|MERGE|PATCH|POST|PUT)$/,i="http://schemas.microsoft.com/ado/2007/06/edmx",r="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata",s="http://www.sap.com/Protocols/SAPData",p={creatable:{property:"Insertable",term:"@Org.OData.Capabilities.V1.InsertRestrictions"},deletable:{property:"Deletable",term:"@Org.OData.Capabilities.V1.DeleteRestrictions"},"deletable-path":{property:"Deletable",term:"@Org.OData.Capabilities.V1.DeleteRestrictions"},"field-control":{term:"@com.sap.vocabularies.Common.v1.FieldControl"},heading:{term:"@com.sap.vocabularies.Common.v1.Heading"},label:{term:"@com.sap.vocabularies.Common.v1.Label"},precision:{term:"@Org.OData.Measures.V1.Scale"},quickinfo:{term:"@com.sap.vocabularies.Common.v1.QuickInfo"},"requires-filter":{property:"RequiresFilter",term:"@Org.OData.Capabilities.V1.FilterRestrictions"},searchable:{property:"Searchable",term:"@Org.OData.Capabilities.V1.SearchRestrictions"},text:{term:"@com.sap.vocabularies.Common.v1.Text"},topable:{term:"@Org.OData.Capabilities.V1.TopSupported"},updatable:{property:"Updatable",term:"@Org.OData.Capabilities.V1.UpdateRestrictions"},"updatable-path":{property:"Updatable",term:"@Org.OData.Capabilities.V1.UpdateRestrictions"}},c={bday:{TermName:"Contact"},city:{Path:"adr",TermName:"Contact",V4Attribute:"locality"},country:{Path:"adr",TermName:"Contact"},email:{Path:"address",TermName:"Contact",V4Attribute:"uri",typeMapping:{home:"home",pref:"preferred",work:"work"},v4EnumType:"com.sap.vocabularies.Communication.v1.ContactInformationType",v4PropertyAnnotation:"@com.sap.vocabularies.Communication.v1.IsEmailAddress"},familyname:{Path:"n",TermName:"Contact",V4Attribute:"surname"},givenname:{Path:"n",TermName:"Contact",V4Attribute:"given"},honorific:{Path:"n",TermName:"Contact",V4Attribute:"prefix"},middlename:{Path:"n",TermName:"Contact",V4Attribute:"additional"},name:{TermName:"Contact",V4Attribute:"fn"},nickname:{TermName:"Contact"},note:{TermName:"Contact"},org:{TermName:"Contact"},"org-role":{TermName:"Contact",V4Attribute:"role"},"org-unit":{TermName:"Contact",V4Attribute:"orgunit"},photo:{TermName:"Contact"},pobox:{Path:"adr",TermName:"Contact"},region:{Path:"adr",TermName:"Contact"},street:{Path:"adr",TermName:"Contact"},suffix:{Path:"n",TermName:"Contact"},tel:{Path:"tel",TermName:"Contact",V4Attribute:"uri",typeMapping:{cell:"cell",fax:"fax",home:"home",pref:"preferred",video:"video",voice:"voice",work:"work"},v4EnumType:"com.sap.vocabularies.Communication.v1.PhoneType",v4PropertyAnnotation:"@com.sap.vocabularies.Communication.v1.IsPhoneNumber"},title:{TermName:"Contact"},zip:{Path:"adr",TermName:"Contact",V4Attribute:"code"},class:{TermName:"Event"},dtend:{TermName:"Event"},dtstart:{TermName:"Event"},duration:{TermName:"Event"},fbtype:{TermName:"Event"},location:{TermName:"Event"},status:{TermName:"Event"},transp:{TermName:"Event"},wholeday:{TermName:"Event"},body:{TermName:"Message"},from:{TermName:"Message"},received:{TermName:"Message"},sender:{TermName:"Message"},subject:{TermName:"Message"},completed:{TermName:"Task"},due:{TermName:"Task"},"percent-complete":{TermName:"Task",V4Attribute:"percentcomplete"},priority:{TermName:"Task"}},l={fiscalyear:"@com.sap.vocabularies.Common.v1.IsFiscalYear",fiscalyearperiod:"@com.sap.vocabularies.Common.v1.IsFiscalYearPeriod",year:"@com.sap.vocabularies.Common.v1.IsCalendarYear",yearmonth:"@com.sap.vocabularies.Common.v1.IsCalendarYearMonth",yearmonthday:"@com.sap.vocabularies.Common.v1.IsCalendarDate",yearquarter:"@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter",yearweek:"@com.sap.vocabularies.Common.v1.IsCalendarYearWeek",url:"@Org.OData.Core.V1.IsURL"};function m(e,a){var o=e.oAnnotatable;if(o){a=t.buildPath(o.sPath,a)}this.oConverter=e;this.sPath=a;this.oParent=o;this.mSapAttributes=e.mSapAttributes;this.mAnnotationsForTarget=null}m.prototype.annotate=function(t,e){this.getTarget()[t]=e};m.prototype.consume=function(t){return this.oConverter.consumeSapAnnotation(t)};m.prototype.convert=function(t,e){var a,o;if(e===undefined||e===""){return}o=p[t];if(o.property){a=this.getOrCreateAnnotationRecord(o.term);a[o.property]=e}else{this.annotate(o.term,e)}};m.prototype.getOrCreateAnnotationRecord=function(t){return this.oConverter.getOrCreateObject(this.getTarget(),t)};m.prototype.getTarget=function(){if(!this.mAnnotationsForTarget){this.mAnnotationsForTarget=this.oConverter.convertedV2Annotations[this.sPath]={}}return this.mAnnotationsForTarget};m.prototype.peek=function(t){return this.oConverter.mSapAnnotations[t]};function u(){this.association=null;this.associations={};this.associationSet=null;this.associationSets=[];this.aBoundOperations=[];this.constraintRole=null;this.convertedV2Annotations={};this.defaultEntityContainer=null;this.mEntityContainersOfSchema={};this.mEntityType2EntitySetAnnotation={};this.mProperty2Semantics={};this.sPropertyName=null;this.navigationProperties=[];this.mSapAnnotations={};this.sTypeName=null;this.mProperty2Unit={};e.call(this)}u.prototype=Object.create(e.prototype);u.prototype.collectSapAnnotations=function(t){var e,a=t.attributes,o,n;this.mSapAnnotations={};for(o=0,n=a.length;o<n;o+=1){e=a.item(o);if(e.namespaceURI===s&&e.localName!=="content-version"){this.mSapAnnotations[e.localName]=e.value}}};u.prototype.consumeSapAnnotation=function(t){var e=this.mSapAnnotations[t];delete this.mSapAnnotations[t];return e};u.prototype.convertEntitySetAnnotation=function(t,e){var n,i;switch(e){case"creatable":case"deletable":case"updatable":if(t.peek(e)==="false"){t.convert(e,false)}break;case"deletable-path":case"updatable-path":n=e.slice(0,9);i=t.consume(e);if(t.peek(n)){t.convert(e,false);a.warning("Inconsistent metadata in '"+this.url+"'","Use either 'sap:"+n+"' or 'sap:"+n+"-path'"+" at entity set '"+t.sPath+"'",o)}else{t.convert(e,{$Path:i})}break;case"label":this.convertLabel(t);break;case"pageable":i=t.consume(e);if(i==="false"){t.annotate("@Org.OData.Capabilities.V1.SkipSupported",false);t.annotate("@Org.OData.Capabilities.V1.TopSupported",false)}break;case"requires-filter":i=t.consume(e);if(i==="true"){t.convert(e,true)}break;case"topable":i=t.consume(e);if(i==="false"){t.convert(e,false)}break;default:}};u.prototype.convertLabel=function(t){t.convert("label",t.consume("label"))};u.prototype.convertPropertyAnnotation=function(t,e){var a;switch(e){case"heading":case"label":case"quickinfo":t.convert(e,t.consume(e));break;case"field-control":case"precision":case"text":t.convert(e,{$Path:t.consume(e)});break;case"aggregation-role":a=t.consume(e);if(a==="dimension"){t.annotate("@com.sap.vocabularies.Analytics.v1.Dimension",true)}else if(a==="measure"){t.annotate("@com.sap.vocabularies.Analytics.v1.Measure",true)}break;case"display-format":a=t.consume(e);if(a==="NonNegative"){t.annotate("@com.sap.vocabularies.Common.v1.IsDigitSequence",true)}else if(a==="UpperCase"){t.annotate("@com.sap.vocabularies.Common.v1.IsUpperCase",true)}break;case"semantics":this.convertPropertySemanticsAnnotation(t);break;case"unit":this.mProperty2Unit[t.sPath]=t.consume("unit");break;case"visible":a=t.consume(e);if(a==="false"){t.annotate("@com.sap.vocabularies.UI.v1.Hidden",true);t.annotate("@com.sap.vocabularies.Common.v1.FieldControl",{$EnumMember:"com.sap.vocabularies.Common.v1.FieldControlType/Hidden"})}break;default:}};u.prototype.convertPropertySemanticsAnnotation=function(t){var e,n,i,r,s,p=t.peek("semantics").split(";"),m=p[0],u=c[m];if(m==="unit-of-measure"||m==="currency-code"){this.mProperty2Semantics[t.sPath]=t.consume("semantics")}else if(l[m]){t.annotate(l[m],true);t.consume("semantics")}else if(u){i={$Path:this.sPropertyName};e=t.oParent.getOrCreateAnnotationRecord("@com.sap.vocabularies.Communication.v1."+u.TermName);if(u.Path){s=this.getOrCreateObject(e,u.Path);s[u.V4Attribute||m]=i;if(u.v4PropertyAnnotation){t.annotate(u.v4PropertyAnnotation,true);if(p[1]){r=[];n=p[1].split("=")[1];n.split(",").forEach(function(t){var e=u.typeMapping[t];if(e){r.push(u.v4EnumType+"/"+e)}else{a.warning("Unsupported semantic type: "+t,undefined,o)}});if(r.length){s.type={EnumMember:r.join(" ")}}}e[u.Path]=[s]}else{e[u.Path]=s}}else{e[u.V4Attribute||m]=i}t.consume("semantics")}};u.prototype.finalize=function(){this.result.$Version="4.0";this.setDefaultEntityContainer();this.updateNavigationPropertiesAndCreateBindings();this.processBoundOperations();this.processUnitConversion()};u.prototype.mergeAnnotations=function(t,e){var a;for(a in t){if(a in e){e[a]=Object.assign(t[a],e[a])}else{e[a]=t[a]}}};u.prototype.postProcessSchema=function(e,a){var o,n,i,r,s,p;for(i in this.mEntityContainersOfSchema){n=this.mEntityContainersOfSchema[i];for(s in n){r=n[s];if(r.$kind!=="EntitySet"){continue}p=i+"/"+s;o=t.merge(this.convertedV2Annotations[p]||{},this.mEntityType2EntitySetAnnotation[r.$Type]);if(!t.isEmptyObject(o)){this.convertedV2Annotations[p]=o}}}if(this.bIgnoreAnnotations){if(!t.isEmptyObject(this.convertedV2Annotations)){this.schema.$Annotations={}}}else if(this.schema.$Annotations){this.mergeAnnotations(this.convertedV2Annotations,this.schema.$Annotations)}else if(!t.isEmptyObject(this.convertedV2Annotations)){this.schema.$Annotations=this.convertedV2Annotations}this.convertedV2Annotations={};this.mEntityContainersOfSchema={}};u.prototype.processAssociation=function(t){var e=this.namespace+t.getAttribute("Name");this.associations[e]=this.association={referentialConstraint:null,roles:{}}};u.prototype.processAssociationEnd=function(t){var e=t.getAttribute("Role");this.association.roles[e]={multiplicity:t.getAttribute("Multiplicity"),propertyName:undefined,typeName:this.resolveAlias(t.getAttribute("Type"))}};u.prototype.processAssociationSet=function(t){var e={associationName:this.resolveAlias(t.getAttribute("Association")),ends:[],entityContainer:this.entityContainer};this.associationSet=e;this.associationSets.push(e);this.consumeSapAnnotation("creatable");this.consumeSapAnnotation("deletable");this.consumeSapAnnotation("updatable")};u.prototype.processAssociationSetEnd=function(t){this.associationSet.ends.push({entitySetName:t.getAttribute("EntitySet"),roleName:t.getAttribute("Role")})};u.prototype.processBoundOperations=function(){var t=this;this.aBoundOperations.forEach(function(e){var a=t.result[e.$Parameter[0].$Type];a.$Key.forEach(function(t){e.$Parameter.some(function(a,o){if(a.$Name===t){e.$Parameter.splice(o,1);return true}})})})};u.prototype.processComplexType=function(t){this.processType(t,{$kind:"ComplexType"})};u.prototype.processDataServices=function(t){if(t.getAttributeNS(r,"DataServiceVersion")!=="2.0"){throw new Error(this.url+': expected DataServiceVersion="2.0": '+h(t))}};u.prototype.processDependent=function(t){var e=this.association.referentialConstraint;this.constraintRole=e.dependent={roleName:t.getAttribute("Role")}};u.prototype.processElement=function(t,e){this.collectSapAnnotations(t);if(e){e.call(this,t)}this.warnUnsupportedSapAnnotations(t)};u.prototype.processEntityContainer=function(t){var e=this.namespace+t.getAttribute("Name");this.mEntityContainersOfSchema[e]=this.entityContainer={$kind:"EntityContainer"};this.addToResult(e,this.entityContainer);if(t.getAttributeNS(r,"IsDefaultEntityContainer")==="true"){this.defaultEntityContainer=e}this.v2annotatable(e)};u.prototype.processEntitySet=function(t){var e,a=t.getAttribute("Name");this.entityContainer[a]=this.entitySet={$kind:"EntitySet",$Type:this.resolveAlias(t.getAttribute("EntityType"))};e=this.v2annotatable(a,this.convertEntitySetAnnotation);e.consume("creatable");e.consume("deletable");e.consume("updatable");if(e.consume("searchable")!=="true"){e.convert("searchable",false)}};u.prototype.processEntityType=function(t){var e={$kind:"EntityType"},a=this;this.processType(t,e);this.processAttributes(t,e,{Abstract:this.setIfTrue,BaseType:function(t){return t?a.resolveAlias(t):undefined}});this.convertLabel(this.oAnnotatable)};u.prototype.processEntityTypeKeyPropertyRef=function(t){var e=t.getAttribute("Name");this.getOrCreateArray(this.type,"$Key").push(e)};u.prototype.processFacetAttributes=function(t,e){var a=this;this.processAttributes(t,e,{DefaultValue:this.setValue,MaxLength:function(t){return t==="Max"?undefined:a.setNumber(t)},Nullable:this.setIfFalse,Precision:this.setNumber,Scale:this.setNumber,Unicode:this.setIfFalse});if(t.getAttribute("FixedLength")==="false"){e.$Scale="variable"}};u.prototype.processFunctionImport=function(t){var e,i=t.getAttributeNS(r,"HttpMethod"),s=i!=="GET"?"Action":"Function",c,l=t.getAttribute("Name"),m={$kind:s},u={$kind:s+"Import"},h=this.namespace+l,y=t.getAttribute("ReturnType"),f;u["$"+s]=h;this.processAttributes(t,u,{EntitySet:this.setValue});if(y){m.$ReturnType=f={};this.processTypedCollection(y,f)}if(!n.test(i)){a.warning("Unsupported HttpMethod at FunctionImport '"+l+"', removing this FunctionImport",undefined,o);this.consumeSapAnnotation("action-for");this.consumeSapAnnotation("applicable-path")}else{if(i!=="GET"&&i!=="POST"){m.$v2HttpMethod=i}this.addToResult(h,[m]);e=this.consumeSapAnnotation("action-for");if(e){m.$IsBound=true;m.$Parameter=[{$Name:null,$Nullable:false,$Type:this.resolveAlias(e)}];this.aBoundOperations.push(m);this.consumeSapAnnotation("applicable-path");c=this.consumeSapAnnotation("label");if(c){m[p["label"].term]=c}}else{this.entityContainer[l]=u;this.v2annotatable(l);this.convertLabel(this.oAnnotatable)}}this.oOperation=m};u.prototype.processParameter=function(t){var e,a=this.oOperation,o={$Name:t.getAttribute("Name")};this.processFacetAttributes(t,o);this.processTypedCollection(t.getAttribute("Type"),o);this.getOrCreateArray(a,"$Parameter").push(o);e=this.consumeSapAnnotation("label");if(e){o[p["label"].term]=e}};u.prototype.processPrincipal=function(t){var e=this.association.referentialConstraint;this.constraintRole=e.principal={roleName:t.getAttribute("Role")}};u.prototype.processReferentialConstraint=function(t){this.association.referentialConstraint={}};u.prototype.processReferentialConstraintPropertyRef=function(t){this.constraintRole.propertyRef=t.getAttribute("Name")};u.prototype.processSchema=function(t){var e=this.consumeSapAnnotation("schema-version");this.namespace=t.getAttribute("Namespace")+".";this.schema={$kind:"Schema"};this.addToResult(this.namespace,this.schema);if(e){this.schema["@Org.Odata.Core.V1.SchemaVersion"]=e}};u.prototype.processType=function(t,e){var a=this.namespace+t.getAttribute("Name");this.sTypeName=a;this.type=e;this.addToResult(a,e);this.v2annotatable(a)};u.prototype.processTypedCollection=function(t,e){var a=this.rCollection.exec(t);if(a){e.$isCollection=true;t=a[1]}if(!t.includes(".")){t="Edm."+t}switch(t){case"Edm.DateTime":e.$v2Type=t;if(this.mSapAnnotations["display-format"]==="Date"){t="Edm.Date";delete e.$Precision}else{t="Edm.DateTimeOffset"}break;case"Edm.Float":e.$v2Type=t;t="Edm.Single";break;case"Edm.Time":e.$v2Type=t;t="Edm.TimeOfDay";break;default:t=this.resolveAlias(t)}e.$Type=t};u.prototype.processTypeNavigationProperty=function(t){var e=this.consumeSapAnnotation("creatable"),n=this.consumeSapAnnotation("creatable-path"),i=this.consumeSapAnnotation("filterable"),r,s,p=t.getAttribute("Name"),c,l={$kind:"NavigationProperty"},m=this;function u(t,e,a){s=m.getOrCreateObject(m.mEntityType2EntitySetAnnotation,m.sTypeName);s=m.getOrCreateObject(s,t);s=m.getOrCreateArray(s,e);s.push(a)}this.type[p]=l;this.navigationProperties.push({associationName:this.resolveAlias(t.getAttribute("Relationship")),fromRoleName:t.getAttribute("FromRole"),property:l,propertyName:p,toRoleName:t.getAttribute("ToRole")});this.v2annotatable(p);if(e){c={$NavigationPropertyPath:p};if(n){a.warning("Inconsistent metadata in '"+this.url+"'","Use either 'sap:creatable' or 'sap:creatable-path' at navigation property '"+this.oAnnotatable.sPath+"'",o)}else if(e==="true"){c=null}}else if(n){c={$If:[{$Not:{$Path:n}},{$NavigationPropertyPath:p}]}}if(c){u("@Org.OData.Capabilities.V1.InsertRestrictions","NonInsertableNavigationProperties",c)}if(i==="false"){r={NavigationProperty:{$NavigationPropertyPath:p},FilterRestrictions:{Filterable:false}};u("@Org.OData.Capabilities.V1.NavigationRestrictions","RestrictedProperties",r)}};u.prototype.processTypeProperty=function(t){var e,n,i,r,s=t.getAttribute("Name"),p={$kind:"Property"},c=this;function l(t,n,i){if(c.type.$kind==="EntityType"){r=c.getOrCreateObject(c.mEntityType2EntitySetAnnotation,c.sTypeName);r=c.getOrCreateObject(r,t);r=c.getOrCreateArray(r,n);r.push({$PropertyPath:s})}else{a.warning("Unsupported SAP annotation at a complex type in '"+c.url+"'","sap:"+i+" at property '"+e.sPath+"'",o)}}this.sPropertyName=s;this.type[s]=p;this.processFacetAttributes(t,p);this.processTypedCollection(t.getAttribute("Type"),p);e=this.v2annotatable(s,this.convertPropertyAnnotation);if(e.consume("updatable")==="false"){if(e.consume("creatable")==="false"){e.annotate("@Org.OData.Core.V1.Computed",true)}else{e.annotate("@Org.OData.Core.V1.Immutable",true)}}if(e.consume("filterable")==="false"){l("@Org.OData.Capabilities.V1.FilterRestrictions","NonFilterableProperties","filterable")}i=e.consume("filter-restriction");if(i){switch(i){case"interval":n="SingleInterval";break;case"multi-value":n="MultiValue";break;case"single-value":n="SingleValue";break;default:a.warning("Inconsistent metadata in '"+this.url+"'",'Unsupported sap:filter-restriction="'+i+"\" at property '"+e.sPath+"'",o)}if(n){if(this.type.$kind==="EntityType"){r=this.getOrCreateObject(this.mEntityType2EntitySetAnnotation,this.sTypeName);r=this.getOrCreateArray(r,"@com.sap.vocabularies.Common.v1.FilterExpressionRestrictions");r.push({AllowedExpressions:{EnumMember:"com.sap.vocabularies.Common.v1.FilterExpressionType/"+n},Property:{$PropertyPath:s}})}else{a.warning("Unsupported SAP annotation at a complex type in '"+this.url+"'","sap:filter-restriction at property '"+e.sPath+"'",o)}}}if(e.consume("required-in-filter")==="true"){l("@Org.OData.Capabilities.V1.FilterRestrictions","RequiredProperties","required-in-filter")}if(e.consume("sortable")==="false"){l("@Org.OData.Capabilities.V1.SortRestrictions","NonSortableProperties","sortable")}};u.prototype.processUnitConversion=function(){var e=this;Object.keys(this.mProperty2Unit).forEach(function(n){var i,r,s=n.split("/")[0],p,c=e.mProperty2Unit[n],l=c.split("/"),m,u,h,y=l.length;for(h=0;h<y;h+=1){r=e.result[s];m=r[l[h]];if(!m){a.warning("Path '"+c+"' for sap:unit cannot be resolved",n,o);return}if(h<y-1){s=m.$Type}}u=e.mProperty2Semantics[s+"/"+l[y-1]];if(!u){a.warning("Unsupported sap:semantics at sap:unit='"+c+"'; expected 'currency-code' or 'unit-of-measure'",n,o);return}p=u==="currency-code"?"ISOCurrency":"Unit";p="@Org.OData.Measures.V1."+p;i=e.getOrCreateObject(e.result[t.namespace(n)+"."],"$Annotations");if(e.bIgnoreAnnotations){return}i=e.getOrCreateObject(i,n);if(!(p in i)){i[p]={$Path:c}}})};function h(t){var e,a=t.attributes,o="<"+t.nodeName,n,i;for(n=0,i=a.length;n<i;n+=1){e=a.item(n);o+=" "+e.name+'="'+e.value+'"'}return o+(t.childNodes.length?">":"/>")}u.prototype.setDefaultEntityContainer=function(){var t=this.defaultEntityContainer,e,a=this.result;if(t){a.$EntityContainer=t}else{e=Object.keys(a).filter(function(t){return a[t].$kind==="EntityContainer"});if(e.length===1){a.$EntityContainer=e[0]}}};u.prototype.updateNavigationPropertiesAndCreateBindings=function(){var t=this;this.navigationProperties.forEach(function(e){var a=t.associations[e.associationName],o=a.referentialConstraint,n=e.property,i=a.roles[e.toRoleName];n.$Type=i.typeName;i.propertyName=e.propertyName;if(i.multiplicity==="1"){n.$Nullable=false}if(i.multiplicity==="*"){n.$isCollection=true}if(o&&o.principal.roleName===e.toRoleName){n.$ReferentialConstraint={};n.$ReferentialConstraint[o.dependent.propertyRef]=o.principal.propertyRef}});this.associationSets.forEach(function(e){var a=t.associations[e.associationName],o=e.entityContainer;function n(t,e){var n=o[t.entitySetName],i=a.roles[e.roleName];if(i.propertyName){n.$NavigationPropertyBinding??={};n.$NavigationPropertyBinding[i.propertyName]=e.entitySetName}}n(e.ends[0],e.ends[1]);n(e.ends[1],e.ends[0])})};u.prototype.v2annotatable=function(t,e){var a=new m(this,t);this.oAnnotatable=a;if(e){e=e.bind(this);Object.keys(this.mSapAnnotations).forEach(function(t){e(a,t)})}return a};u.prototype.warnUnsupportedSapAnnotations=function(t){Object.keys(this.mSapAnnotations).forEach(function(e){a.warning("Unsupported annotation 'sap:"+e+"'",h(t),o)})};(function(t){var a;t.sRootNamespace=i;t.oAliasConfig={Reference:{__xmlns:e.sEdmxNamespace,Include:{__processor:t.processAlias}},DataServices:{Schema:{__processor:t.processAlias}}};a={NavigationProperty:{__processor:t.processTypeNavigationProperty},Property:{__processor:t.processTypeProperty}};t.oFullConfig={__include:[t.oReferenceInclude],DataServices:{__processor:t.processDataServices,Schema:{__postProcessor:t.postProcessSchema,__processor:t.processSchema,__include:[t.oAnnotationsConfig],Association:{__processor:t.processAssociation,End:{__processor:t.processAssociationEnd},ReferentialConstraint:{__processor:t.processReferentialConstraint,Dependent:{__processor:t.processDependent,PropertyRef:{__processor:t.processReferentialConstraintPropertyRef}},Principal:{__processor:t.processPrincipal,PropertyRef:{__processor:t.processReferentialConstraintPropertyRef}}}},ComplexType:{__processor:t.processComplexType,__include:[a]},EntityContainer:{__processor:t.processEntityContainer,AssociationSet:{__processor:t.processAssociationSet,End:{__processor:t.processAssociationSetEnd}},EntitySet:{__processor:t.processEntitySet},FunctionImport:{__processor:t.processFunctionImport,Parameter:{__processor:t.processParameter}}},EntityType:{__processor:t.processEntityType,__include:[a],Key:{PropertyRef:{__processor:t.processEntityTypeKeyPropertyRef}}}}}}})(u.prototype);return u},false);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/lib/_V2Requestor", ["./_Helper","./_Parser","sap/base/i18n/date/CalendarType","sap/ui/core/format/DateFormat","sap/ui/model/odata/ODataUtils"],function(e,t,r,a,n){"use strict";var i=/^\/Date\((-?\d+)\)\/$/,o,s=/^\/Date\((-?\d+)(?:([-+])(\d\d)(\d\d))?\)\/$/,c,u={},f=/\+/g,d=/^([^(]+)(\(.+\))$/,l=/\//g,p=/^PT(?:(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)(\.\d+)?S)?)$/i,m;const y={};y.mFinalHeaders={"Content-Type":"application/json;charset=UTF-8"};y.mPredefinedPartHeaders={Accept:"application/json"};y.mPredefinedRequestHeaders={Accept:"application/json",MaxDataServiceVersion:"2.0",DataServiceVersion:"2.0","X-CSRF-Token":"Fetch"};y.mReservedHeaders={accept:true,"content-id":true,"content-transfer-encoding":true,"content-type":true,dataserviceversion:true,"if-match":true,"if-none-match":true,maxdataserviceversion:true,"sap-contextid":true,"x-http-method":true};y.convertBinary=function(e){return e.replace(f,"-").replace(l,"_")};y.convertDate=function(e){var t,r=i.exec(e);if(!r){throw new Error("Not a valid Edm.DateTime value '"+e+"'")}t=new Date(parseInt(r[1]));if(Number(r[1]%(24*60*60*1e3))!==0){throw new Error("Cannot convert Edm.DateTime value '"+e+"' to Edm.Date because it contains a time of day")}return o.format(t)};y.convertDateTimeOffset=function(e,t){var n=s.exec(e),i,o,c,f,d="yyyy-MM-dd'T'HH:mm:ss",l=t.$Precision,p;if(!n){throw new Error("Not a valid Edm.DateTimeOffset value '"+e+"'")}p=parseInt(n[1]);o=parseInt(n[3]);c=parseInt(n[4]);if(!n[2]||o===0&&c===0){i="Z"}else{f=n[2]==="-"?-1:1;p+=f*(o*60*60*1e3+c*60*1e3);i=n[2]+n[3]+":"+n[4]}if(l>0){d+="."+"".padEnd(l,"S")}u[d]??=a.getDateTimeInstance({calendarType:r.Gregorian,pattern:d,UTC:true});return u[d].format(new Date(p))+i};y.convertDoubleSingle=function(e){switch(e){case"NaN":case"INF":case"-INF":return e;default:return parseFloat(e)}};y.convertFilter=function(r,a){var n=t.parseFilter(r),i=this;function o(t,r){var a,n=c(r);if(n.$Type!=="Edm.String"){a=e.parseLiteral(t.value,n.$Type,n.path);t.value=i.formatPropertyAsLiteral(a,n)}}function s(e,t){throw new Error("Cannot convert filter to V2, "+t+" at "+e.at+": "+r)}function c(e){var t;if(e.type){return{$Type:e.type}}if(e.id==="PATH"){t=i.oModelInterface.fetchMetadata(a+"/"+e.value).getResult();if(!t){throw new Error("Invalid filter path: "+e.value)}return{path:e.value,$Type:t.$Type,$v2Type:t.$v2Type}}return c(e.parameters[0])}function u(e){if(e){if(e.id==="VALUE"&&e.ambiguous){s(e,"ambiguous type for the literal")}u(e.left);u(e.right);if(e.parameters){if(e.value==="contains"){e.value="substringof";e.parameters.push(e.parameters.shift())}e.parameters.forEach(u)}if(e.left&&e.right){if(e.left.id==="VALUE"){if(e.right.id==="VALUE"){s(e,"saw literals on both sides of '"+e.id+"'")}o(e.left,e.right)}else if(e.right.id==="VALUE"){o(e.right,e.left)}}}}u(n);return t.buildFilterString(n)};y.convertKeyPredicate=function(r,a){var n=this.fetchTypeForPath(e.getMetaPath(a)).getResult(),i=t.parseKeyPredicate(decodeURIComponent(r)),o=this;function s(t,r){var i=n[t];if(i.$Type!=="Edm.String"){r=o.formatPropertyAsLiteral(e.parseLiteral(r,i.$Type,a),i)}return encodeURIComponent(r)}if(""in i){return"("+s(n.$Key[0],i[""])+")"}return"("+n.$Key.map(function(e){return encodeURIComponent(e)+"="+s(e,i[e])}).join(",")+")"};y.convertNonPrimitive=function(e){var t,r,a,n,i=this;if(Array.isArray(e.results)){e.results.forEach(function(e){i.convertNonPrimitive(e)});return e.results}if(!e.__metadata||!e.__metadata.type){throw new Error("Cannot convert structured value without type information in "+"__metadata.type: "+JSON.stringify(e))}a=e.__metadata.type;r=i.getTypeForName(a);delete e.__metadata;for(t in e){n=e[t];if(n===null){continue}if(typeof n==="object"){if(n.__deferred){delete e[t]}else{e[t]=this.convertNonPrimitive(n)}continue}e[t]=this.convertPrimitive(n,r[t],a,t)}return e};y.convertPrimitive=function(e,t,r,a){switch(t&&t.$Type){case"Edm.Binary":return this.convertBinary(e);case"Edm.Date":return this.convertDate(e);case"Edm.DateTimeOffset":return this.convertDateTimeOffset(e,t);case"Edm.Boolean":case"Edm.Byte":case"Edm.Decimal":case"Edm.Guid":case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":case"Edm.SByte":case"Edm.String":return e;case"Edm.Double":case"Edm.Single":return this.convertDoubleSingle(e);case"Edm.TimeOfDay":return this.convertTimeOfDay(e);default:throw new Error("Type '"+(t&&t.$Type)+"' of property '"+a+"' in type '"+r+"' is unknown; cannot convert value: "+e)}};y.convertResourcePath=function(e){var t=e.indexOf("?"),r="",a,n=-1,i=this;if(t>0){r=e.slice(t);e=e.slice(0,t)}a=e.split("/");return a.map(function(t){var r=d.exec(t);n+=t.length+1;if(r){t=r[1]+i.convertKeyPredicate(r[2],"/"+e.slice(0,n))}return t}).join("/")+r};y.convertTimeOfDay=function(e){var t,r=p.exec(e),a;if(!r){throw new Error("Not a valid Edm.Time value '"+e+"'")}a=Date.UTC(1970,0,1,r[1]||0,r[2]||0,r[3]||0);t=new Date(a);return m.format(t)+(r[4]||"")};y.doCheckVersionHeader=function(e,t,r){var a=e("DataServiceVersion"),n=!a&&e("OData-Version");if(n){throw new Error("Expected 'DataServiceVersion' header with value '1.0' or '2.0' but "+"received 'OData-Version' header with value '"+n+"' in response for "+this.sServiceUrl+t)}if(!a){return}a=a.split(";")[0];if(a==="1.0"||a==="2.0"){return}throw new Error("Expected 'DataServiceVersion' header with value '1.0' or '2.0' but "+"received value '"+a+"' in response for "+this.sServiceUrl+t)};y.doConvertResponse=function(e,t){var r,a,n,i,o,s=this;e=e.d;a=Array.isArray(e.results);if(!a&&!e.__metadata){n=Object.keys(e);r=e[n[0]];if(n.length===1){if(r===null){return{value:null}}else if(typeof r!=="object"){return{value:this.convertPrimitive(r,this.oModelInterface.fetchMetadata(t).getResult(),t,n[0])}}else if(r.__metadata){e=r}}}if(a&&!e.results.length){i=[]}else if(a&&!e.results[0].__metadata){o=this.oModelInterface.fetchMetadata(t).getResult();i=e.results.map(function(e){return s.convertPrimitive(e,o,t,"")})}else{i=this.convertNonPrimitive(e)}if(a){i={value:i};if(e.__count){i["@odata.count"]=e.__count}if(e.__next){i["@odata.nextLink"]=e.__next}}return i};y.doConvertSystemQueryOptions=function(t,r,a,n,i){var o,s={},c=this;function u(t,r){if(!Array.isArray(t)){t=t.split(",")}t.forEach(function(t){var a=t.indexOf("/");if(a>=0&&!t.includes(".")){t=t.slice(0,a)}s[e.buildPath(r,t)]=true})}function f(t,r,a){if(!r||typeof r!=="object"){throw new Error("$expand must be a valid object")}Object.keys(r).forEach(function(n){var i=e.buildPath(a,n),o=r[n];t.push(i);if(typeof o==="object"){Object.keys(o).forEach(function(e){switch(e){case"$expand":f(t,o.$expand,i);break;case"$select":u(o.$select,i);break;default:throw new Error("Unsupported query option in $expand: "+e)}})}if(!o.$select){s[i+"/*"]=true}});return t}Object.keys(r).forEach(function(e){var o=e[0]==="$",s=r[e];if(n&&o){return}switch(e){case"$count":e="$inlinecount";s=s?"allpages":"none";break;case"$expand":s=f([],s,"");s=(i?s.sort():s).join(",");break;case"$orderby":case"$search":break;case"$select":u(s);return;case"$filter":s=c.convertFilter(s,t);break;default:if(o){throw new Error("Unsupported system query option: "+e)}}a(e,s)});o=Object.keys(s);if(o.length){if(!r.$select){o.push("*")}a("$select",(i?o.sort():o).join(","))}};y.formatPropertyAsLiteral=function(e,t){function r(e,r){var a=e.parse(r);if(!a){throw new Error("Not a valid "+t.$Type+" value: "+r)}return a}if(e===null){return"null"}switch(t.$Type){case"Edm.Boolean":case"Edm.Byte":case"Edm.Decimal":case"Edm.Double":case"Edm.Guid":case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":case"Edm.SByte":case"Edm.Single":case"Edm.String":break;case"Edm.Date":e=r(o,e);break;case"Edm.DateTimeOffset":e=r(c,e);break;case"Edm.TimeOfDay":e={__edmType:"Edm.Time",ms:r(m,e).getTime()};break;default:throw new Error("Type '"+t.$Type+"' in the key predicate is not supported")}return n.formatValue(e,t.$v2Type||t.$Type)};y.getPathAndAddQueryOptions=function(e,t,r,a,n){var i,o,s=this;e=e.slice(1,-5);if(t.$IsBound){e=e.slice(e.lastIndexOf(".")+1);if(typeof n==="function"){n=n()}o=this.getTypeForName(t.$Parameter[0].$Type);o.$Key.forEach(function(e){a[e]=s.formatPropertyAsLiteral(n[e],o[e])})}if(t.$Parameter){t.$Parameter.forEach(function(e){i=e.$Name;if(i in r){if(e.$isCollection){throw new Error("Unsupported collection-valued parameter: "+i)}a[i]=s.formatPropertyAsLiteral(r[i],e);delete r[i]}})}for(i in r){delete r[i]}if(t.$v2HttpMethod){r["X-HTTP-Method"]=t.$v2HttpMethod}return e};y.getTypeForName=function(e){this.mTypesByName??={};this.mTypesByName[e]??=this.oModelInterface.fetchMetadata("/"+e).getResult();return this.mTypesByName[e]};y.isActionBodyOptional=function(){return true};y.isChangeSetOptional=function(){return false};y.ready=function(){return this.oModelInterface.fetchEntityContainer().then(function(){})};function h(e){Object.assign(e,y);e.oModelInterface.reportStateMessages=function(){};e.oModelInterface.reportTransitionMessages=function(){}}h._setDateTimeFormatter=function(){o=a.getDateInstance({calendarType:r.Gregorian,pattern:"yyyy-MM-dd",UTC:true});c=a.getDateTimeInstance({calendarType:r.Gregorian,pattern:"yyyy-MM-dd'T'HH:mm:ss.SSSZ"});m=a.getTimeInstance({calendarType:r.Gregorian,pattern:"HH:mm:ss",UTC:true})};h._setDateTimeFormatter();return h},false);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/lib/_V4MetadataConverter", ["./_Helper","./_MetadataConverter"],function(t,e){"use strict";function o(){this.enumType=null;this.enumTypeMemberCounter=0;this.navigationProperty=null;e.call(this)}o.prototype=Object.create(e.prototype);o.prototype.finalize=function(){if(this.result.$Version!=="4.0"){throw new Error(this.url+": Unsupported OData version "+this.result.$Version)}};o.prototype.processActionOrFunction=function(t){var e=t.localName,o={$kind:e},s,i,n=this.namespace+t.getAttribute("Name"),r="",a=this;function p(t){var e={};a.processTypedCollection(t.getAttribute("Type"),e);return e.$isCollection?"Collection("+e.$Type+")":e.$Type}this.processAttributes(t,o,{IsBound:this.setIfTrue,EntitySetPath:this.setValue,IsComposable:this.setIfTrue});s=this.getOrCreateArray(this.result,n);if(!Array.isArray(s)){s=[];this.addToResult(n,s)}s.push(o);this.oOperation=o;if(o.$IsBound){i=t.getElementsByTagName("Parameter");r=t.localName==="Action"?p(i[0]):Array.prototype.map.call(i,p).join(",")}this.annotatable(n+"("+r+")")};o.prototype.processComplexType=function(t){this.processType(t,{$kind:"ComplexType"})};o.prototype.processEdmx=function(t){this.processAttributes(t,this.result,{Version:this.setValue})};o.prototype.processElement=function(t,e){if(e){e.call(this,t)}};o.prototype.processEntityContainer=function(t){var e=this.namespace+t.getAttribute("Name");this.entityContainer={$kind:"EntityContainer"};this.addToResult(e,this.entityContainer);this.addToResult("$EntityContainer",e);this.annotatable(e)};o.prototype.processEntitySet=function(t){var e=t.getAttribute("Name");this.entityContainer[e]=this.entitySet={$kind:"EntitySet",$Type:this.resolveAlias(t.getAttribute("EntityType"))};this.processAttributes(t,this.entitySet,{IncludeInServiceDocument:this.setIfFalse});this.annotatable(e)};o.prototype.processEntityType=function(t){this.processType(t,{$kind:"EntityType"})};o.prototype.processEntityTypeKeyPropertyRef=function(t){var e=t.getAttribute("Alias"),o,s=t.getAttribute("Name");if(e){o={};o[e]=s}else{o=s}this.getOrCreateArray(this.type,"$Key").push(o)};o.prototype.processEnumType=function(t){var e=this.namespace+t.getAttribute("Name"),o={$kind:"EnumType"};this.processAttributes(t,o,{IsFlags:this.setIfTrue,UnderlyingType:function(t){return t!=="Edm.Int32"?t:undefined}});this.enumType=o;this.addToResult(e,o);this.enumTypeMemberCounter=0;this.annotatable(e)};o.prototype.processEnumTypeMember=function(e){var o=e.getAttribute("Name"),s=e.getAttribute("Value"),i;if(s){i=parseInt(s);if(!t.isSafeInteger(i)){i=s}}else{i=this.enumTypeMemberCounter;this.enumTypeMemberCounter+=1}this.enumType[o]=i;this.annotatable(o)};o.prototype.processFacetAttributes=function(t,e){var o=this;this.processAttributes(t,e,{MaxLength:function(t){return t==="max"?undefined:o.setNumber(t)},Precision:this.setNumber,Scale:function(t){return t==="variable"?t:o.setNumber(t)},SRID:this.setValue,Unicode:this.setIfFalse})};o.prototype.processImport=function(t){var e=t.localName,o={$kind:e},s=t.getAttribute("Name"),i=this;e=e.replace("Import","");o["$"+e]=this.resolveAlias(t.getAttribute(e));this.processAttributes(t,o,{EntitySet:function(t){return i.resolveTargetPath(t)},IncludeInServiceDocument:this.setIfTrue});this.entityContainer[s]=o;this.annotatable(s)};o.prototype.processNavigationPropertyBinding=function(t){var e=this.getOrCreateObject(this.entitySet,"$NavigationPropertyBinding");e[t.getAttribute("Path")]=this.resolveTargetPath(t.getAttribute("Target"))};o.prototype.processParameter=function(t){var e=this.oOperation,o={};this.processTypedCollection(t.getAttribute("Type"),o);this.processAttributes(t,o,{Name:this.setValue,Nullable:this.setIfFalse});this.processFacetAttributes(t,o);this.getOrCreateArray(e,"$Parameter").push(o);this.annotatable(o.$Name)};o.prototype.processReturnType=function(t){var e=this.oOperation,o={};this.processTypedCollection(t.getAttribute("Type"),o);this.processAttributes(t,o,{Nullable:this.setIfFalse});this.processFacetAttributes(t,o);e.$ReturnType=o;this.annotatable("$ReturnType")};o.prototype.processSchema=function(t){this.namespace=t.getAttribute("Namespace")+".";this.schema={$kind:"Schema"};this.addToResult(this.namespace,this.schema);this.annotatable(this.schema)};o.prototype.processSingleton=function(t){var e=t.getAttribute("Name");this.entityContainer[e]=this.entitySet={$kind:"Singleton",$Type:this.resolveAlias(t.getAttribute("Type"))};this.annotatable(e)};o.prototype.processTerm=function(t){var e=this.namespace+t.getAttribute("Name"),o={$kind:"Term"},s=this;this.processTypedCollection(t.getAttribute("Type"),o);this.processAttributes(t,o,{Nullable:this.setIfFalse,BaseTerm:function(t){return t?s.resolveAlias(t):undefined}});this.processFacetAttributes(t,o);this.addToResult(e,o);this.annotatable(e)};o.prototype.processType=function(t,e){var o=this.namespace+t.getAttribute("Name"),s=this;this.processAttributes(t,e,{OpenType:s.setIfTrue,HasStream:s.setIfTrue,Abstract:s.setIfTrue,BaseType:function(t){return t?s.resolveAlias(t):undefined}});this.type=e;this.addToResult(o,e);this.annotatable(o)};o.prototype.processTypedCollection=function(t,e){var o=this.rCollection.exec(t);if(o){e.$isCollection=true;t=o[1]}e.$Type=this.resolveAlias(t)};o.prototype.processTypeDefinition=function(t){var e=this.namespace+t.getAttribute("Name"),o={$kind:"TypeDefinition",$UnderlyingType:t.getAttribute("UnderlyingType")};this.addToResult(e,o);this.processFacetAttributes(t,o);this.annotatable(e)};o.prototype.processTypeNavigationProperty=function(t){var e=t.getAttribute("Name"),o={$kind:"NavigationProperty"};this.processTypedCollection(t.getAttribute("Type"),o);this.processAttributes(t,o,{Nullable:this.setIfFalse,Partner:this.setValue,ContainsTarget:this.setIfTrue});this.type[e]=this.navigationProperty=o;this.annotatable(e)};o.prototype.processTypeNavigationPropertyOnDelete=function(t){this.navigationProperty.$OnDelete=t.getAttribute("Action");this.annotatable(this.navigationProperty,"$OnDelete")};o.prototype.processTypeNavigationPropertyReferentialConstraint=function(t){var e=t.getAttribute("Property"),o=this.getOrCreateObject(this.navigationProperty,"$ReferentialConstraint");o[e]=t.getAttribute("ReferencedProperty");this.annotatable(o,e)};o.prototype.processTypeProperty=function(t){var e=t.getAttribute("Name"),o={$kind:"Property"};this.processTypedCollection(t.getAttribute("Type"),o);this.processAttributes(t,o,{Nullable:this.setIfFalse,DefaultValue:this.setValue});this.processFacetAttributes(t,o);this.type[e]=o;this.annotatable(e)};o.prototype.resolveTargetPath=function(t){var e;if(!t){return t}t=this.resolveAliasInPath(t);e=t.indexOf("/");if(e>=0&&!t.includes("/",e+1)){if(t.slice(0,e)===this.result.$EntityContainer){return t.slice(e+1)}}return t};(function(t){var e,o,s;t.sRootNamespace=t.sEdmxNamespace;t.oAliasConfig={__xmlns:t.sEdmxNamespace,Reference:{Include:{__processor:t.processAlias}},DataServices:{Schema:{__xmlns:t.sEdmNamespace,__processor:t.processAlias}}};s={Property:{__processor:t.processTypeProperty,__include:[t.oAnnotationConfig]},NavigationProperty:{__processor:t.processTypeNavigationProperty,__include:[t.oAnnotationConfig],OnDelete:{__processor:t.processTypeNavigationPropertyOnDelete,__include:[t.oAnnotationConfig]},ReferentialConstraint:{__processor:t.processTypeNavigationPropertyReferentialConstraint,__include:[t.oAnnotationConfig]}}};o={NavigationPropertyBinding:{__processor:t.processNavigationPropertyBinding}};e={Parameter:{__processor:t.processParameter,__include:[t.oAnnotationConfig]},ReturnType:{__processor:t.processReturnType,__include:[t.oAnnotationConfig]}};t.oFullConfig={__xmlns:t.sEdmxNamespace,__processor:t.processEdmx,__include:[t.oReferenceInclude],DataServices:{Schema:{__xmlns:t.sEdmNamespace,__processor:t.processSchema,__include:[t.oAnnotationsConfig,t.oAnnotationConfig],Action:{__processor:t.processActionOrFunction,__include:[e,t.oAnnotationConfig]},Function:{__processor:t.processActionOrFunction,__include:[e,t.oAnnotationConfig]},EntityType:{__processor:t.processEntityType,__include:[s,t.oAnnotationConfig],Key:{PropertyRef:{__processor:t.processEntityTypeKeyPropertyRef}}},ComplexType:{__processor:t.processComplexType,__include:[s,t.oAnnotationConfig]},EntityContainer:{__processor:t.processEntityContainer,__include:[t.oAnnotationConfig],ActionImport:{__processor:t.processImport,__include:[t.oAnnotationConfig]},EntitySet:{__processor:t.processEntitySet,__include:[o,t.oAnnotationConfig]},FunctionImport:{__processor:t.processImport,__include:[t.oAnnotationConfig]},Singleton:{__processor:t.processSingleton,__include:[o,t.oAnnotationConfig]}},EnumType:{__processor:t.processEnumType,__include:[t.oAnnotationConfig],Member:{__processor:t.processEnumTypeMember,__include:[t.oAnnotationConfig]}},Term:{__processor:t.processTerm,__include:[t.oAnnotationConfig]},TypeDefinition:{__processor:t.processTypeDefinition,__include:[t.oAnnotationConfig]}}}}})(o.prototype);return o},false);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/type/DateTime", ["./Date","sap/ui/core/format/DateFormat"],function(t,e){"use strict";var o=t.extend("sap.ui.model.type.DateTime",{constructor:function(){t.apply(this,arguments);this.sName="DateTime"}});o.prototype._createFormats=function(){this.oOutputFormat=e.getDateTimeInstance(this.oFormatOptions);if(this.oFormatOptions.source){this.oInputFormat=e.getDateTimeInstance(this.oFormatOptions.source)}};return o});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/type/Float", ["sap/base/util/each","sap/base/util/isEmptyObject","sap/ui/core/Lib","sap/ui/core/format/NumberFormat","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/SimpleType","sap/ui/model/ValidateException"],function(t,o,e,a,i,r,s,n){"use strict";var u=s.extend("sap.ui.model.type.Float",{constructor:function(){s.apply(this,arguments);this.sName="Float"}});u.prototype.formatValue=function(t,o){var e=t;if(t==undefined||t==null){return null}if(this.oInputFormat){e=this.oInputFormat.parse(t);if(e==null){throw new i("Cannot format float: "+t+" has the wrong format")}}switch(this.getPrimitiveType(o)){case"string":return this.oOutputFormat.format(e);case"int":return Math.floor(e);case"float":case"any":return e;default:throw new i("Don't know how to format Float to "+o)}};u.prototype.parseValue=function(t,o){var a,i;switch(this.getPrimitiveType(o)){case"string":a=this.oOutputFormat.parse(t);if(isNaN(a)){i=e.getResourceBundleFor("sap.ui.core");throw new r(i.getText("Float.Invalid"))}break;case"int":case"float":a=t;break;default:throw new r("Don't know how to parse Float from "+o)}if(this.oInputFormat){a=this.oInputFormat.format(a)}return a};u.prototype.validateValue=function(o){if(this.oConstraints){var a=e.getResourceBundleFor("sap.ui.core"),i=[],r=[],s=o,u=this;if(this.oInputFormat){s=this.oInputFormat.parse(o)}t(this.oConstraints,function(t,o){switch(t){case"minimum":if(s<o){i.push("minimum");r.push(a.getText("Float.Minimum",[u.oOutputFormat.format(o)]))}break;case"maximum":if(s>o){i.push("maximum");r.push(a.getText("Float.Maximum",[u.oOutputFormat.format(o)]))}break;default:break}});if(i.length>0){throw new n(this.combineMessages(r),i)}}};u.prototype.setFormatOptions=function(t){this.oFormatOptions=Object.assign(t.style!=="short"&&t.style!=="long"?{preserveDecimals:true}:{},t);this._createFormats()};u.prototype._handleLocalizationChange=function(){this._createFormats()};u.prototype._createFormats=function(){var t=this.oFormatOptions.source;this.oOutputFormat=a.getFloatInstance(this.oFormatOptions);if(t){if(o(t)){t={groupingEnabled:false,groupingSeparator:",",decimalSeparator:"."}}this.oInputFormat=a.getFloatInstance(t)}};return u});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/type/Integer", ["sap/base/util/each","sap/base/util/isEmptyObject","sap/ui/core/Lib","sap/ui/core/format/NumberFormat","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/SimpleType","sap/ui/model/ValidateException"],function(t,e,o,a,r,i,n,s){"use strict";var u=n.extend("sap.ui.model.type.Integer",{constructor:function(){n.apply(this,arguments);this.sName="Integer"}});u.prototype.formatValue=function(t,e){var o=t;if(t==undefined||t==null){return null}if(this.oInputFormat){o=this.oInputFormat.parse(t);if(o==null){throw new r("Cannot format float: "+t+" has the wrong format")}}switch(this.getPrimitiveType(e)){case"string":return this.oOutputFormat.format(o);case"int":case"float":case"any":return o;default:throw new r("Don't know how to format Integer to "+e)}};u.prototype.parseValue=function(t,e){var a,r;switch(this.getPrimitiveType(e)){case"string":a=this.oOutputFormat.parse(String(t));if(isNaN(a)){r=o.getResourceBundleFor("sap.ui.core");throw new i(r.getText("EnterInt"))}break;case"float":a=Math.floor(t);if(a!=t){r=o.getResourceBundleFor("sap.ui.core");throw new i(r.getText("EnterInt"))}break;case"int":a=t;break;default:throw new i("Don't know how to parse Integer from "+e)}if(this.oInputFormat){a=this.oInputFormat.format(a)}return a};u.prototype.validateValue=function(e){if(this.oConstraints){var a=o.getResourceBundleFor("sap.ui.core"),r=[],i=[],n=e,u=this;if(this.oInputFormat){n=this.oInputFormat.parse(e)}t(this.oConstraints,function(t,e){switch(t){case"minimum":if(n<e){r.push("minimum");i.push(a.getText("Integer.Minimum",[u.oOutputFormat.format(e)]))}break;case"maximum":if(n>e){r.push("maximum");i.push(a.getText("Integer.Maximum",[u.oOutputFormat.format(e)]))}break;default:break}});if(r.length>0){throw new s(this.combineMessages(i),r)}}};u.prototype.setFormatOptions=function(t){this.oFormatOptions=t;this._createFormats()};u.prototype._handleLocalizationChange=function(){this._createFormats()};u.prototype._createFormats=function(){var t=this.oFormatOptions.source;this.oOutputFormat=a.getIntegerInstance(this.oFormatOptions);if(t){if(e(t)){t={groupingEnabled:false,groupingSeparator:",",decimalSeparator:"."}}this.oInputFormat=a.getIntegerInstance(t)}};return u});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/type/String", ["sap/base/Log","sap/base/util/each","sap/ui/core/Lib","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/SimpleType","sap/ui/model/ValidateException"],function(t,e,s,n,a,i,r){"use strict";var o=i.extend("sap.ui.model.type.String",{constructor:function(){i.apply(this,arguments);this.sName="String";if(this.oConstraints.search&&typeof this.oConstraints.search=="string"){this.oConstraints.search=new RegExp(this.oConstraints.search)}}});o.prototype.formatValue=function(t,e){if(t==undefined||t==null){return null}switch(this.getPrimitiveType(e)){case"string":case"any":return t;case"int":var s=parseInt(t);if(isNaN(s)){throw new n(t+" is not a valid int value")}return s;case"float":var a=parseFloat(t);if(isNaN(a)){throw new n(t+" is not a valid float value")}return a;case"boolean":if(t.toLowerCase()=="true"||t=="X"){return true}if(t.toLowerCase()=="false"||t==""){return false}throw new n(t+" is not a valid boolean value");default:throw new n("Don't know how to format String to "+e)}};o.prototype.parseValue=function(t,e){switch(this.getPrimitiveType(e)){case"string":return t;case"boolean":case"int":case"float":return t.toString();default:throw new a("Don't know how to parse String from "+e)}};o.prototype.validateValue=function(n){if(this.oConstraints){var a=s.getResourceBundleFor("sap.ui.core"),i=[],o=[];if(n===null){n=""}e(this.oConstraints,function(e,s){switch(e){case"maxLength":if(n.length>s){i.push("maxLength");o.push(a.getText("String.MaxLength",[s]))}break;case"minLength":if(n.length<s){i.push("minLength");o.push(a.getText("String.MinLength",[s]))}break;case"startsWith":if(!(typeof s=="string"&&s.length>0&&n.startsWith(s))){i.push("startsWith");o.push(a.getText("String.StartsWith",[s]))}break;case"startsWithIgnoreCase":if(!(typeof s=="string"&&s!=""?n.toLowerCase().startsWith(s.toLowerCase()):false)){i.push("startsWithIgnoreCase");o.push(a.getText("String.StartsWith",[s]))}break;case"endsWith":if(!(typeof s=="string"&&s.length>0&&n.endsWith(s))){i.push("endsWith");o.push(a.getText("String.EndsWith",[s]))}break;case"endsWithIgnoreCase":if(!(typeof s=="string"&&s!=""?n.toLowerCase().endsWith(s.toLowerCase()):false)){i.push("endsWithIgnoreCase");o.push(a.getText("String.EndsWith",[s]))}break;case"contains":if(n.indexOf(s)==-1){i.push("contains");o.push(a.getText("String.Contains",[s]))}break;case"equals":if(n!=s){i.push("equals");o.push(a.getText("String.Equals",[s]))}break;case"search":if(n.search(s)==-1){i.push("search");o.push(a.getText("String.Search",[s]))}break;default:t.warning("Ignoring unknown constraint: '"+e+"'",null,"sap.ui.model.type.String")}});if(i.length>0){throw new r(this.combineMessages(o),i)}}};return o});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/performance/trace/FESRHelper", [],function(){"use strict";var t={FESR_NAMESPACE:"http://schemas.sap.com/sapui5/extension/sap.ui.core.FESR/1",setSemanticStepname:function(t,s,i){var a=t.data("sap-ui-custom-settings");if(a===null){a={}}if(!a[this.FESR_NAMESPACE]){a[this.FESR_NAMESPACE]={}}a[this.FESR_NAMESPACE][s]=i;t.data("sap-ui-custom-settings",a)},getSemanticStepname:function(t,s){var i=t&&t.data("sap-ui-custom-settings")&&t.data("sap-ui-custom-settings")[this.FESR_NAMESPACE];if(!i){return}return i[s]}};return t});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/unified/ColorPicker", ["./library","sap/base/i18n/Localization","sap/ui/core/Control","sap/ui/core/HTML","sap/ui/core/Lib","sap/ui/core/ResizeHandler","sap/ui/layout/Grid","sap/ui/layout/GridData","sap/ui/layout/VerticalLayout","sap/ui/layout/HorizontalLayout","sap/ui/core/theming/Parameters","sap/ui/core/InvisibleText","sap/ui/Device","sap/ui/core/library","./ColorPickerRenderer","./ColorPickerHelper","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/Global"],function(e,t,i,s,o,a,l,r,h,n,d,u,p,C,c,g,f,jQuery){"use strict";var S=C.ValueState,b=e.ColorPickerMode,_=e.ColorPickerDisplayMode;var y=i.extend("sap.ui.unified.ColorPicker",{metadata:{library:"sap.ui.unified",properties:{colorString:{type:"string",group:"Misc",defaultValue:null},mode:{type:"sap.ui.unified.ColorPickerMode",group:"Appearance",defaultValue:b.HSV},displayMode:{type:"sap.ui.unified.ColorPickerDisplayMode",group:"Appearance",defaultValue:_.Default}},aggregations:{_grid:{type:"sap.ui.layout.Grid",group:"Appearance",multiple:false,visibility:"hidden"},_invisibleTexts:{type:"sap.ui.core.InvisibleText",multiple:true,visibility:"hidden"},_oCPBox:{type:"sap.ui.core.Control",group:"Appearance",multiple:false,visibility:"hidden"},_oSlider:{type:"sap.ui.core.Control",group:"Appearance",multiple:false,visibility:"hidden"},_oAlphaSlider:{type:"sap.ui.core.Control",group:"Appearance",multiple:false,visibility:"hidden"},_oHexField:{type:"sap.ui.core.Control",group:"Appearance",multiple:false,visibility:"hidden"},_oRedField:{type:"sap.ui.core.Control",group:"Appearance",multiple:false,visibility:"hidden"},_oGreenField:{type:"sap.ui.core.Control",group:"Appearance",multiple:false,visibility:"hidden"},_oBlueField:{type:"sap.ui.core.Control",group:"Appearance",multiple:false,visibility:"hidden"},_oHueField:{type:"sap.ui.core.Control",group:"Appearance",multiple:false,visibility:"hidden"},_oSatField:{type:"sap.ui.core.Control",group:"Appearance",multiple:false,visibility:"hidden"},_oLitField:{type:"sap.ui.core.Control",group:"Appearance",multiple:false,visibility:"hidden"},_oValField:{type:"sap.ui.core.Control",group:"Appearance",multiple:false,visibility:"hidden"},_oAlphaField:{type:"sap.ui.core.Control",group:"Appearance",multiple:false,visibility:"hidden"},_oAlphaField2:{type:"sap.ui.core.Control",group:"Appearance",multiple:false,visibility:"hidden"},_oRGBorHSLRBUnifiedGroup:{type:"sap.ui.core.Control",group:"Appearance",multiple:false,visibility:"hidden"},_oButton:{type:"sap.ui.core.Control",group:"Appearance",multiple:false,visibility:"hidden"}},events:{change:{parameters:{r:{type:"int"},g:{type:"int"},b:{type:"int"},h:{type:"int"},s:{type:"int"},v:{type:"int"},l:{type:"int"},hex:{type:"string"},alpha:{type:"string"}}},liveChange:{parameters:{r:{type:"int"},g:{type:"int"},b:{type:"int"},h:{type:"int"},s:{type:"int"},v:{type:"int"},l:{type:"int"},hex:{type:"string"},alpha:{type:"string"}}}}},renderer:c});var R="",H=sap.ui.require.toUrl("sap/ui/unified/img/ColorPicker/Alphaslider_BG.png"),F=o.getResourceBundleFor("sap.ui.unified"),L={};Object.defineProperties(L,{RGB:{value:"RGB"},CPResponsiveClass:{value:"sapUnifiedColorPicker"},CPMatrixClass:{value:"sapUiColorPicker-ColorPickerMatrix"},HSLClass:{value:"sapUiColorPickerHSL"},LabelClass:{value:"sapUiColorPicker-ColorPickerLabels"},UnitLabelClass:{value:"sapUiCPUnitLabel"},HEXClass:{value:"sapUiColorPicker-ColorPickerHexField"},LeftColumnInputClass:{value:"sapUiColorPicker-ColorPickerInputFieldsLeft"},RightColumnInputClass:{value:"sapUiColorPicker-ColorPickerInputFieldsRight"},SliderClass:{value:"sapUiColorPicker-ColorPickerSlider"},AlphaSliderClass:{value:"sapUiColorPicker-ColorPickerAlphaSlider"},OutputSelectorClass:{value:"sapUiColorPickerHSL-RB"},OutputSelectorRowClass:{value:"sapUiColorPicker-RBRow"},CPBoxClass:{value:"sapUiColorPicker-ColorPickerBox"},CPCircleClass:{value:"sapUiColorPicker-ColorPickerCircle"},LastColumnClass:{value:"sapUiColorPicker-ColorPickerLastColumn"},HideForHSVClass:{value:"hideForHSV"},HideForHSLClass:{value:"hideForHSL"},OldColorClass:{value:"sapUiColorPicker-ColorPickerOldColor"},NewColorClass:{value:"sapUiColorPicker-ColorPickerNewColor"},SwatchesClass:{value:"sapUiColorPicker-swatches"},Colors:{value:{aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32",transparent:"00000000"}}});y.prototype.init=function(){this.oColorPickerHelper=g.getHelper();if(p.browser.firefox){R="-moz-linear-gradient"}else if(p.browser.webkit){R="-webkit-linear-gradient"}else{R="linear-gradient"}this.Color={r:255,g:255,b:255,h:0,s:0,l:100,v:100,a:1,oldA:1,hex:"#ffffff",old:"#ffffff"};this.sHexString="ffffff";this.$CPBox=null;this.$CPCur=null;this.RGB={r:0,g:0,b:0};this.bRtl=t.getRTL();this.data("sap-ui-fastnavgroup","true",true);this.bResponsive=this.oColorPickerHelper.isResponsive();var e=this.bResponsive?"_sap_ui_unified_ColorPicker_CircleSize":"_sap_ui_unified_ColorPicker_commonsCircleSize";this._iCPCursorSize=0;var i=d.get({name:e,callback:function(e){this._iCPCursorSize=parseInt(e)}.bind(this)});if(i){this._iCPCursorSize=parseInt(i)}this._processChanges=this._processHSVChanges;this._bHSLMode=false;this.bPressed=false};var P=i.extend("sap.ui.unified._ColorPickerBox",{metadata:{events:{select:{parameters:{value:{type:"int"},saturation:{type:"int"}}},resize:{parameters:{size:{type:"int"}}}}},init:function(){this.bRtl=t.getRTL()},exit:function(){if(this._sResizeListener){a.deregister(this._sResizeListener)}},getWidth:function(){return this.$().width()},getOffset:function(){return this.$().offset()},onBeforeRendering:function(){if(this._sResizeListener){a.deregister(this._sResizeListener)}},onAfterRendering:function(){this._handle=this.$().find("> div."+L.CPCircleClass);this._sResizeListener=a.register(this.getDomRef(),this.handleResize.bind(this))},handleResize:function(e){this.fireResize({size:e.size.width})},getHandle:function(){return this._handle},ontouchstart:function(e){this.handleTouch(e)},ontouchend:function(e){this.handleTouch(e)},ontouchmove:function(e){this.handleTouch(e)},handleTouch:function(e){var t=this.calculateValuesFromEvent(e);if(t){this.fireSelect(t)}},calculateValuesFromEvent:function(e){var t=e.offsetX,i=e.offsetY,s,o=s=this.getWidth(),a,l;e.preventDefault&&e.preventDefault();if(!t){a=e.targetTouches?e.targetTouches[0]:e;if(!a||!a.pageX){a=e;if((!a||!a.pageX)&&e.changedTouches){a=e.changedTouches[0]}}if(!a.pageX){return false}l=this.getOffset();t=a.pageX-l.left;i=a.pageY-l.top}t=Math.min(Math.max(t,0),o);i=Math.min(Math.max(i,0),s);if(this.bRtl){t=o-t}return{value:t/o*100,saturation:(1-i/s)*100}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t);e.class(L.CPBoxClass);e.openEnd();e.openStart("div",t.getId()+"-cpCur");e.class(L.CPCircleClass);e.openEnd().close("div");e.close("div")}}});y.prototype._createRowFromInput=function(e,t,i,s){var o=F.getText(t),a;a=new n({content:[this.oColorPickerHelper.factory.createLabel({text:i,tooltip:o,labelFor:e}).addStyleClass(L.LabelClass),e.setTooltip(o)]});if(s){a.addContent(this.oColorPickerHelper.factory.createLabel({text:s,labelFor:e}).addStyleClass(L.UnitLabelClass).addStyleClass(L.LabelClass))}return a};y.prototype._updateColorStringProperty=function(e,t){var i=this._getCSSColorString();this.setProperty("colorString",i,true);if(t){this.fireLiveChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,l:this.Color.l,alpha:this.Color.a,hex:this.Color.hex,formatHSL:this.Color.formatHSL,colorString:i})}if(e){this.fireChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,l:this.Color.l,alpha:this.Color.a,hex:this.Color.hex,formatHSL:this.Color.formatHSL,colorString:i})}};y.prototype._handleCPBoxSelectEvent=function(e){var t=e.getParameter("value"),i=e.getParameter("saturation");this.oSatField.setValue(i);if(this._bHSLMode){this.oLitField.setValue(t)}else{this.oValField.setValue(t)}this._processChanges();this._updateColorStringProperty(false,true)};y.prototype._handleCPBoxResizeEvent=function(e){this._iCPBoxSize=e.getParameter("size");this._updateCursorPosition()};y.prototype._handleCPBoxTouchEndEvent=function(e){this._updateColorStringProperty(true,false)};y.prototype._createInteractionControls=function(){var t=this.getId();this.oCPBox=new P(t+"-cpBox",{select:this._handleCPBoxSelectEvent.bind(this),resize:this._handleCPBoxResizeEvent.bind(this)});this.oCPBox.addDelegate({ontouchend:this._handleCPBoxTouchEndEvent.bind(this)});this.oHexField=this.oColorPickerHelper.factory.createInput(t+"-hxF",{value:this.Color.hex.substr(1),change:this._handleHexValueChange.bind(this),ariaLabelledBy:u.getStaticId("sap.ui.unified","COLORPICKER_HEX")}).addStyleClass(L.HEXClass);this.oRedField=this.oColorPickerHelper.factory.createInput(t+"-rF",{value:this.Color.r,change:this._handleRedValueChange.bind(this),ariaLabelledBy:u.getStaticId("sap.ui.unified","COLORPICKER_RED")}).addStyleClass(L.LeftColumnInputClass);this.oGreenField=this.oColorPickerHelper.factory.createInput(t+"-gF",{value:this.Color.g,change:this._handleGreenValueChange.bind(this),ariaLabelledBy:u.getStaticId("sap.ui.unified","COLORPICKER_GREEN")}).addStyleClass(L.LeftColumnInputClass);this.oBlueField=this.oColorPickerHelper.factory.createInput(t+"-bF",{value:this.Color.b,change:this._handleBlueValueChange.bind(this),ariaLabelledBy:u.getStaticId("sap.ui.unified","COLORPICKER_BLUE")}).addStyleClass(L.LeftColumnInputClass);this.oHueField=this.oColorPickerHelper.factory.createInput(t+"-hF",{value:this.Color.h,change:this._handleHueValueChange.bind(this),ariaLabelledBy:u.getStaticId("sap.ui.unified","COLORPICKER_HUE")}).addStyleClass(L.RightColumnInputClass);this.oSatField=this.oColorPickerHelper.factory.createInput(t+"-sF",{value:this.Color.s,change:this._handleSatValueChange.bind(this),ariaLabelledBy:u.getStaticId("sap.ui.unified","COLORPICKER_SAT")+" "+u.getStaticId("sap.ui.unified","COLORPICKER_PERCENTAGE")}).addStyleClass(L.RightColumnInputClass);this.oLitField=this.oColorPickerHelper.factory.createInput(t+"-lF",{value:this.Color.l,change:this._handleLitValueChange.bind(this),ariaLabelledBy:u.getStaticId("sap.ui.unified","COLORPICKER_LIGHTNESS")+" "+u.getStaticId("sap.ui.unified","COLORPICKER_PERCENTAGE")}).addStyleClass(L.RightColumnInputClass).addStyleClass(L.HideForHSVClass);this.oAlphaField=this.oColorPickerHelper.factory.createInput(t+"-aF",{value:this.Color.a,change:this._handleAlphaValueChange.bind(this),ariaLabelledBy:u.getStaticId("sap.ui.unified","COLORPICKER_ALPHA")}).addStyleClass(L.RightColumnInputClass).addStyleClass(L.HideForHSVClass).addStyleClass("sapUnifiedA");this.oAlphaField2=this.oColorPickerHelper.factory.createInput(t+"-aF2",{value:this.Color.a,change:this._handleAlphaValueChange.bind(this),ariaLabelledBy:u.getStaticId("sap.ui.unified","COLORPICKER_ALPHA")}).addStyleClass(L.RightColumnInputClass).addStyleClass(L.HideForHSVClass).addStyleClass("sapUnifiedA");this.oValField=this.oColorPickerHelper.factory.createInput(t+"-vF",{value:this.Color.v,change:this._handleValValueChange.bind(this),ariaLabelledBy:u.getStaticId("sap.ui.unified","COLORPICKER_VALUE")}).addStyleClass(L.RightColumnInputClass).addStyleClass(L.HideForHSLClass);this.oRGBorHSLRBGroup=this.oColorPickerHelper.factory.createRadioButtonGroup({columns:2,buttons:[this.oColorPickerHelper.factory.createRadioButtonItem({text:L.RGB}),this.oColorPickerHelper.factory.createRadioButtonItem({text:e.ColorPickerMode.HSL})],select:this._handleRGBorHSLValueChange.bind(this),selectedIndex:this.Color.formatHSL?1:0}).addStyleClass(L.OutputSelectorClass);this.oHueInvisibleText=new u({text:F.getText("COLORPICKER_HUE_SLIDER")}).toStatic();this.addAggregation("_invisibleTexts",this.oHueInvisibleText,true);this.oSlider=this.oColorPickerHelper.factory.createSlider(t+"-hSLD",{max:360,step:1,tooltip:F.getText("COLORPICKER_HUE"),value:parseInt(this.oHueField.getValue())}).addStyleClass(L.SliderClass).addAriaLabelledBy(this.oHueInvisibleText);this.oSlider.attachEvent("liveChange","liveChange",this._handleSliderChange.bind(this));this.oSlider.attachEvent("change","change",this._handleSliderChange.bind(this));this.oAlphaInvisibleText=new u({text:F.getText("COLORPICKER_ALPHA_SLIDER")}).toStatic();this.addAggregation("_invisibleTexts",this.oAlphaInvisibleText,true);this.oAlphaSlider=this.oColorPickerHelper.factory.createSlider(t+"-aSLD",{max:1,value:1,step:.01,tooltip:F.getText("COLORPICKER_ALPHA")}).addStyleClass(L.AlphaSliderClass).addAriaLabelledBy(this.oAlphaInvisibleText);this.oAlphaSlider.attachEvent("liveChange","liveChange",this._handleAlphaSliderChange.bind(this));this.oAlphaSlider.attachEvent("change","change",this._handleAlphaSliderChange.bind(this))};y.prototype._createLayout=function(){var e=this.getId(),t;if(this._bLayoutControlsCreated){return}this._createInteractionControls();if(this.getDisplayMode()===_.Large){this._toggleInputsEnabled(this.Color.formatHSL)}this.oCPBoxGD=new r({span:"L6 M6 S12"});this.icOne=new r({span:"L3 M3 S6"});this.icTwo=new r({span:"L3 M3 S6"});this.swatches=new r({span:"L3 M3 S12"});this.rbg=new r({span:"L6 M8 S12"});if(this.bResponsive){this._createUnifiedColorPicker(e)}else{t=this._createCommonsColorPicker(t,e);this.setAggregation("_grid",t,true)}this._bLayoutControlsCreated=true;if(!this.bResponsive){this._adaptControlToLibrary()}};y.prototype._adaptControlToLibrary=function(){var e;if(!this._bLayoutControlsCreated){return}e=this.getAggregation("_grid");if(this.bResponsive){if(!p.system.phone&&!jQuery("html").hasClass("sapUiMedia-Std-Phone")){e._setBreakPointTablet(400)}e.addStyleClass(L.CPResponsiveClass)}else{e.setProperty("hSpacing",0,true);e.setProperty("vSpacing",0,true);this.oCPBoxGD.setSpanS(5);this.icOne.setSpanS(4);this.icTwo.setSpanS(3);this.rbg.setSpanS(8)}};y.prototype._updateControlVisualState=function(){var e=this.getAggregation("_grid");if(!e){return}if(this.bResponsive){if(this._bHSLMode){e.addStyleClass(L.HSLClass);this.swatches.setSpanM(4).setLinebreak(true)}else{e.removeStyleClass(L.HSLClass);this.swatches.setSpanM(3).setLinebreak(false)}}else{if(this._bHSLMode){e.addStyleClass(L.HSLClass);this.swatches.setSpanS(4).setLinebreak(true)}else{e.removeStyleClass(L.HSLClass);this.swatches.setSpanS(3).setLinebreak(false)}}};y.prototype._processChanges=function(){};y.prototype.setMode=function(t,i){this._bLayoutControlsCreated=false;switch(t){case e.ColorPickerMode.HSL:this._processChanges=this._processHSLChanges;break;case e.ColorPickerMode.HSV:this._processChanges=this._processHSVChanges;break;default:f.error("Control must have a valid mode set to work correct");break}this._bHSLMode=t===e.ColorPickerMode.HSL;return this.setProperty("mode",t,i)};y.prototype.setDisplayMode=function(e){this._bLayoutControlsCreated=false;return this.setProperty("displayMode",e,false)};y.prototype._cleanup=function(){var e=[this.getAggregation("_grid"),this.getAggregation("_oCPBox"),this.getAggregation("_oHexField"),this.getAggregation("_oRedField"),this.getAggregation("_oGreenField"),this.getAggregation("_oBlueField"),this.getAggregation("_oHueField"),this.getAggregation("_oSatField"),this.getAggregation("_oLitField"),this.getAggregation("_oAlphaField"),this.getAggregation("_oAlphaField2"),this.getAggregation("_oValField"),this.getAggregation("_oSlider"),this.getAggregation("_oAlphaSlider"),this.oRGBorHSLRBUnifiedGroup,this.oCPBoxGD,this.icOne,this.icTwo,this.rbg,this.swatches,this.oAlphaInvisibleText,this.oHueInvisibleText,this.getAggregation("_oButton"),this.getAggregation("_oRGBorHSLRBUnifiedGroup"),this.oRGBorHSLRBGroup];e.forEach(function(e){if(e){e.destroy()}},this);this._bLayoutControlsCreated=false};y.prototype.exit=function(){this._cleanup()};y.prototype.onBeforeRendering=function(){this._cleanup();this._createLayout();this._updateControlVisualState();this._updateColorString()};y.prototype._updateAlphaValue=function(e){this.Color.a=this._getValueInRange(e,0,1)};y.prototype._updateColorString=function(){this._parseColorString(this.getColorString());this.oHexField.setValue(this.Color.hex.substr(1));this.oRedField.setValue(this.Color.r);this.oGreenField.setValue(this.Color.g);this.oBlueField.setValue(this.Color.b);this.oHueField.setValue(this.Color.h);this.oSatField.setValue(this.Color.s);if(this._bHSLMode){this.oLitField.setValue(this.Color.l);this.oAlphaField.setValue(this.Color.a);this.oAlphaField2.setValue(this.Color.a);this.oSlider.setValue(this.Color.h);this.oAlphaSlider.setValue(this.Color.a);if(this.bResponsive){this.oRGBorHSLRBUnifiedGroup.setSelectedIndex(this.Color.formatHSL?1:0)}else{this.oRGBorHSLRBGroup.setSelectedIndex(this.Color.formatHSL?1:0)}}else{this.oValField.setValue(this.Color.v);this.oSlider.setValue(this.Color.h);this.oAlphaSlider.setValue(this.Color.a);this.oAlphaField.setValue(this.Color.a);this.oAlphaField2.setValue(this.Color.a)}this._updateColorStringProperty(false,false)};y.prototype.isColor=function(e){return this._parseColorString(e,true)};y.prototype._handleSliderChange=function(e,t){var i=parseInt(this.oSlider.getValue());this.oHueField.setValue(i);this._processChanges();this._updateColorStringProperty(t==="change",t==="liveChange")};y.prototype._handleAlphaSliderChange=function(e,t){this.Color.a=this.oAlphaSlider.getValue();this.oAlphaField.setValue(this.Color.a);this.oAlphaField2.setValue(this.Color.a);this._updateSelColorBackground();this._updateColorStringProperty(t==="change",t==="liveChange")};y.prototype._getValueInRange=function(e,t,i){if(isNaN(e)){e=0}return Math.min(Math.max(e,t),i)};y.prototype._handleAlphaValueChange=function(e){var t=e.getParameter("id")=="cp-aF2"?parseFloat(this.oAlphaField2.getValue(),10):parseFloat(this.oAlphaField.getValue(),10);t=this._getValueInRange(t,0,1);this.Color.a=t;this.oAlphaField.setValue(t);this.oAlphaField2.setValue(t);this.oAlphaSlider.setValue(t);if(!this.Color.formatHSL){this._processRGBChanges()}else{this._processChanges()}this._updateColorStringProperty(true,true)};y.prototype._handleRGBorHSLValueChange=function(e){this.Color.formatHSL=e.getParameter("selectedIndex")===1;this._toggleInputsEnabled(this.Color.formatHSL);this._updateColorStringProperty(true,true)};y.prototype._toggleInputsEnabled=function(e){this.oRedField.setEnabled(!e);this.oGreenField.setEnabled(!e);this.oBlueField.setEnabled(!e);this.oHueField.setEnabled(!!e);this.oSatField.setEnabled(!!e);this.oLitField.setEnabled(!!e);this.oValField.setEnabled(!!e)};y.prototype._handleHueValueChange=function(){var e=parseInt(this.oHueField.getValue());e=this._getValueInRange(e,0,360);this.oHueField.setValue(e);this.oSlider.setValue(e);this._processChanges();this._updateColorStringProperty(true,true)};y.prototype._handleSatValueChange=function(){var e=parseInt(this.oSatField.getValue());e=this._getValueInRange(e,0,100);this.oSatField.setValue(e);this._processChanges();this._updateColorStringProperty(true,true)};y.prototype._handleValValueChange=function(){var e=parseInt(this.oValField.getValue());e=this._getValueInRange(e,0,100);this.oValField.setValue(e);this._processHSVChanges();this._updateColorStringProperty(true,true)};y.prototype._handleLitValueChange=function(){var e=parseInt(this.oLitField.getValue());e=this._getValueInRange(e,0,100);this.oLitField.setValue(e);this._processHSLChanges();this._updateColorStringProperty(true,true)};y.prototype._handleRedValueChange=function(){var e=parseInt(this.oRedField.getValue());e=this._getValueInRange(e,0,255);this.oRedField.setValue(e);this._processRGBChanges();this._updateColorStringProperty(true,true)};y.prototype._handleGreenValueChange=function(){var e=parseInt(this.oGreenField.getValue());e=this._getValueInRange(e,0,255);this.oGreenField.setValue(e);this._processRGBChanges();this._updateColorStringProperty(true,true)};y.prototype._handleBlueValueChange=function(){var e=parseInt(this.oBlueField.getValue());e=this._getValueInRange(e,0,255);this.oBlueField.setValue(e);this._processRGBChanges();this._updateColorStringProperty(true,true)};y.prototype._processHSVChanges=function(){var e=parseInt(this.oHueField.getValue());var t=parseInt(this.oSatField.getValue());var i=parseInt(this.oValField.getValue());this._calculateRGB(e,t,i);this.Color.r=this.RGB.r;this.Color.g=this.RGB.g;this.Color.b=this.RGB.b;this.oRedField.setValue(this.Color.r);this.oGreenField.setValue(this.Color.g);this.oBlueField.setValue(this.Color.b);this._calculateHEX(this.Color.r,this.Color.g,this.Color.b);this.oHexField.setValue(this.sHexString);this.Color.hex="#"+this.oHexField.getValue();this.Color.h=e;this.Color.s=t;this.Color.v=i;this.oHueField.setValue(this.Color.h);this.oSatField.setValue(this.Color.s);this.oValField.setValue(this.Color.v);this._updateGradientBoxBackground(this.Color.h);this._updateCursorPosition();this._updateSelColorBackground()};y.prototype._processHSLChanges=function(){var e=parseInt(this.oHueField.getValue()),t=parseInt(this.oSatField.getValue()),i=parseInt(this.oLitField.getValue());if(e>360){e%=360}this._calculateRGB(e,t,i);this.Color.r=this.RGB.r;this.Color.g=this.RGB.g;this.Color.b=this.RGB.b;this.oRedField.setValue(this.Color.r);this.oGreenField.setValue(this.Color.g);this.oBlueField.setValue(this.Color.b);this._calculateHEX(this.Color.r,this.Color.g,this.Color.b);this.oHexField.setValue(this.sHexString);this.Color.hex="#"+this.oHexField.getValue();this.Color.h=e;this.Color.s=t;this.Color.l=i;this.oHueField.setValue(this.Color.h);this.oSatField.setValue(this.Color.s);this.oLitField.setValue(this.Color.l);this._updateGradientBoxBackground(this.Color.h);this._updateCursorPosition();this._updateAlphaBackground();this._updateSelColorBackground()};y.prototype._processRGBChanges=function(){var e=Math.round(parseInt(this.oRedField.getValue())),t=Math.round(parseInt(this.oGreenField.getValue())),i=Math.round(parseInt(this.oBlueField.getValue())),s=e+t+i===765;this._calculateHEX(e,t,i);this.oHexField.setValue(this.sHexString);if(this._bHSLMode){this._calculateHSL(e,t,i);this.oLitField.setValue(this.Color.l)}else{if(!s){this._calculateHSV(e,t,i)}this.oValField.setValue(this.Color.v)}if(!s){this.oHueField.setValue(this.Color.h)}this.oSatField.setValue(this.Color.s);this.oSlider.setValue(parseInt(this.oHueField.getValue()));this.Color.r=e;this.Color.g=t;this.Color.b=i;this.Color.hex="#"+this.oHexField.getValue();this._updateGradientBoxBackground(this.Color.h);this._updateCursorPosition();this._updateAlphaBackground();this._updateSelColorBackground()};y.prototype._handleHexValueChange=function(){var e=this.oHexField.getValue().toLowerCase(),t=1,i;if(e.substr(0,1)==="#"){e=e.substr(1)}i=/^([0-9a-fA-F]{8})$/;if(i.test(e)!==false){t=Number((parseInt(e.substr(6,2),16)/255).toFixed(2));e=e.substr(0,6)}i=/^([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/;if(i.test(e)===false){this.oHexField.setValueState(S.Error);this.oSlider.setEnabled(false);this.oAlphaSlider.setEnabled(false);this.oHueField.setEnabled(false);this.oRedField.setEnabled(false);this.oGreenField.setEnabled(false);this.oBlueField.setEnabled(false);this.oSatField.setEnabled(false);this.oAlphaField.setEnabled(false);this.oAlphaField2.setEnabled(false);if(this._bHSLMode){this.oLitField.setEnabled(false)}else{this.oValField.setEnabled(false)}return}else if(this.oHexField.getValueState()===S.Error){this.oHexField.setValueState(S.None);this.oSlider.setEnabled(true);this.oAlphaSlider.setEnabled(true);this.oHueField.setEnabled(true);this.oRedField.setEnabled(true);this.oGreenField.setEnabled(true);this.oBlueField.setEnabled(true);this.oSatField.setEnabled(true);this.oAlphaField.setEnabled(true);this.oAlphaField2.setEnabled(true);if(this._bHSLMode){this.oLitField.setEnabled(true)}else{this.oValField.setEnabled(true)}}if(e.length===3){e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)}this._processHexChanges(e);this.oHexField.setValue(e);this.oRedField.setValue(this.Color.r);this.oGreenField.setValue(this.Color.g);this.oBlueField.setValue(this.Color.b);this.oHueField.setValue(this.Color.h);this.oSatField.setValue(this.Color.s);if(this._bHSLMode){this.oLitField.setValue(this.Color.l);this.oAlphaField.setValue(1);this.oAlphaField2.setValue(1)}else{this.oValField.setValue(this.Color.v)}this.oSlider.setValue(parseInt(this.oHueField.getValue()));this.oAlphaSlider.setValue(t);this.Color.a=t;if(this._bHSLMode){this.oAlphaField.setValue(t);this.oAlphaField2.setValue(t)}this._updateGradientBoxBackground(this.Color.h);this._updateCursorPosition();this._updateAlphaBackground();this._updateSelColorBackground();this._updateColorStringProperty(true,true)};y.prototype._processHexChanges=function(e){this._convertRGB(e);if(this._bHSLMode){this._calculateHSL(this.Color.r,this.Color.g,this.Color.b)}else{this._calculateHSV(this.Color.r,this.Color.g,this.Color.b)}this.Color.hex="#"+e.toLowerCase()};y.prototype._updateAlphaBackground=function(){var e=[this.Color.r,this.Color.g,this.Color.b].join(","),t=R+"(left,rgba("+e+",0),rgba("+e+",1)),url("+H+")";this.oAlphaSlider.$().find(this.bResponsive?".sapMSliderInner":".sapUiSliBar").css("background-image",t)};y.prototype._updateCursorPosition=function(){var e,i;if(!this._iCPBoxSize){return}if(this._bHSLMode){e=Math.round(this.oLitField.getValue()*this._iCPBoxSize/100)}else{e=Math.round(this.oValField.getValue()*this._iCPBoxSize/100)}if(t.getRTL()){e=this._iCPBoxSize-e}i=Math.round((1-this.oSatField.getValue()/100)*this._iCPBoxSize);e=Math.round(Math.max(e,0)-this._iCPCursorSize/2-1);i=Math.round(Math.max(i,0)-this._iCPCursorSize/2-1);this.$CPCur.css("left",e).css("top",i)};y.prototype._calculateRGB=function(e,t,i){var s,o,a,l,r,h,n;if(this._bHSLMode){this._calculateRGBAdvanced(e,t,i);return}e%=360;e/=60;t/=100;i/=100;h=i*t;r=h*(1-Math.abs(e%2-1));l=i-h;s=0;o=0;a=0;n=Math.floor(e);switch(n){case 0:s=h;o=r;break;case 1:s=r;o=h;break;case 2:o=h;a=r;break;case 3:o=r;a=h;break;case 4:s=r;a=h;break;case 5:s=h;a=r;break;default:s=0;a=0;o=0;break}this.RGB.r=Math.floor((s+l)*255);this.RGB.g=Math.floor((o+l)*255);this.RGB.b=Math.floor((a+l)*255)};y.prototype._calculateRGBAdvanced=function(e,t,i){var s,o,a,l,r,h,n,d,u;e=this._getValueInRange(e,0,360);e%=360;if(t>100){t=1}else if(t<0){t=0}else{t=t/100}if(i>100){i=1}else if(i<0){i=0}else{i=i/100}d=t*(1-Math.abs(2*i-1));n=255*(i-.5*d);h=d*(1-Math.abs(e/60%2-1));u=Math.floor(e/60);r=n+255*h;l=n+255*d;switch(u){case 0:s=l;o=r;a=n;break;case 1:s=r;o=l;a=n;break;case 2:s=n;o=l;a=r;break;case 3:s=n;o=r;a=l;break;case 4:s=r;o=n;a=l;break;case 5:s=l;o=n;a=r;break;default:s=0;o=0;a=0;break}this.RGB.r=Math.round(s);this.RGB.g=Math.round(o);this.RGB.b=Math.round(a)};y.prototype._getCSSColorString=function(){if(this.Color.formatHSL){if(this.Color.a<1){return"hsla("+this.Color.h+","+this.Color.s+"%,"+this.Color.l+"%, "+this.Color.a+")"}else{return"hsl("+this.Color.h+","+this.Color.s+"%,"+this.Color.l+"%)"}}if(this.Color.a<1){return"rgba("+this.Color.r+","+this.Color.g+","+this.Color.b+", "+this.Color.a+")"}else{return"rgb("+this.Color.r+","+this.Color.g+","+this.Color.b+")"}};y.prototype._calculateHEX=function(e,t,i){var s=e.toString(16),o=t.toString(16),a=i.toString(16);if(s.length===1){s="0"+s}if(o.length===1){o="0"+o}if(a.length===1){a="0"+a}this.sHexString=(s+o+a).toLowerCase()};y.prototype._calculateHSV=function(e,t,i){var s=Math.max(Math.max(e,t),i),o=Math.min(Math.min(e,t),i),a=s-o,l=Math.round(s*100/255),r=s===0?0:100*a/s,h=0;if(r===0){h=0}else if(e===s){h=60*(t-i)/a}else if(t===s){h=120+60*(i-e)/a}else if(i===s){h=240+60*(e-t)/a}if(h<0){h+=359.9}h=Math.round(h);r=Math.round(r);this.Color.h=h;this.Color.s=r;this.Color.v=l};y.prototype._calculateHSL=function(e,t,i){var s=Math.max(e,t,i),o=Math.min(e,t,i),a=(s-o)/255,l=(s+o)/510,r=1-Math.abs(2*l-1),h=l===0?0:a/r,n=r!==0?h:0,d=0;l=Math.round(l*100);n=Math.round(n*100);if(l===0||n===0||e+t+i===765){d=0}else{var u=s-o;if(s===e){d=(t-i)/u%6}if(s===t){d=(i-e)/u+2}if(s===i){d=(e-t)/u+4}if(u===0){d=0}d*=60;if(d<0){d+=360}}if(d!==0||this.Color.h!==360){this.Color.h=Math.round(d)}this.Color.s=n;this.Color.l=l};y.prototype._convertRGB=function(e){this.Color.r=parseInt(e.substr(0,2),16);this.Color.g=parseInt(e.substr(2,2),16);this.Color.b=parseInt(e.substr(4,2),16)};y.prototype._updateGradientBoxBackground=function(e){if(this._bHSLMode){this._calculateRGBAdvanced(e,100,50)}else{this._calculateRGB(e,100,100)}this._calculateHEX(this.RGB.r,this.RGB.g,this.RGB.b);this.$CPBox.css("background-color","rgb("+[this.RGB.r,this.RGB.g,this.RGB.b].join(",")+")")};y.prototype._updateSelColorBackground=function(){this.$().find(".sapUiColorPicker-ColorPickerNewColor").css("background-color",this._getCSSColorString())};y.prototype._parseColorString=function(e,t){var i;if(e.substr(0,1)==="#"){e=e.substr(1)}e=e.trim().toLowerCase();i=this._parseColorName(e);if(i){if(t){return true}if(i.length===8){this.Color.a=this.Color.oldA=Number((parseInt(i.substr(6,2),16)/255).toFixed(2));i=i.substring(0,6)}this._processHexChanges(i);this.Color.old=this.Color.hex;if(this._bHSLMode){this.Color.formatHSL=false}return true}if(/^([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(e)){if(t){return true}if(e.length===3){i=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]}else{i=e}this._processHexChanges(i);this.Color.old=this.Color.hex;if(this._bHSLMode){this.Color.formatHSL=false}return true}if(e.substr(0,3)==="rgb"){return this._parseRGB(e,t)}if(this._bHSLMode){return this._parseHSL(e,t)}else if(e.substr(0,3)==="hsv"){return this._parseHSV(e,t)}return false};y.prototype._parseHSV=function(e,t){var i=/^(((\d{1,2})|([1,2]\d{2})|(3[0-5]\d)|(360)),)(((\d{1,2})|(100)),)((\d{1,2})|(100))$/,s,o,a,l;e=e.substr(3).replace("(","").replace(")","").split(" ").join("");if(i.test(e)===true){if(t){return true}s=e.split(",");o=parseInt(s[0]);a=parseInt(s[1]);l=parseInt(s[2]);this._calculateRGB(o,a,l);this._calculateHEX(this.RGB.r,this.RGB.g,this.RGB.b);this.Color.r=this.RGB.r;this.Color.g=this.RGB.g;this.Color.b=this.RGB.b;this.Color.h=o;this.Color.s=a;this.Color.v=l;this.Color.hex="#"+this.sHexString;this.Color.old=this.Color.hex;return true}return false};y.prototype._parseHSL=function(e,t){var i,s=e.substr(0,4),o,a,l,r,h;if(s==="hsla"){o=true}else if(s==="hsl("){o=false}else{return false}e=e.substr(o?4:3).replace("(","").replace(")","").split(" ").join("");i=e.split(",");a=parseInt(i[0]);l=parseFloat(i[1]);r=parseFloat(i[2]);if(o){h=parseFloat(i[3])}else{if(i[3]&&parseFloat(i[3])>=0){return false}h=1}l=l<1&&l>0?l*100:l;r=r<1&&r>0?r*100:r;if(a>=0&&a<=360&&(l>=0&&l<=100)&&(r>=0&&r<=100)&&(h>=0&&h<=1)){if(t){return true}this._calculateRGB(a,l,r);this._calculateHEX(this.RGB.r,this.RGB.g,this.RGB.b);this.Color.r=this.RGB.r;this.Color.g=this.RGB.g;this.Color.b=this.RGB.b;this.Color.h=a;this.Color.s=l;this.Color.l=r;this.Color.hex="#"+this.sHexString;this.Color.old=this.Color.hex;this.Color.a=this.Color.oldA=h;this.Color.formatHSL=true}else{return false}return true};y.prototype._parseRGB=function(e,t){var i,s,o,a;s=e.substring(0,4);if(s==="rgba"){a=/^(((\d{1,2})|(1\d{2})|(2[0-4]\d)|(25[0-5])),){2}(((\d{1,2})|(1\d{2})|(2[0-4]\d)|(25[0-5])),)([0]|([0]\.[0-9]+)|(\.[0-9]+)|[1])$/;o=true}else if(s.substring(0,3)==="rgb"){a=/^(((\d{1,2})|(1\d{2})|(2[0-4]\d)|(25[0-5])),){2}(((\d{1,2})|(1\d{2})|(2[0-4]\d)|(25[0-5])))$/;o=false}else{return false}e=e.substr(o?4:3).replace("(","").replace(")","").split(" ").join("");if(a.test(e)){if(t){return true}i=e.split(",");this._calculateHEX(parseInt(i[0]),parseInt(i[1]),parseInt(i[2]));this._processHexChanges(this.sHexString);this.Color.old=this.Color.hex;if(o){this.Color.a=this.Color.oldA=parseFloat(i[3])}return true}if(this._bHSLMode){this.Color.formatHSL=false}return false};y.prototype._parseColorName=function(e){return L.Colors[e]};y.prototype.onAfterRendering=function(){var e=this._getCSSColorString(),t=this.getParent();this.$CPBox=this.oCPBox.$();this.$CPCur=this.oCPBox.getHandle();this.$().find(".sapUiColorPicker-ColorPickerNewColor").css("background-color",e);this.$().find(".sapUiColorPicker-ColorPickerOldColor").css("background-color",e);this._updateGradientBoxBackground(this.Color.h);this._iCPBoxSize=this.oCPBox.getWidth();this._updateCursorPosition();this._updateAlphaBackground();this.oSlider.iShiftGrip=Math.round(jQuery(this.oSlider.oGrip).outerWidth()/2);this.oAlphaSlider.iShiftGrip=Math.round(jQuery(this.oAlphaSlider.oGrip).outerWidth()/2);if(t&&t.getMetadata().getName()==="sap.m.Dialog"){t.addStyleClass("sapUiCPDialog")}this.addStyleClass("sapUiCPDisplayRGB");if(p.system.phone){this._toggleFields()}};y.prototype.getRGB=function(){return{r:this.Color.r,g:this.Color.g,b:this.Color.b}};y.prototype._getConstants=function(){return L};y.prototype._createCommonsColorPicker=function(e,t){e=new l({containerQuery:true,content:[this.oCPBox.setLayoutData(this.oCPBoxGD),new h({content:[this._createRowFromInput(this.oRedField,"COLORPICKER_RED","R:"),this._createRowFromInput(this.oGreenField,"COLORPICKER_GREEN","G:"),this._createRowFromInput(this.oBlueField,"COLORPICKER_BLUE","B:"),this._createRowFromInput(this.oHexField,"COLORPICKER_HEX","#:")],layoutData:this.icOne}),new h({content:[this._createRowFromInput(this.oHueField,"COLORPICKER_HUE","H:"),this._createRowFromInput(this.oSatField,"COLORPICKER_SAT","S:","%"),this._createRowFromInput(this.oLitField,"COLORPICKER_LIGHTNESS","L:","%").addStyleClass(L.HideForHSVClass),this._createRowFromInput(this.oAlphaField,"COLORPICKER_ALPHA","A:").addStyleClass(L.HideForHSVClass),this._createRowFromInput(this.oAlphaField2,"COLORPICKER_ALPHA","A:").addStyleClass(L.HideForHSVClass),this._createRowFromInput(this.oValField,"COLORPICKER_VALUE","V:").addStyleClass(L.HideForHSLClass)],layoutData:this.icTwo}).addStyleClass(L.LastColumnClass),new n({content:[new s({content:["<div id='",t,"-ocBox' class='",L.OldColorClass,"'></div>"].join("")}),new s({content:["<div id='",t,"-ncBox' class='",L.NewColorClass,"'></div>"].join("")})],layoutData:this.swatches}).addStyleClass(L.SwatchesClass),new n({content:[this.oColorPickerHelper.factory.createLabel({text:"Output:",labelFor:this.oRGBorHSLRBGroup}),this.oRGBorHSLRBGroup],layoutData:this.rbg}).addStyleClass(L.HideForHSVClass).addStyleClass(L.OutputSelectorRowClass),this.oSlider.setLayoutData(new r({span:"L6 M6 S12",linebreak:true})),this.oAlphaSlider.setLayoutData(new r({span:"L6 M6 S12"}))]}).addStyleClass(L.CPMatrixClass);return e};y.prototype._createUnifiedColorPicker=function(e){var t=this;this.oRbRGB=this.oColorPickerHelper.factory.createRadioButtonItem({tooltip:F.getText("COLORPICKER_SELECT_RGB_TOOLTIP")});this.oRbRGB.addStyleClass("sapUiCPRB");this.oRbHSLV=this.oColorPickerHelper.factory.createRadioButtonItem({tooltip:F.getText("COLORPICKER_SELECT_HSL_TOOLTIP")});this.oRbHSLV.addStyleClass("sapUiCPRB");this.oButton=this.oColorPickerHelper.factory.createButton(e+"-toggleMode",{type:p.system.phone?"Default":"Transparent",tooltip:F.getText("COLORPICKER_TOGGLE_BTN_TOOLTIP"),icon:"sap-icon://source-code",press:function(e){t._toggleFields()}});this.setAggregation("_oButton",this.oButton,true);this.oRGBorHSLRBUnifiedGroup=this.oColorPickerHelper.factory.createRadioButtonGroup({select:this._handleRGBorHSLValueChange.bind(this),selectedIndex:this.Color.formatHSL?1:0});this.oRGBorHSLRBUnifiedGroup.addButton(this.oRbRGB);this.oRGBorHSLRBUnifiedGroup.addButton(this.oRbHSLV);this.setAggregation("_oRGBorHSLRBUnifiedGroup",this.oRGBorHSLRBUnifiedGroup,true);this.setAggregation("_oCPBox",this.oCPBox,true);this.setAggregation("_oHexField",this.oHexField,true);this.setAggregation("_oRedField",this.oRedField,true);this.setAggregation("_oGreenField",this.oGreenField,true);this.setAggregation("_oBlueField",this.oBlueField,true);this.setAggregation("_oHueField",this.oHueField,true);this.setAggregation("_oSatField",this.oSatField,true);this.setAggregation("_oLitField",this.oLitField,true);this.setAggregation("_oAlphaField",this.oAlphaField,true);this.setAggregation("_oAlphaField2",this.oAlphaField2,true);this.setAggregation("_oValField",this.oValField,true);this.setAggregation("_oSlider",this.oSlider,true);this.setAggregation("_oAlphaSlider",this.oAlphaSlider,true)};y.prototype._toggleFields=function(){if(!p.system.phone){this.toggleStyleClass("sapUiCPDisplayRGB",this.bPressed);this.bPressed=!this.bPressed}else{switch(this.sVisibleFiled){case"HSL":this.removeStyleClass("sapUiCPHexVisible");this.toggleStyleClass("sapUiCPDisplayRGB",false);this.addStyleClass("sapUiCPHideHex");this.sVisibleFiled="RGB";break;case"RGB":this.removeStyleClass("sapUiCPHexVisible");this.addStyleClass("sapUiCPHideHex");this.toggleStyleClass("sapUiCPDisplayRGB",true);this.sVisibleFiled="Hex";break;case"Hex":default:this.addStyleClass("sapUiCPHexVisible");this.removeStyleClass("sapUiCPHideHex");this.sVisibleFiled="HSL";break}}};return y});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/unified/ColorPickerHelper", ["sap/ui/core/Lib"],function(e){"use strict";var t;var n={isResponsive:function(){return true},factory:{createLabel:function(e){return new sap.m.Label(e)},createInput:function(e,t){return new sap.m.InputBase(e,t)},createSlider:function(e,t){return new sap.m.Slider(e,t)},createRadioButtonGroup:function(e){return new sap.m.RadioButtonGroup(e)},createRadioButtonItem:function(e){return new sap.m.RadioButton(e)},createButton:function(e,t){return new sap.m.Button(e,t)}}};var r={isResponsive:function(){return false},factory:{createLabel:function(e){return new sap.ui.commons.Label(e)},createInput:function(e,t){return new sap.ui.commons.TextField(e,t)},createSlider:function(e,t){if(t&&t.step){t.smallStepWidth=t.step;delete t.step}return new sap.ui.commons.Slider(e,t)},createRadioButtonGroup:function(e){if(e&&e.buttons){e.items=e.buttons;delete e.buttons}return new sap.ui.commons.RadioButtonGroup(e)},createRadioButtonItem:function(e){return new sap.ui.core.Item(e)}}};var o={isResponsive:function(){return false},factory:{createLabel:function(){throw new Error("no Label control available")},createInput:function(){throw new Error("no Input control available")},createSlider:function(){throw new Error("no Slider control available")},createRadioButtonGroup:function(){throw new Error("no RadioButtonGroup control available")},createRadioButtonItem:function(){throw new Error("no RadioButtonItem control available")}}};t={getHelper:function(){if(e.isLoaded("sap.m")){return n}else if(e.isLoaded("sap.ui.unified")){return r}return o}};return t});
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/unified/ColorPickerRenderer", ["./ColorPickerDisplayMode","sap/ui/Device","sap/ui/core/Lib"],function(e,o,t){"use strict";var r={apiVersion:2};var n=t.getResourceBundleFor("sap.ui.unified");r.render=function(t,r){var i=r.getDisplayMode(),s=r.bResponsive;t.openStart("div",r);t.accessibilityState(r,{role:"group",roledescription:n.getText("COLOR_PICKER_TITLE")});if(s){t.class("sapUiColorPicker-ColorPickerMatrix");t.class("sapUiColorPicker-"+i);t.class("sapUnifiedColorPicker");if(r._bHSLMode){t.class("sapUiColorPickerHSL")}}if(o.system.phone){t.class("sapUiCPPhone")}t.openEnd();if(!s){t.renderControl(r.getAggregation("_grid"))}else{switch(i){case e.Default:this.renderDefaultColorPicker(t,r);break;case e.Large:this.renderLargeColorPicker(t,r);break;case e.Simplified:this.renderSimplifiedColorPicker(t,r)}}t.close("div")};r.renderDefaultColorPicker=function(e,t){e.renderControl(t.getAggregation("_oCPBox"));if(o.system.phone){e.openStart("div");e.class("sapUiCPPhoneContent");e.openEnd();e.openStart("div");e.class("sapUiCPSlidersPhone");e.openEnd();e.renderControl(t.getAggregation("_oSlider"));e.renderControl(t.getAggregation("_oAlphaSlider"));e.close("div");this.renderMobileSwatches(e,t);e.close("div")}else{e.renderControl(t.getAggregation("_oSlider"));e.renderControl(t.getAggregation("_oAlphaSlider"));this.renderDesktopSwatchesAndHexFields(e,t)}e.openStart("div");e.class("sapUiCPDefaultWrapper");e.openEnd();if(o.system.phone){e.renderControl(t.getAggregation("_oHexField"));e.openStart("div");e.class("sapUiCPHexText");e.openEnd();e.text("Hex");e.close("div")}e.openStart("div");e.class("sapUiCPDefaultRGB");e.openEnd();e.renderControl(t.getAggregation("_oRedField"));this.renderEmptyDiv(e);e.renderControl(t.getAggregation("_oGreenField"));this.renderEmptyDiv(e);e.renderControl(t.getAggregation("_oBlueField"));this.renderEmptyDiv(e);e.renderControl(t.getAggregation("_oAlphaField"));e.close("div");e.openStart("div");e.class("sapUiCPDefaultHSLV");e.openEnd();e.renderControl(t.getAggregation("_oHueField"));this.renderEmptyDiv(e);e.renderControl(t.getAggregation("_oSatField"));e.openStart("div");e.class("sapUiCPPercentSymbol");e.openEnd();e.text("%");e.close("div");e.renderControl(t.getAggregation("_oLitField"));e.renderControl(t.getAggregation("_oValField"));if(t.getMode()==="HSL"){e.openStart("div");e.class("sapUiCPPercentSymbol");e.openEnd();e.text("%");e.close("div")}else{this.renderEmptyDiv(e)}e.renderControl(t.getAggregation("_oAlphaField2"));e.close("div");e.renderControl(t.getAggregation("_oButton"));this.renderRGBLabel(e,t);this.renderHSLVLabel(e,t);e.close("div")};r.renderLargeColorPicker=function(e,o){e.renderControl(o.getAggregation("_oCPBox"));e.renderControl(o.getAggregation("_oSlider"));e.renderControl(o.getAggregation("_oAlphaSlider"));this.renderDesktopSwatchesAndHexFields(e,o);e.renderControl(o.oRGBorHSLRBUnifiedGroup);e.openStart("div");e.class("sapUiCPRGBA");e.openEnd();e.renderControl(o.getAggregation("_oRedField"));this.renderEmptyDiv(e);e.renderControl(o.getAggregation("_oGreenField"));this.renderEmptyDiv(e);e.renderControl(o.getAggregation("_oBlueField"));this.renderEmptyDiv(e);e.renderControl(o.getAggregation("_oAlphaField"));e.close("div");this.renderRGBLabel(e,o);e.openStart("div");e.class("sapUiCPHSLV");e.openEnd();e.renderControl(o.getAggregation("_oHueField"));this.renderEmptyDiv(e);e.renderControl(o.getAggregation("_oSatField"));e.openStart("div");e.class("sapUiCPPercentSymbol");e.openEnd();e.text("%");e.close("div");const t=o.getMode()==="HSL";if(t){e.renderControl(o.getAggregation("_oLitField"))}else{e.renderControl(o.getAggregation("_oValField"))}e.openStart("div");e.class("sapUiCPPercentSymbol");if(!t){e.style("visibility","hidden")}e.openEnd();e.text("%");e.close("div");e.renderControl(o.getAggregation("_oAlphaField2"));e.close("div");this.renderHSLVLabel(e,o)};r.renderSimplifiedColorPicker=function(e,t){e.renderControl(t.getAggregation("_oCPBox"));if(o.system.phone){e.openStart("div");e.class("sapUiCPPhoneContent");e.openEnd();e.openStart("div");e.class("sapUiCPSlidersPhone");e.openEnd();e.renderControl(t.getAggregation("_oSlider"));e.close("div");e.renderControl(t.getAggregation("_oHexField"));this.renderMobileSwatches(e,t);e.openStart("div");e.class("sapUiCPHexWrapper");e.openEnd();e.openStart("div");e.class("sapUiCPHexText");e.openEnd();e.text("Hex");e.close("div");e.close("div");e.close("div")}else{e.renderControl(t.getAggregation("_oSlider"));this.renderDesktopSwatchesAndHexFields(e,t)}};r.renderDesktopSwatchesAndHexFields=function(e,o){e.openStart("div");e.class("sapUiCPComparisonWrapper");e.openEnd();e.openStart("div",o.getId()+"-ocBox");e.class("sapUiColorPicker-ColorPickerOldColor");e.attr("title",n.getText("COLOR_PICKER_CURRENT_COLOR_TOOLTIP"));e.openEnd();e.close("div");e.openStart("div",o.getId()+"-ncBox");e.class("sapUiColorPicker-ColorPickerNewColor");e.attr("title",n.getText("COLOR_PICKER_NEW_COLOR_TOOLTIP"));e.openEnd();e.close("div");e.close("div");e.openStart("div");e.class("sapUiCPHexWrapper");e.openEnd();e.openStart("span");e.class("sapUiCPHexText");e.openEnd();e.text("Hex");e.close("span");e.close("div");e.renderControl(o.getAggregation("_oHexField"))};r.renderMobileSwatches=function(e,o){e.openStart("div");e.class("sapUiCPComparisonWrapper");e.class("sapUiCPComparisonWrapperPhone");e.openEnd();e.openStart("div",o.getId()+"-ocBox");e.class("sapUiColorPicker-ColorPickerOldColor");e.openEnd();e.close("div");e.openStart("div",o.getId()+"-ncBox");e.class("sapUiColorPicker-ColorPickerNewColor");e.openEnd();e.close("div");e.close("div")};r.renderEmptyDiv=function(e){e.openStart("div");e.class("sapUiCPEmptyDiv");e.openEnd();e.close("div")};r.renderRGBLabel=function(e,o){e.openStart("div");e.class("sapUiCPRGBText");e.openEnd();e.openStart("span");e.class("sapUiCPText");e.openEnd();e.text("R");e.close("span");this.renderEmptyDiv(e);e.openStart("span");e.class("sapUiCPText");e.openEnd();e.text("G");e.close("span");this.renderEmptyDiv(e);e.openStart("span");e.class("sapUiCPText");e.openEnd();e.text("B");e.close("span");this.renderEmptyDiv(e);if(o.getDisplayMode()==="Default"){e.openStart("span");e.class("sapUiCPText");e.openEnd();e.text("A");e.close("span")}else{e.openStart("span");e.class("sapUiCPText");e.openEnd();e.close("span")}e.close("div")};r.renderHSLVLabel=function(e,o){e.openStart("div");e.class("sapUiCPHSLVText");e.openEnd();e.openStart("span");e.class("sapUiCPText");e.openEnd();e.text("H");e.close("span");this.renderEmptyDiv(e);e.openStart("span");e.class("sapUiCPText");e.openEnd();e.text("S");e.close("span");this.renderEmptyDiv(e);if(o.getMode()==="HSL"){e.openStart("span");e.class("sapUiCPText");e.openEnd();e.text("L");e.close("span")}else{e.openStart("span");e.class("sapUiCPText");e.openEnd();e.text("V");e.close("span")}this.renderEmptyDiv(e);e.openStart("span");e.class("sapUiCPText");e.openEnd();e.text("A");e.close("span");e.close("div")};return r},true);
/*!
 * OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/util/_FeatureDetection", [],function(){"use strict";var i={};function t(){var t=document.createElement("div");t.innerHTML='<div dir="rtl"><div><span></span><span></span></div></div>';t.firstChild.style="width: 1px; height: 1px; position: fixed; top: 0px; left: 0px; overflow: hidden";t.firstChild.firstChild.style="width: 2px";t.firstChild.firstChild.firstChild.style="display: inline-block; width: 1px";t.firstChild.firstChild.lastChild.style="display: inline-block; width: 1px";document.documentElement.appendChild(t);var e=t.firstChild;i.initialZero=e.scrollLeft==0;document.documentElement.removeChild(t)}t();var e={initialScrollPositionIsZero:function(){return i.initialZero}};return e});
sap.ui.require.preload({
	"sap/ui/integration/customElements/CustomElementEditor.js":function(){
/*!
* OpenUI5
 * (c) Copyright 2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.require(["sap/ui/integration/editor/Editor","sap/ui/integration/customElements/CustomElementBase"],function(t,e){"use strict";var r=e.extend(t,{});r.prototype.getCurrentSettings=function(){return this._getControl().getCurrentSettings()};r.prototype.getSeparatePreview=function(){return this._getControl().getSeparatePreview()};e.define("ui-integration-editor",r)});
}
},"sap-ui-integration-editor");
sap.ui.requireSync("sap/ui/integration/customElements/CustomElementEditor");
//# sourceMappingURL=sap-ui-integration-editor.js.map
